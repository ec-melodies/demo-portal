"format global";!function(a){var b=a.babelHelpers={};b.inherits=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},b.defaults=function(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a},b.createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b.createDecoratedClass=function(){function a(a,b,c){for(var d=0;d<b.length;d++){var e=b[d],f=e.decorators,g=e.key;if(delete e.key,delete e.decorators,e.enumerable=e.enumerable||!1,e.configurable=!0,("value"in e||e.initializer)&&(e.writable=!0),f){for(var h=0;h<f.length;h++){var i=f[h];if("function"!=typeof i)throw new TypeError("The decorator for method "+e.key+" is of the invalid type "+typeof i);e=i(a,g,e)||e}if(void 0!==e.initializer){c[g]=e;continue}}Object.defineProperty(a,g,e)}}return function(b,c,d,e,f){return c&&a(b.prototype,c,e),d&&a(b,d,f),b}}(),b.createDecoratedObject=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.decorators,f=d.key;if(delete d.key,delete d.decorators,d.enumerable=!0,d.configurable=!0,("value"in d||d.initializer)&&(d.writable=!0),e)for(var g=0;g<e.length;g++){var h=e[g];if("function"!=typeof h)throw new TypeError("The decorator for method "+d.key+" is of the invalid type "+typeof h);d=h(b,f,d)||d}d.initializer&&(d.value=d.initializer.call(b)),Object.defineProperty(b,f,d)}return b},b.defineDecoratedPropertyDescriptor=function(a,b,c){var d=c[b];if(d){var e={};for(var f in d)e[f]=d[f];e.value=e.initializer?e.initializer.call(a):void 0,Object.defineProperty(a,b,e)}},b.taggedTemplateLiteral=function(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))},b.taggedTemplateLiteralLoose=function(a,b){return a.raw=b,a},b.toArray=function(a){return Array.isArray(a)?a:Array.from(a)},b.toConsumableArray=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},b.slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b.slicedToArrayLoose=function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){for(var c,d=[],e=a[Symbol.iterator]();!(c=e.next()).done&&(d.push(c.value),!b||d.length!==b););return d}throw new TypeError("Invalid attempt to destructure non-iterable instance")},b.objectWithoutProperties=function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c},b.hasOwn=Object.prototype.hasOwnProperty,b.slice=Array.prototype.slice,b.bind=Function.prototype.bind,b.defineProperty=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},b.asyncToGenerator=function(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(d,g){try{var h=b[d](g),i=h.value}catch(j){return void c(j)}h.done?a(i):Promise.resolve(i).then(e,f)}var e=d.bind(null,"next"),f=d.bind(null,"throw");e()})}},b.interopExportWildcard=function(a,b){var c=b({},a);return delete c["default"],c},b.interopRequireWildcard=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b},b.interopRequireDefault=function(a){return a&&a.__esModule?a:{"default":a}},b._typeof=function(a){return a&&a.constructor===Symbol?"symbol":typeof a},b._extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b.get=function c(a,b,d){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,b);if(void 0===e){var f=Object.getPrototypeOf(a);return null===f?void 0:c(f,b,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},b.set=function d(a,b,c,e){var f=Object.getOwnPropertyDescriptor(a,b);if(void 0===f){var g=Object.getPrototypeOf(a);null!==g&&d(g,b,c,e)}else if("value"in f&&f.writable)f.value=c;else{var h=f.set;void 0!==h&&h.call(e,c)}return c},b.newArrowCheck=function(a,b){if(a!==b)throw new TypeError("Cannot instantiate an arrow function")},b.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b.objectDestructuringEmpty=function(a){if(null==a)throw new TypeError("Cannot destructure undefined")},b.temporalUndefined={},b.temporalAssertDefined=function(a,b,c){if(a===c)throw new ReferenceError(b+" is not defined - temporal dead zone");return!0},b.selfGlobal="undefined"==typeof a?self:a,b.typeofReactElement="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,b.defaultProps=function(a,b){if(a)for(var c in a)"undefined"==typeof b[c]&&(b[c]=a[c]);return b},b._instanceof=function(a,b){return null!=b&&b[Symbol.hasInstance]?b[Symbol.hasInstance](a):a instanceof b},b.interopRequire=function(a){return a&&a.__esModule?a["default"]:a}}("undefined"==typeof global?self:global),function(a){function b(a,b,e){return 4===arguments.length?c.apply(this,arguments):void d(a,{declarative:!0,deps:b,declare:e})}function c(a,b,c,e){d(a,{declarative:!1,deps:b,executingRequire:c,execute:e})}function d(a,b){b.name=a,a in m||(m[a]=b),b.normalizedDeps=b.deps}function e(a,b){if(b[a.groupIndex]=b[a.groupIndex]||[],-1==n.call(b[a.groupIndex],a)){b[a.groupIndex].push(a);for(var c=0,d=a.normalizedDeps.length;d>c;c++){var f=a.normalizedDeps[c],g=m[f];if(g&&!g.evaluated){var h=a.groupIndex+(g.declarative!=a.declarative);if(void 0===g.groupIndex||g.groupIndex<h){if(void 0!==g.groupIndex&&(b[g.groupIndex].splice(n.call(b[g.groupIndex],g),1),0==b[g.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");g.groupIndex=h}e(g,b)}}}}function f(a){var b=m[a];b.groupIndex=0;var c=[];e(b,c);for(var d=!!b.declarative==c.length%2,f=c.length-1;f>=0;f--){for(var g=c[f],i=0;i<g.length;i++){var k=g[i];d?h(k):j(k)}d=!d}}function g(a){return r[a]||(r[a]={name:a,dependencies:[],exports:{},importers:[]})}function h(b){if(!b.module){var c=b.module=g(b.name),d=b.module.exports,e=b.declare.call(a,function(a,b){if(c.locked=!0,"object"==typeof a)for(var e in a)d[e]=a[e];else d[a]=b;for(var f=0,g=c.importers.length;g>f;f++){var h=c.importers[f];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===c&&h.setters[i](d)}return c.locked=!1,b});c.setters=e.setters,c.execute=e.execute;for(var f=0,i=b.normalizedDeps.length;i>f;f++){var j,k=b.normalizedDeps[f],n=m[k],o=r[k];o?j=o.exports:n&&!n.declarative?j=n.esModule:n?(h(n),o=n.module,j=o.exports):j=l(k),o&&o.importers?(o.importers.push(c),c.dependencies.push(o)):c.dependencies.push(null),c.setters[f]&&c.setters[f](j)}}}function i(a){var b,c=m[a];if(c)c.declarative?k(a,[]):c.evaluated||j(c),b=c.module.exports;else if(b=l(a),!b)throw new Error("Unable to load dependency "+a+".");return(!c||c.declarative)&&b&&b.__useDefault?b["default"]:b}function j(b){if(!b.module){var c={},d=b.module={exports:c,id:b.name};if(!b.executingRequire)for(var e=0,f=b.normalizedDeps.length;f>e;e++){var g=b.normalizedDeps[e],h=m[g];h&&j(h)}b.evaluated=!0;var k=b.execute.call(a,function(a){for(var c=0,d=b.deps.length;d>c;c++)if(b.deps[c]==a)return i(b.normalizedDeps[c]);throw new TypeError("Module "+a+" not declared as a dependency.")},c,d);if(k&&(d.exports=k),c=d.exports,c&&c.__esModule)b.esModule=c;else{if(b.esModule={},("object"==typeof c||"function"==typeof c)&&c!==a)if(o){var l;for(var n in c)(l=Object.getOwnPropertyDescriptor(c,n))&&q(b.esModule,n,l)}else{var p=c&&c.hasOwnProperty;for(var n in c)(!p||c.hasOwnProperty(n))&&(b.esModule[n]=c[n])}b.esModule["default"]=c,q(b.esModule,"__useDefault",{value:!0})}}}function k(b,c){var d=m[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var g=d.normalizedDeps[e];-1==n.call(c,g)&&(m[g]?k(g,c):l(g))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function l(a){if(s[a])return s[a];if("@node/"==a.substr(0,6))return require(a.substr(6));var b=m[a];if(!b)throw"Module "+a+" not present.";return f(a),k(a,[]),m[a]=void 0,b.declarative&&q(b.module.exports,"__esModule",{value:!0}),s[a]=b.declarative?b.module.exports:b.esModule}var m={},n=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},o=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(p){o=!1}var q;!function(){try{Object.defineProperty({},"a",{})&&(q=Object.defineProperty)}catch(a){q=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(d){}}}}();var r={},s={};return function(a,d,e){return function(f){f(function(f){var g={_nodeRequire:"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,register:b,registerDynamic:c,get:l,set:function(a,b){s[a]=b},newModule:function(a){return a}};g.set("@empty",{});for(var h=0;h<d.length;h++)(function(a,b){b&&b.__esModule?g.register(a,[],function(a){return{setters:[],execute:function(){for(var c in b)"__esModule"==c||"object"==typeof c&&c+""=="Module"||a(c,b[c])}}}):g.registerDynamic(a,[],!1,function(){return b})})(d[h],arguments[h]);e(g);var i=l(a[0]);if(a.length>1)for(var h=1;h<a.length;h++)l(a[h]);return i.__useDefault?i["default"]:i})}}}("undefined"!=typeof self?self:global)(["1"],[],function(a){!function(b){function c(a,b){for(var c=a.split(".");c.length;)b=b[c.shift()];return b}function d(a){if(Object.keys)Object.keys(b).forEach(a);else for(var c in b)h.call(b,c)&&a(c)}function e(a){d(function(c){if(-1==i.call(j,c)){try{var d=b[c]}catch(e){j.push(c)}a(c,d)}})}var f,g=a,h=Object.prototype.hasOwnProperty,i=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},j=["_g","sessionStorage","localStorage","clipboardData","frames","external","mozAnimationStartTime","webkitStorageInfo","webkitIndexedDB"];g.set("@@global-helpers",g.newModule({prepareGlobal:function(a,d,g){var h=b.define;b.define=void 0,b.exports=void 0,b.module&&b.module.exports&&(b.module=void 0);var i;if(g){i={};for(var j in g)i[j]=g[j],b[j]=g[j]}return d||(f={},e(function(a,b){f[a]=b})),function(){var a;if(d)a=c(d,b);else{var g,j,k={};e(function(a,b){f[a]!==b&&"undefined"!=typeof b&&(k[a]=b,"undefined"!=typeof g?j||g===b||(j=!0):g=b)}),a=j?k:g}if(i)for(var l in i)b[l]=i[l];return b.define=h,a}}}))}("undefined"!=typeof self?self:global),function(b){function c(a,b){a=a.replace(h,"");var c=a.match(k),d=(c[1].split(",")[b]||"require").replace(l,""),e=m[d]||(m[d]=new RegExp(i+d+j,"g"));e.lastIndex=0;for(var f,g=[];f=e.exec(a);)g.push(f[2]||f[3]);return g}function require(a,b,c,d){if("object"==typeof a&&!(a instanceof Array))return require.apply(null,Array.prototype.splice.call(arguments,1,arguments.length-1));if("string"==typeof a&&"function"==typeof b&&(a=[a]),!(a instanceof Array)){if("string"==typeof a){var e=f.get(a);return e.__useDefault?e["default"]:e}throw new TypeError("Invalid require")}for(var g=[],h=0;h<a.length;h++)g.push(f["import"](a[h],d));Promise.all(g).then(function(a){b&&b.apply(null,a)},c)}function d(a,d,e){"string"!=typeof a&&(e=d,d=a,a=null),d instanceof Array||(e=d,d=["require","exports","module"].splice(0,e.length)),"function"!=typeof e&&(e=function(a){return function(){return a}}(e)),void 0===d[d.length-1]&&d.pop();var h,i,j;-1!=(h=g.call(d,"require"))&&(d.splice(h,1),a||(d=d.concat(c(e.toString(),h)))),-1!=(i=g.call(d,"exports"))&&d.splice(i,1),-1!=(j=g.call(d,"module"))&&d.splice(j,1);var k={name:a,deps:d,execute:function(a,c,g){for(var k=[],l=0;l<d.length;l++)k.push(a(d[l]));g.uri=g.id,g.config=function(){},-1!=j&&k.splice(j,0,g),-1!=i&&k.splice(i,0,c),-1!=h&&k.splice(h,0,function(b,c,d){return"string"==typeof b&&"function"!=typeof c?a(b):require.call(f,b,c,d,g.id)});var m=e.apply(-1==i?b:c,k);return"undefined"==typeof m&&g&&(m=g.exports),"undefined"!=typeof m?m:void 0}};if(a)n.anonDefine||n.isBundle?(n.anonDefine&&n.anonDefine.name&&f.registerDynamic(n.anonDefine.name,n.anonDefine.deps,!1,n.anonDefine.execute),n.anonDefine=null):n.anonDefine=k,n.isBundle=!0,f.registerDynamic(a,k.deps,!1,k.execute);else{if(n.anonDefine)throw new TypeError("Multiple defines for anonymous module");n.anonDefine=k}}function e(a){n.anonDefine=null,n.isBundle=!1;var c=b.module,e=b.exports,f=b.define;return b.module=void 0,b.exports=void 0,b.define=d,function(){b.define=f,b.module=c,b.exports=e}}var f=a,g=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},h=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,i="(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])",j="\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)",k=/\(([^\)]*)\)/,l=/^\s+|\s+$/g,m={};d.amd={};var n={isBundle:!1,anonDefine:null};f.set("@@amd-helpers",f.newModule({createDefine:e,require:require,define:d,lastModule:n})),f.amdDefine=d,f.amdRequire=require}("undefined"!=typeof self?self:global),a.register("2",[],function(){return{setters:[],execute:function(){}}}),a.register("3",[],function(){return{setters:[],execute:function(){}}}),a.register("4",["5"],function(a){"use strict";var b;return{setters:[function(a){b=a["default"]}],execute:function(){b.Control.StyledLayerControl=b.Control.Layers.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,c,d){var e,f;b.Util.setOptions(this,d),this._layers={},this._lastZIndex=0,this._handlingClick=!1,this._groupList=[],this._domGroups=[];for(e in a)for(var f in a[e].layers)this._addLayer(a[e].layers[f],f,a[e],!1);for(e in c)for(var f in c[e].layers)this._addLayer(c[e].layers[f],f,c[e],!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b,c){return this._addLayer(a,b,c,!1),this._update(),this},addOverlay:function(a,b,c){return this._addLayer(a,b,c,!0),this._update(),this},removeLayer:function(a){var c=b.Util.stamp(a);return delete this._layers[c],this._update(),this},removeGroup:function(a){for(var b in this._groupList)if(this._groupList[b].groupName==a){for(var c in this._layers)this._layers[c].group&&this._layers[c].group.name==a&&delete this._layers[c];delete this._groupList[b],this._update();break}},_initLayout:function(){var a="leaflet-control-layers",c=this._container=b.DomUtil.create("div",a);c.setAttribute("aria-haspopup",!0),b.Browser.touch?b.DomEvent.on(c,"click",b.DomEvent.stopPropagation):(b.DomEvent.disableClickPropagation(c),b.DomEvent.on(c,"wheel",b.DomEvent.stopPropagation));var d=document.createElement("section");d.className="ac-container "+a+"-list";var e=this._form=b.DomUtil.create("form");if(d.appendChild(e),this.options.collapsed){b.Browser.android||b.DomEvent.on(c,"mouseover",this._expand,this).on(c,"mouseout",this._collapse,this);var f=this._layersLink=b.DomUtil.create("a",a+"-toggle",c);f.href="#",f.title="Layers",b.Browser.touch?b.DomEvent.on(f,"click",b.DomEvent.stop).on(f,"click",this._expand,this):b.DomEvent.on(f,"focus",this._expand,this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=b.DomUtil.create("div",a+"-base",e),this._overlaysList=b.DomUtil.create("div",a+"-overlays",e),c.appendChild(d),this._containers=c.getElementsByClassName("ac-container");for(var g=0;g<this._containers.length;g++)this.options.container_width&&(this._containers[g].style.width=this.options.container_width),this._default_maxHeight=this.options.container_maxHeight?this.options.container_maxHeight:this._map._size.y-70,this._containers[g].style.maxHeight=this._default_maxHeight+"px";window.onresize=this._on_resize_window.bind(this)},_on_resize_window:function(){for(var a=0;a<this._containers.length;a++)this._containers[a].style.maxHeight=window.innerHeight-90<this._removePxToInt(this._default_maxHeight)?window.innerHeight-90+"px":this._removePxToInt(this._default_maxHeight)+"px"},_removePxToInt:function(a){return parseInt(a.replace("px",""))},_addLayer:function(a,c,d,e){var f=b.Util.stamp(a);if(this._layers[f]={layer:a,name:c,overlay:e},d){var g=this._groupList.indexOf(d);if(-1===g)for(var h in this._groupList)if(this._groupList[h].groupName==d.groupName){g=h;break}-1===g&&(g=this._groupList.push(d)-1),this._layers[f].group={name:d.groupName,id:g,expanded:d.expanded}}this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="",this._domGroups.length=0;var a,b,c=!1,d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay}},_onLayerChange:function(a){var c=this._layers[b.Util.stamp(a.layer)];if(c){this._handlingClick||this._update();var d=c.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;d&&this._map.fire(d,c)}},_createRadioElement:function(a,b){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(c+=' checked="checked"'),c+="/>";var d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(a){var c,d,e=document.createElement("div"),f=this._map.hasLayer(a.layer);a.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=f,e.className="menu-item-checkbox"):(c=this._createRadioElement("leaflet-base-layers",f),e.className="menu-item-radio"),c.layerId=b.Util.stamp(a.layer),b.DomEvent.on(c,"click",this._onInputClick,this);var g=document.createElement("span");if(g.innerHTML=" "+a.name,e.appendChild(c),e.appendChild(g),a.layer.StyledLayerControl&&a.layer.StyledLayerControl.removable){var h=document.createElement("input");h.type="button",h.className="bt_delete",b.DomEvent.on(h,"click",this._onDeleteClick,this),e.appendChild(h)}d=a.overlay?this._overlaysList:this._baseLayersList;var i=this._domGroups[a.group.id];if(i)i.lastElementChild.appendChild(e);else{i=document.createElement("div"),i.id="leaflet-control-accordion-layers-"+a.group.id;var j=a.group.expanded?' checked = "true" ':"",k=this.options.exclusive?' type="radio" ':' type="checkbox" ',l='<input id="ac'+a.group.id+'" name="accordion-1" class="menu" '+j+k+"/>",m='<label for="ac'+a.group.id+'">'+a.group.name+"</label>",n=document.createElement("article");n.className="ac-large",n.appendChild(e),this.options.group_maxHeight&&(n.style.maxHeight=this.options.group_maxHeight),i.innerHTML=l+m,i.appendChild(n),d.appendChild(i),this._domGroups[a.group.id]=i}return e},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;e>a;a++)b=d[a],c=this._layers[b.layerId],c&&(b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer));this._handlingClick=!1},_onDeleteClick:function(a){var b=a.target.parentElement.childNodes[0],c=this._layers[b.layerId];return!c.overlay&&b.checked?!1:(this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer),this.removeLayer(c.layer),a.target.parentNode.remove(),!1)},_expand:function(){b.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),b.Control.styledLayerControl=function(a,c,d){return new b.Control.StyledLayerControl(a,c,d)}}}}),a.register("6",[],function(){return{setters:[],execute:function(){}}}),a.register("7",["8","9","c","a","b"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.$,c=a.$$,d=a.HTML},function(a){e=a.i18n},function(a){f=a["default"]},function(a){g=a["default"]},function(a){h=a.EXTERNAL_LINK}],execute:function(){i=function(){return'\n<h1 class="sidebar-header">Workspace<div class="sidebar-close"><i class="glyphicon glyphicon-menu-left"></i></div></h1>\n\n<p style="margin-top: 20px">\n  <button type="button" class="btn btn-primary create-dataset-button">Load Data</button>\n</p>\n\n<div class="workspace-dataset-list">\n  <p class="user-hint">Click on "Add to Workspace" in the search tab to add datasets.</p>\n</div>\n'},j='\n<div class="modal fade" id="formatSelectModal" tabindex="-1" role="dialog" aria-labelledby="formatSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="formatSelectModalLabel">Select a format</h4>\n      </div>\n      <div class="modal-body">      \n        <span class="format-list"></span>\n        <div class="alert alert-info" role="alert">\n          The data you add here is not uploaded to a server. It stays within your browser and is gone when you reload the page.\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="dataCreateLoadModal" tabindex="-1" role="dialog" aria-labelledby="dataCreateLoadModalLabel">\n<div class="modal-dialog" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n      <h4 class="modal-title" id="dataCreateLoadModalLabel">Input your data</h4>\n    </div>\n    <div class="modal-body">      \n      <div class="form-group">\n        <label for="formDatasetTitle">Give your new dataset a name:</label>\n        <input class="form-control dataset-title" type="text" id="formDatasetTitle" placeholder="My new dataset">\n      </div>\n    \n      <span class="data-input-methods"></span>\n    </div>\n    <div class="modal-footer">\n      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    </div>\n  </div>\n</div>\n</div>\n',b("body").add(d(j)),k={"workspace-dataset":'<div class="panel workspace-dataset">\n    <div class="panel-heading dataset-title-heading">\n      <h4>\n        <span class="dataset-title"></span>\n        <small><a href="#" class="dataset-title-edit"><i class="glyphicon glyphicon-pencil"></i></a></small>\n        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n      </h4>\n    </div>\n    <div class="panel-heading dataset-title-edit-form" style="display:none">\n      <form>\n        <div class="form-group">\n          <input type="text" class="form-control">\n        </div>\n        <button type="submit" class="btn btn-default">Rename</button>\n        <button type="button" name="cancel" class="btn btn-default">Cancel</button>\n      </form>\n    </div>\n    <div class="panel-body" style="text-align: center">\n      <div class="throbber-loader loader">Loading...</div>\n    </div>\n  \n    <ul class="list-group workspace-dataset-distribution-list"></ul>\n  </div>',"workspace-dataset-distribution":'<li class="list-group-item workspace-dataset-distribution">\n    <p>Title: <em class="distribution-title"></em></p>\n    <p>Type: <span class="distribution-format"></span></p>\n    <p>Content: <span class="distribution-content"></span></p>\n    <div class="distribution-actions"></div>\n  </li>',"workspace-dataset-distribution-action":'<span class="workspace-dataset-distribution-action">\n    <button type="button" class="btn btn-primary"><span class="action-icon"></span> <span class="action-label"></span></button>\n  </span>',"workspace-dataset-distribution-action-external-link":'<span class="workspace-dataset-distribution-action">\n    <a target="_new" class="btn btn-primary"><span class="action-icon"></span> <span class="action-label"></span></a>\n  </span>',"workspace-dataset-distribution-error":'<li class="list-group-item list-group-item-danger workspace-dataset-distribution error-item">\n    <p>Type: <span class="distribution-format"></span></p>\n    <p>Error: <em class="error-message"></em></p>\n    <span class="error-details-section">\n      <p>Details:</p>\n      <small><pre class="error-details"></pre></small>\n    </span>\n  </li>',"format-button-item":'<span><button type="button" class="btn btn-primary format-button" data-dismiss="modal"></button></span> ',"url-input-panel":'<div class="panel panel-primary">\n    <div class="panel-heading">\n      <h4>By URL</h4>\n    </div>\n    <div class="panel-body">\n      <div class="input-group">\n        <input type="text" class="form-control data-url" placeholder="http://..." />\n        <span class="input-group-btn">\n          <button class="btn btn-primary load-url-button" type="button" data-dismiss="modal">Load</button>\n        </span>\n      </div>\n    </div>\n  </div>',"file-input-panel":'<div class="panel panel-primary">\n    <div class="panel-heading">\n      <h4>By Local File</h4>\n    </div>\n    <div class="panel-body">\n      <div class="input-group">\n        <input type="file" class="form-control data-file" />\n        <span class="input-group-btn">\n          <button class="btn btn-primary load-file-button" type="button" data-dismiss="modal">Load</button>\n        </span>\n      </div>\n    </div>\n  </div>',"text-input-panel":'<div class="panel panel-primary">\n    <div class="panel-heading">\n      <h4>By Direct Input</h4>\n    </div>\n    <div class="panel-body">\n      <textarea class="form-control data-textarea" rows="10"></textarea>\n      <button class="btn btn-primary load-text-button" type="button" data-dismiss="modal">Load</button>\n      <div class="alert alert-danger json-parse-error" style="display:none" role="alert"></div>\n    </div>\n  </div>'},l="\n<style>\n.virtual-dataset > .panel-heading {\n  background: repeating-linear-gradient( -45deg, #d9edf7, #d9edf7 10px, #CCE8F4 10px, #CCE8F4 20px );\n}\n.workspace-dataset-list, .load-input-button, .json-parse-error {\n  margin-top: 20px;\n}\n.format-button {\n  margin-bottom: 15px;\n}\n.virtual-dataset {\n  overflow: hidden;\n  max-height: 0;\n  transition: max-height 20s;\n}\n.blind-in {\n  max-height: 10000px;\n}\n@keyframes flash-icon {\n  0%   {color: black}\n  50%  {color: red}\n  100% {color: black}\n}\n.highlight-anim {\n  animation-name: flash-icon;\n  animation-duration: 0.8s;\n  animation-iteration-count: 4;\n  animation-timing-function: ease-in-out;\n}\n/* http://www.css-spinners.com/spinner/throbber */\n@keyframes throbber-loader {\n  0%  { background: #dde2e7 }\n  10% { background: #6b9dc8 }\n  40% { background: #dde2e7 }\n}\n/* :not(:required) hides these rules from IE9 and below */\n.throbber-loader:not(:required) {\n  animation: throbber-loader 2000ms 300ms infinite ease-out;\n  background: #dde2e7;\n  display: inline-block;\n  position: relative;\n  text-indent: -9999px;\n  width: 0.9em;\n  height: 1.5em;\n  margin: 0 1.6em;\n}\n.throbber-loader:not(:required):before, .throbber-loader:not(:required):after {\n  background: #dde2e7;\n  content: ' 0B';\n  display: inline-block;\n  width: 0.9em;\n  height: 1.5em;\n  position: absolute;\n  top: 0;\n}\n.throbber-loader:not(:required):before {\n  animation: throbber-loader 2000ms 150ms infinite ease-out;\n  left: -1.6em;\n}\n.throbber-loader:not(:required):after {\n  animation: throbber-loader 2000ms 450ms infinite ease-out;\n  right: -1.6em;\n}\n</style>\n",b("head").add(d(l)),m=function(a){function g(a,c){babelHelpers.classCallCheck(this,g),babelHelpers.get(Object.getPrototypeOf(g.prototype),"constructor",this).call(this),this.sidebar=a,this.id=c,b("#"+c).fill(d(i())),this.workspace=a.workspace,this.app=a.app,this._registerUIListeners(),this._registerModelListeners()}return babelHelpers.inherits(g,a),babelHelpers.createClass(g,[{key:"_registerUIListeners",value:function(){var a=this;b(".create-dataset-button","#"+this.id).on("click",function(){return a._createDatasetWorkflow()})}},{key:"_createDatasetWorkflow",value:function(){var a=this,c=function(){var c=b("#formatSelectModal");b(".format-list",c).fill();var g=!0,h=!1,i=void 0;try{for(var j,l=function(){var a=j.value;if(a.mediaTypes.some(function(a){return-1!==a.indexOf("/")})){var f=b(d(k["format-button-item"]));b(".format-button",f).fill(a.label).on("|click",function(){setTimeout(function(){return e(a)},100)}),b(".format-list",c).add(f)}},m=a.app.formats[Symbol.iterator]();!(g=(j=m.next()).done);g=!0)l()}catch(n){h=!0,i=n}finally{try{!g&&m["return"]&&m["return"]()}finally{if(h)throw i}}new f(c[0]).open()},e=function(c){var e=b("#dataCreateLoadModal"),g=b(".data-input-methods",e);g.fill(),g.add(d(k["url-input-panel"])),g.add(d(k["file-input-panel"]));var h=function(a){var d=b(".dataset-title",e).get("value")||"(No title)",f={title:{en:d},virtual:!0,distributions:[{title:{en:"Data"},mediaType:c.mediaTypes[0],url:a}]};return f},i=function(b){a.workspace.addDataset(b),a.workspace.requestFocus(b)};b(".load-url-button",e).on("|click",function(){var a=b(".data-url",e).get("value");i(h(a))});var j=function(b){var d=new Blob([b],{type:c.mediaTypes[0]}),e=URL.createObjectURL(d),f=h(e),g=function j(b){var c=b.dataset;c===f&&(URL.revokeObjectURL(e),delete c.distributions[0].url,a.workspace.off("distributionsLoad",j))};a.workspace.on("distributionsLoad",g),i(f)};b(".load-file-button",e).on("|click",function(){var a=b(".data-file",e)[0].files[0];j(a)}),c.mediaTypes.some(function(a){return-1!==a.indexOf("json")||-1!==a.indexOf("xml")})&&(g.add(d(k["text-input-panel"])),b(".load-text-button",e).on("|click",function(a){var d=b(".data-textarea",e).get("value");if(c.mediaTypes.some(function(a){return-1!==a.indexOf("json")}))try{JSON.parse(d)}catch(f){return b(".json-parse-error",e).show().fill(f.message),void a.stopPropagation()}j(d)})),new f(e[0]).open()};c()}},{key:"_registerModelListeners",value:function(){var a=this;this.workspace.on("add",function(c){var d=c.dataset,e=c.parent,f=b("a.sidebar-tab","#"+a.sidebar.id).filter(function(c){return b(c).get("@href")==="#"+a.id});f.set("-highlight-anim"),setTimeout(function(){f.set("+highlight-anim")},100),a._addDataset(d,e),b(".user-hint","#"+a.id).remove()}),this.workspace.on("remove",function(a){var c=a.dataset;b(c.domEl).remove()}),this.workspace.on("distributionsLoading",function(a){var c=a.dataset;b(".panel-body",c.domEl).show()}),this.workspace.on("distributionsLoad",function(a){var c=a.dataset;b(".panel-body",c.domEl).hide()}),this.workspace.on("distributionLoad",function(b){var c=b.dataset,d=b.distribution;a._addDistribution(c,d)}),this.workspace.on("distributionLoadError",function(b){var c=b.dataset,d=b.distribution,e=b.error;a._addDistributionLoadError(c,d,e)}),this.workspace.on("requestFocus",function(b){var c=b.dataset,d={behavior:"smooth"};if(c.domEl)c.domEl.scrollIntoView(d);else{var e=function f(b){b.dataset===c&&(c.domEl.scrollIntoView(d),a.off("add",f))};a.on("add",e)}}),this.workspace.on("titleChange",function(a){var c=a.dataset;b(".dataset-title",c.domEl).fill(e(c.title))})}},{key:"_addDataset",value:function(a,f){var g=this,h=d(k["workspace-dataset"])[0],i=b(".workspace-dataset-list","#"+this.id);f&&-1!==this.workspace.datasets.indexOf(f)?b(f.domEl).addAfter(h):i.add(h),
a.domEl=h,a.virtual?(b(h).set("+panel-info +virtual-dataset"),setTimeout(function(){return b(h).set("+blind-in")},100)):b(h).set("+panel-default"),b(".dataset-title",h).fill(e(a.title)),b(".close",h).on("click",function(){g.workspace.removeDataset(a)});var j=c("input",b(".dataset-title-edit-form",h));b(".dataset-title-edit",h).on("click",function(){b(".dataset-title-heading",h).hide(),b(".dataset-title-edit-form",h).show(),j.value=e(a.title)}),b("form",b(".dataset-title-edit-form",h)).on("submit",function(){g.workspace.setDatasetTitle(a,j.value),b(".dataset-title-heading",h).show(),b(".dataset-title-edit-form",h).hide()}),b("button",b(".dataset-title-edit-form",h)).filter(function(a){return"cancel"===a.name}).on("click",function(){b(".dataset-title-heading",h).show(),b(".dataset-title-edit-form",h).hide()}),this.fire("add",{dataset:a})}},{key:"_addDistribution",value:function(a,c){var f=d(k["workspace-dataset-distribution"]);b(".workspace-dataset-distribution-list",a.domEl).add(f),c.domEl=f;var g=c.metadata;if(b(".distribution-title",f).fill(e(c.title)),b(".distribution-format",f).fill(g.format),b(".distribution-content",f).fill(g.content),c.actions){var i=!0,j=!1,l=void 0;try{for(var m,n=function(){var a=m.value,c=void 0;a.type===h?(c=d(k["workspace-dataset-distribution-action-external-link"]),b("a",c).set("@href",a.run())):(c=d(k["workspace-dataset-distribution-action"]),b("button",c).on("click",function(){return a.run()}));var e=function(){b(".action-label",c).fill(a.label),a.icon&&b(".action-icon",c).fill(d(a.icon))};e(),a.on("labelChange",function(){return e()}),b(".distribution-actions",f).add(c)},o=c.actions[Symbol.iterator]();!(i=(m=o.next()).done);i=!0)n()}catch(p){j=!0,l=p}finally{try{!i&&o["return"]&&o["return"]()}finally{if(j)throw l}}}}},{key:"_addDistributionLoadError",value:function(a,c,e){var f=d(k["workspace-dataset-distribution-error"]);b(".workspace-dataset-distribution-list",a.domEl).add(f),c.domEl=f,b(".distribution-format",f).fill(c.formatImpl.label),b(".error-message",f).fill(e.message),Object.keys(e).length>0?b(".error-details",f).fill(JSON.stringify(e,null,1)):b(".error-details-section",f).remove()}}]),g}(g),a("default",m)}}}),a.registerDynamic("d",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(a){"undefined"!=typeof c&&"object"==typeof b?"undefined"!=typeof window?c.exports=a():c.exports=a:window.Tab=a()}(function(){var a=function(a,b){b=b||{},this.isIE=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)?parseFloat(RegExp.$1):!1,this.tab="object"==typeof a?a:document.querySelector(a),this.tabs=this.tab.parentNode.parentNode,this.dropdown=this.tabs.querySelector(".dropdown"),/dropdown-menu/.test(this.tabs.className)&&(this.dropdown=this.tabs.parentNode,this.tabs=this.tabs.parentNode.parentNode),this.options=b,this.duration=150,this.options.duration=this.isIE&&this.isIE<10?0:b.duration||this.duration,this.init()};a.prototype={init:function(){this.actions(),this.tab.addEventListener("click",this.action,!1)},actions:function(){var a=this;this.action=function(b){b=b||window.e,b.preventDefault();var c=b.target,d=document.getElementById(c.getAttribute("href").replace("#","")),e=new RegExp("(?:^|\\s)dropdown-menu(?!\\S)"),f=a.getActiveTab(),g=a.getActiveContent();/active/.test(c.parentNode.className)||(a.removeClass(f,"active"),a.addClass(c.parentNode,"active"),a.dropdown&&(e.test(a.tab.parentNode.parentNode.className)?/active/.test(a.dropdown.className)||a.addClass(a.dropdown,"active"):/active/.test(a.dropdown.className)&&a.removeClass(a.dropdown,"active")),a.removeClass(g,"in"),setTimeout(function(){a.removeClass(g,"active"),a.addClass(d,"active")},a.options.duration),setTimeout(function(){a.addClass(d,"in")},2*a.options.duration))},this.addClass=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},this.removeClass=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(b,"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},this.getActiveTab=function(){var a=this.tabs.querySelectorAll(".active");return 1!==a.length||/dropdown/.test(a[0].className)?a.length>1?a[a.length-1]:void 0:a[0]},this.getActiveContent=function(){var a=this.getActiveTab().getElementsByTagName("A")[0].getAttribute("href").replace("#","");return a&&document.getElementById(a)}}};var b=document.querySelectorAll("[data-toggle='tab'], [data-toggle='pill']"),c=b.length,d=0;for(d;c>d;d++){var e=b[d],f={};f.duration=e.getAttribute("data-duration")&&e.getAttribute("data-duration")||!1,new a(e,f)}return a}),d.define=e,c.exports}),a.register("e",["5","8","9","c","d","b","f"],function(a){"use strict";function b(a){var b=a.format;return!b&&a.mediaType in q&&(b=q[a.mediaType]),b||(b=a.mediaType||"unknown"),b}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){c=a["default"]},function(a){d=a.$,e=a.HTML},function(a){f=a.i18n,g=a.sortByKey,h=a.MELODIES_DCAT_CATALOG_URL},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a.PROCESS},function(a){l=a.loadDCATCatalog}],execute:function(){m={"dataset-list-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p class="dataset-publisher"></p>\n    <p class="dataset-distribution-labels"></p>\n    <p class="dataset-description"></p>\n    <p class="dataset-temporal"><i class="glyphicon glyphicon-time"></i> <span class="dataset-temporal-text"></span></p>\n    <p class="dataset-spatial-geometry"><i class="glyphicon glyphicon-globe"></i> <span class="dataset-spatial-geometry-text"></span></p>\n    <div class="dataset-spatial-minimap"></div>\n    <button type="button" class="btn btn-success dataset-analyse-button" style="display:none">\n      <span class="glyphicon glyphicon-flash" aria-hidden="true"></span> Add to Workspace\n    </button>\n  </li>\n  ',"dataset-error":'\n  <li class="list-group-item list-group-item-danger error-item">\n    <h4 class="list-group-item-heading dataset-title">Problem while loading catalogue</h4>\n    <p>Error: <em class="error-message"></em></p>\n    <p>Details:</p>\n    <small><pre class="error-details"></pre></small>\n  </li>\n  '},n='\n<div class="modal fade" id="dcatSourceModal" tabindex="-1" role="dialog" aria-labelledby="dcatSourceModalLabel">\n  <div class="modal-dialog modal-lg" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="dcatSourceModalLabel">DCAT Source View</h4>\n      </div>\n      <div class="modal-body">\n        <!-- Nav tabs -->\n        <ul class="nav nav-tabs" role="tablist">\n          <li role="presentation" class="active"><a href="#dcat-original" role="tab" data-toggle="tab">Original</a></li>\n          <li role="presentation"><a href="#dcat-framed" role="tab" data-toggle="tab">Framed</a></li>\n          <li role="presentation"><a href="#dcat-frame" role="tab" data-toggle="tab">Frame</a></li>\n        </ul>\n  \n        <!-- Tab panes -->\n        <div class="tab-content">\n          <div role="tabpanel" class="tab-pane active" id="dcat-original">\n            <pre><code class="dcat-original"></code></pre>\n          </div>\n          <div role="tabpanel" class="tab-pane" id="dcat-framed">\n            <pre><code class="dcat-framed"></code></pre>\n          </div>\n          <div role="tabpanel" class="tab-pane" id="dcat-frame">\n            <pre><code class="dcat-frame"></code></pre>\n          </div>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<style>\n.catalog-url-panel {\n  margin-top: 20px;\n}\n.dataset-spatial-minimap {\n  margin-bottom: 10px;\n}\n.catalog-load-default {\n  padding-top: 0;\n}\n</style>\n',d("body").add(e(n)),o=function(){return'\n<h1 class="sidebar-header">Search<div class="sidebar-close"><i class="glyphicon glyphicon-menu-left"></i></div></h1>\n\n<div class="panel panel-default catalog-url-panel">\n  <div class="panel-heading">\n    <h3 class="panel-title">\n      <a href="http://json-ld.org/" title="JSON-LD Data"><img width="32" src="http://json-ld.org/images/json-ld-data-32.png" alt="JSON-LD-logo-32"></a>\n      <span style="vertical-align:middle">\n        <a href="http://www.w3.org/TR/vocab-dcat/">DCAT</a> Catalogue\n      </span>\n      <button type="button" class="btn btn-primary pull-right jsonld-view-button"><i class="glyphicon glyphicon-eye-open"></i> JSON-LD</button>\n    </h3>\n  </div>\n  <div class="panel-body catalog-url-info">\n    <a href="#" class="catalog-url-edit"><i class="glyphicon glyphicon-pencil"></i></a>\n    <a class="catalog-url"></a>\n  </div>\n  <div class="panel-body catalog-load-default" style="display:none">\n    <button type="button" name="load-default" class="btn btn-primary">Load MELODIES Catalogue</button>\n  </div>\n  <div class="panel-body catalog-url-form" style="display:none">\n    <form>\n      <div class="form-group">\n        <input type="text" class="form-control" placeholder="http://">\n      </div>\n      <button type="submit" class="btn btn-default">Load</button>\n      <button type="button" name="cancel" class="btn btn-default">Cancel</button>\n    </form>\n  </div>\n</div>\n\n<ul class="list-group dataset-list"></ul>\n'},p=function(){function a(b,c){babelHelpers.classCallCheck(this,a),this.sidebar=b,this.id=c,this.map=this.sidebar.map,this.layerControl=this.sidebar.layerControl,d("#"+c).fill(e(o())),this.catalogue=b.catalogue,this.workspace=b.workspace,this._registerUIListeners(),this._registerModelListeners()}return babelHelpers.createClass(a,[{key:"_registerUIListeners",value:function(){var a=this,b=d("#"+this.id),c=d("input",d(".catalog-url-form",b));d(".catalog-url-edit",b).on("click",function(){d(".catalog-url-info",b).hide(),d(".catalog-url-form",b).show(),c.set("value",a.url)}),d("form",d(".catalog-url-form",b)).on("submit",function(){a.catalogue.loadFromDCAT(c.get("value")).then(function(){d(".catalog-url-info",b).show(),d(".catalog-url-form",b).hide()})}),d("button",d(".catalog-url-form",b)).filter(function(a){return"cancel"===a.name}).on("click",function(){d(".catalog-url-info",b).show(),d(".catalog-url-form",b).hide()}),d("button",d(".catalog-load-default",b)).on("click",function(){a.catalogue.loadFromDCAT(h)}),d(".jsonld-view-button",b).on("click",function(){a._showDCATInfoModal()});var e=document.querySelectorAll("#dcatSourceModal [data-toggle='tab']"),f=!0,g=!1,i=void 0;try{for(var k,l=e[Symbol.iterator]();!(f=(k=l.next()).done);f=!0){var m=k.value;new j(m)}}catch(n){g=!0,i=n}finally{try{!f&&l["return"]&&l["return"]()}finally{if(g)throw i}}}},{key:"_showDCATInfoModal",value:function(){var a=d("#dcatSourceModal");new i(a[0]).open();var b=function(a){return JSON.stringify(a,null,2)};l(this.catalogue.url).then(function(c){var e=c.raw,f=c.compacted,g=c.frame;d(".dcat-original",a).fill(b(e)),d(".dcat-framed",a).fill(b(f)),d(".dcat-frame",a).fill(b(g))})}},{key:"_registerModelListeners",value:function(){var a=this;this.catalogue.on("load",function(b){var c=b.url;a._clearList(),a._addDatasets(a.catalogue.datasets),a._setCatalogueUrl(c);var e=d(".catalog-load-default",d("#"+a.id));c!==h?e.show():e.hide()}),this.catalogue.on("loadError",function(b){var c=b.url,f=b.error;a._clearList(),a._setCatalogueUrl(c);var g=e(m["dataset-error"]);d(".error-message",g).fill(f.message);var h=JSON.stringify(f,null,1);d(".error-details",g).fill(h),d(".dataset-list","#"+a.id).fill(g),console.log(f)})}},{key:"_clearList",value:function(){d(".dataset-list","#"+this.id).fill()}},{key:"_setCatalogueUrl",value:function(a){this.url=a,d(".catalog-url","#"+this.id).set("@href",a).fill(a)}},{key:"_addDatasets",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"title":arguments[1];a=g(a,function(a){return f(a[b])});var c=!0,d=!1,e=void 0;try{for(var h,i=a[Symbol.iterator]();!(c=(h=i.next()).done);c=!0){var j=h.value;this._addDataset(j)}}catch(k){d=!0,e=k}finally{try{!c&&i["return"]&&i["return"]()}finally{if(d)throw e}}}},{key:"_addDataset",value:function(a){var g=this,h=e(m["dataset-list-item"]);d(".dataset-list","#"+this.id).add(h);var i=f(a.title),j=f(a.description),l=a["dcat:landingPage"]||a.landingPage;if(l?d(".dataset-title",h).fill(e('<a href="'+l+'" target="_new" class="external dataset-title">'+i+"</a>")):d(".dataset-title",h).fill(i),d(".dataset-description",h).fill(j),a.publisher){var n=a.publisher["foaf:homepage"]||a.publisher.homepage;n?d(".dataset-publisher",h).fill(e('<a class="external" href="'+n+'"><em>'+a.publisher.name+"</em></a>")):d(".dataset-publisher",h).fill(e("<em>"+a.publisher.name+"</em>"))}else d(".dataset-publisher",h).hide();if(a.temporal){var o=a.temporal.startDate.substr(0,10)+" to "+a.temporal.endDate.substr(0,10);d(".dataset-temporal-text",h).fill(o)}else d(".dataset-temporal",h).hide();var p=void 0,q=a.spatial&&a.spatial.geometry?JSON.parse(a.spatial.geometry):null;if(q){var r=c.geoJson(q);p=r.getBounds().equals([[-90,-180],[90,180]])}if(q&&!p?!function(){d(".dataset-spatial-geometry",h).hide();var a=c.map(d(".dataset-spatial-minimap",h)[0],{touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,zoomControl:!1,attributionControl:!1}).on("load",function(){c.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(a)});setTimeout(function(){var b=c.geoJson(q,{style:function(){return{color:"#ff7800",weight:1,clickable:!1}}});a.fitBounds(b.getBounds(),{reset:!0}),b.addTo(a)},1e3)}():(d(".dataset-spatial-minimap",h).hide(),p?d(".dataset-spatial-geometry-text",h).fill("global"):d(".dataset-spatial-geometry",h).hide()),a.distributions){var s=a.distributions.map(function(a){return{label:b(a),mediaType:a.mediaType}});s.sort(function(a,b){return a.label.toLowerCase().localeCompare(b.label.toLowerCase())});var t=new Set,u=!1,v=!0,w=!1,x=void 0;try{for(var y,z=s[Symbol.iterator]();!(v=(y=z.next()).done);v=!0){var A=y.value;if(!t.has(A.label)){t.add(A.label);var B=this._findFormatImpl(A.mediaType);B&&(u=!0);var C=B?B.shortLabel:A.label,D=B?"success":"default",E=B&&B.actionClasses.some(function(a){return a.type===k})?'<span class="glyphicon glyphicon-flash"></span> ':"",F=void 0;F=e(B?'<span class="label label-success">'+E+C+"</span> ":'<span class="label label-'+D+'">'+C+"</span> "),d(".dataset-distribution-labels",h).add(F)}}}catch(G){w=!0,x=G}finally{try{!v&&z["return"]&&z["return"]()}finally{if(w)throw x}}u&&(d(".dataset-analyse-button",h).show(),d(".dataset-analyse-button",h).on("click",function(){g.workspace.addDataset(a)}))}}},{key:"_findFormatImpl",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=this.sidebar.app.formats[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;if(g.supports(a))return g}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}}]),a}(),a("default",p),q={"application/x-netcdf":"netCDF"}}}}),a.register("10",[],function(){return{setters:[],execute:function(){}}}),a.registerDynamic("11",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(){L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,options:{position:"left"},initialize:function(a,b){var c,d;for(L.setOptions(this,b),this._sidebar=L.DomUtil.get(a),L.DomUtil.addClass(this._sidebar,"sidebar-"+this.options.position),L.Browser.touch&&L.DomUtil.addClass(this._sidebar,"leaflet-touch"),c=this._sidebar.children.length-1;c>=0;c--)d=this._sidebar.children[c],"DIV"==d.tagName&&L.DomUtil.hasClass(d,"sidebar-content")&&(this._container=d);for(this._tabitems=this._sidebar.querySelectorAll("ul.sidebar-tabs > li, .sidebar-tabs > ul > li"),c=this._tabitems.length-1;c>=0;c--)this._tabitems[c]._sidebar=this;for(this._panes=[],this._closeButtons=[],c=this._container.children.length-1;c>=0;c--)if(d=this._container.children[c],"DIV"==d.tagName&&L.DomUtil.hasClass(d,"sidebar-pane")){this._panes.push(d);for(var e=d.querySelectorAll(".sidebar-close"),f=0,g=e.length;g>f;f++)this._closeButtons.push(e[f])}},addTo:function(a){var b,c;for(this._map=a,b=this._tabitems.length-1;b>=0;b--)c=this._tabitems[b],L.DomEvent.on(c.querySelector("a"),"click",L.DomEvent.preventDefault).on(c.querySelector("a"),"click",this._onClick,c);for(b=this._closeButtons.length-1;b>=0;b--)c=this._closeButtons[b],L.DomEvent.on(c,"click",this._onCloseClick,this);return this},removeFrom:function(a){var b,c;for(this._map=null,b=this._tabitems.length-1;b>=0;b--)c=this._tabitems[b],L.DomEvent.off(c.querySelector("a"),"click",this._onClick);for(b=this._closeButtons.length-1;b>=0;b--)c=this._closeButtons[b],L.DomEvent.off(c,"click",this._onCloseClick,this);return this},open:function(a){var b,c;for(b=this._panes.length-1;b>=0;b--)c=this._panes[b],c.id==a?L.DomUtil.addClass(c,"active"):L.DomUtil.hasClass(c,"active")&&L.DomUtil.removeClass(c,"active");for(b=this._tabitems.length-1;b>=0;b--)c=this._tabitems[b],c.querySelector("a").hash=="#"+a?L.DomUtil.addClass(c,"active"):L.DomUtil.hasClass(c,"active")&&L.DomUtil.removeClass(c,"active");return this.fire("content",{id:a}),L.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),L.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var a=this._tabitems.length-1;a>=0;a--){var b=this._tabitems[a];L.DomUtil.hasClass(b,"active")&&L.DomUtil.removeClass(b,"active")}return L.DomUtil.hasClass(this._sidebar,"collapsed")||(this.fire("closing"),L.DomUtil.addClass(this._sidebar,"collapsed")),this},_onClick:function(){L.DomUtil.hasClass(this,"active")?this._sidebar.close():L.DomUtil.hasClass(this,"disabled")||this._sidebar.open(this.querySelector("a").hash.slice(1))},_onCloseClick:function(){this.close()}}),L.control.sidebar=function(a,b){return new L.Control.Sidebar(a,b)}}(),e()}),a.register("12",["5","7","8","10","11","13","e"],function(a){"use strict";var b,c,d,e,f,g,h;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a.$,e=a.HTML},function(a){},function(a){},function(a){},function(a){f=a["default"]}],execute:function(){g=function(a,b,c){return'\n<div id="'+a+'" class="sidebar collapsed">\n  <!-- Nav tabs -->\n  <div class="sidebar-tabs">\n      <ul role="tablist">\n          <li><a href="#'+b+'" role="tab" class="sidebar-tab"><i class="glyphicon glyphicon-search"></i></a></li>\n          <li><a href="#'+c+'" role="tab" class="sidebar-tab"><i class="glyphicon glyphicon-flash"></i></a></li>\n      </ul>\n  </div>\n  \n  <!-- Tab panes -->\n  <div class="sidebar-content">\n      <div class="sidebar-pane" id="'+b+'"></div>\n      <div class="sidebar-pane" id="'+c+'"></div>\n  </div>\n</div>\n<style>\n.error-item {\n  word-wrap: break-word;\n}\n'},h=function(){function a(h){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],j=i.app,k=i.sidebarId,l=void 0===k?"sidebar":k,m=i.searchPaneId,n=void 0===m?"search":m,o=i.workspacePaneId,p=void 0===o?"workspace":o,q=i.layerControl,r=void 0===q?null:q;babelHelpers.classCallCheck(this,a),this.map=h,this.app=j,this.catalogue=j.catalogue,this.workspace=j.workspace,this.id=l,this.layerControl=r,d("body").addFront(e(g(l,n,p))),d("#"+h.getContainer().id).set("+sidebar-map"),this.panes={Search:new f(this,n),Workspace:new c(this,p)},this.control=b.control.sidebar(l).addTo(h)}return babelHelpers.createClass(a,[{key:"open",value:function(a){this.control.open(a.id)}}]),a}(),a("default",h)}}}),a.register("14",["b"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a["default"],c=a.EXTERNAL_LINK}],execute:function(){d=function(a){function b(a,c){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,c),this.icon='<span class="glyphicon glyphicon-link"></span>',this.label="Source"}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"run",value:function(){return this.context.distribution.url}},{key:"isSupported",get:function(){return this.context.distribution.url}}]),b}(b),a("default",d),d.type=c}}}),a.register("15",["5","8"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a["default"]},function(a){c=a.$,d=a.HTML}],execute:function(){e="template-image-legend",f='\n<template id="'+e+'">\n  <div class="info legend image-legend">\n    <div class="legend-title">\n      <strong class="legend-title-text"></strong>\n      <a href="#"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span></a>\n    </div>\n    <img alt="Legend" />\n  </div>\n</template>\n<style>\n.legend {\n  color: #555;\n}\n.legend-title {\n  margin-bottom:3px;\n}\n</style>\n',g=function(a){function b(a,g){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,g.position?{position:g.position}:{}),this.url=a,this.title=g.title,this.layer=g.layer,this.id=g.id||e,g.id||null!==document.getElementById(e)||c("body").add(d(f))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onRemove",value:function(a){this.layer&&a.off("layerremove",this._remove)}},{key:"onAdd",value:function(a){var b=this;this.layer&&(this._remove=function(c){c.layer===b.layer&&b.removeFrom(a)},a.on("layerremove",this._remove));var d=document.importNode(c("#"+this.id)[0].content,!0).children[0];return c("img",d).set("@src",this.url),this.title?c(".legend-title-text",d).fill(this.title):c(".legend-title",d).hide(),c("a",d).on("click",function(){var a=c("img",d);a.get("$$show")?(a.hide(),c(".glyphicon",d).set("+glyphicon-menu-down -glyphicon-menu-up")):(a.show(),c(".glyphicon",d).set("-glyphicon-menu-down +glyphicon-menu-up"))}),d}}]),b}(b.Control),a("default",g)}}}),a.register("16",["5","9","15","b"],function(a){"use strict";function b(a,b){return a+"?service=wms&version=1.1.1&request=GetLegendGraphic&format=image/png&transparent=true&layer="+b}var c,d,e,f,g,h;return{setters:[function(a){c=a["default"]},function(a){d=a.i18n},function(a){e=a["default"]},function(a){f=a["default"],g=a.VIEW}],execute:function(){h=function(a){function f(a,b){babelHelpers.classCallCheck(this,f),babelHelpers.get(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,b),this.data=a,this._setHidden(),this.layers=[]}return babelHelpers.inherits(f,a),babelHelpers.createClass(f,[{key:"_setVisible",value:function(){this.visible=!0,this.label="Hide",this.icon='<span class="glyphicon glyphicon-eye-close"></span>',this.fire("labelChange")}},{key:"_setHidden",value:function(){this.visible=!1,this.label="View",this.icon='<span class="glyphicon glyphicon-eye-open"></span>',this.fire("labelChange")}},{key:"run",value:function(){var a=this;if(this.visible)return this.remove(),void this._setHidden();this._setVisible();var f=this.context.map,g=this.data.layers,h=this.data.url,i=d(this.context.dataset.title),j=!1,k=!0,l=!1,m=void 0;try{for(var n,o=function(){var d=n.value,g=c.tileLayer.wms(h,{layers:d.name,format:"image/png",transparent:!0}).on("loading",function(){return a.fire("loading")}).on("load",function(){return a.fire("load")});f.on("layeradd",function(a){if(a.layer===g){var c=b(h,d.name);new e(c,{layer:a.layer,title:d.title}).addTo(f)}}),j||(j=!0,g.addTo(f)),f.layerControl.addOverlay(g,'<span class="label label-success">WMS</span> '+d.title,{groupName:i,expanded:!0}),a.layers.push(g)},p=g[Symbol.iterator]();!(k=(n=p.next()).done);k=!0)o()}catch(q){l=!0,m=q}finally{try{!k&&p["return"]&&p["return"]()}finally{if(l)throw m}}}},{key:"remove",value:function(){var a=this.context.map,b=!0,c=!1,d=void 0;try{for(var e,f=this.layers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;a.hasLayer(g)&&a.removeLayer(g),a.layerControl.removeLayer(g)}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}this.layers=[]}},{key:"isSupported",get:function(){return!0}}]),f}(f),a("default",h),h.type=g}}}),a.register("17",["5","9","b"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a["default"]},function(a){c=a.i18n},function(a){d=a["default"],e=a.VIEW}],execute:function(){f=function(a){function d(a,b){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,b),this.data=a,this._setHidden(),this.layers=[]}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"_setVisible",value:function(){this.visible=!0,this.label="Hide",this.icon='<span class="glyphicon glyphicon-eye-close"></span>',this.fire("labelChange")}},{key:"_setHidden",value:function(){this.visible=!1,this.label="View",this.icon='<span class="glyphicon glyphicon-eye-open"></span>',this.fire("labelChange")}},{key:"run",value:function(){if(this.visible)return this.remove(),void this._setHidden();this._setVisible();var a=this.context.map,d="#CC2222",e={color:d,weight:2,opacity:.6,fillOpacity:0,fillColor:d},f={color:d,weight:3,opacity:.6,fillOpacity:.65,fillColor:d},g=function(a){a.target.setStyle(f)},h=function(a){a.target.setStyle(e)},i=b.geoJson(this.data,{pointToLayer:function(a,c){return b.circleMarker(c)},onEachFeature:function(a,b){b.setStyle(e),b.on("mouseover",g),b.on("mouseout",h),b.bindPopup('<pre><code class="code-nowrap">'+JSON.stringify(a.properties,null,4)+"</code></pre>",{maxWidth:400,maxHeight:300})}}).addTo(a),j=c(this.context.dataset.title),k=c(this.context.distribution.title),l='<span class="label label-success">GeoJSON</span> '+k;a.layerControl.addOverlay(i,l,{groupName:j,expanded:!0}),this.layers.push(i)}},{key:"remove",value:function(){var a=this.context.map,b=!0,c=!1,d=void 0;try{for(var e,f=this.layers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;a.hasLayer(g)&&a.removeLayer(g),a.layerControl.removeLayer(g)}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}this.layers=[]}},{key:"isSupported",get:function(){return!0}}]),d}(d),a("default",f),f.type=e}}}),a.register("18",["5","8"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a["default"]},function(a){c=a.$,d=a.HTML}],execute:function(){e='<div class="info" style="clear:none">\n  <button></button>\n</div>',f=function(a){function f(a){babelHelpers.classCallCheck(this,f),babelHelpers.get(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,a.position?{position:a.position}:{position:"topleft"}),this._title=a.title}return babelHelpers.inherits(f,a),babelHelpers.createClass(f,[{key:"onAdd",value:function(a){var f=this,g=d(e)[0];return b.DomEvent.disableClickPropagation(g),c("button",g).fill(this._title).on("click",function(){return f.fire("click")}),g}}]),f}(b.Control),f.include(b.Mixin.Events),a("default",f)}}}),a.register("19",["8","9","18","20","1b","1c","1d","1e","1f","c","1a","b"],function(a){"use strict";function b(a){var b=void 0;return a.coverages?((a.domainType===w||a.domainType===x)&&(b={type:H.OBSERVATIONS,data:a}),1===a.coverages.length&&a.coverages[0].domainType===v&&(b={type:H.MODEL,data:a.coverages[0]})):a.domainType===v&&(b={type:H.MODEL,data:a}),b&&0===c(b.data).length&&(b=void 0),b}function c(a){var b=[].concat(babelHelpers.toConsumableArray(a.parameters.values()));return b.filter(function(a){return!a.observedProperty.categories})}function d(a,b,c,d){var e=babelHelpers.slicedToArray(c,2),f=e[0],g=e[1],h=babelHelpers.slicedToArray(d,2),i=h[0],j=h[1];f=a[s(a,f)],g=a[s(a,g)],i=b[s(b,i)],j=b[s(b,j)];var k=Math.abs(a[0]-a[1]),l=Math.abs(b[0]-b[1]),m=Math.round((g-f)/k+1),n=Math.round((j-i)/l+1),o=new Uint8Array(m*n),p=function(a,b){return m*b+a},q=function(a){return Math.round((a-f)/k)},r=function(a){return Math.round((a-i)/l)},t=function(a,b){return p(q(a),r(b))};return{nx:m,ny:n,dx:k,dy:l,get:function(a,b){return o[p(a,b)]},set:function(a,b,c){return o[p(a,b)]=c},vset:function(a,b,c){return o[t(a,b)]=c},ix2v:function(a){return f+a*k},iy2v:function(a){return i+a*l}}}function e(a,b){if(0===b.length)return Promise.resolve([]);var c="x",e="y",g=b.map(function(a){var b=babelHelpers.slicedToArray(a,1),c=b[0];return c}),h=b.map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[1];return c}),i=[Math.min.apply(Math,babelHelpers.toConsumableArray(g)),Math.max.apply(Math,babelHelpers.toConsumableArray(g))],j=[Math.min.apply(Math,babelHelpers.toConsumableArray(h)),Math.max.apply(Math,babelHelpers.toConsumableArray(h))];return a.loadDomain().then(function(g){var h=d(g.axes.get(c).values,g.axes.get(e).values,i,j),k=!0,l=!1,m=void 0;try{for(var n,o=b[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=babelHelpers.slicedToArray(n.value,2),q=p[0],r=p[1];h.vset(q,r,1)}}catch(s){l=!0,m=s}finally{try{!k&&o["return"]&&o["return"]()}finally{if(l)throw m}}var t=f(h),u=t.map(function(a){var b=babelHelpers.slicedToArray(a,4),c=b[0],d=b[1],e=b[2],f=b[3];return(e-c+1)*(f-d+1)}),v=u.filter(function(a){return a>1}).length;console.log("grid subset queries total: "+t.length+", connected: "+v);var w=t.map(function(a){var b=babelHelpers.slicedToArray(a,4),c=b[0],d=b[1],e=b[2],f=b[3];return[h.ix2v(c),h.iy2v(d),h.ix2v(e),h.iy2v(f)]}),x=h.dx,y=h.dy,z=w.map(function(a){var b=babelHelpers.slicedToArray(a,4),c=b[0],d=b[1],e=b[2],f=b[3];return[c-x/2,d-y/2,e+x/2,f+y/2]}),A=w.map(function(b){var c=babelHelpers.slicedToArray(b,4),d=c[0],e=c[1],f=c[2],g=c[3];return a.subsetByValue({x:{start:d,stop:f},y:{start:e,stop:g}},{eagerload:!0})});return Promise.all(A).then(function(a){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=b[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){for(var i=babelHelpers.slicedToArray(g.value,2),j=i[0],k=i[1],l=void 0,m=0;m<t.length;m++){var n=babelHelpers.slicedToArray(z[m],4),o=n[0],p=n[1],q=n[2],r=n[3];if(j>=o&&q>=j&&k>=p&&r>=k){l=a[m];break}}if(!l)throw new Error("bug");c.push(l.subsetByValue({x:{start:j,stop:j},y:{start:k,stop:k}}))}}catch(s){e=!0,f=s}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return Promise.all(c)})})}function f(a){for(var b=a.nx,c=a.ny,d=c-2;d>=0;d--)for(var e=0;b>e;e++){var f=a.get(e,d);f>0&&a.set(e,d,f+a.get(e,d+1))}for(var g=[],d=0;c>d;d++)for(var e=0;b>e;e++){var h=a.get(e,d);if(0!==h){for(var i=e+1;b>i&&a.get(i,d)>=h;)i++;i-=1;var j=d+h-1;g.push([e,d,i,j]);for(var k=d+1;j>=k;k++)for(var l=e;i>=l;l++)a.set(l,k,0);e=i}}return g}function g(a,b){var c=a.paging&&a.paging.next,d=c?a.paging.next.load(b):Promise.resolve(),e=a.coverages;return d.then(function(a){return a?g(a,b).then(function(a){return e.concat(a)}):e})}function h(a,b,c){function d(e){var f=babelHelpers.slicedToArray(b[e],4),h=f[0],i=f[1],j=f[2],k=f[3],l={x:{start:h,stop:j},y:{start:i,stop:k}};return a.query().filter(l).execute(c).then(function(a){return g(a,c)}).then(function(c){var f={id:a.id,domainType:a.domainType,parameters:a.parameters,coverages:c};return e<b.length-1&&(f.paging={next:{load:function(a){return d(e+1)}}}),f})}return d(0)}function i(a,b,c,d){function e(a,b,c){var d=(b-a)/(c-1);return function(b){return a+b*d}}for(var f=e(a[0],a[1],c),g=e(b[0],b[1],d),h=[],i=0;c-1>i;i++)for(var j=0;d-1>j;j++){var k=f(i),l=f(i+1),m=g(j),n=g(j+1);h.push([k,m,l,n])}return h}function j(a,b,c,d){function f(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(!a)return[void 0,void 0];var c=a.values,d=Math.min(c[0],c[c.length-1]),e=Math.max(c[0],c[c.length-1]);if(b&&c.length>1){var f=Math.abs(c[0]-c[1])/2;d-=f,e+=f}return[d,e]}var g="z",j="x",l="y",m=a,n=m.parameters.get(c);return m.loadDomain().then(function(p){function q(b){var f=b.paging&&b.paging.next,h=f?b.paging.next.load({eagerload:!0}):void 0,i=b.coverages,n=[Promise.all(i.map(function(a){return a.loadDomain()})),Promise.all(i.map(function(a){return a.loadRange(d)}))];return Promise.all(n).then(function(b){var f=babelHelpers.slicedToArray(b,2),n=f[0],o=f[1],r=i.map(function(a,b){return{cov:a,domain:n[b],range:o[b]}}),v=r.map(function(a){return{x:a.domain.axes.get(j).values[0],y:a.domain.axes.get(l).values[0]}});v.length>0&&!function(){var a=u.getProjection(n[0]),b=u.getProjection(p);v=v.map(function(c){return u.reproject(c,a,b);
}).map(function(a){var b=a.x,c=a.y;return[b,c]})}();var w=e(m,v);return w.then(function(b){var e=[],f=!0,i=!1,m=void 0;try{for(var n,o=function(){var b=babelHelpers.slicedToArray(n.value,2),f=b[0],h=b[1];u=!0,v=!1,w=void 0;try{for(x=f.domain.axes[Symbol.iterator]();!(u=(y=x.next()).done);u=!0){var i=babelHelpers.slicedToArray(y.value,2),m=i[0],o=i[1];if(m!==g&&o.values.length>1)throw new Error("Only "+g+" can be a varying axis in in-situ coverages, not: "+m)}}catch(p){v=!0,w=p}finally{try{!u&&x["return"]&&x["return"]()}finally{if(v)throw w}}var q=f.domain.axes.get(j).values[0],r=f.domain.axes.get(l).values[0],z=f.domain.axes.has(g),A=z?f.domain.axes.get(g).values:null,B=A&&A.length>1;if(B&&!D)throw new Error("Model grid must have a "+g+" axis if insitu data has a varying "+g+" axis");if(!z&&F)throw new Error("Model grid must not have a varying "+g+" axis if insitu data has no "+g+" axis");var C=h.loadRange(c).then(function(b){var e=[],h=[];if(F)for(var i=function(a,b,c,d,e){return c+(e-c)*(a-b)/(d-b)},j=0;j<A.length;j++){var l=A[j];if(!(I>l||l>J)){var m=f.range.get(babelHelpers.defineProperty({},g,j));if(null!==m){var n=t(E,l),o=babelHelpers.slicedToArray(n,2),p=o[0],u=o[1],v=E[p],w=E[u],x=b.get(babelHelpers.defineProperty({},g,p)),y=b.get(babelHelpers.defineProperty({},g,u));if(null!==x&&null!==y){var z=void 0;z=p===u?x:i(l,v,x,w,y),e.push(z),h.push(m)}}}}else{var C=b.get({}),m=void 0;if(B){var D=s(A,E[0]);m=f.range.get(babelHelpers.defineProperty({},g,D))}else m=f.range.get({});null!==C&&null!==m&&(e=[C],h=[m])}if(0!==e.length){var G=e.length,H=k(e,h).map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return Math.pow(c-d,2)}).reduce(function(a,b){return a+b}),K=Math.sqrt(H/G),L={type:"Coverage",profile:"PointCoverage",wasGeneratedBy:{type:"ModelObservationComparisonActivity",qualifiedUsage:{model:{entity:a.id,hadRole:"modelToCompareAgainst",parameterKey:c},observation:{entity:f.cov.id,hadRole:"observationToCompareAgainst",parameterKey:d}}},domain:{type:"Domain",profile:"Point",axes:{x:{values:[q]},y:{values:[r]}}},ranges:{rmse:{type:"Range",values:[K],dataType:"float"}}};return L}});e.push(C)},p=r.map(function(a,c){return[a,b[c]]})[Symbol.iterator]();!(f=(n=p.next()).done);f=!0){var u,v,w,x,y;o()}}catch(z){i=!0,m=z}finally{try{!f&&p["return"]&&p["return"]()}finally{if(i)throw m}}return Promise.all([Promise.all(e),h]).then(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return d?q(d).then(function(a){return c.concat(a)}):c})})})}var r=!0,v=!1,w=void 0;try{for(var x,y=p.axes[Symbol.iterator]();!(r=(x=y.next()).done);r=!0){var z=babelHelpers.slicedToArray(x.value,2),A=z[0],B=z[1];if(-1===[j,l,g].indexOf(A)&&B.values.length>1)throw new Error("Only x,y,"+g+" can be varying axes in the model grid, not: "+A)}}catch(C){v=!0,w=C}finally{try{!r&&y["return"]&&y["return"]()}finally{if(v)throw w}}var D=p.axes.has(g),E=D?p.axes.get(g).values:null,F=E&&E.length>1,G=f(p.axes.get(g)),H=babelHelpers.slicedToArray(G,2),I=H[0],J=H[1],K=f(p.axes.get(j),!0),L=f(p.axes.get(l),!0),M=6,N=M,O=i(K,L,M,N);return h(b,O,{eagerload:!0}).then(q).then(function(e){e=e.filter(function(a){return a});var f={"@context":{prov:"http://www.w3.org/ns/prov#",wasGeneratedBy:"prov:wasGeneratedBy",qualifiedUsage:{"@id":"prov:qualifiedUsage","@container":"@index"},entity:{"@id":"prov:entity","@type":"@id"},hadRole:{"@id":"prov:hadRole","@type":"@vocab"},covstats:"http://covstats#",ModelObservationComparisonActivity:"covstats:ModelObservationComparisonActivity",modelToCompareAgainst:"covstats:modelToCompareAgainst",observationsToCompareAgainst:"covstats:observationsToCompareAgainst",observationToCompareAgainst:"covstats:observationToCompareAgainst",parameterKey:"covstats:parameterKey"},type:"CoverageCollection",profile:"PointCoverageCollection",wasGeneratedBy:{type:"ModelObservationComparisonActivity",qualifiedUsage:{model:{entity:a.id,hadRole:"modelToCompareAgainst",parameterKey:c},observations:{entity:b.id,hadRole:"observationsToCompareAgainst",parameterKey:d}}},parameters:{rmse:{type:"Parameter",unit:n.unit,observedProperty:{label:{en:"RMSE of "+o(n.observedProperty.label)},statisticalMeasure:"http://www.uncertml.org/statistics/standard-deviation"},preferredPalette:{interpolation:"linear",colors:["green","orange","red"]}}},referencing:[{components:["x","y"],system:u.getReferenceObject(p,j).system}],coverages:e};return f})})}function k(a,b){return a.map(function(c,d){return[a[d],b[d]]})}var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;return{setters:[function(a){l=a.$,m=a.$$,n=a.HTML},function(a){o=a.i18n,p=a.COVJSON_PREFIX},function(a){q=a["default"]},function(a){r=a},function(a){s=a.indexOfNearest,t=a.indicesOfNearest},function(a){u=a},function(a){v=a.COVJSON_GRID,w=a.COVJSON_POINT,x=a.COVJSON_VERTICALPROFILE},function(a){y=a["default"]},function(a){z=a["default"]},function(a){A=a["default"]},function(a){B=a["default"]},function(a){C=a["default"],D=a.VIEW,E=a.PROCESS}],execute:function(){F=p+"PointCoverageCollection",G=p+"VerticalProfileCoverageCollection",H={MODEL:1,OBSERVATIONS:2},I='\n<div class="modal fade" id="comparisonDatasetSelectModal" tabindex="-1" role="dialog" aria-labelledby="comparisonDatasetSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="comparisonDatasetSelectModalLabel">Select a dataset to compare against</h4>\n      </div>\n      <div class="modal-body">\n        \n        <div class="panel panel-primary">\n          <div class="panel-heading">\n            <h4>Model-Observation comparison</h4>\n          </div>\n          <div class="panel-body">\n            <p class="help-text-model">\n              The gridded input dataset that you selected is assumed to be the model dataset that is compared\n              against an observation collection dataset (point or vertical profile observations).\n              Please select the observation dataset below.\n            </p>\n            <p class="help-text-observations">\n              The collection-type input dataset that you selected is assumed to be the observation set that is\n              compared against a model grid dataset.\n              Please select the model dataset below.\n            </p>\n            <div class="alert alert-info comparison-distribution-list-empty" role="alert"><strong>None found.</strong></div>\n          </div>\n          \n          <ul class="list-group comparison-distribution-list"></ul>\n        </div>\n       \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="comparisonParametersSelectModal" tabindex="-1" role="dialog" aria-labelledby="comparisonParametersSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="comparisonParametersSelectModalLabel">Select parameters</h4>\n      </div>\n      <div class="modal-body">\n        \n        <div class="panel panel-primary">\n          <div class="panel-body">\n            <p>\n              Select the parameters you wish to compare.\n              Note that currently no unit conversion is done.\n            </p>\n              \n            <div class="form-horizontal">\n              <div class="form-group">\n                <label for="modelComparisonParameter" class="col-sm-3 control-label">Model</label>\n                <div class="col-sm-9">\n                  <select id="modelComparisonParameter" class="form-control model-parameter-select"></select>\n                </div>\n              </div>\n              \n              <div class="form-group">\n                <label for="observationComparisonParameter" class="col-sm-3 control-label">Observations</label>\n                <div class="col-sm-9">\n                  <select id="observationComparisonParameter" class="form-control observation-parameter-select"></select>\n                </div>\n              </div>\n            </div>\n                          \n            <div class="parameter-select-button-container"></div>\n          </div>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n',l("body").add(n(I)),J={"comparison-distribution-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p>Distribution: <span class="distribution-title"></span></p>\n    <button type="button" class="btn btn-primary select-button" data-dismiss="modal">\n      Select\n    </button>\n  </li>\n  ',"params-select-button":'<button type="button" class="btn btn-primary params-select-button" data-dismiss="modal">Select</button>'},K=function(a){function d(a,b){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,b),this.data=a,this.label="Intercompare",this.icon='<span class="glyphicon glyphicon-stats"></span>'}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"run",value:function(){this._displayDistributionSelectModal()}},{key:"_displayDistributionSelectModal",value:function(){var a=this,c=b(this.data),d=c.data,e=c.type,f=l("#comparisonDatasetSelectModal"),g=void 0;e===H.MODEL?(l(".help-text-model",f).show(),l(".help-text-observations",f).hide(),g=this.context.workspace.filterDistributions(function(a){if(a.formatImpl instanceof B){var c=b(a.data);return c&&c.type===H.OBSERVATIONS}})):(l(".help-text-model",f).hide(),l(".help-text-observations",f).show(),g=this.context.workspace.filterDistributions(function(a){if(a.formatImpl instanceof B){var c=b(a.data);return c&&c.type===H.MODEL}})),l(".comparison-distribution-list",f).fill();var h=!0,i=!1,j=void 0;try{for(var k,p=function(){var c=k.value,g=c.distribution,h=c.dataset,i=l(n(J["comparison-distribution-item"]));l(".dataset-title",i).fill(o(h.title)),l(".distribution-title",i).fill(o(g.title)),l(".select-button",i).on("|click",function(){if(e===H.MODEL)a._displayParameterSelectModal(d,g.data);else{var c=b(g.data).data;a._displayParameterSelectModal(c,d)}}),l(".comparison-distribution-list",f).add(i)},q=g[Symbol.iterator]();!(h=(k=q.next()).done);h=!0)p()}catch(r){i=!0,j=r}finally{try{!h&&q["return"]&&q["return"]()}finally{if(i)throw j}}m(".comparison-distribution-list-empty",f).style.display=g.length>0?"none":"block",new A(f[0]).open()}},{key:"_displayParameterSelectModal",value:function(a,b){var d=this,e=c(a),f=c(b),g=l("#comparisonParametersSelectModal"),h=function(a,b){a.fill();var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=r.toAscii(h.unit)||"unknown unit",j=o(h.observedProperty.label)+" ("+i+")";a.add(n('<option value="'+h.key+'">'+j+"</option>"))}}catch(k){d=!0,e=k}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}};h(l(".model-parameter-select",g),e),h(l(".observation-parameter-select",g),f),l(".parameter-select-button-container",g).fill(n(J["params-select-button"])),l(".params-select-button",g).on("|click",function(){var c=m(".model-parameter-select",g).value,e=m(".observation-parameter-select",g).value;d._displayIntercomparisonUI(a,b,c,e)}),new A(g[0]).open()}},{key:"_displayIntercomparisonUI",value:function(a,b,c,d){var e=this,f=this.context.map;this._intercomparisonActive=!0;var g=function(f,g){e.fire("loading");var h=void 0;if(f){var i=new Date(f.getTime()-1e3*g),k=new Date(f.getTime()+1e3*g);h=[a.subsetByValue({t:f.toISOString()}),b.query().filter({t:{start:i.toISOString(),stop:k.toISOString()}}).execute({eagerload:!0})]}else h=[a,b];Promise.all(h).then(function(a){var b=babelHelpers.slicedToArray(a,2),h=b[0],i=b[1];j(h,i,c,d).then(function(a){e.fire("load");var b=e.context.workspace;e._intercomparisonResultDataset&&b.removeDataset(e._intercomparisonResultDataset);var c=JSON.stringify(a,null,2),d=URL.createObjectURL(new Blob([c],{type:"application/prs.coverage+json"})),h="Intercomparison";if(f){var i=f.toISOString(),j="± "+Math.round(g/60)+" min";h+=" [Model: "+i+", Observations: "+j+"]"}var k={title:{en:h},virtual:!0,distributions:[{title:{en:h},mediaType:"application/prs.coverage+json",url:d}]};e._intercomparisonResultDataset=k;var l=function m(a){var c=a.dataset;c===k&&(c.distributions[0].actions.find(function(a){return a.type===D}).run(),b.off("distributionsLoad",m))};b.on("distributionsLoad",l),b.addDataset(k,e.context.dataset)})})};a.loadDomain().then(function(a){a.axes.has("t")?!function(){var b=a.axes.get("t").values.map(function(a){return new Date(a)}),c={timeSlices:b,time:b[0]};e._modelTimeControl=new y(c,{title:"Model time"}).on("change",function(a){var b=a.time,c=parseInt(e._obsTimeDeltaControl.value);g(b,c)}).addTo(f);var d=[{value:60,label:"± 1 min"},{value:600,label:"± 10 min"},{value:1800,label:"± 30 min"},{value:3600,label:"± 1 hour"},{value:86400,label:"± 1 day"},{value:2592e3,label:"± 30 days"}];e._obsTimeDeltaControl=new z(d,{title:"Observation time delta"}).on("change",function(a){var b=parseInt(a.value),d=c.time;g(d,b)}).addTo(f),g(c.time,d[0].value);var h=new q({title:"Exit Intercomparison"}).addTo(f);h.on("click",function(){f.removeControl(e._modelTimeControl),f.removeControl(e._obsTimeDeltaControl),f.removeControl(h);var a=e._intercomparisonResultDataset.distributions[0].actions.find(function(a){return a.type===D});a.visible&&a.run(),e._intercomparisonActive=!1})}():g()})}},{key:"isSupported",get:function(){return b(this.data)}}]),d}(C),a("default",K),K.type=E}}}),a.register("21",["5","8","9","22","23","c","1d","b"],function(a){"use strict";function b(a){var b=[];switch(a.type){case"Polygon":case"MultiPolygon":b.push({type:"Feature",geometry:a});break;case"Feature":switch(a.geometry.type){case"Polygon":case"MultiPolygon":b.push(a)}break;case"FeatureCollection":var c=!0,d=!1,e=void 0;try{for(var f,g=a.features[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;switch(h.geometry.type){case"Polygon":case"MultiPolygon":b.push(h)}}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}return b}var c,d,e,f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){c=a["default"]},function(a){d=a.$,e=a.$$,f=a.HTML},function(a){g=a.i18n},function(a){h=a["default"]},function(a){i=a},function(a){j=a["default"]},function(a){k=a.COVJSON_GRID},function(a){l=a["default"],m=a.PROCESS}],execute:function(){n='\n<div class="modal fade" id="geojsonSelectModal" tabindex="-1" role="dialog" aria-labelledby="geojsonSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="geojsonSelectModalLabel">Select a GeoJSON resource</h4>\n      </div>\n      <div class="modal-body">\n        <div class="panel panel-primary remap-remapping-distributions">\n          <div class="panel-heading">\n            <h4>Select the GeoJSON resource containing the subsetting polygon</h4>\n          </div>\n          <div class="panel-body">\n            <p>\n              Only those GeoJSON resources are shown which contain at least one (multi)polygon.\n              After selecting a GeoJSON resource, all polygons will be displayed on the map\n              and you can pick the one that should be used for subsetting.\n            </p>\n            <div class="alert alert-info geojson-distribution-list-empty" role="alert"><strong>None found.</strong></div>\n          </div>\n          <ul class="list-group geojson-distribution-list"></ul>\n        </div>\n               \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n',d("body").add(f(n)),o={"geojson-distribution-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p>Distribution: <span class="distribution-title"></span></p>\n    <p>Polygons: <span class="polygon-count"></span></p>\n    \n    <button type="button" class="btn btn-primary select-button" data-dismiss="modal">\n      Select\n    </button>\n  </li>\n  '},p=function(a){function l(a,b){babelHelpers.classCallCheck(this,l),babelHelpers.get(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,b),this._isSingleCoverage(a)?this.cov=this._getSingleCoverage(a):this.cov=a,this.label="Polygon Subset",this.icon='<span class="glyphicon glyphicon-scissors"></span>'}return babelHelpers.inherits(l,a),babelHelpers.createClass(l,[{key:"_isSingleCoverage",value:function(a){try{return this._getSingleCoverage(a),!0}catch(b){return!1}}},{key:"_getSingleCoverage",value:function(a){if(a.coverages){if(1===a.coverages.length)return a.coverages[0];throw new Error("not a single coverage")}return a}},{key:"run",value:function(){var a=this,c=d("#geojsonSelectModal"),h=this._findGeoJSONDistributions();d(".geojson-distribution-list",c).fill();var i=!0,k=!1,l=void 0;try{for(var m,n=function(){var e=m.value,h=e.distribution,i=e.dataset,j=d(f(o["geojson-distribution-item"]));d(".dataset-title",j).fill(g(i.title)),d(".distribution-title",j).fill(g(h.title));var k=b(h.data).length;d(".polygon-count",j).fill(k),d(".select-button",j).on("|click",function(){a._displayPolygons(h)}),d(".geojson-distribution-list",c).add(j)},p=h[Symbol.iterator]();!(i=(m=p.next()).done);i=!0)n()}catch(q){k=!0,l=q}finally{try{!i&&p["return"]&&p["return"]()}finally{if(k)throw l}}e(".geojson-distribution-list-empty",c).style.display=h.length>0?"none":"block",new j(c[0]).open()}},{key:"_displayPolygons",value:function(a){var d=this,e={type:"FeatureCollection",features:b(a.data)},f=this.context.map,g="#CC2222",h={color:g,weight:2,opacity:.6,fillOpacity:0,fillColor:g},i={color:g,weight:3,opacity:.6,fillOpacity:.65,fillColor:g},j=function(a){a.target.setStyle(i)},k=function(a){a.target.setStyle(h)},l=c.geoJson(e,{onEachFeature:function(a,b){b.setStyle(h),b.on("mouseover",j),b.on("mouseout",k),b.on("click",function(){d._applySubsetAndCreateVirtualDataset(a),f.removeLayer(l)})}}).addTo(f);f.fitBounds(l.getBounds())}},{key:"_applySubsetAndCreateVirtualDataset",value:function(a){var b=this,d=" [subsetted by polygon]";this.fire("loading");var e=c.geoJson(a).getBounds();i.subsetByBbox(this.cov,[e.getWest(),e.getSouth(),e.getEast(),e.getNorth()]).then(function(c){i.maskByPolygon(c,a.geometry).then(function(a){var c={title:{en:g(b.context.dataset.title)+d},virtual:!0,distributions:[{title:{en:g(b.context.distribution.title)+d},mediaType:"coveragedata",data:a}]},e=b.context.workspace;e.addDataset(c,b.context.dataset),e.requestFocus(c),b.fire("load")})})}},{key:"_findGeoJSONDistributions",value:function(){return this.context.workspace.filterDistributions(function(a){return a.formatImpl instanceof h?b(a.data).length>0:!1})}},{key:"isSupported",get:function(){return this._isSingleCoverage(this.cov)&&this.cov.domainType===k?!0:!1}}]),l}(l),a("default",p),p.type=m}}}),a.register("24",["8","9","25","c","1c","1d","b"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){b=a.$,c=a.$$,d=a.HTML},function(a){e=a.i18n},function(a){f=a},function(a){g=a["default"]},function(a){h=a},function(a){i=a.COVJSON_GRID},function(a){j=a["default"],k=a.PROCESS}],execute:function(){l='\n<div class="modal fade" id="statisticsOptionsModal" tabindex="-1" role="dialog" aria-labelledby="statisticsOptionsModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="statisticsOptionsModalLabel">Select reference periods</h4>\n      </div>\n      <div class="modal-body">\n        \n        <div class="panel panel-primary">\n          <div class="panel-body">\n            <p>\n              Select the reference periods for which the summary statistics shall be calculated.\n              The more periods you select, the longer the processing time will be.\n            </p>\n              \n            <select multiple class="form-control ref-periods-select">\n            </select>\n            \n            <div class="calculate-button-container"></div>\n          </div>\n          \n       \n        </div>\n       \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="statisticsProgressModal" tabindex="-1" role="dialog" aria-labelledby="statisticsProgressModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title" id="statisticsProgressModalLabel">Progress</h4>\n      </div>\n      <div class="modal-body">\n        \n        <div class="panel panel-primary">\n          <div class="panel-body">\n            <p>\n              Please wait until the operation is finished.\n            </p>\n            <progress max="1" value="0"></progress>\n          </div>\n        </div>\n       \n      </div>\n    </div>\n  </div>\n</div>\n\n<style>\n.calculate-button-container {\n  margin-top: 20px;\n}\n#statisticsProgressModal progress {\n  width: 100%;\n}\n</style>\n',b("body").add(d(l)),m={"calculate-button":'<button type="button" class="btn btn-primary calculate-button" data-dismiss="modal">Calculate</button>'},n=function(a){function j(a,b){babelHelpers.classCallCheck(this,j),babelHelpers.get(Object.getPrototypeOf(j.prototype),"constructor",this).call(this,b),this._isSingleCoverage(a)?this.cov=this._getSingleCoverage(a):this.cov=a,this.label="Statistics",this.icon='<span class="glyphicon glyphicon-stats"></span>'}return babelHelpers.inherits(j,a),babelHelpers.createClass(j,[{key:"_getCategoricalParams",value:function(){var a=[].concat(babelHelpers.toConsumableArray(this.cov.parameters.values()));return a.filter(function(a){return a.observedProperty.categories})}},{key:"_isSingleCoverage",value:function(a){try{return this._getSingleCoverage(a),!0}catch(b){return!1}}},{key:"_getSingleCoverage",value:function(a){if(a.coverages){if(1===a.coverages.length)return a.coverages[0];throw new Error("not a single coverage")}return a}},{key:"run",value:function(){var a=this,b=this._getCategoricalParams()[0];this.cov.loadDomain().then(function(c){c.axes.has("t")?1===c.axes.get("t").values.length?a._createStats(a.cov,b,c,[0]):a._refPeriodsModal(a.cov,b,c):a._createStats(a.cov,b,c)})}},{key:"_refPeriodsModal",value:function(a,e,f){var h=this,i=b("#statisticsOptionsModal");b(".calculate-button-container",i).fill(d(m["calculate-button"])),b(".ref-periods-select",i).fill();for(var j=f.axes.get("t"),k=0;k<j.values.length;k++){var l=void 0;l=j.bounds?j.bounds[k][0]+" - "+j.bounds[k][1]:j.values[k],b(".ref-periods-select",i).add(d('<option value="'+k+'">'+l+"</option>"))}b(".calculate-button",i).on("|click",function(){for(var b=[],d=c(".ref-periods-select",i).options,g=0;g<d.length;g++)d[g].selected&&b.push(parseInt(d[g].value));return 0===b.length?(alert("Please select at least one reference period"),!1):void h._createStats(a,e,f,b)}),new g(i[0]).open()}},{key:"_createStats",value:function(a,d,i,j){var k=this,l=b("#statisticsProgressModal");c("progress",l).value=0;var m=new g(l[0]);m.open(),j||(j=[null]);var n=j.length,o=0,p=function(){o++,c("progress",l).value=o/n},q=function(a){var b=new Map,c=!0,e=!1,g=void 0;try{for(var h,i=d.categoryEncoding.values()[Symbol.iterator]();!(c=(h=i.next()).done);c=!0){var j=h.value,k=!0,l=!1,m=void 0;try{for(var n,o=j[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=n.value;b.set(p,0)}}catch(q){l=!0,m=q}finally{try{!k&&o["return"]&&o["return"]()}finally{if(l)throw m}}}}catch(q){e=!0,g=q}finally{try{!c&&i["return"]&&i["return"]()}finally{if(e)throw g}}f.iterate(a,function(a){null!==a&&b.set(a,b.get(a)+1)});var r=[],s=!0,t=!1,u=void 0;try{for(var v,w=d.observedProperty.categories[Symbol.iterator]();!(s=(v=w.next()).done);s=!0){var x=v.value;if(d.categoryEncoding.has(x.id)){var y=d.categoryEncoding.get(x.id).map(function(a){return b.get(a)}).reduce(function(a,b){return a+b});r.push([x,y])}else r.push([x,0])}}catch(q){t=!0,u=q}finally{try{!s&&w["return"]&&w["return"]()}finally{if(t)throw u}}var z=r.map(function(a){return a[1]}).reduce(function(a,b){return a+b}),A=r.map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return[c,d/z]});return A},r=function t(b,c){return a.subsetByIndex({t:j[c]}).then(function(a){return a.loadDomain().then(function(e){return a.loadRange(d.key).then(function(a){p();var d=q(a);return b.push({t:e.axes.get("t"),ratios:d}),n>c+1?t(b,c+1):b})})})},s=function(a){var b={values:a.map(function(a){return a.t.values[0]})};a[0].t.bounds&&(b.bounds=a.map(function(a){return a.t.bounds[0]}));var c={},f={},g=function(a){return e(a.label).replace(/ /g,"_")},j=!0,k=!1,l=void 0;try{for(var m,n=d.observedProperty.categories[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value,p=g(o);c[p]={type:"Parameter",observedProperty:{label:{en:e(o.label)+" Ratio"},statisticalMeasure:"http://www.uncertml.org/statistics/discrete-probability",statisticalCategories:[o]}},f[p]={type:"Range",dataType:"float",values:[]}}}catch(q){k=!0,l=q}finally{try{!j&&n["return"]&&n["return"]()}finally{if(k)throw l}}var r=!0,s=!1,t=void 0;try{for(var u,v=a[Symbol.iterator]();!(r=(u=v.next()).done);r=!0){var w=u.value.ratios,x=!0,y=!1,z=void 0;try{for(var A,B=w[Symbol.iterator]();!(x=(A=B.next()).done);x=!0){var C=babelHelpers.slicedToArray(A.value,2),o=C[0],D=C[1];f[g(o)].values.push(D)}}catch(q){y=!0,z=q}finally{try{!x&&B["return"]&&B["return"]()}finally{if(y)throw z}}}}catch(q){s=!0,t=q}finally{try{!r&&v["return"]&&v["return"]()}finally{if(s)throw t}}return{type:"Coverage",domain:{type:"Domain",axes:{t:b},referencing:[h.getReferenceObject(i,"t")]},parameters:c,ranges:f}};r([],0).then(function(a){var b=JSON.stringify(s(a),null,2),c=URL.createObjectURL(new Blob([b],{type:"application/prs.coverage+json"})),d="Statistics of ",f={title:{en:d+e(k.context.dataset.title)},virtual:!0,distributions:[{title:{en:d+e(k.context.dataset.title)},mediaType:"application/prs.coverage+json",url:c}]},g=k.context.workspace;g.addDataset(f,k.context.dataset),g.requestFocus(f),m.close()})}},{key:"isSupported",get:function(){return this._isSingleCoverage(this.cov)&&this.cov.domainType===i&&this._getCategoricalParams().length>0?!0:!1}}]),j}(j),a("default",n),n.type=k}}}),a.registerDynamic("26",["27","28","29"],!0,function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a,b){return a.loadDomain().then(function(c){var f=k.getHorizontalCRSReferenceObject(c);if(f.components.some(c.axes.has))throw new Error("Grid reprojection not supported yet");var g=h(f.components,2),l=g[0],m=g[1],n=[].concat(d(c.axes.values())),o=n.find(function(a){return f.components.every(function(b){return-1!==a.components.indexOf(b)})}),p=o.components.indexOf(l),q=o.components.indexOf(m),r=k.getProjection(c),s=k.getProjection(b),t=void 0;if(o.dataType!==j.COVJSON_DATATYPE_TUPLE)throw new Error("Unsupported data type: "+o.dataType);t=o.values.map(function(a){return a.slice()});var u=!0,v=!1,w=void 0;try{for(var x,y=t[Symbol.iterator]();!(u=(x=y.next()).done);u=!0){var z=x.value,A=z[p],B=z[q],C=r.unproject({x:A,y:B}),D=s.project(C),E=D.x,F=D.y;z[p]=E,z[q]=F}}catch(G){v=!0,w=G}finally{try{!u&&y["return"]&&y["return"]()}finally{if(v)throw w}}var H=new Map(c.axes),I=i.shallowcopy(o);delete I.bounds,I.values=t,H.set(o.key,I);var J=k.getHorizontalCRSReferenceObject(b),K=c.referencing.map(function(a){return a===f?{components:f.components,system:J.system}:a}),L={type:j.DOMAIN,domainType:c.domainType,axes:H,referencing:K},M={type:j.COVERAGE,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return Promise.resolve(L)},loadRange:function(b){return a.loadRange(b)},loadRanges:function(b){return a.loadRanges(b)},subsetByIndex:function(c){return a.subsetByIndex(c).then(function(a){return e(a,b)})},subsetByValue:function(c){return a.subsetByValue(c).then(function(a){return e(a,b)})}};return M})}var f=this,g=f.define;f.define=void 0,Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b.reproject=e;var i=a("27"),j=a("28"),k=a("29");return f.define=g,c.exports}),a.register("23",["26","2a","2b"],function(a){"use strict";return{setters:[function(b){var c={};c.reproject=b.reproject,a(c)},function(b){var c={};c.withParameters=b.withParameters,c.withCategories=b.withCategories,c.mapRange=b.mapRange,a(c)},function(b){var c={};c.subsetByBbox=b.subsetByBbox,a(c)}],execute:function(){}}}),a.register("2c",[],function(){return{setters:[],execute:function(){}}}),a.registerDynamic("2d",["2e"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(a){(function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(a){return 0==a?0:a>0?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=64,c=Math.pow(2,-b-1),d=function(b,c){for(var d=[],e=f(b,c),h=c.length-1,i=2*h-1,j=g(e,i,d,0),k=a.subtract(b,c[0]),m=a.square(k),n=0,o=0;j>o;o++){k=a.subtract(b,l(c,h,d[o],null,null));var p=a.square(k);m>p&&(m=p,n=d[o])}return k=a.subtract(b,c[h]),p=a.square(k),m>p&&(m=p,n=1),{location:n,distance:m}},e=function(a,b){var c=d(a,b);return{point:l(b,b.length-1,c.location,null,null),location:c.location}},f=function(b,c){for(var d=c.length-1,e=2*d-1,f=[],g=[],h=[],i=[],k=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],l=0;d>=l;l++)f[l]=a.subtract(c[l],b);for(var l=0;d-1>=l;l++)g[l]=a.subtract(c[l+1],c[l]),g[l]=a.scale(g[l],3);for(var m=0;d-1>=m;m++)for(var n=0;d>=n;n++)h[m]||(h[m]=[]),h[m][n]=a.dotProduct(g[m],f[n]);for(l=0;e>=l;l++)i[l]||(i[l]=[]),i[l].y=0,i[l].x=parseFloat(l)/e;for(var o=d,p=d-1,q=0;o+p>=q;q++){var r=Math.max(0,q-p),s=Math.min(q,o);for(l=r;s>=l;l++)j=q-l,i[l+j].y+=h[j][l]*k[j][l]}return i},g=function(a,c,d,e){var f,j,m=[],n=[],o=[],p=[];switch(h(a,c)){case 0:return 0;case 1:if(e>=b)return d[0]=(a[0].x+a[c].x)/2,1;if(i(a,c))return d[0]=k(a,c),1}l(a,c,.5,m,n),f=g(m,c,o,e+1),j=g(n,c,p,e+1);for(var q=0;f>q;q++)d[q]=o[q];for(var q=0;j>q;q++)d[q+f]=p[q];return f+j},h=function(a,b){var c,d,e=0;c=d=Math.sgn(a[0].y);for(var f=1;b>=f;f++)c=Math.sgn(a[f].y),c!=d&&e++,d=c;return e},i=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;i=a[0].y-a[b].y,j=a[b].x-a[0].x,k=a[0].x*a[b].y-a[b].x*a[0].y;for(var t=max_distance_below=0,u=1;b>u;u++){var v=i*a[u].x+j*a[u].y+k;v>t?t=v:v<max_distance_below&&(max_distance_below=v)}return n=0,o=1,p=0,q=i,r=j,s=k-t,l=n*r-q*o,m=1/l,e=(o*s-r*p)*m,q=i,r=j,s=k-max_distance_below,l=n*r-q*o,m=1/l,f=(o*s-r*p)*m,g=Math.min(e,f),h=Math.max(e,f),d=h-g,c>d?1:0;
},k=function(a,b){var c=1,d=0,e=a[b].x-a[0].x,f=a[b].y-a[0].y,g=a[0].x-0,h=a[0].y-0,i=e*d-f*c,j=1/i,k=(e*h-f*g)*j;return 0+c*k},l=function(a,b,c,d,e){for(var f=[[]],g=0;b>=g;g++)f[0][g]=a[g];for(var h=1;b>=h;h++)for(var g=0;b-h>=g;g++)f[h]||(f[h]=[]),f[h][g]||(f[h][g]={}),f[h][g].x=(1-c)*f[h-1][g].x+c*f[h-1][g+1].x,f[h][g].y=(1-c)*f[h-1][g].y+c*f[h-1][g+1].y;if(null!=d)for(g=0;b>=g;g++)d[g]=f[g][0];if(null!=e)for(g=0;b>=g;g++)e[g]=f[b-g][g];return f[b][0]},m={},n=function(a){var b=m[a];if(!b){b=[];var c=function(){return function(b){return Math.pow(b,a)}},d=function(){return function(b){return Math.pow(1-b,a)}},e=function(a){return function(b){return a}},f=function(){return function(a){return a}},g=function(){return function(a){return 1-a}},h=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}};b.push(new c);for(var i=1;a>i;i++){for(var j=[new e(a)],k=0;a-i>k;k++)j.push(new f);for(var k=0;i>k;k++)j.push(new g);b.push(new h(j))}b.push(new d),m[a]=b}return b},o=function(a,b){for(var c=n(a.length-1),d=0,e=0,f=0;f<a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},p=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},q=function(a){return a[0].x==a[1].x&&a[0].y==a[1].y},r=function(a,b,c){if(q(a))return{point:a[0],location:b};for(var d=o(a,b),e=0,f=b,g=c>0?1:-1,h=null;e<Math.abs(c);)f+=.005*g,h=o(a,f),e+=p(h,d),d=h;return{point:h,location:f}},s=function(a){if(q(a))return 0;for(var b=o(a,0),c=0,d=0,e=1,f=null;1>d;)d+=.005*e,f=o(a,d),c+=p(f,b),b=f;return c},t=function(a,b,c){return r(a,b,c).point},u=function(a,b,c){return r(a,b,c).location},v=function(a,b){var c=o(a,b),d=o(a.slice(0,a.length-1),b),e=d.y-c.y,f=d.x-c.x;return 0==e?1/0:Math.atan(e/f)},w=function(a,b,c){var d=r(a,b,c);return d.location>1&&(d.location=1),d.location<0&&(d.location=0),v(a,d.location)},x=function(a,b,c,d){d=null==d?0:d;var e=r(a,b,d),f=v(a,e.location),g=Math.atan(-1/f),h=c/2*Math.sin(g),i=c/2*Math.cos(g);return[{x:e.point.x+i,y:e.point.y+h},{x:e.point.x-i,y:e.point.y-h}]};this.jsBezier={distanceFromCurve:d,gradientAtPoint:v,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:e,pointOnCurve:o,pointAlongCurveFrom:t,perpendicularToCurveAt:x,locationAlongCurveFrom:u,getLength:s}}).call(this),function(){"use strict";var a=this.Biltong={},b=function(a){return"[object Array]"===Object.prototype.toString.call(a)},c=function(a,c,d){return a=b(a)?a:[a.x,a.y],c=b(c)?c:[c.x,c.y],d(a,c)},d=a.gradient=function(a,b){return c(a,b,function(a,b){return b[0]==a[0]?b[1]>a[1]?1/0:-(1/0):b[1]==a[1]?b[0]>a[0]?0:-0:(b[1]-a[1])/(b[0]-a[0])})},e=(a.normal=function(a,b){return-1/d(a,b)},a.lineLength=function(a,b){return c(a,b,function(a,b){return Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))})},a.quadrant=function(a,b){return c(a,b,function(a,b){return b[0]>a[0]?b[1]>a[1]?2:1:b[0]==a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4})}),f=(a.theta=function(a,b){return c(a,b,function(a,b){var c=d(a,b),f=Math.atan(c),g=e(a,b);return(4==g||3==g)&&(f+=Math.PI),0>f&&(f+=2*Math.PI),f})},a.intersects=function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return g>=c&&d>=g&&i>=e&&f>=i||h>=c&&d>=h&&i>=e&&f>=i||g>=c&&d>=g&&j>=e&&f>=j||h>=c&&d>=g&&j>=e&&f>=j||c>=g&&h>=c&&e>=i&&j>=e||d>=g&&h>=d&&e>=i&&j>=e||c>=g&&h>=c&&f>=i&&j>=f||d>=g&&h>=c&&f>=i&&j>=f},a.encloses=function(a,b,c){var d=a.x,e=a.x+a.w,f=a.y,g=a.y+a.h,h=b.x,i=b.x+b.w,j=b.y,k=b.y+b.h,l=function(a,b,d,e){return c?b>=a&&d>=e:b>a&&d>e};return l(d,h,e,i)&&l(f,j,g,k)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),g=[null,[-1,-1],[-1,1],[1,1],[1,-1]];a.pointOnLine=function(a,b,c){var h=d(a,b),i=e(a,b),j=c>0?f[i]:g[i],k=Math.atan(h),l=Math.abs(c*Math.sin(k))*j[1],m=Math.abs(c*Math.cos(k))*j[0];return{x:a.x+m,y:a.y+l}},a.perpendicularLineTo=function(a,b,c){var e=d(a,b),f=Math.atan(-1/e),g=c/2*Math.sin(f),h=c/2*Math.cos(f);return[{x:b.x+h,y:b.y+g},{x:b.x-h,y:b.y-g}]}}.call(this),function(){"use strict";var a=this,b={android:navigator.userAgent.toLowerCase().indexOf("android")>-1},c=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},d=function(a){return"string"==typeof a||a.constructor===String?document.getElementById(a):a},e=function(a){return a.srcElement||a.target},f=function(a,b){for(var c=0,d=a.length;d>c&&a[c]!=b;c++);c<a.length&&a.splice(c,1)},g=1,h=function(a,b,c){var d=g++;return a.__ta=a.__ta||{},a.__ta[b]=a.__ta[b]||{},a.__ta[b][d]=c,c.__tauid=d,d},i=function(a,b,c){if(a.__ta&&a.__ta[b]&&delete a.__ta[b][c.__tauid],c.__taExtra){for(var d=0;d<c.__taExtra.length;d++)E(a,c.__taExtra[d][0],c.__taExtra[d][1]);c.__taExtra.length=0}c.__taUnstore&&c.__taUnstore()},j=function(a,b,d,f){if(null==a)return d;var g=a.split(","),h=function(a){h.__tauid=d.__tauid;for(var f=e(a),i=0;i<g.length;i++)c(f,g[i],b)&&d.apply(f,arguments)};return k(d,f,h),h},k=function(a,b,c){a.__taExtra=a.__taExtra||[],a.__taExtra.push([b,c])},l=function(a,b,c,d){if(r&&t[b]){var e=j(d,a,c,t[b]);D(a,t[b],e,c)}"focus"===b&&null==a.getAttribute("tabindex")&&a.setAttribute("tabindex","1"),D(a,b,j(d,a,c,b),c)},m=function(a,b,c,d){if(null==a.__taSmartClicks){var g=function(b){a.__tad=x(b)},h=function(b){a.__tau=x(b)},i=function(b){if(a.__tad&&a.__tau&&a.__tad[0]===a.__tau[0]&&a.__tad[1]===a.__tau[1])for(var c=0;c<a.__taSmartClicks.length;c++)a.__taSmartClicks[c].apply(e(b),[b])};l(a,"mousedown",g,d),l(a,"mouseup",h,d),l(a,"click",i,d),a.__taSmartClicks=[]}a.__taSmartClicks.push(c),c.__taUnstore=function(){f(a.__taSmartClicks,c)}},n={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},o=function(a,b){return function(d,g,h,i){if("contextmenu"==g&&s)l(d,g,h,i);else{if(null==d.__taTapHandler){var j=d.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},k=function(e){for(var f=e.srcElement||e.target,g=0;g<j.downSelectors.length;g++)if(null==j.downSelectors[g]||c(f,j.downSelectors[g],d)){j.down=!0,setTimeout(o,a),setTimeout(p,b);break}},m=function(a){if(j.down){var b=a.srcElement||a.target;j.taps++;var f=C(a);for(var g in n)if(n.hasOwnProperty(g)){var h=n[g];if(h.touches===f&&(1===h.taps||h.taps===j.taps))for(var i=0;i<j[g].length;i++)(null==j[g][i][1]||c(b,j[g][i][1],d))&&j[g][i][0].apply(e(a),[a])}}},o=function(){j.down=!1},p=function(){j.taps=0};l(d,"mousedown",k),l(d,"mouseup",m)}d.__taTapHandler.downSelectors.push(i),d.__taTapHandler[g].push([h,i]),h.__taUnstore=function(){f(d.__taTapHandler[g],h)}}}},p=function(a,b,c,d){for(var e in c.__tamee[a])c.__tamee[a].hasOwnProperty(e)&&c.__tamee[a][e].apply(d,[b])},q=function(){var a=[];return function(b,d,f,g){if(!b.__tamee){b.__tamee={over:!1,mouseenter:[],mouseexit:[]};var i=function(d){var f=e(d);(null==g&&f==b&&!b.__tamee.over||c(f,g,b)&&(null==f.__tamee||!f.__tamee.over))&&(p("mouseenter",d,b,f),f.__tamee=f.__tamee||{},f.__tamee.over=!0,a.push(f))},k=function(d){for(var f=e(d),g=0;g<a.length;g++)f!=a[g]||c(d.relatedTarget||d.toElement,"*",f)||(f.__tamee.over=!1,a.splice(g,1),p("mouseexit",d,b,f))};D(b,"mouseover",j(g,b,i,"mouseover"),i),D(b,"mouseout",j(g,b,k,"mouseout"),k)}f.__taUnstore=function(){delete b.__tamee[d][f.__tauid]},h(b,d,f),b.__tamee[d][f.__tauid]=f}},r="ontouchstart"in document.documentElement,s="onmousedown"in document.documentElement,t={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},u=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}(),v=u>-1&&9>u,w=function(a,b){if(null==a)return[0,0];var c=B(a),d=A(c,0);return[d[b+"X"],d[b+"Y"]]},x=function(a){return null==a?[0,0]:v?[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop]:w(a,"page")},y=function(a){return w(a,"screen")},z=function(a){return w(a,"client")},A=function(a,b){return a.item?a.item(b):a[b]},B=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},C=function(a){return B(a).length},D=function(a,b,c,d){if(h(a,b,c),d.__tauid=c.__tauid,a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent){var e=b+c.__tauid;a["e"+e]=c,a[e]=function(){a["e"+e]&&a["e"+e](window.event)},a.attachEvent("on"+b,a[e])}},E=function(a,b,c){null!=c&&F(a,function(){var e=d(this);if(i(e,b,c),null!=c.__tauid)if(e.removeEventListener)e.removeEventListener(b,c,!1),r&&t[b]&&e.removeEventListener(t[b],c,!1);else if(this.detachEvent){var f=b+c.__tauid;e[f]&&e.detachEvent("on"+b,e[f]),e[f]=null,e["e"+f]=null}c.__taTouchProxy&&E(a,c.__taTouchProxy[1],c.__taTouchProxy[0])})},F=function(a,b){if(null!=a){a="undefined"!=typeof Window&&"unknown"!=typeof a.top&&a==a.top?[a]:"string"!=typeof a&&null==a.tagName&&null!=a.length?a:"string"==typeof a?document.querySelectorAll(a):[a];for(var c=0;c<a.length;c++)b.apply(a[c])}};a.Mottle=function(a){a=a||{};var c=a.clickThreshold||150,e=a.dblClickThreshold||350,f=new q,g=new o(c,e),h=a.smartClicks,i=function(a,b,c,e){null!=c&&F(a,function(){var a=d(this);h&&"click"===b?m(a,b,c,e):"tap"===b||"dbltap"===b||"contextmenu"===b?g(a,b,c,e):"mouseenter"===b||"mouseexit"==b?f(a,b,c,e):l(a,b,c,e)})};this.remove=function(a){return F(a,function(){var a=d(this);if(a.__ta)for(var b in a.__ta)if(a.__ta.hasOwnProperty(b))for(var c in a.__ta[b])a.__ta[b].hasOwnProperty(c)&&E(a,b,a.__ta[b][c]);a.parentNode&&a.parentNode.removeChild(a)}),this},this.on=function(a,b,c,d){var e=arguments[0],f=4==arguments.length?arguments[2]:null,g=arguments[1],h=arguments[arguments.length-1];return i(e,g,h,f),this},this.off=function(a,b,c){return E(a,b,c),this},this.trigger=function(a,c,e,f){var g=s&&("undefined"==typeof MouseEvent||null==e||e.constructor===MouseEvent),h=r&&!s&&t[c]?t[c]:c,i=!(r&&!s&&t[c]),j=x(e),k=y(e),l=z(e);return F(a,function(){var a,m=d(this);e=e||{screenX:k[0],screenY:k[1],clientX:l[0],clientY:l[1]};var n=function(a){f&&(a.payload=f)},o={TouchEvent:function(a){var b=document.createTouch(window,m,0,j[0],j[1],k[0],k[1],l[0],l[1],0,0,0,0),c=document.createTouchList(b),d=document.createTouchList(b),e=document.createTouchList(b);a.initTouchEvent(h,!0,!0,window,null,k[0],k[1],l[0],l[1],!1,!1,!1,!1,c,d,e,1,0)},MouseEvents:function(a){if(a.initMouseEvent(h,!0,!0,window,0,k[0],k[1],l[0],l[1],!1,!1,!1,!1,1,m),b.android){var c=document.createTouch(window,m,0,j[0],j[1],k[0],k[1],l[0],l[1],0,0,0,0);a.touches=a.targetTouches=a.changedTouches=document.createTouchList(c)}}};if(document.createEvent){var p=!i&&!g&&r&&t[c]&&!b.android,q=p?"TouchEvent":"MouseEvents";a=document.createEvent(q),o[q](a),n(a),m.dispatchEvent(a)}else document.createEventObject&&(a=document.createEventObject(),a.eventType=a.eventName=h,a.screenX=k[0],a.screenY=k[1],a.clientX=l[0],a.clientY=l[1],n(a),m.fireEvent("on"+h,a))}),this}},a.Mottle.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&&a.preventDefault&&a.preventDefault()},a.Mottle.pageLocation=x,a.Mottle.setForceTouchEvents=function(a){r=a},a.Mottle.setForceMouseEvents=function(a){s=a}}.call(this),function(){"use strict";var a=function(a,b,c){return-1===a.indexOf(b)?(c?a.unshift(b):a.push(b),!0):!1},b=function(a,b){var c=a.indexOf(b);-1!=c&&a.splice(c,1)},c=function(a,b){for(var c=[],d=0;d<a.length;d++)-1==b.indexOf(a[d])&&c.push(a[d]);return c},d=function(a){return null==a?!1:"string"==typeof a||a.constructor==String},e=function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}},f=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},g=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}(),h=50,i=50,j=g>-1&&9>g,k=9==g,l=function(a){if(j)return[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop];var b=n(a),c=m(b,0);return k?[c.pageX||c.clientX,c.pageY||c.clientY]:[c.pageX,c.pageY]},m=function(a,b){return a.item?a.item(b):a[b]},n=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},o={draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select"},p="katavorio-drag-scope",q=["stop","start","drag","drop","over","out","beforeStart"],r=function(){},s=function(){return!0},t=function(a,b,c){for(var d=0;d<a.length;d++)a[d]!=c&&b(a[d])},u=function(a,b,c,d){t(a,function(a){a.setActive(b),b&&a.updatePosition(),c&&a.setHover(d,b)})},v=function(a,b){if(null!=a){a=d(a)||null!=a.tagName||null==a.length?[a]:a;for(var c=0;c<a.length;c++)b.apply(a[c],[a[c]])}},w=function(a){a.stopPropagation?(a.stopPropagation(),a.preventDefault()):a.returnValue=!1},x="input,textarea,select,button,option",y=function(a,b,c){var d=a.srcElement||a.target;return!f(d,c.getInputFilterSelector(),b)},z=function(a,b,c,d){this.params=b||{},this.el=a,this.params.addClass(this.el,this._class),this.uuid=C();var e=!0;return this.setEnabled=function(a){e=a},this.isEnabled=function(){return e},this.toggleEnabled=function(){e=!e},this.setScope=function(a){this.scopes=a?a.split(/\s+/):[d]},this.addScope=function(a){var b={};v(this.scopes,function(a){b[a]=!0}),v(a?a.split(/\s+/):[],function(a){b[a]=!0}),this.scopes=[];for(var c in b)this.scopes.push(c)},this.removeScope=function(a){var b={};v(this.scopes,function(a){b[a]=!0}),v(a?a.split(/\s+/):[],function(a){delete b[a]}),this.scopes=[];for(var c in b)this.scopes.push(c)},this.toggleScope=function(a){var b={};v(this.scopes,function(a){b[a]=!0}),v(a?a.split(/\s+/):[],function(a){b[a]?delete b[a]:b[a]=!0}),this.scopes=[];for(var c in b)this.scopes.push(c)},this.setScope(b.scope),this.k=b.katavorio,b.katavorio},A=function(a,b,c,g){this._class=c.draggable;var j=z.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var k=[0,0],m=null,n=!1,o=this.params.consumeStartEvent!==!1,p=this.el,q=this.params.clone,r=(this.params.scroll,b.multipleDrop!==!1),t=b.snapThreshold||5,v=function(a,b,c,d,e){d=d||t,e=e||t;var f=Math.floor(a[0]/b),g=b*f,h=g+b,i=Math.abs(a[0]-g)<=d?g:Math.abs(h-a[0])<=d?h:a[0],j=Math.floor(a[1]/c),k=c*j,l=k+c,m=Math.abs(a[1]-k)<=e?k:Math.abs(l-a[1])<=e?l:a[1];return[i,m]};this.posses=[],this.posseRoles={},this.toGrid=function(a){return null==this.params.grid?a:v(a,this.params.grid[0],this.params.grid[1])},this.snap=function(a,b){if(null!=p){a=a||(this.params.grid?this.params.grid[0]:h),b=b||(this.params.grid?this.params.grid[1]:i);var c=this.params.getPosition(p);this.params.setPosition(p,v(c,a,b,a,b))}},this.constrain="function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment?function(a){return[Math.max(0,Math.min(E.w-this.size[0],a[0])),Math.max(0,Math.min(E.h-this.size[1],a[1]))]}:function(a){return a};var x=function(a){return"function"==typeof a?(a._katavorioId=C(),a._katavorioId):a},A={},B=function(a){for(var b in A){var c=A[b],d=c[0](a);if(c[1]&&(d=!d),!d)return!1}return!0},D=this.setFilter=function(b,c){if(b){var e=x(b);A[e]=[function(c){var e,g=c.srcElement||c.target;return d(b)?e=f(g,b,a):"function"==typeof b&&(e=b(c,a)),e},c!==!1]}};this.addFilter=D,this.removeFilter=function(a){var b="function"==typeof a?a._katavorioId:a;delete A[b]};this.clearAllFilters=function(){A={}},this.canDrag=this.params.canDrag||s;var E,F=[],G=[];this.downListener=function(a){var b=this.rightButtonCanDrag||3!==a.which&&2!==a.button;if(b&&this.isEnabled()&&this.canDrag()){var d=B(a)&&y(a,this.el,this.k);if(d){if(q){p=this.el.cloneNode(!0),p.setAttribute("id",null),p.style.position="absolute";var f=e(this.el);p.style.left=f.left+"px",p.style.top=f.top+"px",document.body.appendChild(p)}else p=this.el;o&&w(a),k=l(a),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),j.markSelection(this),j.markPosses(this),this.params.addClass(document.body,c.noSelect),I("beforeStart",{el:this.el,pos:m,e:a,drag:this})}else this.params.consumeFilteredEvents&&w(a)}}.bind(this),this.moveListener=function(a){if(k){if(!n){var b=I("start",{el:this.el,pos:m,e:a,drag:this});if(b!==!1){if(!k)return;this.mark(!0),n=!0}}if(k){G.length=0;var c=l(a),d=c[0]-k[0],e=c[1]-k[1],f=this.params.ignoreZoom?1:j.getZoom();d/=f,e/=f,this.moveBy(d,e,a),j.updateSelection(d,e,this),j.updatePosses(d,e,this)}}}.bind(this),this.upListener=function(a){k&&(k=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,c.noSelect),this.unmark(a),j.unmarkSelection(this,a),j.unmarkPosses(this,a),this.stop(a),j.notifySelectionDragStop(this,a),j.notifyPosseDragStop(this,a),n=!1,q&&(p&&p.parentNode&&p.parentNode.removeChild(p),p=null))}.bind(this),this.getFilters=function(){return A},this.abort=function(){null!=k&&this.upListener()},this.getDragElement=function(){return p||this.el};var H={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[]};b.events.start&&H.start.push(b.events.start),b.events.beforeStart&&H.beforeStart.push(b.events.beforeStart),b.events.stop&&H.stop.push(b.events.stop),b.events.drag&&H.drag.push(b.events.drag),this.on=function(a,b){H[a]&&H[a].push(b)};var I=function(a,b){if(H[a])for(var c=0;c<H[a].length;c++)try{H[a][c](b)}catch(d){}};this.notifyStart=function(a){I("start",{el:this.el,pos:this.params.getPosition(p),e:a,drag:this})},this.stop=function(a,b){if(b||n){var c=[],d=j.getSelection(),e=this.params.getPosition(p);if(d.length>1)for(var f=0;f<d.length;f++){var g=this.params.getPosition(d[f].el);c.push([d[f].el,{left:g[0],top:g[1]},d[f]])}else c.push([p,{left:e[0],top:e[1]},this]);I("stop",{el:p,pos:e,e:a,drag:this,selection:c})}},this.mark=function(a){if(m=this.params.getPosition(p),this.size=this.params.getSize(p),F=j.getMatchingDroppables(this),u(F,!0,!1,this),this.params.addClass(p,this.params.dragClass||c.drag),this.params.constrain||this.params.containment){var b=this.params.getSize(p.parentNode);E={w:b[0],h:b[1]}}a&&j.notifySelectionDragStart(this)},this.unmark=function(a,b){if(u(F,!1,!0,this),this.params.removeClass(p,this.params.dragClass||c.drag),F.length=0,!b)for(var d=0;d<G.length;d++){var e=G[d].drop(this,a);if(e===!0)break}},this.moveBy=function(a,b,c){G.length=0;var d=this.constrain(this.toGrid([m[0]+a,m[1]+b]),p),e={x:d[0],y:d[1],w:this.size[0],h:this.size[1]},f=null;this.params.setPosition(p,d);for(var g=0;g<F.length;g++){var h={x:F[g].position[0],y:F[g].position[1],w:F[g].size[0],h:F[g].size[1]};this.params.intersects(e,h)&&(r||null==f||f==F[g].el)&&F[g].canDrop(this)?(f||(f=F[g].el),G.push(F[g]),F[g].setHover(this,!0,c)):F[g].isHover()&&F[g].setHover(this,!1,c)}I("drag",{el:this.el,pos:d,e:c,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?D(this.params.handle,!1):D(this.params.filter,this.params.filterExclude)},B=function(a,b,c,d){this._class=c.droppable,this.params=b||{},this._activeClass=this.params.activeClass||c.active,this._hoverClass=this.params.hoverClass||c.hover,z.apply(this,arguments);var e=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(a){this.params[a?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(a){return!0},this.isHover=function(){return e},this.setHover=function(a,b,c){(b||null==this.el._katavorioDragHover||this.el._katavorioDragHover==a.el._katavorio)&&(this.params[b?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=b?a.el._katavorio:null,e!==b&&this.params.events[b?"over":"out"]({el:this.el,e:c,drag:a,drop:this}),e=b)},this.drop=function(a,b){return this.params.events.drop({drag:a,e:b,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,e=null}},C=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},D=function(a){return null==a?null:(a="string"==typeof a||a.constructor==String?document.getElementById(a):a,null==a?null:(a._katavorio=a._katavorio||C(),a))};this.Katavorio=function(e){var f=[],g={};this._dragsByScope={},this._dropsByScope={};var h=1,i=function(a,b){v(a,function(a){for(var c=0;c<a.scopes.length;c++)b[a.scopes[c]]=b[a.scopes[c]]||[],b[a.scopes[c]].push(a)})},j=function(a,b){var c=0;return v(a,function(a){for(var d=0;d<a.scopes.length;d++)if(b[a.scopes[d]]){var f=e.indexOf(b[a.scopes[d]],a);-1!=f&&(b[a.scopes[d]].splice(f,1),c++)}}),c>0},k=(this.getMatchingDroppables=function(a){for(var b=[],c={},d=0;d<a.scopes.length;d++){var e=this._dropsByScope[a.scopes[d]];if(e)for(var f=0;f<e.length;f++)!e[f].canDrop(a)||c[e[f].uuid]||!e[f].allowLoopback&&e[f].el===a.el||(c[e[f].uuid]=!0,b.push(e[f]))}return b},function(a){a=a||{};var b,c={events:{}};for(b in e)c[b]=e[b];for(b in a)c[b]=a[b];for(b=0;b<q.length;b++)c.events[q[b]]=a[q[b]]||r;return c.katavorio=this,c}.bind(this)),l=function(a,b){for(var c=0;c<q.length;c++)b[q[c]]&&a.on(q[c],b[q[c]])}.bind(this),m={},n=e.css||{},s=e.scope||p;for(var u in o)m[u]=o[u];for(var u in n)m[u]=n[u];var w=e.inputFilterSelector||x;this.getInputFilterSelector=function(){return w},this.setInputFilterSelector=function(a){return w=a,this},this.draggable=function(a,b){var c=[];return v(a,function(a){if(a=D(a),null!=a)if(null==a._katavorioDrag){var d=k(b);a._katavorioDrag=new A(a,d,m,s),i(a._katavorioDrag,this._dragsByScope),c.push(a._katavorioDrag),e.addClass(a,m.draggable)}else l(a._katavorioDrag,b)}.bind(this)),c},this.droppable=function(a,b){var c=[];return v(a,function(a){if(a=D(a),null!=a){var d=new B(a,k(b),m,s);a._katavorioDrop=a._katavorioDrop||[],a._katavorioDrop.push(d),i(d,this._dropsByScope),c.push(d),e.addClass(a,m.droppable)}}.bind(this)),c},this.select=function(a){return v(a,function(){var a=D(this);a&&a._katavorioDrag&&(g[a._katavorio]||(f.push(a._katavorioDrag),g[a._katavorio]=[a,f.length-1],e.addClass(a,m.selected)))}),this},this.deselect=function(a){return v(a,function(){var a=D(this);if(a&&a._katavorio){var b=g[a._katavorio];if(b){for(var c=[],d=0;d<f.length;d++)f[d].el!==a&&c.push(f[d]);f=c,delete g[a._katavorio],e.removeClass(a,m.selected)}}}),this},this.deselectAll=function(){for(var a in g){var b=g[a];e.removeClass(b[0],m.selected)}f.length=0,g={}},this.markSelection=function(a){t(f,function(a){a.mark()},a)},this.markPosses=function(a){a.posses&&v(a.posses,function(b){a.posseRoles[b]&&E[b]&&t(E[b].members,function(a){a.mark()},a)})},this.unmarkSelection=function(a,b){t(f,function(a){a.unmark(b)},a)},this.unmarkPosses=function(a,b){a.posses&&v(a.posses,function(c){a.posseRoles[c]&&E[c]&&t(E[c].members,function(a){a.unmark(b,!0)},a)})},this.getSelection=function(){return f.slice(0)},this.updateSelection=function(a,b,c){t(f,function(c){c.moveBy(a,b)},c)};var y=function(a,b){b.posses&&v(b.posses,function(c){b.posseRoles[c]&&E[c]&&t(E[c].members,function(b){a(b)},b)})};this.updatePosses=function(a,b,c){y(function(c){c.moveBy(a,b)},c)},this.notifyPosseDragStop=function(a,b){y(function(a){a.stop(b,!0)},a)},this.notifySelectionDragStop=function(a,b){t(f,function(a){a.stop(b,!0)},a)},this.notifySelectionDragStart=function(a,b){t(f,function(a){a.notifyStart(b)},a)},this.setZoom=function(a){h=a},this.getZoom=function(){return h};var z=function(a,b,c,d){v(a,function(a){j(a,c),a[d](b),i(a,c)})};v(["set","add","remove","toggle"],function(a){this[a+"Scope"]=function(b,c){z(b._katavorioDrag,c,this._dragsByScope,a+"Scope"),z(b._katavorioDrop,c,this._dropsByScope,a+"Scope")}.bind(this),this[a+"DragScope"]=function(b,c){z(b.constructor===A?b:b._katavorioDrag,c,this._dragsByScope,a+"Scope")}.bind(this),this[a+"DropScope"]=function(b,c){z(b.constructor===B?b:b._katavorioDrop,c,this._dropsByScope,a+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(a,b){for(var c in this._dragsByScope)t(this._dragsByScope[c],function(c){c.snap(a,b)})},this.getDragsForScope=function(a){return this._dragsByScope[a]},this.getDropsForScope=function(a){return this._dropsByScope[a]};var C=function(a,b,c){a=D(a),a[b]&&(j(a[b],c)&&v(a[b],function(a){a.destroy()}),a[b]=null)};this.elementRemoved=function(a){this.destroyDraggable(a),this.destroyDroppable(a)},this.destroyDraggable=function(a){C(a,"_katavorioDrag",this._dragsByScope)},this.destroyDroppable=function(a){C(a,"_katavorioDrop",this._dropsByScope)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},f=[],g={},E={}};var E={},F=function(b,c,e){var f=d(c)?c:c.id,g=d(c)?!0:c.active!==!1,h=E[f]||function(){var a={name:f,members:[]};return E[f]=a,a}();return v(b,function(b){if(b._katavorioDrag){if(e&&null!=b._katavorioDrag.posseRoles[h.name])return;a(h.members,b._katavorioDrag),a(b._katavorioDrag.posses,h.name),b._katavorioDrag.posseRoles[h.name]=g}}),h};this.addToPosse=function(a,b){for(var c=[],d=1;d<arguments.length;d++)c.push(F(a,arguments[d]));return 1==c.length?c[0]:c},this.setPosse=function(a,b){for(var d=[],e=1;e<arguments.length;e++)d.push(F(a,arguments[e],!0).name);return v(a,function(a){if(a._katavorioDrag){var b=c(a._katavorioDrag.posses,d),e=[];Array.prototype.push.apply(e,a._katavorioDrag.posses);for(var f=0;f<b.length;f++)this.removeFromPosse(a,b[f])}}.bind(this)),1==d.length?d[0]:d},this.removeFromPosse=function(a,c){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var d=1;d<arguments.length;d++)c=arguments[d],v(a,function(a){if(a._katavorioDrag&&a._katavorioDrag.posses){var d=a._katavorioDrag;v(c,function(a){b(E[a].members,d),b(d.posses,a),delete d.posseRoles[a]})}})},this.removeFromAllPosses=function(a){v(a,function(a){if(a._katavorioDrag&&a._katavorioDrag.posses){var c=a._katavorioDrag;v(c.posses,function(a){b(E[a].members,c)}),c.posses.length=0,c.posseRoles={}}})},this.setPosseState=function(a,b,c){var d=E[b];d&&v(a,function(a){a._katavorioDrag&&a._katavorioDrag.posses&&(a._katavorioDrag.posseRoles[d.name]=c)})}}}.call(this),function(){var a=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=function(a){return"[object Number]"===Object.prototype.toString.call(a)},c=function(a){return"string"==typeof a},d=function(a){return"boolean"==typeof a},e=function(a){return null==a},f=function(a){return null==a?!1:"[object Object]"===Object.prototype.toString.call(a)},g=function(a){return"[object Date]"===Object.prototype.toString.call(a)},h=function(a){return"[object Function]"===Object.prototype.toString.call(a)},i=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},j=this,k=j.jsPlumbUtil={isArray:a,isString:c,isBoolean:d,isNull:e,isObject:f,isDate:g,isFunction:h,isEmpty:i,isNumber:b,clone:function(b){if(c(b))return""+b;if(d(b))return!!b;if(g(b))return new Date(b.getTime());if(h(b))return b;if(a(b)){for(var e=[],i=0;i<b.length;i++)e.push(this.clone(b[i]));return e}if(f(b)){var j={};for(var k in b)j[k]=this.clone(b[k]);return j}return b},merge:function(b,e,g){var h,i,j={};for(g=g||[],i=0;i<g.length;i++)j[g[i]]=!0;var k=this.clone(b);for(i in e)if(null==k[i])k[i]=e[i];else if(c(e[i])||d(e[i]))j[i]?(h=[],h.push.apply(h,a(k[i])?k[i]:[k[i]]),h.push.apply(h,a(e[i])?e[i]:[e[i]]),k[i]=h):k[i]=e[i];else if(a(e[i]))h=[],a(k[i])&&h.push.apply(h,k[i]),h.push.apply(h,e[i]),k[i]=h;else if(f(e[i])){f(k[i])||(k[i]={});for(var l in e[i])k[i][l]=e[i][l]}return k},replace:function(a,b,c){if(null!=a){var d=a,e=d;return b.replace(/([^\.])+/g,function(a,b,d,f){var g=a.match(/([^\[0-9]+){1}(\[)([0-9+])/),h=d+a.length>=f.length,i=function(){return e[g[1]]||function(){return e[g[1]]=[],e[g[1]]}()};if(h)g?i()[g[3]]=c:e[a]=c;else if(g){var j=i();e=j[g[3]]||function(){return j[g[3]]={},j[g[3]]}()}else e=e[a]||function(){return e[a]={},e[a]}()}),a}},functionChain:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0][c[d][1]].apply(c[d][0],c[d][2]);if(e===b)return e}return a},populate:function(b,d,e){var g=function(a){var b=a.match(/(\${.*?})/g);if(null!=b)for(var c=0;c<b.length;c++){var e=d[b[c].substring(2,b[c].length-1)]||"";null!=e&&(a=a.replace(b[c],e))}return a},i=function(b){if(null!=b){if(c(b))return g(b);if(!h(b)||null!=e&&0!==(b.name||"").indexOf(e)){if(a(b)){for(var j=[],k=0;k<b.length;k++)j.push(i(b[k]));return j}if(f(b)){var l={};for(var m in b)l[m]=i(b[m]);return l}return b}return b(d)}};return i(b)},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},removeWithFunction:function(a,b){var c=k.findWithFunction(a,b);return c>-1&&a.splice(c,1),-1!=c},remove:function(a,b){var c=a.indexOf(b);return c>-1&&a.splice(c,1),-1!=c},addWithFunction:function(a,b,c){-1==k.findWithFunction(a,c)&&a.push(b)},addToList:function(a,b,c,d){var e=a[b];return null==e&&(e=[],a[b]=e),e[d?"unshift":"push"](c),e},extend:function(b,c,d){var e;for(c=a(c)?c:[c],e=0;e<c.length;e++)for(var f in c[e].prototype)c[e].prototype.hasOwnProperty(f)&&(b.prototype[f]=c[e].prototype[f]);var g=function(a,b){return function(){for(e=0;e<c.length;e++)c[e].prototype[a]&&c[e].prototype[a].apply(this,arguments);return b.apply(this,arguments)}},h=function(a){for(var c in a)b.prototype[c]=g(c,a[c])};if(arguments.length>2)for(e=2;e<arguments.length;e++)h(arguments[e]);return b},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},logEnabled:!0,log:function(){if(k.logEnabled&&"undefined"!=typeof console)try{var a=arguments[arguments.length-1];console.log(a)}catch(b){}},wrap:function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(e){k.log("jsPlumb function failed : "+e)}if(null==c||d!==c)try{d=a.apply(this,arguments)}catch(e){k.log("wrapped function failed : "+e)}return d}}};k.EventGenerator=function(){var a={},b=!1,c={ready:!0};this.bind=function(b,c,d){var e=function(b){k.addToList(a,b,c,d),c.__jsPlumb=c.__jsPlumb||{},c.__jsPlumb[jsPlumbUtil.uuid()]=b};if("string"==typeof b)e(b);else if(null!=b.length)for(var f=0;f<b.length;f++)e(b[f]);return this},this.fire=function(d,e,f){if(!b&&a[d]){var g=a[d].length,h=0,i=!1,j=null;if(!this.shouldFireEvent||this.shouldFireEvent(d,e,f))for(;!i&&g>h&&j!==!1;){if(c[d])a[d][h].apply(this,[e,f]);else try{j=a[d][h].apply(this,[e,f])}catch(l){k.log("jsPlumb: fire failed for event "+d+" : "+l)}h++,(null==a||null==a[d])&&(i=!0)}}return this},this.unbind=function(b,c){if(0===arguments.length)a={};else if(1===arguments.length){if("string"==typeof b)delete a[b];else if(b.__jsPlumb){var d;for(var e in b.__jsPlumb)d=b.__jsPlumb[e],k.remove(a[d]||[],b)}}else 2===arguments.length&&k.remove(a[b]||[],c);return this},this.getListener=function(b){return a[b]},this.setSuspendEvents=function(a){b=a},this.isSuspendEvents=function(){return b},this.silently=function(a){this.setSuspendEvents(!0);try{a()}catch(b){jsPlumbUtil.log("Cannot execute silent function "+b)}this.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var b in a)a[b]=null}},k.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}}}.call(this),function(){"use strict";var a=this,b=a.jsPlumbUtil;b.matchesSelector=function(a,b,c){
c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},b.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&&a.preventDefault&&a.preventDefault()},b.sizeElement=function(a,b,c,d,e){a&&(a.style.height=e+"px",a.height=e,a.style.width=d+"px",a.width=d,a.style.left=b+"px",a.style.top=c+"px")}}.call(this),function(){"use strict";var a,c=this,d=[],e=c.jsPlumbUtil,f=function(){return""+(new Date).getTime()},g=function(a){if(a._jsPlumb.paintStyle&&a._jsPlumb.hoverPaintStyle){var b={};s.extend(b,a._jsPlumb.paintStyle),s.extend(b,a._jsPlumb.hoverPaintStyle),delete a._jsPlumb.hoverPaintStyle,b.gradient&&a._jsPlumb.paintStyle.fillStyle&&delete b.gradient,a._jsPlumb.hoverPaintStyle=b}},h=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],i=function(a,b,c,d){var e=a.getAttachedElements();if(e)for(var f=0,g=e.length;g>f;f++)d&&d==e[f]||e[f].setHover(b,!0,c)},j=function(a){return null==a?null:a.split(" ")},k=function(a,b,c){for(var d in b)a[d]=c},l=function(a,b){b=e.isArray(b)||null!=b.length&&!e.isString(b)?b:[b];for(var c=0;c<b.length;c++)try{a.apply(b[c],[b[c]])}catch(d){e.log(".each iteration failed : "+d)}},m=function(a,b,c){if(a.getDefaultType){var d=a.getTypeDescriptor(),f={},g=a.getDefaultType(),h=e.merge({},g);k(f,g,"__default");for(var i=0,j=a._jsPlumb.types.length;j>i;i++){var l=a._jsPlumb.types[i];if("__default"!==l){var m=a._jsPlumb.instance.getType(l,d);null!=m&&(h=e.merge(h,m,["cssClass"]),k(f,m,l))}}b&&(h=e.populate(h,b,"_")),a.applyType(h,c,f),c||a.repaint()}},n=c.jsPlumbUIComponent=function(a){e.EventGenerator.apply(this,arguments);var b=this,c=arguments,d=b.idPrefix,f=d+(new Date).getTime();this._jsPlumb={instance:a._jsPlumb,parameters:a.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:a.beforeDetach,beforeDrop:a.beforeDrop,overlayPlacements:[],hoverClass:a.hoverClass||a._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(a,b,c){this._jsPlumb.typeCache[c]=this._jsPlumb.typeCache[c]||{},this._jsPlumb.typeCache[c][a]=b},this.getCachedTypeItem=function(a,b){return this._jsPlumb.typeCache[b]?this._jsPlumb.typeCache[b][a]:null},this.getId=function(){return f};var g=a.overlays||[],h={};if(this.defaultOverlayKeys){for(var i=0;i<this.defaultOverlayKeys.length;i++)Array.prototype.push.apply(g,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[i]]||[]);for(i=0;i<g.length;i++){var j=s.convertToFullOverlaySpec(g[i]);h[j[1].id]=j}}var k={overlays:h,parameters:a.parameters||{},scope:a.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return k},this.appendToDefaultType=function(a){for(var b in a)k[b]=a[b]},a.events)for(i in a.events)b.bind(i,a.events[i]);this.clone=function(){var a={};return this.constructor.apply(a,c),a}.bind(this),this.isDetachAllowed=function(a){var b=!0;if(this._jsPlumb.beforeDetach)try{b=this._jsPlumb.beforeDetach(a)}catch(c){e.log("jsPlumb: beforeDetach callback failed",c)}return b},this.isDropAllowed=function(a,b,c,d,f,g,h){var i=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:a,targetId:b,scope:c,connection:d,dropEndpoint:f,source:g,target:h});if(this._jsPlumb.beforeDrop)try{i=this._jsPlumb.beforeDrop({sourceId:a,targetId:b,scope:c,connection:d,dropEndpoint:f,source:g,target:h})}catch(j){e.log("jsPlumb: beforeDrop callback failed",j)}return i};var l=[];this.setListenerComponent=function(a){for(var b=0;b<l.length;b++)l[b][3]=a}},o=function(a,b){var c=a._jsPlumb.types[b],d=a._jsPlumb.instance.getType(c,a.getTypeDescriptor());null!=d&&d.cssClass&&a.canvas&&a._jsPlumb.instance.removeClass(a.canvas,d.cssClass)};e.extend(c.jsPlumbUIComponent,e.EventGenerator,{getParameter:function(a){return this._jsPlumb.parameters[a]},setParameter:function(a,b){this._jsPlumb.parameters[a]=b},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(a){this._jsPlumb.parameters=a},getClass:function(){return s.getClass(this.canvas)},hasClass:function(a){return s.hasClass(this.canvas,a)},addClass:function(a){s.addClass(this.canvas,a)},removeClass:function(a){s.removeClass(this.canvas,a)},updateClasses:function(a,b){s.updateClasses(this.canvas,a,b)},setType:function(a,b,c){this.clearTypes(),this._jsPlumb.types=j(a)||[],m(this,b,c)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(a,b){m(this,a,b)},hasType:function(a){return-1!=this._jsPlumb.types.indexOf(a)},addType:function(a,b,c){var d=j(a),e=!1;if(null!=d){for(var f=0,g=d.length;g>f;f++)this.hasType(d[f])||(this._jsPlumb.types.push(d[f]),e=!0);e&&m(this,b,c)}},removeType:function(a,b,c){var d=j(a),e=!1,f=function(a){var b=this._jsPlumb.types.indexOf(a);return-1!=b?(o(this,b),this._jsPlumb.types.splice(b,1),!0):!1}.bind(this);if(null!=d){for(var g=0,h=d.length;h>g;g++)e=f(d[g])||e;e&&m(this,b,c)}},clearTypes:function(a,b){for(var c=this._jsPlumb.types.length,d=0;c>d;d++)o(this,0),this._jsPlumb.types.splice(0,1);m(this,a,b)},toggleType:function(a,b,c){var d=j(a);if(null!=d){for(var e=0,f=d.length;f>e;e++){var g=this._jsPlumb.types.indexOf(d[e]);-1!=g?(o(this,g),this._jsPlumb.types.splice(g,1)):this._jsPlumb.types.push(d[e])}m(this,b,c)}},applyType:function(a,b){if(this.setPaintStyle(a.paintStyle,b),this.setHoverPaintStyle(a.hoverPaintStyle,b),a.parameters)for(var c in a.parameters)this.setParameter(c,a.parameters[c]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(a,b){this._jsPlumb.paintStyle=a,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,g(this),b||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(a,b){this._jsPlumb.hoverPaintStyle=a,g(this),b||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(a){(a||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(a,b,c){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=a,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var d=a?"addClass":"removeClass";this._jsPlumb.instance[d](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[d](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=a?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(c=c||f(),this.repaint({timestamp:c,recalc:!1}))),this.getAttachedElements&&!b&&i(this,a,f(),this)}}});var p=0,q=function(){var a=p+1;return p++,a},r=window.jsPlumbInstance=function(b){this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:4,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},b&&s.extend(this.Defaults,b),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},e.EventGenerator.apply(this);var c=this,g=q(),i=c.bind,j={},k=1,m=function(a){if(null==a)return null;if(3==a.nodeType||8==a.nodeType)return{el:a,text:!0};var b=c.getElement(a);return{el:b,id:e.isString(a)&&null==b?a:Y(b)}};this.getInstanceIndex=function(){return g},this.setZoom=function(a,b){return k=a,c.fire("zoom",k),b&&c.repaintEverything(),!0},this.getZoom=function(){return k};for(var o in this.Defaults)j[o]=this.Defaults[o];var p,r=[];this.unbindContainer=function(){if(null!=p&&r.length>0)for(var a=0;a<r.length;a++)c.off(p,r[a][0],r[a][1])},this.setContainer=function(a){this.unbindContainer(),a=this.getElement(a),this.select().each(function(b){b.moveParent(a)}),this.selectEndpoints().each(function(b){b.moveParent(a)});var b=p;p=a,r.length=0;for(var d=function(a,b){var d=b.srcElement||b.target,e=(d&&d.parentNode?d.parentNode._jsPlumb:null)||(d?d._jsPlumb:null)||(d&&d.parentNode&&d.parentNode.parentNode?d.parentNode.parentNode._jsPlumb:null);e&&(e.fire(a,e,b),c.fire(a,e.component||e,b))},e=function(a,b,d){r.push([a,d]),c.on(p,a,b,d)},f=function(a){e(a,".jsplumb-connector > *",function(b){d(a,b)}),e(a,".jsplumb-endpoint, .jsplumb-endpoint > *, .jsplumb-endpoint svg *",function(b){d(a,b)}),e(a,".jsplumb-overlay, .jsplumb-overlay *",function(b){d(a,b)})},g=0;g<h.length;g++)f(h[g]);for(var i in y){var j=y[i].el;j.parentNode===b&&(b.removeChild(j),p.appendChild(j))}},this.getContainer=function(){return p},this.bind=function(a,b){"ready"===a&&u?b():i.apply(c,[a,b])},c.importDefaults=function(a){for(var b in a)c.Defaults[b]=a[b];return a.Container&&c.setContainer(a.Container),c},c.restoreDefaults=function(){return c.Defaults=s.extend({},j),c};var t=null,u=!1,v=[],w={},x={},y={},z={},A={},B={},C=!1,D=[],E=!1,F=null,G=this.Defaults.Scope,H=1,I=function(){return""+H++},J=function(a,b){p?p.appendChild(a):b?this.getElement(b).appendChild(a):this.appendToRoot(a)}.bind(this),K=function(a,b,d,e){if(!s.headless&&!E){var g=Y(a),h=c.getDragManager().getElementsForDraggable(g);null==d&&(d=f());var i=qa({elId:g,offset:b,recalc:!1,timestamp:d});if(h)for(var j in h)qa({elId:h[j].id,offset:{left:i.o.left+h[j].offset.left,top:i.o.top+h[j].offset.top},recalc:!1,timestamp:d});if(c.anchorManager.redraw(g,b,d,null,e),h)for(var k in h)c.anchorManager.redraw(h[k].id,b,d,h[k].offset,e,!0)}},L=function(a){return x[a]},M=function(a,b,d,f){if(!s.headless){var g=null==b?!1:b;if(g&&s.isDragSupported(a,c)){var h=d||c.Defaults.DragOptions;if(h=s.extend({},h),s.isAlreadyDraggable(a,c))d.force&&c.initDraggable(a,h);else{var i=s.dragEvents.drag,j=s.dragEvents.stop,k=s.dragEvents.start,l=c.getElement(a),m=c.getDragManager().getDragAncestor(l),n={left:0,top:0},o=n,p=!1;pa(f,a),h[k]=e.wrap(h[k],function(){return o=null!=m?c.getOffset(m):n,c.setHoverSuspended(!0),c.select({source:a}).addClass(c.elementDraggingClass+" "+c.sourceElementDraggingClass,!0),c.select({target:a}).addClass(c.elementDraggingClass+" "+c.targetElementDraggingClass,!0),c.setConnectionBeingDragged(!0),h.canDrag?d.canDrag():void 0},!1),h[i]=e.wrap(h[i],function(){var b=c.getUIPosition(arguments,c.getZoom());b.left+=o.left,b.top+=o.top,K(a,b,null,!0),p&&c.addClass(a,"jsplumb-dragged"),p=!0}),h[j]=e.wrap(h[j],function(){for(var a=arguments[0].selection,b=c.getUIPosition(arguments),d=function(a){K(a[0],b),c.removeClass(a[0],"jsplumb-dragged"),c.select({source:a[0]}).removeClass(c.elementDraggingClass+" "+c.sourceElementDraggingClass,!0),c.select({target:a[0]}).removeClass(c.elementDraggingClass+" "+c.targetElementDraggingClass,!0),c.getDragManager().dragEnded(a[0])},e=0;e<a.length;e++)d(a[e]);p=!1,c.setHoverSuspended(!1),c.setConnectionBeingDragged(!1)});var q=Y(a);B[q]=!0;var r=B[q];h.disabled=null==r?!1:!r,c.initDraggable(a,h),c.getDragManager().register(a)}}}},N=function(a,b){for(var c=a.scope.split(/\s/),d=b.scope.split(/\s/),e=0;e<c.length;e++)for(var f=0;f<d.length;f++)if(d[f]==c[e])return!0;return!1},O=function(a,b){var d=s.extend({},a);if(b&&s.extend(d,b),d.source&&(d.source.endpoint?d.sourceEndpoint=d.source:d.source=c.getElement(d.source)),d.target&&(d.target.endpoint?d.targetEndpoint=d.target:d.target=c.getElement(d.target)),a.uuids&&(d.sourceEndpoint=L(a.uuids[0]),d.targetEndpoint=L(a.uuids[1])),d.sourceEndpoint&&d.sourceEndpoint.isFull())return void e.log(c,"could not add connection; source endpoint is full");if(d.targetEndpoint&&d.targetEndpoint.isFull())return void e.log(c,"could not add connection; target endpoint is full");if(!d.type&&d.sourceEndpoint&&(d.type=d.sourceEndpoint.connectionType),d.sourceEndpoint&&d.sourceEndpoint.connectorOverlays){d.overlays=d.overlays||[];for(var f=0,g=d.sourceEndpoint.connectorOverlays.length;g>f;f++)d.overlays.push(d.sourceEndpoint.connectorOverlays[f])}d.sourceEndpoint&&d.sourceEndpoint.scope&&(d.scope=d.sourceEndpoint.scope),!d["pointer-events"]&&d.sourceEndpoint&&d.sourceEndpoint.connectorPointerEvents&&(d["pointer-events"]=d.sourceEndpoint.connectorPointerEvents);var h=function(a,b){var c=s.extend({},a);for(var d in b)b[d]&&(c[d]=b[d]);return c},i=function(a,b,e){return c.addEndpoint(a,h(b,{anchor:d.anchors?d.anchors[e]:d.anchor,endpoint:d.endpoints?d.endpoints[e]:d.endpoint,paintStyle:d.endpointStyles?d.endpointStyles[e]:d.endpointStyle,hoverPaintStyle:d.endpointHoverStyles?d.endpointHoverStyles[e]:d.endpointHoverStyle}))},j=function(a,b,c,e){if(d[a]&&!d[a].endpoint&&!d[a+"Endpoint"]&&!d.newConnection){var f=Y(d[a]),g=c[f];if(g=g?g[e]:null){if(!g.enabled)return!1;var h=null!=g.endpoint&&g.endpoint._jsPlumb?g.endpoint:i(d[a],g.def,b);if(h.isFull())return!1;d[a+"Endpoint"]=h,h._doNotDeleteOnDetach=!1,h._deleteOnDetach=!0,g.uniqueEndpoint&&(g.endpoint?h.finalEndpoint=g.endpoint:(g.endpoint=h,h._deleteOnDetach=!1,h._doNotDeleteOnDetach=!0))}}};return j("source",0,this.sourceEndpointDefinitions,d.type||"default")!==!1&&j("target",1,this.targetEndpointDefinitions,d.type||"default")!==!1?(d.sourceEndpoint&&d.targetEndpoint&&(N(d.sourceEndpoint,d.targetEndpoint)||(d=null)),d):void 0}.bind(c),P=function(a){var b=c.Defaults.ConnectionType||c.getDefaultConnectionType();a._jsPlumb=c,a.newConnection=P,a.newEndpoint=R,a.endpointsByUUID=x,a.endpointsByElement=w,a.finaliseConnection=Q,a.id="con_"+I();var d=new b(a);return d.isDetachable()&&(d.endpoints[0].initDraggable("_jsPlumbSource"),d.endpoints[1].initDraggable("_jsPlumbTarget")),d},Q=c.finaliseConnection=function(a,b,d,e){if(b=b||{},a.suspendedEndpoint||v.push(a),a.pending=null,a.endpoints[0].isTemporarySource=!1,e!==!1&&c.anchorManager.newConnection(a),K(a.source),!b.doNotFireConnectionEvent&&b.fireEvent!==!1){var f={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};c.fire("connection",f,d)}},R=function(a,b){var d=c.Defaults.EndpointType||s.Endpoint,e=s.extend({},a);e._jsPlumb=c,e.newConnection=P,e.newEndpoint=R,e.endpointsByUUID=x,e.endpointsByElement=w,e.fireDetachEvent=_,e.elementId=b||Y(e.source);var f=new d(e);return f.id="ep_"+I(),pa(e.elementId,e.source),s.headless||c.getDragManager().endpointAdded(e.source,b),f},S=function(a,b,c){var d=w[a];if(d&&d.length)for(var e=0,f=d.length;f>e;e++){for(var g=0,h=d[e].connections.length;h>g;g++){var i=b(d[e].connections[g]);if(i)return}c&&c(d[e])}},T=function(a,b){return s.each(a,function(a){c.isDragSupported(a)&&(B[c.getAttribute(a,"id")]=b,c.setElementDraggable(a,b))})},U=function(a,b,c){b="block"===b;var d=null;c&&(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)});var e=m(a);S(e.id,function(a){if(b&&c){var d=a.sourceId===e.id?1:0;a.endpoints[d].isVisible()&&a.setVisible(!0)}else a.setVisible(b)},d)},V=function(a){return s.each(a,function(a){var b=c.getAttribute(a,"id"),d=null==B[b]?!1:B[b];return d=!d,B[b]=d,c.setDraggable(a,d),d}.bind(this))},W=function(a,b){var c=null;b&&(c=function(a){var b=a.isVisible();a.setVisible(!b)}),S(a,function(a){var b=a.isVisible();a.setVisible(!b)},c)},X=function(a){var b=z[a];return b?{o:b,s:D[a]}:qa({elId:a})},Y=function(a,b,d){if(e.isString(a))return a;if(null==a)return null;var f=c.getAttribute(a,"id");return f&&"undefined"!==f||(2==arguments.length&&void 0!==arguments[1]?f=b:(1==arguments.length||3==arguments.length&&!arguments[2])&&(f="jsPlumb_"+g+"_"+I()),d||c.setAttribute(a,"id",f)),f};this.setConnectionBeingDragged=function(a){C=a},this.isConnectionBeingDragged=function(){return C},this.getManagedElements=function(){return y},this.getRenderMode=function(){return"svg"},this.connectorClass="jsplumb-connector",this.connectorOutlineClass="jsplumb-connector-outline",this.editableConnectorClass="jsplumb-connector-editable",this.connectedClass="jsplumb-connected",this.hoverClass="jsplumb-hover",this.endpointClass="jsplumb-endpoint",this.endpointConnectedClass="jsplumb-endpoint-connected",this.endpointFullClass="jsplumb-endpoint-full",this.endpointDropAllowedClass="jsplumb-endpoint-drop-allowed",this.endpointDropForbiddenClass="jsplumb-endpoint-drop-forbidden",this.overlayClass="jsplumb-overlay",this.draggingClass="jsplumb-dragging",this.elementDraggingClass="jsplumb-element-dragging",this.sourceElementDraggingClass="jsplumb-source-element-dragging",this.targetElementDraggingClass="jsplumb-target-element-dragging",this.endpointAnchorClassPrefix="jsplumb-endpoint-anchor",this.hoverSourceClass="jsplumb-source-hover",this.hoverTargetClass="jsplumb-target-hover",this.dragSelectClass="jsplumb-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(a,b,d){d=d||{};var f=s.extend({},d);s.extend(f,b),f.endpoint=f.endpoint||c.Defaults.Endpoint,f.paintStyle=f.paintStyle||c.Defaults.EndpointStyle;for(var g=[],h=e.isArray(a)||null!=a.length&&!e.isString(a)?a:[a],i=0,j=h.length;j>i;i++){f.source=c.getElement(h[i]),na(f.source);var k=Y(f.source),l=R(f,k),m=pa(k,f.source).info.o;e.addToList(w,k,l),E||l.paint({anchorLoc:l.anchor.compute({xy:[m.left,m.top],wh:D[k],element:l,timestamp:F}),timestamp:F}),g.push(l),l._doNotDeleteOnDetach=!0}return 1==g.length?g[0]:g},this.addEndpoints=function(a,b,d){for(var f=[],g=0,h=b.length;h>g;g++){var i=c.addEndpoint(a,b[g],d);e.isArray(i)?Array.prototype.push.apply(f,i):f.push(i)}return f},this.animate=function(a,b,d){if(!this.animationSupported)return!1;d=d||{};var f=c.getElement(a),g=Y(f),h=s.animEvents.step,i=s.animEvents.complete;d[h]=e.wrap(d[h],function(){c.revalidate(g)}),d[i]=e.wrap(d[i],function(){c.revalidate(g)}),c.doAnimate(f,b,d)},this.checkCondition=function(a,b){var d=c.getListener(a),f=!0;if(d&&d.length>0){var g=Array.prototype.slice.call(arguments,1);try{for(var h=0,i=d.length;i>h;h++)f=f&&d[h].apply(d[h],g)}catch(j){e.log(c,"cannot check condition ["+a+"]"+j)}}return f},this.connect=function(a,b){var c,d=O(a,b);if(d){if(null==d.source&&null==d.sourceEndpoint)return void e.log("Cannot establish connection - source does not exist");if(null==d.target&&null==d.targetEndpoint)return void e.log("Cannot establish connection - target does not exist");na(d.source),c=P(d),Q(c,d)}return c};var Z=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],$=function(a,b,c,d){var e,f,g,h=Z[c],i=a[h.elId],j=(a[h.el],a.endpoints[c]),k={index:c,originalSourceId:0===c?i:a.sourceId,newSourceId:a.sourceId,originalTargetId:1==c?i:a.targetId,newTargetId:a.targetId,connection:a};if(b.constructor==s.Endpoint)e=b,e.addConnection(a);else if(f=Y(b),g=this[h.epDefs][f],f===a[h.elId])e=null;else if(g)for(var l in g){if(!g[l].enabled)return;e=null!=g[l].endpoint&&g[l].endpoint._jsPlumb?g[l].endpoint:this.addEndpoint(b,g[l].def),g[l].uniqueEndpoint&&(g[l].endpoint=e),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0,e.addConnection(a)}else e=a.makeEndpoint(0===c,b,f),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0;return null!=e&&(j.detachFromConnection(a),a.endpoints[c]=e,a[h.el]=e.element,a[h.elId]=e.elementId,k[0===c?"newSourceId":"newTargetId"]=e.elementId,aa(k),d||a.repaint()),k}.bind(this);this.setSource=function(a,b,c){var d=$(a,b,0,c);this.anchorManager.sourceChanged(d.originalSourceId,d.newSourceId,a)},this.setTarget=function(a,b,c){var d=$(a,b,1,c);this.anchorManager.updateOtherEndpoint(d.originalSourceId,d.originalTargetId,d.newTargetId,a)},this.deleteEndpoint=function(a,b){var d="string"==typeof a?x[a]:a;return d&&c.deleteObject({endpoint:d,dontUpdateHover:b}),c},this.deleteEveryEndpoint=function(){var a=c.setSuspendDrawing(!0);for(var b in w){var d=w[b];if(d&&d.length)for(var e=0,f=d.length;f>e;e++)c.deleteEndpoint(d[e],!0)}return w={},y={},x={},z={},A={},c.anchorManager.reset(),c.getDragManager().reset(),a||c.setSuspendDrawing(!1),c};var _=function(a,b,d){var e=c.Defaults.ConnectionType||c.getDefaultConnectionType(),f=a.constructor==e,g=f?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&&c.fire("connectionDetached",g,d),c.anchorManager.connectionDetached(g)},aa=c.fireMoveEvent=function(a,b){c.fire("connectionMoved",a,b)};this.unregisterEndpoint=function(a){a._jsPlumb.uuid&&(x[a._jsPlumb.uuid]=null),c.anchorManager.deleteEndpoint(a);for(var b in w){var d=w[b];if(d){for(var e=[],f=0,g=d.length;g>f;f++)d[f]!=a&&e.push(d[f]);w[b]=e}w[b].length<1&&delete w[b]}},this.detach=function(){if(0!==arguments.length){var a=c.Defaults.ConnectionType||c.getDefaultConnectionType(),b=arguments[0].constructor==a,d=2==arguments.length&&b?arguments[1]||{}:arguments[0],f=d.fireEvent!==!1,g=d.forceDetach,h=b?arguments[0]:d.connection;if(h)(g||e.functionChain(!0,!1,[[h.endpoints[0],"isDetachAllowed",[h]],[h.endpoints[1],"isDetachAllowed",[h]],[h,"isDetachAllowed",[h]],[c,"checkCondition",["beforeDetach",h]]]))&&h.endpoints[0].detach(h,!1,!0,f);else{var i=s.extend({},d);if(i.uuids)L(i.uuids[0]).detachFrom(L(i.uuids[1]),f);else if(i.sourceEndpoint&&i.targetEndpoint)i.sourceEndpoint.detachFrom(i.targetEndpoint);else{var j=Y(c.getElement(i.source)),k=Y(c.getElement(i.target));S(j,function(a){(a.sourceId==j&&a.targetId==k||a.targetId==j&&a.sourceId==k)&&c.checkCondition("beforeDetach",a)&&a.endpoints[0].detach(a,!1,!0,f)})}}}},this.detachAllConnections=function(a,b){b=b||{},a=c.getElement(a);var d=Y(a),e=w[d];if(e&&e.length)for(var f=0,g=e.length;g>f;f++)e[f].detachAll(b.fireEvent!==!1,b.forceDetach);return c},this.detachEveryConnection=function(a){return a=a||{},c.batch(function(){for(var b in w){var c=w[b];if(c&&c.length)for(var d=0,e=c.length;e>d;d++)c[d].detachAll(a.fireEvent!==!1,a.forceDetach)}v.length=0}),c},this.deleteObject=function(a){var b={endpoints:{},connections:{},endpointCount:0,connectionCount:0},d=(a.fireEvent!==!1,a.deleteAttachedObjects!==!1),f=function(c){if(null!=c&&null==b.connections[c.id]&&(a.dontUpdateHover||null==c._jsPlumb||c.setHover(!1),b.connections[c.id]=c,b.connectionCount++,d))for(var e=0;e<c.endpoints.length;e++)c.endpoints[e]._deleteOnDetach&&g(c.endpoints[e])},g=function(c){if(null!=c&&null==b.endpoints[c.id]&&(a.dontUpdateHover||null==c._jsPlumb||c.setHover(!1),b.endpoints[c.id]=c,b.endpointCount++,d))for(var e=0;e<c.connections.length;e++){var g=c.connections[e];f(g)}};a.connection?f(a.connection):g(a.endpoint);for(var h in b.connections){var i=b.connections[h];i._jsPlumb&&(e.removeWithFunction(v,function(a){return i.id==a.id}),_(i,a.fireEvent===!1?!1:!i.pending,a.originalEvent),i.endpoints[0].detachFromConnection(i),i.endpoints[1].detachFromConnection(i),i.cleanup(!0),i.destroy(!0))}for(var j in b.endpoints){var k=b.endpoints[j];k._jsPlumb&&(c.unregisterEndpoint(k),k.cleanup(!0),k.destroy(!0))}return b},this.draggable=function(a,b){var d;return l(function(a){d=m(a),d.el&&M(d.el,!0,b,d.id)},a),c},this.droppable=function(a,b){var d;return b=b||{},b.allowLoopback=!1,l(function(a){d=m(a),d.el&&c.initDroppable(d.el,b)},a),c};var ba=function(a,b,c,d){for(var e=0,f=a.length;f>e;e++)a[e][b].apply(a[e],c);return d(a)},ca=function(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},da=function(a,b,c){return function(){return ba(a,b,arguments,c)}},ea=function(a,b){return function(){return ca(a,b,arguments)}},fa=function(a,b){var c=[];if(a)if("string"==typeof a){if("*"===a)return a;c.push(a)}else if(b)c=a;else if(a.length)for(var d=0,e=a.length;e>d;d++)c.push(m(a[d]).id);else c.push(m(a).id);return c},ga=function(a,b,c){return"*"===a?!0:a.length>0?-1!=a.indexOf(b):!c};this.getConnections=function(a,b){a?a.constructor==String&&(a={scope:a}):a={};for(var d=a.scope||c.getDefaultScope(),e=fa(d,!0),f=fa(a.source),g=fa(a.target),h=!b&&e.length>1?{}:[],i=function(a,c){if(!b&&e.length>1){var d=h[a];null==d&&(d=h[a]=[]),d.push(c)}else h.push(c)},j=0,k=v.length;k>j;j++){var l=v[j];ga(e,l.scope)&&ga(f,l.sourceId)&&ga(g,l.targetId)&&i(l.scope,l)}return h};var ha=function(a,b){return function(c){for(var d=0,e=a.length;e>d;d++)c(a[d]);return b(a)}},ia=function(a){return function(b){return a[b]}},ja=function(a,b){var c,d,e={length:a.length,each:ha(a,b),get:ia(a)},f=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],g=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(c=0,d=f.length;d>c;c++)e[f[c]]=da(a,f[c],b);for(c=0,d=g.length;d>c;c++)e[g[c]]=ea(a,g[c]);return e},ka=function(a){var b=ja(a,ka);return s.extend(b,{setDetachable:da(a,"setDetachable",ka),setReattach:da(a,"setReattach",ka),setConnector:da(a,"setConnector",ka),detach:function(){for(var b=0,d=a.length;d>b;b++)c.detach(a[b])},isDetachable:ea(a,"isDetachable"),isReattach:ea(a,"isReattach")})},la=function(a){var b=ja(a,la);return s.extend(b,{setEnabled:da(a,"setEnabled",la),setAnchor:da(a,"setAnchor",la),isEnabled:ea(a,"isEnabled"),detachAll:function(){for(var b=0,c=a.length;c>b;b++)a[b].detachAll()},remove:function(){for(var b=0,d=a.length;d>b;b++)c.deleteObject({endpoint:a[b]})}})};this.select=function(a){return a=a||{},a.scope=a.scope||"*",ka(a.connections||c.getConnections(a,!0))},this.selectEndpoints=function(a){a=a||{},a.scope=a.scope||"*";var b=!a.element&&!a.source&&!a.target,c=b?"*":fa(a.element),d=b?"*":fa(a.source),e=b?"*":fa(a.target),f=fa(a.scope,!0),g=[];for(var h in w){var i=ga(c,h,!0),j=ga(d,h,!0),k="*"!=d,l=ga(e,h,!0),m="*"!=e;if(i||j||l)a:for(var n=0,o=w[h].length;o>n;n++){var p=w[h][n];if(ga(f,p.scope,!0)){var q=k&&d.length>0&&!p.isSource,r=m&&e.length>0&&!p.isTarget;if(q||r)continue a;g.push(p)}}}return la(g)},this.getAllConnections=function(){return v},this.getDefaultScope=function(){return G},this.getEndpoint=L,this.getEndpoints=function(a){return w[m(a).id]},this.getDefaultEndpointType=function(){return s.Endpoint},this.getDefaultConnectionType=function(){return s.Connection},this.getId=Y,this.appendElement=J;var ma=!1;this.isHoverSuspended=function(){return ma},this.setHoverSuspended=function(a){ma=a},this.hide=function(a,b){return U(a,"none",b),c},this.idstamp=I,this.connectorsInitialized=!1,this.registerConnectorType=function(a,b){d.push([a,b])};var na=function(a){if(!p&&a){var b=c.getElement(a);b.offsetParent&&c.setContainer(b.offsetParent)}},oa=function(){c.Defaults.Container&&c.setContainer(c.Defaults.Container)},pa=c.manage=function(a,b,d){return y[a]||(y[a]={el:b,endpoints:[],connections:[]},y[a].info=qa({elId:a,timestamp:F}),d||c.fire("manageElement",{id:a,info:y[a].info,el:b})),y[a]},qa=this.updateOffset=function(a){var b,d=a.timestamp,e=a.recalc,f=a.offset,g=a.elId;return E&&!d&&(d=F),!e&&d&&d===A[g]?{o:a.offset||z[g],s:D[g]}:(e||!f&&null==z[g]?(b=y[g]?y[g].el:null,null!=b&&(D[g]=c.getSize(b),z[g]=c.getOffset(b),A[g]=d)):(z[g]=f||z[g],null==D[g]&&(b=y[g].el,null!=b&&(D[g]=c.getSize(b))),A[g]=d),z[g]&&!z[g].right&&(z[g].right=z[g].left+D[g][0],z[g].bottom=z[g].top+D[g][1],z[g].width=D[g][0],z[g].height=D[g][1],z[g].centerx=z[g].left+z[g].width/2,z[g].centery=z[g].top+z[g].height/2),{o:z[g],s:D[g]})};this.init=function(){a=s.getRenderModes();var b=function(a,b,c){s.Connectors[a][b]=function(){c.apply(this,arguments),s.ConnectorRenderers[a].apply(this,arguments)},e.extend(s.Connectors[a][b],[c,s.ConnectorRenderers[a]])};if(!s.connectorsInitialized){for(var f=0;f<d.length;f++)for(var g=0;g<a.length;g++)b(a[g],d[f][1],d[f][0]);s.connectorsInitialized=!0}u||(oa(),c.anchorManager=new s.AnchorManager({jsPlumbInstance:c}),u=!0,c.fire("ready",c))}.bind(this),this.log=t,this.jsPlumbUIComponent=n,this.makeAnchor=function(){var a,b=function(a,b){if(s.Anchors[a])return new s.Anchors[a](b);if(!c.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+a+"'"}};if(0===arguments.length)return null;var d=arguments[0],f=arguments[1],g=(arguments[2],null);if(d.compute&&d.getOrientation)return d;if("string"==typeof d)g=b(arguments[0],{elementId:f,jsPlumbInstance:c});else if(e.isArray(d))if(e.isArray(d[0])||e.isString(d[0]))2==d.length&&e.isObject(d[1])?e.isString(d[0])?(a=s.extend({elementId:f,jsPlumbInstance:c},d[1]),g=b(d[0],a)):(a=s.extend({elementId:f,jsPlumbInstance:c,anchors:d[0]},d[1]),g=new s.DynamicAnchor(a)):g=new s.DynamicAnchor({anchors:d,selector:null,elementId:f,jsPlumbInstance:c});else{var h={x:d[0],y:d[1],orientation:d.length>=4?[d[2],d[3]]:[0,0],offsets:d.length>=6?[d[4],d[5]]:[0,0],elementId:f,jsPlumbInstance:c,cssClass:7==d.length?d[6]:null};g=new s.Anchor(h),g.clone=function(){return new s.Anchor(h)}}return g.id||(g.id="anchor_"+I()),g},this.makeAnchors=function(a,b,d){for(var f=[],g=0,h=a.length;h>g;g++)"string"==typeof a[g]?f.push(s.Anchors[a[g]]({elementId:b,jsPlumbInstance:d})):e.isArray(a[g])&&f.push(c.makeAnchor(a[g],b,d));return f},this.makeDynamicAnchor=function(a,b){return new s.DynamicAnchor({anchors:a,selector:b,elementId:null,jsPlumbInstance:c})},this.targetEndpointDefinitions={};var ra=function(a,b,c){};this.sourceEndpointDefinitions={};var sa=function(a,b,c,d,e){for(var f=a.target||a.srcElement,g=!1,h=d.getSelector(b,c),i=0;i<h.length;i++)if(h[i]==f){g=!0;break}return e?!g:g},ta=function(a,b,d,f,g){var h=new n(b),i=b._jsPlumb.EndpointDropHandler({jsPlumb:c,enabled:function(){return a.def.enabled},isFull:function(){var b=c.select({target:a.id}).length;return a.def.maxConnections>0&&b>=a.def.maxConnections},element:a.el,elementId:a.id,isSource:f,isTarget:g,addClass:function(b){c.addClass(a.el,b)},removeClass:function(b){c.removeClass(a.el,b)},onDrop:function(a){var b=a.endpoints[0];b.anchor.locked=!1},isDropAllowed:function(){return h.isDropAllowed.apply(h,arguments)},isRedrop:function(b){return null!=b.suspendedElement&&null!=b.suspendedEndpoint&&b.suspendedEndpoint.element===a.el},getEndpoint:function(d){var e=a.def.endpoint;if(null==e||null==e._jsPlumb){var f=c.deriveEndpointAndAnchorSpec(d.getType().join(" "),!0),g=f.endpoints?s.extend(b,{endpoint:a.def.def.endpoint||f.endpoints[1]}):b;f.anchors&&(g=s.extend(g,{anchor:a.def.def.anchor||f.anchors[1]})),e=c.addEndpoint(a.el,g),e._mtNew=!0}if(b.uniqueEndpoint&&(a.def.endpoint=e),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0,d.isDetachable()&&e.initDraggable(),null!=e.anchor.positionFinder){var h=c.getUIPosition(arguments,c.getZoom()),i=c.getOffset(a.el),j=c.getSize(a.el),k=e.anchor.positionFinder(h,i,j,e.anchor.constructorParams);e.anchor.x=k[0],e.anchor.y=k[1]}return e},maybeCleanup:function(a){a._mtNew&&0===a.connections.length?c.deleteObject({endpoint:a}):delete a._mtNew}}),j=s.dragEvents.drop;return d.scope=d.scope||b.scope||c.Defaults.Scope,d[j]=e.wrap(d[j],i,!0),g&&(d[s.dragEvents.over]=function(){return!0}),b.allowLoopback===!1&&(d.canDrop=function(b){var c=b.getDragElement()._jsPlumbRelatedElement;return c!=a.el}),c.initDroppable(a.el,d,"internal"),i};this.makeTarget=function(a,b,c){var d=s.extend({_jsPlumb:this},c);s.extend(d,b),ra(d,1,this);for(var e=(!(d.deleteEndpointsOnDetach===!1),d.maxConnections||-1),f=function(a){var b=m(a),c=b.id,f=s.extend({},d.dropOptions||{}),g="default";this.targetEndpointDefinitions[c]=this.targetEndpointDefinitions[c]||{},na(c);var h={def:s.extend({},d),uniqueEndpoint:d.uniqueEndpoint,maxConnections:e,enabled:!0};b.def=h,this.targetEndpointDefinitions[c][g]=h,ta(b,d,f,d.isSource===!0,!0),b.el._katavorioDrop[b.el._katavorioDrop.length-1].targetDef=h}.bind(this),g=a.length&&a.constructor!=String?a:[a],h=0,i=g.length;i>h;h++)f(g[h]);
return this},this.unmakeTarget=function(a,b){var c=m(a);return s.destroyDroppable(c.el),b||delete this.targetEndpointDefinitions[c.id],this},this.makeSource=function(a,b,d){var f=s.extend({_jsPlumb:this},d);s.extend(f,b);var g=f.connectionType||"default",h=c.deriveEndpointAndAnchorSpec(g);f.endpoint=f.endpoint||h.endpoints[0],f.anchor=f.anchor||h.anchors[0],ra(f,0,this);for(var i=f.maxConnections||-1,j=f.onMaxConnections,l=function(a){var b=a.id,d=this.getElement(a.el);this.sourceEndpointDefinitions[b]=this.sourceEndpointDefinitions[b]||{},na(b);var h={def:s.extend({},f),uniqueEndpoint:f.uniqueEndpoint,maxConnections:i,enabled:!0};this.sourceEndpointDefinitions[b][g]=h,a.def=h;var l=s.dragEvents.stop,m=s.dragEvents.drag,n=s.extend({},f.dragOptions||{}),o=n.drag,p=n.stop,q=null,r=!1;n.scope=n.scope||f.scope,n[m]=e.wrap(n[m],function(){o&&o.apply(this,arguments),r=!1}),n[l]=e.wrap(n[l],function(){if(p&&p.apply(this,arguments),this.currentlyDragging=!1,null!=q._jsPlumb){var a=f.anchor||this.Defaults.Anchor,d=q.anchor,e=q.connections[0],g=this.makeAnchor(a,b,this),h=q.element;if(null!=g.positionFinder){var i=c.getOffset(h),j=this.getSize(h),k={left:i.left+d.x*j[0],top:i.top+d.y*j[1]},l=g.positionFinder(k,i,j,g.constructorParams);g.x=l[0],g.y=l[1]}q.setAnchor(g,!0),q.repaint(),this.repaint(q.elementId),null!=e&&this.repaint(e.targetId)}}.bind(this));var t=function(h){if(3!==h.which&&2!==h.button){var l=this.sourceEndpointDefinitions[b][g];if(l.enabled){if(b=this.getId(this.getElement(a.el)),f.filter){var m=e.isString(f.filter)?sa(h,a.el,f.filter,this,f.filterExclude):f.filter(h,a.el);if(m===!1)return}var o=this.select({source:b}).length;if(l.maxConnections>=0&&o>=l.maxConnections)return j&&j({element:a.el,maxConnections:i},h),!1;var p=s.getPositionOnElement(h,d,k),t={};s.extend(t,f),t.isTemporarySource=!0,t.anchor=[p[0],p[1],0,0],t.dragOptions=n,l.def.scope&&(t.scope=l.def.scope),q=this.addEndpoint(b,t),r=!0,q._doNotDeleteOnDetach=!1,q._deleteOnDetach=!0,l.uniqueEndpoint&&(l.endpoint?q.finalEndpoint=l.endpoint:(l.endpoint=q,q._deleteOnDetach=!1,q._doNotDeleteOnDetach=!0));var u=function(){c.off(q.canvas,"mouseup",u),c.off(a.el,"mouseup",u),r&&(r=!1,c.deleteEndpoint(q))};c.on(q.canvas,"mouseup",u),c.on(a.el,"mouseup",u);var v={};if(l.def.extract)for(var w in l.def.extract){var x=h.srcElement.getAttribute(w);x&&(v[l.def.extract[w]]=x)}c.trigger(q.canvas,"mousedown",h,v),e.consume(h)}}}.bind(this);this.on(a.el,"mousedown",t),h.trigger=t,f.filter&&(e.isString(f.filter)||e.isFunction(f.filter))&&c.setDragFilter(a.el,f.filter);var u=s.extend({},f.dropOptions||{});ta(a,f,u,!0,f.isTarget===!0)}.bind(this),n=a.length&&a.constructor!=String?a:[a],o=0,p=n.length;p>o;o++)l(m(n[o]));return this},this.unmakeSource=function(a,b,d){var e=m(a),f=this.sourceEndpointDefinitions[e.id];if(f)for(var g in f)if(null==b||b===g){var h=f[g].trigger;h&&c.off(e.el,"mousedown",h),d||delete this.sourceEndpointDefinitions[e.id][g]}return this},this.unmakeEverySource=function(){for(var a in this.sourceEndpointDefinitions)c.unmakeSource(a,null,!0);return this.sourceEndpointDefinitions={},this};var ua=function(a,b,c){b=e.isArray(b)?b:[b];var d=Y(a);c=c||"default";for(var f=0;f<b.length;f++){var g=this[b[f]][d];if(g&&g[c])return g[c].def.scope||this.Defaults.Scope}}.bind(this),va=function(a,b,c,d){c=e.isArray(c)?c:[c];var f=Y(a);d=d||"default";for(var g=0;g<c.length;g++){var h=this[c[g]][f];h&&h[d]&&(h[d].def.scope=b)}}.bind(this);this.getScope=function(a,b){return ua(a,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(a){return ua(a,"sourceEndpointDefinitions")},this.getTargetScope=function(a){return ua(a,"targetEndpointDefinitions")},this.setScope=function(a,b,c){this.setSourceScope(a,b,c),this.setTargetScope(a,b,c)},this.setSourceScope=function(a,b,c){va(a,b,"sourceEndpointDefinitions",c),this.setDragScope(a,b)},this.setTargetScope=function(a,b,c){va(a,b,"targetEndpointDefinitions",c),this.setDropScope(a,b)},this.unmakeEveryTarget=function(){for(var a in this.targetEndpointDefinitions)c.unmakeTarget(a,!0);return this.targetEndpointDefinitions={},this};var wa=function(a,b,c,d,f){var g="source"==a?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(f=f||"default",e.isString(b)&&g[b]&&g[b][f])g[b][f].enabled=d?!g[b][f].enabled:c;else if(b.length)for(var h=0,i=b.length;i>h;h++){var j=m(b[h]);g[j.id]&&g[j.id][f]&&(g[j.id][f].enabled=d?!g[j.id][f].enabled:c)}else{var k=m(b).id;g[k]&&g[k][f]&&(g[k][f].enabled=d?!g[k][f].enabled:c)}return this}.bind(this),xa=function(a,b){return e.isString(a)||!a.length?b.apply(this,[a]):a.length?b.apply(this,[a[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(a,b){return wa("source",a,null,!0,b),this.isSourceEnabled(a,b)},this.setSourceEnabled=function(a,b,c){return wa("source",a,b,null,c)},this.isSource=function(a,b){return b=b||"default",xa(a,function(a){var c=this.sourceEndpointDefinitions[m(a).id];return null!=c&&null!=c[b]}.bind(this))},this.isSourceEnabled=function(a,b){return b=b||"default",xa(a,function(a){var c=this.sourceEndpointDefinitions[m(a).id];return c&&c[b]&&c[b].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(a,b){return wa("target",a,null,!0,b),this.isTargetEnabled(a,b)},this.isTarget=function(a,b){return b=b||"default",xa(a,function(a){var c=this.targetEndpointDefinitions[m(a).id];return null!=c&&null!=c[b]}.bind(this))},this.isTargetEnabled=function(a,b){return b=b||"default",xa(a,function(a){var c=this.targetEndpointDefinitions[m(a).id];return c&&c[b]&&c[b].enabled===!0}.bind(this))},this.setTargetEnabled=function(a,b,c){return wa("target",a,b,null,c)},this.ready=function(a){c.bind("ready",a)};var ya=function(a,b){if("object"==typeof a&&a.length)for(var d=0,e=a.length;e>d;d++)b(a[d]);else b(a);return c};this.repaint=function(a,b,c){return ya(a,function(a){K(a,b,c)})},this.revalidate=function(a,b,d){return ya(a,function(a){var e=d?a:c.getId(a);c.updateOffset({elId:e,recalc:!0,timestamp:b}),c.repaint(a)})},this.repaintEverything=function(){var a,b=f();for(a in w)c.updateOffset({elId:a,recalc:!0,timestamp:b});for(a in w)K(a,null,b);return this},this.removeAllEndpoints=function(a,b,d){d=d||[];var e=function(a){var f,g,h=m(a),i=w[h.id];if(i)for(d.push(h),f=0,g=i.length;g>f;f++)c.deleteEndpoint(i[f],!1);if(delete w[h.id],b&&h.el&&3!=h.el.nodeType&&8!=h.el.nodeType)for(f=0,g=h.el.childNodes.length;g>f;f++)e(h.el.childNodes[f])};return e(a),this};var za=function(a,b){c.removeAllEndpoints(a.id,!0,b);for(var d=function(a){c.getDragManager().elementRemoved(a.id),c.anchorManager.clearFor(a.id),c.anchorManager.removeFloatingConnection(a.id),delete c.floatingConnections[a.id],delete y[a.id],delete z[a.id],a.el&&(c.removeElement(a.el),a.el._jsPlumb=null)},e=1;e<b.length;e++)d(b[e]);d(a)};this.remove=function(a,b){var d=m(a),e=[];return d.text?d.el.parentNode.removeChild(d.el):d.id&&c.batch(function(){za(d,e)},b===!1),c},this.empty=function(a,b){var d=[],e=function(a,b){var c=m(a);if(c.text)c.el.parentNode.removeChild(c.el);else if(c.el){for(;c.el.childNodes.length>0;)e(c.el.childNodes[0]);b||za(c,d)}};return c.batch(function(){e(a,!0)},b===!1),c},this.reset=function(){c.silently(function(){c.deleteEveryEndpoint(),c.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},v.length=0,this.doReset&&this.doReset()}.bind(this))};var Aa=function(a){a.canvas&&a.canvas.parentNode&&a.canvas.parentNode.removeChild(a.canvas),a.cleanup(),a.destroy()};this.clear=function(){c.select().each(Aa),c.selectEndpoints().each(Aa),w={},x={}},this.setDefaultScope=function(a){return G=a,c},this.setDraggable=T,this.deriveEndpointAndAnchorSpec=function(a,b){for(var d=((b?"":"default ")+a).split(/[\s]/),e=null,f=null,g=null,h=null,i=0;i<d.length;i++){var j=c.getType(d[i],"connection");j&&(j.endpoints&&(e=j.endpoints),j.endpoint&&(f=j.endpoint),j.anchors&&(h=j.anchors),j.anchor&&(g=j.anchor))}return{endpoints:e?e:[f,f],anchors:h?h:[g,g]}},this.setId=function(a,b,c){var d;e.isString(a)?d=a:(a=this.getElement(a),d=this.getId(a));var f=this.getConnections({source:d,scope:"*"},!0),g=this.getConnections({target:d,scope:"*"},!0);b=""+b,c?a=this.getElement(b):(a=this.getElement(d),this.setAttribute(a,"id",b)),w[b]=w[d]||[];for(var h=0,i=w[b].length;i>h;h++)w[b][h].setElementId(b),w[b][h].setReferenceElement(a);delete w[d],this.sourceEndpointDefinitions[b]=this.sourceEndpointDefinitions[d],delete this.sourceEndpointDefinitions[d],this.targetEndpointDefinitions[b]=this.targetEndpointDefinitions[d],delete this.targetEndpointDefinitions[d],this.anchorManager.changeId(d,b),this.getDragManager().changeId(d,b),y[b]=y[d],delete y[d];var j=function(c,d,e){for(var f=0,g=c.length;g>f;f++)c[f].endpoints[d].setElementId(b),c[f].endpoints[d].setReferenceElement(a),c[f][e+"Id"]=b,c[f][e]=a};j(f,0,"source"),j(g,1,"target"),this.repaint(b)},this.setDebugLog=function(a){t=a},this.setSuspendDrawing=function(a,b){var c=E;return E=a,F=a?(new Date).getTime():null,b&&this.repaintEverything(),c},this.isSuspendDrawing=function(){return E},this.getSuspendedAt=function(){return F},this.batch=function(a,b){var c=this.isSuspendDrawing();c||this.setSuspendDrawing(!0);try{a()}catch(d){e.log("Function run while suspended failed",d)}c||this.setSuspendDrawing(!1,!b)},this.doWhileSuspended=this.batch,this.getCachedData=X,this.timestamp=f,this.show=function(a,b){return U(a,"block",b),c},this.toggleVisible=W,this.toggleDraggable=V,this.addListener=this.bind};e.extend(r,e.EventGenerator,{setAttribute:function(a,b,c){this.setAttribute(a,b,c)},getAttribute:function(a,b){return this.getAttribute(s.getElement(a),b)},convertToFullOverlaySpec:function(a){return e.isString(a)&&(a=[a,{}]),a[1].id=a[1].id||e.uuid(),a},registerConnectionType:function(a,b){if(this._connectionTypes[a]=s.extend({},b),b.overlays){for(var c={},d=0;d<b.overlays.length;d++){var e=this.convertToFullOverlaySpec(b.overlays[d]);c[e[1].id]=e}this._connectionTypes[a].overlays=c}},registerConnectionTypes:function(a){for(var b in a)this.registerConnectionType(b,a[b])},registerEndpointType:function(a,b){if(this._endpointTypes[a]=s.extend({},b),b.overlays){for(var c={},d=0;d<b.overlays.length;d++){var e=this.convertToFullOverlaySpec(b.overlays[d]);c[e[1].id]=e}this._endpointTypes[a].overlays=c}},registerEndpointTypes:function(a){for(var b in a)this.registerEndpointType(b,a[b])},getType:function(a,b){return"connection"===b?this._connectionTypes[a]:this._endpointTypes[a]},setIdChanged:function(a,b){this.setId(a,b,!0)},setParent:function(a,b){var c=this.getElement(a),d=this.getId(c),e=this.getElement(b),f=this.getId(e);c.parentNode.removeChild(c),e.appendChild(c),this.getDragManager().setParent(c,d,e,f)},extend:function(a,b,c){var d;if(c)for(d=0;d<c.length;d++)a[c[d]]=b[c[d]];else for(d in b)a[d]=b[d];return a},floatingConnections:{},getFloatingAnchorIndex:function(a){return a.endpoints[0].isFloating()?0:a.endpoints[1].isFloating()?1:-1}});var s=new r;c.jsPlumb=s,s.getInstance=function(a){var b=new r(a);return b.init(),b},s.each=function(a,b){if(null!=a)if("string"==typeof a)b(s.getElement(a));else if(null!=a.length)for(var c=0;c<a.length;c++)b(s.getElement(a[c]));else b(a)},"function"==typeof define&&(define("jsplumb",[],function(){return s}),define("jsplumbinstance",[],function(){return s.getInstance()})),"undefined"!=typeof b&&(b.jsPlumb=s)}.call(this),function(){var a=this,b=(a.jsPlumbUtil,!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),function(a,b){if(null==a)return[0,0];var c=g(a),d=f(c,0);return[d[b+"X"],d[b+"Y"]]}),c=function(a){return null==a?[0,0]:b(a,"page")},d=function(a){return b(a,"screen")},e=function(a){return b(a,"client")},f=function(a,b){return a.item?a.item(b):a[b]},g=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},h=function(a){var b={},c=[],d={},e={},f={};this.register=function(g){var h=a.getId(g),i=a.getOffset(g);b[h]||(b[h]=g,c.push(g),d[h]={});var j=function(b){if(b)for(var c=0;c<b.childNodes.length;c++)if(3!=b.childNodes[c].nodeType&&8!=b.childNodes[c].nodeType){var g=jsPlumb.getElement(b.childNodes[c]),k=a.getId(b.childNodes[c],null,!0);if(k&&e[k]&&e[k]>0){var l=a.getOffset(g);d[h][k]={id:k,offset:{left:l.left-i.left,top:l.top-i.top}},f[k]=h}j(b.childNodes[c])}};j(g)},this.updateOffsets=function(b){if(null!=b){var c=jsPlumb.getElement(b),e=a.getId(c),g=d[e],h=a.getOffset(c);if(g)for(var i in g)if(g.hasOwnProperty(i)){var j=jsPlumb.getElement(i),k=a.getOffset(j);d[e][i]={id:i,offset:{left:k.left-h.left,top:k.top-h.top}},f[i]=e}}},this.endpointAdded=function(c,g){g=g||a.getId(c);var h=document.body,i=c.parentNode;for(e[g]=e[g]?e[g]+1:1;null!=i&&i!=h;){var j=a.getId(i,null,!0);if(j&&b[j]){var k=a.getOffset(i);if(null==d[j][g]){var l=a.getOffset(c);d[j][g]={id:g,offset:{left:l.left-k.left,top:l.top-k.top}},f[g]=j}break}i=i.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&&(e[a.elementId]--,e[a.elementId]<=0))for(var b in d)d.hasOwnProperty(b)&&d[b]&&(delete d[b][a.elementId],delete f[a.elementId])},this.changeId=function(a,b){d[b]=d[a],d[a]={},f[b]=f[a],f[a]=null},this.getElementsForDraggable=function(a){return d[a]},this.elementRemoved=function(a){var b=f[a];b&&(delete d[b][a],delete f[a])},this.reset=function(){b={},c=[],d={},e={}},this.dragEnded=function(b){var c=a.getId(b),d=f[c];d&&this.updateOffsets(d)},this.setParent=function(b,c,e,g){var h=f[c];if(h){d[g]||(d[g]={}),d[g][c]=d[h][c],delete d[h][c];var i=a.getOffset(e),j=a.getOffset(b);d[g][c].offset={left:j.left-i.left,top:j.top-i.top},f[c]=g}},this.getDragAncestor=function(b){var c=jsPlumb.getElement(b),d=a.getId(c),e=f[d];return e?jsPlumb.getElement(e):null}},i=function(a){return null==a?null:a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},j=function(a,b){b=i(b),"undefined"!=typeof a.className.baseVal?a.className.baseVal=b:a.className=b},k=function(a){return"undefined"==typeof a.className.baseVal?a.className:a.className.baseVal},l=function(a,b,c){b=null==b?[]:jsPlumbUtil.isArray(b)?b:b.split(/\s+/),c=null==c?[]:jsPlumbUtil.isArray(c)?c:c.split(/\s+/);var d=k(a),e=d.split(/\s+/),f=function(a,b){for(var c=0;c<b.length;c++)if(a)-1==e.indexOf(b[c])&&e.push(b[c]);else{var d=e.indexOf(b[c]);-1!=d&&e.splice(d,1)}};f(!0,b),f(!1,c),j(a,e.join(" "))};jsPlumb.extend(jsPlumbInstance.prototype,{headless:!1,pageLocation:c,screenLocation:d,clientLocation:e,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new h(this)),this.dragManager},recalculateOffsets:function(a){this.getDragManager().updateOffsets(a)},createElement:function(a,b,c,d){return this.createElementNS(null,a,b,c,d)},createElementNS:function(a,b,c,d,e){var f,g=null==a?document.createElement(b):document.createElementNS(a,b);c=c||{};for(f in c)g.style[f]=c[f];d&&(g.className=d),e=e||{};for(f in e)g.setAttribute(f,""+e[f]);return g},getAttribute:function(a,b){return null!=a.getAttribute?a.getAttribute(b):null},setAttribute:function(a,b,c){null!=a.setAttribute&&a.setAttribute(b,c)},setAttributes:function(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setAttribute(c,b[c])},appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return["svg"]},getClass:k,addClass:function(a,b){jsPlumb.each(a,function(a){l(a,b)})},hasClass:function(a,b){return a=jsPlumb.getElement(a),a.classList?a.classList.contains(b):-1!=k(a).indexOf(b)},removeClass:function(a,b){jsPlumb.each(a,function(a){l(a,null,b)})},updateClasses:function(a,b,c){jsPlumb.each(a,function(a){l(a,b,c)})},setClass:function(a,b){jsPlumb.each(a,function(a){j(a,b)})},setPosition:function(a,b){a.style.left=b.left+"px",a.style.top=b.top+"px"},getPosition:function(a){var b=function(b){var c=a.style[b];return c?c.substring(0,c.length-2):0};return{left:b("left"),top:b("top")}},getStyle:function(a,b){return"undefined"!=typeof window.getComputedStyle?getComputedStyle(a,null).getPropertyValue(b):a.currentStyle[b]},getSelector:function(a,b){var c=null;return c=1==arguments.length?null!=a.nodeType?a:document.querySelectorAll(a):a.querySelectorAll(b)},getOffset:function(a,b,c){a=jsPlumb.getElement(a),c=c||this.getContainer();for(var d={left:a.offsetLeft,top:a.offsetTop},e=b||null!=c&&a!=c&&a.offsetParent!=c?a.offsetParent:null,f=function(a){null!=a&&a!==document.body&&(a.scrollTop>0||a.scrollLeft>0)&&(d.left-=a.scrollLeft,d.top-=a.scrollTop)}.bind(this);null!=e;)d.left+=e.offsetLeft,d.top+=e.offsetTop,f(e),e=b?e.offsetParent:e.offsetParent==c?null:e.offsetParent;if(null!=c&&!b&&(c.scrollTop>0||c.scrollLeft>0)){var g=null!=a.offsetParent?this.getStyle(a.offsetParent,"position"):"static",h=this.getStyle(a,"position");"absolute"!==h&&"fixed"!==h&&"absolute"!==g&&"fixed"!=g&&(d.left-=c.scrollLeft,d.top-=c.scrollTop)}return d},getPositionOnElement:function(a,b,c){var d="undefined"!=typeof b.getBoundingClientRect?b.getBoundingClientRect():{left:0,top:0,width:0,height:0},e=document.body,f=document.documentElement,g=window.pageYOffset||f.scrollTop||e.scrollTop,h=window.pageXOffset||f.scrollLeft||e.scrollLeft,i=f.clientTop||e.clientTop||0,j=f.clientLeft||e.clientLeft||0,k=0,l=0,m=d.top+g-i+k*c,n=d.left+h-j+l*c,o=jsPlumb.pageLocation(a),p=d.width||b.offsetWidth*c,q=d.height||b.offsetHeight*c,r=(o[0]-n)/p,s=(o[1]-m)/q;return[r,s]},getAbsolutePosition:function(a){var b=function(b){var c=a.style[b];return c?parseFloat(c.substring(0,c.length-2)):void 0};return[b("left"),b("top")]},setAbsolutePosition:function(a,b,c,d){c?this.animate(a,{left:"+="+(b[0]-c[0]),top:"+="+(b[1]-c[1])},d):(a.style.left=b[0]+"px",a.style.top=b[1]+"px")},getSize:function(a){return[a.offsetWidth,a.offsetHeight]},getWidth:function(a){return a.offsetWidth},getHeight:function(a){return a.offsetHeight}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d="__label",e=function(a,c){var e={cssClass:c.cssClass,labelStyle:a.labelStyle,id:d,component:a,_jsPlumb:a._jsPlumb.instance},f=jsPlumb.extend(e,c);return new(b.Overlays[a._jsPlumb.instance.getRenderMode()].Label)(f)},f=function(a,d){var e=null;if(c.isArray(d)){var f=d[0],g=b.extend({component:a,_jsPlumb:a._jsPlumb.instance},d[1]);3==d.length&&b.extend(g,d[2]),e=new(b.Overlays[a._jsPlumb.instance.getRenderMode()][f])(g)}else e=d.constructor==String?new(b.Overlays[a._jsPlumb.instance.getRenderMode()][d])({component:a,_jsPlumb:a._jsPlumb.instance}):d;return e.id=e.id||c.uuid(),a.cacheTypeItem("overlay",e,e.id),a._jsPlumb.overlays[e.id]=e,e};b.OverlayCapableJsPlumbUIComponent=function(a){jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},a.label&&(this.getDefaultType().overlays[d]=["Label",{label:a.label,location:a.labelLocation||this.defaultLabelLocation||.5,labelStyle:a.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:d}]),this.setListenerComponent=function(a){if(this._jsPlumb)for(var b in this._jsPlumb.overlays)this._jsPlumb.overlays[b].setListenerComponent(a)}},b.OverlayCapableJsPlumbUIComponent.applyType=function(a,b){if(b.overlays){var c,d={};for(c in b.overlays){var e=a._jsPlumb.overlays[b.overlays[c][1].id];if(e)e.updateFrom(b.overlays[c][1]),d[b.overlays[c][1].id]=!0;else{var f=a.getCachedTypeItem("overlay",b.overlays[c][1].id);null!=f?(f.reattach(a._jsPlumb.instance),f.updateFrom(b.overlays[c][1]),a._jsPlumb.overlays[f.id]=f):f=a.addOverlay(b.overlays[c],!0),d[f.id]=!0}}for(c in a._jsPlumb.overlays)null==d[a._jsPlumb.overlays[c].id]&&a.removeOverlay(a._jsPlumb.overlays[c].id,!0)}},c.extend(b.OverlayCapableJsPlumbUIComponent,a.jsPlumbUIComponent,{setHover:function(a,b){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var c in this._jsPlumb.overlays)this._jsPlumb.overlays[c][a?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(a,b){var c=f(this,a);return b||this.repaint(),c},getOverlay:function(a){return this._jsPlumb.overlays[a]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(a){var b=this.getOverlay(a);b&&b.hide()},hideOverlays:function(){for(var a in this._jsPlumb.overlays)this._jsPlumb.overlays[a].hide()},showOverlay:function(a){var b=this.getOverlay(a);b&&b.show()},showOverlays:function(){for(var a in this._jsPlumb.overlays)this._jsPlumb.overlays[a].show()},removeAllOverlays:function(a){for(var b in this._jsPlumb.overlays)this._jsPlumb.overlays[b].cleanup&&this._jsPlumb.overlays[b].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,a||this.repaint()},removeOverlay:function(a,b){var c=this._jsPlumb.overlays[a];c&&(!b&&c.cleanup&&c.cleanup(),delete this._jsPlumb.overlays[a],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[a])},removeOverlays:function(){for(var a=0,b=arguments.length;b>a;a++)this.removeOverlay(arguments[a])},moveParent:function(a){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),a.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),a.appendChild(this.canvas);for(var b in this._jsPlumb.overlays)if(this._jsPlumb.overlays[b].isAppendedAtTopLevel){var c=this._jsPlumb.overlays[b].getElement();c.parentNode.removeChild(c),a.appendChild(c)}}},getLabel:function(){var a=this.getOverlay(d);return null!=a?a.getLabel():null},getLabelOverlay:function(){return this.getOverlay(d)},setLabel:function(a){var b=this.getOverlay(d);if(b)a.constructor==String||a.constructor==Function?b.setLabel(a):(a.label&&b.setLabel(a.label),a.location&&b.setLocation(a.location));else{var c=a.constructor==String||a.constructor==Function?{label:a}:a;b=e(this,c),this._jsPlumb.overlays[d]=b}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(a){for(var b in this._jsPlumb.overlays)this._jsPlumb.overlays[b].cleanup(a),this._jsPlumb.overlays[b].destroy(a);a&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(a){this[a?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(a,b){this._jsPlumb.overlayPositions[a.id]=b},getAbsoluteOverlayPosition:function(a){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[a.id]:null},_clazzManip:function(a,b,c){if(!c)for(var d in this._jsPlumb.overlays)this._jsPlumb.overlays[d][a+"Class"](b)},addClass:function(a,b){this._clazzManip("add",a,b)},removeClass:function(a,b){this._clazzManip("remove",a,b)}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=function(a,b,c){var d=!1;return{drag:function(){if(d)return d=!1,!0;if(b.element){var e=c.getUIPosition(arguments,c.getZoom());jsPlumb.setPosition(b.element,e),c.repaint(b.element,e),a.paint({anchorPoint:a.anchor.getCurrentLocation({element:a.element})})}},stopDrag:function(){d=!0}}},e=function(a,b,c,d){var e=jsPlumb.createElement("div",{position:"absolute"});b.appendElement(e);var f=b.getId(e);jsPlumb.setPosition(e,c),e.style.width=d[0]+"px",e.style.height=d[1]+"px",b.manage(f,e,!0),a.id=f,a.element=e},f=function(a,c,d,e,f,g,h,i){var j=new b.FloatingAnchor({reference:c,referenceCanvas:e,jsPlumbInstance:g});return h({paintStyle:a,endpoint:d,anchor:j,source:f,scope:i})},g=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],h=function(a,b){var c=0;if(null!=b)for(var d=0;d<a.connections.length;d++)if(a.connections[d].sourceId==b||a.connections[d].targetId==b){c=d;break}return a.connections[c]};b.Endpoint=function(a){var i=a._jsPlumb,j=a.newConnection,k=a.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],b.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:a.connectionType,maxConnections:null==a.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:a.maxConnections,paintStyle:a.endpointStyle||a.paintStyle||a.style||this._jsPlumb.instance.Defaults.EndpointStyle||b.Defaults.EndpointStyle,hoverPaintStyle:a.endpointHoverStyle||a.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||b.Defaults.EndpointHoverStyle,connectorStyle:a.connectorStyle,connectorHoverStyle:a.connectorHoverStyle,connectorClass:a.connectorClass,connectorHoverClass:a.connectorHoverClass,connectorOverlays:a.connectorOverlays,connector:a.connector,connectorTooltip:a.connectorTooltip}),this._jsPlumb.enabled=!(a.enabled===!1),this._jsPlumb.visible=!0,this.element=b.getElement(a.source),this._jsPlumb.uuid=a.uuid,this._jsPlumb.floatingEndpoint=null;var l=null;this._jsPlumb.uuid&&(a.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=a.elementId,this.dragProxy=a.dragProxy,this._jsPlumb.connectionCost=a.connectionCost,this._jsPlumb.connectionsDirected=a.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var m=function(){var a=i.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var b=i.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(a),this.addClass(b),jsPlumb.updateClasses(this.element,b,a)}.bind(this);this.prepareAnchor=function(a){var b=this._jsPlumb.instance.makeAnchor(a,this.elementId,i);return b.bind("anchorChanged",function(a){this.fire("anchorChanged",{endpoint:this,anchor:a}),m()}.bind(this)),b},this.setPreparedAnchor=function(a,b){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=a,m(),b||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(a,b){var c=this.prepareAnchor(a);return this.setPreparedAnchor(c,b),this};var n=function(a){if(this.connections.length>0)for(var b=0;b<this.connections.length;b++)this.connections[b].setHover(a,!1);else this.setHover(a)}.bind(this);this.bind("mouseover",function(){n(!0)}),this.bind("mouseout",function(){n(!1)}),a._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(d,e){var f,g=function(a,c){var d=i.getRenderMode();if(b.Endpoints[d][a])return new b.Endpoints[d][a](c);if(!i.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+a+"'"}},h={_jsPlumb:this._jsPlumb.instance,cssClass:a.cssClass,container:a.container,tooltip:a.tooltip,connectorTooltip:a.connectorTooltip,endpoint:this};return c.isString(d)?f=g(d,h):c.isArray(d)?(h=c.merge(d[1],h),f=g(d[0],h)):f=d.clone(),f.clone=function(){return c.isString(d)?g(d,h):c.isArray(d)?(h=c.merge(d[1],h),g(d[0],h)):void 0}.bind(this),f.typeId=e,f},this.setEndpoint=function(a,b){var c=this.prepareEndpoint(a);this.setPreparedEndpoint(c,!0)},this.setPreparedEndpoint=function(a,b){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=a,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},b.extend(this,a,g),this.isSource=a.isSource||!1,this.isTemporarySource=a.isTemporarySource||!1,this.isTarget=a.isTarget||!1,this.connections=a.connections||[],this.connectorPointerEvents=a["connector-pointer-events"],this.scope=a.scope||i.getDefaultScope(),this.timestamp=null,this.reattachConnections=a.reattach||i.Defaults.ReattachConnections,this.connectionsDetachable=i.Defaults.ConnectionsDetachable,(a.connectionsDetachable===!1||a.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=a.dragAllowedWhenFull!==!1,a.onMaxConnections&&this.bind("maxConnections",a.onMaxConnections),this.addConnection=function(a){this.connections.push(a),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)},this.detachFromConnection=function(a,b,c){b=null==b?this.connections.indexOf(a):b,b>=0&&(this.connections.splice(b,1),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)),!c&&this._deleteOnDetach&&0===this.connections.length&&i.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!1})},this.detach=function(a,b,c,d,e,f,g){var h=null==g?this.connections.indexOf(a):g,j=!1;return d=d!==!1,h>=0&&(c||a._forceDetach||a.isDetachable()&&a.isDetachAllowed(a)&&this.isDetachAllowed(a)&&i.checkCondition("beforeDetach",a,f))&&(i.deleteObject({connection:a,fireEvent:!b&&d,originalEvent:e,deleteAttachedObjects:!1}),j=!0),j},this.detachAll=function(a,b){for(var c=[];this.connections.length>0;){var d=this.detach(this.connections[0],!1,b===!0,a!==!1,null,this,0);d||(c.push(this.connections[0]),this.connections.splice(0,1))}return this.connections=c,this},this.detachFrom=function(a,b,c){for(var d=[],e=0;e<this.connections.length;e++)(this.connections[e].endpoints[1]==a||this.connections[e].endpoints[0]==a)&&d.push(this.connections[e]);for(var f=0;f<d.length;f++)this.detach(d[f],!1,!0,b,c);return this},this.getElement=function(){return this.element},this.setElement=function(b){var d=this._jsPlumb.instance.getId(b),e=this.elementId;return c.removeWithFunction(a.endpointsByElement[this.elementId],function(a){return a.id==this.id}.bind(this)),this.element=jsPlumb.getElement(b),this.elementId=i.getId(this.element),i.anchorManager.rehomeEndpoint(this,e,this.element),i.dragManager.endpointAdded(this.element),c.addToList(a.endpointsByElement,d,this),this},this.makeInPlaceCopy=function(){var b=this.anchor.getCurrentLocation({element:this}),c=this.anchor.getOrientation(this),d=this.anchor.getCssClass(),e={bind:function(){},compute:function(){return[b[0],b[1]]},getCurrentLocation:function(){return[b[0],b[1]]},getOrientation:function(){return c},getCssClass:function(){return d}};return k({dropOptions:a.dropOptions,anchor:e,source:this.element,paintStyle:this.getPaintStyle(),endpoint:a.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){var a=this.connections[0];return a?a:this.connections.length<this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:a},this.setStyle=this.setPaintStyle,this.paint=function(a){a=a||{};var b=a.timestamp,c=!(a.recalc===!1);if(!b||this.timestamp!==b){var d=i.updateOffset({elId:this.elementId,timestamp:b}),e=a.offset?a.offset.o:d.o;if(null!=e){var f=a.anchorPoint,g=a.connectorPaintStyle;if(null==f){var j=a.dimensions||d.s,k={xy:[e.left,e.top],wh:j,element:this,timestamp:b};if(c&&this.anchor.isDynamic&&this.connections.length>0){var l=h(this,a.elementWithPrecedence),m=l.endpoints[0]==this?1:0,n=0===m?l.sourceId:l.targetId,o=i.getCachedData(n),p=o.o,q=o.s;k.txy=[p.left,p.top],k.twh=q,k.tElement=l.endpoints[m]}f=this.anchor.compute(k)}this.endpoint.compute(f,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,g||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=b;for(var r in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(r)){var s=this._jsPlumb.overlays[r];s.isVisible()&&(this._jsPlumb.overlayPlacements[r]=s.draw(this.endpoint,this._jsPlumb.paintStyleInUse),s.paint(this._jsPlumb.overlayPlacements[r]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var o=!1;this.initDraggable=function(){if(!o&&b.isDragSupported(this.element)){var g,h={id:null,element:null},m=null,n=!1,p=null,q=d(this,h,i),r=a.dragOptions||{},s={},t=b.dragEvents.start,u=b.dragEvents.stop,v=b.dragEvents.drag,w=b.dragEvents.beforeStart,x=function(a){g=a.e.payload||{}},y=function(b){m=this.connectorSelector();var d=!0;this.isEnabled()||(d=!1),null!=m||this.isSource||this.isTemporarySource||(d=!1),!this.isSource||!this.isFull()||null!=m&&this.dragAllowedWhenFull||(d=!1),null==m||m.isDetachable(this)||(d=!1);var l=i.checkCondition(null==m?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:m});if(l===!1?d=!1:"object"==typeof l?jsPlumb.extend(l,g||{}):l=g||{},d===!1)return i.stopDrag&&i.stopDrag(this.canvas),q.stopDrag(),
!1;for(var o=0;o<this.connections.length;o++)this.connections[o].setHover(!1);this.addClass("endpointDrag"),i.setConnectionBeingDragged(!0),m&&!this.isFull()&&this.isSource&&(m=null),i.updateOffset({elId:this.elementId});var r=this._jsPlumb.instance.getOffset(this.canvas),s=this.canvas,t=this._jsPlumb.instance.getSize(this.canvas);e(h,i,r,t),i.setAttributes(this.canvas,{dragId:h.id,elId:this.elementId});var u=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var v=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);v.endpoints[1]&&(u=v.endpoints[1])}var w=this._jsPlumb.instance.makeAnchor("Center");w.isFloating=!0,this._jsPlumb.floatingEndpoint=f(this.getPaintStyle(),w,u,this.canvas,h.element,i,k,this.scope);var x=this._jsPlumb.floatingEndpoint.anchor;if(null==m)this.setHover(!1,!1),m=j({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:h.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:a.connectorStyle,hoverPaintStyle:a.connectorHoverStyle,connector:a.connector,overlays:a.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:a.scope,data:l}),m.pending=!0,m.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.anchor=x,i.fire("connectionDrag",m),i.anchorManager.newConnection(m);else{n=!0,m.setHover(!1);var y=m.endpoints[0].id==this.id?0:1;this.detachFromConnection(m,null,!0);var z=i.getDragScope(s);i.setAttribute(this.canvas,"originalScope",z),i.fire("connectionDrag",m),0===y?(p=[m.source,m.sourceId,s,z],m.source=h.element,m.sourceId=h.id,i.anchorManager.sourceChanged(m.endpoints[y].elementId,m.sourceId,m)):(p=[m.target,m.targetId,s,z],m.target=h.element,m.targetId=h.id,i.anchorManager.updateOtherEndpoint(m.sourceId,m.endpoints[y].elementId,m.targetId,m)),m.suspendedEndpoint=m.endpoints[y],m.suspendedElement=m.endpoints[y].getElement(),m.suspendedElementId=m.endpoints[y].elementId,m.suspendedElementType=0===y?"source":"target",m.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=m.suspendedEndpoint,m.endpoints[y]=this._jsPlumb.floatingEndpoint,m.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass)}i.floatingConnections[h.id]=m,c.addToList(a.endpointsByElement,h.id,this._jsPlumb.floatingEndpoint),i.currentlyDragging=!0}.bind(this),z=function(){if(i.setConnectionBeingDragged(!1),m&&null!=m.endpoints){var a=i.getDropEvent(arguments),b=i.getFloatingAnchorIndex(m);if(m.endpoints[0===b?1:0].anchor.locked=!1,m.removeClass(i.draggingClass),this._jsPlumb&&(m.deleteConnectionNow||m.endpoints[b]==this._jsPlumb.floatingEndpoint)&&n&&m.suspendedEndpoint){0===b?(m.floatingElement=m.source,m.floatingId=m.sourceId,m.floatingEndpoint=m.endpoints[0],m.floatingIndex=0,m.source=p[0],m.sourceId=p[1]):(m.floatingElement=m.target,m.floatingId=m.targetId,m.floatingEndpoint=m.endpoints[1],m.floatingIndex=1,m.target=p[0],m.targetId=p[1]);var c=this._jsPlumb.floatingEndpoint;i.setDragScope(p[2],p[3]),m.endpoints[b]=m.suspendedEndpoint,m.isReattach()||m._forceReattach||m._forceDetach||!m.endpoints[0===b?1:0].detach(m,!1,!1,!0,a,!0)?(m.setHover(!1),m._forceDetach=null,m._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(m),m.suspendedEndpoint.addConnection(m),1==b?i.anchorManager.updateOtherEndpoint(m.sourceId,m.floatingId,m.targetId,m):i.anchorManager.sourceChanged(m.floatingId,m.sourceId,m),i.repaint(p[1])):i.deleteObject({endpoint:c})}this.deleteAfterDragStop?i.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),i.fire("connectionDragStop",m,a),m.pending&&i.fire("connectionAborted",m,a),i.currentlyDragging=!1,m=null}h&&h.element&&i.remove(h.element,!1,!1),l&&i.deleteObject({endpoint:l}),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);r=b.extend(s,r),r.scope=this.scope||r.scope,r[w]=c.wrap(r[w],x,!1),r[t]=c.wrap(r[t],y,!1),r[v]=c.wrap(r[v],q.drag),r[u]=c.wrap(r[u],z),r.multipleDrop=!1,r.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0}.bind(this),i.initDraggable(this.canvas,r,"internal"),this.canvas._jsPlumbRelatedElement=this.element,o=!0}};var p=a.endpoint||this._jsPlumb.instance.Defaults.Endpoint||b.Defaults.Endpoint;this.setEndpoint(p,!0);var q=a.anchor?a.anchor:a.anchors?a.anchors:i.Defaults.Anchor||"Top";this.setAnchor(q,!0);var r=["default",a.type||""].join(" ");this.addType(r,a.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var s=function(d,e,f,g){if(b.isDropSupported(this.element)){var h=a.dropOptions||i.Defaults.DropOptions||b.Defaults.DropOptions;h=b.extend({},h),h.scope=h.scope||this.scope;var j=b.dragEvents.drop,k=b.dragEvents.over,l=b.dragEvents.out,m=this,n=i.EndpointDropHandler({getEndpoint:function(){return m},jsPlumb:i,enabled:function(){return null!=f?f.isEnabled():!0},isFull:function(){return f.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(a){m.addClass(a)},removeClass:function(a){m.removeClass(a)},isDropAllowed:function(){return m.isDropAllowed.apply(m,arguments)},reference:g,isRedrop:function(a,b){return a.suspendedEndpoint&&b.reference&&a.suspendedEndpoint.id===b.reference.id}});h[j]=c.wrap(h[j],n,!0),h[k]=c.wrap(h[k],function(){var a=b.getDragObject(arguments),c=i.getAttribute(b.getElement(a),"dragId"),d=i.floatingConnections[c];if(null!=d){var e=i.getFloatingAnchorIndex(d),f=this.isTarget&&0!==e||d.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==d.suspendedEndpoint.id;if(f){var g=i.checkCondition("checkDropAllowed",{sourceEndpoint:d.endpoints[e],targetEndpoint:this,connection:d});this[(g?"add":"remove")+"Class"](i.endpointDropAllowedClass),this[(g?"remove":"add")+"Class"](i.endpointDropForbiddenClass),d.endpoints[e].anchor.over(this.anchor,this)}}}.bind(this)),h[l]=c.wrap(h[l],function(){var a=b.getDragObject(arguments),c=null==a?null:i.getAttribute(b.getElement(a),"dragId"),d=c?i.floatingConnections[c]:null;if(null!=d){var e=i.getFloatingAnchorIndex(d),f=this.isTarget&&0!==e||d.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==d.suspendedEndpoint.id;f&&(this.removeClass(i.endpointDropAllowedClass),this.removeClass(i.endpointDropForbiddenClass),d.endpoints[e].anchor.out())}}.bind(this)),i.initDroppable(d,h,"internal",e)}}.bind(this);return this.anchor.isFloating||s(this.canvas,!(a._transient||this.anchor.isFloating),this,a.reference),this},c.extend(b.Endpoint,b.OverlayCapableJsPlumbUIComponent,{setVisible:function(a,b,c){if(this._jsPlumb.visible=a,this.canvas&&(this.canvas.style.display=a?"block":"none"),this[a?"showOverlays":"hideOverlays"](),!b)for(var d=0;d<this.connections.length;d++)if(this.connections[d].setVisible(a),!c){var e=this===this.connections[d].endpoints[0]?1:0;1==this.connections[d].endpoints[e].connections.length&&this.connections[d].endpoints[e].setVisible(a,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(a,c){this.setPaintStyle(a.endpointStyle||a.paintStyle,c),this.setHoverPaintStyle(a.endpointHoverStyle||a.hoverPaintStyle,c),null!=a.maxConnections&&(this._jsPlumb.maxConnections=a.maxConnections),a.scope&&(this.scope=a.scope),b.extend(this,a,g),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass),b.OverlayCapableJsPlumbUIComponent.applyType(this,a)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){var a=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");jsPlumb.removeClass(this.element,a),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(a){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(a)},isFull:function(){return 0===this._jsPlumb.maxConnections?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(a){var b=!1;if(a)for(var c=0;c<this.connections.length;c++)if(this.connections[c].endpoints[1]==a||this.connections[c].endpoints[0]==a){b=!0;break}return b},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=b.getElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}}),a.jsPlumbInstance.prototype.EndpointDropHandler=function(a){return function(b){var c=a.jsPlumb;a.removeClass(c.endpointDropAllowedClass),a.removeClass(c.endpointDropForbiddenClass);var d=c.getDropEvent(arguments),e=c.getDragObject(arguments),f=c.getAttribute(e,"dragId"),g=(c.getAttribute(e,"elId"),c.getAttribute(e,"originalScope")),h=c.floatingConnections[f];if(null!=h){var i=null!=h.suspendedEndpoint;if(!i||null!=h.suspendedEndpoint._jsPlumb){var j=a.getEndpoint(h);if(null!=j){if(a.isRedrop(h,a))return h._forceReattach=!0,h.setHover(!1),void(a.maybeCleanup&&a.maybeCleanup(j));var k=c.getFloatingAnchorIndex(h);if(0===k&&!a.isSource||1===k&&!a.isTarget)return void(a.maybeCleanup&&a.maybeCleanup(j));a.onDrop&&a.onDrop(h),g&&c.setDragScope(e,g);var l=a.isFull(b);if(l&&j.fire("maxConnections",{endpoint:this,connection:h,maxConnections:j._jsPlumb.maxConnections},d),!l&&a.enabled()){var m=!0;0===k?(h.floatingElement=h.source,h.floatingId=h.sourceId,h.floatingEndpoint=h.endpoints[0],h.floatingIndex=0,h.source=a.element,h.sourceId=a.elementId):(h.floatingElement=h.target,h.floatingId=h.targetId,h.floatingEndpoint=h.endpoints[1],h.floatingIndex=1,h.target=a.element,h.targetId=a.elementId),i&&h.suspendedEndpoint.id!=j.id&&(h.isDetachAllowed(h)&&h.endpoints[k].isDetachAllowed(h)&&h.suspendedEndpoint.isDetachAllowed(h)&&c.checkCondition("beforeDetach",h)||(m=!1));var n=function(a){h.endpoints[k].detachFromConnection(h),h.suspendedEndpoint&&h.suspendedEndpoint.detachFromConnection(h),h.endpoints[k]=j,j.addConnection(h);var b=j.getParameters();for(var e in b)h.setParameter(e,b[e]);if(i){var f=h.suspendedEndpoint.elementId;c.fireMoveEvent({index:k,originalSourceId:0===k?f:h.sourceId,newSourceId:0===k?j.elementId:h.sourceId,originalTargetId:1==k?f:h.targetId,newTargetId:1==k?j.elementId:h.targetId,originalSourceEndpoint:0===k?h.suspendedEndpoint:h.endpoints[0],newSourceEndpoint:0===k?j:h.endpoints[0],originalTargetEndpoint:1==k?h.suspendedEndpoint:h.endpoints[1],newTargetEndpoint:1==k?j:h.endpoints[1],connection:h},d)}else b.draggable&&c.initDraggable(this.element,dragOptions,"internal",c);if(1==k?c.anchorManager.updateOtherEndpoint(h.sourceId,h.floatingId,h.targetId,h):c.anchorManager.sourceChanged(h.floatingId,h.sourceId,h),h.endpoints[0].finalEndpoint){var g=h.endpoints[0];g.detachFromConnection(h),h.endpoints[0]=h.endpoints[0].finalEndpoint,h.endpoints[0].addConnection(h)}jsPlumbUtil.isObject(a)&&h.mergeData(a),c.finaliseConnection(h,null,d,!1),h.setHover(!1)}.bind(this),o=function(){h.suspendedEndpoint&&(h.endpoints[k]=h.suspendedEndpoint,h.setHover(!1),h._forceDetach=!0,0===k?(h.source=h.suspendedEndpoint.element,h.sourceId=h.suspendedEndpoint.elementId):(h.target=h.suspendedEndpoint.element,h.targetId=h.suspendedEndpoint.elementId),h.suspendedEndpoint.addConnection(h),1==k?c.anchorManager.updateOtherEndpoint(h.sourceId,h.floatingId,h.targetId,h):c.anchorManager.sourceChanged(h.floatingId,h.sourceId,h),c.repaint(h.sourceId),h._forceDetach=!1)};if(m=m&&a.isDropAllowed(h.sourceId,h.targetId,h.scope,h,j))return n(m),!0;o()}a.maybeCleanup&&a.maybeCleanup(j),c.currentlyDragging=!1}}}}}}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=function(a,c,d,e,f){if(!a.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[c][d])throw{msg:"jsPlumb: unknown connector type '"+d+"'"};return new b.Connectors[c][d](e,f)},e=function(a,b,c){return a?c.makeAnchor(a,b,c):null},f=function(a,b,d,e){null!=b&&(b._jsPlumbConnections=b._jsPlumbConnections||{},e?delete b._jsPlumbConnections[a.id]:b._jsPlumbConnections[a.id]=!0,c.isEmpty(b._jsPlumbConnections)?d.removeClass(b,d.connectedClass):d.addClass(b,d.connectedClass))};b.Connection=function(a){var d=a.newEndpoint;this.id=a.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=a.previousConnection,this.source=b.getElement(a.source),this.target=b.getElement(a.target),a.sourceEndpoint&&(this.source=a.sourceEndpoint.getElement()),a.targetEndpoint&&(this.target=a.targetEndpoint.getElement()),b.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[];var e=this._jsPlumb.instance;e.manage(this.sourceId,this.source),e.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.editable=a.editable===!0,this._jsPlumb.params={cssClass:a.cssClass,container:a.container,"pointer-events":a["pointer-events"],editorParams:a.editorParams,overlays:a.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.editableRequested=a.editable!==!1,this.setEditable=function(a){return this.connector?this.connector.setEditable(a):!1},this.isEditable=function(){return this.connector?this.connector.isEditable():!1},this.isEditing=function(){return this.connector?this.connector.isEditing():!1},this.makeEndpoint=function(b,c,f,g){return f=f||this._jsPlumb.instance.getId(c),this.prepareEndpoint(e,d,this,g,b?0:1,a,c,f)},a.type&&(a.endpoints=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(a.type).endpoints);var f=this.makeEndpoint(!0,this.source,this.sourceId,a.sourceEndpoint),g=this.makeEndpoint(!1,this.target,this.targetId,a.targetEndpoint);f&&c.addToList(a.endpointsByElement,this.sourceId,f),g&&c.addToList(a.endpointsByElement,this.targetId,g),this.scope||(this.scope=this.endpoints[0].scope),null!=a.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=a.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=a.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0));var h=e.Defaults.ConnectionsDetachable;a.detachable===!1&&(h=!1),this.endpoints[0].connectionsDetachable===!1&&(h=!1),this.endpoints[1].connectionsDetachable===!1&&(h=!1);var i=a.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||e.Defaults.ReattachConnections;this.appendToDefaultType({detachable:h,reattach:i,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||e.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||e.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle});var j=e.getSuspendedAt();if(!e.isSuspendDrawing()){var k=e.getCachedData(this.sourceId),l=k.o,m=k.s,n=e.getCachedData(this.targetId),o=n.o,p=n.s,q=j||e.timestamp(),r=this.endpoints[0].anchor.compute({xy:[l.left,l.top],wh:m,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[o.left,o.top],twh:p,tElement:this.endpoints[1],timestamp:q});this.endpoints[0].paint({anchorLoc:r,timestamp:q}),r=this.endpoints[1].anchor.compute({xy:[o.left,o.top],wh:p,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[l.left,l.top],twh:m,tElement:this.endpoints[0],timestamp:q}),this.endpoints[1].paint({anchorLoc:r,timestamp:q})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(){return this._jsPlumb.detachable===!0},this.setDetachable=function(a){this._jsPlumb.detachable=a===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(a){this._jsPlumb.reattach=a===!0},this._jsPlumb.cost=a.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=a.directed,null==a.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var s=jsPlumb.extend({},this.endpoints[1].getParameters());b.extend(s,this.endpoints[0].getParameters()),b.extend(s,this.getParameters()),this.setParameters(s),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||e.Defaults.Connector||b.Defaults.Connector,!0),a.geometry&&this.connector.setGeometry(a.geometry);var t=null!=a.data&&jsPlumbUtil.isObject(a.data)?a.data:{};this.getData=function(){return t},this.setData=function(a){t=a||{}},this.mergeData=function(a){t=jsPlumb.extend(t,a)};var u=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,a.type].join(" ");/[^\s]/.test(u)&&this.addType(u,a.data,!0),this.updateConnectedClass()},c.extend(b.Connection,b.OverlayCapableJsPlumbUIComponent,{applyType:function(a,c,d){null!=a.detachable&&this.setDetachable(a.detachable),null!=a.reattach&&this.setReattach(a.reattach),a.scope&&(this.scope=a.scope),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass);var e=null;a.anchor?(e=this.getCachedTypeItem("anchors",d.anchor),null==e&&(e=[this._jsPlumb.instance.makeAnchor(a.anchor),this._jsPlumb.instance.makeAnchor(a.anchor)],this.cacheTypeItem("anchors",e,d.anchor))):a.anchors&&(e=this.getCachedTypeItem("anchors",d.anchors),null==e&&(e=[this._jsPlumb.instance.makeAnchor(a.anchors[0]),this._jsPlumb.instance.makeAnchor(a.anchors[1])],this.cacheTypeItem("anchors",e,d.anchors))),null!=e&&(this.endpoints[0].anchor=e[0],this.endpoints[1].anchor=e[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),b.OverlayCapableJsPlumbUIComponent.applyType(this,a)},addClass:function(a,b){b&&(this.endpoints[0].addClass(a),this.endpoints[1].addClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(a)),this.connector&&this.connector.addClass(a)},removeClass:function(a,b){b&&(this.endpoints[0].removeClass(a),this.endpoints[1].removeClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(a)),this.connector&&this.connector.removeClass(a)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a){this._jsPlumb.visible=a,this.connector&&this.connector.setVisible(a),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(a){this._jsPlumb&&(f(this,this.source,this._jsPlumb.instance,a),f(this,this.target,this._jsPlumb.instance,a))},setHover:function(b){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(b),a.jsPlumb[b?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),a.jsPlumb[b?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-(1/0)},setCost:function(a){this._jsPlumb.cost=a},isDirected:function(){return this._jsPlumb.directed===!0},getConnector:function(){return this.connector},getGeometry:function(){return this.connector?this.connector.getGeometry():null},setGeometry:function(a){this.connector&&this.connector.setGeometry(a)},prepareConnector:function(a,b){var e,f={_jsPlumb:this._jsPlumb.instance,cssClass:(this._jsPlumb.params.cssClass||"")+(this.isEditable()?this._jsPlumb.instance.editableConnectorClass:""),container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"],editable:this.editableRequested},g=this._jsPlumb.instance.getRenderMode();return c.isString(a)?e=d(this._jsPlumb.instance,g,a,f,this):c.isArray(a)&&(e=1==a.length?d(this._jsPlumb.instance,g,a[0],f,this):d(this._jsPlumb.instance,g,a[0],c.merge(a[1],f),this)),null!=b&&(e.typeId=b),e},setPreparedConnector:function(a,b,c,d){var e,f="";if(null!=this.connector&&(e=this.connector,f=e.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=a,d&&this.cacheTypeItem("connector",a,d),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.addClass(f),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=e)for(var g=this.getOverlays(),h=0;h<g.length;h++)g[h].transfer&&g[h].transfer(this.connector);c||this.setListenerComponent(this.connector),b||this.repaint()},setConnector:function(a,b,c,d){var e=this.prepareConnector(a,d);this.setPreparedConnector(e,b,c,d)},paint:function(a){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){a=a||{};var b=a.timestamp,c=!1,d=c?this.sourceId:this.targetId,e=c?this.targetId:this.sourceId,f=c?0:1,g=c?1:0;if(null==b||b!=this._jsPlumb.lastPaintedAt){var h=this._jsPlumb.instance.updateOffset({elId:e}).o,i=this._jsPlumb.instance.updateOffset({elId:d}).o,j=this.endpoints[g],k=this.endpoints[f],l=j.anchor.getCurrentLocation({xy:[h.left,h.top],wh:[h.width,h.height],element:j,timestamp:b}),m=k.anchor.getCurrentLocation({xy:[i.left,i.top],wh:[i.width,i.height],element:k,timestamp:b});this.connector.resetBounds(),this.connector.compute({sourcePos:l,targetPos:m,sourceEndpoint:this.endpoints[g],targetEndpoint:this.endpoints[f],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:h,targetInfo:i});var n={minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)};for(var o in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(o)){var p=this._jsPlumb.overlays[o];p.isVisible()&&(this._jsPlumb.overlayPlacements[o]=p.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(p)),n.minX=Math.min(n.minX,this._jsPlumb.overlayPlacements[o].minX),n.maxX=Math.max(n.maxX,this._jsPlumb.overlayPlacements[o].maxX),n.minY=Math.min(n.minY,this._jsPlumb.overlayPlacements[o].minY),n.maxY=Math.max(n.maxY,this._jsPlumb.overlayPlacements[o].maxY))}var q=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,r=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),s={xmin:Math.min(this.connector.bounds.minX-(q+r),n.minX),ymin:Math.min(this.connector.bounds.minY-(q+r),n.minY),xmax:Math.max(this.connector.bounds.maxX+(q+r),n.maxX),ymax:Math.max(this.connector.bounds.maxY+(q+r),n.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,s);for(var t in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(t)){var u=this._jsPlumb.overlays[t];u.isVisible()&&u.paint(this._jsPlumb.overlayPlacements[t],s)}}this._jsPlumb.lastPaintedAt=b}},repaint:function(a){a=a||{},this.paint({elId:this.sourceId,recalc:!(a.recalc===!1),timestamp:a.timestamp})},prepareEndpoint:function(a,c,d,f,g,h,i,j){var k;if(f)d.endpoints[g]=f,f.addConnection(d);else{h.endpoints||(h.endpoints=[null,null]);var l=h.endpoints[g]||h.endpoint||a.Defaults.Endpoints[g]||jsPlumb.Defaults.Endpoints[g]||a.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;h.endpointStyles||(h.endpointStyles=[null,null]),h.endpointHoverStyles||(h.endpointHoverStyles=[null,null]);var m=h.endpointStyles[g]||h.endpointStyle||a.Defaults.EndpointStyles[g]||jsPlumb.Defaults.EndpointStyles[g]||a.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==m.fillStyle&&null!=h.paintStyle&&(m.fillStyle=h.paintStyle.strokeStyle),null==m.outlineColor&&null!=h.paintStyle&&(m.outlineColor=h.paintStyle.outlineColor),null==m.outlineWidth&&null!=h.paintStyle&&(m.outlineWidth=h.paintStyle.outlineWidth);var n=h.endpointHoverStyles[g]||h.endpointHoverStyle||a.Defaults.EndpointHoverStyles[g]||jsPlumb.Defaults.EndpointHoverStyles[g]||a.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=h.hoverPaintStyle&&(null==n&&(n={}),null==n.fillStyle&&(n.fillStyle=h.hoverPaintStyle.strokeStyle));var o=h.anchors?h.anchors[g]:h.anchor?h.anchor:e(a.Defaults.Anchors[g],j,a)||e(b.Defaults.Anchors[g],j,a)||e(a.Defaults.Anchor,j,a)||e(b.Defaults.Anchor,j,a),p=h.uuids?h.uuids[g]:null;k=c({paintStyle:m,hoverPaintStyle:n,endpoint:l,connections:[d],uuid:p,anchor:o,source:i,scope:h.scope,reattach:h.reattach||a.Defaults.ReattachConnections,detachable:h.detachable||a.Defaults.ConnectionsDetachable}),d.endpoints[g]=k,h.drawEndpoints===!1&&k.setVisible(!1,!0,!0)}return k}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumbUtil,c=a.jsPlumb;c.AnchorManager=function(a){var d={},e={},f={},g={},h={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},i=["left","top","right","bottom"],j={},k=this,l={},m=a.jsPlumbInstance,n={},o=function(a,b,c,d,e,f){if(a===b)return{orientation:h.IDENTITY,a:["top","top"]};var g=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),j=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),k=[],l={};!function(a,b){for(var c=0;c<a.length;c++)l[a[c]]={left:[b[c].left,b[c].centery],right:[b[c].right,b[c].centery],top:[b[c].centerx,b[c].top],bottom:[b[c].centerx,b[c].bottom]}}(["source","target"],[c,d]);for(var m=0;m<i.length;m++)for(var n=0;n<i.length;n++)k.push({source:i[m],target:i[n],dist:Biltong.lineLength(l.source[i[m]],l.target[i[n]])});k.sort(function(a,b){return a.dist<b.dist?-1:a.dist>b.dist?1:0});for(var o=k[0].source,p=k[0].target,q=0;q<k.length&&(o=!e.isContinuous||e.isEdgeSupported(k[q].source)?k[q].source:null,p=!f.isContinuous||f.isEdgeSupported(k[q].target)?k[q].target:null,null==o||null==p);q++);return{a:[o,p],theta:g,theta2:j}},p=function(a,b,c,d,e,f,g){for(var h=[],i=b[e?0:1]/(d.length+1),j=0;j<d.length;j++){var k=(j+1)*i,l=f*b[e?1:0];g&&(k=b[e?0:1]-k);var m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1];h.push([n,q,o,r,d[j][1],d[j][2]])}return h},q=function(a){return function(b,c){var d=!0;return d=a?b[0][0]<c[0][0]:b[0][0]>c[0][0],d===!1?-1:1}},r=function(a,b){var c=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],d=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return c>d?1:a[0][1]>b[0][1]?1:-1},s={top:function(a,b){return a[0]>b[0]?1:-1},right:q(!0),bottom:q(!0),left:r},t=function(a,b){return a.sort(b)},u=function(a,b){var c=m.getCachedData(a),d=c.s,f=c.o,h=function(b,c,d,f,h,i,j){if(f.length>0)for(var k=t(f,s[b]),l="right"===b||"top"===b,m=p(b,c,d,k,h,i,l),n=function(a,b){e[a.id]=[b[0],b[1],b[2],b[3]],g[a.id]=j},o=0;o<m.length;o++){var q=m[o][4],r=q.endpoints[0].elementId===a,u=q.endpoints[1].elementId===a;r&&n(q.endpoints[0],m[o]),u&&n(q.endpoints[1],m[o])}};h("bottom",d,[f.left,f.top],b.bottom,!0,1,[0,1]),h("top",d,[f.left,f.top],b.top,!0,0,[0,-1]),h("left",d,[f.left,f.top],b.left,!1,0,[-1,0]),h("right",d,[f.left,f.top],b.right,!1,1,[1,0])};this.reset=function(){d={},j={},l={}},this.addFloatingConnection=function(a,b){n[a]=b},this.removeFloatingConnection=function(a){delete n[a]},this.newConnection=function(a){var d=a.sourceId,e=a.targetId,f=a.endpoints,g=!0,h=function(h,i,k,l,m){d==e&&k.isContinuous&&(a._jsPlumb.instance.removeElement(f[1].canvas),g=!1),b.addToList(j,l,[m,i,k.constructor==c.DynamicAnchor])};h(0,f[0],f[0].anchor,e,a),g&&h(1,f[1],f[1].anchor,d,a)};var v=function(a){!function(a,c){if(a){var d=function(a){return a[4]==c};b.removeWithFunction(a.top,d),b.removeWithFunction(a.left,d),b.removeWithFunction(a.bottom,d),b.removeWithFunction(a.right,d)}}(l[a.elementId],a.id)};this.connectionDetached=function(a,c){var d=a.connection||a,e=a.sourceId,f=a.targetId,g=d.endpoints,h=function(a,c,d,e,f){b.removeWithFunction(j[e],function(a){return a[0].id==f.id})};h(1,g[1],g[1].anchor,e,d),h(0,g[0],g[0].anchor,f,d),d.floatingId&&(h(d.floatingIndex,d.floatingEndpoint,d.floatingEndpoint.anchor,d.floatingId,d),v(d.floatingEndpoint)),v(d.endpoints[0]),v(d.endpoints[1]),c||(k.redraw(d.sourceId),d.targetId!==d.sourceId&&k.redraw(d.targetId))},this.add=function(a,c){b.addToList(d,c,a)},this.changeId=function(a,b){j[b]=j[a],d[b]=d[a],delete j[a],delete d[a]},this.getConnectionsFor=function(a){return j[a]||[]},this.getEndpointsFor=function(a){return d[a]||[]},this.deleteEndpoint=function(a){b.removeWithFunction(d[a.elementId],function(b){return b.id==a.id}),v(a)},this.clearFor=function(a){delete d[a],d[a]=[]};var w=function(c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q=-1,r=-1,s=f.endpoints[i],t=s.id,u=[1,0][i],v=[[d,e],f,g,h,t],w=c[k],x=s._continuousAnchorEdge?c[s._continuousAnchorEdge]:null;if(x){var y=b.findWithFunction(x,function(a){return a[4]==t});if(-1!=y)for(x.splice(y,1),o=0;o<x.length;o++)p=x[o][1],b.addWithFunction(m,p,function(a){return a.id==p.id}),b.addWithFunction(n,x[o][1].endpoints[i],function(a){return a.id==p.endpoints[i].id}),b.addWithFunction(n,x[o][1].endpoints[u],function(a){return a.id==p.endpoints[u].id})}for(o=0;o<w.length;o++)p=w[o][1],1==a.idx&&w[o][3]===h&&-1==r&&(r=o),b.addWithFunction(m,p,function(a){return a.id==p.id}),b.addWithFunction(n,w[o][1].endpoints[i],function(a){return a.id==p.endpoints[i].id}),b.addWithFunction(n,w[o][1].endpoints[u],function(a){return a.id==p.endpoints[u].id});if(-1!=q)w[q]=v;else{var z=j?-1!=r?r:0:w.length;w.splice(z,0,v)}s._continuousAnchorEdge=k};this.updateOtherEndpoint=function(a,d,e,f){var g=b.findWithFunction(j[a],function(a){return a[0].id===f.id}),h=b.findWithFunction(j[d],function(a){return a[0].id===f.id});-1!=g&&(j[a][g][0]=f,j[a][g][1]=f.endpoints[1],j[a][g][2]=f.endpoints[1].anchor.constructor==c.DynamicAnchor),h>-1&&(j[d].splice(h,1),b.addToList(j,e,[f,f.endpoints[0],f.endpoints[0].anchor.constructor==c.DynamicAnchor])),f.updateConnectedClass()},this.sourceChanged=function(a,d,e){if(a!==d){b.removeWithFunction(j[a],function(a){return a[0].id===e.id});var f=b.findWithFunction(j[e.targetId],function(a){return a[0].id===e.id});f>-1&&(j[e.targetId][f][0]=e,j[e.targetId][f][1]=e.endpoints[0],j[e.targetId][f][2]=e.endpoints[0].anchor.constructor==c.DynamicAnchor),b.addToList(j,d,[e,e.endpoints[1],e.endpoints[1].anchor.constructor==c.DynamicAnchor]),e.endpoints[1].anchor.isContinuous&&(e.source===e.target?e._jsPlumb.instance.removeElement(e.endpoints[1].canvas):null==e.endpoints[1].canvas.parentNode&&e._jsPlumb.instance.appendElement(e.endpoints[1].canvas)),e.updateConnectedClass()}},this.rehomeEndpoint=function(a,b,c){var e=d[b]||[],f=m.getId(c);if(f!==b){var g=e.indexOf(a);if(g>-1){var h=e.splice(g,1)[0];k.add(h,f)}}for(var i=0;i<a.connections.length;i++)a.connections[i].sourceId==b?(a.connections[i].sourceId=a.elementId,a.connections[i].source=a.element,k.sourceChanged(b,a.elementId,a.connections[i])):a.connections[i].targetId==b&&(a.connections[i].targetId=a.elementId,a.connections[i].target=a.element,k.updateOtherEndpoint(a.connections[i].sourceId,b,a.elementId,a.connections[i]))},this.redraw=function(a,e,f,g,h,i){if(!m.isSuspendDrawing()){var k=d[a]||[],p=j[a]||[],q=[],r=[],s=[];f=f||m.timestamp(),g=g||{left:0,top:0},e&&(e={left:e.left+g.left,top:e.top+g.top});for(var t=m.updateOffset({elId:a,offset:e,recalc:!1,timestamp:f}),v={},x=0;x<p.length;x++){var y=p[x][0],z=y.sourceId,A=y.targetId,B=y.endpoints[0].anchor.isContinuous,C=y.endpoints[1].anchor.isContinuous;if(B||C){var D=z+"_"+A,E=v[D],F=y.sourceId==a?1:0;
B&&!l[z]&&(l[z]={top:[],right:[],bottom:[],left:[]}),C&&!l[A]&&(l[A]={top:[],right:[],bottom:[],left:[]}),a!=A&&m.updateOffset({elId:A,timestamp:f}),a!=z&&m.updateOffset({elId:z,timestamp:f});var G=m.getCachedData(A),H=m.getCachedData(z);A==z&&(B||C)?(w(l[z],-Math.PI/2,0,y,!1,A,0,!1,"top",z,q,r),w(l[A],-Math.PI/2,0,y,!1,z,1,!1,"top",A,q,r)):(E||(E=o(z,A,H.o,G.o,y.endpoints[0].anchor,y.endpoints[1].anchor),v[D]=E),B&&w(l[z],E.theta,0,y,!1,A,0,!1,E.a[0],z,q,r),C&&w(l[A],E.theta2,-1,y,!0,z,1,!0,E.a[1],A,q,r)),B&&b.addWithFunction(s,z,function(a){return a===z}),C&&b.addWithFunction(s,A,function(a){return a===A}),b.addWithFunction(q,y,function(a){return a.id==y.id}),(B&&0===F||C&&1===F)&&b.addWithFunction(r,y.endpoints[F],function(a){return a.id==y.endpoints[F].id})}}for(x=0;x<k.length;x++)0===k[x].connections.length&&k[x].anchor.isContinuous&&(l[a]||(l[a]={top:[],right:[],bottom:[],left:[]}),w(l[a],-Math.PI/2,0,{endpoints:[k[x],k[x]],paint:function(){}},!1,a,0,!1,k[x].anchor.getDefaultFace(),a,q,r),b.addWithFunction(s,a,function(b){return b===a}));for(x=0;x<s.length;x++)u(s[x],l[s[x]]);for(x=0;x<k.length;x++)k[x].paint({timestamp:f,offset:t,dimensions:t.s,recalc:i!==!0});for(x=0;x<r.length;x++){var I=m.getCachedData(r[x].elementId);r[x].paint({timestamp:f,offset:I,dimensions:I.s})}for(x=0;x<p.length;x++){var J=p[x][1];if(J.anchor.constructor==c.DynamicAnchor){J.paint({elementWithPrecedence:a,timestamp:f}),b.addWithFunction(q,p[x][0],function(a){return a.id==p[x][0].id});for(var K=0;K<J.connections.length;K++)J.connections[K]!==p[x][0]&&b.addWithFunction(q,J.connections[K],function(a){return a.id==J.connections[K].id})}else J.anchor.constructor==c.Anchor&&b.addWithFunction(q,p[x][0],function(a){return a.id==p[x][0].id})}var L=n[a];for(L&&L.paint({timestamp:f,recalc:!1,elId:a}),x=0;x<q.length;x++)q[x].paint({elId:a,timestamp:f,recalc:!1,clearEdits:h})}};var x=function(a){b.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var c=a.faces||["top","right","bottom","left"],d=!(a.clockwise===!1),h={},i={top:"bottom",right:"left",left:"right",bottom:"top"},j={top:"right",right:"bottom",left:"top",bottom:"left"},k={top:"left",right:"top",left:"bottom",bottom:"right"},l=d?j:k,m=d?k:j,n=a.cssClass||"",o=0;o<c.length;o++)h[c[o]]=!0;this.getDefaultFace=function(){return 0===c.length?"top":c[0]},this.verifyEdge=function(a){return h[a]?a:h[i[a]]?i[a]:h[l[a]]?l[a]:h[m[a]]?m[a]:a},this.isEdgeSupported=function(a){return h[a]===!0},this.compute=function(a){return f[a.element.id]||e[a.element.id]||[0,0]},this.getCurrentLocation=function(a){return f[a.element.id]||e[a.element.id]||[0,0]},this.getOrientation=function(a){return g[a.id]||[0,0]},this.clearUserDefinedLocation=function(){delete f[a.elementId]},this.setUserDefinedLocation=function(b){f[a.elementId]=b},this.getCssClass=function(){return n}};m.continuousAnchorFactory={get:function(a){return new x(a)},clear:function(a){delete f[a],delete e[a]}}},c.Anchor=function(a){this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId,this.cssClass=a.cssClass||"",this.userDefinedLocation=null,this.orientation=a.orientation||[0,0],this.lastReturnValue=null,this.offsets=a.offsets||[0,0],this.timestamp=null,b.EventGenerator.apply(this),this.compute=function(a){var b=a.xy,c=a.wh,d=a.timestamp;return a.clearUserDefinedLocation&&(this.userDefinedLocation=null),d&&d===self.timestamp?this.lastReturnValue:(null!=this.userDefinedLocation?this.lastReturnValue=this.userDefinedLocation:this.lastReturnValue=[b[0]+this.x*c[0]+this.offsets[0],b[1]+this.y*c[1]+this.offsets[1]],this.timestamp=d,this.lastReturnValue)},this.getCurrentLocation=function(a){return a=a||{},null==this.lastReturnValue||null!=a.timestamp&&this.timestamp!=a.timestamp?this.compute(a):this.lastReturnValue}},b.extend(c.Anchor,b.EventGenerator,{equals:function(a){if(!a)return!1;var b=a.getOrientation(),c=this.getOrientation();return this.x==a.x&&this.y==a.y&&this.offsets[0]==a.offsets[0]&&this.offsets[1]==a.offsets[1]&&c[0]==b[0]&&c[1]==b[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(a){this.userDefinedLocation=a},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),c.FloatingAnchor=function(a){c.Anchor.apply(this,arguments);var b=a.reference,d=a.referenceCanvas,e=c.getSize(d),f=0,g=0,h=null,i=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=[b[0]+e[0]/2,b[1]+e[1]/2];return i=c,c},this.getOrientation=function(a){if(h)return h;var c=b.getOrientation(a);return[Math.abs(c[0])*f*-1,Math.abs(c[1])*g*-1]},this.over=function(a,b){h=a.getOrientation(b)},this.out=function(){h=null},this.getCurrentLocation=function(a){return null==i?this.compute(a):i}},b.extend(c.FloatingAnchor,c.Anchor);var d=function(a,b,d){return a.constructor==c.Anchor?a:b.makeAnchor(a,d,b)};c.DynamicAnchor=function(a){c.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=a.elementId,this.jsPlumbInstance=a.jsPlumbInstance;for(var b=0;b<a.anchors.length;b++)this.anchors[b]=d(a.anchors[b],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors},this.locked=!1;var e=this.anchors.length>0?this.anchors[0]:null,f=e,g=this,h=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},i=a.selector||function(a,b,c,d,e){for(var f=c[0]+d[0]/2,g=c[1]+d[1]/2,i=-1,j=1/0,k=0;k<e.length;k++){var l=h(e[k],f,g,a,b);j>l&&(i=k+0,j=l)}return e[i]};this.compute=function(a){var b=a.xy,c=a.wh,d=a.txy,h=a.twh;this.timestamp=a.timestamp;var j=g.getUserDefinedLocation();return null!=j?j:this.locked||null==d||null==h?e.compute(a):(a.timestamp=null,e=i(b,c,d,h,this.anchors),this.x=e.x,this.y=e.y,e!=f&&this.fire("anchorChanged",e),f=e,e.compute(a))},this.getCurrentLocation=function(a){return this.getUserDefinedLocation()||(null!=e?e.getCurrentLocation(a):null)},this.getOrientation=function(a){return null!=e?e.getOrientation(a):[0,0]},this.over=function(a,b){null!=e&&e.over(a,b)},this.out=function(){null!=e&&e.out()},this.getCssClass=function(){return e&&e.getCssClass()||""}},b.extend(c.DynamicAnchor,c.Anchor);var e=function(a,b,d,e,f,g){c.Anchors[f]=function(c){var h=c.jsPlumbInstance.makeAnchor([a,b,d,e,0,0],c.elementId,c.jsPlumbInstance);return h.type=f,g&&g(h,c),h}};e(.5,0,0,-1,"TopCenter"),e(.5,1,0,1,"BottomCenter"),e(0,.5,-1,0,"LeftMiddle"),e(1,.5,1,0,"RightMiddle"),e(.5,0,0,-1,"Top"),e(.5,1,0,1,"Bottom"),e(0,.5,-1,0,"Left"),e(1,.5,1,0,"Right"),e(.5,.5,0,0,"Center"),e(1,0,0,-1,"TopRight"),e(1,1,0,1,"BottomRight"),e(0,0,0,-1,"TopLeft"),e(0,1,0,1,"BottomLeft"),c.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],a.elementId,a.jsPlumbInstance)},c.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(c.Defaults.DynamicAnchors(a));return b.type="AutoDefault",b};var f=function(a,b){c.Anchors[a]=function(c){var d=c.jsPlumbInstance.makeAnchor(["Continuous",{faces:b}],c.elementId,c.jsPlumbInstance);return d.type=a,d}};c.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},f("ContinuousLeft",["left"]),f("ContinuousTop",["top"]),f("ContinuousBottom",["bottom"]),f("ContinuousRight",["right"]),e(0,0,0,0,"Assign",function(a,b){var c=b.position||"Fixed";a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(a,b,c){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},c.Anchors.Perimeter=function(a){a=a||{};var b=a.anchorCount||60,c=a.shape;if(!c)throw new Error("no shape supplied to Perimeter Anchor type");var d=function(){for(var a=.5,c=2*Math.PI/b,d=0,e=[],f=0;b>f;f++){var g=a+a*Math.sin(d),h=a+a*Math.cos(d);e.push([g,h,0,0]),d+=c}return e},e=function(a){for(var c=b/a.length,d=[],e=function(a,e,f,g,h){c=b*h;for(var i=(f-a)/c,j=(g-e)/c,k=0;c>k;k++)d.push([a+i*k,e+j*k,0,0])},f=0;f<a.length;f++)e.apply(null,a[f]);return d},f=function(a){for(var b=[],c=0;c<a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={Circle:d,Ellipse:d,Diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:g,Square:g,Triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(a){for(var b=a.points,c=[],d=0,f=0;f<b.length-1;f++){var g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1]));d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g])}for(var h=0;h<c.length;h++)c[h][4]=c[h][4]/d;return e(c)}},i=function(a,b){for(var c=[],d=b/180*Math.PI,e=0;e<a.length;e++){var f=a[e][0]-.5,g=a[e][1]-.5;c.push([.5+(f*Math.cos(d)-g*Math.sin(d)),.5+(f*Math.sin(d)+g*Math.cos(d)),a[e][2],a[e][3]])}return c};if(!h[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");var j=h[c](a);a.rotation&&(j=i(j,a.rotation));var k=a.jsPlumbInstance.makeDynamicAnchor(j);return k.type="Perimeter",k}}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=a.Biltong;b.Segments={AbstractSegment:function(a){this.params=a,this.findClosestPointOnPath=function(a,b){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(a.x1,a.x2),minY:Math.min(a.y1,a.y2),maxX:Math.max(a.x1,a.x2),maxY:Math.max(a.y1,a.y2)}}},Straight:function(a){var c,e,f,g,h,i,j,k=(b.Segments.AbstractSegment.apply(this,arguments),function(){c=Math.sqrt(Math.pow(h-g,2)+Math.pow(j-i,2)),e=d.gradient({x:g,y:i},{x:h,y:j}),f=-1/e});this.type="Straight",this.getLength=function(){return c},this.getGradient=function(){return e},this.getCoordinates=function(){return{x1:g,y1:i,x2:h,y2:j}},this.setCoordinates=function(a){g=a.x1,i=a.y1,h=a.x2,j=a.y2,k()},this.setCoordinates({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}),this.getBounds=function(){return{minX:Math.min(g,h),minY:Math.min(i,j),maxX:Math.max(g,h),maxY:Math.max(i,j)}},this.pointOnPath=function(a,b){if(0!==a||b){if(1!=a||b){var e=b?a>0?a:c+a:a*c;return d.pointOnLine({x:g,y:i},{x:h,y:j},e)}return{x:h,y:j}}return{x:g,y:i}},this.gradientAtPoint=function(a){return e},this.pointAlongPathFrom=function(a,b,c){var e=this.pointOnPath(a,c),f=0>=b?{x:g,y:i}:{x:h,y:j};return 0>=b&&Math.abs(b)>1&&(b*=-1),d.pointOnLine(e,f,b)};var l=function(a,b,c){return c>=Math.min(a,b)&&c<=Math.max(a,b)},m=function(a,b,c){return Math.abs(c-a)<Math.abs(c-b)?a:b};this.findClosestPointOnPath=function(a,b){var k={d:1/0,x:null,y:null,l:null,x1:g,x2:h,y1:i,y2:j};if(0===e)k.y=i,k.x=l(g,h,a)?a:m(g,h,a);else if(e==1/0||e==-(1/0))k.x=g,k.y=l(i,j,b)?b:m(i,j,b);else{var n=i-e*g,o=b-f*a,p=(o-n)/(e-f),q=e*p+n;k.x=l(g,h,p)?p:m(g,h,p),k.y=l(i,j,q)?q:m(i,j,q)}var r=d.lineLength([k.x,k.y],[g,i]);return k.d=d.lineLength([a,b],[k.x,k.y]),k.l=r/c,k}},Arc:function(a){var c=(b.Segments.AbstractSegment.apply(this,arguments),function(b,c){return d.theta([a.cx,a.cy],[b,c])}),e=function(a,b){if(a.anticlockwise){var c=a.startAngle<a.endAngle?a.startAngle+f:a.startAngle,d=Math.abs(c-a.endAngle);return c-d*b}var e=a.endAngle<a.startAngle?a.endAngle+f:a.endAngle,g=Math.abs(e-a.startAngle);return a.startAngle+g*b},f=2*Math.PI;this.radius=a.r,this.anticlockwise=a.ac,this.type="Arc",a.startAngle&&a.endAngle?(this.startAngle=a.startAngle,this.endAngle=a.endAngle,this.x1=a.cx+this.radius*Math.cos(a.startAngle),this.y1=a.cy+this.radius*Math.sin(a.startAngle),this.x2=a.cx+this.radius*Math.cos(a.endAngle),this.y2=a.cy+this.radius*Math.sin(a.endAngle)):(this.startAngle=c(a.x1,a.y1),this.endAngle=c(a.x2,a.y2),this.x1=a.x1,this.y1=a.y1,this.x2=a.x2,this.y2=a.y2),this.endAngle<0&&(this.endAngle+=f),this.startAngle<0&&(this.startAngle+=f);var g=this.endAngle<this.startAngle?this.endAngle+f:this.endAngle;this.sweep=Math.abs(g-this.startAngle),this.anticlockwise&&(this.sweep=f-this.sweep);var h=2*Math.PI*this.radius,i=this.sweep/f,j=h*i;this.getLength=function(){return j},this.getBounds=function(){return{minX:a.cx-a.r,maxX:a.cx+a.r,minY:a.cy-a.r,maxY:a.cy+a.r}};var k=1e-10,l=function(a){var b=Math.floor(a),c=Math.ceil(a);return k>a-b?b:k>c-a?c:a};this.pointOnPath=function(b,c){if(0===b)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==b)return{x:this.x2,y:this.y2,theta:this.endAngle};c&&(b/=j);var d=e(this,b),f=a.cx+a.r*Math.cos(d),g=a.cy+a.r*Math.sin(d);return{x:l(f),y:l(g),theta:d}},this.gradientAtPoint=function(b,c){var e=this.pointOnPath(b,c),f=d.normal([a.cx,a.cy],[e.x,e.y]);return this.anticlockwise||f!=1/0&&f!=-(1/0)||(f*=-1),f},this.pointAlongPathFrom=function(b,c,d){var e=this.pointOnPath(b,d),f=c/h*2*Math.PI,g=this.anticlockwise?-1:1,i=e.theta+g*f,j=a.cx+this.radius*Math.cos(i),k=a.cy+this.radius*Math.sin(i);return{x:j,y:k}}},Bezier:function(c){this.curve=[{x:c.x1,y:c.y1},{x:c.cp1x,y:c.cp1y},{x:c.cp2x,y:c.cp2y},{x:c.x2,y:c.y2}];b.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(c.x1,c.x2,c.cp1x,c.cp2x),minY:Math.min(c.y1,c.y2,c.cp1y,c.cp2y),maxX:Math.max(c.x1,c.x2,c.cp1x,c.cp2x),maxY:Math.max(c.y1,c.y2,c.cp1y,c.cp2y)},this.type="Bezier";var d=function(b,c,d){return d&&(c=a.jsBezier.locationAlongCurveFrom(b,c>0?0:1,c)),c};this.pointOnPath=function(b,c){return b=d(this.curve,b,c),a.jsBezier.pointOnCurve(this.curve,b)},this.gradientAtPoint=function(b,c){return b=d(this.curve,b,c),a.jsBezier.gradientAtPoint(this.curve,b)},this.pointAlongPathFrom=function(b,c,e){return b=d(this.curve,b,e),a.jsBezier.pointAlongCurveFrom(this.curve,b,c)},this.getLength=function(){return a.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds}}};var e=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}},this.resetBounds()};b.Connectors.AbstractConnector=function(a){e.apply(this,arguments);var f=[],g=0,h=[],i=[],j=a.stub||0,k=c.isArray(j)?j[0]:j,l=c.isArray(j)?j[1]:j,m=a.gap||0,n=c.isArray(m)?m[0]:m,o=c.isArray(m)?m[1]:m,p=null,q=!1,r=null,s=null,t=a.editable!==!1&&null!=jsPlumb.ConnectorEditors&&null!=jsPlumb.ConnectorEditors[this.type],u=this.setGeometry=function(a,b){q=!b,s=a},v=this.getGeometry=function(){return s};this.hasBeenEdited=function(){return q},this.isEditing=function(){return null!=this.editor&&this.editor.isActive()},this.setEditable=function(a){return t=a&&null!=jsPlumb.ConnectorEditors&&null!=jsPlumb.ConnectorEditors[this.type]&&(null==this.overrideSetEditable||this.overrideSetEditable())?a:!1},this.isEditable=function(){return t},this.findSegmentForPoint=function(a,b){for(var c={d:1/0,s:null,x:null,y:null,l:null},d=0;d<f.length;d++){var e=f[d].findClosestPointOnPath(a,b);e.d<c.d&&(c.d=e.d,c.l=e.l,c.x=e.x,c.y=e.y,c.s=f[d],c.x1=e.x1,c.x2=e.x2,c.y1=e.y1,c.y2=e.y2,c.index=d)}return c};var w=function(){for(var a=0,b=0;b<f.length;b++){var c=f[b].getLength();i[b]=c/g,h[b]=[a,a+=c/g]}},x=function(a,b){b&&(a=a>0?a/g:(g+a)/g);for(var c=h.length-1,d=1,e=0;e<h.length;e++)if(h[e][1]>=a){c=e,d=1==a?1:0===a?0:(a-h[e][0])/i[e];break}return{segment:f[c],proportion:d,index:c}},y=function(a,c,d){if(d.x1!=d.x2||d.y1!=d.y2){var e=new b.Segments[c](d);f.push(e),g+=e.getLength(),a.updateBounds(e)}},z=function(){g=f.length=h.length=i.length=0};this.setSegments=function(a){p=[],g=0;for(var b=0;b<a.length;b++)p.push(a[b]),g+=a[b].getLength()},this.getLength=function(){return g};var A=function(a){this.lineWidth=a.lineWidth;var b=d.quadrant(a.sourcePos,a.targetPos),c=a.targetPos[0]<a.sourcePos[0],e=a.targetPos[1]<a.sourcePos[1],f=a.lineWidth||1,g=a.sourceEndpoint.anchor.getOrientation(a.sourceEndpoint),h=a.targetEndpoint.anchor.getOrientation(a.targetEndpoint),i=c?a.targetPos[0]:a.sourcePos[0],j=e?a.targetPos[1]:a.sourcePos[1],m=Math.abs(a.targetPos[0]-a.sourcePos[0]),p=Math.abs(a.targetPos[1]-a.sourcePos[1]);if(0===g[0]&&0===g[1]||0===h[0]&&0===h[1]){var q=m>p?0:1,r=[1,0][q];g=[],h=[],g[q]=a.sourcePos[q]>a.targetPos[q]?-1:1,h[q]=a.sourcePos[q]>a.targetPos[q]?1:-1,g[r]=0,h[r]=0}var s=c?m+n*g[0]:n*g[0],t=e?p+n*g[1]:n*g[1],u=c?o*h[0]:m+o*h[0],v=e?o*h[1]:p+o*h[1],w=g[0]*h[0]+g[1]*h[1],x={sx:s,sy:t,tx:u,ty:v,lw:f,xSpan:Math.abs(u-s),ySpan:Math.abs(v-t),mx:(s+u)/2,my:(t+v)/2,so:g,to:h,x:i,y:j,w:m,h:p,segment:b,startStubX:s+g[0]*k,startStubY:t+g[1]*k,endStubX:u+h[0]*l,endStubY:v+h[1]*l,isXGreaterThanStubTimes2:Math.abs(s-u)>k+l,isYGreaterThanStubTimes2:Math.abs(t-v)>k+l,opposite:-1==w,perpendicular:0===w,orthogonal:1==w,sourceAxis:0===g[0]?"y":"x",points:[i,j,m,p,s,t,u,v]};return x.anchorOrientation=x.opposite?"opposite":x.orthogonal?"orthogonal":"perpendicular",x};this.getSegments=function(){return f},this.updateBounds=function(a){var b=a.getBounds();this.bounds.minX=Math.min(this.bounds.minX,b.minX),this.bounds.maxX=Math.max(this.bounds.maxX,b.maxX),this.bounds.minY=Math.min(this.bounds.minY,b.minY),this.bounds.maxY=Math.max(this.bounds.maxY,b.maxY)};return this.pointOnPath=function(a,b){var c=x(a,b);return c.segment&&c.segment.pointOnPath(c.proportion,!1)||[0,0]},this.gradientAtPoint=function(a,b){var c=x(a,b);return c.segment&&c.segment.gradientAtPoint(c.proportion,!1)||0},this.pointAlongPathFrom=function(a,b,c){var d=x(a,c);return d.segment&&d.segment.pointAlongPathFrom(d.proportion,b,!1)||[0,0]},this.compute=function(a){r=A.call(this,a),z(),this._compute(r,a),this.x=r.points[0],this.y=r.points[1],this.w=r.points[2],this.h=r.points[3],this.segment=r.segment,w()},{addSegment:y,prepareCompute:A,sourceStub:k,targetStub:l,maxStub:Math.max(k,l),sourceGap:n,targetGap:o,maxGap:Math.max(n,o),setGeometry:u,getGeometry:v}},c.extend(b.Connectors.AbstractConnector,e);var f=b.Connectors.Straight=function(){this.type="Straight";var a=b.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(b,c){a.addSegment(this,"Straight",{x1:b.sx,y1:b.sy,x2:b.startStubX,y2:b.startStubY}),a.addSegment(this,"Straight",{x1:b.startStubX,y1:b.startStubY,x2:b.endStubX,y2:b.endStubY}),a.addSegment(this,"Straight",{x1:b.endStubX,y1:b.endStubY,x2:b.tx,y2:b.ty})}};c.extend(b.Connectors.Straight,b.Connectors.AbstractConnector),b.registerConnectorType(f,"Straight"),b.Endpoints.AbstractEndpoint=function(a){e.apply(this,arguments);var b=this.compute=function(a,b,c,d){var e=this._compute.apply(this,arguments);return this.x=e[0],this.y=e[1],this.w=e[2],this.h=e[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,e};return{compute:b,cssClass:a.cssClass}},c.extend(b.Endpoints.AbstractEndpoint,e),b.Endpoints.Dot=function(a){this.type="Dot";b.Endpoints.AbstractEndpoint.apply(this,arguments);a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(a,b,c,d){this.radius=c.radius||this.radius;var e=a[0]-this.radius,f=a[1]-this.radius,g=2*this.radius,h=2*this.radius;if(c.strokeStyle){var i=c.lineWidth||1;e-=i,f-=i,g+=2*i,h+=2*i}return[e,f,g,h,this.radius]}},c.extend(b.Endpoints.Dot,b.Endpoints.AbstractEndpoint),b.Endpoints.Rectangle=function(a){this.type="Rectangle";b.Endpoints.AbstractEndpoint.apply(this,arguments);a=a||{},this.width=a.width||20,this.height=a.height||20,this._compute=function(a,b,c,d){var e=c.width||this.width,f=c.height||this.height,g=a[0]-e/2,h=a[1]-f/2;return[g,h,e,f]}},c.extend(b.Endpoints.Rectangle,b.Endpoints.AbstractEndpoint);var g=function(a){b.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};c.extend(g,b.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(a){this._jsPlumb.displayElements.push(a)}}),b.Endpoints.Image=function(d){this.type="Image",g.apply(this,arguments),b.Endpoints.AbstractEndpoint.apply(this,arguments);var e=d.onload,f=d.src||d.url,h=d.cssClass?" "+d.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=d.width,this._jsPlumb.heightToUse=d.height,this._jsPlumb.endpoint=d.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,e&&e(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(a,b){var c=a.constructor==String?a:a.src;e=b,this._jsPlumb.img.src=c,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(f,e),this._compute=function(a,b,c,d){return this.anchorPoint=a,this._jsPlumb.ready?[a[0]-this._jsPlumb.widthToUse/2,a[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=jsPlumb.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+h),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(a,b,d){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var e=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,f=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;c.sizeElement(this.canvas,e,f,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(b,c){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(b,c):a.setTimeout(function(){this.paint(b,c)}.bind(this),200))}},c.extend(b.Endpoints.Image,[g,b.Endpoints.AbstractEndpoint],{cleanup:function(a){a&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),b.Endpoints.Blank=function(a){b.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank",g.apply(this,arguments),this._compute=function(a,b,c,d){return[a[0],a[1],10,0]};var d=a.cssClass?" "+a.cssClass:"";this.canvas=jsPlumb.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+d),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(a,b){c.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},c.extend(b.Endpoints.Blank,[b.Endpoints.AbstractEndpoint,g],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),b.Endpoints.Triangle=function(a){this.type="Triangle",b.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this._compute=function(a,b,c,d){var e=c.width||self.width,f=c.height||self.height,g=a[0]-e/2,h=a[1]-f/2;return[g,h,e,f]}};var h=b.Overlays.AbstractOverlay=function(a){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation,this.visible=a.visible!==!1};h.prototype={cleanup:function(a){a&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(a){},setVisible:function(a){this.visible=a,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(a){this.loc+=a,this.component.repaint()},setLocation:function(a){this.loc=a,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},b.Overlays.Arrow=function(a){this.type="Arrow",h.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{},this.length=a.length||20,this.width=a.width||20,this.id=a.id;var b=(a.direction||1)<0?-1:1,e=a.paintStyle||{lineWidth:1},f=a.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.elementCreated=function(b,c){if(this.path=b,a.events)for(var d in a.events)jsPlumb.on(b,d,a.events[d])},this.draw=function(a,g){var h,i,j,k,l;if(a.pointAlongPathFrom){if(c.isString(this.loc)||this.loc>1||this.loc<0){var m=parseInt(this.loc,10),n=this.loc<0?1:0;h=a.pointAlongPathFrom(n,m,!1),i=a.pointAlongPathFrom(n,m-b*this.length/2,!1),j=d.pointOnLine(h,i,this.length)}else if(1==this.loc){if(h=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,-this.length),j=d.pointOnLine(h,i,this.length),-1==b){var o=j;j=h,h=o}}else if(0===this.loc){if(j=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,this.length),h=d.pointOnLine(j,i,this.length),-1==b){var p=j;j=h,h=p}}else h=a.pointAlongPathFrom(this.loc,b*this.length/2),i=a.pointOnPath(this.loc),j=d.pointOnLine(h,i,this.length);k=d.perpendicularLineTo(h,j,this.width),l=d.pointOnLine(h,j,f*this.length);var q={hxy:h,tail:k,cxy:l},r=e.strokeStyle||g.strokeStyle,s=e.fillStyle||g.strokeStyle,t=e.lineWidth||g.lineWidth;return{component:a,d:q,lineWidth:t,strokeStyle:r,fillStyle:s,minX:Math.min(h.x,k[0].x,k[1].x),maxX:Math.max(h.x,k[0].x,k[1].x),minY:Math.min(h.y,k[0].y,k[1].y),maxY:Math.max(h.y,k[0].y,k[1].y)}}return{component:a,minX:0,maxX:0,minY:0,maxY:0}}},c.extend(b.Overlays.Arrow,h,{updateFrom:function(a){this.length=a.length||this.length,this.width=a.width||this.width,this.direction=null!=a.direction?a.direction:this.direction,this.foldback=a.foldback||this.foldback}}),b.Overlays.PlainArrow=function(a){a=a||{};var c=b.extend(a,{foldback:1});b.Overlays.Arrow.call(this,c),this.type="PlainArrow"},c.extend(b.Overlays.PlainArrow,b.Overlays.Arrow),b.Overlays.Diamond=function(a){a=a||{};var c=a.length||40,d=jsPlumb.extend(a,{length:c/2,foldback:2});b.Overlays.Arrow.call(this,d),this.type="Diamond"},c.extend(b.Overlays.Diamond,b.Overlays.Arrow);var i=function(a,b){return(null==a._jsPlumb.cachedDimensions||b)&&(a._jsPlumb.cachedDimensions=a.getDimensions()),a._jsPlumb.cachedDimensions},j=function(a){b.jsPlumbUIComponent.apply(this,arguments),h.apply(this,arguments);var d=this.fire;this.fire=function(){d.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=a.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=a.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=a.create,this._jsPlumb.initiallyInvisible=a.visible===!1,this.getElement=function(){if(null==this._jsPlumb.div){var b=this._jsPlumb.div=jsPlumb.getElement(this._jsPlumb.create(this._jsPlumb.component));b.style.position="absolute",b.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:a.cssClass?a.cssClass:""),this._jsPlumb.instance.appendElement(b),this._jsPlumb.instance.getId(b),this.canvas=b;var c="translate(-50%, -50%)";b.style.webkitTransform=c,b.style.mozTransform=c,b.style.msTransform=c,b.style.oTransform=c,b.style.transform=c,b._jsPlumb=this,a.visible===!1&&(b.style.display="none")}return this._jsPlumb.div},this.draw=function(a,b,d){var e=i(this);if(null!=e&&2==e.length){var f={x:0,y:0};if(d)f={x:d[0],y:d[1]};else if(a.pointOnPath){var g=this.loc,h=!1;(c.isString(this.loc)||this.loc<0||this.loc>1)&&(g=parseInt(this.loc,10),h=!0),f=a.pointOnPath(g,h)}else{var j=this.loc.constructor==Array?this.loc:this.endpointLoc;f={x:j[0]*a.w,y:j[1]*a.h}}var k=f.x-e[0]/2,l=f.y-e[1]/2;return{component:a,d:{minx:k,miny:l,td:e,cxy:f},minX:k,maxX:k+e[0],minY:l,maxY:l+e[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};c.extend(j,[b.jsPlumbUIComponent,h],{getDimensions:function(){return[1,1]},setVisible:function(a){this._jsPlumb.div&&(this._jsPlumb.div.style.display=a?"block":"none",a&&this._jsPlumb.initiallyInvisible&&(i(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(a){a?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(a){null!=this._jsPlumb.div&&a.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var a=i(this);return Math.max(a[0],a[1])},paint:function(a,b){this._jsPlumb.initialised||(this.getElement(),a.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=a.component.x+a.d.minx+"px",this._jsPlumb.div.style.top=a.component.y+a.d.miny+"px"}}),b.Overlays.Custom=function(a){this.type="Custom",j.apply(this,arguments)},c.extend(b.Overlays.Custom,j),b.Overlays.GuideLines=function(){var a=this;a.length=50,a.lineWidth=5,this.type="GuideLines",h.apply(this,arguments),b.jsPlumbUIComponent.apply(this,arguments),this.draw=function(b,c){var e=b.pointAlongPathFrom(a.loc,a.length/2),f=b.pointOnPath(a.loc),g=d.pointOnLine(e,f,a.length),h=d.perpendicularLineTo(e,g,40),i=d.perpendicularLineTo(g,e,20);return{connector:b,head:e,tail:g,headLine:i,tailLine:h,minX:Math.min(e.x,g.x,i[0].x,i[1].x),minY:Math.min(e.y,g.y,i[0].y,i[1].y),maxX:Math.max(e.x,g.x,i[0].x,i[1].x),maxY:Math.max(e.y,g.y,i[0].y,i[1].y)}}},b.Overlays.Label=function(a){this.labelStyle=a.labelStyle;this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var c=b.extend({create:function(){return jsPlumb.createElement("div")}},a);if(b.Overlays.Custom.call(this,c),this.type="Label",this.label=a.label||"",this.labelText=null,this.labelStyle){var d=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",d.style.font=this.labelStyle.font,d.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(d.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var e=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";d.style.border=this.labelStyle.borderWidth+"px solid "+e}this.labelStyle.padding&&(d.style.padding=this.labelStyle.padding)}},c.extend(b.Overlays.Label,b.Overlays.Custom,{cleanup:function(a){a&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(a){this.label=a,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),j.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var a=this.label(this);this.getElement().innerHTML=a.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(a){a.label&&this.setLabel(a.label)}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=function(b){var c=b._mottle;return c||(c=b._mottle=new a.Mottle),c};b.extend(a.jsPlumbInstance.prototype,{getEventManager:function(){return c(this)},on:function(a,b,c){return this.getEventManager().on.apply(this,arguments),this},off:function(a,b,c){return this.getEventManager().off.apply(this,arguments),this}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=function(a){this.type="Flowchart",a=a||{},a.stub=null==a.stub?30:a.stub;var c,d,e=b.Connectors.AbstractConnector.apply(this,arguments),f=null==a.midpoint?.5:a.midpoint,g=a.alwaysRespectStubs===!0,h=null,i=null,j=null!=a.cornerRadius?a.cornerRadius:0,k=(a.loopbackRadius||25,function(a){return 0>a?-1:0===a?0:1}),l=function(a,b,c,d){if(h!=b||i!=c){var e=null==h?d.sx:h,f=null==i?d.sy:i,g=e==b?"v":"h",j=k(b-e),l=k(c-f);h=b,i=c,a.push([e,f,b,c,g,j,l])}},m=function(a){return Math.sqrt(Math.pow(a[0]-a[2],2)+Math.pow(a[1]-a[3],2))},n=function(a){var b=[];return b.push.apply(b,a),b},o=function(a,b,c){for(var d,f=null,g=0;g<b.length-1;g++){
if(f=f||n(b[g]),d=n(b[g+1]),j>0&&f[4]!=d[4]){var h=Math.min(j,m(f),m(d));f[2]-=f[5]*h,f[3]-=f[6]*h,d[0]+=d[5]*h,d[1]+=d[6]*h;var i=f[6]==d[5]&&1==d[5]||f[6]==d[5]&&0===d[5]&&f[5]!=d[6]||f[6]==d[5]&&-1==d[5],k=d[1]>f[3]?1:-1,l=d[0]>f[2]?1:-1,o=k==l,p=o&&i||!o&&!i?d[0]:f[2],q=o&&i||!o&&!i?f[3]:d[1];e.addSegment(a,"Straight",{x1:f[0],y1:f[1],x2:f[2],y2:f[3]}),e.addSegment(a,"Arc",{r:h,x1:f[2],y1:f[3],x2:d[0],y2:d[1],cx:p,cy:q,ac:i})}else{var r=f[2]==f[0]?0:f[2]>f[0]?c.lw/2:-(c.lw/2),s=f[3]==f[1]?0:f[3]>f[1]?c.lw/2:-(c.lw/2);e.addSegment(a,"Straight",{x1:f[0]-r,y1:f[1]-s,x2:f[2]+r,y2:f[3]+s})}f=d}null!=d&&e.addSegment(a,"Straight",{x1:d[0],y1:d[1],x2:d[2],y2:d[3]})};this._compute=function(a,b){c=[],h=null,i=null,d=null;var j=function(){return[a.startStubX,a.startStubY,a.endStubX,a.endStubY]},k={perpendicular:j,orthogonal:j,opposite:function(b){var c=a,d="x"==b?0:1,e={x:function(){return 1==c.so[d]&&(c.startStubX>c.endStubX&&c.tx>c.startStubX||c.sx>c.endStubX&&c.tx>c.sx)||-1==c.so[d]&&(c.startStubX<c.endStubX&&c.tx<c.startStubX||c.sx<c.endStubX&&c.tx<c.sx)},y:function(){return 1==c.so[d]&&(c.startStubY>c.endStubY&&c.ty>c.startStubY||c.sy>c.endStubY&&c.ty>c.sy)||-1==c.so[d]&&(c.startStubY<c.endStubY&&c.ty<c.startStubY||c.sy<c.endStubY&&c.ty<c.sy)}};return!g&&e[b]()?{x:[(a.sx+a.tx)/2,a.startStubY,(a.sx+a.tx)/2,a.endStubY],y:[a.startStubX,(a.sy+a.ty)/2,a.endStubX,(a.sy+a.ty)/2]}[b]:[a.startStubX,a.startStubY,a.endStubX,a.endStubY]}},m=k[a.anchorOrientation](a.sourceAxis),n="x"==a.sourceAxis?0:1,p="x"==a.sourceAxis?1:0,q=m[n],r=m[p],s=m[n+2],t=m[p+2];l(c,m[0],m[1],a);var u=a.startStubX+(a.endStubX-a.startStubX)*f,v=a.startStubY+(a.endStubY-a.startStubY)*f,w={x:[0,1],y:[1,0]},x={perpendicular:function(b){var c=a,d={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},e={x:[[c.startStubX,c.endStubX],null,[c.endStubX,c.startStubX]],y:[[c.startStubY,c.endStubY],null,[c.endStubY,c.startStubY]]},f={x:[[u,c.startStubY],[u,c.endStubY]],y:[[c.startStubX,v],[c.endStubX,v]]},g={x:[[c.endStubX,c.startStubY]],y:[[c.startStubX,c.endStubY]]},h={x:[[c.startStubX,c.endStubY],[c.endStubX,c.endStubY]],y:[[c.endStubX,c.startStubY],[c.endStubX,c.endStubY]]},i={x:[[c.startStubX,v],[c.endStubX,v],[c.endStubX,c.endStubY]],y:[[u,c.startStubY],[u,c.endStubY],[c.endStubX,c.endStubY]]},j={x:[c.startStubY,c.endStubY],y:[c.startStubX,c.endStubX]},k=w[b][0],l=w[b][1],m=c.so[k]+1,n=c.to[l]+1,o=-1==c.to[l]&&j[b][1]<j[b][0]||1==c.to[l]&&j[b][1]>j[b][0],p=e[b][m][0],q=e[b][m][1],r=d[b][m][n];return c.segment==r[3]||c.segment==r[2]&&o?f[b]:c.segment==r[2]&&p>q?g[b]:c.segment==r[2]&&q>=p||c.segment==r[1]&&!o?i[b]:c.segment==r[0]||c.segment==r[1]&&o?h[b]:void 0},orthogonal:function(b,c,d,e,f){var g=a,h={x:-1==g.so[0]?Math.min(c,e):Math.max(c,e),y:-1==g.so[1]?Math.min(c,e):Math.max(c,e)}[b];return{x:[[h,d],[h,f],[e,f]],y:[[d,h],[f,h],[f,e]]}[b]},opposite:function(c,d,f,g){var h=a,i={x:"y",y:"x"}[c],j={x:"height",y:"width"}[c],k=h["is"+c.toUpperCase()+"GreaterThanStubTimes2"];if(b.sourceEndpoint.elementId==b.targetEndpoint.elementId){var l=f+(1-b.sourceEndpoint.anchor[i])*b.sourceInfo[j]+e.maxStub;return{x:[[d,l],[g,l]],y:[[l,d],[l,g]]}[c]}return!k||1==h.so[n]&&d>g||-1==h.so[n]&&g>d?{x:[[d,v],[g,v]],y:[[u,d],[u,g]]}[c]:1==h.so[n]&&g>d||-1==h.so[n]&&d>g?{x:[[u,h.sy],[u,h.ty]],y:[[h.sx,v],[h.tx,v]]}[c]:void 0}},y=x[a.anchorOrientation](a.sourceAxis,q,r,s,t);if(y)for(var z=0;z<y.length;z++)l(c,y[z][0],y[z][1],a);l(c,m[2],m[3],a),l(c,a.tx,a.ty,a),o(this,c,a)}};c.extend(d,b.Connectors.AbstractConnector),b.registerConnectorType(d,"Flowchart")}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil;b.Connectors.AbstractBezierConnector=function(a){a=a||{};var c,d=a.showLoopback!==!1,e=(a.curviness||10,a.margin||5),f=(a.proximityLimit||80,a.orientation&&"clockwise"===a.orientation),g=a.loopbackRadius||25,h=!1;return this.overrideSetEditable=function(){return!h},this._compute=function(a,b){var i=b.sourcePos,j=b.targetPos,k=Math.abs(i[0]-j[0]),l=Math.abs(i[1]-j[1]);if(d&&b.sourceEndpoint.elementId===b.targetEndpoint.elementId){h=!0;var m=b.sourcePos[0],n=b.sourcePos[1]-e,o=m,p=n-g,q=o-g,r=p-g;k=2*g,l=2*g,a.points[0]=q,a.points[1]=r,a.points[2]=k,a.points[3]=l,c.addSegment(this,"Arc",{loopback:!0,x1:m-q+4,y1:n-r,startAngle:0,endAngle:2*Math.PI,r:g,ac:!f,x2:m-q-4,y2:n-r,cx:o-q,cy:p-r})}else h=!1,this._computeBezier(a,b,i,j,k,l)},c=b.Connectors.AbstractConnector.apply(this,arguments)},c.extend(b.Connectors.AbstractBezierConnector,b.Connectors.AbstractConnector);var d=function(a){a=a||{},this.type="Bezier";var c=b.Connectors.AbstractBezierConnector.apply(this,arguments),d=a.curviness||150,e=10;this.getCurviness=function(){return d},this._findControlPoint=function(a,b,c,f,g,h,i){var j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(0===i[0]?k.push(c[0]<b[0]?a[0]+e:a[0]-e):k.push(a[0]+d*i[0]),0===i[1]?k.push(c[1]<b[1]?a[1]+e:a[1]-e):k.push(a[1]+d*h[1])):(0===h[0]?k.push(b[0]<c[0]?a[0]+e:a[0]-e):k.push(a[0]-d*h[0]),0===h[1]?k.push(b[1]<c[1]?a[1]+e:a[1]-e):k.push(a[1]+d*i[1])),k},this._computeBezier=function(a,b,d,e,f,g){var h,i,j=this.getGeometry(),k=d[0]<e[0]?f:0,l=d[1]<e[1]?g:0,m=d[0]<e[0]?0:f,n=d[1]<e[1]?0:g;(this.hasBeenEdited()||this.isEditing())&&null!=j&&null!=j.controlPoints&&null!=j.controlPoints[0]&&null!=j.controlPoints[1]?(h=j.controlPoints[0],i=j.controlPoints[1]):(h=this._findControlPoint([k,l],d,e,b.sourceEndpoint,b.targetEndpoint,a.so,a.to),i=this._findControlPoint([m,n],e,d,b.targetEndpoint,b.sourceEndpoint,a.to,a.so)),c.setGeometry({controlPoints:[h,i]},!0),c.addSegment(this,"Bezier",{x1:k,y1:l,x2:m,y2:n,cp1x:h[0],cp1y:h[1],cp2x:i[0],cp2y:i[1]})}};c.extend(d,b.Connectors.AbstractBezierConnector),b.registerConnectorType(d,"Bezier")}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=function(a,b,c,d){return c>=a&&b>=d?1:c>=a&&d>=b?2:a>=c&&d>=b?3:4},e=function(a,b,c,d,e,f,g,h,i){return i>=h?[a,b]:1===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:2===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+f,b+-1*g]:3===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:4===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+f,b+-1*g]:void 0},f=function(a){a=a||{},this.type="StateMachine";var c,f=b.Connectors.AbstractBezierConnector.apply(this,arguments),g=a.curviness||10,h=a.margin||5,i=a.proximityLimit||80;a.orientation&&"clockwise"===a.orientation;this._computeBezier=function(a,b,j,k,l,m){var n=b.sourcePos[0]<b.targetPos[0]?0:l,o=b.sourcePos[1]<b.targetPos[1]?0:m,p=b.sourcePos[0]<b.targetPos[0]?l:0,q=b.sourcePos[1]<b.targetPos[1]?m:0;0===b.sourcePos[2]&&(n-=h),1===b.sourcePos[2]&&(n+=h),0===b.sourcePos[3]&&(o-=h),1===b.sourcePos[3]&&(o+=h),0===b.targetPos[2]&&(p-=h),1===b.targetPos[2]&&(p+=h),0===b.targetPos[3]&&(q-=h),1===b.targetPos[3]&&(q+=h);var r,s,t,u,v=(n+p)/2,w=(o+q)/2,x=d(n,o,p,q),y=Math.sqrt(Math.pow(p-n,2)+Math.pow(q-o,2)),z=f.getGeometry();(this.hasBeenEdited()||this.isEditing())&&null!=z?(r=z.controlPoints[0][0],t=z.controlPoints[0][1],s=z.controlPoints[1][0],u=z.controlPoints[1][1]):(c=e(v,w,x,b.sourcePos,b.targetPos,g,g,y,i),r=c[0],s=c[0],t=c[1],u=c[1],f.setGeometry({controlPoints:[c,c]},!0)),f.addSegment(this,"Bezier",{x1:p,y1:q,x2:n,y2:o,cp1x:r,cp1y:t,cp2x:s,cp2y:u})}};c.extend(f,b.Connectors.AbstractBezierConnector),b.registerConnectorType(f,"StateMachine")}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},e="stroke-dasharray",f="dashstyle",g="linearGradient",h="radialGradient",i="defs",j="fill",k="stop",l="stroke",m="stroke-width",n="style",o="none",p="jsplumb_gradient_",q="lineWidth",r={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},s=function(a,b){for(var c in b)a.setAttribute(c,""+b[c])},t=function(a,b){return b=b||{},b.version="1.1",b.xmlns=r.xhtml,jsPlumb.createElementNS(r.svg,a,null,null,b)},u=function(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"},v=function(a){for(var b=a.querySelectorAll(" defs,linearGradient,radialGradient"),c=0;c<b.length;c++)b[c].parentNode.removeChild(b[c])},w=function(a,b,c,d,e){var f=p+e._jsPlumb.instance.idstamp();v(a);var m;m=c.gradient.offset?t(h,{id:f}):t(g,{id:f,gradientUnits:"userSpaceOnUse"});var n=t(i);a.appendChild(n),n.appendChild(m);for(var o=0;o<c.gradient.stops.length;o++){var q=1==e.segment||2==e.segment?o:c.gradient.stops.length-1-o,r=c.gradient.stops[q][1],s=t(k,{offset:Math.floor(100*c.gradient.stops[o][0])+"%","stop-color":r});m.appendChild(s)}var u=c.strokeStyle?l:j;b.setAttribute(u,"url(#"+f+")")},x=function(a,b,c,g,h){if(b.setAttribute(j,c.fillStyle?c.fillStyle:o),b.setAttribute(l,c.strokeStyle?c.strokeStyle:o),c.gradient?w(a,b,c,g,h):(v(a),b.setAttribute(n,"")),c.lineWidth&&b.setAttribute(m,c.lineWidth),c[f]&&c[q]&&!c[e]){var i=-1==c[f].indexOf(",")?" ":",",k=c[f].split(i),p="";k.forEach(function(a){p+=Math.floor(a*c.lineWidth)+i}),b.setAttribute(e,p)}else c[e]&&b.setAttribute(e,c[e]);for(var r in d)c[r]&&b.setAttribute(d[r],c[r])},y=function(a,b,c){a.childNodes.length>c?a.insertBefore(b,a.childNodes[c]):a.appendChild(b)};c.svg={node:t,attr:s,pos:u};var z=function(a){var d=a.pointerEventsSpec||"all",e={};b.jsPlumbUIComponent.apply(this,a.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var f=a.cssClass+" "+(a.originalArgs[0].cssClass||""),g={style:"",width:0,height:0,"pointer-events":d,position:"absolute"};this.svg=t("svg",g),a.useDivWrapper?(this.canvas=jsPlumb.createElement("div",{position:"absolute"}),c.sizeElement(this.canvas,0,0,1,1),this.canvas.className=f):(s(this.svg,{"class":f}),this.canvas=this.svg),a._jsPlumb.appendElement(this.canvas,a.originalArgs[0].parent),a.useDivWrapper&&this.canvas.appendChild(this.svg);var h=[this.canvas];return this.getDisplayElements=function(){return h},this.appendDisplayElement=function(a){h.push(a)},this.paint=function(b,d,f){if(null!=b){var g,h=[this.x,this.y],i=[this.w,this.h];null!=f&&(f.xmin<0&&(h[0]+=f.xmin),f.ymin<0&&(h[1]+=f.ymin),i[0]=f.xmax+(f.xmin<0?-f.xmin:0),i[1]=f.ymax+(f.ymin<0?-f.ymin:0)),a.useDivWrapper?(c.sizeElement(this.canvas,h[0],h[1],i[0],i[1]),h[0]=0,h[1]=0,g=u([0,0])):g=u([h[0],h[1]]),e.paint.apply(this,arguments),s(this.svg,{style:g,width:i[0]||0,height:i[1]||0})}},{renderer:e}};c.extend(z,b.jsPlumbUIComponent,{cleanup:function(a){a||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(a){var b=a.getContainer();this.canvas&&null==this.canvas.parentNode&&b.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&b.appendChild(this.bgCanvas)},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none")}}),b.ConnectorRenderers.svg=function(a){var c=this,d=z.apply(this,[{cssClass:a._jsPlumb.connectorClass+(this.isEditable()?" "+a._jsPlumb.editableConnectorClass:""),originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:a._jsPlumb}]),e=this.setEditable;this.setEditable=function(a){var b=e.apply(this,[a]);jsPlumb[b?"addClass":"removeClass"](this.canvas,this._jsPlumb.instance.editableConnectorClass)},d.renderer.paint=function(d,e,f){var g=c.getSegments(),h="",i=[0,0];if(f.xmin<0&&(i[0]=-f.xmin),f.ymin<0&&(i[1]=-f.ymin),g.length>0){for(var j=0;j<g.length;j++)h+=b.Segments.svg.SegmentRenderer.getPath(g[j]),h+=" ";var k={d:h,transform:"translate("+i[0]+","+i[1]+")","pointer-events":a["pointer-events"]||"visibleStroke"},l=null,m=[c.x,c.y,c.w,c.h];if(d.outlineColor){var n=d.outlineWidth||1,o=d.lineWidth+2*n;l=b.extend({},d),delete l.gradient,l.strokeStyle=d.outlineColor,l.lineWidth=o,null==c.bgPath?(c.bgPath=t("path",k),b.addClass(c.bgPath,b.connectorOutlineClass),y(c.svg,c.bgPath,0)):s(c.bgPath,k),x(c.svg,c.bgPath,l,m,c)}null==c.path?(c.path=t("path",k),y(c.svg,c.path,d.outlineColor?1:0)):s(c.path,k),x(c.svg,c.path,d,m,c)}}},c.extend(b.ConnectorRenderers.svg,z),b.Segments.svg={SegmentRenderer:{getPath:function(a){return{Straight:function(){var b=a.getCoordinates();return"M "+b.x1+" "+b.y1+" L "+b.x2+" "+b.y2},Bezier:function(){var b=a.params;return"M "+b.x1+" "+b.y1+" C "+b.cp1x+" "+b.cp1y+" "+b.cp2x+" "+b.cp2y+" "+b.x2+" "+b.y2},Arc:function(){var b=a.params,c=a.sweep>Math.PI?1:0,d=a.anticlockwise?0:1;return"M"+a.x1+" "+a.y1+" A "+a.radius+" "+b.r+" 0 "+c+","+d+" "+a.x2+" "+a.y2}}[a.type]()}}};var A=b.SvgEndpoint=function(a){var c=z.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:a._jsPlumb}]);c.renderer.paint=function(a){var c=b.extend({},a);c.outlineColor&&(c.strokeWidth=c.outlineWidth,c.strokeStyle=c.outlineColor),null==this.node?(this.node=this.makeNode(c),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),x(this.svg,this.node,c,[this.x,this.y,this.w,this.h],this),u(this.node,[this.x,this.y])}.bind(this)};c.extend(A,z),b.Endpoints.svg.Dot=function(){b.Endpoints.Dot.apply(this,arguments),A.apply(this,arguments),this.makeNode=function(a){return t("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(a){s(a,{cx:this.w/2,cy:this.h/2,r:this.radius})}},c.extend(b.Endpoints.svg.Dot,[b.Endpoints.Dot,A]),b.Endpoints.svg.Rectangle=function(){b.Endpoints.Rectangle.apply(this,arguments),A.apply(this,arguments),this.makeNode=function(a){return t("rect",{width:this.w,height:this.h})},this.updateNode=function(a){s(a,{width:this.w,height:this.h})}},c.extend(b.Endpoints.svg.Rectangle,[b.Endpoints.Rectangle,A]),b.Endpoints.svg.Image=b.Endpoints.Image,b.Endpoints.svg.Blank=b.Endpoints.Blank,b.Overlays.svg.Label=b.Overlays.Label,b.Overlays.svg.Custom=b.Overlays.Custom;var B=function(a,c){a.apply(this,c),b.jsPlumbUIComponent.apply(this,c),this.isAppendedAtTopLevel=!1;this.path=null,this.paint=function(a,b){if(a.component.svg&&b){null==this.path&&(this.path=t("path",{"pointer-events":"all"}),a.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,a.component),this.canvas=a.component.svg);var e=c&&1==c.length?c[0].cssClass||"":"",f=[0,0];b.xmin<0&&(f[0]=-b.xmin),b.ymin<0&&(f[1]=-b.ymin),s(this.path,{d:d(a.d),"class":e,stroke:a.strokeStyle?a.strokeStyle:null,fill:a.fillStyle?a.fillStyle:null,transform:"translate("+f[0]+","+f[1]+")"})}};var d=function(a){return isNaN(a.cxy.x)||isNaN(a.cxy.y)?"":"M"+a.hxy.x+","+a.hxy.y+" L"+a.tail[0].x+","+a.tail[0].y+" L"+a.cxy.x+","+a.cxy.y+" L"+a.tail[1].x+","+a.tail[1].y+" L"+a.hxy.x+","+a.hxy.y};this.transfer=function(a){a.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),a.canvas.appendChild(this.path))}};c.extend(B,[b.jsPlumbUIComponent,b.Overlays.AbstractOverlay],{cleanup:function(a){null!=this.path&&(a?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(a){this.path&&this.canvas&&null==this.path.parentNode&&this.canvas.appendChild(this.path)},setVisible:function(a){null!=this.path&&(this.path.style.display=a?"block":"none")}}),b.Overlays.svg.Arrow=function(){B.apply(this,[b.Overlays.Arrow,arguments])},c.extend(b.Overlays.svg.Arrow,[b.Overlays.Arrow,B]),b.Overlays.svg.PlainArrow=function(){B.apply(this,[b.Overlays.PlainArrow,arguments])},c.extend(b.Overlays.svg.PlainArrow,[b.Overlays.PlainArrow,B]),b.Overlays.svg.Diamond=function(){B.apply(this,[b.Overlays.Diamond,arguments])},c.extend(b.Overlays.svg.Diamond,[b.Overlays.Diamond,B]),b.Overlays.svg.GuideLines=function(){var a,c,d=null,e=this;b.Overlays.GuideLines.apply(this,arguments),this.paint=function(b,g){null==d&&(d=t("path"),b.connector.svg.appendChild(d),e.attachListeners(d,b.connector),e.attachListeners(d,e),a=t("path"),b.connector.svg.appendChild(a),e.attachListeners(a,b.connector),e.attachListeners(a,e),c=t("path"),b.connector.svg.appendChild(c),e.attachListeners(c,b.connector),e.attachListeners(c,e));var h=[0,0];g.xmin<0&&(h[0]=-g.xmin),g.ymin<0&&(h[1]=-g.ymin),s(d,{d:f(b.head,b.tail),stroke:"red",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),s(a,{d:f(b.tailLine[0],b.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),s(c,{d:f(b.headLine[0],b.headLine[1]),stroke:"green",fill:null,transform:"translate("+h[0]+","+h[1]+")"})};var f=function(a,b){return"M "+a.x+","+a.y+" L"+b.x+","+b.y}},c.extend(b.Overlays.svg.GuideLines,b.Overlays.GuideLines)}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=a.Katavorio,e=a.Biltong,f=function(a,b){b=b||"main";var c="_katavorio_"+b,f=a[c],g=a.getEventManager();return f||(f=new d({bind:g.on,unbind:g.off,getSize:jsPlumb.getSize,getPosition:function(b){var c=a.getOffset(b,!1,b._katavorioDrag?b.offsetParent:null);return[c.left,c.top]},setPosition:function(a,b){a.style.left=b[0]+"px",a.style.top=b[1]+"px"},addClass:jsPlumb.addClass,removeClass:jsPlumb.removeClass,intersects:e.intersects,indexOf:function(a,b){return a.indexOf(b)},css:{noSelect:a.dragSelectClass,droppable:"jsplumb-droppable",draggable:"jsplumb-draggable",drag:"jsplumb-drag",selected:"jsplumb-drag-selected",active:"jsplumb-drag-active",hover:"jsplumb-drag-hover"}}),a[c]=f,a.bind("zoom",f.setZoom)),f},g=function(a,b){var d=function(d){if(null!=b[d]){if(c.isString(b[d])){var e=b[d].match(/-=/)?-1:1,f=b[d].substring(2);return a[d]+e*f}return b[d]}return a[d]};return[d("left"),d("top")]};b.extend(a.jsPlumbInstance.prototype,{animationSupported:!0,getElement:function(a){return null==a?null:(a="string"==typeof a?a:null!=a.length&&null==a.enctype?a[0]:a,"string"==typeof a?document.getElementById(a):a)},removeElement:function(a){f(this).elementRemoved(a),this.getEventManager().remove(a)},doAnimate:function(a,b,c){c=c||{};var d=this.getOffset(a),e=g(d,b),f=e[0]-d.left,h=e[1]-d.top,i=c.duration||250,j=15,k=i/j,l=j/i*f,m=j/i*h,n=0,o=setInterval(function(){jsPlumb.setPosition(a,{left:d.left+l*(n+1),top:d.top+m*(n+1)}),null!=c.step&&c.step(n,Math.ceil(k)),n++,n>=k&&(window.clearInterval(o),null!=c.complete&&c.complete())},j)},destroyDraggable:function(a,b){f(this,b).destroyDraggable(a)},destroyDroppable:function(a,b){f(this,b).destroyDroppable(a)},initDraggable:function(a,b,c){f(this,c).draggable(a,b)},initDroppable:function(a,b,c){f(this,c).droppable(a,b)},isAlreadyDraggable:function(a){return null!=a._katavorioDrag},isDragSupported:function(a,b){return!0},isDropSupported:function(a,b){return!0},isElementDraggable:function(a){return a=jsPlumb.getElement(a),a._katavorioDrag&&a._katavorioDrag.isEnabled()},getDragObject:function(a){return a[0].drag.getDragElement()},getDragScope:function(a){return a._katavorioDrag&&a._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(a){return a[0].e},getUIPosition:function(a,b){var c=a[0].el,d={left:a[0].pos[0],top:a[0].pos[1]};if(c._katavorioDrag&&c.offsetParent!==this.getContainer()){var e=this.getOffset(c.offsetParent);d.left+=e.left,d.top+=e.top}return d},setDragFilter:function(a,b,c){a._katavorioDrag&&a._katavorioDrag.setFilter(b,c)},setElementDraggable:function(a,b){a=jsPlumb.getElement(a),a._katavorioDrag&&a._katavorioDrag.setEnabled(b)},setDragScope:function(a,b){a._katavorioDrag&&a._katavorioDrag.k.setDragScope(a,b)},setDropScope:function(a,b){a._katavorioDrop&&a._katavorioDrop.length>0&&a._katavorioDrop[0].k.setDropScope(a,b)},addToPosse:function(a,b){var c=Array.prototype.slice.call(arguments,1),d=f(this);jsPlumb.each(a,function(a){a=[jsPlumb.getElement(a)],a.push.apply(a,c),d.addToPosse.apply(d,a)})},setPosse:function(a,b){var c=Array.prototype.slice.call(arguments,1),d=f(this);jsPlumb.each(a,function(a){a=[jsPlumb.getElement(a)],a.push.apply(a,c),d.setPosse.apply(d,a)})},removeFromPosse:function(a,b){var c=Array.prototype.slice.call(arguments,1),d=f(this);jsPlumb.each(a,function(a){a=[jsPlumb.getElement(a)],a.push.apply(a,c),d.removeFromPosse.apply(d,a)})},removeFromAllPosses:function(a){var b=f(this);jsPlumb.each(a,function(a){b.removeFromAllPosses(jsPlumb.getElement(a))})},setPosseState:function(a,b,c){var d=f(this);jsPlumb.each(a,function(a){d.setPosseState(jsPlumb.getElement(a),b,c)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(a){a._katavorioDrag&&a._katavorioDrag.abort()},addToDragSelection:function(a){f(this).select(a)},removeFromDragSelection:function(a){f(this).deselect(a)},clearDragSelection:function(){f(this).deselectAll()},trigger:function(a,b,c,d){this.getEventManager().trigger(a,b,c,d)},doReset:function(){for(var a in this)0===a.indexOf("_katavorio_")&&this[a].reset()}});var h=function(a){var b=function(){/complete|loaded|interactive/.test(document.readyState)&&"undefined"!=typeof document.body&&null!=document.body?a():setTimeout(b,9)};b()};h(b.init)}.call(this)}(a("2e")),d.define=e,c.exports}),a.registerDynamic("2f",["2d"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("2d"),d.define=e,c.exports}),a.registerDynamic("30",["2f"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(b,d){"function"==typeof define&&define.amd?define(["jsplumb"],d):"object"==typeof c&&c.exports?c.exports=d(a("2f").jsPlumb):b.Remapper=d(b.jsPlumb)}(this,function(a){function b(a,c){return"string"==typeof c&&(c=b(c)),c=c||document,c.querySelector(a)}function c(a,b){b||(b="Apply mapping"),this.id=a,this._init(b),this.listeners=new Map}return c.prototype.on=function(a,b){this.listeners.has(a)||this.listeners.set(a,new Set),this.listeners.get(a).add(b)},c.prototype.off=function(a,b){this.listeners.get(a)["delete"](b)},c.prototype.fire=function(a,b){this.listeners.has(a)&&this.listeners.get(a).forEach(function(a){a(b)})},c.prototype._init=function(c){this.jsPlumb=a.getInstance();var d=this;b("#"+d.id).innerHTML||(b("#"+d.id).innerHTML='<div class="remap-froms"></div><div class="remap-tos"></div><div class="centrecontent"></div><div class="buttonholder"><button class="remap-button">'+c+'</button><button class="cancel-remap-button">Cancel</button></div>',b("#"+d.id).style.display="none",b("#"+d.id).classList.add("main-remapper"),b(".remap-button","#"+d.id).addEventListener("click",function(){var a=new Map,c=d.jsPlumb.select();c.each(function(b){var c=b.endpoints[0].element.dataset.categoryId,d=b.endpoints[1].element.dataset.categoryId;a.set(c,d)}),b("#"+d.id).style.display="none",d.fire("apply",{mapping:a})}),b(".cancel-remap-button","#"+d.id).addEventListener("click",function(){b("#"+d.id).style.display="none",d.fire("cancel")})),this._resize=function(){d.jsPlumb.repaintEverything()},window.addEventListener("resize",this._resize)},c.prototype.remove=function(){this.jsPlumb.cleanupListeners(),window.removeEventListener("resize",this._resize),b("#"+this.id).classList.remove("main-remapper"),b("#"+this.id).innerHTML=""},c.prototype.show=function(){b("#"+this.id).style.display="block",this.jsPlumb.repaintEverything()},c.prototype.populateFroms=function(a){var c,d,e=this;for(b("#"+e.id).style.display="block",b(".remap-froms","#"+e.id).innerHTML="",c=0;c<a.length;c++)d="from:"+a[c].id,b(".remap-froms","#"+e.id).innerHTML+='<div id="'+d+'" class="map-from" data-category-id="'+a[c].id+'" >'+a[c].label+"</div>";for(c=0;c<a.length;c++)d="from:"+a[c].id,e.jsPlumb.addEndpoint(d,{container:b("#"+e.id),uuid:d,isSource:!0,isTarget:!1,endpoint:"Rectangle",paintStyle:{fillStyle:a[c].color,outlineColor:"black",outlineWidth:1},anchor:"Right",maxConnections:1,connectorOverlays:[["PlainArrow",{location:.2,paintStyle:{fillStyle:a[c].color,outlineColor:"black",outlineWidth:1},width:15,length:15}]]});b("#"+e.id).style.display="none",e.jsPlumb.bind("click",function(a){e.jsPlumb.detach(a)})},c.prototype.populateTos=function(a){var c,d;for(b(".remap-tos","#"+this.id).innerHTML="",c=0;c<a.length;c++)d="to:"+a[c].id,b(".remap-tos","#"+this.id).innerHTML+='<div id="'+d+'" class="map-to" data-category-id="'+a[c].id+'" > '+a[c].label+" </div>";for(c=0;c<a.length;c++)d="to:"+a[c].id,this.jsPlumb.addEndpoint(d,{uuid:d,isSource:!1,isTarget:!0,endpoint:"Dot",paintStyle:{fillStyle:a[c].color,outlineColor:"black",outlineWidth:1},anchor:"Left",maxConnections:-1})},c.prototype.linkCategories=function(a){var b=this;a.forEach(function(a,c){b.jsPlumb.connect({uuids:["from:"+c,"to:"+a]})})},c}),d.define=e,c.exports}),a.registerDynamic("31",["30"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("30"),d.define=e,c.exports}),a.register("32",["8","9","23","31","33","c","2c","1d","b","1a"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){b=a.$,c=a.$$,d=a.HTML},function(a){e=a.i18n},function(a){f=a.withCategories},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a["default"]},function(a){},function(a){j=a.COVJSON_GRID},function(a){k=a["default"],l=a.VIEW,m=a.PROCESS},function(a){n=a["default"]}],execute:function(){o='\n<div class="modal fade" id="parameterSelectModal" tabindex="-1" role="dialog" aria-labelledby="paramSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="paramSelectModalLabel">Select a categorical parameter</h4>\n      </div>\n      <div class="modal-body">\n        <span class="remap-is-remapping"></span>\n      \n        <div class="panel panel-primary parameter-select">\n          <div class="panel-body">\n            <p>\n              Which of the following categorical parameters do you like to remap?\n            </p>\n          </div>\n          <ul class="list-group parameter-list"></ul>\n        </div>\n       \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="remapModal" tabindex="-1" role="dialog" aria-labelledby="remapModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="remapModalLabel">Remap <strong class="parameter-label"></strong> Categories</h4>\n      </div>\n      <div class="modal-body">\n        <span class="remap-is-remapping"></span>\n        \n        <div class="panel panel-primary remap-remapping-distributions">\n          <div class="panel-heading">\n            <h4>Option A: Apply ready-made remapping definitions</h4>\n          </div>\n          <div class="panel-body">\n            <p>\n              Using a ready-made remapping definition is the fastest way to apply a remapping.\n              The remapping definition defines both the target categories and their mapping\n              from the source categories.\n            </p>\n            <div class="alert alert-info remapping-distribution-list-empty" role="alert"><strong>None found.</strong></div>\n          </div>\n          <ul class="list-group remapping-distribution-list"></ul>\n        </div>\n        \n        <div class="panel panel-primary remap-categorical-distributions">\n          <div class="panel-heading">\n            <h4>Option B: Remap manually with categories from existing datasets</h4>\n          </div>\n          <div class="panel-body">\n            <p>\n              A manual remapping can be done more quickly by loading the desired\n              target categories from an existing dataset. The connections then have\n              to be created manually via drag and drop.\n            </p>\n            <div class="alert alert-info categorical-distribution-list-empty" role="alert"><strong>None found.</strong></div>\n          </div>\n          \n          <ul class="list-group categorical-distribution-list"></ul>\n        </div>\n        \n        <div class="panel panel-default remap-manual">\n          <div class="panel-heading">\n            <h4>Option C: Fully manual remapping</h4>\n          </div>\n          <div class="panel-body">\n            <p>\n              When the above methods cannot be used then the only option left is\n              to manually create the target categories and connect\n              them to the source categories. NOTE: This is currently not supported.\n            </p>\n          </div>\n        </div>\n       \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="remapper"></div>\n<style>\n/* above sidebar */\n.modal, #remapper {\n  z-index: 3000; \n}\n.modal-backdrop {\n  z-index: 2500;\n}\n.categorical-distribution-list-empty, .remapping-distribution-list-empty {\n  margin-bottom: 0;\n}\n.workspace-dataset-distribution-action .btn {\n  margin-bottom: 5px;\n}\n</style>\n',b("body").add(d(o)),p={"is-remapping":'\n  <div class="panel panel-primary">\n    <div class="panel-body">\n      <p>This coverage data is the result of a category remapping operation.</p>\n      <button type="button" class="btn btn-primary btn-modify-remapping" data-dismiss="modal">Modify Remapping</button>\n    </div>\n  </div>\n  ',"parameter-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading parameter-label"></h4>\n    <p>Categories: <span class="parameter-categories"></span></p>\n\n    <button type="button" class="btn btn-primary parameter-select-button" data-dismiss="modal">\n      Select\n    </button>\n  </li>\n  ',"categorical-distribution-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p>Distribution: <span class="distribution-title"></span></p>\n    <span class="distribution-parameters"></span>\n  </li>\n  ',"categorical-parameter-item":'\n  <span>\n    <p>Target: <span class="parameter-label"></span></p>\n    <p>Categories: <span class="parameter-categories"></span></p>\n  \n    <button type="button" class="btn btn-primary remapping-button" data-dismiss="modal">\n      Use Categories\n    </button>\n  </span>\n  ',"remapping-distribution-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p>Distribution: <span class="distribution-title"></span></p>\n    <p>Target: <span class="target-observedProperty-label"></span></p>\n    <p>Categories: <span class="target-categories"></span></p>\n    \n    <button type="button" class="btn btn-primary remapping-button" data-dismiss="modal">\n      Apply\n    </button>\n  </li>\n  '},q=function(a){function k(a,b){babelHelpers.classCallCheck(this,k),babelHelpers.get(Object.getPrototypeOf(k.prototype),"constructor",this).call(this,b),this._isSingleCoverage(a)?this.cov=this._getSingleCoverage(a):this.cov=a,this.label="Remap Categories",this.icon='<span class="glyphicon glyphicon-random"></span>'}return babelHelpers.inherits(k,a),babelHelpers.createClass(k,[{key:"_isSingleCoverage",value:function(a){try{return this._getSingleCoverage(a),!0}catch(b){return!1}}},{key:"_getSingleCoverage",value:function(a){if(a.coverages){if(1===a.coverages.length)return a.coverages[0];
throw new Error("not a single coverage")}return a}},{key:"_getCategoricalParams",value:function(){var a=[].concat(babelHelpers.toConsumableArray(this.cov.parameters.values()));return a.filter(function(a){return a.observedProperty.categories})}},{key:"run",value:function(){var a=this._getCategoricalParams();a.length>1?this._selectParameterModal():this._remapModal(a[0])}},{key:"_selectParameterModal",value:function(){var a=this,c=b("#parameterSelectModal");this._showModifyRemappingSection(c),b(".parameter-list",c).fill();var f=!0,g=!1,h=void 0;try{for(var j,k=function(){var f=j.value,g=b(d(p["parameter-item"]));b(".parameter-label",g).fill(e(f.observedProperty.label));var h=f.observedProperty.categories,i=h.map(function(a){return e(a.label)}).join(", ");b(".parameter-categories",g).fill(i),b(".parameter-select-button",g).on("|click",function(){setTimeout(function(){return a._remapModal(f,200)})}),b(".parameter-list",c).add(g)},l=this._getCategoricalParams()[Symbol.iterator]();!(f=(j=l.next()).done);f=!0)k()}catch(m){g=!0,h=m}finally{try{!f&&l["return"]&&l["return"]()}finally{if(g)throw h}}new i(c[0]).open()}},{key:"_modifyRemappingUI",value:function(){var a=this,b=this.cov.transformations[this.cov.transformations.length-1],c=b.source,d=b.operation.parameter,e=b.operation.categoryRemappingDefinition,f=!1;this._createVirtualRemappedDataset(c,d,e,f,function(){a.context.workspace.removeDataset(a.context.dataset)})}},{key:"_showModifyRemappingSection",value:function(a){var c=this;this._isRemapped()?(b(".remap-is-remapping",a).fill(d(p["is-remapping"])),b(".btn-modify-remapping",a).on("click|",function(){return c._modifyRemappingUI()})):b(".remap-is-remapping",a).fill()}},{key:"_getCategoryMappingDefinition",value:function(a,b){var c=[],d=!0,f=!1,g=void 0;try{for(var h,i=function(){var a=h.value,d=b.categories.some(function(b){return b.id===a.id});d&&c.push({sourceCategory:a.id,destinationCategory:a.id})},j=a.categories[Symbol.iterator]();!(d=(h=j.next()).done);d=!0)i()}catch(k){f=!0,g=k}finally{try{!d&&j["return"]&&j["return"]()}finally{if(f)throw g}}var l={type:"CategoryRemappingDefinition",label:{en:e(a.label)+" / "+e(b.label)+" Mapping"},sourceObservedProperty:a,destinationObservedProperty:b,categoryMappings:c};return l}},{key:"_remapModal",value:function(a){var f=this,g=b("#remapModal");b(".parameter-label",g).fill(e(a.observedProperty.label)),this._showModifyRemappingSection(g);var h=this._findCategoryDistributions(),j=this._findRemappingDistributions(a);b(".categorical-distribution-list",g).fill();var k=!0,l=!1,m=void 0;try{for(var n,o=h[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var q=n.value,r=q.distribution,s=q.dataset,t=b(d(p["categorical-distribution-item"]));b(".dataset-title",t).fill(e(s.title)),b(".distribution-title",t).fill(e(r.title));var u=r.data,v=void 0,w=!0,x=!1,y=void 0;try{for(var z,A=function(){var c=z.value;if(c.observedProperty.categories){var g=b(d(p["categorical-parameter-item"]));v=c.observedProperty.categories;var h=v.map(function(a){return e(a.label)}).join(", ");b(".parameter-categories",g).fill(h),b(".parameter-label",g).fill(e(c.observedProperty.label)),b(".distribution-parameters",t).add(g),b(".remapping-button",g).on("|click",function(){var b=f._getCategoryMappingDefinition(a.observedProperty,c.observedProperty);f._createVirtualRemappedDataset(f.cov,a,b,!0)})}},B=u.parameters.values()[Symbol.iterator]();!(w=(z=B.next()).done);w=!0)A()}catch(C){x=!0,y=C}finally{try{!w&&B["return"]&&B["return"]()}finally{if(x)throw y}}b(".categorical-distribution-list",g).add(t)}}catch(C){l=!0,m=C}finally{try{!k&&o["return"]&&o["return"]()}finally{if(l)throw m}}b(".remapping-distribution-list",g).fill();var D=!0,E=!1,F=void 0;try{for(var G,H=function(){var c=G.value,h=c.distribution,i=c.dataset,j=b(d(p["remapping-distribution-item"])),k=h.data;b(".dataset-title",j).fill(e(i.title)),b(".distribution-title",j).fill(e(h.title)),b(".target-observedProperty-label",j).fill(e(k.destinationObservedProperty.label));var l=k.destinationObservedProperty.categories,m=l.map(function(a){return e(a.label)}).join(", ");b(".target-categories",j).fill(m),b(".remapping-button",j).on("|click",function(){f._createVirtualRemappedDataset(f.cov,a,k,!0)}),b(".remapping-distribution-list",g).add(j)},I=j[Symbol.iterator]();!(D=(G=I.next()).done);D=!0)H()}catch(C){E=!0,F=C}finally{try{!D&&I["return"]&&I["return"]()}finally{if(E)throw F}}c(".categorical-distribution-list-empty",g).style.display=h.length>0?"none":"block",c(".remapping-distribution-list-empty",g).style.display=j.length>0?"none":"block",new i(g[0]).open()}},{key:"_createVirtualRemappedDataset",value:function(a,b,c,d,g){var h=this,i=b,j=c.destinationObservedProperty,k=new Map(c.categoryMappings.map(function(a){return[a.sourceCategory,a.destinationCategory]})),m=d?" [remapped to: "+e(j.label)+"]":"";this._showRemapper(i.observedProperty,j,k,function(b){var d=b.mapping,k=f(a,i.key,j,d),n=JSON.parse(JSON.stringify(c));n.categoryMappings=[];var o=!0,p=!1,q=void 0;try{for(var r,s=d[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var t=babelHelpers.slicedToArray(r.value,2),u=t[0],v=t[1];n.categoryMappings.push({sourceCategory:u,destinationCategory:v})}}catch(w){p=!0,q=w}finally{try{!o&&s["return"]&&s["return"]()}finally{if(p)throw q}}k.transformations||(k.transformations=[]),k.transformations.push({source:a,operation:{type:"CategoryRemappingOperation",parameter:i,categoryRemappingDefinition:n}});var x={title:{en:e(h.context.dataset.title)+m},virtual:!0,distributions:[{title:{en:e(h.context.distribution.title)+m},mediaType:"coveragedata",data:k}]},y=h.context.workspace,z=function A(a){var b=a.dataset;b===x&&(b.distributions[0].actions.find(function(a){return a.type===l}).run(),y.off("distributionsLoad",A))};y.on("distributionsLoad",z),y.addDataset(x,h.context.dataset),y.requestFocus(x),g&&g()})}},{key:"_showRemapper",value:function(a,b,c,d){var f=new g("remapper"),h=a.categories.map(function(a){var b=a.preferredColor||"grey";return{id:a.id,label:e(a.label),color:b}}),i=b.categories.map(function(a){var b=a.preferredColor||"grey";return{id:a.id,label:e(a.label),color:b}});f.populateFroms(h),f.populateTos(i),c&&setTimeout(function(){return f.linkCategories(c)},100),f.on("apply",function(a){f.remove(),d(a)}),f.show()}},{key:"_findCategoryDistributions",value:function(){return this.context.workspace.filterDistributions(function(a){if(a.formatImpl instanceof n){var b=a.data;if(b.parameters){var c=!0,d=!1,e=void 0;try{for(var f,g=b.parameters.values()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(h.observedProperty.categories)return!0}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}}})}},{key:"_findRemappingDistributions",value:function(a){var b=new Set(a.observedProperty.categories.map(function(a){return a.id}));return this.context.workspace.filterDistributions(function(a){return a.formatImpl instanceof h?a.data.categoryMappings.some(function(a){return b.has(a.sourceCategory)}):!1})}},{key:"_isRemapped",value:function(){if(!this.cov.transformations)return!1;var a=this.cov.transformations[this.cov.transformations.length-1];return"CategoryRemappingOperation"===a.operation.type}},{key:"isSupported",get:function(){return this._isSingleCoverage(this.cov)&&this.cov.domainType===j&&this._getCategoricalParams().length>0?!0:!1}}]),k}(k),a("default",q),q.type=m}}}),a.registerDynamic("27",[],!0,function(a,b,c){function d(a){var b=void 0;if(a instanceof Map)b=new Map(a);else{b=Object.create(Object.getPrototypeOf(a));for(var c in a)b[c]=a[c]}return b}var e=this,f=e.define;return e.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.shallowcopy=d,e.define=f,c.exports}),a.registerDynamic("2a",["34","28","35","27","36","37"],!0,function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){var c={type:t.COVERAGE,domainType:a.domainType,parameters:b,loadDomain:function(){return a.loadDomain()},loadRange:function(b){return a.loadRange(b)},loadRanges:function(b){return a.loadRanges(b)},subsetByIndex:function(c){return a.subsetByIndex(c).then(function(a){return f(a,b)})},subsetByValue:function(c){return a.subsetByValue(c).then(function(a){return f(a,b)})}};return c}function g(a,b,c,d){if(u.checkCoverage(a),c.categories.some(function(a){return!a.id}))throw new Error('At least one category object is missing the "id" property');var g=v.shallowcopy(a.parameters),h=v.shallowcopy(g.get(b));g.set(b,h),g.get(b).observedProperty=c;var i=a.parameters.get(b).categoryEncoding,j=new Map,k=c.categories,l=!0,m=!1,n=void 0;try{for(var o,p=k[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var r=o.value,s=[],t=!0,w=!1,x=void 0;try{for(var y,z=d[Symbol.iterator]();!(t=(y=z.next()).done);t=!0){var A=q(y.value,2),B=A[0],C=A[1];C===r.id&&i.has(B)&&s.push.apply(s,e(i.get(B)))}}catch(D){w=!0,x=D}finally{try{!t&&z["return"]&&z["return"]()}finally{if(w)throw x}}s.length>0&&j.set(r.id,s)}}catch(D){m=!0,n=D}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}g.get(b).categoryEncoding=j;var E=f(a,g);return E}function h(a,b){u.checkCoverage(a);var c=function(a){var c={type:t.DOMAIN,domainType:b,axes:a.axes,referencing:a.referencing};return c},d={type:t.COVERAGE,domainType:b,parameters:a.parameters,loadDomain:function(){return a.loadDomain().then(c)},loadRange:function(b){return a.loadRange(b)},loadRanges:function(b){return a.loadRanges(b)},subsetByIndex:function(c){return a.subsetByIndex(c).then(function(a){return h(a,b)})},subsetByValue:function(c){return a.subsetByValue(c).then(function(a){return h(a,b)})}};return d}function i(a){return a.loadDomain().then(function(a){})}function j(a,b){u.checkCoverage(a),b=new Map(b);var c=!0,d=!1,f=void 0;try{for(var g,h=a.axes.keys()[Symbol.iterator]();!(c=(g=h.next()).done);c=!0){var i=g.value;b.has(i)||b.set(i,i)}}catch(k){d=!0,f=k}finally{try{!c&&h["return"]&&h["return"]()}finally{if(d)throw f}}var l=function(a){var c=new Map,d=!0,e=!1,f=void 0;try{for(var g,h=b[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=q(g.value,2),j=i[0],k=i[1],l=a.axes.get(j),m=l.dataType,n=l.components,o=l.values,p=l.bounds,r={key:k,dataType:m,components:n.map(function(a){return b.has(a)?b.get(a):a}),values:o,bounds:p};c.set(k,r)}}catch(s){e=!0,f=s}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}var u=a.referencing.map(function(a){var c=a.components,d=a.system;return{components:c.map(function(a){return b.has(a)?b.get(a):a}),system:d}}),v={type:t.DOMAIN,domainType:a.domainType,axes:c,referencing:u};return v},m=[].concat(e(b)).map(function(a){var b=q(a,2),c=b[0],d=b[1];return"['"+c+"']:obj['"+d+"']"}).join(","),n=function(a){var c={shape:new Map([].concat(e(a.shape)).map(function(a){var c=q(a,2),d=c[0],e=c[1];return[b.get(d),e]})),dataType:a.dataType,get:new Function("range","return function get (obj){return range.get({"+m+"})}")(a)};return c},o=function(b){return a.loadRange(b).then(n)},p=function(b){return a.loadRanges(b).then(function(a){return new Map([].concat(e(a)).map(function(a){var b=q(a,2),c=b[0],d=b[1];return[c,n(d)]}))})},r={type:t.COVERAGE,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return a.loadDomain().then(l)},loadRange:o,loadRanges:p,subsetByIndex:function(c){return a.subsetByIndex(c).then(function(a){return j(a,b)})},subsetByValue:function(c){return a.subsetByValue(c).then(function(a){return j(a,b)})}};return r}function k(a,b,c,d){u.checkCoverage(a);var f=function(a){var b={shape:a.shape,dataType:d||a.dataType,get:function(b){return c(b,a)}};return b},g=function(c){return b===c?a.loadRange(c).then(f):a.loadRange(c)},h=function(c){return a.loadRanges(c).then(function(a){return new Map([].concat(e(a)).map(function(a){var c=q(a,2),d=c[0],e=c[1];return[d,b===d?f(e):e]}))})},i={type:t.COVERAGE,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return a.loadDomain()},loadRange:g,loadRanges:h,subsetByIndex:function(e){return a.subsetByIndex(e).then(function(a){return k(a,b,c,d)})},subsetByValue:function(e){return a.subsetByValue(e).then(function(a){return k(a,b,c,d)})}};return i}function l(a,b){u.checkCoverage(a);var c=b.parameter,d=b.inputParameters,f=b.dataType,g=void 0===f?"float":f,h=b.fn,i=new Map(a.parameters);i.set(c.key,c);var j=function(){return a.loadRanges(d).then(function(a){var b=d.map(function(b){return a.get(b)}),c=b[0].shape,f={shape:c,dataType:g,get:function(a){return h.apply(void 0,[a].concat(e(b)))}};return f})},k=function(b){return c.key===b?j():a.loadRange(b)},m={type:t.COVERAGE,domainType:a.domainType,parameters:i,loadDomain:function(){return a.loadDomain()},loadRange:k,subsetByIndex:function(c){return a.subsetByIndex(c).then(function(a){return l(a,b)})},subsetByValue:function(c){return a.subsetByValue(c).then(function(a){return l(a,b)})}};return x.addLoadRangesFunction(m),m}function m(a,b){var c=b.parameter,d=b.inputParameters,f=b.dataType,g=b.fn,h={parameter:c,inputParameters:d,dataType:f,fn:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),f=1;b>f;f++)c[f-1]=arguments[f];var h=d.map(function(b,d){return c[d].get(a)});return h.some(function(a){return null===a})?null:g.apply(void 0,e(h))}};return l(a,h)}function n(a,b){var c=arguments.length<=2||void 0===arguments[2]?["x","y"]:arguments[2];u.checkCoverage(a),"Polygon"===b.type&&(b={type:"MultiPolygon",coordinates:[b.coordinates]});var d=b.coordinates;d.forEach(function(a){return w.ensureClockwisePolygon(a)});var e=w.getPointInPolygonsFn(d),f=q(c,2),g=f[0],h=f[1];return a.loadDomain().then(function(b){for(var c=b.axes.get(g).values,d=b.axes.get(h).values,f=s["default"](new Uint8Array(c.length*d.length),[c.length,d.length]),i=0;i<c.length;i++)for(var j=0;j<d.length;j++){var l=e([c[i],d[j]])>=0;f.set(i,j,l)}var m=function(a,b){return f.get(a[g]||0,a[h]||0)?b.get(a):null},n=a,o=!0,p=!1,q=void 0;try{for(var r,t=a.parameters.keys()[Symbol.iterator]();!(o=(r=t.next()).done);o=!0){var u=r.value;n=k(n,u,m)}}catch(v){p=!0,q=v}finally{try{!o&&t["return"]&&t["return"]()}finally{if(p)throw q}}return n})}var o=this,p=o.define;o.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.withSimpleDerivedParameter=void 0;var q=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b.withParameters=f,b.withCategories=g,b.withDomainType=h,b.asCovJSONDomainType=i,b.renameAxes=j,b.mapRange=k,b.withDerivedParameter=l,b.maskByPolygon=n;var r=a("34"),s=d(r),t=a("28"),u=a("35"),v=a("27"),w=a("36"),x=a("37");return b.withSimpleDerivedParameter=m,o.define=p,c.exports}),a.register("38",["8","9","c","2a","b"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.$,c=a.$$,d=a.HTML},function(a){e=a.i18n},function(a){f=a["default"]},function(a){g=a.withSimpleDerivedParameter},function(a){h=a["default"],i=a.PROCESS}],execute:function(){j='\n<div class="modal fade" id="deriveParameterModal" tabindex="-1" role="dialog" aria-labelledby="deriveParameterModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="deriveParameterModalLabel">Derive a Parameter</h4>\n      </div>\n      <div class="modal-body">\n        <div class="panel panel-primary derive-input-parameters">\n          <div class="panel-heading">\n            <h4>Select input parameters</h4>\n          </div>\n          <div class="panel-body input-parameters">\n          </div>\n        </div>\n        \n        <div class="panel panel-primary derive-ouput-parameter">\n          <div class="panel-heading">\n            <h4>Define derived parameter</h4>\n          </div>\n          <div class="panel-body">\n            \n            <div class="form-horizontal">\n              <div class="form-group">\n                <label for="inputParameterKey" class="col-sm-2 control-label">ID</label>\n                <div class="col-sm-10">\n                  <input type="text" class="form-control" id="inputParameterKey" placeholder="salinity">\n                </div>\n              </div>\n              <div class="form-group">\n                <label for="inputObservedPropertyLabel" class="col-sm-2 control-label">Observed Property</label>\n                <div class="col-sm-10">\n                  <input type="text" class="form-control" id="inputObservedPropertyLabel" placeholder="Sea Water Salinity">\n                </div>\n              </div>\n              <div class="form-group">\n                <label for="inputParameterUnits" class="col-sm-2 control-label">Units</label>\n                <div class="col-sm-10">\n                  <input type="text" class="form-control" id="inputParameterUnits">\n                </div>\n              </div>\n              <div class="form-group">\n                <label for="inputParameterFormula" class="col-sm-2 control-label">Formula</label>\n                <div class="col-sm-10">\n                  <input type="text" class="form-control" id="inputParameterFormula">\n                </div>\n              </div>\n              <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10 submit-button-container">\n                </div>\n              </div>\n            </div>\n  \n          </div>\n        </div>\n               \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n',b("body").add(d(j)),k={"input-parameter":'\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" class="input-parameter-key">\n      <code class="parameter-key"></code> - <span class="observedProperty-label"></span>\n    </label>\n  </div>\n  ',"submit-button":'\n  <button type="submit" class="btn btn-primary submit-button" data-dismiss="modal">Confirm</button>\n  '},l=function(a){function h(a,b){babelHelpers.classCallCheck(this,h),babelHelpers.get(Object.getPrototypeOf(h.prototype),"constructor",this).call(this,b),this._isSingleCoverage(a)?this.cov=this._getSingleCoverage(a):this.cov=a,this.label="Derive",this.icon='<span class="glyphicon glyphicon-plus"></span>'}return babelHelpers.inherits(h,a),babelHelpers.createClass(h,[{key:"_isSingleCoverage",value:function(a){try{return this._getSingleCoverage(a),!0}catch(b){return!1}}},{key:"_getSingleCoverage",value:function(a){if(a.coverages){if(1===a.coverages.length)return a.coverages[0];throw new Error("not a single coverage")}return a}},{key:"run",value:function(){var a=this,g=this.cov,h=b("#deriveParameterModal");b(".input-parameters",h).fill(),c("#inputParameterKey",h).value="",c("#inputObservedPropertyLabel",h).value="",c("#inputParameterUnits",h).value="",c("#inputParameterFormula",h).value="";var i=!0,j=!1,l=void 0;try{for(var m,n=g.parameters.values()[Symbol.iterator]();!(i=(m=n.next()).done);i=!0){var o=m.value,p=b(d(k["input-parameter"]));c(".input-parameter-key",p).value=o.key,b(".parameter-key",p).fill(o.key),b(".observedProperty-label",p).fill(e(o.observedProperty.label)),b("input",p).on("|click",function(){var b=c("#inputParameterFormula",h);if(!b.value){var d=a._getCheckedParameterKeys(h);b.placeholder=d.join(" + ")}}),b(".input-parameters",h).add(p)}}catch(q){j=!0,l=q}finally{try{!i&&n["return"]&&n["return"]()}finally{if(j)throw l}}var r=b(d(k["submit-button"]));b(".submit-button-container",h).fill().add(r),b(".submit-button",h).on("?click",function(){var b=a._getCheckedParameterKeys(h),d=c("#inputParameterKey",h).value,e=c("#inputObservedPropertyLabel",h).value,f=c("#inputParameterUnits",h).value,g=c("#inputParameterFormula",h).value;if(!(b.length&&d&&e&&g))return void alert("Input parameters, ID, observed property, and formula are required");var i=new(babelHelpers.bind.apply(Function,[null].concat(babelHelpers.toConsumableArray(b),["return "+g])));try{var j=b.map(function(){return Math.random()});i.apply(void 0,babelHelpers.toConsumableArray(j))}catch(k){return void alert("Invalid formula: "+k)}return console.log(i.toString()),a._createVirtualDataset(b,d,e,f,i),!0}),new f(h[0]).open()}},{key:"_createVirtualDataset",value:function(a,b,c,d,f){var h={key:b,observedProperty:{label:{en:c}}};d&&(h.unit={symbol:d});var i=g(this.cov,{parameter:h,inputParameters:a,fn:f}),j=" [derived: "+b+"]",k={title:{en:e(this.context.dataset.title)+j},virtual:!0,distributions:[{title:{en:e(this.context.distribution.title)+j},mediaType:"coveragedata",data:i}]},l=this.context.workspace;l.addDataset(k,this.context.dataset),l.requestFocus(k)}},{key:"_getCheckedParameterKeys",value:function(a){var c=b(".input-parameter-key",a).array(),d=c.filter(function(a){return a.checked});return d.map(function(a){return a.value})}},{key:"isSupported",get:function(){return this._isSingleCoverage(this.cov)?!0:!1}}]),h}(h),a("default",l),l.type=i}}}),a.register("39",[],function(){return{setters:[],execute:function(){}}}),a.registerDynamic("3a",["3b"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(d){"use strict";function e(a){this.owner=a}function f(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype,b.prototype=new c}return b.prototype.constructor=b,b}function g(a){var b=this.internal=new h(this);b.loadConfig(a),b.beforeInit(a),b.init(),b.afterInit(a),function c(a,b,d){Object.keys(a).forEach(function(e){b[e]=a[e].bind(d),Object.keys(a[e]).length>0&&c(a[e],b[e],d)})}(k,this,this)}function h(b){var c=this;c.d3=d.d3?d.d3:"undefined"!=typeof a?a("3b"):void 0,c.api=b,c.config=c.getDefaultConfig(),c.data={},c.cache={},c.axes={}}function i(a){e.call(this,a)}function j(a,b){function c(a,b){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+u)+", 0)"})}function d(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function e(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function f(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,n);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return d.length>0&&d[0]>0&&d.unshift(d[0]-(d[1]-d[0])),d}function g(){var a,c=p.copy();return b.isCategory&&(a=p.domain(),c.domain([a[0],a[1]-1])),c}function h(a){var b=m?m(a):a;return"undefined"!=typeof b?b:""}function i(a){if(C)return C;var b={h:11.5,w:5.5};return a.select("text").text(h).each(function(a){var c=this.getBoundingClientRect(),d=h(a),e=c.height,f=d?c.width/d.length:void 0;e&&f&&(b.h=e,b.w=f)}).text(""),C=b,b}function j(c){return b.withoutTransition?c:a.transition(c)}function k(m){m.each(function(){function m(a,c){function d(a,b){f=void 0;for(var h=1;h<b.length;h++)if(" "===b.charAt(h)&&(f=h),e=b.substr(0,h+1),g=U.w*e.length,g>c)return d(a.concat(b.substr(0,f?f:h)),b.slice(f?f+1:h));return a.concat(b)}var e,f,g,i=h(a),j=[];return"[object Array]"===Object.prototype.toString.call(i)?i:((!c||0>=c)&&(c=X?95:b.isCategory?Math.ceil(F(G[1])-F(G[0]))-12:110),d(j,i+""))}function n(a,b){var c=U.h;return 0===b&&(c="left"===q||"right"===q?-((V[a.index]-1)*(U.h/2)-3):".71em"),c}function v(a){var b=p(a)+(o?0:u);return L[0]<b&&b<L[1]?r:0}function w(a){return a?a>0?"start":"end":"middle"}function x(a){return a?"rotate("+a+")":""}function y(a){return a?8*Math.sin(Math.PI*(a/180)):0}function z(a){return a?11.5-2.5*(a/15)*(a>0?1:-1):W}var A,B,C,D=k.g=a.select(this),E=this.__chart__||p,F=this.__chart__=g(),G=t?t:f(F),H=D.selectAll(".tick").data(G,F),I=H.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),J=H.exit().remove(),K=j(H).style("opacity",1),L=p.rangeExtent?p.rangeExtent():e(p.range()),M=D.selectAll(".domain").data([0]),N=(M.enter().append("path").attr("class","domain"),j(M));I.append("line"),I.append("text");var O=I.select("line"),P=K.select("line"),Q=I.select("text"),R=K.select("text");b.isCategory?(u=Math.ceil((F(1)-F(0))/2),B=o?0:u,C=o?u:0):u=B=0;var S,T,U=i(D.select(".tick")),V=[],W=Math.max(r,0)+s,X="left"===q||"right"===q;S=H.select("text"),T=S.selectAll("tspan").data(function(a,c){var d=b.tickMultiline?m(a,b.tickWidth):[].concat(h(a));return V[c]=d.length,d.map(function(a){return{index:c,splitted:a}})}),T.enter().append("tspan"),T.exit().remove(),T.text(function(a){return a.splitted});var Y=b.tickTextRotate;switch(q){case"bottom":A=c,O.attr("y2",r),Q.attr("y",W),P.attr("x1",B).attr("x2",B).attr("y2",v),R.attr("x",0).attr("y",z(Y)).style("text-anchor",w(Y)).attr("transform",x(Y)),T.attr("x",0).attr("dy",n).attr("dx",y(Y)),N.attr("d","M"+L[0]+","+l+"V0H"+L[1]+"V"+l);break;case"top":A=c,O.attr("y2",-r),Q.attr("y",-W),P.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-W),S.style("text-anchor","middle"),T.attr("x",0).attr("dy","0em"),N.attr("d","M"+L[0]+","+-l+"V0H"+L[1]+"V"+-l);break;case"left":A=d,O.attr("x2",-r),Q.attr("x",-W),P.attr("x2",-r).attr("y1",C).attr("y2",C),R.attr("x",-W).attr("y",u),S.style("text-anchor","end"),T.attr("x",-W).attr("dy",n),N.attr("d","M"+-l+","+L[0]+"H0V"+L[1]+"H"+-l);break;case"right":A=d,O.attr("x2",r),Q.attr("x",W),P.attr("x2",r).attr("y2",0),R.attr("x",W).attr("y",0),S.style("text-anchor","start"),T.attr("x",W).attr("dy",n),N.attr("d","M"+l+","+L[0]+"H0V"+L[1]+"H"+l)}if(F.rangeBand){var Z=F,$=Z.rangeBand()/2;E=F=function(a){return Z(a)+$}}else E.rangeBand?E=F:J.call(A,F);I.call(A,E),K.call(A,F)})}var l,m,n,o,p=a.scale.linear(),q="bottom",r=6,s=3,t=null,u=0,v=!0;return b=b||{},l=b.withOuterTick?6:0,k.scale=function(a){return arguments.length?(p=a,k):p},k.orient=function(a){return arguments.length?(q=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom",k):q},k.tickFormat=function(a){return arguments.length?(m=a,k):m},k.tickCentered=function(a){return arguments.length?(o=a,k):o},k.tickOffset=function(){return u},k.tickInterval=function(){var a,c;return b.isCategory?a=2*u:(c=k.g.select("path.domain").node().getTotalLength()-2*l,a=c/k.g.selectAll("line").size()),a===1/0?0:a},k.ticks=function(){return arguments.length?(n=arguments,k):n},k.tickCulling=function(a){return arguments.length?(v=a,k):v},k.tickValues=function(a){if("function"==typeof a)t=function(){return a(p.domain())};else{if(!arguments.length)return t;t=a}return k},k}var k,l,m,n={version:"0.4.11-rc4"};n.generate=function(a){return new g(a)},n.chart={fn:g.prototype,internal:{fn:h.prototype,axis:{fn:i.prototype}}},k=n.chart.fn,l=n.chart.internal.fn,m=n.chart.internal.axis.fn,l.beforeInit=function(){},l.afterInit=function(){},l.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},l.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeFormat=c.data_xLocaltime?b.time.format:b.time.format.utc,a.axisTimeFormat=c.axis_x_localtime?b.time.format:b.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=c.axis_rotated?"left":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},l.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},l.initWithData=function(a){var b,c,d=this,e=d.d3,f=d.config,g=!0;d.axis=new i(d),d.initPie&&d.initPie(),d.initBrush&&d.initBrush(),d.initZoom&&d.initZoom(),f.bindto?"function"==typeof f.bindto.node?d.selectChart=f.bindto:d.selectChart=e.select(f.bindto):d.selectChart=e.selectAll([]),d.selectChart.empty()&&(d.selectChart=e.select(document.createElement("div")).style("opacity",0),d.observeInserted(d.selectChart),g=!1),d.selectChart.html("").classed("c3",!0),d.data.xs={},d.data.targets=d.convertDataToTargets(a),f.data_filter&&(d.data.targets=d.data.targets.filter(f.data_filter)),f.data_hide&&d.addHiddenTargetIds(f.data_hide===!0?d.mapToIds(d.data.targets):f.data_hide),f.legend_hide&&d.addHiddenLegendIds(f.legend_hide===!0?d.mapToIds(d.data.targets):f.legend_hide),d.hasType("gauge")&&(f.legend_show=!1),d.updateSizes(),d.updateScales(),d.x.domain(e.extent(d.getXDomain(d.data.targets))),d.y.domain(d.getYDomain(d.data.targets,"y")),d.y2.domain(d.getYDomain(d.data.targets,"y2")),d.subX.domain(d.x.domain()),d.subY.domain(d.y.domain()),d.subY2.domain(d.y2.domain()),d.orgXDomain=d.x.domain(),d.brush&&d.brush.scale(d.subX),f.zoom_enabled&&d.zoom.scale(d.x),d.svg=d.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return f.onmouseover.call(d)}).on("mouseleave",function(){return f.onmouseout.call(d)}),b=d.svg.append("defs"),d.clipChart=d.appendClip(b,d.clipId),d.clipXAxis=d.appendClip(b,d.clipIdForXAxis),d.clipYAxis=d.appendClip(b,d.clipIdForYAxis),d.clipGrid=d.appendClip(b,d.clipIdForGrid),d.clipSubchart=d.appendClip(b,d.clipIdForSubchart),d.updateSvgSize(),c=d.main=d.svg.append("g").attr("transform",d.getTranslate("main")),d.initSubchart&&d.initSubchart(),d.initTooltip&&d.initTooltip(),d.initLegend&&d.initLegend(),d.initTitle&&d.initTitle(),c.append("text").attr("class",o.text+" "+o.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),d.initRegion(),d.initGrid(),c.append("g").attr("clip-path",d.clipPath).attr("class",o.chart),f.grid_lines_front&&d.initGridLines(),d.initEventRect(),d.initChartElements(),c.insert("rect",f.zoom_privileged?null:"g."+o.regions).attr("class",o.zoomRect).attr("width",d.width).attr("height",d.height).style("opacity",0).on("dblclick.zoom",null),f.axis_x_extent&&d.brush.extent(d.getDefaultExtent()),d.axis.init(),d.updateTargets(d.data.targets),g&&(d.updateDimension(),d.config.oninit.call(d),d.redraw({withTransition:!1,
withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),d.bindResize(),d.api.element=d.selectChart.node()},l.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},l.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{top:a.margin.top,right:NaN,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:NaN,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:NaN,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},l.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},l.showTargets=function(){var a=this;a.svg.selectAll("."+o.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},l.redraw=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,A,B,C,D,E,F,G,H=this,I=H.main,J=H.d3,K=H.config,L=H.getShapeIndices(H.isAreaType),M=H.getShapeIndices(H.isBarType),N=H.getShapeIndices(H.isLineType),O=H.hasArcType(),P=H.filterTargetsToShow(H.data.targets),Q=H.xv.bind(H);if(a=a||{},c=z(a,"withY",!0),d=z(a,"withSubchart",!0),e=z(a,"withTransition",!0),h=z(a,"withTransform",!1),i=z(a,"withUpdateXDomain",!1),j=z(a,"withUpdateOrgXDomain",!1),k=z(a,"withTrimXDomain",!0),p=z(a,"withUpdateXAxis",i),l=z(a,"withLegend",!1),m=z(a,"withEventRect",!0),n=z(a,"withDimension",!0),f=z(a,"withTransitionForExit",e),g=z(a,"withTransitionForAxis",e),v=e?K.transition_duration:0,w=f?v:0,x=g?v:0,b=b||H.axis.generateTransitions(x),l&&K.legend_show?H.updateLegend(H.mapToIds(H.data.targets),a,b):n&&H.updateDimension(!0),H.isCategorized()&&0===P.length&&H.x.domain([0,H.axes.x.selectAll(".tick").size()]),P.length?(H.updateXDomain(P,i,j,k),K.axis_x_tick_values||(B=H.axis.updateXAxisTickValues(P))):(H.xAxis.tickValues([]),H.subXAxis.tickValues([])),K.zoom_rescale&&!a.flow&&(E=H.x.orgDomain()),H.y.domain(H.getYDomain(P,"y",E)),H.y2.domain(H.getYDomain(P,"y2",E)),!K.axis_y_tick_values&&K.axis_y_tick_count&&H.yAxis.tickValues(H.axis.generateTickValues(H.y.domain(),K.axis_y_tick_count)),!K.axis_y2_tick_values&&K.axis_y2_tick_count&&H.y2Axis.tickValues(H.axis.generateTickValues(H.y2.domain(),K.axis_y2_tick_count)),H.axis.redraw(b,O),H.axis.updateLabels(e),(i||p)&&P.length)if(K.axis_x_tick_culling&&B){for(C=1;C<B.length;C++)if(B.length/C<K.axis_x_tick_culling_max){D=C;break}H.svg.selectAll("."+o.axisX+" .tick text").each(function(a){var b=B.indexOf(a);b>=0&&J.select(this).style("display",b%D?"none":"block")})}else H.svg.selectAll("."+o.axisX+" .tick text").style("display","block");q=H.generateDrawArea?H.generateDrawArea(L,!1):void 0,r=H.generateDrawBar?H.generateDrawBar(M):void 0,s=H.generateDrawLine?H.generateDrawLine(N,!1):void 0,t=H.generateXYForText(L,M,N,!0),u=H.generateXYForText(L,M,N,!1),c&&(H.subY.domain(H.getYDomain(P,"y")),H.subY2.domain(H.getYDomain(P,"y2"))),H.updateXgridFocus(),I.select("text."+o.text+"."+o.empty).attr("x",H.width/2).attr("y",H.height/2).text(K.data_empty_label_text).transition().style("opacity",P.length?0:1),H.updateGrid(v),H.updateRegion(v),H.updateBar(w),H.updateLine(w),H.updateArea(w),H.updateCircle(),H.hasDataLabel()&&H.updateText(w),H.redrawTitle&&H.redrawTitle(),H.redrawArc&&H.redrawArc(v,w,h),H.redrawSubchart&&H.redrawSubchart(d,b,v,w,L,M,N),I.selectAll("."+o.selectedCircles).filter(H.isBarType.bind(H)).selectAll("circle").remove(),K.interaction_enabled&&!a.flow&&m&&(H.redrawEventRect(),H.updateZoom&&H.updateZoom()),H.updateCircleY(),F=(H.config.axis_rotated?H.circleY:H.circleX).bind(H),G=(H.config.axis_rotated?H.circleX:H.circleY).bind(H),a.flow&&(A=H.generateFlow({targets:P,flow:a.flow,duration:a.flow.duration,drawBar:r,drawLine:s,drawArea:q,cx:F,cy:G,xv:Q,xForText:t,yForText:u})),(v||A)&&H.isTabVisible()?J.transition().duration(v).each(function(){var b=[];[H.redrawBar(r,!0),H.redrawLine(s,!0),H.redrawArea(q,!0),H.redrawCircle(F,G,!0),H.redrawText(t,u,a.flow,!0),H.redrawRegion(!0),H.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})}),y=H.generateWait(),b.forEach(function(a){y.add(a)})}).call(y,function(){A&&A(),K.onrendered&&K.onrendered.call(H)}):(H.redrawBar(r),H.redrawLine(s),H.redrawArea(q),H.redrawCircle(F,G),H.redrawText(t,u,a.flow),H.redrawRegion(),H.redrawGrid(),K.onrendered&&K.onrendered.call(H)),H.mapToIds(H.data.targets).forEach(function(a){H.withoutFadeIn[a]=!0})},l.updateAndRedraw=function(a){var b,c=this,d=c.config;a=a||{},a.withTransition=z(a,"withTransition",!0),a.withTransform=z(a,"withTransform",!1),a.withLegend=z(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=z(a,"withTransitionForTransform",a.withTransition),c.updateSizes(),a.withLegend&&d.legend_show||(b=c.axis.generateTransitions(a.withTransitionForAxis?d.transition_duration:0),c.updateScales(),c.updateSvgSize(),c.transformAll(a.withTransitionForTransform,b)),c.redraw(a,b)},l.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},l.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},l.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},l.isCustomX=function(){var a=this,b=a.config;return!a.isTimeSeries()&&(b.data_x||y(b.data_xs))},l.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},l.getTranslate=function(a){var b,c,d=this,e=d.config;return"main"===a?(b=v(d.margin.left),c=v(d.margin.top)):"context"===a?(b=v(d.margin2.left),c=v(d.margin2.top)):"legend"===a?(b=d.margin3.left,c=d.margin3.top):"x"===a?(b=0,c=e.axis_rotated?0:d.height):"y"===a?(b=0,c=e.axis_rotated?d.height:0):"y2"===a?(b=e.axis_rotated?0:d.width,c=e.axis_rotated?1:0):"subx"===a?(b=0,c=e.axis_rotated?0:d.height2):"arc"===a&&(b=d.arcWidth/2,c=d.arcHeight/2),"translate("+b+","+c+")"},l.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},l.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0},l.opacityForCircle=function(a){var b=this.config.point_show?1:0;return p(a.value)?this.isScatterType(a)?.5:b:0},l.opacityForText=function(){return this.hasDataLabel()?1:0},l.xx=function(a){return a?this.x(a.x):null},l.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},l.yv=function(a){var b=this,c=a.axis&&"y2"===a.axis?b.y2:b.y;return Math.ceil(c(a.value))},l.subxx=function(a){return a?this.subX(a.x):null},l.transformMain=function(a,b){var c,d,e,f=this;b&&b.axisX?c=b.axisX:(c=f.main.select("."+o.axisX),a&&(c=c.transition())),b&&b.axisY?d=b.axisY:(d=f.main.select("."+o.axisY),a&&(d=d.transition())),b&&b.axisY2?e=b.axisY2:(e=f.main.select("."+o.axisY2),a&&(e=e.transition())),(a?f.main.transition():f.main).attr("transform",f.getTranslate("main")),c.attr("transform",f.getTranslate("x")),d.attr("transform",f.getTranslate("y")),e.attr("transform",f.getTranslate("y2")),f.main.select("."+o.chartArcs).attr("transform",f.getTranslate("arc"))},l.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},l.updateSvgSize=function(){var a=this,b=a.svg.select(".c3-brush .background");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",b.size()?b.attr("height"):0),a.svg.select("."+o.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},l.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},l.observeInserted=function(a){var b,c=this;return"undefined"==typeof MutationObserver?void d.console.error("MutationObserver not defined."):(b=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(b.disconnect(),c.intervalForObserveInserted=d.setInterval(function(){a.node().parentNode&&(d.clearInterval(c.intervalForObserveInserted),c.updateDimension(),c.brush&&c.brush.update(),c.config.oninit.call(c),c.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})}),void b.observe(a.node(),{attributes:!0,childList:!0,characterData:!0}))},l.bindResize=function(){var a=this,b=a.config;if(a.resizeFunction=a.generateResize(),a.resizeFunction.add(function(){b.onresize.call(a)}),b.resize_auto&&a.resizeFunction.add(function(){void 0!==a.resizeTimeout&&d.clearTimeout(a.resizeTimeout),a.resizeTimeout=d.setTimeout(function(){delete a.resizeTimeout,a.api.flush()},100)}),a.resizeFunction.add(function(){b.onresized.call(a)}),d.attachEvent)d.attachEvent("onresize",a.resizeFunction);else if(d.addEventListener)d.addEventListener("resize",a.resizeFunction,!1);else{var c=d.onresize;c?c.add&&c.remove||(c=a.generateResize(),c.add(d.onresize)):c=a.generateResize(),c.add(a.resizeFunction),d.onresize=c}},l.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];return a.add=function(a){b.push(a)},a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}},a},l.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},l.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())return void(b+=1);try{a.transition()}catch(c){b+=1}}),b===a.length&&(clearInterval(d),c&&c())},10)};return b.add=function(b){a.push(b)},b},l.parseDate=function(a){var b,c=this;return a instanceof Date?b=a:"string"==typeof a?b=c.dataTimeFormat(c.config.data_xFormat).parse(a):"number"!=typeof a||isNaN(a)||(b=new Date(+a)),(!b||isNaN(+b))&&d.console.error("Failed to parse x '"+a+"' to Date object"),b},l.isTabVisible=function(){var a;return"undefined"!=typeof document.hidden?a="hidden":"undefined"!=typeof document.mozHidden?a="mozHidden":"undefined"!=typeof document.msHidden?a="msHidden":"undefined"!=typeof document.webkitHidden&&(a="webkitHidden"),document[a]?!1:!0},l.getDefaultConfig=function(){var a={bindto:"#chart",size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:{},pie_expand_duration:50,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},l.additionalConfig={},l.loadConfig=function(a){function b(){var a=d.shift();return a&&c&&"object"==typeof c&&a in c?(c=c[a],b()):a?void 0:c}var c,d,e,f=this.config;Object.keys(f).forEach(function(g){c=a,d=g.split("_"),e=b(),t(e)&&(f[g]=e)})},l.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])},l.getX=function(a,b,c,d){var e,f=this,g=f.getScale(a,b,f.isTimeSeries()),h=c?g.domain(c):g;f.isCategorized()?(d=d||function(){return 0},g=function(a,b){var c=h(a)+d(a);return b?c:Math.ceil(c)}):g=function(a,b){var c=h(a);return b?c:Math.ceil(c)};for(e in h)g[e]=h[e];return g.orgDomain=function(){return h.domain()},f.isCategorized()&&(g.domain=function(a){return arguments.length?(h.domain(a),g):(a=this.orgDomain(),[a[0],a[1]+1])}),g},l.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},l.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y},l.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},l.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},l.getYDomainMin=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasNegativeValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=0>a?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a>0||(k[d][b]+=+a)});return h.d3.min(Object.keys(k).map(function(a){return h.d3.min(k[a])}))},l.getYDomainMax=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasPositiveValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a>0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&0>+a||(k[d][b]+=+a)});return h.d3.max(Object.keys(k).map(function(a){return h.d3.max(k[a])}))},l.getYDomain=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o=this,q=o.config,r=a.filter(function(a){return o.axis.getId(a.id)===b}),s=c?o.filterByXDomain(r,c):r,t="y2"===b?q.axis_y2_min:q.axis_y_min,u="y2"===b?q.axis_y2_max:q.axis_y_max,v=o.getYDomainMin(s),x=o.getYDomainMax(s),z="y2"===b?q.axis_y2_center:q.axis_y_center,A=o.hasType("bar",s)&&q.bar_zerobased||o.hasType("area",s)&&q.area_zerobased,B="y2"===b?q.axis_y2_inverted:q.axis_y_inverted,C=o.hasDataLabel()&&q.axis_rotated,D=o.hasDataLabel()&&!q.axis_rotated;return v=p(t)?t:p(u)?u>v?v:u-10:v,x=p(u)?u:p(t)?x>t?x:t+10:x,0===s.length?"y2"===b?o.y2.domain():o.y.domain():(isNaN(v)&&(v=0),isNaN(x)&&(x=v),v===x&&(0>v?x=0:v=0),m=v>=0&&x>=0,n=0>=v&&0>=x,(p(t)&&m||p(u)&&n)&&(A=!1),A&&(m&&(v=0),n&&(x=0)),e=Math.abs(x-v),f=g=h=.1*e,"undefined"!=typeof z&&(i=Math.max(Math.abs(v),Math.abs(x)),x=z+i,v=z-i),C?(j=o.getDataLabelLength(v,x,"width"),k=w(o.y.range()),l=[j[0]/k,j[1]/k],g+=e*(l[1]/(1-l[0]-l[1])),h+=e*(l[0]/(1-l[0]-l[1]))):D&&(j=o.getDataLabelLength(v,x,"height"),g+=o.axis.convertPixelsToAxisPadding(j[1],e),h+=o.axis.convertPixelsToAxisPadding(j[0],e)),"y"===b&&y(q.axis_y_padding)&&(g=o.axis.getPadding(q.axis_y_padding,"top",g,e),h=o.axis.getPadding(q.axis_y_padding,"bottom",h,e)),"y2"===b&&y(q.axis_y2_padding)&&(g=o.axis.getPadding(q.axis_y2_padding,"top",g,e),h=o.axis.getPadding(q.axis_y2_padding,"bottom",h,e)),A&&(m&&(h=v),n&&(g=-x)),d=[v-h,x+g],B?d.reverse():d)},l.getXDomainMin=function(a){var b=this,c=b.config;return t(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},l.getXDomainMax=function(a){var b=this,c=b.config;return t(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})},l.getXDomainPadding=function(a){var b,c,d,e,f=this,g=f.config,h=a[1]-a[0];return f.isCategorized()?c=0:f.hasType("bar")?(b=f.getMaxDataCount(),c=b>1?h/(b-1)/2:.5):c=.01*h,"object"==typeof g.axis_x_padding&&y(g.axis_x_padding)?(d=p(g.axis_x_padding.left)?g.axis_x_padding.left:c,e=p(g.axis_x_padding.right)?g.axis_x_padding.right:c):d=e="number"==typeof g.axis_x_padding?g.axis_x_padding:c,{left:d,right:e}},l.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],e=c[1],f=b.getXDomainPadding(c),g=0,h=0;return d-e!==0||b.isCategorized()||(b.isTimeSeries()?(d=new Date(.5*d.getTime()),e=new Date(1.5*e.getTime())):(d=0===d?1:.5*d,e=0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},l.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e?e:f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),b&&(f.x.domain(e?e:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},l.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0],d=b[1];return a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c),d<=a[1]&&(a[0]=+a[0]-(a[1]-d),a[1]=d),a},l.isX=function(a){var b=this,c=b.config;return c.data_x&&a===c.data_x||y(c.data_xs)&&A(c.data_xs,a)},l.isNotX=function(a){return!this.isX(a)},l.getXKey=function(a){var b=this,c=b.config;return c.data_x?c.data_x:y(c.data_xs)?c.data_xs[a]:null},l.getXValuesOfXKey=function(a,b){var c,d=this,e=b&&y(b)?d.mapToIds(b):[];return e.forEach(function(b){d.getXKey(b)===a&&(c=d.data.xs[b])}),c},l.getIndexByX=function(a){var b=this,c=b.filterByX(b.data.targets,a);return c.length?c[0].index:null},l.getXValue=function(a,b){var c=this;return a in c.data.xs&&c.data.xs[a]&&p(c.data.xs[a][b])?c.data.xs[a][b]:b},l.getOtherTargetXs=function(){var a=this,b=Object.keys(a.data.xs);return b.length?a.data.xs[b[0]]:null},l.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},l.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},l.hasMultipleX=function(a){return this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()>1},l.isMultipleX=function(){return y(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},l.addName=function(a){var b,c=this;return a&&(b=c.config.data_names[a.id],a.name=void 0!==b?b:a.id),a},l.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},l.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},l.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},l.generateTargetX=function(a,b,c){var d,e=this;return d=e.isTimeSeries()?a?e.parseDate(a):e.parseDate(e.getXValue(b,c)):e.isCustomX()&&!e.isCategorized()?p(a)?+a:e.getXValue(b,c):c},l.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},l.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))},l.getPrevX=function(a){var b=this.xs[a-1];return"undefined"!=typeof b?b:null},l.getNextX=function(a){var b=this.xs[a+1];return"undefined"!=typeof b?b:null},l.getMaxDataCount=function(){var a=this;return a.d3.max(a.data.targets,function(a){return a.values.length})},l.getMaxDataCountTarget=function(a){var b,c=a.length,d=0;return c>1?a.forEach(function(a){a.values.length>d&&(b=a,d=a.values.length)}):b=c?a[0]:null,b},l.getEdgeX=function(a){var b=this;return a.length?[b.d3.min(a,function(a){return a.values[0].x}),b.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]},l.mapToIds=function(a){return a.map(function(a){return a.id})},l.mapToTargetIds=function(a){var b=this;return a?[].concat(a):b.mapToIds(b.data.targets)},l.hasTarget=function(a,b){var c,d=this.mapToIds(a);for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},l.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},l.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},l.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})},l.mapTargetsToUniqueXs=function(a){var b=this,c=b.d3.set(b.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return c=b.isTimeSeries()?c.map(function(a){return new Date(+a)}):c.map(function(a){return+a}),c.sort(function(a,b){return b>a?-1:a>b?1:a>=b?0:NaN})},l.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)},l.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},l.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)},l.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},l.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},l.checkValueInTargets=function(a,b){var c,d,e,f=Object.keys(a);for(c=0;c<f.length;c++)for(e=a[f[c]].values,d=0;d<e.length;d++)if(b(e[d].value))return!0;return!1},l.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})},l.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a>0})},l.isOrderDesc=function(){var a=this.config;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},l.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},l.orderTargets=function(a){var b=this,c=b.config,d=b.isOrderAsc(),e=b.isOrderDesc();return d||e?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)},e=a.values.reduce(c,0),f=b.values.reduce(c,0);return d?f-e:e-f}):q(c.data_order)&&a.sort(c.data_order),a},l.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b===0})},l.filterRemoveNull=function(a){return a.filter(function(a){return p(a.value)})},l.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},l.hasDataLabel=function(){var a=this.config;return"boolean"==typeof a.data_labels&&a.data_labels?!0:"object"==typeof a.data_labels&&y(a.data_labels)?!0:!1},l.getDataLabelLength=function(a,b,c){var d=this,e=[0,0],f=1.3;return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=this.getBoundingClientRect()[c]*f}).remove(),e},l.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},l.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},l.findSameXOfValues=function(a,b){var c,d=a[b].x,e=[];for(c=b-1;c>=0&&d===a[c].x;c--)e.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)e.push(a[c]);return e},l.findClosestFromTargets=function(a,b){var c,d=this;return c=a.map(function(a){return d.findClosest(a.values,b)}),d.findClosest(c,b)},l.findClosest=function(a,b){var c,d=this,e=d.config.point_sensitivity;return a.filter(function(a){return a&&d.isBarType(a.id)}).forEach(function(a){var b=d.main.select("."+o.bars+d.getTargetSelectorSuffix(a.id)+" ."+o.bar+"-"+a.index).node();!c&&d.isWithinBar(b)&&(c=a)}),a.filter(function(a){return a&&!d.isBarType(a.id)}).forEach(function(a){var f=d.dist(a,b);e>f&&(e=f,c=a)}),c},l.dist=function(a,b){var c=this,d=c.config,e=d.axis_rotated?1:0,f=d.axis_rotated?0:1,g=c.circleY(a,a.index),h=c.x(a.x);return Math.sqrt(Math.pow(h-b[e],2)+Math.pow(g-b[f],2))},l.convertValuesToStep=function(a){var b,c=[].concat(a);if(!this.isCategorized())return a;for(b=a.length+1;b>0;b--)c[b]=c[b-1];return c[0]={x:c[0].x-1,value:c[0].value,id:c[0].id},c[a.length+1]={x:c[a.length].x+1,value:c[a.length].value,id:c[a.length].id},c},l.updateDataAttributes=function(a,b){var c=this,d=c.config,e=d["data_"+a];return"undefined"==typeof b?e:(Object.keys(b).forEach(function(a){e[a]=b[a]}),c.redraw({withLegend:!0}),e)},l.convertUrlToData=function(a,b,c,d){var e=this,f=b?b:"csv";e.d3.xhr(a,function(a,b){var g;if(!b)throw new Error(a.responseURL+" "+a.status+" ("+a.statusText+")");g="json"===f?e.convertJsonToData(JSON.parse(b.response),c):"tsv"===f?e.convertTsvToData(b.response):e.convertCsvToData(b.response),d.call(e,g)})},l.convertXsvToData=function(a,b){var c,d=b.parseRows(a);return 1===d.length?(c=[{}],d[0].forEach(function(a){c[0][a]=null})):c=b.parse(a),c},l.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)},l.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)},l.convertJsonToData=function(a,b){var c,d,e=this,f=[];return b?(b.x?(c=b.value.concat(b.x),e.config.data_x=b.x):c=b.value,f.push(c),a.forEach(function(a){var b=[];c.forEach(function(c){var d=s(a[c])?null:a[c];b.push(d)}),f.push(b)}),d=e.convertRowsToData(f)):(Object.keys(a).forEach(function(b){f.push([b].concat(a[b]))}),d=e.convertColumnsToData(f)),d},l.convertRowsToData=function(a){var b,c,d=a[0],e={},f=[];for(b=1;b<a.length;b++){for(e={},c=0;c<a[b].length;c++){if(s(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[d[c]]=a[b][c]}f.push(e)}return f},l.convertColumnsToData=function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)for(d=a[b][0],c=1;c<a[b].length;c++){if(s(e[c-1])&&(e[c-1]={}),s(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");
e[c-1][d]=a[b][c]}return e},l.convertDataToTargets=function(a,b){var c,d=this,e=d.config,f=d.d3.keys(a[0]).filter(d.isNotX,d),g=d.d3.keys(a[0]).filter(d.isX,d);return f.forEach(function(c){var f=d.getXKey(c);d.isCustomX()||d.isTimeSeries()?g.indexOf(f)>=0?d.data.xs[c]=(b&&d.data.xs[c]?d.data.xs[c]:[]).concat(a.map(function(a){return a[f]}).filter(p).map(function(a,b){return d.generateTargetX(a,c,b)})):e.data_x?d.data.xs[c]=d.getOtherTargetXs():y(e.data_xs)&&(d.data.xs[c]=d.getXValuesOfXKey(f,d.data.targets)):d.data.xs[c]=a.map(function(a,b){return b})}),f.forEach(function(a){if(!d.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),c=f.map(function(b,c){var f=e.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var h=d.getXKey(b),i=a[h],j=d.generateTargetX(i,b,g),k=null===a[b]||isNaN(a[b])?null:+a[b];return d.isCustomX()&&d.isCategorized()&&0===c&&i&&(0===g&&(e.axis_x_categories=[]),e.axis_x_categories.push(i)),(s(a[b])||d.data.xs[b].length<=g)&&(j=void 0),{x:j,value:k,id:f}}).filter(function(a){return t(a.x)})}}),c.forEach(function(a){var b;e.data_xSort&&(a.values=a.values.sort(function(a,b){var c=a.x||0===a.x?a.x:1/0,d=b.x||0===b.x?b.x:1/0;return c-d})),b=0,a.values.forEach(function(a){a.index=b++}),d.data.xs[a.id].sort(function(a,b){return a-b})}),d.hasNegativeValue=d.hasNegativeValueInTargets(c),d.hasPositiveValue=d.hasPositiveValueInTargets(c),e.data_type&&d.setTargetType(d.mapToIds(c).filter(function(a){return!(a in e.data_types)}),e.data_type),c.forEach(function(a){d.addCache(a.id_org,a)}),c},l.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},l.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},l.unload=function(a,b){var c=this;return b||(b=function(){}),a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}),a&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),void a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll("."+o.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):void b()},l.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},l.initEventRect=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.eventRects).style("fill-opacity",0)},l.redrawEventRect=function(){var a,b,c=this,d=c.config,e=c.isMultipleX(),f=c.main.select("."+o.eventRects).style("cursor",d.zoom_enabled?d.axis_rotated?"ns-resize":"ew-resize":null).classed(o.eventRectsMultiple,e).classed(o.eventRectsSingle,!e);f.selectAll("."+o.eventRect).remove(),c.eventRect=f.selectAll("."+o.eventRect),e?(a=c.eventRect.data([0]),c.generateEventRectsForMultipleXs(a.enter()),c.updateEventRect(a)):(b=c.getMaxDataCountTarget(c.data.targets),f.datum(b?b.values:[]),c.eventRect=f.selectAll("."+o.eventRect),a=c.eventRect.data(function(a){return a}),c.generateEventRectsForSingleX(a.enter()),c.updateEventRect(a),a.exit().remove())},l.updateEventRect=function(a){var b,c,d,e,f,g,h=this,i=h.config;a=a||h.eventRect.data(function(a){return a}),h.isMultipleX()?(b=0,c=0,d=h.width,e=h.height):(!h.isCustomX()&&!h.isTimeSeries()||h.isCategorized()?(f=h.getEventRectWidth(),g=function(a){return h.x(a.x)-f/2}):(h.updateXs(),f=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index);return null===b&&null===c?i.axis_rotated?h.height:h.width:(null===b&&(b=h.x.domain()[0]),null===c&&(c=h.x.domain()[1]),Math.max(0,(h.x(c)-h.x(b))/2))},g=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index),d=h.data.xs[a.id][a.index];return null===b&&null===c?0:(null===b&&(b=h.x.domain()[0]),(h.x(d)+h.x(b))/2)}),b=i.axis_rotated?0:g,c=i.axis_rotated?g:0,d=i.axis_rotated?h.width:f,e=i.axis_rotated?f:h.height),a.attr("class",h.classEvent.bind(h)).attr("x",b).attr("y",c).attr("width",d).attr("height",e)},l.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){var c=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(c,null,!0),b.expandBars(c,null,!0),b.main.selectAll("."+o.shape+"-"+c).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){var c=a.index;b.config&&(b.hasArcType()||(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+o.shape+"-"+c).each(function(a){d.data_onmouseout.call(b.api,a)})))}).on("mousemove",function(a){var e,f=a.index,g=b.svg.select("."+o.eventRect+"-"+f);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,f))&&(f-=1),e=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,f))}),d.tooltip_grouped&&(b.showTooltip(e,this),b.showXGridFocus(e)),(!d.tooltip_grouped||d.data_selection_enabled&&!d.data_selection_grouped)&&b.main.selectAll("."+o.shape+"-"+f).each(function(){c.select(this).classed(o.EXPANDED,!0),d.data_selection_enabled&&g.style("cursor",d.data_selection_grouped?"pointer":null),d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),d.data_selection_grouped||(b.unexpandCircles(f),b.unexpandBars(f)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&g.style("cursor","pointer"),d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(f,a.id,!0),b.expandBars(f,a.id,!0))}))}).on("click",function(a){var e=a.index;if(!b.hasArcType()&&b.toggleShape){if(b.cancelClick)return void(b.cancelClick=!1);b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,e))&&(e-=1),b.main.selectAll("."+o.shape+"-"+e).each(function(a){(d.data_selection_grouped||b.isWithinShape(this,a))&&(b.toggleShape(this,a,e),b.config.data_onclick.call(b.api,a,this))})}}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},l.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+o.eventRect).style("cursor",null),c.hideXGridFocus(),c.hideTooltip(),c.unexpandCircles(),c.unexpandBars()}var c=this,d=c.d3,e=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height).attr("class",o.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a,f,g,h,i=c.filterTargetsToShow(c.data.targets);if(!c.dragging&&!c.hasArcType(i)){if(a=d.mouse(this),f=c.findClosestFromTargets(i,a),!c.mouseover||f&&f.id===c.mouseover.id||(e.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),!f)return void b();g=c.isScatterType(f)||!e.tooltip_grouped?[f]:c.filterByX(i,f.x),h=g.map(function(a){return c.addName(a)}),c.showTooltip(h,this),e.point_focus_expand_enabled&&c.expandCircles(f.index,f.id,!0),c.expandBars(f.index,f.id,!0),c.showXGridFocus(h),(c.isBarType(f.id)||c.dist(f,a)<e.point_sensitivity)&&(c.svg.select("."+o.eventRect).style("cursor","pointer"),c.mouseover||(e.data_onmouseover.call(c.api,f),c.mouseover=f))}}).on("click",function(){var a,b,f=c.filterTargetsToShow(c.data.targets);c.hasArcType(f)||(a=d.mouse(this),b=c.findClosestFromTargets(f,a),b&&(c.isBarType(b.id)||c.dist(b,a)<e.point_sensitivity)&&c.main.selectAll("."+o.shapes+c.getTargetSelectorSuffix(b.id)).selectAll("."+o.shape+"-"+b.index).each(function(){(e.data_selection_grouped||c.isWithinShape(this,b))&&(c.toggleShape(this,b,b.index),c.config.data_onclick.call(c.api,b,this))}))}).call(e.data_selection_draggable&&c.drag?d.behavior.drag().origin(Object).on("drag",function(){c.drag(d.mouse(this))}).on("dragstart",function(){c.dragstart(d.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})},l.dispatchEvent=function(a,b,c){var e=this,f="."+o.eventRect+(e.isMultipleX()?"":"-"+b),g=e.main.select(f).node(),h=g.getBoundingClientRect(),i=h.left+(c?c[0]:0),j=h.top+(c?c[1]:0),k=document.createEvent("MouseEvents");k.initMouseEvent(a,!0,!0,d,0,i,j,i,j,!1,!1,!1,!1,0,null),g.dispatchEvent(k)},l.getCurrentWidth=function(){var a=this,b=a.config;return b.size_width?b.size_width:a.getParentWidth()},l.getCurrentHeight=function(){var a=this,b=a.config,c=b.size_height?b.size_height:a.getParentHeight();return c>0?c:320/(a.hasType("gauge")?2:1)},l.getCurrentPaddingTop=function(){var a=this,b=a.config,c=p(b.padding_top)?b.padding_top:0;return a.title&&a.title.node()&&(c+=a.getTitlePadding()),c},l.getCurrentPaddingBottom=function(){var a=this.config;return p(a.padding_bottom)?a.padding_bottom:0},l.getCurrentPaddingLeft=function(a){var b=this,c=b.config;return p(c.padding_left)?c.padding_left:c.axis_rotated?c.axis_x_show?Math.max(u(b.getAxisWidthByAxisId("x",a)),40):1:!c.axis_y_show||c.axis_y_inner?b.axis.getYAxisLabelPosition().isOuter?30:1:u(b.getAxisWidthByAxisId("y",a))},l.getCurrentPaddingRight=function(){var a=this,b=a.config,c=10,d=a.isLegendRight?a.getLegendWidth()+20:0;return p(b.padding_right)?b.padding_right+1:b.axis_rotated?c+d:!b.axis_y2_show||b.axis_y2_inner?2+d+(a.axis.getY2AxisLabelPosition().isOuter?20:0):u(a.getAxisWidthByAxisId("y2"))+d},l.getParentRectValue=function(a){for(var b,c=this.selectChart.node();c&&"BODY"!==c.tagName;){try{b=c.getBoundingClientRect()[a]}catch(d){"width"===a&&(b=c.offsetWidth)}if(b)break;c=c.parentNode}return b},l.getParentWidth=function(){return this.getParentRectValue("width")},l.getParentHeight=function(){var a=this.selectChart.style("height");return a.indexOf("px")>0?+a.replace("px",""):0},l.getSvgLeft=function(a){var b=this,c=b.config,d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,e=c.axis_rotated?o.axisX:o.axisY,f=b.main.select("."+e).node(),g=f&&d?f.getBoundingClientRect():{right:0},h=b.selectChart.node().getBoundingClientRect(),i=b.hasArcType(),j=g.right-h.left-(i?0:b.getCurrentPaddingLeft(a));return j>0?j:0},l.getAxisWidthByAxisId=function(a,b){var c=this,d=c.axis.getLabelPositionById(a);return c.axis.getMaxTickWidth(a,b)+(d.isInner?20:40)},l.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_x_tick_rotate)/180)),d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},l.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},l.getShapeIndices=function(a){var b,c,d=this,e=d.config,f={},g=0;return d.filterTargetsToShow(d.data.targets.filter(a,d)).forEach(function(a){for(b=0;b<e.data_groups.length;b++)if(!(e.data_groups[b].indexOf(a.id)<0))for(c=0;c<e.data_groups[b].length;c++)if(e.data_groups[b][c]in f){f[a.id]=f[e.data_groups[b][c]];break}s(f[a.id])&&(f[a.id]=g++)}),f.__max__=g-1,f},l.getShapeX=function(a,b,c,d){var e=this,f=d?e.subX:e.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?f(d.x)-a*(b/2-e):0}},l.getShapeY=function(a){var b=this;return function(c){var d=a?b.getSubYScale(c.id):b.getYScale(c.id);return d(c.value)}},l.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&(("undefined"==typeof e[g]||+e[g].x!==+a.x)&&(g=-1,e.forEach(function(b,c){b.x===a.x&&(g=c)})),g in e&&e[g].value*a.value>=0&&(j+=h(e[g].value)-i))}),j}},l.isWithinShape=function(a,b){var c,d=this,e=d.d3.select(a);return d.isTargetToShow(b.id)?"circle"===a.nodeName?c=d.isStepType(b)?d.isWithinStep(a,d.getYScale(b.id)(b.value)):d.isWithinCircle(a,1.5*d.pointSelectR(b)):"path"===a.nodeName&&(c=e.classed(o.bar)?d.isWithinBar(a):!0):c=!1,c},l.getInterpolate=function(a){var b=this,c=b.isInterpolationType(b.config.spline_interpolation_type)?b.config.spline_interpolation_type:"cardinal";return b.isSplineType(a)?c:b.isStepType(a)?b.config.line_step_type:"linear"},l.initLine=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.chartLines)},l.updateTargetsForLine=function(a){var b,c,d=this,e=d.config,f=d.classChartLine.bind(d),g=d.classLines.bind(d),h=d.classAreas.bind(d),i=d.classCircles.bind(d),j=d.classFocus.bind(d);b=d.main.select("."+o.chartLines).selectAll("."+o.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g),c.append("g").attr("class",h),c.append("g").attr("class",function(a){return d.generateClass(o.selectedCircles,a.id)}),c.append("g").attr("class",i).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){d.main.selectAll("."+o.selectedCircles+d.getTargetSelectorSuffix(a.id)).selectAll("."+o.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},l.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+o.lines).selectAll("."+o.line).data(b.lineData.bind(b)),b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),b.mainLine.exit().transition().duration(a).style("opacity",0).remove()},l.redrawLine=function(a,b){return[(b?this.mainLine.transition():this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},l.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(function(a){return null!=a.value})),function(a){var f,h=d.line_connectNull?c.filterRemoveNull(a.values):a.values,i=b?c.x:c.subX,j=g.call(c,a.id),k=0,l=0;return c.isLineType(a)?d.data_regions[a.id]?f=c.lineWithRegions(h,i,j,d.data_regions[a.id]):(c.isStepType(a)&&(h=c.convertValuesToStep(h)),f=e.interpolate(c.getInterpolate(a))(h)):(h[0]&&(k=i(h[0].x),l=j(h[0].value)),f=d.axis_rotated?"M "+l+" "+k:"M "+k+" "+l),f?f:"M 0 0"}},l.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},l.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g,h,i,j,k,l,m,n,o,p,q,r,u=this,v=u.config,w=-1,x="M",y=u.isCategorized()?.5:0,z=[];if(t(d))for(g=0;g<d.length;g++)z[g]={},s(d[g].start)?z[g].start=a[0].x:z[g].start=u.isTimeSeries()?u.parseDate(d[g].start):d[g].start,s(d[g].end)?z[g].end=a[a.length-1].x:z[g].end=u.isTimeSeries()?u.parseDate(d[g].end):d[g].end;for(q=v.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)},r=v.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},i=u.isTimeSeries()?function(a,d,e,g){var h,i=a.x.getTime(),j=d.x-a.x,l=new Date(i+j*e),m=new Date(i+j*(e+g));return h=v.axis_rotated?[[c(k(e)),b(l)],[c(k(e+g)),b(m)]]:[[b(l),c(k(e))],[b(m),c(k(e+g))]],f(h)}:function(a,d,e,g){var h;return h=v.axis_rotated?[[c(k(e),!0),b(j(e))],[c(k(e+g),!0),b(j(e+g))]]:[[b(j(e),!0),c(k(e))],[b(j(e+g),!0),c(k(e+g))]],f(h)},g=0;g<a.length;g++){if(s(z)||!e(a[g].x,z))x+=" "+q(a[g])+" "+r(a[g]);else for(j=u.getScale(a[g-1].x+y,a[g].x+y,u.isTimeSeries()),k=u.getScale(a[g-1].value,a[g].value),l=b(a[g].x)-b(a[g-1].x),m=c(a[g].value)-c(a[g-1].value),n=Math.sqrt(Math.pow(l,2)+Math.pow(m,2)),o=2/n,p=2*o,h=o;1>=h;h+=p)x+=i(a[g-1],a[g],h,o);w=a[g].x}return x},l.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+o.areas).selectAll("."+o.area).data(b.lineData.bind(b)),b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.mainArea.style("opacity",b.orgAreaOpacity),b.mainArea.exit().transition().duration(a).style("opacity",0).remove()},l.redrawArea=function(a,b){return[(b?this.mainArea.transition():this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},l.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},j=function(a,b){return d.data_groups.length>0?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var b,f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,g=0,h=0;return c.isAreaType(a)?(c.isStepType(a)&&(f=c.convertValuesToStep(f)),b=e.interpolate(c.getInterpolate(a))(f)):(f[0]&&(g=c.x(f[0].x),h=c.getYScale(a.id)(f[0].value)),b=d.axis_rotated?"M "+h+" "+g:"M "+g+" "+h),b?b:"M 0 0"}},l.getAreaBaseValue=function(){return 0},l.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},l.updateCircle=function(){var a=this;a.mainCircle=a.main.selectAll("."+o.circles).selectAll("."+o.circle).data(a.lineOrScatterData.bind(a)),a.mainCircle.enter().append("circle").attr("class",a.classCircle.bind(a)).attr("r",a.pointR.bind(a)).style("fill",a.color),a.mainCircle.style("opacity",a.initialOpacityForCircle.bind(a)),a.mainCircle.exit().remove()},l.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+o.selectedCircle);return[(c?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition():d).attr("cx",a).attr("cy",b)]},l.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},l.updateCircleY=function(){var a,b,c=this;c.config.data_groups.length>0?(a=c.getShapeIndices(c.isLineType),b=c.generateGetLinePoints(a),c.circleY=function(a,c){return b(a,c)[0][1]}):c.circleY=function(a){return c.getYScale(a.id)(a.value)}},l.getCircles=function(a,b){var c=this;return(b?c.main.selectAll("."+o.circles+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+o.circle+(p(a)?"-"+a:""))},l.expandCircles=function(a,b,c){var d=this,e=d.pointExpandedR.bind(d);c&&d.unexpandCircles(),d.getCircles(a,b).classed(o.EXPANDED,!0).attr("r",e)},l.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(o.EXPANDED)}).classed(o.EXPANDED,!1).attr("r",c)},l.pointR=function(a){var b=this,c=b.config;return b.isStepType(a)?0:q(c.point_r)?c.point_r(a):c.point_r},l.pointExpandedR=function(a){var b=this,c=b.config;return c.point_focus_expand_enabled?c.point_focus_expand_r?c.point_focus_expand_r:1.75*b.pointR(a):b.pointR(a)},l.pointSelectR=function(a){var b=this,c=b.config;return c.point_select_r?c.point_select_r:4*b.pointR(a)},l.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],2)+Math.pow(g-d[1],2))<b},l.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},l.initBar=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.chartBars)},l.updateTargetsForBar=function(a){var b,c,d=this,e=d.config,f=d.classChartBar.bind(d),g=d.classBars.bind(d),h=d.classFocus.bind(d);b=d.main.select("."+o.chartBars).selectAll("."+o.chartBar).data(a).attr("class",function(a){return f(a)+h(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null})},l.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+o.bars).selectAll("."+o.bar).data(c),b.mainBar.enter().append("path").attr("class",d).style("stroke",f).style("fill",f),b.mainBar.style("opacity",e),b.mainBar.exit().transition().duration(a).style("opacity",0).remove()},l.redrawBar=function(a,b){return[(b?this.mainBar.transition():this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]},l.getBarW=function(a,b){var c=this,d=c.config,e="number"==typeof d.bar_width?d.bar_width:b?a.tickInterval()*d.bar_width_ratio/b:0;return d.bar_width_max&&e>d.bar_width_max?d.bar_width_max:e},l.getBars=function(a,b){var c=this;return(b?c.main.selectAll("."+o.bars+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+o.bar+(p(a)?"-"+a:""))},l.expandBars=function(a,b,c){var d=this;c&&d.unexpandBars(),d.getBars(a,b).classed(o.EXPANDED,!0)},l.unexpandBars=function(a){var b=this;b.getBars(a).classed(o.EXPANDED,!1)},l.generateDrawBar=function(a,b){var c=this,d=c.config,e=c.generateGetBarPoints(a,b);return function(a,b){var c=e(a,b),f=d.axis_rotated?1:0,g=d.axis_rotated?0:1,h="M "+c[0][f]+","+c[0][g]+" L"+c[1][f]+","+c[1][g]+" L"+c[2][f]+","+c[2][g]+" L"+c[3][f]+","+c[3][g]+" z";return h}},l.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=b?c.getSubYScale:c.getYScale;return function(a,b){var d=j.call(c,a.id)(0),e=i(a,b)||d,k=g(a),l=h(a);return c.config.axis_rotated&&(0<a.value&&d>l||a.value<0&&l>d)&&(l=d),[[k,e],[k,l-(d-e)],[k+f,l-(d-e)],[k+f,e]]}},l.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),e=a.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),h=c.width,i=c.height,j=2,k=f-j,l=f+h+j,m=g+i+j,n=g-j;return k<b[0]&&b[0]<l&&n<b[1]&&b[1]<m},l.initText=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.chartTexts),a.mainText=a.d3.selectAll([])},l.updateTargetsForText=function(a){var b,c,d=this,e=d.classChartText.bind(d),f=d.classTexts.bind(d),g=d.classFocus.bind(d);b=d.main.select("."+o.chartTexts).selectAll("."+o.chartText).data(a).attr("class",function(a){return e(a)+g(a)}),c=b.enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",f)},l.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),e=b.classText.bind(b);b.mainText=b.main.selectAll("."+o.texts).selectAll("."+o.text).data(d),b.mainText.enter().append("text").attr("class",e).attr("text-anchor",function(a){return c.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0),b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)}),b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()},l.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},l.getTextRect=function(a,b,c){var d,e=this.d3.select("body").append("div").classed("c3",!0),f=e.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g=this.d3.select(c).style("font");return f.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).style("font",g).text(a).each(function(){d=this.getBoundingClientRect()}),e.remove(),d},l.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},l.getXForText=function(a,b,c){var d,e,f=this,g=c.getBoundingClientRect();return f.config.axis_rotated?(e=f.isBarType(b)?4:6,d=a[2][1]+e*(b.value<0?-1:1)):d=f.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(d>f.width?d=f.width-g.width:0>d&&(d=4)),d},l.getYForText=function(a,b,c){var d,e=this,f=c.getBoundingClientRect();return e.config.axis_rotated?d=(a[0][0]+a[2][0]+.6*f.height)/2:(d=a[2][1],b.value<0||0===b.value&&!e.hasPositiveValue?(d+=f.height,e.isBarType(b)&&e.isSafari()?d-=3:!e.isBarType(b)&&e.isChrome()&&(d+=3)):d+=e.isBarType(b)?-3:-6),null!==b.value||e.config.axis_rotated||(d<f.height?d=f.height:d>this.height&&(d=this.height-4)),d},l.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},l.hasType=function(a,b){var c=this,d=c.config.data_types,e=!1;return b=b||c.data.targets,b&&b.length?b.forEach(function(b){var c=d[b.id];(c&&c.indexOf(a)>=0||!c&&"line"===a)&&(e=!0)}):Object.keys(d).length?Object.keys(d).forEach(function(b){d[b]===a&&(e=!0)}):e=c.config.data_type===a,e},l.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},l.isLineType=function(a){var b=this.config,c=r(a)?a:a.id;return!b.data_types[c]||["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])>=0},l.isStepType=function(a){var b=r(a)?a:a.id;return["step","area-step"].indexOf(this.config.data_types[b])>=0},l.isSplineType=function(a){var b=r(a)?a:a.id;return["spline","area-spline"].indexOf(this.config.data_types[b])>=0},l.isAreaType=function(a){var b=r(a)?a:a.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[b])>=0},l.isBarType=function(a){var b=r(a)?a:a.id;return"bar"===this.config.data_types[b]},l.isScatterType=function(a){var b=r(a)?a:a.id;return"scatter"===this.config.data_types[b]},l.isPieType=function(a){var b=r(a)?a:a.id;return"pie"===this.config.data_types[b]},l.isGaugeType=function(a){var b=r(a)?a:a.id;return"gauge"===this.config.data_types[b]},l.isDonutType=function(a){var b=r(a)?a:a.id;return"donut"===this.config.data_types[b]},l.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},l.lineData=function(a){return this.isLineType(a)?[a]:[]},l.arcData=function(a){return this.isArcType(a.data)?[a]:[]},l.barData=function(a){return this.isBarType(a)?a.values:[]},l.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},l.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},l.isInterpolationType=function(a){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(a)>=0},l.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",o.grid),b.grid_x_show&&a.grid.append("g").attr("class",o.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",o.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",o.xgridFocus).append("line").attr("class",o.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},l.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",o.grid+" "+o.gridLines),a.gridLines.append("g").attr("class",o.xgridLines),a.gridLines.append("g").attr("class",o.ygridLines),a.xgridLines=b.selectAll([])},l.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height},b.xgrid=b.main.select("."+o.xgrids).selectAll("."+o.xgrid).data(e),b.xgrid.enter().append("line").attr("class",o.xgrid),a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1}),b.xgrid.exit().remove()},l.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks);a.ygrid=a.main.select("."+o.ygrids).selectAll("."+o.ygrid).data(c),a.ygrid.enter().append("line").attr("class",o.ygrid),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},l.gridTextAnchor=function(a){return a.position?a.position:"end"},l.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4},l.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},l.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},l.updateGrid=function(a){var b,c,d,e=this,f=e.main,g=e.config;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),f.select("line."+o.xgridFocus).style("visibility","hidden"),g.grid_x_show&&e.updateXGrid(),e.xgridLines=f.select("."+o.xgridLines).selectAll("."+o.xgridLine).data(g.grid_x_lines),b=e.xgridLines.enter().append("g").attr("class",function(a){return o.xgridLine+(a["class"]?" "+a["class"]:"")}),b.append("line").style("opacity",0),b.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"":"rotate(-90)").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),e.xgridLines.exit().transition().duration(a).style("opacity",0).remove(),g.grid_y_show&&e.updateYGrid(),e.ygridLines=f.select("."+o.ygridLines).selectAll("."+o.ygridLine).data(g.grid_y_lines),c=e.ygridLines.enter().append("g").attr("class",function(a){return o.ygridLine+(a["class"]?" "+a["class"]:"")}),c.append("line").style("opacity",0),c.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"rotate(-90)":"").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),d=e.yv.bind(e),e.ygridLines.select("line").transition().duration(a).attr("x1",g.axis_rotated?d:0).attr("x2",g.axis_rotated?d:e.width).attr("y1",g.axis_rotated?0:d).attr("y2",g.axis_rotated?e.height:d).style("opacity",1),e.ygridLines.select("text").transition().duration(a).attr("x",g.axis_rotated?e.xGridTextX.bind(e):e.yGridTextX.bind(e)).attr("y",d).text(function(a){return a.text}).style("opacity",1),e.ygridLines.exit().transition().duration(a).style("opacity",0).remove();
},l.redrawGrid=function(a){var b=this,c=b.config,d=b.xv.bind(b),e=b.xgridLines.select("line"),f=b.xgridLines.select("text");return[(a?e.transition():e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?b.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:b.height).style("opacity",1),(a?f.transition():f).attr("x",c.axis_rotated?b.yGridTextX.bind(b):b.xGridTextX.bind(b)).attr("y",d).text(function(a){return a.text}).style("opacity",1)]},l.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&p(a.value)}),e=b.main.selectAll("line."+o.xgridFocus),f=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(e.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",f).attr(c.axis_rotated?"y2":"x2",f),b.smoothLines(e,"grid")))},l.hideXGridFocus=function(){this.main.select("line."+o.xgridFocus).style("visibility","hidden")},l.updateXgridFocus=function(){var a=this,b=a.config;a.main.select("line."+o.xgridFocus).attr("x1",b.axis_rotated?0:-10).attr("x2",b.axis_rotated?a.width:-10).attr("y1",b.axis_rotated?-10:0).attr("y2",b.axis_rotated?-10:a.height)},l.generateGridData=function(a,b){var c,d,e,f,g=this,h=[],i=g.main.select("."+o.axisX).selectAll(".tick").size();if("year"===a)for(c=g.getXDomain(),d=c[0].getFullYear(),e=c[1].getFullYear(),f=d;e>=f;f++)h.push(new Date(f+"-01-01 00:00:00"));else h=b.ticks(10),h.length>i&&(h=h.filter(function(a){return(""+a).indexOf(".")<0}));return h},l.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])&&(c=!0)}),c}:function(){return!0}},l.removeGridLines=function(a,b){var c=this,d=c.config,e=c.getGridFilterToRemove(a),f=function(a){return!e(a)},g=b?o.xgridLines:o.ygridLines,h=b?o.xgridLine:o.ygridLine;c.main.select("."+g).selectAll("."+h).filter(e).transition().duration(d.transition_duration).style("opacity",0).remove(),b?d.grid_x_lines=d.grid_x_lines.filter(f):d.grid_y_lines=d.grid_y_lines.filter(f)},l.initTooltip=function(){var a,b=this,c=b.config;if(b.tooltip=b.selectChart.style("position","relative").append("div").attr("class",o.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),c.tooltip_init_show){if(b.isTimeSeries()&&r(c.tooltip_init_x)){for(c.tooltip_init_x=b.parseDate(c.tooltip_init_x),a=0;a<b.data.targets[0].values.length&&b.data.targets[0].values[a].x-c.tooltip_init_x!==0;a++);c.tooltip_init_x=a}b.tooltip.html(c.tooltip_contents.call(b,b.data.targets.map(function(a){return b.addName(a.values[c.tooltip_init_x])}),b.axis.getXAxisTickFormat(),b.getYFormat(b.hasArcType()),b.color)),b.tooltip.style("top",c.tooltip_init_position.top).style("left",c.tooltip_init_position.left).style("display","block")}},l.getTooltipContent=function(a,b,c,d){var e,f,g,h,i,j,k=this,l=k.config,m=l.tooltip_format_title||b,n=l.tooltip_format_name||function(a){return a},o=l.tooltip_format_value||c,p=k.isOrderAsc();if(0===l.data_groups.length)a.sort(function(a,b){return p?a.value-b.value:b.value-a.value});else{var q=k.orderTargets(k.data.targets).map(function(a){return a.id});a.sort(function(a,b){return a.value>0&&b.value>0?p?q.indexOf(a.id)-q.indexOf(b.id):q.indexOf(b.id)-q.indexOf(a.id):p?a.value-b.value:b.value-a.value})}for(f=0;f<a.length;f++)if(a[f]&&(a[f].value||0===a[f].value)&&(e||(g=m?m(a[f].x):a[f].x,e="<table class='"+k.CLASS.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),h=o(a[f].value,a[f].ratio,a[f].id,a[f].index),void 0!==h)){if(null===a[f].name)continue;i=n(a[f].name,a[f].ratio,a[f].id,a[f].index),j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+k.CLASS.tooltipName+"-"+k.getTargetSelectorSuffix(a[f].id)+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"}return e+"</table>"},l.tooltipPosition=function(a,b,c,d){var e,f,g,h,i,j=this,k=j.config,l=j.d3,m=j.hasArcType(),n=l.mouse(d);return m?(f=(j.width-(j.isLegendRight?j.getLegendWidth():0))/2+n[0],h=j.height/2+n[1]+20):(e=j.getSvgLeft(!0),k.axis_rotated?(f=e+n[0]+100,g=f+b,i=j.currentWidth-j.getCurrentPaddingRight(),h=j.x(a[0].x)+20):(f=e+j.getCurrentPaddingLeft(!0)+j.x(a[0].x)+20,g=f+b,i=e+j.currentWidth-j.getCurrentPaddingRight(),h=n[1]+15),g>i&&(f-=g-i+20),h+c>j.currentHeight&&(h-=c+30)),0>h&&(h=0),{top:h,left:f}},l.showTooltip=function(a,b){var c,d,e,f=this,g=f.config,h=f.hasArcType(),i=a.filter(function(a){return a&&p(a.value)}),j=g.tooltip_position||l.tooltipPosition;0!==i.length&&g.tooltip_show&&(f.tooltip.html(g.tooltip_contents.call(f,a,f.axis.getXAxisTickFormat(),f.getYFormat(h),f.color)).style("display","block"),c=f.tooltip.property("offsetWidth"),d=f.tooltip.property("offsetHeight"),e=j.call(this,i,c,d,b),f.tooltip.style("top",e.top+"px").style("left",e.left+"px"))},l.hideTooltip=function(){this.tooltip.style("display","none")},l.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},l.updateLegendWithDefaults=function(){var a=this;a.updateLegend(a.mapToIds(a.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},l.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:NaN,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},l.transformLegend=function(a){var b=this;(a?b.legend.transition():b.legend).attr("transform",b.getTranslate("legend"))},l.updateLegendStep=function(a){this.legendStep=a},l.updateLegendItemWidth=function(a){this.legendItemWidth=a},l.updateLegendItemHeight=function(a){this.legendItemHeight=a},l.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},l.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},l.opacityForLegend=function(a){return a.classed(o.legendItemHidden)?null:1},l.opacityForUnfocusedLegend=function(a){return a.classed(o.legendItemHidden)?null:.3},l.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+o.legendItem).filter(function(b){return a.indexOf(b)>=0}).classed(o.legendItemFocused,b).transition().duration(100).style("opacity",function(){var a=b?c.opacityForLegend:c.opacityForUnfocusedLegend;return a.call(c,c.d3.select(this))})},l.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+o.legendItem).classed(o.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},l.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},l.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&x(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},l.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},l.updateLegend=function(a,b,c){function d(a,b){return x.legendItemTextBox[b]||(x.legendItemTextBox[b]=x.getTextRect(a.textContent,o.legendItem,a)),x.legendItemTextBox[b]}function e(b,c,e){function f(a,b){b||(g=(o-G-n)/2,E>g&&(g=(o-n)/2,G=0,M++)),L[a]=M,K[M]=x.isLegendInset?10:g,H[a]=G,G+=n}var g,h,i=0===e,j=e===a.length-1,k=d(b,c),l=k.width+F+(!j||x.isLegendRight||x.isLegendInset?B:0)+y.legend_padding,m=k.height+A,n=x.isLegendRight||x.isLegendInset?m:l,o=x.isLegendRight||x.isLegendInset?x.getLegendHeight():x.getLegendWidth();return i&&(G=0,M=0,C=0,D=0),y.legend_show&&!x.isLegendToShow(c)?void(I[c]=J[c]=L[c]=H[c]=0):(I[c]=l,J[c]=m,(!C||l>=C)&&(C=l),(!D||m>=D)&&(D=m),h=x.isLegendRight||x.isLegendInset?D:C,void(y.legend_equally?(Object.keys(I).forEach(function(a){I[a]=C}),Object.keys(J).forEach(function(a){J[a]=D}),g=(o-h*a.length)/2,E>g?(G=0,M=0,a.forEach(function(a){f(a)})):f(c,!0)):f(c)))}var f,g,h,i,j,k,l,m,n,p,q,r,s,u,v,w,x=this,y=x.config,A=4,B=10,C=0,D=0,E=10,F=y.legend_item_tile_width+5,G=0,H={},I={},J={},K=[0],L={},M=0;a=a.filter(function(a){return!t(y.data_names[a])||null!==y.data_names[a]}),b=b||{},q=z(b,"withTransition",!0),r=z(b,"withTransitionForTransform",!0),x.isLegendInset&&(M=y.legend_inset_step?y.legend_inset_step:a.length,x.updateLegendStep(M)),x.isLegendRight?(f=function(a){return C*L[a]},i=function(a){return K[L[a]]+H[a]}):x.isLegendInset?(f=function(a){return C*L[a]+10},i=function(a){return K[L[a]]+H[a]}):(f=function(a){return K[L[a]]+H[a]},i=function(a){return D*L[a]}),g=function(a,b){return f(a,b)+4+y.legend_item_tile_width},j=function(a,b){return i(a,b)+9},h=function(a,b){return f(a,b)},k=function(a,b){return i(a,b)-5},l=function(a,b){return f(a,b)-2},m=function(a,b){return f(a,b)-2+y.legend_item_tile_width},n=function(a,b){return i(a,b)+4},p=x.legend.selectAll("."+o.legendItem).data(a).enter().append("g").attr("class",function(a){return x.generateClass(o.legendItem,a)}).style("visibility",function(a){return x.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){y.legend_item_onclick?y.legend_item_onclick.call(x,a):x.d3.event.altKey?(x.api.hide(),x.api.show(a)):(x.api.toggle(a),x.isTargetToShow(a)?x.api.focus(a):x.api.revert())}).on("mouseover",function(a){y.legend_item_onmouseover?y.legend_item_onmouseover.call(x,a):(x.d3.select(this).classed(o.legendItemFocused,!0),!x.transiting&&x.isTargetToShow(a)&&x.api.focus(a))}).on("mouseout",function(a){y.legend_item_onmouseout?y.legend_item_onmouseout.call(x,a):(x.d3.select(this).classed(o.legendItemFocused,!1),x.api.revert())}),p.append("text").text(function(a){return t(y.data_names[a])?y.data_names[a]:a}).each(function(a,b){e(this,a,b)}).style("pointer-events","none").attr("x",x.isLegendRight||x.isLegendInset?g:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:j),p.append("rect").attr("class",o.legendItemEvent).style("fill-opacity",0).attr("x",x.isLegendRight||x.isLegendInset?h:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:k),p.append("line").attr("class",o.legendItemTile).style("stroke",x.color).style("pointer-events","none").attr("x1",x.isLegendRight||x.isLegendInset?l:-200).attr("y1",x.isLegendRight||x.isLegendInset?-200:n).attr("x2",x.isLegendRight||x.isLegendInset?m:-200).attr("y2",x.isLegendRight||x.isLegendInset?-200:n).attr("stroke-width",y.legend_item_tile_height),w=x.legend.select("."+o.legendBackground+" rect"),x.isLegendInset&&C>0&&0===w.size()&&(w=x.legend.insert("g","."+o.legendItem).attr("class",o.legendBackground).append("rect")),s=x.legend.selectAll("text").data(a).text(function(a){return t(y.data_names[a])?y.data_names[a]:a}).each(function(a,b){e(this,a,b)}),(q?s.transition():s).attr("x",g).attr("y",j),u=x.legend.selectAll("rect."+o.legendItemEvent).data(a),(q?u.transition():u).attr("width",function(a){return I[a]}).attr("height",function(a){return J[a]}).attr("x",h).attr("y",k),v=x.legend.selectAll("line."+o.legendItemTile).data(a),(q?v.transition():v).style("stroke",x.color).attr("x1",l).attr("y1",n).attr("x2",m).attr("y2",n),w&&(q?w.transition():w).attr("height",x.getLegendHeight()-12).attr("width",C*(M+1)+10),x.legend.selectAll("."+o.legendItem).classed(o.legendItemHidden,function(a){return!x.isTargetToShow(a)}),x.updateLegendItemWidth(C),x.updateLegendItemHeight(D),x.updateLegendStep(M),x.updateSizes(),x.updateScales(),x.updateSvgSize(),x.transformAll(r,c),x.legendHasRendered=!0},l.initTitle=function(){var a=this;a.title=a.svg.append("text").text(a.config.title_text).attr("class",a.CLASS.title)},l.redrawTitle=function(){var a=this;a.title.attr("x",a.xForTitle.bind(a)).attr("y",a.yForTitle.bind(a))},l.xForTitle=function(){var a,b=this,c=b.config,d=c.title_position||"left";return a=d.indexOf("right")>=0?b.currentWidth-b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).width-c.title_padding.right:d.indexOf("center")>=0?(b.currentWidth-b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).width)/2:c.title_padding.left},l.yForTitle=function(){var a=this;return a.config.title_padding.top+a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).height},l.getTitlePadding=function(){var a=this;return a.yForTitle()+a.config.title_padding.bottom},f(e,i),i.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",o.axis+" "+o.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",o.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),a.axes.y=c.append("g").attr("class",o.axis+" "+o.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",o.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=c.append("g").attr("class",o.axis+" "+o.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",o.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},i.prototype.getXAxis=function(a,b,c,d,e,f,g){var h=this.owner,i=h.config,k={isCategory:h.isCategorized(),withOuterTick:e,tickMultiline:i.axis_x_tick_multiline,tickWidth:i.axis_x_tick_width,tickTextRotate:g?0:i.axis_x_tick_rotate,withoutTransition:f},l=j(h.d3,k).scale(a).orient(b);return h.isTimeSeries()&&d&&"function"!=typeof d&&(d=d.map(function(a){return h.parseDate(a)})),l.tickFormat(c).tickValues(d),h.isCategorized()&&(l.tickCentered(i.axis_x_tick_centered),x(i.axis_x_tick_culling)&&(i.axis_x_tick_culling=!1)),l},i.prototype.updateXAxisTickValues=function(a,b){var c,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(c=this.generateTickValues(d.mapTargetsToUniqueXs(a),e.axis_x_tick_count,d.isTimeSeries())),b?b.tickValues(c):(d.xAxis.tickValues(c),d.subXAxis.tickValues(c)),c},i.prototype.getYAxis=function(a,b,c,d,e,f){var g={withOuterTick:e,withoutTransition:f},h=this.owner,i=h.d3,k=h.config,l=j(i,g).scale(a).orient(b).tickFormat(c);return h.isTimeSeriesY()?l.ticks(i.time[k.axis_y_tick_time_value],k.axis_y_tick_time_interval):l.tickValues(d),l},i.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"},i.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return 0>a?a.toFixed(0):a};return b.axis_x_tick_format&&(q(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""})),q(c)?function(b){return c.call(a,b)}:c},i.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0},i.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},i.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},i.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},i.prototype.getLabelOptionByAxisId=function(a){var b,c=this.owner,d=c.config;return"y"===a?b=d.axis_y_label:"y2"===a?b=d.axis_y2_label:"x"===a&&(b=d.axis_x_label),b},i.prototype.getLabelText=function(a){var b=this.getLabelOptionByAxisId(a);return r(b)?b:b?b.text:null},i.prototype.setLabelText=function(a,b){var c=this.owner,d=c.config,e=this.getLabelOptionByAxisId(a);r(e)?"y"===a?d.axis_y_label=b:"y2"===a?d.axis_y2_label=b:"x"===a&&(d.axis_x_label=b):e&&(e.text=b)},i.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),d=c&&"object"==typeof c&&c.position?c.position:b;return{isInner:d.indexOf("inner")>=0,isOuter:d.indexOf("outer")>=0,isLeft:d.indexOf("left")>=0,isCenter:d.indexOf("center")>=0,isRight:d.indexOf("right")>=0,isTop:d.indexOf("top")>=0,isMiddle:d.indexOf("middle")>=0,isBottom:d.indexOf("bottom")>=0}},i.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},i.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},i.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},i.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},i.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},i.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},i.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},i.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0},i.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"},i.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"},i.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},i.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},i.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},i.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},i.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},i.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},i.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-this.getMaxTickWidth("x"):c.isInner?"-0.5em":b.axis_x_height?b.axis_x_height-10:"3em"},i.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},i.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},i.prototype.textAnchorForXAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(!a.config.axis_rotated,this.getXAxisLabelPosition())},i.prototype.textAnchorForYAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getYAxisLabelPosition())},i.prototype.textAnchorForY2AxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getY2AxisLabelPosition())},i.prototype.getMaxTickWidth=function(a,b){var c,d,e,f,g,h=this.owner,i=h.config,j=0;return b&&h.currentMaxTickWidths[a]?h.currentMaxTickWidths[a]:(h.svg&&(c=h.filterTargetsToShow(h.data.targets),"y"===a?(d=h.y.copy().domain(h.getYDomain(c,"y")),e=this.getYAxis(d,h.yOrient,i.axis_y_tick_format,h.yAxisTickValues,!1,!0)):"y2"===a?(d=h.y2.copy().domain(h.getYDomain(c,"y2")),e=this.getYAxis(d,h.y2Orient,i.axis_y2_tick_format,h.y2AxisTickValues,!1,!0)):(d=h.x.copy().domain(h.getXDomain(c)),e=this.getXAxis(d,h.xOrient,h.xAxisTickFormat,h.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(c,e)),f=h.d3.select("body").append("div").classed("c3",!0),g=f.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g.append("g").call(e).each(function(){h.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();j<a.width&&(j=a.width)}),f.remove()})),h.currentMaxTickWidths[a]=0>=j?h.currentMaxTickWidths[a]:j,h.currentMaxTickWidths[a])},i.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+o.axisX+" ."+o.axisXLabel),d=b.main.select("."+o.axisY+" ."+o.axisYLabel),e=b.main.select("."+o.axisY2+" ."+o.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(a?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},i.prototype.getPadding=function(a,b,c,d){var e="number"==typeof a?a:a[b];return p(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,d):c},i.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner,d=c.config.axis_rotated?c.width:c.height;return b*(a/d)},i.prototype.generateTickValues=function(a,b,c){var d,e,f,g,h,i,j,k=a;if(b)if(d=q(b)?b():b,1===d)k=[a[0]];else if(2===d)k=[a[0],a[a.length-1]];else if(d>2){for(g=d-2,e=a[0],f=a[a.length-1],h=(f-e)/(g+1),k=[e],i=0;g>i;i++)j=+e+h*(i+1),k.push(c?new Date(j):j);k.push(f)}return c||(k=k.sort(function(a,b){return a-b})),k},i.prototype.generateTransitions=function(a){var b=this.owner,c=b.axes;return{axisX:a?c.x.transition().duration(a):c.x,axisY:a?c.y.transition().duration(a):c.y,axisY2:a?c.y2.transition().duration(a):c.y2,axisSubX:a?c.subx.transition().duration(a):c.subx}},i.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1),c.axes.y.style("opacity",b?0:1),c.axes.y2.style("opacity",b?0:1),c.axes.subx.style("opacity",b?0:1),a.axisX.call(c.xAxis),a.axisY.call(c.yAxis),a.axisY2.call(c.y2Axis),a.axisSubX.call(c.subXAxis)},l.getClipPath=function(a){var b=d.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(b?"":document.URL.split("#")[0])+"#"+a+")"},l.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},l.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},l.getAxisClipY=function(a){return a?-20:-this.margin.top},l.getXAxisClipX=function(){var a=this;return a.getAxisClipX(!a.config.axis_rotated)},l.getXAxisClipY=function(){var a=this;return a.getAxisClipY(!a.config.axis_rotated)},l.getYAxisClipX=function(){var a=this;return a.config.axis_y_inner?-1:a.getAxisClipX(a.config.axis_rotated)},l.getYAxisClipY=function(){var a=this;return a.getAxisClipY(a.config.axis_rotated)},l.getAxisClipWidth=function(a){var b=this,c=Math.max(30,b.margin.left),d=Math.max(30,b.margin.right);return a?b.width+2+c+d:b.margin.left+20},l.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},l.getXAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(!a.config.axis_rotated)},l.getXAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(!a.config.axis_rotated)},l.getYAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(a.config.axis_rotated)+(a.config.axis_y_inner?20:0)},l.getYAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(a.config.axis_rotated)},l.initPie=function(){var a=this,b=a.d3,c=a.config;a.pie=b.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)}),c.data_order||a.pie.sort(null)},l.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2,a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0},l.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},l.updateAngle=function(a){var b,c,d=this,e=d.config,f=!1,g=0,h=e.gauge_min,i=e.gauge_max;return d.pie(d.filterTargetsToShow(d.data.targets)).forEach(function(b){f||b.data.id!==a.data.id||(f=!0,a=b,a.index=g),g++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),d.isGaugeType(a.data)&&(b=Math.PI/(i-h),c=a.value<h?0:a.value<i?a.value-h:i-h,a.startAngle=-1*(Math.PI/2),a.endAngle=a.startAngle+b*c),f?a:null},l.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c),e?b(e):"M 0 0")};return c.centroid=b.centroid,c},l.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){var d=b.updateAngle(a);return d?c(d):"M 0 0"}},l.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},l.transformForArcLabel=function(a){var b,c,d,e,f,g=this,h=g.updateAngle(a),i="";return h&&!g.hasType("gauge")&&(b=this.svgArc.centroid(h),c=isNaN(b[0])?0:b[0],d=isNaN(b[1])?0:b[1],e=Math.sqrt(c*c+d*d),f=g.radius&&e?(36/g.radius>.375?1.175-36/g.radius:.8)*g.radius/e:0,i="translate("+c*f+","+d*f+")"),i},l.getArcRatio=function(a){var b=this,c=b.hasType("gauge")?Math.PI:2*Math.PI;return a?(a.endAngle-a.startAngle)/c:null},l.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},l.textForArcLabel=function(a){var b,c,d,e,f,g=this;return g.shouldShowArcLabel()?(b=g.updateAngle(a),c=b?b.value:null,d=g.getArcRatio(b),e=a.data.id,g.hasType("gauge")||g.meetsArcLabelThreshold(d)?(f=g.getArcLabelFormat(),f?f(c,d,e):g.defaultArcValueFormat(c,d)):""):""},l.expandArc=function(a){var b,c=this;return c.transiting?void(b=d.setInterval(function(){c.transiting||(d.clearInterval(b),c.legend.selectAll(".c3-legend-item-focused").size()>0&&c.expandArc(a))},10)):(a=c.mapToTargetIds(a),void c.svg.selectAll(c.selectorTargets(a,"."+o.chartArc)).each(function(a){c.shouldExpand(a.data.id)&&c.d3.select(this).selectAll("path").transition().duration(c.expandDuration(a.data.id)).attr("d",c.svgArcExpanded).transition().duration(2*c.expandDuration(a.data.id)).attr("d",c.svgArcExpandedSub).each(function(a){c.isDonutType(a.data)})}))},l.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+o.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+o.arc).style("opacity",1))},l.expandDuration=function(a){var b=this,c=b.config;return b.isDonutType(a)?c.donut_expand_duration:b.isGaugeType(a)?c.gauge_expand_duration:b.isPieType(a)?c.pie_expand_duration:50},l.shouldExpand=function(a){var b=this,c=b.config;return b.isDonutType(a)&&c.donut_expand||b.isGaugeType(a)&&c.gauge_expand||b.isPieType(a)&&c.pie_expand},l.shouldShowArcLabel=function(){var a=this,b=a.config,c=!0;return a.hasType("donut")?c=b.donut_label_show:a.hasType("pie")&&(c=b.pie_label_show),c},l.meetsArcLabelThreshold=function(a){var b=this,c=b.config,d=b.hasType("donut")?c.donut_label_threshold:c.pie_label_threshold;return a>=d},l.getArcLabelFormat=function(){var a=this,b=a.config,c=b.pie_label_format;return a.hasType("gauge")?c=b.gauge_label_format:a.hasType("donut")&&(c=b.donut_label_format),c},l.getArcTitle=function(){var a=this;return a.hasType("donut")?a.config.donut_title:""},l.updateTargetsForArc=function(a){var b,c,d=this,e=d.main,f=d.classChartArc.bind(d),g=d.classArcs.bind(d),h=d.classFocus.bind(d);b=e.select("."+o.chartArcs).selectAll("."+o.chartArc).data(d.pie(a)).attr("class",function(a){return f(a)+h(a.data)}),c=b.enter().append("g").attr("class",f),c.append("g").attr("class",g),c.append("text").attr("dy",d.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},l.initArc=function(){var a=this;a.arcs=a.main.select("."+o.chart).append("g").attr("class",o.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",o.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},l.redrawArc=function(a,b,c){var d,e=this,f=e.d3,g=e.config,h=e.main;d=h.selectAll("."+o.arcs).selectAll("."+o.arc).data(e.arcData.bind(e)),d.enter().append("path").attr("class",e.classArc.bind(e)).style("fill",function(a){return e.color(a.data)}).style("cursor",function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){e.isGaugeType(a.data)&&(a.startAngle=a.endAngle=-1*(Math.PI/2)),this._current=a}),d.attr("transform",function(a){return!e.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),b&&(c=e.convertToArcData(b),e.expandArc(b.data.id),e.api.focus(b.data.id),e.toggleFocusLegend(b.data.id,!0),e.config.data_onmouseover(c,this)))}:null).on("mousemove",g.interaction_enabled?function(a){var b,c,d=e.updateAngle(a);d&&(b=e.convertToArcData(d),c=[b],e.showTooltip(c,this))}:null).on("mouseout",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),b&&(c=e.convertToArcData(b),e.unexpandArc(b.data.id),e.api.revert(),e.revertLegend(),e.hideTooltip(),e.config.data_onmouseout(c,this)))}:null).on("click",g.interaction_enabled?function(a,b){var c,d=e.updateAngle(a);d&&(c=e.convertToArcData(d),e.toggleShape&&e.toggleShape(this,c,b),e.config.data_onclick.call(e.api,c,this))}:null).each(function(){e.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b,c=e.updateAngle(a);return c?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),b=f.interpolate(this._current,c),this._current=b(0),function(c){var d=b(c);return d.data=a.data,e.getArc(d,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return e.levelColor?e.levelColor(a.data.values[0].value):e.color(a.data.id)}).style("opacity",1).call(e.endall,function(){e.transiting=!1}),d.exit().transition().duration(b).style("opacity",0).remove(),h.selectAll("."+o.chartArc).select("text").style("opacity",0).attr("class",function(a){return e.isGaugeType(a.data)?o.gaugeValue:""}).text(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(a){return e.isGaugeType(a.data)?Math.round(e.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return e.isTargetToShow(a.data.id)&&e.isArcType(a.data)?1:0}),h.select("."+o.chartArcsTitle).style("opacity",e.hasType("donut")||e.hasType("gauge")?1:0),e.hasType("gauge")&&(e.arcs.select("."+o.chartArcsBackground).attr("d",function(){var a={data:[{value:g.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return e.getArc(a,!0,!0);
}),e.arcs.select("."+o.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?g.gauge_units:""),e.arcs.select("."+o.chartArcsGaugeMin).attr("dx",-1*(e.innerRadius+(e.radius-e.innerRadius)/2)+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),e.arcs.select("."+o.chartArcsGaugeMax).attr("dx",e.innerRadius+(e.radius-e.innerRadius)/2+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_max:""))},l.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",o.chartArcsBackground),a.append("text").attr("class",o.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",o.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",o.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},l.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},l.initRegion=function(){var a=this;a.region=a.main.append("g").attr("clip-path",a.clipPath).attr("class",o.regions)},l.updateRegion=function(a){var b=this,c=b.config;b.region.style("visibility",b.hasArcType()?"hidden":"visible"),b.mainRegion=b.main.select("."+o.regions).selectAll("."+o.region).data(c.regions),b.mainRegion.enter().append("g").attr("class",b.classRegion.bind(b)).append("rect").style("fill-opacity",0),b.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},l.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect"),d=b.regionX.bind(b),e=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",f).attr("height",g).style("fill-opacity",function(a){return p(a.opacity)?a.opacity:.1})]},l.regionX=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"start"in a?e(a.start):0:d.axis_rotated?0:"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},l.regionY=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?0:"end"in a?e(a.end):0:d.axis_rotated&&"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},l.regionWidth=function(a){var b,c=this,d=c.config,e=c.regionX(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"end"in a?f(a.end):c.width:d.axis_rotated?c.width:"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.width,e>b?0:b-e},l.regionHeight=function(a){var b,c=this,d=c.config,e=this.regionY(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?c.height:"start"in a?f(a.start):c.height:d.axis_rotated&&"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.height,e>b?0:b-e},l.isRegionOnX=function(a){return!a.axis||"x"===a.axis},l.drag=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.config,l=j.main,m=j.d3;j.hasArcType()||k.data_selection_enabled&&(!k.zoom_enabled||j.zoom.altDomain)&&k.data_selection_multiple&&(b=j.dragStart[0],c=j.dragStart[1],d=a[0],e=a[1],f=Math.min(b,d),g=Math.max(b,d),h=k.data_selection_grouped?j.margin.top:Math.min(c,e),i=k.data_selection_grouped?j.height:Math.max(c,e),l.select("."+o.dragarea).attr("x",f).attr("y",h).attr("width",g-f).attr("height",i-h),l.selectAll("."+o.shapes).selectAll("."+o.shape).filter(function(a){return k.data_selection_isselectable(a)}).each(function(a,b){var c,d,e,k,l,n,p=m.select(this),q=p.classed(o.SELECTED),r=p.classed(o.INCLUDED),s=!1;if(p.classed(o.circle))c=1*p.attr("cx"),d=1*p.attr("cy"),l=j.togglePoint,s=c>f&&g>c&&d>h&&i>d;else{if(!p.classed(o.bar))return;n=B(this),c=n.x,d=n.y,e=n.width,k=n.height,l=j.togglePath,s=!(c>g||f>c+e||d>i||h>d+k)}s^r&&(p.classed(o.INCLUDED,!r),p.classed(o.SELECTED,!q),l.call(j,!q,p,a,b))}))},l.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+o.chart).append("rect").attr("class",o.dragarea).style("opacity",.1),b.dragging=!0)},l.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+o.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+o.shape).classed(o.INCLUDED,!1),a.dragging=!1)},l.selectPoint=function(a,b,c){var d=this,e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node()),d.main.select("."+o.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+o.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(o.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)},l.unselectPoint=function(a,b,c){var d=this;d.config.data_onunselected.call(d.api,b,a.node()),d.main.select("."+o.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+o.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},l.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},l.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},l.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.color(b)})},l.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},l.getToggle=function(a,b){var c,d=this;return"circle"===a.nodeName?c=d.isStepType(b)?function(){}:d.togglePoint:"path"===a.nodeName&&(c=d.togglePath),c},l.toggleShape=function(a,b,c){var d=this,e=d.d3,f=d.config,g=e.select(a),h=g.classed(o.SELECTED),i=d.getToggle(a,b).bind(d);f.data_selection_enabled&&f.data_selection_isselectable(b)&&(f.data_selection_multiple||d.main.selectAll("."+o.shapes+(f.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+o.shape).each(function(a,b){var c=e.select(this);c.classed(o.SELECTED)&&i(!1,c.classed(o.SELECTED,!1),a,b)}),g.classed(o.SELECTED,!h),i(!h,g,b,c))},l.initBrush=function(){var a=this,b=a.d3;a.brush=b.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+o.brush).call(this),this},a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}},l.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context")),d=b.subchart_show?"visible":"hidden";c.style("visibility",d),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",o.chart),c.select("."+o.chart).append("g").attr("class",o.chartBars),c.select("."+o.chart).append("g").attr("class",o.chartLines),c.append("g").attr("clip-path",a.clipPath).attr("class",o.brush).call(a.brush),a.axes.subx=c.append("g").attr("class",o.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis).style("visibility",b.subchart_axis_x_show?d:"hidden")},l.updateTargetsForSubchart=function(a){var b,c,d,e,f=this,g=f.context,h=f.config,i=f.classChartBar.bind(f),j=f.classBars.bind(f),k=f.classChartLine.bind(f),l=f.classLines.bind(f),m=f.classAreas.bind(f);h.subchart_show&&(e=g.select("."+o.chartBars).selectAll("."+o.chartBar).data(a).attr("class",i),d=e.enter().append("g").style("opacity",0).attr("class",i),d.append("g").attr("class",j),c=g.select("."+o.chartLines).selectAll("."+o.chartLine).data(a).attr("class",k),b=c.enter().append("g").style("opacity",0).attr("class",k),b.append("g").attr("class",l),b.append("g").attr("class",m),g.selectAll("."+o.brush+" rect").attr(h.axis_rotated?"width":"height",h.axis_rotated?f.width2:f.height2))},l.updateBarForSubchart=function(a){var b=this;b.contextBar=b.context.selectAll("."+o.bars).selectAll("."+o.bar).data(b.barData.bind(b)),b.contextBar.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color),b.contextBar.style("opacity",b.initialOpacity.bind(b)),b.contextBar.exit().transition().duration(a).style("opacity",0).remove()},l.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition().duration(c):this.contextBar).attr("d",a).style("opacity",1)},l.updateLineForSubchart=function(a){var b=this;b.contextLine=b.context.selectAll("."+o.lines).selectAll("."+o.line).data(b.lineData.bind(b)),b.contextLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.contextLine.style("opacity",b.initialOpacity.bind(b)),b.contextLine.exit().transition().duration(a).style("opacity",0).remove()},l.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition().duration(c):this.contextLine).attr("d",a).style("opacity",1)},l.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+o.areas).selectAll("."+o.area).data(b.lineData.bind(b)),b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.contextArea.style("opacity",0),b.contextArea.exit().transition().duration(a).style("opacity",0).remove()},l.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition().duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},l.redrawSubchart=function(a,b,c,d,e,f,g){var h,i,j,k=this,l=k.d3,m=k.config;k.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(l.event&&"zoom"===l.event.type&&k.brush.extent(k.x.orgDomain()).update(),a&&(k.brush.empty()||k.brush.extent(k.x.orgDomain()).update(),h=k.generateDrawArea(e,!0),i=k.generateDrawBar(f,!0),j=k.generateDrawLine(g,!0),k.updateBarForSubchart(c),k.updateLineForSubchart(c),k.updateAreaForSubchart(c),k.redrawBarForSubchart(i,c,c),k.redrawLineForSubchart(j,c,c),k.redrawAreaForSubchart(h,c,c)))},l.redrawForBrush=function(){var a=this,b=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,b.orgDomain())},l.transformContext=function(a,b){var c,d=this;b&&b.axisSubX?c=b.axisSubX:(c=d.context.select("."+o.axisX),a&&(c=c.transition())),d.context.attr("transform",d.getTranslate("context")),c.attr("transform",d.getTranslate("subx"))},l.getDefaultExtent=function(){var a=this,b=a.config,c=q(b.axis_x_extent)?b.axis_x_extent(a.getXDomain(a.data.targets)):b.axis_x_extent;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},l.initZoom=function(){var a,b=this,c=b.d3,d=b.config;b.zoom=c.behavior.zoom().on("zoomstart",function(){a=c.event.sourceEvent,b.zoom.altDomain=c.event.sourceEvent.altKey?b.x.orgDomain():null,d.zoom_onzoomstart.call(b.api,c.event.sourceEvent)}).on("zoom",function(){b.redrawForZoom.call(b)}).on("zoomend",function(){var e=c.event.sourceEvent;e&&a.clientX===e.clientX&&a.clientY===e.clientY||(b.redrawEventRect(),b.updateZoom(),d.zoom_onzoomend.call(b.api,b.x.orgDomain()))}),b.zoom.scale=function(a){return d.axis_rotated?this.y(a):this.x(a)},b.zoom.orgScaleExtent=function(){var a=d.zoom_extent?d.zoom_extent:[1,10];return[a[0],Math.max(b.getMaxDataCount()/a[1],a[1])]},b.zoom.updateScaleExtent=function(){var a=w(b.x.orgDomain())/w(b.getZoomDomain()),c=this.orgScaleExtent();return this.scaleExtent([c[0]*a,c[1]*a]),this}},l.getZoomDomain=function(){var a=this,b=a.config,c=a.d3,d=c.min([a.orgXDomain[0],b.zoom_x_min]),e=c.max([a.orgXDomain[1],b.zoom_x_max]);return[d,e]},l.updateZoom=function(){var a=this,b=a.config.zoom_enabled?a.zoom:function(){};a.main.select("."+o.zoomRect).call(b).on("dblclick.zoom",null),a.main.selectAll("."+o.eventRect).call(b).on("dblclick.zoom",null)},l.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;if(c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length){if("mousemove"===b.event.sourceEvent.type&&d.altDomain)return e.domain(d.altDomain),void d.scale(e).updateScaleExtent();a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0),c.zoom_onzoom.call(a.api,e.orgDomain())}},l.generateColor=function(){var a=this,b=a.config,c=a.d3,d=b.data_colors,e=y(b.color_pattern)?b.color_pattern:c.scale.category10().range(),f=b.data_color,g=[];return function(a){var b,c=a.id||a.data&&a.data.id||a;return d[c]instanceof Function?b=d[c](a):d[c]?b=d[c]:(g.indexOf(c)<0&&g.push(c),b=e[g.indexOf(c)%e.length],d[c]=b),f instanceof Function?f(b,a):b}},l.generateLevelColor=function(){var a=this,b=a.config,c=b.color_pattern,d=b.color_threshold,e="value"===d.unit,f=d.values&&d.values.length?d.values:[],g=d.max||100;return y(b.color_threshold)?function(a){var b,d,h=c[c.length-1];for(b=0;b<f.length;b++)if(d=e?a:100*a/g,d<f[b]){h=c[b];break}return h}:null},l.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){var g="y2"===b.axis.getId(f)?d:c;return g.call(b,a,e)}},l.yFormat=function(a){var b=this,c=b.config,d=c.axis_y_tick_format?c.axis_y_tick_format:b.defaultValueFormat;return d(a)},l.y2Format=function(a){var b=this,c=b.config,d=c.axis_y2_tick_format?c.axis_y2_tick_format:b.defaultValueFormat;return d(a)},l.defaultValueFormat=function(a){return p(a)?+a:""},l.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},l.dataLabelFormat=function(a){var b,c=this,d=c.config.data_labels,e=function(a){return p(a)?+a:""};return b="function"==typeof d.format?d.format:"object"==typeof d.format?d.format[a]?d.format[a]===!0?e:d.format[a]:function(){return""}:e},l.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},l.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},l.getCaches=function(a){var b,c=[];for(b=0;b<a.length;b++)a[b]in this.cache&&c.push(this.cloneTarget(this.cache[a[b]]));return c};var o=l.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};l.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)},l.classText=function(a){return this.generateClass(o.text,a.index)},l.classTexts=function(a){return this.generateClass(o.texts,a.id)},l.classShape=function(a){return this.generateClass(o.shape,a.index)},l.classShapes=function(a){return this.generateClass(o.shapes,a.id)},l.classLine=function(a){return this.classShape(a)+this.generateClass(o.line,a.id)},l.classLines=function(a){return this.classShapes(a)+this.generateClass(o.lines,a.id)},l.classCircle=function(a){return this.classShape(a)+this.generateClass(o.circle,a.index)},l.classCircles=function(a){return this.classShapes(a)+this.generateClass(o.circles,a.id)},l.classBar=function(a){return this.classShape(a)+this.generateClass(o.bar,a.index)},l.classBars=function(a){return this.classShapes(a)+this.generateClass(o.bars,a.id)},l.classArc=function(a){return this.classShape(a.data)+this.generateClass(o.arc,a.data.id)},l.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(o.arcs,a.data.id)},l.classArea=function(a){return this.classShape(a)+this.generateClass(o.area,a.id)},l.classAreas=function(a){return this.classShapes(a)+this.generateClass(o.areas,a.id)},l.classRegion=function(a,b){return this.generateClass(o.region,b)+" "+("class"in a?a["class"]:"")},l.classEvent=function(a){return this.generateClass(o.eventRect,a.index)},l.classTarget=function(a){var b=this,c=b.config.data_classes[a],d="";return c&&(d=" "+o.target+"-"+c),b.generateClass(o.target,a)+d},l.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},l.classFocused=function(a){return" "+(this.focusedTargetIds.indexOf(a.id)>=0?o.focused:"")},l.classDefocused=function(a){return" "+(this.defocusedTargetIds.indexOf(a.id)>=0?o.defocused:"")},l.classChartText=function(a){return o.chartText+this.classTarget(a.id)},l.classChartLine=function(a){return o.chartLine+this.classTarget(a.id)},l.classChartBar=function(a){return o.chartBar+this.classTarget(a.id)},l.classChartArc=function(a){return o.chartArc+this.classTarget(a.data.id)},l.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},l.selectorTarget=function(a,b){return(b||"")+"."+o.target+this.getTargetSelectorSuffix(a)},l.selectorTargets=function(a,b){var c=this;return a=a||[],a.length?a.map(function(a){return c.selectorTarget(a,b)}):null},l.selectorLegend=function(a){return"."+o.legendItem+this.getTargetSelectorSuffix(a)},l.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var p=l.isValue=function(a){return a||0===a},q=l.isFunction=function(a){return"function"==typeof a},r=l.isString=function(a){return"string"==typeof a},s=l.isUndefined=function(a){return"undefined"==typeof a},t=l.isDefined=function(a){return"undefined"!=typeof a},u=l.ceil10=function(a){return 10*Math.ceil(a/10)},v=l.asHalfPixel=function(a){return Math.ceil(a)+.5},w=l.diffDomain=function(a){return a[1]-a[0]},x=l.isEmpty=function(a){return"undefined"==typeof a||null===a||r(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length},y=l.notEmpty=function(a){return!l.isEmpty(a)},z=l.getOption=function(a,b,c){return t(a[b])?a[b]:c},A=l.hasValue=function(a,b){var c=!1;return Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)}),c},B=l.getPathBox=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)],d=c[0].x,e=Math.min(c[0].y,c[1].y);return{x:d,y:e,width:b.width,height:b.height}};k.focus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),this.revert(),this.defocus(),b.classed(o.focused,!0).classed(o.defocused,!1),c.hasArcType()&&c.expandArc(a),c.toggleFocusLegend(a,!0),c.focusedTargetIds=a,c.defocusedTargetIds=c.defocusedTargetIds.filter(function(b){return a.indexOf(b)<0})},k.defocus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),b.classed(o.focused,!1).classed(o.defocused,!0),c.hasArcType()&&c.unexpandArc(a),c.toggleFocusLegend(a,!1),c.focusedTargetIds=c.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),c.defocusedTargetIds=a},k.revert=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a)),b.classed(o.focused,!1).classed(o.defocused,!1),c.hasArcType()&&c.unexpandArc(a),c.config.legend_show&&(c.showLegend(a.filter(c.isLegendToShow.bind(c))),c.legend.selectAll(c.selectorLegends(a)).filter(function(){return c.d3.select(this).classed(o.legendItemFocused)}).classed(o.legendItemFocused,!1)),c.focusedTargetIds=[],c.defocusedTargetIds=[]},k.show=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.removeHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",1,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",1)}),b.withLegend&&d.showLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},k.hide=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.addHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",0,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",0)}),b.withLegend&&d.hideLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},k.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},k.zoom=function(a){var b=this.internal;return a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain())),b.brush.extent()},k.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a,b.updateAndRedraw()},k.unzoom=function(){var a=this.internal;a.brush.clear().update(),a.redraw({withUpdateXDomain:!0})},k.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_max=d.max([b.orgXDomain[1],a])):c.zoom_x_max},k.zoom.min=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_min=d.min([b.orgXDomain[0],a])):c.zoom_x_min},k.zoom.range=function(a){return arguments.length?(t(a.max)&&this.domain.max(a.max),void(t(a.min)&&this.domain.min(a.min))):{max:this.domain.max(),min:this.domain.min()}},k.load=function(a){var b=this.internal,c=b.config;return a.xs&&b.addXs(a.xs),"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?void b.load(b.getCaches(a.cacheIds),a.done):void("unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a))},k.unload=function(a){var b=this.internal;a=a||{},a instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},k.flow=function(a){var b,c,d,e,f,g,h,i,j=this.internal,k=[],l=j.getMaxDataCount(),m=0,n=0;if(a.json)c=j.convertJsonToData(a.json,a.keys);else if(a.rows)c=j.convertRowsToData(a.rows);else{if(!a.columns)return;c=j.convertColumnsToData(a.columns)}b=j.convertDataToTargets(c,!0),j.data.targets.forEach(function(a){var c,d,e=!1;for(c=0;c<b.length;c++)if(a.id===b[c].id){for(e=!0,a.values[a.values.length-1]&&(n=a.values[a.values.length-1].index+1),m=b[c].values.length,d=0;m>d;d++)b[c].values[d].index=n+d,j.isTimeSeries()||(b[c].values[d].x=n+d);a.values=a.values.concat(b[c].values),b.splice(c,1);break}e||k.push(a.id)}),j.data.targets.forEach(function(a){var b,c;for(b=0;b<k.length;b++)if(a.id===k[b])for(n=a.values[a.values.length-1].index+1,c=0;m>c;c++)a.values.push({id:a.id,index:n+c,x:j.isTimeSeries()?j.getOtherTargetX(n+c):n+c,value:null})}),j.data.targets.length&&b.forEach(function(a){var b,c=[];for(b=j.data.targets[0].values[0].index;n>b;b++)c.push({id:a.id,index:b,x:j.isTimeSeries()?j.getOtherTargetX(b):b,value:null});a.values.forEach(function(a){a.index+=n,j.isTimeSeries()||(a.x+=n)}),a.values=c.concat(a.values)}),j.data.targets=j.data.targets.concat(b),d=j.getMaxDataCount(),f=j.data.targets[0],g=f.values[0],t(a.to)?(m=0,i=j.isTimeSeries()?j.parseDate(a.to):a.to,f.values.forEach(function(a){a.x<i&&m++})):t(a.length)&&(m=a.length),l?1===l&&j.isTimeSeries()&&(h=(f.values[f.values.length-1].x-g.x)/2,e=[new Date(+g.x-h),new Date(+g.x+h)],j.updateXDomain(null,!0,!0,!1,e)):(h=j.isTimeSeries()?f.values.length>1?f.values[f.values.length-1].x-g.x:g.x-j.getXDomain(j.data.targets)[0]:1,e=[g.x-h,g.x],j.updateXDomain(null,!0,!0,!1,e)),j.updateTargets(j.data.targets),j.redraw({flow:{index:g.index,length:m,duration:p(a.duration)?a.duration:j.config.transition_duration,done:a.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})},l.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e,f,g,h=a.targets,i=a.flow,j=a.drawBar,k=a.drawLine,l=a.drawArea,m=a.cx,n=a.cy,p=a.xv,q=a.xForText,r=a.yForText,s=a.duration,t=1,u=i.index,v=i.length,x=b.getValueOnIndex(b.data.targets[0].values,u),y=b.getValueOnIndex(b.data.targets[0].values,u+v),z=b.x.domain(),A=i.duration||s,B=i.done||function(){},C=b.generateWait(),D=b.xgrid||d.selectAll([]),E=b.xgridLines||d.selectAll([]),F=b.mainRegion||d.selectAll([]),G=b.mainText||d.selectAll([]),H=b.mainBar||d.selectAll([]),I=b.mainLine||d.selectAll([]),J=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,v)}),g=b.updateXDomain(h,!0,!0),b.updateXGrid&&b.updateXGrid(!0),i.orgDataCount?e=1===i.orgDataCount||x.x===y.x?b.x(z[0])-b.x(g[0]):b.isTimeSeries()?b.x(z[0])-b.x(g[0]):b.x(x.x)-b.x(y.x):1!==b.data.targets[0].values.length?e=b.x(z[0])-b.x(g[0]):b.isTimeSeries()?(x=b.getValueOnIndex(b.data.targets[0].values,0),y=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),e=b.x(x.x)-b.x(y.x)):e=w(g)/2,t=w(z)/w(g),f="translate("+e+",0) scale("+t+",1)",b.hideXGridFocus(),d.transition().ease("linear").duration(A).each(function(){C.add(b.axes.x.transition().call(b.xAxis)),C.add(H.transition().attr("transform",f)),C.add(I.transition().attr("transform",f)),C.add(J.transition().attr("transform",f)),C.add(K.transition().attr("transform",f)),C.add(G.transition().attr("transform",f)),C.add(F.filter(b.isRegionOnX).transition().attr("transform",f)),C.add(D.transition().attr("transform",f)),C.add(E.transition().attr("transform",f))}).call(C,function(){var a,d=[],e=[],f=[];if(v){for(a=0;v>a;a++)d.push("."+o.shape+"-"+(u+a)),e.push("."+o.text+"-"+(u+a)),f.push("."+o.eventRect+"-"+(u+a));b.svg.selectAll("."+o.shapes).selectAll(d).remove(),b.svg.selectAll("."+o.texts).selectAll(e).remove(),b.svg.selectAll("."+o.eventRects).selectAll(f).remove(),b.svg.select("."+o.xgrid).remove()}D.attr("transform",null).attr(b.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",c.axis_rotated?0:p).attr("x2",c.axis_rotated?b.width:p),E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",p),H.attr("transform",null).attr("d",j),I.attr("transform",null).attr("d",k),J.attr("transform",null).attr("d",l),K.attr("transform",null).attr("cx",m).attr("cy",n),G.attr("transform",null).attr("x",q).attr("y",r).style("fill-opacity",b.opacityForText.bind(b)),F.attr("transform",null),F.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b)),c.interaction_enabled&&b.redrawEventRect(),B(),b.flowing=!1})}},k.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+o.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+o.shape).filter(function(){return c.select(this).classed(o.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},k.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+o.shapes).selectAll("."+o.shape).each(function(g,h){var i=e.select(this),j=g.data?g.data.id:g.id,k=d.getToggle(this,g).bind(d),l=f.data_selection_grouped||!a||a.indexOf(j)>=0,m=!b||b.indexOf(h)>=0,n=i.classed(o.SELECTED);i.classed(o.line)||i.classed(o.area)||(l&&m?f.data_selection_isselectable(g)&&!n&&k(!0,i.classed(o.SELECTED,!0),g,h):t(c)&&c&&n&&k(!1,i.classed(o.SELECTED,!1),g,h))})},k.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+o.shapes).selectAll("."+o.shape).each(function(f,g){var h=d.select(this),i=f.data?f.data.id:f.id,j=c.getToggle(this,f).bind(c),k=e.data_selection_grouped||!a||a.indexOf(i)>=0,l=!b||b.indexOf(g)>=0,m=h.classed(o.SELECTED);h.classed(o.line)||h.classed(o.area)||k&&l&&e.data_selection_isselectable(f)&&m&&j(!1,h.classed(o.SELECTED,!1),f,g)})},k.transform=function(a,b){var c=this.internal,d=["pie","donut"].indexOf(a)>=0?{withTransform:!0}:null;c.transformTo(b,a,d)},l.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},k.groups=function(a){var b=this.internal,c=b.config;return s(a)?c.data_groups:(c.data_groups=a,b.redraw(),c.data_groups)},k.xgrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_x_lines=a,b.redrawWithoutRescale(),c.grid_x_lines):c.grid_x_lines},k.xgrids.add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a?a:[]))},k.xgrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!0)},k.ygrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_y_lines=a,b.redrawWithoutRescale(),c.grid_y_lines):c.grid_y_lines},k.ygrids.add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a?a:[]))},k.ygrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!1)},k.regions=function(a){var b=this.internal,c=b.config;return a?(c.regions=a,b.redrawWithoutRescale(),c.regions):c.regions},k.regions.add=function(a){var b=this.internal,c=b.config;return a?(c.regions=c.regions.concat(a),b.redrawWithoutRescale(),c.regions):c.regions},k.regions.remove=function(a){var b,c,d,e=this.internal,f=e.config;return a=a||{},b=e.getOption(a,"duration",f.transition_duration),c=e.getOption(a,"classes",[o.region]),d=e.main.select("."+o.regions).selectAll(c.map(function(a){return"."+a})),(b?d.transition().duration(b):d).style("opacity",0).remove(),f.regions=f.regions.filter(function(a){var b=!1;return a["class"]?(a["class"].split(" ").forEach(function(a){c.indexOf(a)>=0&&(b=!0)}),!b):!0}),f.regions},k.data=function(a){var b=this.internal.data.targets;return"undefined"==typeof a?b:b.filter(function(b){return[].concat(a).indexOf(b.id)>=0})},k.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))},k.data.values=function(a){var b,c=null;return a&&(b=this.data(a),c=b[0]?b[0].values.map(function(a){return a.value}):null),c},k.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},k.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},k.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},k.category=function(a,b){var c=this.internal,d=c.config;return arguments.length>1&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},k.categories=function(a){var b=this.internal,c=b.config;return arguments.length?(c.axis_x_categories=a,b.redraw(),c.axis_x_categories):c.axis_x_categories},k.color=function(a){
var b=this.internal;return b.color(a)},k.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},k.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},k.axis=function(){},k.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},k.axis.max=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(p(a.x)&&(c.axis_x_max=a.x),p(a.y)&&(c.axis_y_max=a.y),p(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}},k.axis.min=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(p(a.x)&&(c.axis_x_min=a.x),p(a.y)&&(c.axis_y_min=a.y),p(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}},k.axis.range=function(a){return arguments.length?(t(a.max)&&this.axis.max(a.max),void(t(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},k.legend=function(){},k.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},k.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},k.resize=function(a){var b=this.internal,c=b.config;c.size_width=a?a.width:null,c.size_height=a?a.height:null,this.flush()},k.flush=function(){var a=this.internal;a.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},k.destroy=function(){var a=this.internal;if(d.clearInterval(a.intervalForObserveInserted),void 0!==a.resizeTimeout&&d.clearTimeout(a.resizeTimeout),d.detachEvent)d.detachEvent("onresize",a.resizeFunction);else if(d.removeEventListener)d.removeEventListener("resize",a.resizeFunction);else{var b=d.onresize;b&&b.add&&b.remove&&b.remove(a.resizeFunction)}return a.selectChart.classed("c3",!1).html(""),Object.keys(a).forEach(function(b){a[b]=null}),null},k.tooltip=function(){},k.tooltip.show=function(a){var b,c,d=this.internal;a.mouse&&(c=a.mouse),a.data?d.isMultipleX()?(c=[d.x(a.data.x),d.getYScale(a.data.id)(a.data.value)],b=null):b=p(a.data.index)?a.data.index:d.getIndexByX(a.data.x):"undefined"!=typeof a.x?b=d.getIndexByX(a.x):"undefined"!=typeof a.index&&(b=a.index),d.dispatchEvent("mouseover",b,c),d.dispatchEvent("mousemove",b,c),d.config.tooltip_onshow.call(d,a.data)},k.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var C;l.isSafari=function(){var a=d.navigator.userAgent;return a.indexOf("Safari")>=0&&a.indexOf("Chrome")<0},l.isChrome=function(){var a=d.navigator.userAgent;return a.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return n}):"undefined"!=typeof b&&"undefined"!=typeof c?c.exports=n:d.c3=n}(window),d.define=e,c.exports}),a.registerDynamic("3c",["3a"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("3a"),d.define=e,c.exports}),a.registerDynamic("c",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(a){"undefined"!=typeof c&&"object"==typeof b?"undefined"!=typeof window?c.exports=a():c.exports=a:window.Modal=a()}(function(){var a=function(a,b){b=b||{},this.isIE=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)?parseFloat(RegExp.$1):!1,this.opened=!1,this.modal="object"==typeof a?a:document.querySelector(a),this.options={},this.options.backdrop="false"===b.backdrop?!1:!0,this.options.keyboard="false"===b.keyboard?!1:!0,this.options.content=b.content,this.duration=b.duration||300,this.options.duration=this.isIE&&this.isIE<10?0:this.duration,this.scrollbarWidth=0,this.dialog=this.modal.querySelector(".modal-dialog"),this.timer=0,this.init()},b=function(){var a=document.documentElement.getBoundingClientRect(),b=window.innerWidth||a.right-Math.abs(a.left);return b};a.prototype={init:function(){this.actions(),this.trigger(),this.options.content&&void 0!==this.options.content&&this.content(this.options.content)},actions:function(){var a=this;this.open=function(){this._open()},this.close=function(){this._close()},this._open=function(){this.options.backdrop?this.createOverlay():this.overlay=null,this.overlay&&setTimeout(function(){a.addClass(a.overlay,"in")},0),clearTimeout(a.modal.getAttribute("data-timer")),this.timer=setTimeout(function(){a.modal.style.display="block",a.opened=!0,a.checkScrollbar(),a.adjustDialog(),a.setScrollbar(),a.resize(),a.dismiss(),a.keydown(),a.addClass(document.body,"modal-open"),a.addClass(a.modal,"in"),a.modal.setAttribute("aria-hidden",!1)},a.options.duration/2),this.modal.setAttribute("data-timer",a.timer)},this._close=function(){this.overlay&&this.removeClass(this.overlay,"in"),this.removeClass(this.modal,"in"),this.modal.setAttribute("aria-hidden",!0),clearTimeout(a.modal.getAttribute("data-timer")),this.timer=setTimeout(function(){a.opened=!1,a.removeClass(document.body,"modal-open"),a.resize(),a.resetAdjustments(),a.resetScrollbar(),a.dismiss(),a.keydown(),a.modal.style.display=""},a.options.duration/2),this.modal.setAttribute("data-timer",a.timer),setTimeout(function(){document.querySelector(".modal.in")||a.removeOverlay()},a.options.duration)},this.content=function(a){return this.modal.querySelector(".modal-content").innerHTML=a},this.createOverlay=function(){var a=document.createElement("div"),b=document.querySelector(".modal-backdrop");a.setAttribute("class","modal-backdrop fade"),b?this.overlay=b:(this.overlay=a,document.body.appendChild(a))},this.removeOverlay=function(){var a=document.querySelector(".modal-backdrop");null!==a&&void 0!==a&&document.body.removeChild(a)},this.keydown=function(){function b(b){a.options.keyboard&&27==b.which&&a.close()}this.opened?document.addEventListener("keydown",b,!1):document.removeEventListener("keydown",b,!1)},this.trigger=function(){var b=document.querySelectorAll('[data-toggle="modal"]'),c=b.length,d=0;for(d;c>d;d++)b[d].addEventListener("click",function(b){var c=b.target,d=c.getAttribute("data-target")&&c.getAttribute("data-target").replace("#","")||c.getAttribute("href")&&c.getAttribute("href").replace("#","");document.getElementById(d)===a.modal&&a.open()})},this._resize=function(){var a=this.overlay||document.querySelector(".modal-backdrop"),b={w:document.documentElement.clientWidth+"px",h:document.documentElement.clientHeight+"px"};null!==a&&/in/.test(a.className)&&(a.style.height=b.h,a.style.width=b.w)},this.oneResize=function(){function b(){a._resize(),a.handleUpdate(),window.removeEventListener("resize",b,!1)}window.addEventListener("resize",b,!1)},this.resize=function(){this.opened?window.addEventListener("resize",this.oneResize,!1):window.removeEventListener("resize",this.oneResize,!1)},this.dismiss=function(){function b(b){("modal"===b.target.parentNode.getAttribute("data-dismiss")||"modal"===b.target.getAttribute("data-dismiss")||b.target===a.modal)&&(b.preventDefault(),a.close())}this.opened?this.modal.addEventListener("click",b,!1):this.modal.removeEventListener("click",b,!1)},this.handleUpdate=function(){this.adjustDialog()},this.adjustDialog=function(){this.modal.style.paddingLeft=!this.bodyIsOverflowing&&this.modalIsOverflowing?this.scrollbarWidth+"px":"",this.modal.style.paddingRight=this.bodyIsOverflowing&&!this.modalIsOverflowing?this.scrollbarWidth+"px":""},this.resetAdjustments=function(){this.modal.style.paddingLeft="",this.modal.style.paddingRight=""},this.checkScrollbar=function(){this.bodyIsOverflowing=document.body.clientWidth<b(),this.modalIsOverflowing=this.modal.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},this.setScrollbar=function(){var a=window.getComputedStyle(document.body),b=parseInt(a.paddingRight,10);this.bodyIsOverflowing&&(document.body.style.paddingRight=b+this.scrollbarWidth+"px")},this.resetScrollbar=function(){document.body.style.paddingRight=""},this.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),b},this.addClass=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},this.removeClass=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(b,"").replace(/^\s+|\s+$/g,"")}}};var c=document.querySelectorAll(".modal"),d=c.length,e=0;for(e;d>e;e++){var f=c[e],g={};g.keyboard=f.getAttribute("data-keyboard"),g.backdrop=f.getAttribute("data-backdrop"),g.duration=f.getAttribute("data-duration"),new a(f,g)}return a}),d.define=e,c.exports}),a.register("3d",["8","9","39","c","3c","b"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.$,c=a.$$,d=a.HTML},function(a){e=a.i18n},function(a){},function(a){f=a["default"]},function(a){g=a["default"]},function(a){h=a["default"],i=a.VIEW}],execute:function(){j="http://www.uncertml.org/statistics/discrete-probability",k='\n<div class="modal fade" id="statisticsViewModal" tabindex="-1" role="dialog" aria-labelledby="statisticsViewModalLabel">\n  <div class="modal-dialog modal-lg" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="statisticsViewModalLabel">Statistics View</h4>\n      </div>\n      <div class="modal-body">\n        <div class="param-selector"></div>\n      \n        <div class="chart-container"></div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n',b("body").add(d(k)),l={"param-selector":'<select name="param"></select>'},m=function(a){function h(a,b){babelHelpers.classCallCheck(this,h),babelHelpers.get(Object.getPrototypeOf(h.prototype),"constructor",this).call(this,b),this.cov=a,this.label="View",this.icon='<span class="glyphicon glyphicon-stats"></span>'}return babelHelpers.inherits(h,a),babelHelpers.createClass(h,[{key:"run",value:function(){var a=this;Promise.all([this.cov.loadDomain(),this.cov.loadRanges()]).then(function(b){var c=babelHelpers.slicedToArray(b,2),d=c[0],e=c[1];return d.axes.size>1?void alert("Sorry, only statistical coverages with exactly one axis (often time) are supported."):void a._displayChart(d,e)})}},{key:"_displayChart",value:function(a,h){var i=this,j=b("#statisticsViewModal");b(".chart-container",j).fill(),b(".param-selector",j).fill(d(l["param-selector"])),b("select",j).add(d('<option value="">All</option>'));var k=function(a){var b=a.observedProperty.statisticalCategories,c=void 0;return c=b?b.map(function(a){return e(a.label)}).join(" & "):e(a.observedProperty.label)},m=!0,n=!1,o=void 0;try{for(var p,q=this.cov.parameters.values()[Symbol.iterator]();!(m=(p=q.next()).done);m=!0){var r=p.value,s=k(r);b("select",j).add(d('<option value="'+r.key+'">'+s+"</option>"))}}catch(t){n=!0,o=t}finally{try{!m&&q["return"]&&q["return"]()}finally{if(n)throw o}}var u=["t"].concat(a.axes.get("t").values.map(function(a){return new Date(a)})),v=function(){var a={},b={},d={},e=[],f=[],l=!0,m=!1,n=void 0;try{for(var o,p=i.cov.parameters.values()[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value,r=q.key;if(h.get(r).values.some(function(a){return a>0})){a[r]=k(q),d[r]="area",e.push(r);var s=q.observedProperty.statisticalCategories;s&&1===s.length&&s[0].preferredColor&&(b[r]=s[0].preferredColor),f.push([r].concat(h.get(r).values.map(function(a){return 100*a})))}}}catch(t){m=!0,n=t}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}g.generate({bindto:c(".chart-container",j),data:{x:"t",columns:[u].concat(f),types:d,groups:[e],names:a,colors:b},grid:{y:{show:!0}},tooltip:{format:{value:function(a){return a.toFixed(2)+"%"}}},axis:{y:{min:0,max:100,padding:0,label:{text:"Percentage (%)",position:"outer-middle"},tick:{format:function(a){return a.toFixed(2)}}},x:{type:"timeseries",tick:{format:"%Y-%m-%d"}}},size:{height:500}})},w=function(a){var b=i.cov.parameters.get(a),d=[a].concat(h.get(a).values.map(function(a){return 100*a})),f=void 0,k=b.observedProperty.statisticalCategories;f=k&&1===k.length?e(k[0].label)+" Percentage":e(b.observedProperty.label),g.generate({bindto:c(".chart-container",j),data:{x:"t",columns:[u,d],names:babelHelpers.defineProperty({},a,f)},legend:{show:!1},grid:{y:{show:!0}},tooltip:{format:{value:function(a){return a.toFixed(2)+"%"}}},axis:{y:{min:0,padding:{bottom:0},label:{text:f+" (%)",position:"outer-middle"},tick:{format:function(a){return a.toFixed(2)}}},x:{type:"timeseries",tick:{format:"%Y-%m-%d"}}}})};b("select",j).on("change",function(){var a=c("select",j).value;a?w(a):v()}),new f(j[0]).open(),setTimeout(function(){return v()},500)}},{key:"isSupported",get:function(){if(this.cov.coverages)return!1;var a=!0,b=!1,c=void 0;try{for(var d,e=this.cov.parameters.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value,g=f.observedProperty;if(g.statisticalMeasure!==j)return!1}}catch(h){b=!0,c=h}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}return!0}}]),h}(h),a("default",m),m.type=i}}}),a.register("b",["a"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a["default"]}],execute:function(){c="view",a("VIEW",c),d="process",a("PROCESS",d),e="external_link",a("EXTERNAL_LINK",e),f=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.context=a||{},this.type=this.constructor.type}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"remove",value:function(){}}]),b}(b),a("default",f)}}}),a.registerDynamic("3e",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,"d3",null);return function(){"exports d3";!function(){function a(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function b(a){return null===a?NaN:+a}function c(a){return!isNaN(a)}function d(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function e(a){return a.length}function f(a){for(var b=1;a*b%1;)b*=10;return b}function g(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function h(){this._=Object.create(null)}function i(a){return(a+="")===qg||a[0]===rg?rg+a:a}function j(a){return(a+="")[0]===rg?a.slice(1):a}function k(a){return i(a)in this._}function l(a){return(a=i(a))in this._&&delete this._[a]}function m(){var a=[];for(var b in this._)a.push(j(b));return a}function n(){var a=0;for(var b in this._)++a;return a}function o(){for(var a in this._)return!1;return!0}function p(){this._=Object.create(null)}function q(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function r(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=sg.length;d>c;++c){var e=sg[c]+b;if(e in a)return e}}function s(){}function t(){}function u(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new h;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function v(){bg.event.preventDefault()}function w(){for(var a,b=bg.event;a=b.sourceEvent;)b=a;return b}function x(a){for(var b=new t,c=0,d=arguments.length;++c<d;)b[arguments[c]]=u(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=bg.event;e.target=a,bg.event=e,b[e.type].apply(c,d)}finally{bg.event=f}}},b}function y(a){return ug(a,zg),a}function z(a){return"function"==typeof a?a:function(){return vg(a,this)}}function A(a){return"function"==typeof a?a:function(){return wg(a,this)}}function B(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=bg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function C(a){return a.trim().replace(/\s+/g," ")}function D(a){return new RegExp("(?:^|\\s+)"+bg.requote(a)+"(?:\\s+|$)","g")}function E(a){return(a+"").trim().split(/^|\s+/)}function F(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=E(a).map(G);var e=a.length;return"function"==typeof b?d:c}function G(a){var b=D(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",C(e+" "+a))):c.setAttribute("class",C(e.replace(b," ")))}}function H(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function I(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function J(a){return"function"==typeof a?a:(a=bg.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function K(){var a=this.parentNode;a&&a.removeChild(this)}function L(a){return{__data__:a}}function M(a){return function(){return yg(this,a)}}function N(b){return arguments.length||(b=a),function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function O(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function P(a){return ug(a,Bg),a}function Q(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function R(a){var b=a.__transition__;b&&++b.active}function S(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,dg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+bg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=T;h>0&&(a=a.slice(0,h));var j=Dg.get(a);return j&&(a=j,i=U),h?b?e:d:b?s:f}function T(a,b){return function(c){var d=bg.event;bg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{bg.event=d}}}function U(a,b){var c=T(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function V(){var a=".dragsuppress-"+ ++Fg,b="click"+a,c=bg.select(gg).on("touchmove"+a,v).on("dragstart"+a,v).on("selectstart"+a,v);if(Eg){var d=fg.style,e=d[Eg];d[Eg]="none"}return function(f){if(c.on(a,null),Eg&&(d[Eg]=e),f){var g=function(){c.on(b,null)};c.on(b,function(){v(),g()},!0),setTimeout(g,0)}}}function W(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>Gg&&(gg.scrollX||gg.scrollY)){c=bg.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var e=c[0][0].getScreenCTM();Gg=!(e.f||e.e),c.remove()}return Gg?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function X(){return bg.event.changedTouches[0].identifier}function Y(){return bg.event.target}function Z(){return gg}function $(a){return a>0?1:0>a?-1:0}function _(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function aa(a){return a>1?0:-1>a?Jg:Math.acos(a)}function ba(a){return a>1?Mg:-1>a?-Mg:Math.asin(a)}function ca(a){return((a=Math.exp(a))-1/a)/2}function da(a){return((a=Math.exp(a))+1/a)/2}function ea(a){return((a=Math.exp(2*a))-1)/(a+1)}function fa(a){return(a=Math.sin(a/2))*a}function ga(){}function ha(a,b,c){return this instanceof ha?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ha?new ha(a.h,a.s,a.l):va(""+a,wa,ha):new ha(a,b,c)}function ia(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new ra(e(a+120),e(a),e(a-120))}function ja(a,b,c){return this instanceof ja?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ja?new ja(a.h,a.c,a.l):a instanceof la?na(a.l,a.a,a.b):na((a=xa((a=bg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ja(a,b,c)}function ka(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new la(c,Math.cos(a*=Ng)*b,Math.sin(a)*b)}function la(a,b,c){return this instanceof la?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof la?new la(a.l,a.a,a.b):a instanceof ja?ka(a.h,a.c,a.l):xa((a=ra(a)).r,a.g,a.b):new la(a,b,c)}function ma(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=oa(e)*Yg,d=oa(d)*Zg,f=oa(f)*$g,new ra(qa(3.2404542*e-1.5371385*d-.4985314*f),qa(-.969266*e+1.8760108*d+.041556*f),qa(.0556434*e-.2040259*d+1.0572252*f))}function na(a,b,c){return a>0?new ja(Math.atan2(c,b)*Og,Math.sqrt(b*b+c*c),a):new ja(NaN,NaN,a)}function oa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function pa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function qa(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ra(a,b,c){return this instanceof ra?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof ra?new ra(a.r,a.g,a.b):va(""+a,ra,ia):new ra(a,b,c)}function sa(a){return new ra(a>>16,a>>8&255,255&a)}function ta(a){return sa(a)+""}function ua(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function va(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(za(e[0]),za(e[1]),za(e[2]))}return(f=bh.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function wa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&1>i?0:d),new ha(d,e,i)}function xa(a,b,c){a=ya(a),b=ya(b),c=ya(c);var d=pa((.4124564*a+.3575761*b+.1804375*c)/Yg),e=pa((.2126729*a+.7151522*b+.072175*c)/Zg),f=pa((.0193339*a+.119192*b+.9503041*c)/$g);return la(116*e-16,500*(d-e),200*(e-f))}function ya(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function za(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Aa(a){return"function"==typeof a?a:function(){return a}}function Ba(a){return a}function Ca(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Da(b,c,a,d)}}function Da(a,b,c,d){function e(){var a,b=i.status;if(!b&&Fa(i)||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=bg.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!gg.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=bg.event;bg.event=a;try{g.progress.call(f,i)}finally{bg.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(dg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},bg.rebind(f,g,"on"),null==d?f:f.get(Ea(d))}function Ea(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Fa(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Ga(){var a=Ha(),b=Ia()-a;b>24?(isFinite(b)&&(clearTimeout(fh),fh=setTimeout(Ga,b)),eh=0):(eh=1,hh(Ga))}function Ha(){var a=Date.now();for(gh=ch;gh;)a>=gh.t&&(gh.f=gh.c(a-gh.t)),gh=gh.n;return a}function Ia(){for(var a,b=ch,c=1/0;b;)b.f?b=a?a.n=b.n:ch=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return dh=a,c}function Ja(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ka(a,b){var c=Math.pow(10,3*pg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function La(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:Ba;return function(a){var c=jh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m)))),n=kh.get(n)||Ma;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===h?"":h;if(0>o){var i=bg.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(0>w){var x=s?a.lastIndexOf("e"):-1;0>x?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=k>y?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Ma(a){return a+""}function Na(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Oa(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new mh(c-1)),1),c}function f(a,c){return b(a=new mh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{mh=Na;var d=new Na;return d._=a,g(d,b,c)}finally{mh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Pa(a);return i.floor=i,i.round=Pa(d),i.ceil=Pa(e),i.offset=Pa(f),i.range=h,a}function Pa(a){return function(b,c){try{mh=Na;var d=new Na;return d._=b,a(d,c)._}finally{mh=Date}}}function Qa(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=oh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&mh!==Na,g=new(f?Na:mh);return"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in oh?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{mh=Na;var b=new mh;return b._=a,d(b)}finally{mh=Date}}var d=b(a);return c.parse=function(a){try{mh=Na;var b=d.parse(a);return b&&b._}finally{mh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=ib;var t=bg.map(),u=Sa(p),v=Ta(p),w=Sa(q),x=Ta(q),y=Sa(r),z=Ta(r),A=Sa(s),B=Ta(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Ra(a.getDate(),b,2)},e:function(a,b){return Ra(a.getDate(),b,2)},H:function(a,b){return Ra(a.getHours(),b,2)},I:function(a,b){return Ra(a.getHours()%12||12,b,2)},j:function(a,b){return Ra(1+lh.dayOfYear(a),b,3)},L:function(a,b){return Ra(a.getMilliseconds(),b,3)},m:function(a,b){return Ra(a.getMonth()+1,b,2)},M:function(a,b){return Ra(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Ra(a.getSeconds(),b,2)},U:function(a,b){return Ra(lh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ra(lh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Ra(a.getFullYear()%100,b,2)},Y:function(a,b){return Ra(a.getFullYear()%1e4,b,4)},Z:gb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:ab,e:ab,H:cb,I:cb,j:bb,L:fb,m:_a,M:db,p:k,S:eb,U:Va,w:Ua,W:Wa,x:i,X:j,y:Ya,Y:Xa,Z:Za,"%":hb};return b}function Ra(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e);
}function Sa(a){return new RegExp("^(?:"+a.map(bg.requote).join("|")+")","i")}function Ta(a){for(var b=new h,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Ua(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Va(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Wa(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Xa(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Ya(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.y=$a(+d[0]),c+d[0].length):-1}function Za(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function $a(a){return a+(a>68?1900:2e3)}function _a(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function ab(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function bb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function cb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function db(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function eb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function fb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function gb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=pg(b)/60|0,e=pg(b)%60;return c+Ra(d,"0",2)+Ra(e,"0",2)}function hb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function ib(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function jb(){}function kb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function lb(a,b){a&&uh.hasOwnProperty(a.type)&&uh[a.type](a,b)}function mb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function nb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)mb(a[c],b,1);b.polygonEnd()}function ob(){function a(a,b){a*=Ng,b=b*Ng/2+Jg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);wh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;xh.point=function(g,h){xh.point=a,d=(b=g)*Ng,e=Math.cos(h=(c=h)*Ng/2+Jg/4),f=Math.sin(h)},xh.lineEnd=function(){a(b,c)}}function pb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function qb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function rb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function sb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function tb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function ub(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function vb(a){return[Math.atan2(a[1],a[0]),ba(a[2])]}function wb(a,b){return pg(a[0]-b[0])<Hg&&pg(a[1]-b[1])<Hg}function xb(a,b){a*=Ng;var c=Math.cos(b*=Ng);yb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function yb(a,b,c){++yh,Ah+=(a-Ah)/yh,Bh+=(b-Bh)/yh,Ch+=(c-Ch)/yh}function zb(){function a(a,e){a*=Ng;var f=Math.cos(e*=Ng),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);zh+=j,Dh+=j*(b+(b=g)),Eh+=j*(c+(c=h)),Fh+=j*(d+(d=i)),yb(b,c,d)}var b,c,d;Jh.point=function(e,f){e*=Ng;var g=Math.cos(f*=Ng);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Jh.point=a,yb(b,c,d)}}function Ab(){Jh.point=xb}function Bb(){function a(a,b){a*=Ng;var c=Math.cos(b*=Ng),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-aa(n)/m,p=Math.atan2(m,n);Gh+=o*j,Hh+=o*k,Ih+=o*l,zh+=p,Dh+=p*(d+(d=g)),Eh+=p*(e+(e=h)),Fh+=p*(f+(f=i)),yb(d,e,f)}var b,c,d,e,f;Jh.point=function(g,h){b=g,c=h,Jh.point=a,g*=Ng;var i=Math.cos(h*=Ng);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),yb(d,e,f)},Jh.lineEnd=function(){a(b,c),Jh.lineEnd=Ab,Jh.point=xb}}function Cb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Db(){return!0}function Eb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(wb(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Gb(c,a,null,!0),j=new Gb(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Gb(d,a,null,!1),j=new Gb(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Fb(f),Fb(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Fb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Gb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Hb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Ib))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=bg.merge(n);var a=Ob(r,o);n.length?(v||(f.polygonStart(),v=!0),Eb(n,Kb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Jb(),u=b(t),v=!1;return s}}function Ib(a){return a.length>1}function Jb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:s,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Kb(a,b){return((a=a.x)[0]<0?a[1]-Mg-Hg:Mg-a[1])-((b=b.x)[0]<0?b[1]-Mg-Hg:Mg-b[1])}function Lb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Jg:-Jg,i=pg(f-c);pg(i-Jg)<Hg?(a.point(c,d=(d+g)/2>0?Mg:-Mg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Jg&&(pg(c-e)<Hg&&(c-=e*Hg),pg(f-h)<Hg&&(f-=h*Hg),d=Mb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Mb(a,b,c,d){var e,f,g=Math.sin(a-c);return pg(g)>Hg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Nb(a,b,c,d){var e;if(null==a)e=c*Mg,d.point(-Jg,e),d.point(0,e),d.point(Jg,e),d.point(Jg,0),d.point(Jg,-e),d.point(0,-e),d.point(-Jg,-e),d.point(-Jg,0),d.point(-Jg,e);else if(pg(a[0]-b[0])>Hg){var f=a[0]<b[0]?Jg:-Jg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Ob(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;wh.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Jg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Jg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Jg,z=o*t;if(wh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Kg:v,y^m>=c^r>=c){var A=rb(pb(l),pb(a));ub(A);var B=rb(e,A);ub(B);var C=(y^v>=0?-1:1)*ba(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Hg>f||Hg>f&&0>wh)^1&g}function Pb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Jg:-Jg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(wb(c,n)||wb(o,n))&&(o[0]+=Hg,o[1]+=Hg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&wb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=pb(a),e=pb(b),g=[1,0,0],h=rb(d,e),i=qb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=rb(g,h),o=tb(g,l),p=tb(h,m);sb(o,p);var q=n,r=qb(o,q),s=qb(q,q),t=r*r-s*(qb(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=tb(q,(-r-u)/s);if(sb(v,o),v=vb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=pg(B-Jg)<Hg,D=C||Hg>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(pg(v[0]-x)<Hg?z:A):z<=v[1]&&v[1]<=A:B>Jg^(x<=v[0]&&v[0]<=y)){var E=tb(q,(-r+u)/s);return sb(E,o),[v,vb(E)]}}}function e(b,c){var d=g?a:Jg-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=pg(f)>Hg,i=oc(a,6*Ng);return Hb(b,c,i,g?[0,-a]:[-Jg,a-Jg])}function Qb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Rb(a,b,c,d){function e(d,e){return pg(d[0]-a)<Hg?e>0?0:3:pg(d[0]-c)<Hg?e>0?2:1:pg(d[1]-b)<Hg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&_(j,f,a)>0&&++b:f[1]<=d&&_(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Lh,Math.min(Lh,a)),b=Math.max(-Lh,Math.min(Lh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Jb(),C=Qb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=bg.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Eb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Sb(a){var b=0,c=Jg/3,d=gc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Jg/180,c=a[1]*Jg/180):[b/Jg*180,c/Jg*180]},e}function Tb(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ba((f-(a*a+c*c)*e*e)/(2*e))]},c}function Ub(){function a(a,b){Nh+=e*a-d*b,d=a,e=b}var b,c,d,e;Sh.point=function(f,g){Sh.point=a,b=d=f,c=e=g},Sh.lineEnd=function(){a(b,c)}}function Vb(a,b){Oh>a&&(Oh=a),a>Qh&&(Qh=a),Ph>b&&(Ph=b),b>Rh&&(Rh=b)}function Wb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Xb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Xb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Xb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Yb(a,b){Ah+=a,Bh+=b,++Ch}function Zb(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Dh+=g*(b+a)/2,Eh+=g*(c+d)/2,Fh+=g,Yb(b=a,c=d)}var b,c;Uh.point=function(d,e){Uh.point=a,Yb(b=d,c=e)}}function $b(){Uh.point=Yb}function _b(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Dh+=g*(d+a)/2,Eh+=g*(e+b)/2,Fh+=g,g=e*a-d*b,Gh+=g*(d+a),Hh+=g*(e+b),Ih+=3*g,Yb(d=a,e=b)}var b,c,d,e;Uh.point=function(f,g){Uh.point=a,Yb(b=d=f,c=e=g)},Uh.lineEnd=function(){a(b,c)}}function ac(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Kg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:s};return h}function bc(a){function b(a){return(h?d:c)(a)}function c(b){return ec(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=pb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=pg(pg(x)-1)<Hg||pg(d-m)<Hg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||pg((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Ng),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function cc(a){var b=bc(function(b,c){return a([b*Og,c*Og])});return function(a){return hc(b(a))}}function dc(a){this.stream=a}function ec(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function fc(a){return gc(function(){return a})()}function gc(a){function b(a){return a=h(a[0]*Ng,a[1]*Ng),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Og,a[1]*Og]}function d(){h=Cb(g=kc(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=bc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,u=Kh,v=Ba,w=null,x=null;return b.stream=function(a){return k&&(k.valid=!1),k=hc(u(g,l(v(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(u=null==a?(w=a,Kh):Pb((w=+a)*Ng),e()):w},b.clipExtent=function(a){return arguments.length?(x=a,v=a?Rb(a[0][0],a[0][1],a[1][0],a[1][1]):Ba,e()):x},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Ng,q=a[1]%360*Ng,d()):[p*Og,q*Og]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Ng,s=a[1]%360*Ng,t=a.length>2?a[2]%360*Ng:0,d()):[r*Og,s*Og,t*Og]},bg.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function hc(a){return ec(a,function(b,c){a.point(b*Ng,c*Ng)})}function ic(a,b){return[a,b]}function jc(a,b){return[a>Jg?a-Kg:-Jg>a?a+Kg:a,b]}function kc(a,b,c){return a?b||c?Cb(mc(a),nc(b,c)):mc(a):b||c?nc(b,c):jc}function lc(a){return function(b,c){return b+=a,[b>Jg?b-Kg:-Jg>b?b+Kg:b,c]}}function mc(a){var b=lc(a);return b.invert=lc(-a),b}function nc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),ba(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),ba(k*d-h*e)]},c}function oc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=pc(c,e),f=pc(c,f),(g>0?f>e:e>f)&&(e+=g*Kg)):(e=a+g*Kg,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=vb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function pc(a,b){var c=pb(b);c[0]-=a,ub(c);var d=aa(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Hg)%(2*Math.PI)}function qc(a,b,c){var d=bg.range(a,b-Hg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function rc(a,b,c){var d=bg.range(a,b-Hg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function sc(a){return a.source}function tc(a){return a.target}function uc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(fa(d-b)+e*g*fa(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Og,Math.atan2(g,Math.sqrt(d*d+e*e))*Og]}:function(){return[a*Og,b*Og]};return o.distance=m,o}function vc(){function a(a,e){var f=Math.sin(e*=Ng),g=Math.cos(e),h=pg((a*=Ng)-b),i=Math.cos(h);Vh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Wh.point=function(e,f){b=e*Ng,c=Math.sin(f*=Ng),d=Math.cos(f),Wh.point=a},Wh.lineEnd=function(){Wh.point=Wh.lineEnd=s}}function wc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function xc(a,b){function c(a,b){g>0?-Mg+Hg>b&&(b=-Mg+Hg):b>Mg-Hg&&(b=Mg-Hg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Jg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=$(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Mg]},c):zc}function yc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return pg(e)<Hg?ic:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-$(e)*Math.sqrt(a*a+c*c)]},c)}function zc(a,b){return[a,Math.log(Math.tan(Jg/4+b/2))]}function Ac(a){var b,c=fc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Jg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Bc(a,b){return[Math.log(Math.tan(Jg/4+b/2)),-a]}function Cc(a){return a[0]}function Dc(a){return a[1]}function Ec(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&_(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Fc(a,b){return a[0]-b[0]||a[1]-b[1]}function Gc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Hc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Ic(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Jc(){cd(this),this.edge=this.site=this.circle=null}function Kc(a){var b=gi.pop()||new Jc;return b.site=a,b}function Lc(a){Vc(a),di.remove(a),gi.push(a),cd(a)}function Mc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Lc(a);for(var i=f;i.circle&&pg(c-i.circle.x)<Hg&&pg(d-i.circle.cy)<Hg;)f=i.P,h.unshift(i),Lc(i),i=f;h.unshift(i),Vc(i);for(var j=g;j.circle&&pg(c-j.circle.x)<Hg&&pg(d-j.circle.cy)<Hg;)g=j.N,h.push(j),Lc(j),j=g;h.push(j),Vc(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],_c(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Zc(i.site,j.site,null,e),Uc(i),Uc(j)}function Nc(a){for(var b,c,d,e,f=a.x,g=a.y,h=di._;h;)if(d=Oc(h,g)-f,d>Hg)h=h.L;else{if(e=f-Pc(h,g),!(e>Hg)){d>-Hg?(b=h.P,c=h):e>-Hg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Kc(a);if(di.insert(b,i),b||c){if(b===c)return Vc(b),c=Kc(b.site),di.insert(i,c),i.edge=c.edge=Zc(b.site,i.site),Uc(b),void Uc(c);if(!c)return void(i.edge=Zc(b.site,i.site));Vc(b),Vc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};_c(c.edge,j,o,u),i.edge=Zc(j,a,null,u),c.edge=Zc(a,o,null,u),Uc(b),Uc(c)}}function Oc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Pc(a,b){var c=a.N;if(c)return Oc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Qc(a){this.site=a,this.edges=[]}function Rc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=ci,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(pg(d-b)>Hg||pg(e-c)>Hg)&&(h.splice(g,0,new ad($c(f.site,k,pg(d-l)<Hg&&o-e>Hg?{x:l,y:pg(b-l)<Hg?c:o}:pg(e-o)<Hg&&m-d>Hg?{x:pg(c-o)<Hg?b:m,y:o}:pg(d-m)<Hg&&e-n>Hg?{x:m,y:pg(b-m)<Hg?c:n}:pg(e-n)<Hg&&d-l>Hg?{x:pg(c-n)<Hg?b:l,y:n}:null),f.site,null)),++i)}function Sc(a,b){return b.angle-a.angle}function Tc(){cd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Uc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Ig)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=hi.pop()||new Tc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=fi._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}fi.insert(s,r),s||(ei=r)}}}}function Vc(a){var b=a.circle;b&&(b.P||(ei=b.N),fi.remove(b),hi.push(b),cd(b),a.circle=null)}function Wc(a){for(var b,c=bi,d=Qb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Xc(b,a)||!d(b)||pg(b.a.x-b.b.x)<Hg&&pg(b.a.y-b.b.y)<Hg)&&(b.a=b.b=null,c.splice(e,1))}function Xc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Yc(a,b){this.l=a,this.r=b,this.a=this.b=null}function Zc(a,b,c,d){var e=new Yc(a,b);return bi.push(e),c&&_c(e,a,b,c),d&&_c(e,b,a,d),ci[a.i].edges.push(new ad(e,a,b)),ci[b.i].edges.push(new ad(e,b,a)),e}function $c(a,b,c){var d=new Yc(a,null);return d.a=b,d.b=c,bi.push(d),d}function _c(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ad(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function bd(){this._=null}function cd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function dd(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function ed(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function fd(a){for(;a.L;)a=a.L;return a}function gd(a,b){var c,d,e,f=a.sort(hd).pop();for(bi=[],ci=new Array(a.length),di=new bd,fi=new bd;;)if(e=ei,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&(ci[f.i]=new Qc(f),Nc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Mc(e.arc)}b&&(Wc(b),Rc(b));var g={cells:ci,edges:bi};return di=fi=bi=ci=null,g}function hd(a,b){return b.y-a.y||b.x-a.x}function id(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function jd(a){return a.x}function kd(a){return a.y}function ld(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function md(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&md(a,i[0],c,d,g,h),i[1]&&md(a,i[1],g,d,e,h),i[2]&&md(a,i[2],c,h,g,f),i[3]&&md(a,i[3],g,h,e,f)}}function nd(a,b,c,d,e,f,g){var h,i=1/0;return function j(a,k,l,m,n){if(!(k>f||l>g||d>m||e>n)){if(o=a.point){var o,p=b-o[0],q=c-o[1],r=p*p+q*q;if(i>r){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=a.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;z>y;++y)if(a=t[3&y])switch(3&y){case 0:j(a,k,l,u,v);break;case 1:j(a,u,l,m,v);break;case 2:j(a,k,v,u,n);break;case 3:j(a,u,v,m,n)}}}(a,d,e,f,g),h}function od(a,b){a=bg.rgb(a),b=bg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+ua(Math.round(c+f*a))+ua(Math.round(d+g*a))+ua(Math.round(e+h*a))}}function pd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=sd(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function qd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function rd(a,b){var c,d,e,f=ji.lastIndex=ki.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=ji.exec(a))&&(d=ki.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:qd(c,d)})),f=ki.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function sd(a,b){for(var c,d=bg.interpolators.length;--d>=0&&!(c=bg.interpolators[d](a,b)););return c}function td(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(sd(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function ud(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function vd(a){return function(b){return 1-a(1-b)}}function wd(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function xd(a){return a*a}function yd(a){return a*a*a}function zd(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Ad(a){return function(b){return Math.pow(b,a)}}function Bd(a){return 1-Math.cos(a*Mg)}function Cd(a){return Math.pow(2,10*(a-1))}function Dd(a){return 1-Math.sqrt(1-a*a)}function Ed(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Kg*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Kg/b)}}function Fd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Gd(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Hd(a,b){a=bg.hcl(a),b=bg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ka(c+f*a,d+g*a,e+h*a)+""}}function Id(a,b){a=bg.hsl(a),b=bg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ia(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){a=bg.lab(a),b=bg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ma(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Ld(a){var b=[a.a,a.b],c=[a.c,a.d],d=Nd(b),e=Md(b,c),f=Nd(Od(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Og,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Og:0}function Md(a,b){return a[0]*b[0]+a[1]*b[1]}function Nd(a){var b=Math.sqrt(Md(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Od(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Pd(a,b){var c,d=[],e=[],f=bg.transform(a),g=bg.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:qd(h[0],i[0])},{i:3,x:qd(h[1],i[1])})):i[0]||i[1]?d.push("translate("+i+")"):d.push(""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:qd(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:qd(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:qd(n[0],o[0])},{i:c-2,x:qd(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Qd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Rd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Sd(a){for(var b=a.source,c=a.target,d=Ud(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Td(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Ud(a,b){if(a===b)return a;for(var c=Td(a),d=Td(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Vd(a){a.fixed|=2}function Wd(a){a.fixed&=-7}function Xd(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Yd(a){a.fixed&=-5}function Zd(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(Zd(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function $d(a,b){return bg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=ee,a}function _d(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function ae(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function be(a){return a.children}function ce(a){return a.value}function de(a,b){return b.value-a.value}function ee(a){return bg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function fe(a){return a.x}function ge(a){return a.y}function he(a,b,c){a.y0=b,a.y=c}function ie(a){return bg.range(a.length)}function je(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;
return d}function ke(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function le(a){return a.reduce(me,0)}function me(a,b){return a+b[1]}function ne(a,b){return oe(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function oe(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function pe(a){return[bg.min(a),bg.max(a)]}function qe(a,b){return a.value-b.value}function re(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function se(a,b){a._pack_next=b,b._pack_prev=a}function te(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function ue(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(ve),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],ye(d,e,f),b(f),re(d,f),d._pack_prev=f,re(f,e),e=d._pack_next,g=3;j>g;g++){ye(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(te(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!te(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?se(d,e=h):se(d=i,e),g--):(re(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(we)}}function ve(a){a._pack_next=a._pack_prev=a}function we(a){delete a._pack_next,delete a._pack_prev}function xe(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)xe(e[f],b,c,d)}function ye(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function ze(a,b){return a.parent==b.parent?1:2}function Ae(a){var b=a.children;return b.length?b[0]:a.t}function Be(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Ce(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function De(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Ee(a,b,c){return a.a.parent===b.parent?a.a:c}function Fe(a){return 1+bg.max(a,function(a){return a.y})}function Ge(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function He(a){var b=a.children;return b&&b.length?He(b[0]):a}function Ie(a){var b,c=a.children;return c&&(b=c.length)?Ie(c[b-1]):a}function Je(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ke(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Le(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Me(a){return a.rangeExtent?a.rangeExtent():Le(a.range())}function Ne(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Oe(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Pe(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:vi}function Qe(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=bg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Re(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Qe:Ne,i=d?Rd:Qd;return g=e(a,b,i,c),h=e(b,a,i,sd),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Kd)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Ve(a,b)},f.tickFormat=function(b,c){return We(a,b,c)},f.nice=function(b){return Te(a,b),e()},f.copy=function(){return Re(a,b,c,d)},e()}function Se(a,b){return bg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Te(a,b){return Oe(a,Pe(Ue(a,b)[2]))}function Ue(a,b){null==b&&(b=10);var c=Le(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Ve(a,b){return bg.range.apply(bg,Ue(a,b))}function We(a,b,c){var d=Ue(a,b);if(c){var e=jh.exec(c);if(e.shift(),"s"===e[8]){var f=bg.formatPrefix(Math.max(pg(d[0]),pg(d[1])));return e[7]||(e[7]="."+Xe(f.scale(d[2]))),e[8]="f",c=bg.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+Ye(e[8],d)),c=e.join("")}else c=",."+Xe(d[2])+"f";return bg.format(c)}function Xe(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Ye(a,b){var c=Xe(b[2]);return a in wi?Math.abs(c-Xe(Math.max(pg(b[0]),pg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Ze(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Oe(d.map(e),c?Math:yi);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Le(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return xi;arguments.length<2?b=xi:"function"!=typeof b&&(b=bg.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return Ze(a.copy(),b,c,d)},Se(g,a)}function $e(a,b,c){function d(b){return a(e(b))}var e=_e(b),f=_e(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return Ve(c,a)},d.tickFormat=function(a,b){return We(c,a,b)},d.nice=function(a){return d.domain(Te(c,a))},d.exponent=function(g){return arguments.length?(e=_e(b=g),f=_e(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return $e(a.copy(),b,c)},Se(d,a)}function _e(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function af(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return bg.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new h;for(var f,g=-1,i=d.length;++g<i;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Le(b.a[0])},c.copy=function(){return af(a,b)},c.domain(a)}function bf(d,e){function f(){var a=0,b=e.length;for(h=[];++a<b;)h[a-1]=bg.quantile(d,a/b);return g}function g(a){return isNaN(a=+a)?void 0:e[bg.bisect(h,a)]}var h;return g.domain=function(e){return arguments.length?(d=e.map(b).filter(c).sort(a),f()):d},g.range=function(a){return arguments.length?(e=a,f()):e},g.quantiles=function(){return h},g.invertExtent=function(a){return a=e.indexOf(a),0>a?[NaN,NaN]:[a>0?h[a-1]:d[0],a<h.length?h[a]:d[d.length-1]]},g.copy=function(){return bf(d,e)},f()}function cf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return cf(a,b,c)},e()}function df(a,b){function c(c){return c>=c?b[bg.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return df(a,b)},c}function ef(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Ve(a,b)},b.tickFormat=function(b,c){return We(a,b,c)},b.copy=function(){return ef(a)},b}function ff(){return 0}function gf(a){return a.innerRadius}function hf(a){return a.outerRadius}function jf(a){return a.startAngle}function kf(a){return a.endAngle}function lf(a){return a&&a.padAngle}function mf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function nf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(0>r?-1:1)*Math.sqrt(t*t*s-u*u),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function of(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Aa(c),o=Aa(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Cc,d=Dc,e=Db,f=pf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Ei.get(a)||pf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function pf(a){return a.join("L")}function qf(a){return pf(a)+"Z"}function rf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function sf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function tf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function uf(a,b){return a.length<4?pf(a):a[1]+xf(a.slice(1,-1),yf(a,b))}function vf(a,b){return a.length<3?pf(a):a[0]+xf((a.push(a[0]),a),yf([a[a.length-2]].concat(a,[a[1]]),b))}function wf(a,b){return a.length<3?pf(a):a[0]+xf(a,yf(a,b))}function xf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return pf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function yf(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function zf(a){if(a.length<3)return pf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Df(Hi,g),",",Df(Hi,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Ef(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Af(a){if(a.length<4)return pf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Df(Hi,f)+","+Df(Hi,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Ef(c,f,g);return c.join("")}function Bf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Df(Hi,g),",",Df(Hi,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Ef(b,g,h);return b.join("")}function Cf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return zf(a)}function Df(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Ef(a,b,c){a.push("C",Df(Fi,b),",",Df(Fi,c),",",Df(Gi,b),",",Df(Gi,c),",",Df(Hi,b),",",Df(Hi,c))}function Ff(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Gf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Ff(e,f);++b<c;)d[b]=(g+(g=Ff(e=f,f=a[b+1])))/2;return d[b]=g,d}function Hf(a){for(var b,c,d,e,f=[],g=Gf(a),h=-1,i=a.length-1;++h<i;)b=Ff(a[h],a[h+1]),pg(b)<Hg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function If(a){return a.length<3?pf(a):a[0]+xf(a,Hf(a))}function Jf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Mg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Kf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Aa(c),v=Aa(e),w=c===d?function(){return n}:Aa(d),x=e===f?function(){return o}:Aa(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Cc,d=Cc,e=0,f=Dc,g=Db,h=pf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Ei.get(a)||pf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Lf(a){return a.radius}function Mf(a){return[a.x,a.y]}function Nf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Mg;return[c*Math.cos(d),c*Math.sin(d)]}}function Of(){return 64}function Pf(){return"circle"}function Qf(a){var b=Math.sqrt(a/Jg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Rf(a,b,c){return ug(a,Ni),a.namespace=b,a.id=c,a}function Sf(a,b,c,d){var e=a.id,f=a.namespace;return O(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function Tf(a){return null==a&&(a=""),function(){this.textContent=a}}function Uf(a){return null==a?"__transition__":"__transition_"+a+"__"}function Vf(a,b,c,d,e){var f=a[c]||(a[c]={active:0,count:0}),g=f[d];if(!g){var i=e.time;g=f[d]={tween:new h,time:i,delay:e.delay,duration:e.duration,ease:e.ease},e=null,++f.count,bg.timer(function(e){function h(c){return f.active>d?k(!1):(f.active=d,g.event&&g.event.start.call(a,n,b),g.tween.forEach(function(c,d){(d=d.call(a,n,b))&&q.push(d)}),m=g.ease,l=g.duration,void bg.timer(function(){return p.c=j(c||1)?Db:j,1},0,i))}function j(b){if(f.active!==d)return k(!1);for(var c=b/l,e=m(c),g=q.length;g>0;)q[--g].call(a,e);return c>=1?k(!0):void 0}function k(e){return g.event&&g.event[e?"end":"interrupt"].call(a,n,b),--f.count?delete f[d]:delete a[c],1}var l,m,n=a.__data__,o=g.delay,p=gh,q=[];return p.t=o+i,e>=o?h(e-o):void(p.c=h)},0,i)}}function Wf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Xf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Yf(a){return a.toISOString()}function Zf(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=bg.bisect(Wi,e);return f==Wi.length?[b.year,Ue(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Wi[f-1]<Wi[f]/e?f-1:f]:[Zi,Ue(a,c)[2]]}return d.invert=function(b){return $f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map($f)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,$f(+c+1),b).length}var f=d.domain(),g=Le(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Oe(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=$f(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=$f(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Le(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],$f(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Zf(a.copy(),b,c)},Se(d,a)}function $f(a){return new Date(a)}function _f(a){return JSON.parse(a.responseText)}function ag(a){var b=eg.createRange();return b.selectNode(eg.body),b.createContextualFragment(a.responseText)}var bg={version:"3.5.0"};Date.now||(Date.now=function(){return+new Date});var cg=[].slice,dg=function(a){return cg.call(a)},eg=document,fg=eg.documentElement,gg=window;try{dg(fg.childNodes)[0].nodeType}catch(hg){dg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}try{eg.createElement("div").style.setProperty("opacity",0,"")}catch(ig){var jg=gg.Element.prototype,kg=jg.setAttribute,lg=jg.setAttributeNS,mg=gg.CSSStyleDeclaration.prototype,ng=mg.setProperty;jg.setAttribute=function(a,b){kg.call(this,a,b+"")},jg.setAttributeNS=function(a,b,c){lg.call(this,a,b,c+"")},mg.setProperty=function(a,b,c){ng.call(this,a,b+"",c)}}bg.ascending=a,bg.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},bg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},bg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},bg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},bg.sum=function(a,b){var d,e=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)c(d=+a[g])&&(e+=d);else for(;++g<f;)c(d=+b.call(a,a[g],g))&&(e+=d);return e},bg.mean=function(a,d){var e,f=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)c(e=b(a[h]))?f+=e:--i;else for(;++h<g;)c(e=b(d.call(a,a[h],h)))?f+=e:--i;return i?f/i:void 0},bg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},bg.median=function(d,e){var f,g=[],h=d.length,i=-1;if(1===arguments.length)for(;++i<h;)c(f=b(d[i]))&&g.push(f);else for(;++i<h;)c(f=b(e.call(d,d[i],i)))&&g.push(f);return g.length?bg.quantile(g.sort(a),.5):void 0};var og=d(a);bg.bisectLeft=og.left,bg.bisect=bg.bisectRight=og.right,bg.bisector=function(b){return d(1===b.length?function(c,d){return a(b(c),d)}:b)},bg.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,2>f&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},bg.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},bg.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},bg.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=bg.min(arguments,e),c=new Array(b);++a<b;)for(var d,f=-1,g=c[a]=new Array(d);++f<d;)g[f]=arguments[f][a];return c},bg.transpose=function(a){return bg.zip.apply(bg,a)},bg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},bg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},bg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},bg.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var pg=Math.abs;bg.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],g=f(pg(c)),h=-1;if(a*=g,b*=g,c*=g,0>c)for(;(d=a+c*++h)>b;)e.push(d/g);else for(;(d=a+c*++h)<b;)e.push(d/g);return e},bg.map=function(a,b){var c=new h;if(a instanceof h)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var qg="__proto__",rg="\x00";g(h,{has:k,get:function(a){return this._[i(a)]},set:function(a,b){return this._[i(a)]=b},remove:l,keys:m,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:j(b),value:this._[b]});return a},size:n,empty:o,forEach:function(a){for(var b in this._)a.call(this,j(b),this._[b])}}),bg.nest=function(){function a(b,g,i){if(i>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var j,k,l,m,n=-1,o=g.length,p=f[i++],q=new h;++n<o;)(m=q.get(j=p(k=g[n])))?m.push(k):q.set(j,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,i))}):(k={},l=function(c,d){k[c]=a(b,d,i)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(bg.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},bg.set=function(a){var b=new p;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},g(p,{has:k,add:function(a){return this._[i(a+="")]=!0,a},remove:l,values:m,size:n,empty:o,forEach:function(a){for(var b in this._)a.call(this,j(b))}}),bg.behavior={},bg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=q(a,b,b[c]);return a};var sg=["webkit","ms","moz","Moz","o","O"];bg.dispatch=function(){for(var a=new t,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=u(a);return a},t.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},bg.event=null,bg.requote=function(a){return a.replace(tg,"\\$&")};var tg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ug={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},vg=function(a,b){return b.querySelector(a)},wg=function(a,b){return b.querySelectorAll(a)},xg=fg.matches||fg[r(fg,"matchesSelector")],yg=function(a,b){return xg.call(a,b)};"function"==typeof Sizzle&&(vg=function(a,b){return Sizzle(a,b)[0]||null},wg=Sizzle,yg=Sizzle.matchesSelector),bg.selection=function(){return Cg};var zg=bg.selection.prototype=[];zg.select=function(a){var b,c,d,e,f=[];a=z(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return y(f)},zg.selectAll=function(a){var b,c,d=[];a=A(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=dg(a.call(c,c.__data__,h,e))),b.parentNode=c);return y(d)};var Ag={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};bg.ns={prefix:Ag,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.slice(0,b),a=a.slice(b+1)),Ag.hasOwnProperty(c)?{space:Ag[c],local:a}:a}},zg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=bg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(B(b,a[b]));return this}return this.each(B(a,b))},zg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=E(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!D(a[e]).test(b))return!1;return!0}for(b in a)this.each(F(b,a[b]));return this}return this.each(F(a,b))},zg.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(H(c,a[c],b));return this}if(2>d)return gg.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(H(a,b,c))},zg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(I(b,a[b]));return this}return this.each(I(a,b))},zg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},zg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},zg.append=function(a){return a=J(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},zg.insert=function(a,b){return a=J(a),b=z(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},zg.remove=function(){return this.each(K)},zg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new h,s=new Array(g);for(d=-1;++d<g;)r.has(q=b.call(e=a[d],e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q;for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=L(f),r.set(q,!0);for(d=-1;++d<g;)r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=L(f);for(;l>d;++d)o[d]=L(c[d]);for(;g>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,i.push(o),j.push(n),k.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var i=P([]),j=y([]),k=y([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return j.enter=function(){return i},j.exit=function(){return k},j},zg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},zg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=M(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return y(e)},zg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},zg.sort=function(a){a=N.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},zg.each=function(a){return O(this,function(b,c,d){a.call(b,b.__data__,c,d)})},zg.call=function(a){var b=dg(arguments);return a.apply(b[0]=this,b),this},zg.empty=function(){return!this.node()},zg.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},zg.size=function(){var a=0;return O(this,function(){++a}),a};var Bg=[];bg.selection.enter=P,bg.selection.enter.prototype=Bg,Bg.append=zg.append,Bg.empty=zg.empty,Bg.node=zg.node,Bg.call=zg.call,Bg.size=zg.size,Bg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return y(g)},Bg.insert=function(a,b){return arguments.length<2&&(b=Q(this)),zg.insert.call(this,a,b)},zg.transition=function(a){for(var b,c,d=Ji||++Oi,e=Uf(a),f=[],g=Ki||{time:Date.now(),ease:zd,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&Vf(c,k,e,d,g),b.push(c)}return Rf(f,e,d)},zg.interrupt=function(a){var b=Uf(a);return this.each(function(){var a=this[b];a&&++a.active})},bg.select=function(a){var b=["string"==typeof a?vg(a,eg):a];return b.parentNode=fg,y([b])},bg.selectAll=function(a){var b=dg("string"==typeof a?wg(a,eg):a);return b.parentNode=fg,y([b])};var Cg=bg.select(fg);zg.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(S(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(S(a,b,c))};var Dg=bg.map({mouseenter:"mouseover",mouseleave:"mouseout"});Dg.forEach(function(a){"on"+a in eg&&Dg.remove(a)});var Eg="onselectstart"in eg?null:r(fg.style,"userSelect"),Fg=0;bg.mouse=function(a){return W(a,w())};var Gg=/WebKit/.test(gg.navigator.userAgent)?-1:0;bg.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=w().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return W(a,d)},bg.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,b,e,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&bg.event.target===l),n({type:"dragend"}))}var j,k=this,l=bg.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=bg.select(e()).on(f+q,h).on(g+q,i),s=V(),t=b(m,p);d?(j=d.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=x(a,"drag","dragstart","dragend"),d=null,e=b(s,bg.mouse,Z,"mousemove","mouseup"),f=b(X,bg.touch,Y,"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},bg.rebind(a,c,"on")},bg.touches=function(a,b){return arguments.length<2&&(b=w().touches),b?dg(b).map(function(b){var c=W(a,b);return c.identifier=b.identifier,c}):[]};var Hg=1e-6,Ig=Hg*Hg,Jg=Math.PI,Kg=2*Jg,Lg=Kg-Hg,Mg=Jg/2,Ng=Jg/180,Og=180/Jg,Pg=Math.SQRT2,Qg=2,Rg=4;bg.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=da(p),g=f/(Qg*m)*(c*ea(Pg*b+p)-ca(p));return[d+g*j,e+g*k,f*c/da(Pg*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Pg*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Rg*l)/(2*f*Qg*m),o=(i*i-f*f-Rg*l)/(2*i*Qg*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Pg;return c.duration=1e3*s,c},bg.behavior.zoom=function(){function a(a){a.on(E,k).on(Ug+".zoom",m).on("dblclick.zoom",n).on(H,l);
}function b(a){return[(a[0]-z.x)/z.k,(a[1]-z.y)/z.k]}function c(a){return[a[0]*z.k+z.x,a[1]*z.k+z.y]}function d(a){z.k=Math.max(B[0],Math.min(B[1],a))}function e(a,b){b=c(b),z.x+=a[0]-b[0],z.y+=a[1]-b[1]}function f(b,c,f,g){b.__chart__={x:z.x,y:z.y,k:z.k},d(Math.pow(2,g)),e(p=c,f),b=bg.select(b),C>0&&(b=b.transition().duration(C)),b.call(a.event)}function g(){u&&u.domain(t.range().map(function(a){return(a-z.x)/z.k}).map(t.invert)),y&&y.domain(w.range().map(function(a){return(a-z.y)/z.k}).map(w.invert))}function h(a){D++||a({type:"zoomstart"})}function i(a){g(),a({type:"zoom",scale:z.k,translate:[z.x,z.y]})}function j(a){--D||a({type:"zoomend"}),p=null}function k(){function a(){k=1,e(bg.mouse(d),m),i(g)}function c(){l.on(F,null).on(G,null),n(k&&bg.event.target===f),j(g)}var d=this,f=bg.event.target,g=I.of(d,arguments),k=0,l=bg.select(gg).on(F,a).on(G,c),m=b(bg.mouse(d)),n=V();R(d),h(g)}function l(){function a(){var a=bg.touches(o);return n=z.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),a}function c(){var b=bg.event.target;bg.select(b).on(u,g).on(w,m),x.push(b);for(var c=bg.event.changedTouches,d=0,e=c.length;e>d;++d)q[c[d].identifier]=null;var h=a(),i=Date.now();if(1===h.length){if(500>i-s){var j=h[0];f(o,j,q[j.identifier],Math.floor(Math.log(z.k)/Math.LN2)+1),v()}s=i}else if(h.length>1){var j=h[0],k=h[1],l=j[0]-k[0],n=j[1]-k[1];r=l*l+n*n}}function g(){var a,b,c,f,g=bg.touches(o);R(o);for(var h=0,j=g.length;j>h;++h,f=null)if(c=g[h],f=q[c.identifier]){if(b)break;a=c,b=f}if(f){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+f[0])/2,(b[1]+f[1])/2],d(l*n)}s=null,e(a,b),i(p)}function m(){if(bg.event.touches.length){for(var b=bg.event.changedTouches,c=0,d=b.length;d>c;++c)delete q[b[c].identifier];for(var e in q)return void a()}bg.selectAll(x).on(t,null),y.on(E,k).on(H,l),A(),j(p)}var n,o=this,p=I.of(o,arguments),q={},r=0,t=".zoom-"+bg.event.changedTouches[0].identifier,u="touchmove"+t,w="touchend"+t,x=[],y=bg.select(o),A=V();c(),h(p),y.on(E,null).on(H,c)}function m(){var a=I.of(this,arguments);r?clearTimeout(r):(o=b(p=q||bg.mouse(this)),R(this),h(a)),r=setTimeout(function(){r=null,j(a)},50),v(),d(Math.pow(2,.002*Sg())*z.k),e(p,o),i(a)}function n(){var a=bg.mouse(this),c=Math.log(z.k)/Math.LN2;f(this,a,b(a),bg.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var o,p,q,r,s,t,u,w,y,z={x:0,y:0,k:1},A=[960,500],B=Tg,C=250,D=0,E="mousedown.zoom",F="mousemove.zoom",G="mouseup.zoom",H="touchstart.zoom",I=x(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=I.of(this,arguments),b=z;Ji?bg.select(this).transition().each("start.zoom",function(){z=this.__chart__||{x:0,y:0,k:1},h(a)}).tween("zoom:zoom",function(){var c=A[0],d=A[1],e=p?p[0]:c/2,f=p?p[1]:d/2,g=bg.interpolateZoom([(e-z.x)/z.k,(f-z.y)/z.k,c/z.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=z={x:e-d[0]*h,y:f-d[1]*h,k:h},i(a)}}).each("interrupt.zoom",function(){j(a)}).each("end.zoom",function(){j(a)}):(this.__chart__=z,h(a),i(a),j(a))})},a.translate=function(b){return arguments.length?(z={x:+b[0],y:+b[1],k:z.k},g(),a):[z.x,z.y]},a.scale=function(b){return arguments.length?(z={x:z.x,y:z.y,k:+b},g(),a):z.k},a.scaleExtent=function(b){return arguments.length?(B=null==b?Tg:[+b[0],+b[1]],a):B},a.center=function(b){return arguments.length?(q=b&&[+b[0],+b[1]],a):q},a.size=function(b){return arguments.length?(A=b&&[+b[0],+b[1]],a):A},a.duration=function(b){return arguments.length?(C=+b,a):C},a.x=function(b){return arguments.length?(u=b,t=b.copy(),z={x:0,y:0,k:1},a):u},a.y=function(b){return arguments.length?(y=b,w=b.copy(),z={x:0,y:0,k:1},a):y},bg.rebind(a,I,"on")};var Sg,Tg=[0,1/0],Ug="onwheel"in eg?(Sg=function(){return-bg.event.deltaY*(bg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in eg?(Sg=function(){return bg.event.wheelDelta},"mousewheel"):(Sg=function(){return-bg.event.detail},"MozMousePixelScroll");bg.color=ga,ga.prototype.toString=function(){return this.rgb()+""},bg.hsl=ha;var Vg=ha.prototype=new ga;Vg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,this.l/a)},Vg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,a*this.l)},Vg.rgb=function(){return ia(this.h,this.s,this.l)},bg.hcl=ja;var Wg=ja.prototype=new ga;Wg.brighter=function(a){return new ja(this.h,this.c,Math.min(100,this.l+Xg*(arguments.length?a:1)))},Wg.darker=function(a){return new ja(this.h,this.c,Math.max(0,this.l-Xg*(arguments.length?a:1)))},Wg.rgb=function(){return ka(this.h,this.c,this.l).rgb()},bg.lab=la;var Xg=18,Yg=.95047,Zg=1,$g=1.08883,_g=la.prototype=new ga;_g.brighter=function(a){return new la(Math.min(100,this.l+Xg*(arguments.length?a:1)),this.a,this.b)},_g.darker=function(a){return new la(Math.max(0,this.l-Xg*(arguments.length?a:1)),this.a,this.b)},_g.rgb=function(){return ma(this.l,this.a,this.b)},bg.rgb=ra;var ah=ra.prototype=new ga;ah.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new ra(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new ra(e,e,e)},ah.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(a*this.r,a*this.g,a*this.b)},ah.hsl=function(){return wa(this.r,this.g,this.b)},ah.toString=function(){return"#"+ua(this.r)+ua(this.g)+ua(this.b)};var bh=bg.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});bh.forEach(function(a,b){bh.set(a,sa(b))}),bg.functor=Aa,bg.xhr=Ca(Ba),bg.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Da(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new p,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},bg.csv=bg.dsv(",","text/csv"),bg.tsv=bg.dsv("	","text/tab-separated-values");var ch,dh,eh,fh,gh,hh=gg[r(gg,"requestAnimationFrame")]||function(a){setTimeout(a,17)};bg.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};dh?dh.n=f:ch=f,dh=f,eh||(fh=clearTimeout(fh),eh=1,hh(Ga))},bg.timer.flush=function(){Ha(),Ia()},bg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ih=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ka);bg.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=bg.round(a,Ja(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),ih[8+c/3]};var jh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,kh=bg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=bg.round(a,Ja(a,b))).toFixed(Math.max(0,Math.min(20,Ja(a*(1+1e-15),b))))}}),lh=bg.time={},mh=Date;Na.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){nh.setUTCDate.apply(this._,arguments)},setDay:function(){nh.setUTCDay.apply(this._,arguments)},setFullYear:function(){nh.setUTCFullYear.apply(this._,arguments)},setHours:function(){nh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){nh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){nh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){nh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){nh.setUTCSeconds.apply(this._,arguments)},setTime:function(){nh.setTime.apply(this._,arguments)}};var nh=Date.prototype;lh.year=Oa(function(a){return a=lh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),lh.years=lh.year.range,lh.years.utc=lh.year.utc.range,lh.day=Oa(function(a){var b=new mh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),lh.days=lh.day.range,lh.days.utc=lh.day.utc.range,lh.dayOfYear=function(a){var b=lh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=lh[a]=Oa(function(a){return(a=lh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=lh.year(a).getDay();return Math.floor((lh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});lh[a+"s"]=c.range,lh[a+"s"].utc=c.utc.range,lh[a+"OfYear"]=function(a){var c=lh.year(a).getDay();return Math.floor((lh.dayOfYear(a)+(c+b)%7)/7)}}),lh.week=lh.sunday,lh.weeks=lh.sunday.range,lh.weeks.utc=lh.sunday.utc.range,lh.weekOfYear=lh.sundayOfYear;var oh={"-":"",_:" ",0:"0"},ph=/^\s*\d+/,qh=/^%/;bg.locale=function(a){return{numberFormat:La(a),timeFormat:Qa(a)}};var rh=bg.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});bg.format=rh.numberFormat,bg.geo={},jb.prototype={s:0,t:0,add:function(a){kb(a,this.t,sh),kb(sh.s,this.s,this),this.s?this.t+=sh.t:this.s=sh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var sh=new jb;bg.geo.stream=function(a,b){a&&th.hasOwnProperty(a.type)?th[a.type](a,b):lb(a,b)};var th={Feature:function(a,b){lb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)lb(c[d].geometry,b)}},uh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){mb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mb(c[d],b,0)},Polygon:function(a,b){nb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)lb(c[d],b)}};bg.geo.area=function(a){return vh=0,bg.geo.stream(a,xh),vh};var vh,wh=new jb,xh={sphere:function(){vh+=4*Jg},point:s,lineStart:s,lineEnd:s,polygonStart:function(){wh.reset(),xh.lineStart=ob},polygonEnd:function(){var a=2*wh;vh+=0>a?4*Jg+a:a,xh.lineStart=xh.lineEnd=xh.point=s}};bg.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=pb([b*Ng,c*Ng]);if(r){var e=rb(r,d),f=[e[1],-e[0],0],g=rb(f,e);ub(g),g=vb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Og*j,q=pg(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Og;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Og;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=pg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;xh.point(a,c),b(a,c)}function f(){xh.lineStart()}function g(){e(p,q),xh.lineEnd(),pg(s)>Hg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,xh.polygonStart()},polygonEnd:function(){xh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>wh?(k=-(m=180),l=-(n=90)):s>Hg?n=90:-Hg>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],bg.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),bg.geo.centroid=function(a){yh=zh=Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=0,bg.geo.stream(a,Jh);var b=Gh,c=Hh,d=Ih,e=b*b+c*c+d*d;return Ig>e&&(b=Dh,c=Eh,d=Fh,Hg>zh&&(b=Ah,c=Bh,d=Ch),e=b*b+c*c+d*d,Ig>e)?[NaN,NaN]:[Math.atan2(c,b)*Og,ba(d/Math.sqrt(e))*Og]};var yh,zh,Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh={sphere:s,point:xb,lineStart:zb,lineEnd:Ab,polygonStart:function(){Jh.lineStart=Bb},polygonEnd:function(){Jh.lineStart=zb}},Kh=Hb(Db,Lb,Nb,[-Jg,-Jg/2]),Lh=1e9;bg.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Rb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(bg.geo.conicEqualArea=function(){return Sb(Tb)}).raw=Tb,bg.geo.albers=function(){return bg.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},bg.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=bg.geo.albers(),g=bg.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=bg.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Hg,l+.12*j+Hg],[k-.214*j-Hg,l+.234*j-Hg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Hg,l+.166*j+Hg],[k-.115*j-Hg,l+.234*j-Hg]]).stream(i).point,a},a.scale(1070)};var Mh,Nh,Oh,Ph,Qh,Rh,Sh={point:s,lineStart:s,lineEnd:s,polygonStart:function(){Nh=0,Sh.lineStart=Ub},polygonEnd:function(){Sh.lineStart=Sh.lineEnd=Sh.point=s,Mh+=pg(Nh/2)}},Th={point:Vb,lineStart:s,lineEnd:s,polygonStart:s,polygonEnd:s},Uh={point:Yb,lineStart:Zb,lineEnd:$b,polygonStart:function(){Uh.lineStart=_b},polygonEnd:function(){Uh.point=Yb,Uh.lineStart=Zb,Uh.lineEnd=$b}};bg.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),bg.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Mh=0,bg.geo.stream(a,e(Sh)),Mh},a.centroid=function(a){return Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=0,bg.geo.stream(a,e(Uh)),Ih?[Gh/Ih,Hh/Ih]:Fh?[Dh/Fh,Eh/Fh]:Ch?[Ah/Ch,Bh/Ch]:[NaN,NaN]},a.bounds=function(a){return Qh=Rh=-(Oh=Ph=1/0),bg.geo.stream(a,e(Th)),[[Oh,Ph],[Qh,Rh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||cc(a):Ba,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Wb:new ac(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(bg.geo.albersUsa()).context(null)},bg.geo.transform=function(a){return{stream:function(b){var c=new dc(b);for(var d in a)c[d]=a[d];return c}}},dc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},bg.geo.projection=fc,bg.geo.projectionMutator=gc,(bg.geo.equirectangular=function(){return fc(ic)}).raw=ic.invert=ic,bg.geo.rotation=function(a){function b(b){return b=a(b[0]*Ng,b[1]*Ng),b[0]*=Og,b[1]*=Og,b}return a=kc(a[0]%360*Ng,a[1]*Ng,a.length>2?a[2]*Ng:0),b.invert=function(b){return b=a.invert(b[0]*Ng,b[1]*Ng),b[0]*=Og,b[1]*=Og,b},b},jc.invert=ic,bg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=kc(-a[0]*Ng,-a[1]*Ng,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Og,a[1]*=Og}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=oc((b=+d)*Ng,e*Ng),a):b},a.precision=function(d){return arguments.length?(c=oc(b*Ng,(e=+d)*Ng),a):e},a.angle(90)},bg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Ng,e=a[1]*Ng,f=b[1]*Ng,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},bg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return bg.range(Math.ceil(f/q)*q,e,q).map(m).concat(bg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(bg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return pg(a%q)>Hg}).map(k)).concat(bg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return pg(a%r)>Hg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=qc(h,g,90),l=rc(d,c,s),m=qc(j,i,90),n=rc(f,e,s),a):s},a.majorExtent([[-180,-90+Hg],[180,90-Hg]]).minorExtent([[-180,-80-Hg],[180,80+Hg]])},bg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=sc,e=tc;return a.distance=function(){return bg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},bg.geo.interpolate=function(a,b){return uc(a[0]*Ng,a[1]*Ng,b[0]*Ng,b[1]*Ng)},bg.geo.length=function(a){return Vh=0,bg.geo.stream(a,Wh),Vh};var Vh,Wh={sphere:s,point:s,lineStart:vc,lineEnd:s,polygonStart:s,polygonEnd:s},Xh=wc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(bg.geo.azimuthalEqualArea=function(){return fc(Xh)}).raw=Xh;var Yh=wc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},Ba);(bg.geo.azimuthalEquidistant=function(){return fc(Yh)}).raw=Yh,(bg.geo.conicConformal=function(){return Sb(xc)}).raw=xc,(bg.geo.conicEquidistant=function(){return Sb(yc)}).raw=yc;var Zh=wc(function(a){return 1/a},Math.atan);(bg.geo.gnomonic=function(){return fc(Zh)}).raw=Zh,zc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Mg]},(bg.geo.mercator=function(){return Ac(zc)}).raw=zc;var $h=wc(function(){return 1},Math.asin);(bg.geo.orthographic=function(){return fc($h)}).raw=$h;var _h=wc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(bg.geo.stereographic=function(){return fc(_h)}).raw=_h,Bc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Mg]},(bg.geo.transverseMercator=function(){var a=Ac(Bc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Bc,bg.geom={},bg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Aa(c),f=Aa(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Fc),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=Ec(h),k=Ec(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Cc,d=Dc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},bg.geom.polygon=function(a){return ug(a,ai),a};var ai=bg.geom.polygon.prototype=[];ai.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},ai.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},ai.clip=function(a){for(var b,c,d,e,f,g,h=Ic(a),i=-1,j=this.length-Ic(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Gc(g,k,e)?(Gc(f,k,e)||a.push(Hc(f,g,k,e)),a.push(g)):Gc(f,k,e)&&a.push(Hc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var bi,ci,di,ei,fi,gi=[],hi=[];Qc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Sc),b.length},ad.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},bd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=fd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(dd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ed(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(ed(this,c),a=c,c=a.U),c.C=!1,d.C=!0,dd(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?fd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,dd(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,ed(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,dd(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,ed(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,dd(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,ed(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},bg.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return gd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Hg)*Hg,y:Math.round(g(a,b)/Hg)*Hg,i:b}})}var d=Cc,e=Dc,f=d,g=e,h=ii;return a?b(a):(b.links=function(a){return gd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return gd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Sc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&id(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Aa(d=a),b):d},b.y=function(a){return arguments.length?(g=Aa(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ii:a,b):h===ii?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ii?null:h&&h[1]},b)};var ii=[[-1e6,-1e6],[1e6,1e6]];bg.geom.delaunay=function(a){return bg.geom.voronoi().triangles(a)},bg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(pg(i-c)+pg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=ld()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Aa(h),u=Aa(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=ld();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){md(a,z,p,q,r,s)},z.find=function(a){return nd(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Cc,i=Dc;return(g=arguments.length)?(h=jd,i=kd,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},bg.interpolateRgb=od,bg.interpolateObject=pd,bg.interpolateNumber=qd,bg.interpolateString=rd;var ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ki=new RegExp(ji.source,"g");bg.interpolate=sd,bg.interpolators=[function(a,b){var c=typeof b;return("string"===c?bh.has(b)||/^(#|rgb\(|hsl\()/.test(b)?od:rd:b instanceof ga?od:Array.isArray(b)?td:"object"===c&&isNaN(b)?pd:qd)(a,b)}],bg.interpolateArray=td;var li=function(){return Ba},mi=bg.map({linear:li,poly:Ad,quad:function(){return xd},cubic:function(){return yd},sin:function(){return Bd},exp:function(){return Cd},circle:function(){return Dd},elastic:Ed,back:Fd,bounce:function(){return Gd}}),ni=bg.map({"in":Ba,out:vd,"in-out":wd,"out-in":function(a){return wd(vd(a))}});bg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=mi.get(c)||li,d=ni.get(d)||Ba,ud(d(c.apply(null,cg.call(arguments,1))));
},bg.interpolateHcl=Hd,bg.interpolateHsl=Id,bg.interpolateLab=Jd,bg.interpolateRound=Kd,bg.transform=function(a){var b=eg.createElementNS(bg.ns.prefix.svg,"g");return(bg.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Ld(c?c.matrix:oi)})(a)},Ld.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};bg.interpolateTransform=Pd,bg.layout={},bg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Sd(a[c]));return b}},bg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=bg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(bg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Kg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},bg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/q){if(o>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&o>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=bg.event.x,a.py=bg.event.y,h.resume()}var c,d,e,f,g,h={},i=bg.dispatch("start","tick","end"),j=[1,1],k=.9,l=pi,m=qi,n=-30,o=ri,p=.1,q=.64,r=[],s=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,t,u,v=r.length,w=s.length;for(c=0;w>c;++c)h=s[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(o=t*t+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,t*=o,u*=o,m.x-=t*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=t*(q=1-q),l.y+=u*q);if((q=d*p)&&(t=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(t-h.x)*q,h.y+=(u-h.y)*q;if(n)for(Zd(b=bg.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(s=a,h):s},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),bg.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;i>h;++h)c[h]=[];for(h=0;j>h;++h){var e=s[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=s.length,o=j[0],p=j[1];for(b=0;i>b;++b)(d=r[b]).index=b,d.weight=0;for(b=0;k>b;++b)d=s[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;i>b;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;k>b;++b)e[b]=+l.call(this,s[b],b);else for(b=0;k>b;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;k>b;++b)f[b]=+m.call(this,s[b],b);else for(b=0;k>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;i>b;++b)g[b]=+n.call(this,r[b],b);else for(b=0;i>b;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=bg.behavior.drag().origin(Ba).on("dragstart.force",Vd).on("drag.force",b).on("dragend.force",Wd)),arguments.length?void this.on("mouseover.force",Xd).on("mouseout.force",Yd).call(c):c},bg.rebind(h,i,"on")};var pi=20,qi=1,ri=1/0;bg.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return ae(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=de,c=be,d=ce;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(_d(b,function(a){a.children&&(a.value=0)}),ae(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},bg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=bg.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},$d(c,d)},bg.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(0>l?-1:1),o=(l-i*n)/bg.sum(j),p=bg.range(i),q=[];return null!=c&&p.sort(c===si?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),p.forEach(function(a){q[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*o+n,padAngle:m}}),q}var b=Number,c=si,d=0,e=Kg,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var si={};bg.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=bg.permute(j,l),k=bg.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;r>o;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;m>n;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=Ba,c=ie,d=je,e=he,f=fe,g=ge;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:ti.get(b)||ie,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:ui.get(b)||je,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var ti=bg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(ke),f=a.map(le),g=bg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return bg.range(a.length).reverse()},"default":ie}),ui=bg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:je});bg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[bg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=pe,e=ne;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Aa(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return oe(a,b)}:Aa(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},bg.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,ae(h,function(a){a.r=+k(a.value)}),ae(h,ue),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;ae(h,function(a){a.r+=l}),ae(h,ue),ae(h,function(a){a.r-=l})}return xe(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=bg.layout.hierarchy().sort(qe),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},$d(a,c)},bg.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(ae(m,c),m.parent.m=-m.z,_d(m,d),j)_d(l,f);else{var n=l,o=l,p=l;_d(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);_d(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){De(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Be(g),e=Ae(e),g&&e;)i=Ae(i),f=Be(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Ce(Ee(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Be(f)&&(f.t=g,f.m+=l-k),e&&!Ae(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=bg.layout.hierarchy().sort(null).value(null),h=ze,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},$d(a,g)},bg.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;ae(i,function(a){var b=a.children;b&&b.length?(a.x=Ge(b),a.y=Fe(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=He(i),l=Ie(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return ae(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=bg.layout.hierarchy().sort(null).value(null),c=ze,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},$d(a,b)},bg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=bg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Je,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Je(b):Ke(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Ke(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Je:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},$d(f,h)},bg.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=bg.random.normal.apply(bg,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=bg.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},bg.scale={};var vi={floor:Ba,ceil:Ba};bg.scale.linear=function(){return Re([0,1],[0,1],sd,!1)};var wi={s:1,g:1,p:1,r:1,e:1};bg.scale.log=function(){return Ze(bg.scale.linear().domain([0,1]),10,!0,[1,10])};var xi=bg.format(".0e"),yi={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};bg.scale.pow=function(){return $e(bg.scale.linear(),1,[0,1])},bg.scale.sqrt=function(){return bg.scale.pow().exponent(.5)},bg.scale.ordinal=function(){return af([],{t:"range",a:[[]]})},bg.scale.category10=function(){return bg.scale.ordinal().range(zi)},bg.scale.category20=function(){return bg.scale.ordinal().range(Ai)},bg.scale.category20b=function(){return bg.scale.ordinal().range(Bi)},bg.scale.category20c=function(){return bg.scale.ordinal().range(Ci)};var zi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ta),Ai=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ta),Bi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ta),Ci=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ta);bg.scale.quantile=function(){return bf([],[])},bg.scale.quantize=function(){return cf(0,1,[0,1])},bg.scale.threshold=function(){return df([.5],[0,1])},bg.scale.identity=function(){return ef([0,1])},bg.svg={},bg.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Mg,l=h.apply(this,arguments)-Mg,m=Math.abs(l-k),n=k>l?0:1;if(a>j&&(o=j,j=a,a=o),m>=Lg)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Di?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=ba(q/j*Math.sin(r))),a&&(A=ba(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Jg?0:1;if(B&&mf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Jg?0:1;if(A&&mf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if((o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=j>a^n?0:1;var H=null==y?[w,x]:null==u?[s,t]:Hc([s,t],[y,z],[u,v],[w,x]),I=s-H[0],J=t-H[1],K=u-H[0],L=v-H[1],M=1/Math.sin(Math.acos((I*K+J*L)/(Math.sqrt(I*I+J*J)*Math.sqrt(K*K+L*L)))/2),N=Math.sqrt(H[0]*H[0]+H[1]*H[1]);if(null!=u){var O=Math.min(o,(j-N)/(M+1)),P=nf(null==y?[w,x]:[y,z],[s,t],j,O,n),Q=nf([u,v],[w,x],j,O,n);o===O?C.push("M",P[0],"A",O,",",O," 0 0,",p," ",P[1],"A",j,",",j," 0 ",1-n^mf(P[1][0],P[1][1],Q[1][0],Q[1][1]),",",n," ",Q[1],"A",O,",",O," 0 0,",p," ",Q[0]):C.push("M",P[0],"A",O,",",O," 0 1,",p," ",Q[0])}else C.push("M",s,",",t);if(null!=y){var R=Math.min(o,(a-N)/(M-1)),S=nf([s,t],[y,z],a,-R,n),T=nf([w,x],null==u?[s,t]:[u,v],a,-R,n);o===R?C.push("L",T[0],"A",R,",",R," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^mf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",R,",",R," 0 0,",p," ",S[0]):C.push("L",T[0],"A",R,",",R," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=gf,d=hf,e=ff,f=Di,g=jf,h=kf,i=lf;return a.innerRadius=function(b){return arguments.length?(c=Aa(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Aa(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Aa(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Di?Di:Aa(b),a):f},a.startAngle=function(b){return arguments.length?(g=Aa(b),a):g},a.endAngle=function(b){return arguments.length?(h=Aa(b),a):h},a.padAngle=function(b){return arguments.length?(i=Aa(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Mg;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Di="auto";bg.svg.line=function(){return of(Ba)};var Ei=bg.map({linear:pf,"linear-closed":qf,step:rf,"step-before":sf,"step-after":tf,basis:zf,"basis-open":Af,"basis-closed":Bf,bundle:Cf,cardinal:wf,"cardinal-open":uf,"cardinal-closed":vf,monotone:If});Ei.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Fi=[0,2/3,1/3,0],Gi=[0,1/3,2/3,0],Hi=[0,1/6,2/3,1/6];bg.svg.line.radial=function(){var a=of(Jf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},sf.reverse=tf,tf.reverse=sf,bg.svg.area=function(){return Kf(Ba)},bg.svg.area.radial=function(){var a=Kf(Jf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},bg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Mg,k=j.call(a,e,d)-Mg;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Jg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=sc,g=tc,h=Lf,i=jf,j=kf;return a.radius=function(b){return arguments.length?(h=Aa(b),a):h},a.source=function(b){return arguments.length?(f=Aa(b),a):f},a.target=function(b){return arguments.length?(g=Aa(b),a):g},a.startAngle=function(b){return arguments.length?(i=Aa(b),a):i},a.endAngle=function(b){return arguments.length?(j=Aa(b),a):j},a},bg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=sc,c=tc,d=Mf;return a.source=function(c){return arguments.length?(b=Aa(c),a):b},a.target=function(b){return arguments.length?(c=Aa(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},bg.svg.diagonal.radial=function(){var a=bg.svg.diagonal(),b=Mf,c=a.projection;return a.projection=function(a){return arguments.length?c(Nf(b=a)):b},a},bg.svg.symbol=function(){function a(a,d){return(Ii.get(b.call(this,a,d))||Qf)(c.call(this,a,d))}var b=Pf,c=Of;return a.type=function(c){return arguments.length?(b=Aa(c),a):b},a.size=function(b){return arguments.length?(c=Aa(b),a):c},a};var Ii=bg.map({circle:Qf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Mi)),c=b*Mi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});bg.svg.symbolTypes=Ii.keys();var Ji,Ki,Li=Math.sqrt(3),Mi=Math.tan(30*Ng),Ni=[],Oi=0;Ni.call=zg.call,Ni.empty=zg.empty,Ni.node=zg.node,Ni.size=zg.size,bg.transition=function(a){return arguments.length?Ji?a.transition():a:Cg.transition()},bg.transition.prototype=Ni,Ni.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=z(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),Vf(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Rf(g,f,e)},Ni.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=A(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&Vf(e,o,h,g,f),b.push(e)}return Rf(i,h,g)},Ni.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=M(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Rf(e,this.namespace,this.id)},Ni.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):O(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Ni.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Pd:sd,h=bg.ns.qualify(a);return Sf(this,"attr."+a,b,h.local?f:e)},Ni.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=bg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Ni.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(b){return null==b?d:(b+="",function(){var d,e=gg.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=sd(e,b),function(b){this.style.setProperty(a,d(b),c)})})}var f=arguments.length;if(3>f){if("string"!=typeof a){2>f&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Sf(this,"style."+a,b,e)},Ni.styleTween=function(a,b,c){function d(d,e){var f=b.call(this,d,e,gg.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,d)},Ni.text=function(a){return Sf(this,"text",a,Tf)},Ni.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Ni.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=bg.ease.apply(bg,arguments)),O(this,function(d){d[c][b].ease=a}))},Ni.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:O(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Ni.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:O(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Ni.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Ki,f=Ji;Ji=c,O(this,function(b,e,f){Ki=b[d][c],a.call(b,b.__data__,e,f)}),Ki=e,Ji=f}else O(this,function(e){var f=e[d][c];(f.event||(f.event=bg.dispatch("start","end","interrupt"))).on(a,b)});return this},Ni.transition=function(){for(var a,b,c,d,e=this.id,f=++Oi,g=this.namespace,h=[],i=0,j=this.length;j>i;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;l>k;k++)(c=b[k])&&(d=c[g][e],Vf(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Rf(h,g,f)},bg.svg.axis=function(){function a(a){a.each(function(){var a,j=bg.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):Ba:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Hg),q=bg.transition(o.exit()).style("opacity",Hg).remove(),r=bg.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,t=Me(l),u=j.selectAll(".domain").data([0]),v=(u.enter().append("path").attr("class","domain"),bg.transition(u));p.append("line"),p.append("text");var w,x,y,z,A=p.select("line"),B=r.select("line"),C=o.select("text").text(n),D=p.select("text"),E=r.select("text"),F="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=Wf,w="x",y="y",x="x2",z="y2",C.attr("dy",0>F?"0em":".71em").style("text-anchor","middle"),v.attr("d","M"+t[0]+","+F*f+"V0H"+t[1]+"V"+F*f)):(a=Xf,w="y",y="x",x="y2",z="x2",C.attr("dy",".32em").style("text-anchor",0>F?"end":"start"),v.attr("d","M"+F*f+","+t[0]+"H0V"+t[1]+"H"+F*f)),A.attr(z,F*e),D.attr(y,F*s),B.attr(x,0).attr(z,F*e),E.attr(w,0).attr(y,F*s),l.rangeBand){var G=l,H=G.rangeBand()/2;k=l=function(a){return G(a)+H}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=bg.scale.linear(),d=Pi,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Qi?b+"":Pi,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Pi="bottom",Qi={top:1,right:1,bottom:1,left:1};bg.svg.brush=function(){function a(f){f.each(function(){var f=bg.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(o,Ba);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ri[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var k,l=bg.transition(f),m=bg.transition(g);i&&(k=Me(i),m.attr("x",k[0]).attr("width",k[1]-k[0]),c(l)),j&&(k=Me(j),m.attr("y",k[0]).attr("height",k[1]-k[0]),d(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",k[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function d(a){a.select(".extent").attr("y",l[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function e(){function e(){32==bg.event.keyCode&&(C||(s=null,E[0]-=k[1],E[1]-=l[1],C=2),v())}function o(){32==bg.event.keyCode&&2==C&&(E[0]+=k[1],E[1]+=l[1],C=0,v())}function p(){var a=bg.mouse(u),e=!1;t&&(a[0]+=t[0],a[1]+=t[1]),C||(bg.event.altKey?(s||(s=[(k[0]+k[1])/2,(l[0]+l[1])/2]),E[0]=k[+(a[0]<s[0])],E[1]=l[+(a[1]<s[1])]):s=null),A&&q(a,i,0)&&(c(y),e=!0),B&&q(a,j,1)&&(d(y),e=!0),e&&(b(y),x({type:"brush",mode:C?"move":"resize"}))}function q(a,b,c){var d,e,h=Me(b),i=h[0],j=h[1],o=E[c],p=c?l:k,q=p[1]-p[0];return C&&(i-=o,j-=q+o),d=(c?n:m)?Math.max(i,Math.min(j,a[c])):a[c],C?e=(d+=o)+q:(s&&(o=Math.max(i,Math.min(j,2*s[c]-d))),d>o?(e=d,d=o):e=o),p[0]!=d||p[1]!=e?(c?g=null:f=null,p[0]=d,p[1]=e,!0):void 0}function r(){p(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),bg.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),x({type:"brushend"})}var s,t,u=this,w=bg.select(bg.event.target),x=h.of(u,arguments),y=bg.select(u),z=w.datum(),A=!/^(n|s)$/.test(z)&&i,B=!/^(e|w)$/.test(z)&&j,C=w.classed("extent"),D=V(),E=bg.mouse(u),F=bg.select(gg).on("keydown.brush",e).on("keyup.brush",o);if(bg.event.changedTouches?F.on("touchmove.brush",p).on("touchend.brush",r):F.on("mousemove.brush",p).on("mouseup.brush",r),y.interrupt().selectAll("*").interrupt(),C)E[0]=k[0]-E[0],E[1]=l[0]-E[1];else if(z){var G=+/w$/.test(z),H=+/^n/.test(z);t=[k[1-G]-E[0],l[1-H]-E[1]],E[0]=k[G],E[1]=l[H]}else bg.event.altKey&&(s=E.slice());
y.style("pointer-events","none").selectAll(".resize").style("display",null),bg.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),p()}var f,g,h=x(a,"brushstart","brush","brushend"),i=null,j=null,k=[0,0],l=[0,0],m=!0,n=!0,o=Si[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:k,y:l,i:f,j:g},c=this.__chart__||b;this.__chart__=b,Ji?bg.select(this).transition().each("start.brush",function(){f=c.i,g=c.j,k=c.x,l=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=td(k,b.x),d=td(l,b.y);return f=g=null,function(e){k=b.x=c(e),l=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i,g=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(i=b,o=Si[!i<<1|!j],a):i},a.y=function(b){return arguments.length?(j=b,o=Si[!i<<1|!j],a):j},a.clamp=function(b){return arguments.length?(i&&j?(m=!!b[0],n=!!b[1]):i?m=!!b:j&&(n=!!b),a):i&&j?[m,n]:i?m:j?n:null},a.extent=function(b){var c,d,e,h,m;return arguments.length?(i&&(c=b[0],d=b[1],j&&(c=c[0],d=d[0]),f=[c,d],i.invert&&(c=i(c),d=i(d)),c>d&&(m=c,c=d,d=m),(c!=k[0]||d!=k[1])&&(k=[c,d])),j&&(e=b[0],h=b[1],i&&(e=e[1],h=h[1]),g=[e,h],j.invert&&(e=j(e),h=j(h)),e>h&&(m=e,e=h,h=m),(e!=l[0]||h!=l[1])&&(l=[e,h])),a):(i&&(f?(c=f[0],d=f[1]):(c=k[0],d=k[1],i.invert&&(c=i.invert(c),d=i.invert(d)),c>d&&(m=c,c=d,d=m))),j&&(g?(e=g[0],h=g[1]):(e=l[0],h=l[1],j.invert&&(e=j.invert(e),h=j.invert(h)),e>h&&(m=e,e=h,h=m))),i&&j?[[c,e],[d,h]]:i?[c,d]:j&&[e,h])},a.clear=function(){return a.empty()||(k=[0,0],l=[0,0],f=g=null),a},a.empty=function(){return!!i&&k[0]==k[1]||!!j&&l[0]==l[1]},bg.rebind(a,h,"on")};var Ri={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Si=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ti=lh.format=rh.timeFormat,Ui=Ti.utc,Vi=Ui("%Y-%m-%dT%H:%M:%S.%LZ");Ti.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yf:Vi,Yf.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Yf.toString=Vi.toString,lh.second=Oa(function(a){return new mh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),lh.seconds=lh.second.range,lh.seconds.utc=lh.second.utc.range,lh.minute=Oa(function(a){return new mh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),lh.minutes=lh.minute.range,lh.minutes.utc=lh.minute.utc.range,lh.hour=Oa(function(a){var b=a.getTimezoneOffset()/60;return new mh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),lh.hours=lh.hour.range,lh.hours.utc=lh.hour.utc.range,lh.month=Oa(function(a){return a=lh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),lh.months=lh.month.range,lh.months.utc=lh.month.utc.range;var Wi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Xi=[[lh.second,1],[lh.second,5],[lh.second,15],[lh.second,30],[lh.minute,1],[lh.minute,5],[lh.minute,15],[lh.minute,30],[lh.hour,1],[lh.hour,3],[lh.hour,6],[lh.hour,12],[lh.day,1],[lh.day,2],[lh.week,1],[lh.month,1],[lh.month,3],[lh.year,1]],Yi=Ti.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Db]]),Zi={range:function(a,b,c){return bg.range(Math.ceil(a/c)*c,+b,c).map($f)},floor:Ba,ceil:Ba};Xi.year=lh.year,lh.scale=function(){return Zf(bg.scale.linear(),Xi,Yi)};var $i=Xi.map(function(a){return[a[0].utc,a[1]]}),_i=Ui.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Db]]);$i.year=lh.year.utc,lh.scale.utc=function(){return Zf(bg.scale.linear(),$i,_i)},bg.text=Ca(function(a){return a.responseText}),bg.json=function(a,b){return Da(a,"application/json",_f,b)},bg.html=function(a,b){return Da(a,"text/html",ag,b)},bg.xml=Ca(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(bg):"object"==typeof module&&module.exports&&(module.exports=bg),this.d3=bg}()}(),e()}),a.registerDynamic("3b",["3e"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("3e"),d.define=e,c.exports}),a.registerDynamic("3f",["3b"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(d){"use strict";function e(a){this.owner=a}function f(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype,b.prototype=new c}return b.prototype.constructor=b,b}function g(a){var b=this.internal=new h(this);b.loadConfig(a),b.init(),function c(a,b,d){Object.keys(a).forEach(function(e){b[e]=a[e].bind(d),Object.keys(a[e]).length>0&&c(a[e],b[e],d)})}(k,this,this)}function h(b){var c=this;c.d3=d.d3?d.d3:"undefined"!=typeof a?a("3b"):void 0,c.api=b,c.config=c.getDefaultConfig(),c.data={},c.cache={},c.axes={}}function i(a){e.call(this,a)}function j(a,b){function c(a,b){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+u)+", 0)"})}function d(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function e(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function f(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,n);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return d.length>0&&d[0]>0&&d.unshift(d[0]-(d[1]-d[0])),d}function g(){var a,c=p.copy();return b.isCategory&&(a=p.domain(),c.domain([a[0],a[1]-1])),c}function h(a){var b=m?m(a):a;return"undefined"!=typeof b?b:""}function i(a){if(C)return C;var b={h:11.5,w:5.5};return a.select("text").text(h).each(function(a){var c=this.getBoundingClientRect(),d=h(a),e=c.height,f=d?c.width/d.length:void 0;e&&f&&(b.h=e,b.w=f)}).text(""),C=b,b}function j(c){return b.withoutTransition?c:a.transition(c)}function k(m){m.each(function(){function m(a,c){function d(a,b){f=void 0;for(var h=1;h<b.length;h++)if(" "===b.charAt(h)&&(f=h),e=b.substr(0,h+1),g=U.w*e.length,g>c)return d(a.concat(b.substr(0,f?f:h)),b.slice(f?f+1:h));return a.concat(b)}var e,f,g,i=h(a),j=[];return"[object Array]"===Object.prototype.toString.call(i)?i:((!c||0>=c)&&(c=X?95:b.isCategory?Math.ceil(F(G[1])-F(G[0]))-12:110),d(j,i+""))}function n(a,b){var c=U.h;return 0===b&&(c="left"===q||"right"===q?-((V[a.index]-1)*(U.h/2)-3):".71em"),c}function v(a){var b=p(a)+(o?0:u);return L[0]<b&&b<L[1]?r:0}function w(a){return a?a>0?"start":"end":"middle"}function x(a){return a?"rotate("+a+")":""}function y(a){return a?8*Math.sin(Math.PI*(a/180)):0}function z(a){return a?11.5-2.5*(a/15)*(a>0?1:-1):W}var A,B,C,D=k.g=a.select(this),E=this.__chart__||p,F=this.__chart__=g(),G=t?t:f(F),H=D.selectAll(".tick").data(G,F),I=H.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),J=H.exit().remove(),K=j(H).style("opacity",1),L=p.rangeExtent?p.rangeExtent():e(p.range()),M=D.selectAll(".domain").data([0]),N=(M.enter().append("path").attr("class","domain"),j(M));I.append("line"),I.append("text");var O=I.select("line"),P=K.select("line"),Q=I.select("text"),R=K.select("text");b.isCategory?(u=Math.ceil((F(1)-F(0))/2),B=o?0:u,C=o?u:0):u=B=0;var S,T,U=i(D.select(".tick")),V=[],W=Math.max(r,0)+s,X="left"===q||"right"===q;S=H.select("text"),T=S.selectAll("tspan").data(function(a,c){var d=b.tickMultiline?m(a,b.tickWidth):[].concat(h(a));return V[c]=d.length,d.map(function(a){return{index:c,splitted:a}})}),T.enter().append("tspan"),T.exit().remove(),T.text(function(a){return a.splitted});var Y=b.tickTextRotate;switch(q){case"bottom":A=c,O.attr("y2",r),Q.attr("y",W),P.attr("x1",B).attr("x2",B).attr("y2",v),R.attr("x",0).attr("y",z(Y)).style("text-anchor",w(Y)).attr("transform",x(Y)),T.attr("x",0).attr("dy",n).attr("dx",y(Y)),N.attr("d","M"+L[0]+","+l+"V0H"+L[1]+"V"+l);break;case"top":A=c,O.attr("y2",-r),Q.attr("y",-W),P.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-W),S.style("text-anchor","middle"),T.attr("x",0).attr("dy","0em"),N.attr("d","M"+L[0]+","+-l+"V0H"+L[1]+"V"+-l);break;case"left":A=d,O.attr("x2",-r),Q.attr("x",-W),P.attr("x2",-r).attr("y1",C).attr("y2",C),R.attr("x",-W).attr("y",u),S.style("text-anchor","end"),T.attr("x",-W).attr("dy",n),N.attr("d","M"+-l+","+L[0]+"H0V"+L[1]+"H"+-l);break;case"right":A=d,O.attr("x2",r),Q.attr("x",W),P.attr("x2",r).attr("y2",0),R.attr("x",W).attr("y",0),S.style("text-anchor","start"),T.attr("x",W).attr("dy",n),N.attr("d","M"+l+","+L[0]+"H0V"+L[1]+"H"+l)}if(F.rangeBand){var Z=F,$=Z.rangeBand()/2;E=F=function(a){return Z(a)+$}}else E.rangeBand?E=F:J.call(A,F);I.call(A,E),K.call(A,F)})}var l,m,n,o,p=a.scale.linear(),q="bottom",r=6,s=3,t=null,u=0,v=!0;return b=b||{},l=b.withOuterTick?6:0,k.scale=function(a){return arguments.length?(p=a,k):p},k.orient=function(a){return arguments.length?(q=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom",k):q},k.tickFormat=function(a){return arguments.length?(m=a,k):m},k.tickCentered=function(a){return arguments.length?(o=a,k):o},k.tickOffset=function(){return u},k.tickInterval=function(){var a,c;return b.isCategory?a=2*u:(c=k.g.select("path.domain").node().getTotalLength()-2*l,a=c/k.g.selectAll("line").size()),a===1/0?0:a},k.ticks=function(){return arguments.length?(n=arguments,k):n},k.tickCulling=function(a){return arguments.length?(v=a,k):v},k.tickValues=function(a){if("function"==typeof a)t=function(){return a(p.domain())};else{if(!arguments.length)return t;t=a}return k},k}var k,l,m,n={version:"0.4.10"};n.generate=function(a){return new g(a)},n.chart={fn:g.prototype,internal:{fn:h.prototype,axis:{fn:i.prototype}}},k=n.chart.fn,l=n.chart.internal.fn,m=n.chart.internal.axis.fn,l.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},l.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeFormat=c.data_xLocaltime?b.time.format:b.time.format.utc,a.axisTimeFormat=c.axis_x_localtime?b.time.format:b.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=c.axis_rotated?"left":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},l.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},l.initWithData=function(a){var b,c,e=this,f=e.d3,g=e.config,h=!0;e.axis=new i(e),e.initPie&&e.initPie(),e.initBrush&&e.initBrush(),e.initZoom&&e.initZoom(),g.bindto?"function"==typeof g.bindto.node?e.selectChart=g.bindto:e.selectChart=f.select(g.bindto):e.selectChart=f.selectAll([]),e.selectChart.empty()&&(e.selectChart=f.select(document.createElement("div")).style("opacity",0),e.observeInserted(e.selectChart),h=!1),e.selectChart.html("").classed("c3",!0),e.data.xs={},e.data.targets=e.convertDataToTargets(a),g.data_filter&&(e.data.targets=e.data.targets.filter(g.data_filter)),g.data_hide&&e.addHiddenTargetIds(g.data_hide===!0?e.mapToIds(e.data.targets):g.data_hide),g.legend_hide&&e.addHiddenLegendIds(g.legend_hide===!0?e.mapToIds(e.data.targets):g.legend_hide),e.hasType("gauge")&&(g.legend_show=!1),e.updateSizes(),e.updateScales(),e.x.domain(f.extent(e.getXDomain(e.data.targets))),e.y.domain(e.getYDomain(e.data.targets,"y")),e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subX.domain(e.x.domain()),e.subY.domain(e.y.domain()),e.subY2.domain(e.y2.domain()),e.orgXDomain=e.x.domain(),e.brush&&e.brush.scale(e.subX),g.zoom_enabled&&e.zoom.scale(e.x),e.svg=e.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return g.onmouseover.call(e)}).on("mouseleave",function(){return g.onmouseout.call(e)}),b=e.svg.append("defs"),e.clipChart=e.appendClip(b,e.clipId),e.clipXAxis=e.appendClip(b,e.clipIdForXAxis),e.clipYAxis=e.appendClip(b,e.clipIdForYAxis),e.clipGrid=e.appendClip(b,e.clipIdForGrid),e.clipSubchart=e.appendClip(b,e.clipIdForSubchart),e.updateSvgSize(),c=e.main=e.svg.append("g").attr("transform",e.getTranslate("main")),e.initSubchart&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),c.append("text").attr("class",o.text+" "+o.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),e.initGrid(),c.append("g").attr("clip-path",e.clipPath).attr("class",o.chart),g.grid_lines_front&&e.initGridLines(),e.initEventRect(),e.initChartElements(),c.insert("rect",g.zoom_privileged?null:"g."+o.regions).attr("class",o.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity",0).on("dblclick.zoom",null),g.axis_x_extent&&e.brush.extent(e.getDefaultExtent()),e.axis.init(),e.updateTargets(e.data.targets),h&&(e.updateDimension(),e.config.oninit.call(e),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),null==d.onresize&&(d.onresize=e.generateResize()),d.onresize.add&&(d.onresize.add(function(){g.onresize.call(e)}),d.onresize.add(function(){e.api.flush()}),d.onresize.add(function(){g.onresized.call(e)})),e.api.element=e.selectChart.node()},l.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},l.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{top:a.margin.top,right:NaN,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:NaN,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:NaN,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},l.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},l.showTargets=function(){var a=this;a.svg.selectAll("."+o.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},l.redraw=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,A,B,C,D,E,F,G,H=this,I=H.main,J=H.d3,K=H.config,L=H.getShapeIndices(H.isAreaType),M=H.getShapeIndices(H.isBarType),N=H.getShapeIndices(H.isLineType),O=H.hasArcType(),P=H.filterTargetsToShow(H.data.targets),Q=H.xv.bind(H);if(a=a||{},c=z(a,"withY",!0),d=z(a,"withSubchart",!0),e=z(a,"withTransition",!0),h=z(a,"withTransform",!1),i=z(a,"withUpdateXDomain",!1),j=z(a,"withUpdateOrgXDomain",!1),k=z(a,"withTrimXDomain",!0),p=z(a,"withUpdateXAxis",i),l=z(a,"withLegend",!1),m=z(a,"withEventRect",!0),n=z(a,"withDimension",!0),f=z(a,"withTransitionForExit",e),g=z(a,"withTransitionForAxis",e),v=e?K.transition_duration:0,w=f?v:0,x=g?v:0,b=b||H.axis.generateTransitions(x),l&&K.legend_show?H.updateLegend(H.mapToIds(H.data.targets),a,b):n&&H.updateDimension(!0),H.isCategorized()&&0===P.length&&H.x.domain([0,H.axes.x.selectAll(".tick").size()]),P.length?(H.updateXDomain(P,i,j,k),K.axis_x_tick_values||(B=H.axis.updateXAxisTickValues(P))):(H.xAxis.tickValues([]),H.subXAxis.tickValues([])),K.zoom_rescale&&!a.flow&&(E=H.x.orgDomain()),H.y.domain(H.getYDomain(P,"y",E)),H.y2.domain(H.getYDomain(P,"y2",E)),!K.axis_y_tick_values&&K.axis_y_tick_count&&H.yAxis.tickValues(H.axis.generateTickValues(H.y.domain(),K.axis_y_tick_count)),!K.axis_y2_tick_values&&K.axis_y2_tick_count&&H.y2Axis.tickValues(H.axis.generateTickValues(H.y2.domain(),K.axis_y2_tick_count)),H.axis.redraw(b,O),H.axis.updateLabels(e),(i||p)&&P.length)if(K.axis_x_tick_culling&&B){for(C=1;C<B.length;C++)if(B.length/C<K.axis_x_tick_culling_max){D=C;break}H.svg.selectAll("."+o.axisX+" .tick text").each(function(a){var b=B.indexOf(a);b>=0&&J.select(this).style("display",b%D?"none":"block")})}else H.svg.selectAll("."+o.axisX+" .tick text").style("display","block");q=H.generateDrawArea?H.generateDrawArea(L,!1):void 0,r=H.generateDrawBar?H.generateDrawBar(M):void 0,s=H.generateDrawLine?H.generateDrawLine(N,!1):void 0,t=H.generateXYForText(L,M,N,!0),u=H.generateXYForText(L,M,N,!1),c&&(H.subY.domain(H.getYDomain(P,"y")),H.subY2.domain(H.getYDomain(P,"y2"))),H.tooltip.style("display","none"),H.updateXgridFocus(),I.select("text."+o.text+"."+o.empty).attr("x",H.width/2).attr("y",H.height/2).text(K.data_empty_label_text).transition().style("opacity",P.length?0:1),H.updateGrid(v),H.updateRegion(v),H.updateBar(w),H.updateLine(w),H.updateArea(w),H.updateCircle(),H.hasDataLabel()&&H.updateText(w),H.redrawArc&&H.redrawArc(v,w,h),H.redrawSubchart&&H.redrawSubchart(d,b,v,w,L,M,N),I.selectAll("."+o.selectedCircles).filter(H.isBarType.bind(H)).selectAll("circle").remove(),K.interaction_enabled&&!a.flow&&m&&(H.redrawEventRect(),H.updateZoom&&H.updateZoom()),H.updateCircleY(),F=(H.config.axis_rotated?H.circleY:H.circleX).bind(H),G=(H.config.axis_rotated?H.circleX:H.circleY).bind(H),a.flow&&(A=H.generateFlow({targets:P,flow:a.flow,duration:a.flow.duration,drawBar:r,drawLine:s,drawArea:q,cx:F,cy:G,xv:Q,xForText:t,yForText:u})),(v||A)&&H.isTabVisible()?J.transition().duration(v).each(function(){var b=[];[H.redrawBar(r,!0),H.redrawLine(s,!0),H.redrawArea(q,!0),H.redrawCircle(F,G,!0),H.redrawText(t,u,a.flow,!0),H.redrawRegion(!0),H.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})}),y=H.generateWait(),b.forEach(function(a){y.add(a)})}).call(y,function(){A&&A(),K.onrendered&&K.onrendered.call(H)}):(H.redrawBar(r),H.redrawLine(s),H.redrawArea(q),H.redrawCircle(F,G),H.redrawText(t,u,a.flow),H.redrawRegion(),H.redrawGrid(),K.onrendered&&K.onrendered.call(H)),H.mapToIds(H.data.targets).forEach(function(a){H.withoutFadeIn[a]=!0})},l.updateAndRedraw=function(a){var b,c=this,d=c.config;a=a||{},a.withTransition=z(a,"withTransition",!0),a.withTransform=z(a,"withTransform",!1),a.withLegend=z(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=z(a,"withTransitionForTransform",a.withTransition),c.updateSizes(),a.withLegend&&d.legend_show||(b=c.axis.generateTransitions(a.withTransitionForAxis?d.transition_duration:0),c.updateScales(),c.updateSvgSize(),c.transformAll(a.withTransitionForTransform,b)),c.redraw(a,b)},l.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},l.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},l.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},l.isCustomX=function(){var a=this,b=a.config;return!a.isTimeSeries()&&(b.data_x||y(b.data_xs))},l.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},l.getTranslate=function(a){var b,c,d=this,e=d.config;return"main"===a?(b=v(d.margin.left),c=v(d.margin.top)):"context"===a?(b=v(d.margin2.left),c=v(d.margin2.top)):"legend"===a?(b=d.margin3.left,c=d.margin3.top):"x"===a?(b=0,c=e.axis_rotated?0:d.height):"y"===a?(b=0,c=e.axis_rotated?d.height:0):"y2"===a?(b=e.axis_rotated?0:d.width,c=e.axis_rotated?1:0):"subx"===a?(b=0,c=e.axis_rotated?0:d.height2):"arc"===a&&(b=d.arcWidth/2,c=d.arcHeight/2),"translate("+b+","+c+")"},l.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},l.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0},l.opacityForCircle=function(a){var b=this.config.point_show?1:0;return p(a.value)?this.isScatterType(a)?.5:b:0},l.opacityForText=function(){return this.hasDataLabel()?1:0},l.xx=function(a){return a?this.x(a.x):null},l.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},l.yv=function(a){var b=this,c=a.axis&&"y2"===a.axis?b.y2:b.y;return Math.ceil(c(a.value))},l.subxx=function(a){return a?this.subX(a.x):null},l.transformMain=function(a,b){var c,d,e,f=this;b&&b.axisX?c=b.axisX:(c=f.main.select("."+o.axisX),a&&(c=c.transition())),b&&b.axisY?d=b.axisY:(d=f.main.select("."+o.axisY),a&&(d=d.transition())),b&&b.axisY2?e=b.axisY2:(e=f.main.select("."+o.axisY2),a&&(e=e.transition())),(a?f.main.transition():f.main).attr("transform",f.getTranslate("main")),c.attr("transform",f.getTranslate("x")),d.attr("transform",f.getTranslate("y")),e.attr("transform",f.getTranslate("y2")),f.main.select("."+o.chartArcs).attr("transform",f.getTranslate("arc"))},l.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},l.updateSvgSize=function(){var a=this,b=a.svg.select(".c3-brush .background");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",b.size()?b.attr("height"):0),a.svg.select("."+o.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},l.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},l.observeInserted=function(a){var b,c=this;return"undefined"==typeof MutationObserver?void d.console.error("MutationObserver not defined."):(b=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(b.disconnect(),c.intervalForObserveInserted=d.setInterval(function(){a.node().parentNode&&(d.clearInterval(c.intervalForObserveInserted),c.updateDimension(),c.config.oninit.call(c),c.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})}),void b.observe(a.node(),{attributes:!0,childList:!0,characterData:!0}))},l.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];return a.add=function(a){b.push(a)},a},l.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},l.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())return void(b+=1);try{a.transition()}catch(c){b+=1}}),b===a.length&&(clearInterval(d),c&&c())},10)};return b.add=function(b){a.push(b)},b},l.parseDate=function(a){var b,c=this;return a instanceof Date?b=a:"string"==typeof a?b=c.dataTimeFormat(c.config.data_xFormat).parse(a):"number"!=typeof a&&isNaN(a)||(b=new Date(+a)),(!b||isNaN(+b))&&d.console.error("Failed to parse x '"+a+"' to Date object"),b},l.isTabVisible=function(){var a;return"undefined"!=typeof document.hidden?a="hidden":"undefined"!=typeof document.mozHidden?a="mozHidden":"undefined"!=typeof document.msHidden?a="msHidden":"undefined"!=typeof document.webkitHidden&&(a="webkitHidden"),document[a]?!1:!0},l.getDefaultConfig=function(){var a={bindto:"#chart",size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:void 0,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};return Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},l.additionalConfig={},l.loadConfig=function(a){function b(){var a=d.shift();return a&&c&&"object"==typeof c&&a in c?(c=c[a],b()):a?void 0:c}var c,d,e,f=this.config;Object.keys(f).forEach(function(g){c=a,d=g.split("_"),e=b(),t(e)&&(f[g]=e)})},l.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])},l.getX=function(a,b,c,d){var e,f=this,g=f.getScale(a,b,f.isTimeSeries()),h=c?g.domain(c):g;f.isCategorized()?(d=d||function(){return 0},g=function(a,b){var c=h(a)+d(a);return b?c:Math.ceil(c)}):g=function(a,b){var c=h(a);return b?c:Math.ceil(c)};for(e in h)g[e]=h[e];return g.orgDomain=function(){return h.domain()},f.isCategorized()&&(g.domain=function(a){return arguments.length?(h.domain(a),g):(a=this.orgDomain(),[a[0],a[1]+1])}),g},l.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},l.getYScale=function(a){
return"y2"===this.axis.getId(a)?this.y2:this.y},l.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},l.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},l.getYDomainMin=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasNegativeValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=0>a?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a>0||(k[d][b]+=+a)});return h.d3.min(Object.keys(k).map(function(a){return h.d3.min(k[a])}))},l.getYDomainMax=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasPositiveValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a>0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&0>+a||(k[d][b]+=+a)});return h.d3.max(Object.keys(k).map(function(a){return h.d3.max(k[a])}))},l.getYDomain=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o=this,q=o.config,r=a.filter(function(a){return o.axis.getId(a.id)===b}),s=c?o.filterByXDomain(r,c):r,t="y2"===b?q.axis_y2_min:q.axis_y_min,u="y2"===b?q.axis_y2_max:q.axis_y_max,v=o.getYDomainMin(s),x=o.getYDomainMax(s),z="y2"===b?q.axis_y2_center:q.axis_y_center,A=o.hasType("bar",s)&&q.bar_zerobased||o.hasType("area",s)&&q.area_zerobased,B="y2"===b?q.axis_y2_inverted:q.axis_y_inverted,C=o.hasDataLabel()&&q.axis_rotated,D=o.hasDataLabel()&&!q.axis_rotated;return v=p(t)?t:p(u)?u>v?v:u-10:v,x=p(u)?u:p(t)?x>t?x:t+10:x,0===s.length?"y2"===b?o.y2.domain():o.y.domain():(isNaN(v)&&(v=0),isNaN(x)&&(x=v),v===x&&(0>v?x=0:v=0),m=v>=0&&x>=0,n=0>=v&&0>=x,(p(t)&&m||p(u)&&n)&&(A=!1),A&&(m&&(v=0),n&&(x=0)),e=Math.abs(x-v),f=g=h=.1*e,"undefined"!=typeof z&&(i=Math.max(Math.abs(v),Math.abs(x)),x=z+i,v=z-i),C?(j=o.getDataLabelLength(v,x,"width"),k=w(o.y.range()),l=[j[0]/k,j[1]/k],g+=e*(l[1]/(1-l[0]-l[1])),h+=e*(l[0]/(1-l[0]-l[1]))):D&&(j=o.getDataLabelLength(v,x,"height"),g+=o.axis.convertPixelsToAxisPadding(j[1],e),h+=o.axis.convertPixelsToAxisPadding(j[0],e)),"y"===b&&y(q.axis_y_padding)&&(g=o.axis.getPadding(q.axis_y_padding,"top",g,e),h=o.axis.getPadding(q.axis_y_padding,"bottom",h,e)),"y2"===b&&y(q.axis_y2_padding)&&(g=o.axis.getPadding(q.axis_y2_padding,"top",g,e),h=o.axis.getPadding(q.axis_y2_padding,"bottom",h,e)),A&&(m&&(h=v),n&&(g=-x)),d=[v-h,x+g],B?d.reverse():d)},l.getXDomainMin=function(a){var b=this,c=b.config;return t(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},l.getXDomainMax=function(a){var b=this,c=b.config;return t(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})},l.getXDomainPadding=function(a){var b,c,d,e,f=this,g=f.config,h=a[1]-a[0];return f.isCategorized()?c=0:f.hasType("bar")?(b=f.getMaxDataCount(),c=b>1?h/(b-1)/2:.5):c=.01*h,"object"==typeof g.axis_x_padding&&y(g.axis_x_padding)?(d=p(g.axis_x_padding.left)?g.axis_x_padding.left:c,e=p(g.axis_x_padding.right)?g.axis_x_padding.right:c):d=e="number"==typeof g.axis_x_padding?g.axis_x_padding:c,{left:d,right:e}},l.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],e=c[1],f=b.getXDomainPadding(c),g=0,h=0;return d-e!==0||b.isCategorized()||(b.isTimeSeries()?(d=new Date(.5*d.getTime()),e=new Date(1.5*e.getTime())):(d=0===d?1:.5*d,e=0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},l.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e?e:f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),b&&(f.x.domain(e?e:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},l.trimXDomain=function(a){var b=this;return a[0]<=b.orgXDomain[0]&&(a[1]=+a[1]+(b.orgXDomain[0]-a[0]),a[0]=b.orgXDomain[0]),b.orgXDomain[1]<=a[1]&&(a[0]=+a[0]-(a[1]-b.orgXDomain[1]),a[1]=b.orgXDomain[1]),a},l.isX=function(a){var b=this,c=b.config;return c.data_x&&a===c.data_x||y(c.data_xs)&&A(c.data_xs,a)},l.isNotX=function(a){return!this.isX(a)},l.getXKey=function(a){var b=this,c=b.config;return c.data_x?c.data_x:y(c.data_xs)?c.data_xs[a]:null},l.getXValuesOfXKey=function(a,b){var c,d=this,e=b&&y(b)?d.mapToIds(b):[];return e.forEach(function(b){d.getXKey(b)===a&&(c=d.data.xs[b])}),c},l.getIndexByX=function(a){var b=this,c=b.filterByX(b.data.targets,a);return c.length?c[0].index:null},l.getXValue=function(a,b){var c=this;return a in c.data.xs&&c.data.xs[a]&&p(c.data.xs[a][b])?c.data.xs[a][b]:b},l.getOtherTargetXs=function(){var a=this,b=Object.keys(a.data.xs);return b.length?a.data.xs[b[0]]:null},l.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},l.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},l.hasMultipleX=function(a){return this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()>1},l.isMultipleX=function(){return y(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},l.addName=function(a){var b,c=this;return a&&(b=c.config.data_names[a.id],a.name=b?b:a.id),a},l.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},l.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},l.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},l.generateTargetX=function(a,b,c){var d,e=this;return d=e.isTimeSeries()?a?e.parseDate(a):e.parseDate(e.getXValue(b,c)):e.isCustomX()&&!e.isCategorized()?p(a)?+a:e.getXValue(b,c):c},l.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},l.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))},l.getPrevX=function(a){var b=this.xs[a-1];return"undefined"!=typeof b?b:null},l.getNextX=function(a){var b=this.xs[a+1];return"undefined"!=typeof b?b:null},l.getMaxDataCount=function(){var a=this;return a.d3.max(a.data.targets,function(a){return a.values.length})},l.getMaxDataCountTarget=function(a){var b,c=a.length,d=0;return c>1?a.forEach(function(a){a.values.length>d&&(b=a,d=a.values.length)}):b=c?a[0]:null,b},l.getEdgeX=function(a){var b=this;return a.length?[b.d3.min(a,function(a){return a.values[0].x}),b.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]},l.mapToIds=function(a){return a.map(function(a){return a.id})},l.mapToTargetIds=function(a){var b=this;return a?r(a)?[a]:a:b.mapToIds(b.data.targets)},l.hasTarget=function(a,b){var c,d=this.mapToIds(a);for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},l.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},l.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},l.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})},l.mapTargetsToUniqueXs=function(a){var b=this,c=b.d3.set(b.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return b.isTimeSeries()?c.map(function(a){return new Date(+a)}):c.map(function(a){return+a})},l.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)},l.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},l.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)},l.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},l.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},l.checkValueInTargets=function(a,b){var c,d,e,f=Object.keys(a);for(c=0;c<f.length;c++)for(e=a[f[c]].values,d=0;d<e.length;d++)if(b(e[d].value))return!0;return!1},l.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})},l.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a>0})},l.isOrderDesc=function(){var a=this.config;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},l.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},l.orderTargets=function(a){var b=this,c=b.config,d=b.isOrderAsc(),e=b.isOrderDesc();return d||e?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)},e=a.values.reduce(c,0),f=b.values.reduce(c,0);return d?f-e:e-f}):q(c.data_order)&&a.sort(c.data_order),a},l.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b===0})},l.filterRemoveNull=function(a){return a.filter(function(a){return p(a.value)})},l.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},l.hasDataLabel=function(){var a=this.config;return"boolean"==typeof a.data_labels&&a.data_labels?!0:"object"==typeof a.data_labels&&y(a.data_labels)?!0:!1},l.getDataLabelLength=function(a,b,c){var d=this,e=[0,0],f=1.3;return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=this.getBoundingClientRect()[c]*f}).remove(),e},l.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},l.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},l.findSameXOfValues=function(a,b){var c,d=a[b].x,e=[];for(c=b-1;c>=0&&d===a[c].x;c--)e.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)e.push(a[c]);return e},l.findClosestFromTargets=function(a,b){var c,d=this;return c=a.map(function(a){return d.findClosest(a.values,b)}),d.findClosest(c,b)},l.findClosest=function(a,b){var c,d=this,e=100;return a.filter(function(a){return a&&d.isBarType(a.id)}).forEach(function(a){var b=d.main.select("."+o.bars+d.getTargetSelectorSuffix(a.id)+" ."+o.bar+"-"+a.index).node();!c&&d.isWithinBar(b)&&(c=a)}),a.filter(function(a){return a&&!d.isBarType(a.id)}).forEach(function(a){var f=d.dist(a,b);e>f&&(e=f,c=a)}),c},l.dist=function(a,b){var c=this,d=c.config,e=d.axis_rotated?1:0,f=d.axis_rotated?0:1,g=c.circleY(a,a.index),h=c.x(a.x);return Math.pow(h-b[e],2)+Math.pow(g-b[f],2)},l.convertValuesToStep=function(a){var b,c=[].concat(a);if(!this.isCategorized())return a;for(b=a.length+1;b>0;b--)c[b]=c[b-1];return c[0]={x:c[0].x-1,value:c[0].value,id:c[0].id},c[a.length+1]={x:c[a.length].x+1,value:c[a.length].value,id:c[a.length].id},c},l.updateDataAttributes=function(a,b){var c=this,d=c.config,e=d["data_"+a];return"undefined"==typeof b?e:(Object.keys(b).forEach(function(a){e[a]=b[a]}),c.redraw({withLegend:!0}),e)},l.convertUrlToData=function(a,b,c,d){var e=this,f=b?b:"csv";e.d3.xhr(a,function(a,b){var g;if(!b)throw new Error(a.responseURL+" "+a.status+" ("+a.statusText+")");g="json"===f?e.convertJsonToData(JSON.parse(b.response),c):"tsv"===f?e.convertTsvToData(b.response):e.convertCsvToData(b.response),d.call(e,g)})},l.convertXsvToData=function(a,b){var c,d=b.parseRows(a);return 1===d.length?(c=[{}],d[0].forEach(function(a){c[0][a]=null})):c=b.parse(a),c},l.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)},l.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)},l.convertJsonToData=function(a,b){var c,d,e=this,f=[];return b?(b.x?(c=b.value.concat(b.x),e.config.data_x=b.x):c=b.value,f.push(c),a.forEach(function(a){var b=[];c.forEach(function(c){var d=s(a[c])?null:a[c];b.push(d)}),f.push(b)}),d=e.convertRowsToData(f)):(Object.keys(a).forEach(function(b){f.push([b].concat(a[b]))}),d=e.convertColumnsToData(f)),d},l.convertRowsToData=function(a){var b,c,d=a[0],e={},f=[];for(b=1;b<a.length;b++){for(e={},c=0;c<a[b].length;c++){if(s(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[d[c]]=a[b][c]}f.push(e)}return f},l.convertColumnsToData=function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)for(d=a[b][0],c=1;c<a[b].length;c++){if(s(e[c-1])&&(e[c-1]={}),s(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[c-1][d]=a[b][c]}return e},l.convertDataToTargets=function(a,b){var c,d=this,e=d.config,f=d.d3.keys(a[0]).filter(d.isNotX,d),g=d.d3.keys(a[0]).filter(d.isX,d);return f.forEach(function(c){var f=d.getXKey(c);d.isCustomX()||d.isTimeSeries()?g.indexOf(f)>=0?d.data.xs[c]=(b&&d.data.xs[c]?d.data.xs[c]:[]).concat(a.map(function(a){return a[f]}).filter(p).map(function(a,b){return d.generateTargetX(a,c,b)})):e.data_x?d.data.xs[c]=d.getOtherTargetXs():y(e.data_xs)&&(d.data.xs[c]=d.getXValuesOfXKey(f,d.data.targets)):d.data.xs[c]=a.map(function(a,b){return b})}),f.forEach(function(a){if(!d.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),c=f.map(function(b,c){var f=e.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var h=d.getXKey(b),i=a[h],j=d.generateTargetX(i,b,g);return d.isCustomX()&&d.isCategorized()&&0===c&&i&&(0===g&&(e.axis_x_categories=[]),e.axis_x_categories.push(i)),(s(a[b])||d.data.xs[b].length<=g)&&(j=void 0),{x:j,value:null===a[b]||isNaN(a[b])?null:+a[b],id:f}}).filter(function(a){return t(a.x)})}}),c.forEach(function(a){var b;e.data_xSort&&(a.values=a.values.sort(function(a,b){var c=a.x||0===a.x?a.x:1/0,d=b.x||0===b.x?b.x:1/0;return c-d})),b=0,a.values.forEach(function(a){a.index=b++}),d.data.xs[a.id].sort(function(a,b){return a-b})}),e.data_type&&d.setTargetType(d.mapToIds(c).filter(function(a){return!(a in e.data_types)}),e.data_type),c.forEach(function(a){d.addCache(a.id_org,a)}),c},l.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},l.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},l.unload=function(a,b){var c=this;return b||(b=function(){}),a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}),a&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),void a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll("."+o.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):void b()},l.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},l.initEventRect=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.eventRects).style("fill-opacity",0)},l.redrawEventRect=function(){var a,b,c=this,d=c.config,e=c.isMultipleX(),f=c.main.select("."+o.eventRects).style("cursor",d.zoom_enabled?d.axis_rotated?"ns-resize":"ew-resize":null).classed(o.eventRectsMultiple,e).classed(o.eventRectsSingle,!e);f.selectAll("."+o.eventRect).remove(),c.eventRect=f.selectAll("."+o.eventRect),e?(a=c.eventRect.data([0]),c.generateEventRectsForMultipleXs(a.enter()),c.updateEventRect(a)):(b=c.getMaxDataCountTarget(c.data.targets),f.datum(b?b.values:[]),c.eventRect=f.selectAll("."+o.eventRect),a=c.eventRect.data(function(a){return a}),c.generateEventRectsForSingleX(a.enter()),c.updateEventRect(a),a.exit().remove())},l.updateEventRect=function(a){var b,c,d,e,f,g,h=this,i=h.config;a=a||h.eventRect.data(function(a){return a}),h.isMultipleX()?(b=0,c=0,d=h.width,e=h.height):(!h.isCustomX()&&!h.isTimeSeries()||h.isCategorized()?(f=h.getEventRectWidth(),g=function(a){return h.x(a.x)-f/2}):(h.updateXs(),f=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index);return null===b&&null===c?i.axis_rotated?h.height:h.width:(null===b&&(b=h.x.domain()[0]),null===c&&(c=h.x.domain()[1]),Math.max(0,(h.x(c)-h.x(b))/2))},g=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index),d=h.data.xs[a.id][a.index];return null===b&&null===c?0:(null===b&&(b=h.x.domain()[0]),(h.x(d)+h.x(b))/2)}),b=i.axis_rotated?0:g,c=i.axis_rotated?g:0,d=i.axis_rotated?h.width:f,e=i.axis_rotated?f:h.height),a.attr("class",h.classEvent.bind(h)).attr("x",b).attr("y",c).attr("width",d).attr("height",e)},l.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){var c=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(c,null,!0),b.expandBars(c,null,!0),b.main.selectAll("."+o.shape+"-"+c).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){var c=a.index;b.config&&(b.hasArcType()||(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+o.shape+"-"+c).each(function(a){d.data_onmouseout.call(b.api,a)})))}).on("mousemove",function(a){var e,f=a.index,g=b.svg.select("."+o.eventRect+"-"+f);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,f))&&(f-=1),e=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,f))}),d.tooltip_grouped&&(b.showTooltip(e,this),b.showXGridFocus(e)),(!d.tooltip_grouped||d.data_selection_enabled&&!d.data_selection_grouped)&&b.main.selectAll("."+o.shape+"-"+f).each(function(){c.select(this).classed(o.EXPANDED,!0),d.data_selection_enabled&&g.style("cursor",d.data_selection_grouped?"pointer":null),d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),d.data_selection_grouped||(b.unexpandCircles(f),b.unexpandBars(f)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&g.style("cursor","pointer"),d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(f,a.id,!0),b.expandBars(f,a.id,!0))}))}).on("click",function(a){var e=a.index;if(!b.hasArcType()&&b.toggleShape){if(b.cancelClick)return void(b.cancelClick=!1);b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,e))&&(e-=1),b.main.selectAll("."+o.shape+"-"+e).each(function(a){(d.data_selection_grouped||b.isWithinShape(this,a))&&(b.toggleShape(this,a,e),b.config.data_onclick.call(b.api,a,this))})}}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},l.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+o.eventRect).style("cursor",null),c.hideXGridFocus(),c.hideTooltip(),c.unexpandCircles(),c.unexpandBars()}var c=this,d=c.d3,e=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height).attr("class",o.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a,f,g,h,i=c.filterTargetsToShow(c.data.targets);if(!c.dragging&&!c.hasArcType(i)){if(a=d.mouse(this),f=c.findClosestFromTargets(i,a),!c.mouseover||f&&f.id===c.mouseover.id||(e.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),!f)return void b();g=c.isScatterType(f)||!e.tooltip_grouped?[f]:c.filterByX(i,f.x),h=g.map(function(a){return c.addName(a)}),c.showTooltip(h,this),e.point_focus_expand_enabled&&c.expandCircles(f.index,f.id,!0),c.expandBars(f.index,f.id,!0),c.showXGridFocus(h),(c.isBarType(f.id)||c.dist(f,a)<100)&&(c.svg.select("."+o.eventRect).style("cursor","pointer"),c.mouseover||(e.data_onmouseover.call(c.api,f),c.mouseover=f))}}).on("click",function(){var a,b,f=c.filterTargetsToShow(c.data.targets);c.hasArcType(f)||(a=d.mouse(this),b=c.findClosestFromTargets(f,a),b&&(c.isBarType(b.id)||c.dist(b,a)<100)&&c.main.selectAll("."+o.shapes+c.getTargetSelectorSuffix(b.id)).selectAll("."+o.shape+"-"+b.index).each(function(){(e.data_selection_grouped||c.isWithinShape(this,b))&&(c.toggleShape(this,b,b.index),c.config.data_onclick.call(c.api,b,this))}))}).call(e.data_selection_draggable&&c.drag?d.behavior.drag().origin(Object).on("drag",function(){c.drag(d.mouse(this))}).on("dragstart",function(){c.dragstart(d.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})},l.dispatchEvent=function(a,b,c){var e=this,f="."+o.eventRect+(e.isMultipleX()?"":"-"+b),g=e.main.select(f).node(),h=g.getBoundingClientRect(),i=h.left+(c?c[0]:0),j=h.top+(c?c[1]:0),k=document.createEvent("MouseEvents");k.initMouseEvent(a,!0,!0,d,0,i,j,i,j,!1,!1,!1,!1,0,null),g.dispatchEvent(k)},l.getCurrentWidth=function(){var a=this,b=a.config;return b.size_width?b.size_width:a.getParentWidth()},l.getCurrentHeight=function(){var a=this,b=a.config,c=b.size_height?b.size_height:a.getParentHeight();return c>0?c:320/(a.hasType("gauge")?2:1)},l.getCurrentPaddingTop=function(){var a=this.config;return p(a.padding_top)?a.padding_top:0},l.getCurrentPaddingBottom=function(){var a=this.config;return p(a.padding_bottom)?a.padding_bottom:0},l.getCurrentPaddingLeft=function(a){var b=this,c=b.config;return p(c.padding_left)?c.padding_left:c.axis_rotated?c.axis_x_show?Math.max(u(b.getAxisWidthByAxisId("x",a)),40):1:!c.axis_y_show||c.axis_y_inner?b.axis.getYAxisLabelPosition().isOuter?30:1:u(b.getAxisWidthByAxisId("y",a))},l.getCurrentPaddingRight=function(){var a=this,b=a.config,c=10,d=a.isLegendRight?a.getLegendWidth()+20:0;return p(b.padding_right)?b.padding_right+1:b.axis_rotated?c+d:!b.axis_y2_show||b.axis_y2_inner?2+d+(a.axis.getY2AxisLabelPosition().isOuter?20:0):u(a.getAxisWidthByAxisId("y2"))+d},l.getParentRectValue=function(a){for(var b,c=this.selectChart.node();c&&"BODY"!==c.tagName;){try{b=c.getBoundingClientRect()[a]}catch(d){"width"===a&&(b=c.offsetWidth)}if(b)break;c=c.parentNode}return b},l.getParentWidth=function(){return this.getParentRectValue("width")},l.getParentHeight=function(){var a=this.selectChart.style("height");return a.indexOf("px")>0?+a.replace("px",""):0},l.getSvgLeft=function(a){var b=this,c=b.config,d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,e=c.axis_rotated?o.axisX:o.axisY,f=b.main.select("."+e).node(),g=f&&d?f.getBoundingClientRect():{right:0},h=b.selectChart.node().getBoundingClientRect(),i=b.hasArcType(),j=g.right-h.left-(i?0:b.getCurrentPaddingLeft(a));return j>0?j:0},l.getAxisWidthByAxisId=function(a,b){var c=this,d=c.axis.getLabelPositionById(a);return c.axis.getMaxTickWidth(a,b)+(d.isInner?20:40)},l.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_x_tick_rotate)/180)),d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},l.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},l.getShapeIndices=function(a){var b,c,d=this,e=d.config,f={},g=0;return d.filterTargetsToShow(d.data.targets.filter(a,d)).forEach(function(a){for(b=0;b<e.data_groups.length;b++)if(!(e.data_groups[b].indexOf(a.id)<0))for(c=0;c<e.data_groups[b].length;c++)if(e.data_groups[b][c]in f){f[a.id]=f[e.data_groups[b][c]];break}s(f[a.id])&&(f[a.id]=g++)}),f.__max__=g-1,f},l.getShapeX=function(a,b,c,d){var e=this,f=d?e.subX:e.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?f(d.x)-a*(b/2-e):0}},l.getShapeY=function(a){var b=this;return function(c){var d=a?b.getSubYScale(c.id):b.getYScale(c.id);return d(c.value)}},l.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&e[g].value*a.value>=0&&(j+=h(e[g].value)-i)}),j}},l.isWithinShape=function(a,b){var c,d=this,e=d.d3.select(a);return d.isTargetToShow(b.id)?"circle"===a.nodeName?c=d.isStepType(b)?d.isWithinStep(a,d.getYScale(b.id)(b.value)):d.isWithinCircle(a,1.5*d.pointSelectR(b)):"path"===a.nodeName&&(c=e.classed(o.bar)?d.isWithinBar(a):!0):c=!1,c},l.getInterpolate=function(a){var b=this;return b.isSplineType(a)?"cardinal":b.isStepType(a)?b.config.line_step_type:"linear"},l.initLine=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.chartLines)},l.updateTargetsForLine=function(a){var b,c,d=this,e=d.config,f=d.classChartLine.bind(d),g=d.classLines.bind(d),h=d.classAreas.bind(d),i=d.classCircles.bind(d),j=d.classFocus.bind(d);b=d.main.select("."+o.chartLines).selectAll("."+o.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g),c.append("g").attr("class",h),c.append("g").attr("class",function(a){return d.generateClass(o.selectedCircles,a.id)}),c.append("g").attr("class",i).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){d.main.selectAll("."+o.selectedCircles+d.getTargetSelectorSuffix(a.id)).selectAll("."+o.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},l.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+o.lines).selectAll("."+o.line).data(b.lineData.bind(b)),b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),b.mainLine.exit().transition().duration(a).style("opacity",0).remove()},l.redrawLine=function(a,b){return[(b?this.mainLine.transition():this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},l.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(function(a){return null!=a.value})),function(a){var f,h=d.line_connectNull?c.filterRemoveNull(a.values):a.values,i=b?c.x:c.subX,j=g.call(c,a.id),k=0,l=0;return c.isLineType(a)?d.data_regions[a.id]?f=c.lineWithRegions(h,i,j,d.data_regions[a.id]):(c.isStepType(a)&&(h=c.convertValuesToStep(h)),f=e.interpolate(c.getInterpolate(a))(h)):(h[0]&&(k=i(h[0].x),l=j(h[0].value)),f=d.axis_rotated?"M "+l+" "+k:"M "+k+" "+l),f?f:"M 0 0"}},l.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},l.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g,h,i,j,k,l,m,n,o,p,q,r,u=this,v=u.config,w=-1,x="M",y=u.isCategorized()?.5:0,z=[];if(t(d))for(g=0;g<d.length;g++)z[g]={},s(d[g].start)?z[g].start=a[0].x:z[g].start=u.isTimeSeries()?u.parseDate(d[g].start):d[g].start,s(d[g].end)?z[g].end=a[a.length-1].x:z[g].end=u.isTimeSeries()?u.parseDate(d[g].end):d[g].end;for(q=v.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)},r=v.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},i=u.isTimeSeries()?function(a,d,e,g){var h,i=a.x.getTime(),j=d.x-a.x,l=new Date(i+j*e),m=new Date(i+j*(e+g));return h=v.axis_rotated?[[c(k(e)),b(l)],[c(k(e+g)),b(m)]]:[[b(l),c(k(e))],[b(m),c(k(e+g))]],f(h)}:function(a,d,e,g){var h;return h=v.axis_rotated?[[c(k(e),!0),b(j(e))],[c(k(e+g),!0),b(j(e+g))]]:[[b(j(e),!0),c(k(e))],[b(j(e+g),!0),c(k(e+g))]],f(h)},g=0;g<a.length;g++){if(s(z)||!e(a[g].x,z))x+=" "+q(a[g])+" "+r(a[g]);else for(j=u.getScale(a[g-1].x+y,a[g].x+y,u.isTimeSeries()),k=u.getScale(a[g-1].value,a[g].value),l=b(a[g].x)-b(a[g-1].x),m=c(a[g].value)-c(a[g-1].value),n=Math.sqrt(Math.pow(l,2)+Math.pow(m,2)),o=2/n,p=2*o,h=o;1>=h;h+=p)x+=i(a[g-1],a[g],h,o);w=a[g].x}return x},l.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+o.areas).selectAll("."+o.area).data(b.lineData.bind(b)),b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.mainArea.style("opacity",b.orgAreaOpacity),b.mainArea.exit().transition().duration(a).style("opacity",0).remove()},l.redrawArea=function(a,b){return[(b?this.mainArea.transition():this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},l.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id));
},j=function(a,b){return d.data_groups.length>0?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var b,f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,g=0,h=0;return c.isAreaType(a)?(c.isStepType(a)&&(f=c.convertValuesToStep(f)),b=e.interpolate(c.getInterpolate(a))(f)):(f[0]&&(g=c.x(f[0].x),h=c.getYScale(a.id)(f[0].value)),b=d.axis_rotated?"M "+h+" "+g:"M "+g+" "+h),b?b:"M 0 0"}},l.getAreaBaseValue=function(){return 0},l.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},l.updateCircle=function(){var a=this;a.mainCircle=a.main.selectAll("."+o.circles).selectAll("."+o.circle).data(a.lineOrScatterData.bind(a)),a.mainCircle.enter().append("circle").attr("class",a.classCircle.bind(a)).attr("r",a.pointR.bind(a)).style("fill",a.color),a.mainCircle.style("opacity",a.initialOpacityForCircle.bind(a)),a.mainCircle.exit().remove()},l.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+o.selectedCircle);return[(c?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition():d).attr("cx",a).attr("cy",b)]},l.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},l.updateCircleY=function(){var a,b,c=this;c.config.data_groups.length>0?(a=c.getShapeIndices(c.isLineType),b=c.generateGetLinePoints(a),c.circleY=function(a,c){return b(a,c)[0][1]}):c.circleY=function(a){return c.getYScale(a.id)(a.value)}},l.getCircles=function(a,b){var c=this;return(b?c.main.selectAll("."+o.circles+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+o.circle+(p(a)?"-"+a:""))},l.expandCircles=function(a,b,c){var d=this,e=d.pointExpandedR.bind(d);c&&d.unexpandCircles(),d.getCircles(a,b).classed(o.EXPANDED,!0).attr("r",e)},l.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(o.EXPANDED)}).classed(o.EXPANDED,!1).attr("r",c)},l.pointR=function(a){var b=this,c=b.config;return b.isStepType(a)?0:q(c.point_r)?c.point_r(a):c.point_r},l.pointExpandedR=function(a){var b=this,c=b.config;return c.point_focus_expand_enabled?c.point_focus_expand_r?c.point_focus_expand_r:1.75*b.pointR(a):b.pointR(a)},l.pointSelectR=function(a){var b=this,c=b.config;return c.point_select_r?c.point_select_r:4*b.pointR(a)},l.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],2)+Math.pow(g-d[1],2))<b},l.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},l.initBar=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.chartBars)},l.updateTargetsForBar=function(a){var b,c,d=this,e=d.config,f=d.classChartBar.bind(d),g=d.classBars.bind(d),h=d.classFocus.bind(d);b=d.main.select("."+o.chartBars).selectAll("."+o.chartBar).data(a).attr("class",function(a){return f(a)+h(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null})},l.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+o.bars).selectAll("."+o.bar).data(c),b.mainBar.enter().append("path").attr("class",d).style("stroke",f).style("fill",f),b.mainBar.style("opacity",e),b.mainBar.exit().transition().duration(a).style("opacity",0).remove()},l.redrawBar=function(a,b){return[(b?this.mainBar.transition():this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]},l.getBarW=function(a,b){var c=this,d=c.config,e="number"==typeof d.bar_width?d.bar_width:b?a.tickInterval()*d.bar_width_ratio/b:0;return d.bar_width_max&&e>d.bar_width_max?d.bar_width_max:e},l.getBars=function(a,b){var c=this;return(b?c.main.selectAll("."+o.bars+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+o.bar+(p(a)?"-"+a:""))},l.expandBars=function(a,b,c){var d=this;c&&d.unexpandBars(),d.getBars(a,b).classed(o.EXPANDED,!0)},l.unexpandBars=function(a){var b=this;b.getBars(a).classed(o.EXPANDED,!1)},l.generateDrawBar=function(a,b){var c=this,d=c.config,e=c.generateGetBarPoints(a,b);return function(a,b){var c=e(a,b),f=d.axis_rotated?1:0,g=d.axis_rotated?0:1,h="M "+c[0][f]+","+c[0][g]+" L"+c[1][f]+","+c[1][g]+" L"+c[2][f]+","+c[2][g]+" L"+c[3][f]+","+c[3][g]+" z";return h}},l.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=b?c.getSubYScale:c.getYScale;return function(a,b){var d=j.call(c,a.id)(0),e=i(a,b)||d,k=g(a),l=h(a);return c.config.axis_rotated&&(0<a.value&&d>l||a.value<0&&l>d)&&(l=d),[[k,e],[k,l-(d-e)],[k+f,l-(d-e)],[k+f,e]]}},l.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),e=a.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),h=c.width,i=c.height,j=2,k=f-j,l=f+h+j,m=g+i+j,n=g-j;return k<b[0]&&b[0]<l&&n<b[1]&&b[1]<m},l.initText=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.chartTexts),a.mainText=a.d3.selectAll([])},l.updateTargetsForText=function(a){var b,c,d=this,e=d.classChartText.bind(d),f=d.classTexts.bind(d),g=d.classFocus.bind(d);b=d.main.select("."+o.chartTexts).selectAll("."+o.chartText).data(a).attr("class",function(a){return e(a)+g(a)}),c=b.enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",f)},l.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),e=b.classText.bind(b);b.mainText=b.main.selectAll("."+o.texts).selectAll("."+o.text).data(d),b.mainText.enter().append("text").attr("class",e).attr("text-anchor",function(a){return c.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0),b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)}),b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()},l.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},l.getTextRect=function(a,b){var c,d=this.d3.select("body").append("div").classed("c3",!0),e=d.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);return e.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).text(a).each(function(){c=this.getBoundingClientRect()}),d.remove(),c},l.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},l.getXForText=function(a,b,c){var d,e,f=this,g=c.getBoundingClientRect();return f.config.axis_rotated?(e=f.isBarType(b)?4:6,d=a[2][1]+e*(b.value<0?-1:1)):d=f.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(d>f.width?d=f.width-g.width:0>d&&(d=4)),d},l.getYForText=function(a,b,c){var d,e=this,f=c.getBoundingClientRect();return e.config.axis_rotated?d=(a[0][0]+a[2][0]+.6*f.height)/2:(d=a[2][1],b.value<0?(d+=f.height,e.isBarType(b)&&e.isSafari()?d-=3:!e.isBarType(b)&&e.isChrome()&&(d+=3)):d+=e.isBarType(b)?-3:-6),null!==b.value||e.config.axis_rotated||(d<f.height?d=f.height:d>this.height&&(d=this.height-4)),d},l.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},l.hasType=function(a,b){var c=this,d=c.config.data_types,e=!1;return b=b||c.data.targets,b&&b.length?b.forEach(function(b){var c=d[b.id];(c&&c.indexOf(a)>=0||!c&&"line"===a)&&(e=!0)}):Object.keys(d).length?Object.keys(d).forEach(function(b){d[b]===a&&(e=!0)}):e=c.config.data_type===a,e},l.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},l.isLineType=function(a){var b=this.config,c=r(a)?a:a.id;return!b.data_types[c]||["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])>=0},l.isStepType=function(a){var b=r(a)?a:a.id;return["step","area-step"].indexOf(this.config.data_types[b])>=0},l.isSplineType=function(a){var b=r(a)?a:a.id;return["spline","area-spline"].indexOf(this.config.data_types[b])>=0},l.isAreaType=function(a){var b=r(a)?a:a.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[b])>=0},l.isBarType=function(a){var b=r(a)?a:a.id;return"bar"===this.config.data_types[b]},l.isScatterType=function(a){var b=r(a)?a:a.id;return"scatter"===this.config.data_types[b]},l.isPieType=function(a){var b=r(a)?a:a.id;return"pie"===this.config.data_types[b]},l.isGaugeType=function(a){var b=r(a)?a:a.id;return"gauge"===this.config.data_types[b]},l.isDonutType=function(a){var b=r(a)?a:a.id;return"donut"===this.config.data_types[b]},l.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},l.lineData=function(a){return this.isLineType(a)?[a]:[]},l.arcData=function(a){return this.isArcType(a.data)?[a]:[]},l.barData=function(a){return this.isBarType(a)?a.values:[]},l.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},l.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},l.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",o.grid),b.grid_x_show&&a.grid.append("g").attr("class",o.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",o.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",o.xgridFocus).append("line").attr("class",o.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},l.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",o.grid+" "+o.gridLines),a.gridLines.append("g").attr("class",o.xgridLines),a.gridLines.append("g").attr("class",o.ygridLines),a.xgridLines=b.selectAll([])},l.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height},b.xgrid=b.main.select("."+o.xgrids).selectAll("."+o.xgrid).data(e),b.xgrid.enter().append("line").attr("class",o.xgrid),a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1}),b.xgrid.exit().remove()},l.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks);a.ygrid=a.main.select("."+o.ygrids).selectAll("."+o.ygrid).data(c),a.ygrid.enter().append("line").attr("class",o.ygrid),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},l.gridTextAnchor=function(a){return a.position?a.position:"end"},l.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4},l.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},l.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},l.updateGrid=function(a){var b,c,d,e=this,f=e.main,g=e.config;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),f.select("line."+o.xgridFocus).style("visibility","hidden"),g.grid_x_show&&e.updateXGrid(),e.xgridLines=f.select("."+o.xgridLines).selectAll("."+o.xgridLine).data(g.grid_x_lines),b=e.xgridLines.enter().append("g").attr("class",function(a){return o.xgridLine+(a["class"]?" "+a["class"]:"")}),b.append("line").style("opacity",0),b.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"":"rotate(-90)").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),e.xgridLines.exit().transition().duration(a).style("opacity",0).remove(),g.grid_y_show&&e.updateYGrid(),e.ygridLines=f.select("."+o.ygridLines).selectAll("."+o.ygridLine).data(g.grid_y_lines),c=e.ygridLines.enter().append("g").attr("class",function(a){return o.ygridLine+(a["class"]?" "+a["class"]:"")}),c.append("line").style("opacity",0),c.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"rotate(-90)":"").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),d=e.yv.bind(e),e.ygridLines.select("line").transition().duration(a).attr("x1",g.axis_rotated?d:0).attr("x2",g.axis_rotated?d:e.width).attr("y1",g.axis_rotated?0:d).attr("y2",g.axis_rotated?e.height:d).style("opacity",1),e.ygridLines.select("text").transition().duration(a).attr("x",g.axis_rotated?e.xGridTextX.bind(e):e.yGridTextX.bind(e)).attr("y",d).text(function(a){return a.text}).style("opacity",1),e.ygridLines.exit().transition().duration(a).style("opacity",0).remove()},l.redrawGrid=function(a){var b=this,c=b.config,d=b.xv.bind(b),e=b.xgridLines.select("line"),f=b.xgridLines.select("text");return[(a?e.transition():e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?b.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:b.height).style("opacity",1),(a?f.transition():f).attr("x",c.axis_rotated?b.yGridTextX.bind(b):b.xGridTextX.bind(b)).attr("y",d).text(function(a){return a.text}).style("opacity",1)]},l.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&p(a.value)}),e=b.main.selectAll("line."+o.xgridFocus),f=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(e.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",f).attr(c.axis_rotated?"y2":"x2",f),b.smoothLines(e,"grid")))},l.hideXGridFocus=function(){this.main.select("line."+o.xgridFocus).style("visibility","hidden")},l.updateXgridFocus=function(){var a=this,b=a.config;a.main.select("line."+o.xgridFocus).attr("x1",b.axis_rotated?0:-10).attr("x2",b.axis_rotated?a.width:-10).attr("y1",b.axis_rotated?-10:0).attr("y2",b.axis_rotated?-10:a.height)},l.generateGridData=function(a,b){var c,d,e,f,g=this,h=[],i=g.main.select("."+o.axisX).selectAll(".tick").size();if("year"===a)for(c=g.getXDomain(),d=c[0].getFullYear(),e=c[1].getFullYear(),f=d;e>=f;f++)h.push(new Date(f+"-01-01 00:00:00"));else h=b.ticks(10),h.length>i&&(h=h.filter(function(a){return(""+a).indexOf(".")<0}));return h},l.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])&&(c=!0)}),c}:function(){return!0}},l.removeGridLines=function(a,b){var c=this,d=c.config,e=c.getGridFilterToRemove(a),f=function(a){return!e(a)},g=b?o.xgridLines:o.ygridLines,h=b?o.xgridLine:o.ygridLine;c.main.select("."+g).selectAll("."+h).filter(e).transition().duration(d.transition_duration).style("opacity",0).remove(),b?d.grid_x_lines=d.grid_x_lines.filter(f):d.grid_y_lines=d.grid_y_lines.filter(f)},l.initTooltip=function(){var a,b=this,c=b.config;if(b.tooltip=b.selectChart.style("position","relative").append("div").attr("class",o.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),c.tooltip_init_show){if(b.isTimeSeries()&&r(c.tooltip_init_x)){for(c.tooltip_init_x=b.parseDate(c.tooltip_init_x),a=0;a<b.data.targets[0].values.length&&b.data.targets[0].values[a].x-c.tooltip_init_x!==0;a++);c.tooltip_init_x=a}b.tooltip.html(c.tooltip_contents.call(b,b.data.targets.map(function(a){return b.addName(a.values[c.tooltip_init_x])}),b.axis.getXAxisTickFormat(),b.getYFormat(b.hasArcType()),b.color)),b.tooltip.style("top",c.tooltip_init_position.top).style("left",c.tooltip_init_position.left).style("display","block")}},l.getTooltipContent=function(a,b,c,d){var e,f,g,h,i,j,k=this,l=k.config,m=l.tooltip_format_title||b,n=l.tooltip_format_name||function(a){return a},p=l.tooltip_format_value||c;for(f=0;f<a.length;f++)a[f]&&(a[f].value||0===a[f].value)&&(e||(g=m?m(a[f].x):a[f].x,e="<table class='"+o.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),h=p(a[f].value,a[f].ratio,a[f].id,a[f].index),void 0!==h&&(i=n(a[f].name,a[f].ratio,a[f].id,a[f].index),j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+o.tooltipName+"-"+a[f].id+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"));return e+"</table>"},l.tooltipPosition=function(a,b,c,d){var e,f,g,h,i,j=this,k=j.config,l=j.d3,m=j.hasArcType(),n=l.mouse(d);return m?(f=(j.width-(j.isLegendRight?j.getLegendWidth():0))/2+n[0],h=j.height/2+n[1]+20):(e=j.getSvgLeft(!0),k.axis_rotated?(f=e+n[0]+100,g=f+b,i=j.currentWidth-j.getCurrentPaddingRight(),h=j.x(a[0].x)+20):(f=e+j.getCurrentPaddingLeft(!0)+j.x(a[0].x)+20,g=f+b,i=e+j.currentWidth-j.getCurrentPaddingRight(),h=n[1]+15),g>i&&(f-=g-i+20),h+c>j.currentHeight&&(h-=c+30)),0>h&&(h=0),{top:h,left:f}},l.showTooltip=function(a,b){var c,d,e,f=this,g=f.config,h=f.hasArcType(),i=a.filter(function(a){return a&&p(a.value)}),j=g.tooltip_position||l.tooltipPosition;0!==i.length&&g.tooltip_show&&(f.tooltip.html(g.tooltip_contents.call(f,a,f.axis.getXAxisTickFormat(),f.getYFormat(h),f.color)).style("display","block"),c=f.tooltip.property("offsetWidth"),d=f.tooltip.property("offsetHeight"),e=j.call(this,i,c,d,b),f.tooltip.style("top",e.top+"px").style("left",e.left+"px"))},l.hideTooltip=function(){this.tooltip.style("display","none")},l.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},l.updateLegendWithDefaults=function(){var a=this;a.updateLegend(a.mapToIds(a.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},l.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:NaN,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},l.transformLegend=function(a){var b=this;(a?b.legend.transition():b.legend).attr("transform",b.getTranslate("legend"))},l.updateLegendStep=function(a){this.legendStep=a},l.updateLegendItemWidth=function(a){this.legendItemWidth=a},l.updateLegendItemHeight=function(a){this.legendItemHeight=a},l.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},l.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},l.opacityForLegend=function(a){return a.classed(o.legendItemHidden)?null:1},l.opacityForUnfocusedLegend=function(a){return a.classed(o.legendItemHidden)?null:.3},l.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+o.legendItem).filter(function(b){return a.indexOf(b)>=0}).classed(o.legendItemFocused,b).transition().duration(100).style("opacity",function(){var a=b?c.opacityForLegend:c.opacityForUnfocusedLegend;return a.call(c,c.d3.select(this))})},l.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+o.legendItem).classed(o.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},l.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},l.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&x(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},l.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},l.updateLegend=function(a,b,c){function d(a,b){return u.legendItemTextBox[b]||(u.legendItemTextBox[b]=u.getTextRect(a.textContent,o.legendItem)),u.legendItemTextBox[b]}function e(b,c,e){function f(a,b){b||(g=(o-D-n)/2,B>g&&(g=(o-n)/2,D=0,J++)),I[a]=J,H[J]=u.isLegendInset?10:g,E[a]=D,D+=n}var g,h,i=0===e,j=e===a.length-1,k=d(b,c),l=k.width+C+(!j||u.isLegendRight||u.isLegendInset?x:0),m=k.height+w,n=u.isLegendRight||u.isLegendInset?m:l,o=u.isLegendRight||u.isLegendInset?u.getLegendHeight():u.getLegendWidth();return i&&(D=0,J=0,y=0,A=0),v.legend_show&&!u.isLegendToShow(c)?void(F[c]=G[c]=I[c]=E[c]=0):(F[c]=l,G[c]=m,(!y||l>=y)&&(y=l),(!A||m>=A)&&(A=m),h=u.isLegendRight||u.isLegendInset?A:y,void(v.legend_equally?(Object.keys(F).forEach(function(a){F[a]=y}),Object.keys(G).forEach(function(a){G[a]=A}),g=(o-h*a.length)/2,B>g?(D=0,J=0,a.forEach(function(a){f(a)})):f(c,!0)):f(c)))}var f,g,h,i,j,k,l,m,n,p,q,r,s,u=this,v=u.config,w=4,x=10,y=0,A=0,B=10,C=15,D=0,E={},F={},G={},H=[0],I={},J=0;b=b||{},m=z(b,"withTransition",!0),n=z(b,"withTransitionForTransform",!0),u.isLegendInset&&(J=v.legend_inset_step?v.legend_inset_step:a.length,u.updateLegendStep(J)),u.isLegendRight?(f=function(a){return y*I[a]},i=function(a){return H[I[a]]+E[a]}):u.isLegendInset?(f=function(a){return y*I[a]+10},i=function(a){return H[I[a]]+E[a]}):(f=function(a){return H[I[a]]+E[a]},i=function(a){return A*I[a]}),g=function(a,b){return f(a,b)+14},j=function(a,b){return i(a,b)+9},h=function(a,b){return f(a,b)},k=function(a,b){return i(a,b)-5},l=u.legend.selectAll("."+o.legendItem).data(a).enter().append("g").attr("class",function(a){return u.generateClass(o.legendItem,a)}).style("visibility",function(a){return u.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){v.legend_item_onclick?v.legend_item_onclick.call(u,a):u.d3.event.altKey?(u.api.hide(),u.api.show(a)):(u.api.toggle(a),u.isTargetToShow(a)?u.api.focus(a):u.api.revert())}).on("mouseover",function(a){u.d3.select(this).classed(o.legendItemFocused,!0),!u.transiting&&u.isTargetToShow(a)&&u.api.focus(a),v.legend_item_onmouseover&&v.legend_item_onmouseover.call(u,a)}).on("mouseout",function(a){u.d3.select(this).classed(o.legendItemFocused,!1),u.api.revert(),v.legend_item_onmouseout&&v.legend_item_onmouseout.call(u,a)}),l.append("text").text(function(a){return t(v.data_names[a])?v.data_names[a]:a}).each(function(a,b){e(this,a,b)}).style("pointer-events","none").attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:j),l.append("rect").attr("class",o.legendItemEvent).style("fill-opacity",0).attr("x",u.isLegendRight||u.isLegendInset?h:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:k),l.append("rect").attr("class",o.legendItemTile).style("pointer-events","none").style("fill",u.color).attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:i).attr("width",10).attr("height",10),s=u.legend.select("."+o.legendBackground+" rect"),u.isLegendInset&&y>0&&0===s.size()&&(s=u.legend.insert("g","."+o.legendItem).attr("class",o.legendBackground).append("rect")),p=u.legend.selectAll("text").data(a).text(function(a){return t(v.data_names[a])?v.data_names[a]:a}).each(function(a,b){e(this,a,b)}),(m?p.transition():p).attr("x",g).attr("y",j),q=u.legend.selectAll("rect."+o.legendItemEvent).data(a),(m?q.transition():q).attr("width",function(a){return F[a]}).attr("height",function(a){return G[a]}).attr("x",h).attr("y",k),r=u.legend.selectAll("rect."+o.legendItemTile).data(a),(m?r.transition():r).style("fill",u.color).attr("x",f).attr("y",i),s&&(m?s.transition():s).attr("height",u.getLegendHeight()-12).attr("width",y*(J+1)+10),u.legend.selectAll("."+o.legendItem).classed(o.legendItemHidden,function(a){return!u.isTargetToShow(a)}),u.updateLegendItemWidth(y),u.updateLegendItemHeight(A),u.updateLegendStep(J),u.updateSizes(),u.updateScales(),u.updateSvgSize(),u.transformAll(n,c),u.legendHasRendered=!0},f(e,i),i.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",o.axis+" "+o.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",o.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),a.axes.y=c.append("g").attr("class",o.axis+" "+o.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",o.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=c.append("g").attr("class",o.axis+" "+o.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",o.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},i.prototype.getXAxis=function(a,b,c,d,e,f,g){var h=this.owner,i=h.config,k={isCategory:h.isCategorized(),withOuterTick:e,tickMultiline:i.axis_x_tick_multiline,tickWidth:i.axis_x_tick_width,tickTextRotate:g?0:i.axis_x_tick_rotate,withoutTransition:f},l=j(h.d3,k).scale(a).orient(b);return h.isTimeSeries()&&d&&(d=d.map(function(a){return h.parseDate(a)})),l.tickFormat(c).tickValues(d),h.isCategorized()&&(l.tickCentered(i.axis_x_tick_centered),x(i.axis_x_tick_culling)&&(i.axis_x_tick_culling=!1)),l},i.prototype.updateXAxisTickValues=function(a,b){var c,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(c=this.generateTickValues(d.mapTargetsToUniqueXs(a),e.axis_x_tick_count,d.isTimeSeries())),b?b.tickValues(c):(d.xAxis.tickValues(c),d.subXAxis.tickValues(c)),c},i.prototype.getYAxis=function(a,b,c,d,e,f){var g={withOuterTick:e,withoutTransition:f},h=this.owner,i=h.d3,k=h.config,l=j(i,g).scale(a).orient(b).tickFormat(c);return h.isTimeSeriesY()?l.ticks(i.time[k.axis_y_tick_time_value],k.axis_y_tick_time_interval):l.tickValues(d),l},i.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"},i.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return 0>a?a.toFixed(0):a};return b.axis_x_tick_format&&(q(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""})),q(c)?function(b){return c.call(a,b)}:c},i.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0},i.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},i.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},i.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},i.prototype.getLabelOptionByAxisId=function(a){var b,c=this.owner,d=c.config;return"y"===a?b=d.axis_y_label:"y2"===a?b=d.axis_y2_label:"x"===a&&(b=d.axis_x_label),b},i.prototype.getLabelText=function(a){var b=this.getLabelOptionByAxisId(a);return r(b)?b:b?b.text:null},i.prototype.setLabelText=function(a,b){var c=this.owner,d=c.config,e=this.getLabelOptionByAxisId(a);r(e)?"y"===a?d.axis_y_label=b:"y2"===a?d.axis_y2_label=b:"x"===a&&(d.axis_x_label=b):e&&(e.text=b)},i.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),d=c&&"object"==typeof c&&c.position?c.position:b;return{isInner:d.indexOf("inner")>=0,isOuter:d.indexOf("outer")>=0,isLeft:d.indexOf("left")>=0,isCenter:d.indexOf("center")>=0,isRight:d.indexOf("right")>=0,isTop:d.indexOf("top")>=0,isMiddle:d.indexOf("middle")>=0,isBottom:d.indexOf("bottom")>=0}},i.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},i.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},i.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},i.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},i.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},i.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},i.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},i.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0},i.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"},i.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"},i.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},i.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},i.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},i.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},i.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},i.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},i.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-this.getMaxTickWidth("x"):c.isInner?"-0.5em":b.axis_x_height?b.axis_x_height-10:"3em"},i.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},i.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},i.prototype.textAnchorForXAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(!a.config.axis_rotated,this.getXAxisLabelPosition())},i.prototype.textAnchorForYAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getYAxisLabelPosition())},i.prototype.textAnchorForY2AxisLabel=function(){var a=this.owner;
return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getY2AxisLabelPosition())},i.prototype.getMaxTickWidth=function(a,b){var c,d,e,f,g,h=this.owner,i=h.config,j=0;return b&&h.currentMaxTickWidths[a]?h.currentMaxTickWidths[a]:(h.svg&&(c=h.filterTargetsToShow(h.data.targets),"y"===a?(d=h.y.copy().domain(h.getYDomain(c,"y")),e=this.getYAxis(d,h.yOrient,i.axis_y_tick_format,h.yAxisTickValues,!1,!0)):"y2"===a?(d=h.y2.copy().domain(h.getYDomain(c,"y2")),e=this.getYAxis(d,h.y2Orient,i.axis_y2_tick_format,h.y2AxisTickValues,!1,!0)):(d=h.x.copy().domain(h.getXDomain(c)),e=this.getXAxis(d,h.xOrient,h.xAxisTickFormat,h.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(c,e)),f=h.d3.select("body").append("div").classed("c3",!0),g=f.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g.append("g").call(e).each(function(){h.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();j<a.width&&(j=a.width)}),f.remove()})),h.currentMaxTickWidths[a]=0>=j?h.currentMaxTickWidths[a]:j,h.currentMaxTickWidths[a])},i.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+o.axisX+" ."+o.axisXLabel),d=b.main.select("."+o.axisY+" ."+o.axisYLabel),e=b.main.select("."+o.axisY2+" ."+o.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(a?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},i.prototype.getPadding=function(a,b,c,d){return p(a[b])?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(a[b],d):c},i.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner,d=c.config.axis_rotated?c.width:c.height;return b*(a/d)},i.prototype.generateTickValues=function(a,b,c){var d,e,f,g,h,i,j,k=a;if(b)if(d=q(b)?b():b,1===d)k=[a[0]];else if(2===d)k=[a[0],a[a.length-1]];else if(d>2){for(g=d-2,e=a[0],f=a[a.length-1],h=(f-e)/(g+1),k=[e],i=0;g>i;i++)j=+e+h*(i+1),k.push(c?new Date(j):j);k.push(f)}return c||(k=k.sort(function(a,b){return a-b})),k},i.prototype.generateTransitions=function(a){var b=this.owner,c=b.axes;return{axisX:a?c.x.transition().duration(a):c.x,axisY:a?c.y.transition().duration(a):c.y,axisY2:a?c.y2.transition().duration(a):c.y2,axisSubX:a?c.subx.transition().duration(a):c.subx}},i.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1),c.axes.y.style("opacity",b?0:1),c.axes.y2.style("opacity",b?0:1),c.axes.subx.style("opacity",b?0:1),a.axisX.call(c.xAxis),a.axisY.call(c.yAxis),a.axisY2.call(c.y2Axis),a.axisSubX.call(c.subXAxis)},l.getClipPath=function(a){var b=d.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(b?"":document.URL.split("#")[0])+"#"+a+")"},l.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},l.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},l.getAxisClipY=function(a){return a?-20:-this.margin.top},l.getXAxisClipX=function(){var a=this;return a.getAxisClipX(!a.config.axis_rotated)},l.getXAxisClipY=function(){var a=this;return a.getAxisClipY(!a.config.axis_rotated)},l.getYAxisClipX=function(){var a=this;return a.config.axis_y_inner?-1:a.getAxisClipX(a.config.axis_rotated)},l.getYAxisClipY=function(){var a=this;return a.getAxisClipY(a.config.axis_rotated)},l.getAxisClipWidth=function(a){var b=this,c=Math.max(30,b.margin.left),d=Math.max(30,b.margin.right);return a?b.width+2+c+d:b.margin.left+20},l.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},l.getXAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(!a.config.axis_rotated)},l.getXAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(!a.config.axis_rotated)},l.getYAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(a.config.axis_rotated)+(a.config.axis_y_inner?20:0)},l.getYAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(a.config.axis_rotated)},l.initPie=function(){var a=this,b=a.d3,c=a.config;a.pie=b.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)}),c.data_order||a.pie.sort(null)},l.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2,a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0},l.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},l.updateAngle=function(a){var b,c,d=this,e=d.config,f=!1,g=0,h=e.gauge_min,i=e.gauge_max;return d.pie(d.filterTargetsToShow(d.data.targets)).forEach(function(b){f||b.data.id!==a.data.id||(f=!0,a=b,a.index=g),g++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),d.isGaugeType(a.data)&&(b=Math.PI/(i-h),c=a.value<h?0:a.value<i?a.value-h:i-h,a.startAngle=-1*(Math.PI/2),a.endAngle=a.startAngle+b*c),f?a:null},l.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c),e?b(e):"M 0 0")};return c.centroid=b.centroid,c},l.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){var d=b.updateAngle(a);return d?c(d):"M 0 0"}},l.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},l.transformForArcLabel=function(a){var b,c,d,e,f,g=this,h=g.updateAngle(a),i="";return h&&!g.hasType("gauge")&&(b=this.svgArc.centroid(h),c=isNaN(b[0])?0:b[0],d=isNaN(b[1])?0:b[1],e=Math.sqrt(c*c+d*d),f=g.radius&&e?(36/g.radius>.375?1.175-36/g.radius:.8)*g.radius/e:0,i="translate("+c*f+","+d*f+")"),i},l.getArcRatio=function(a){var b=this,c=b.hasType("gauge")?Math.PI:2*Math.PI;return a?(a.endAngle-a.startAngle)/c:null},l.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},l.textForArcLabel=function(a){var b,c,d,e,f,g=this;return g.shouldShowArcLabel()?(b=g.updateAngle(a),c=b?b.value:null,d=g.getArcRatio(b),e=a.data.id,g.hasType("gauge")||g.meetsArcLabelThreshold(d)?(f=g.getArcLabelFormat(),f?f(c,d,e):g.defaultArcValueFormat(c,d)):""):""},l.expandArc=function(a){var b,c=this;return c.transiting?void(b=d.setInterval(function(){c.transiting||(d.clearInterval(b),c.legend.selectAll(".c3-legend-item-focused").size()>0&&c.expandArc(a))},10)):(a=c.mapToTargetIds(a),void c.svg.selectAll(c.selectorTargets(a,"."+o.chartArc)).each(function(a){c.shouldExpand(a.data.id)&&c.d3.select(this).selectAll("path").transition().duration(50).attr("d",c.svgArcExpanded).transition().duration(100).attr("d",c.svgArcExpandedSub).each(function(a){c.isDonutType(a.data)})}))},l.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+o.chartArc)).selectAll("path").transition().duration(50).attr("d",b.svgArc),b.svg.selectAll("."+o.arc).style("opacity",1))},l.shouldExpand=function(a){var b=this,c=b.config;return b.isDonutType(a)&&c.donut_expand||b.isGaugeType(a)&&c.gauge_expand||b.isPieType(a)&&c.pie_expand},l.shouldShowArcLabel=function(){var a=this,b=a.config,c=!0;return a.hasType("donut")?c=b.donut_label_show:a.hasType("pie")&&(c=b.pie_label_show),c},l.meetsArcLabelThreshold=function(a){var b=this,c=b.config,d=b.hasType("donut")?c.donut_label_threshold:c.pie_label_threshold;return a>=d},l.getArcLabelFormat=function(){var a=this,b=a.config,c=b.pie_label_format;return a.hasType("gauge")?c=b.gauge_label_format:a.hasType("donut")&&(c=b.donut_label_format),c},l.getArcTitle=function(){var a=this;return a.hasType("donut")?a.config.donut_title:""},l.updateTargetsForArc=function(a){var b,c,d=this,e=d.main,f=d.classChartArc.bind(d),g=d.classArcs.bind(d),h=d.classFocus.bind(d);b=e.select("."+o.chartArcs).selectAll("."+o.chartArc).data(d.pie(a)).attr("class",function(a){return f(a)+h(a.data)}),c=b.enter().append("g").attr("class",f),c.append("g").attr("class",g),c.append("text").attr("dy",d.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},l.initArc=function(){var a=this;a.arcs=a.main.select("."+o.chart).append("g").attr("class",o.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",o.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},l.redrawArc=function(a,b,c){var d,e=this,f=e.d3,g=e.config,h=e.main;d=h.selectAll("."+o.arcs).selectAll("."+o.arc).data(e.arcData.bind(e)),d.enter().append("path").attr("class",e.classArc.bind(e)).style("fill",function(a){return e.color(a.data)}).style("cursor",function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){e.isGaugeType(a.data)&&(a.startAngle=a.endAngle=-1*(Math.PI/2)),this._current=a}),d.attr("transform",function(a){return!e.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),c=e.convertToArcData(b),e.expandArc(b.data.id),e.api.focus(b.data.id),e.toggleFocusLegend(b.data.id,!0),e.config.data_onmouseover(c,this))}:null).on("mousemove",g.interaction_enabled?function(a){var b=e.updateAngle(a),c=e.convertToArcData(b),d=[c];e.showTooltip(d,this)}:null).on("mouseout",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),c=e.convertToArcData(b),e.unexpandArc(b.data.id),e.api.revert(),e.revertLegend(),e.hideTooltip(),e.config.data_onmouseout(c,this))}:null).on("click",g.interaction_enabled?function(a,b){var c=e.updateAngle(a),d=e.convertToArcData(c);e.toggleShape&&e.toggleShape(this,d,b),e.config.data_onclick.call(e.api,d,this)}:null).each(function(){e.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b,c=e.updateAngle(a);return c?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),b=f.interpolate(this._current,c),this._current=b(0),function(c){var d=b(c);return d.data=a.data,e.getArc(d,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return e.levelColor?e.levelColor(a.data.values[0].value):e.color(a.data.id)}).style("opacity",1).call(e.endall,function(){e.transiting=!1}),d.exit().transition().duration(b).style("opacity",0).remove(),h.selectAll("."+o.chartArc).select("text").style("opacity",0).attr("class",function(a){return e.isGaugeType(a.data)?o.gaugeValue:""}).text(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(a){return e.isGaugeType(a.data)?Math.round(e.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return e.isTargetToShow(a.data.id)&&e.isArcType(a.data)?1:0}),h.select("."+o.chartArcsTitle).style("opacity",e.hasType("donut")||e.hasType("gauge")?1:0),e.hasType("gauge")&&(e.arcs.select("."+o.chartArcsBackground).attr("d",function(){var a={data:[{value:g.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return e.getArc(a,!0,!0)}),e.arcs.select("."+o.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?g.gauge_units:""),e.arcs.select("."+o.chartArcsGaugeMin).attr("dx",-1*(e.innerRadius+(e.radius-e.innerRadius)/2)+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),e.arcs.select("."+o.chartArcsGaugeMax).attr("dx",e.innerRadius+(e.radius-e.innerRadius)/2+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_max:""))},l.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",o.chartArcsBackground),a.append("text").attr("class",o.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",o.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",o.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},l.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},l.initRegion=function(){var a=this;a.region=a.main.append("g").attr("clip-path",a.clipPath).attr("class",o.regions)},l.updateRegion=function(a){var b=this,c=b.config;b.region.style("visibility",b.hasArcType()?"hidden":"visible"),b.mainRegion=b.main.select("."+o.regions).selectAll("."+o.region).data(c.regions),b.mainRegion.enter().append("g").attr("class",b.classRegion.bind(b)).append("rect").style("fill-opacity",0),b.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},l.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect"),d=b.regionX.bind(b),e=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",f).attr("height",g).style("fill-opacity",function(a){return p(a.opacity)?a.opacity:.1})]},l.regionX=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"start"in a?e(a.start):0:d.axis_rotated?0:"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},l.regionY=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?0:"end"in a?e(a.end):0:d.axis_rotated&&"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},l.regionWidth=function(a){var b,c=this,d=c.config,e=c.regionX(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"end"in a?f(a.end):c.width:d.axis_rotated?c.width:"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.width,e>b?0:b-e},l.regionHeight=function(a){var b,c=this,d=c.config,e=this.regionY(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?c.height:"start"in a?f(a.start):c.height:d.axis_rotated&&"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.height,e>b?0:b-e},l.isRegionOnX=function(a){return!a.axis||"x"===a.axis},l.drag=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.config,l=j.main,m=j.d3;j.hasArcType()||k.data_selection_enabled&&(!k.zoom_enabled||j.zoom.altDomain)&&k.data_selection_multiple&&(b=j.dragStart[0],c=j.dragStart[1],d=a[0],e=a[1],f=Math.min(b,d),g=Math.max(b,d),h=k.data_selection_grouped?j.margin.top:Math.min(c,e),i=k.data_selection_grouped?j.height:Math.max(c,e),l.select("."+o.dragarea).attr("x",f).attr("y",h).attr("width",g-f).attr("height",i-h),l.selectAll("."+o.shapes).selectAll("."+o.shape).filter(function(a){return k.data_selection_isselectable(a)}).each(function(a,b){var c,d,e,k,l,n,p=m.select(this),q=p.classed(o.SELECTED),r=p.classed(o.INCLUDED),s=!1;if(p.classed(o.circle))c=1*p.attr("cx"),d=1*p.attr("cy"),l=j.togglePoint,s=c>f&&g>c&&d>h&&i>d;else{if(!p.classed(o.bar))return;n=B(this),c=n.x,d=n.y,e=n.width,k=n.height,l=j.togglePath,s=!(c>g||f>c+e||d>i||h>d+k)}s^r&&(p.classed(o.INCLUDED,!r),p.classed(o.SELECTED,!q),l.call(j,!q,p,a,b))}))},l.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+o.chart).append("rect").attr("class",o.dragarea).style("opacity",.1),b.dragging=!0)},l.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+o.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+o.shape).classed(o.INCLUDED,!1),a.dragging=!1)},l.selectPoint=function(a,b,c){var d=this,e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node()),d.main.select("."+o.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+o.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(o.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)},l.unselectPoint=function(a,b,c){var d=this;d.config.data_onunselected(b,a.node()),d.main.select("."+o.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+o.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},l.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},l.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},l.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.color(b)})},l.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},l.getToggle=function(a,b){var c,d=this;return"circle"===a.nodeName?c=d.isStepType(b)?function(){}:d.togglePoint:"path"===a.nodeName&&(c=d.togglePath),c},l.toggleShape=function(a,b,c){var d=this,e=d.d3,f=d.config,g=e.select(a),h=g.classed(o.SELECTED),i=d.getToggle(a,b).bind(d);f.data_selection_enabled&&f.data_selection_isselectable(b)&&(f.data_selection_multiple||d.main.selectAll("."+o.shapes+(f.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+o.shape).each(function(a,b){var c=e.select(this);c.classed(o.SELECTED)&&i(!1,c.classed(o.SELECTED,!1),a,b)}),g.classed(o.SELECTED,!h),i(!h,g,b,c))},l.initBrush=function(){var a=this,b=a.d3;a.brush=b.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+o.brush).call(this),this},a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}},l.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context"));c.style("visibility",b.subchart_show?"visible":"hidden"),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",o.chart),c.select("."+o.chart).append("g").attr("class",o.chartBars),c.select("."+o.chart).append("g").attr("class",o.chartLines),c.append("g").attr("clip-path",a.clipPath).attr("class",o.brush).call(a.brush),a.axes.subx=c.append("g").attr("class",o.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis)},l.updateTargetsForSubchart=function(a){var b,c,d,e,f=this,g=f.context,h=f.config,i=f.classChartBar.bind(f),j=f.classBars.bind(f),k=f.classChartLine.bind(f),l=f.classLines.bind(f),m=f.classAreas.bind(f);h.subchart_show&&(e=g.select("."+o.chartBars).selectAll("."+o.chartBar).data(a).attr("class",i),d=e.enter().append("g").style("opacity",0).attr("class",i),d.append("g").attr("class",j),c=g.select("."+o.chartLines).selectAll("."+o.chartLine).data(a).attr("class",k),b=c.enter().append("g").style("opacity",0).attr("class",k),b.append("g").attr("class",l),b.append("g").attr("class",m),g.selectAll("."+o.brush+" rect").attr(h.axis_rotated?"width":"height",h.axis_rotated?f.width2:f.height2))},l.updateBarForSubchart=function(a){var b=this;b.contextBar=b.context.selectAll("."+o.bars).selectAll("."+o.bar).data(b.barData.bind(b)),b.contextBar.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color),b.contextBar.style("opacity",b.initialOpacity.bind(b)),b.contextBar.exit().transition().duration(a).style("opacity",0).remove()},l.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition().duration(c):this.contextBar).attr("d",a).style("opacity",1)},l.updateLineForSubchart=function(a){var b=this;b.contextLine=b.context.selectAll("."+o.lines).selectAll("."+o.line).data(b.lineData.bind(b)),b.contextLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.contextLine.style("opacity",b.initialOpacity.bind(b)),b.contextLine.exit().transition().duration(a).style("opacity",0).remove()},l.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition().duration(c):this.contextLine).attr("d",a).style("opacity",1)},l.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+o.areas).selectAll("."+o.area).data(b.lineData.bind(b)),b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.contextArea.style("opacity",0),b.contextArea.exit().transition().duration(a).style("opacity",0).remove()},l.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition().duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},l.redrawSubchart=function(a,b,c,d,e,f,g){var h,i,j,k=this,l=k.d3,m=k.config;k.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(l.event&&"zoom"===l.event.type&&k.brush.extent(k.x.orgDomain()).update(),a&&(k.brush.empty()||k.brush.extent(k.x.orgDomain()).update(),h=k.generateDrawArea(e,!0),i=k.generateDrawBar(f,!0),j=k.generateDrawLine(g,!0),k.updateBarForSubchart(c),k.updateLineForSubchart(c),k.updateAreaForSubchart(c),k.redrawBarForSubchart(i,c,c),k.redrawLineForSubchart(j,c,c),k.redrawAreaForSubchart(h,c,c)))},l.redrawForBrush=function(){var a=this,b=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,b.orgDomain())},l.transformContext=function(a,b){var c,d=this;b&&b.axisSubX?c=b.axisSubX:(c=d.context.select("."+o.axisX),a&&(c=c.transition())),d.context.attr("transform",d.getTranslate("context")),c.attr("transform",d.getTranslate("subx"))},l.getDefaultExtent=function(){var a=this,b=a.config,c=q(b.axis_x_extent)?b.axis_x_extent(a.getXDomain(a.data.targets)):b.axis_x_extent;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},l.initZoom=function(){var a,b=this,c=b.d3,d=b.config;b.zoom=c.behavior.zoom().on("zoomstart",function(){a=c.event.sourceEvent,b.zoom.altDomain=c.event.sourceEvent.altKey?b.x.orgDomain():null,d.zoom_onzoomstart.call(b.api,c.event.sourceEvent)}).on("zoom",function(){b.redrawForZoom.call(b)}).on("zoomend",function(){var e=c.event.sourceEvent;e&&a.clientX===e.clientX&&a.clientY===e.clientY||(b.redrawEventRect(),b.updateZoom(),d.zoom_onzoomend.call(b.api,b.x.orgDomain()))}),b.zoom.scale=function(a){return d.axis_rotated?this.y(a):this.x(a)},b.zoom.orgScaleExtent=function(){var a=d.zoom_extent?d.zoom_extent:[1,10];return[a[0],Math.max(b.getMaxDataCount()/a[1],a[1])]},b.zoom.updateScaleExtent=function(){var a=w(b.x.orgDomain())/w(b.orgXDomain),c=this.orgScaleExtent();return this.scaleExtent([c[0]*a,c[1]*a]),this}},l.updateZoom=function(){var a=this,b=a.config.zoom_enabled?a.zoom:function(){};a.main.select("."+o.zoomRect).call(b).on("dblclick.zoom",null),a.main.selectAll("."+o.eventRect).call(b).on("dblclick.zoom",null)},l.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;if(c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length){if("mousemove"===b.event.sourceEvent.type&&d.altDomain)return e.domain(d.altDomain),void d.scale(e).updateScaleExtent();a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0),c.zoom_onzoom.call(a.api,e.orgDomain())}},l.generateColor=function(){var a=this,b=a.config,c=a.d3,d=b.data_colors,e=y(b.color_pattern)?b.color_pattern:c.scale.category10().range(),f=b.data_color,g=[];return function(a){var b,c=a.id||a.data&&a.data.id||a;return d[c]instanceof Function?b=d[c](a):d[c]?b=d[c]:(g.indexOf(c)<0&&g.push(c),b=e[g.indexOf(c)%e.length],d[c]=b),f instanceof Function?f(b,a):b}},l.generateLevelColor=function(){var a=this,b=a.config,c=b.color_pattern,d=b.color_threshold,e="value"===d.unit,f=d.values&&d.values.length?d.values:[],g=d.max||100;return y(b.color_threshold)?function(a){var b,d,h=c[c.length-1];for(b=0;b<f.length;b++)if(d=e?a:100*a/g,d<f[b]){h=c[b];break}return h}:null},l.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){var g="y2"===b.axis.getId(f)?d:c;return g.call(b,a,e)}},l.yFormat=function(a){var b=this,c=b.config,d=c.axis_y_tick_format?c.axis_y_tick_format:b.defaultValueFormat;return d(a)},l.y2Format=function(a){var b=this,c=b.config,d=c.axis_y2_tick_format?c.axis_y2_tick_format:b.defaultValueFormat;return d(a)},l.defaultValueFormat=function(a){return p(a)?+a:""},l.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},l.dataLabelFormat=function(a){var b,c=this,d=c.config.data_labels,e=function(a){return p(a)?+a:""};return b="function"==typeof d.format?d.format:"object"==typeof d.format?d.format[a]?d.format[a]===!0?e:d.format[a]:function(){return""}:e},l.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},l.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},l.getCaches=function(a){var b,c=[];for(b=0;b<a.length;b++)a[b]in this.cache&&c.push(this.cloneTarget(this.cache[a[b]]));return c};var o=l.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};l.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)},l.classText=function(a){return this.generateClass(o.text,a.index)},l.classTexts=function(a){return this.generateClass(o.texts,a.id)},l.classShape=function(a){return this.generateClass(o.shape,a.index)},l.classShapes=function(a){return this.generateClass(o.shapes,a.id)},l.classLine=function(a){return this.classShape(a)+this.generateClass(o.line,a.id)},l.classLines=function(a){return this.classShapes(a)+this.generateClass(o.lines,a.id)},l.classCircle=function(a){return this.classShape(a)+this.generateClass(o.circle,a.index)},l.classCircles=function(a){return this.classShapes(a)+this.generateClass(o.circles,a.id)},l.classBar=function(a){return this.classShape(a)+this.generateClass(o.bar,a.index)},l.classBars=function(a){return this.classShapes(a)+this.generateClass(o.bars,a.id)},l.classArc=function(a){return this.classShape(a.data)+this.generateClass(o.arc,a.data.id)},l.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(o.arcs,a.data.id)},l.classArea=function(a){return this.classShape(a)+this.generateClass(o.area,a.id)},l.classAreas=function(a){return this.classShapes(a)+this.generateClass(o.areas,a.id)},l.classRegion=function(a,b){return this.generateClass(o.region,b)+" "+("class"in a?a["class"]:"")},l.classEvent=function(a){return this.generateClass(o.eventRect,a.index)},l.classTarget=function(a){var b=this,c=b.config.data_classes[a],d="";return c&&(d=" "+o.target+"-"+c),b.generateClass(o.target,a)+d},l.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},l.classFocused=function(a){return" "+(this.focusedTargetIds.indexOf(a.id)>=0?o.focused:"")},l.classDefocused=function(a){return" "+(this.defocusedTargetIds.indexOf(a.id)>=0?o.defocused:"")},l.classChartText=function(a){return o.chartText+this.classTarget(a.id)},l.classChartLine=function(a){return o.chartLine+this.classTarget(a.id)},l.classChartBar=function(a){return o.chartBar+this.classTarget(a.id)},l.classChartArc=function(a){return o.chartArc+this.classTarget(a.data.id)},l.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},l.selectorTarget=function(a,b){return(b||"")+"."+o.target+this.getTargetSelectorSuffix(a)},l.selectorTargets=function(a,b){var c=this;return a=a||[],a.length?a.map(function(a){return c.selectorTarget(a,b)}):null},l.selectorLegend=function(a){return"."+o.legendItem+this.getTargetSelectorSuffix(a)},l.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var p=l.isValue=function(a){return a||0===a},q=l.isFunction=function(a){return"function"==typeof a},r=l.isString=function(a){return"string"==typeof a},s=l.isUndefined=function(a){return"undefined"==typeof a},t=l.isDefined=function(a){return"undefined"!=typeof a},u=l.ceil10=function(a){return 10*Math.ceil(a/10)},v=l.asHalfPixel=function(a){return Math.ceil(a)+.5},w=l.diffDomain=function(a){return a[1]-a[0]},x=l.isEmpty=function(a){return!a||r(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length},y=l.notEmpty=function(a){return Object.keys(a).length>0},z=l.getOption=function(a,b,c){return t(a[b])?a[b]:c},A=l.hasValue=function(a,b){var c=!1;return Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)}),c},B=l.getPathBox=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)],d=c[0].x,e=Math.min(c[0].y,c[1].y);return{x:d,y:e,width:b.width,height:b.height}};k.focus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),this.revert(),this.defocus(),b.classed(o.focused,!0).classed(o.defocused,!1),c.hasArcType()&&c.expandArc(a),c.toggleFocusLegend(a,!0),c.focusedTargetIds=a,c.defocusedTargetIds=c.defocusedTargetIds.filter(function(b){return a.indexOf(b)<0})},k.defocus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),b.classed(o.focused,!1).classed(o.defocused,!0),c.hasArcType()&&c.unexpandArc(a),c.toggleFocusLegend(a,!1),c.focusedTargetIds=c.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),c.defocusedTargetIds=a},k.revert=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a)),b.classed(o.focused,!1).classed(o.defocused,!1),c.hasArcType()&&c.unexpandArc(a),c.config.legend_show&&(c.showLegend(a.filter(c.isLegendToShow.bind(c))),c.legend.selectAll(c.selectorLegends(a)).filter(function(){
return c.d3.select(this).classed(o.legendItemFocused)}).classed(o.legendItemFocused,!1)),c.focusedTargetIds=[],c.defocusedTargetIds=[]},k.show=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.removeHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",1,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",1)}),b.withLegend&&d.showLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},k.hide=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.addHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",0,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",0)}),b.withLegend&&d.hideLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},k.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},k.zoom=function(a){var b=this.internal;return a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain())),b.brush.extent()},k.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a,b.updateAndRedraw()},k.unzoom=function(){var a=this.internal;a.brush.clear().update(),a.redraw({withUpdateXDomain:!0})},k.load=function(a){var b=this.internal,c=b.config;return a.xs&&b.addXs(a.xs),"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?void b.load(b.getCaches(a.cacheIds),a.done):void("unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a))},k.unload=function(a){var b=this.internal;a=a||{},a instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},k.flow=function(a){var b,c,d,e,f,g,h,i,j=this.internal,k=[],l=j.getMaxDataCount(),m=0,n=0;if(a.json)c=j.convertJsonToData(a.json,a.keys);else if(a.rows)c=j.convertRowsToData(a.rows);else{if(!a.columns)return;c=j.convertColumnsToData(a.columns)}b=j.convertDataToTargets(c,!0),j.data.targets.forEach(function(a){var c,d,e=!1;for(c=0;c<b.length;c++)if(a.id===b[c].id){for(e=!0,a.values[a.values.length-1]&&(n=a.values[a.values.length-1].index+1),m=b[c].values.length,d=0;m>d;d++)b[c].values[d].index=n+d,j.isTimeSeries()||(b[c].values[d].x=n+d);a.values=a.values.concat(b[c].values),b.splice(c,1);break}e||k.push(a.id)}),j.data.targets.forEach(function(a){var b,c;for(b=0;b<k.length;b++)if(a.id===k[b])for(n=a.values[a.values.length-1].index+1,c=0;m>c;c++)a.values.push({id:a.id,index:n+c,x:j.isTimeSeries()?j.getOtherTargetX(n+c):n+c,value:null})}),j.data.targets.length&&b.forEach(function(a){var b,c=[];for(b=j.data.targets[0].values[0].index;n>b;b++)c.push({id:a.id,index:b,x:j.isTimeSeries()?j.getOtherTargetX(b):b,value:null});a.values.forEach(function(a){a.index+=n,j.isTimeSeries()||(a.x+=n)}),a.values=c.concat(a.values)}),j.data.targets=j.data.targets.concat(b),d=j.getMaxDataCount(),f=j.data.targets[0],g=f.values[0],t(a.to)?(m=0,i=j.isTimeSeries()?j.parseDate(a.to):a.to,f.values.forEach(function(a){a.x<i&&m++})):t(a.length)&&(m=a.length),l?1===l&&j.isTimeSeries()&&(h=(f.values[f.values.length-1].x-g.x)/2,e=[new Date(+g.x-h),new Date(+g.x+h)],j.updateXDomain(null,!0,!0,!1,e)):(h=j.isTimeSeries()?f.values.length>1?f.values[f.values.length-1].x-g.x:g.x-j.getXDomain(j.data.targets)[0]:1,e=[g.x-h,g.x],j.updateXDomain(null,!0,!0,!1,e)),j.updateTargets(j.data.targets),j.redraw({flow:{index:g.index,length:m,duration:p(a.duration)?a.duration:j.config.transition_duration,done:a.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})},l.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e,f,g,h=a.targets,i=a.flow,j=a.drawBar,k=a.drawLine,l=a.drawArea,m=a.cx,n=a.cy,p=a.xv,q=a.xForText,r=a.yForText,s=a.duration,t=1,u=i.index,v=i.length,x=b.getValueOnIndex(b.data.targets[0].values,u),y=b.getValueOnIndex(b.data.targets[0].values,u+v),z=b.x.domain(),A=i.duration||s,B=i.done||function(){},C=b.generateWait(),D=b.xgrid||d.selectAll([]),E=b.xgridLines||d.selectAll([]),F=b.mainRegion||d.selectAll([]),G=b.mainText||d.selectAll([]),H=b.mainBar||d.selectAll([]),I=b.mainLine||d.selectAll([]),J=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,v)}),g=b.updateXDomain(h,!0,!0),b.updateXGrid&&b.updateXGrid(!0),i.orgDataCount?e=1===i.orgDataCount||x.x===y.x?b.x(z[0])-b.x(g[0]):b.isTimeSeries()?b.x(z[0])-b.x(g[0]):b.x(x.x)-b.x(y.x):1!==b.data.targets[0].values.length?e=b.x(z[0])-b.x(g[0]):b.isTimeSeries()?(x=b.getValueOnIndex(b.data.targets[0].values,0),y=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),e=b.x(x.x)-b.x(y.x)):e=w(g)/2,t=w(z)/w(g),f="translate("+e+",0) scale("+t+",1)",b.hideXGridFocus(),b.hideTooltip(),d.transition().ease("linear").duration(A).each(function(){C.add(b.axes.x.transition().call(b.xAxis)),C.add(H.transition().attr("transform",f)),C.add(I.transition().attr("transform",f)),C.add(J.transition().attr("transform",f)),C.add(K.transition().attr("transform",f)),C.add(G.transition().attr("transform",f)),C.add(F.filter(b.isRegionOnX).transition().attr("transform",f)),C.add(D.transition().attr("transform",f)),C.add(E.transition().attr("transform",f))}).call(C,function(){var a,d=[],e=[],f=[];if(v){for(a=0;v>a;a++)d.push("."+o.shape+"-"+(u+a)),e.push("."+o.text+"-"+(u+a)),f.push("."+o.eventRect+"-"+(u+a));b.svg.selectAll("."+o.shapes).selectAll(d).remove(),b.svg.selectAll("."+o.texts).selectAll(e).remove(),b.svg.selectAll("."+o.eventRects).selectAll(f).remove(),b.svg.select("."+o.xgrid).remove()}D.attr("transform",null).attr(b.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",c.axis_rotated?0:p).attr("x2",c.axis_rotated?b.width:p),E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",p),H.attr("transform",null).attr("d",j),I.attr("transform",null).attr("d",k),J.attr("transform",null).attr("d",l),K.attr("transform",null).attr("cx",m).attr("cy",n),G.attr("transform",null).attr("x",q).attr("y",r).style("fill-opacity",b.opacityForText.bind(b)),F.attr("transform",null),F.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b)),c.interaction_enabled&&b.redrawEventRect(),B(),b.flowing=!1})}},k.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+o.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+o.shape).filter(function(){return c.select(this).classed(o.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},k.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+o.shapes).selectAll("."+o.shape).each(function(g,h){var i=e.select(this),j=g.data?g.data.id:g.id,k=d.getToggle(this,g).bind(d),l=f.data_selection_grouped||!a||a.indexOf(j)>=0,m=!b||b.indexOf(h)>=0,n=i.classed(o.SELECTED);i.classed(o.line)||i.classed(o.area)||(l&&m?f.data_selection_isselectable(g)&&!n&&k(!0,i.classed(o.SELECTED,!0),g,h):t(c)&&c&&n&&k(!1,i.classed(o.SELECTED,!1),g,h))})},k.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+o.shapes).selectAll("."+o.shape).each(function(f,g){var h=d.select(this),i=f.data?f.data.id:f.id,j=c.getToggle(this,f).bind(c),k=e.data_selection_grouped||!a||a.indexOf(i)>=0,l=!b||b.indexOf(g)>=0,m=h.classed(o.SELECTED);h.classed(o.line)||h.classed(o.area)||k&&l&&e.data_selection_isselectable(f)&&m&&j(!1,h.classed(o.SELECTED,!1),f,g)})},k.transform=function(a,b){var c=this.internal,d=["pie","donut"].indexOf(a)>=0?{withTransform:!0}:null;c.transformTo(b,a,d)},l.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},k.groups=function(a){var b=this.internal,c=b.config;return s(a)?c.data_groups:(c.data_groups=a,b.redraw(),c.data_groups)},k.xgrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_x_lines=a,b.redrawWithoutRescale(),c.grid_x_lines):c.grid_x_lines},k.xgrids.add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a?a:[]))},k.xgrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!0)},k.ygrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_y_lines=a,b.redrawWithoutRescale(),c.grid_y_lines):c.grid_y_lines},k.ygrids.add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a?a:[]))},k.ygrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!1)},k.regions=function(a){var b=this.internal,c=b.config;return a?(c.regions=a,b.redrawWithoutRescale(),c.regions):c.regions},k.regions.add=function(a){var b=this.internal,c=b.config;return a?(c.regions=c.regions.concat(a),b.redrawWithoutRescale(),c.regions):c.regions},k.regions.remove=function(a){var b,c,d,e=this.internal,f=e.config;return a=a||{},b=e.getOption(a,"duration",f.transition_duration),c=e.getOption(a,"classes",[o.region]),d=e.main.select("."+o.regions).selectAll(c.map(function(a){return"."+a})),(b?d.transition().duration(b):d).style("opacity",0).remove(),f.regions=f.regions.filter(function(a){var b=!1;return a["class"]?(a["class"].split(" ").forEach(function(a){c.indexOf(a)>=0&&(b=!0)}),!b):!0}),f.regions},k.data=function(a){var b=this.internal.data.targets;return"undefined"==typeof a?b:b.filter(function(b){return[].concat(a).indexOf(b.id)>=0})},k.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))},k.data.values=function(a){var b,c=null;return a&&(b=this.data(a),c=b[0]?b[0].values.map(function(a){return a.value}):null),c},k.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},k.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},k.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},k.category=function(a,b){var c=this.internal,d=c.config;return arguments.length>1&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},k.categories=function(a){var b=this.internal,c=b.config;return arguments.length?(c.axis_x_categories=a,b.redraw(),c.axis_x_categories):c.axis_x_categories},k.color=function(a){var b=this.internal;return b.color(a)},k.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},k.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},k.axis=function(){},k.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},k.axis.max=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(p(a.x)&&(c.axis_x_max=a.x),p(a.y)&&(c.axis_y_max=a.y),p(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}},k.axis.min=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(p(a.x)&&(c.axis_x_min=a.x),p(a.y)&&(c.axis_y_min=a.y),p(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}},k.axis.range=function(a){return arguments.length?(t(a.max)&&this.axis.max(a.max),void(t(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},k.legend=function(){},k.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},k.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},k.resize=function(a){var b=this.internal,c=b.config;c.size_width=a?a.width:null,c.size_height=a?a.height:null,this.flush()},k.flush=function(){var a=this.internal;a.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},k.destroy=function(){var a=this.internal;return d.clearInterval(a.intervalForObserveInserted),d.onresize=null,a.selectChart.classed("c3",!1).html(""),Object.keys(a).forEach(function(b){a[b]=null}),null},k.tooltip=function(){},k.tooltip.show=function(a){var b,c,d=this.internal;a.mouse&&(c=a.mouse),a.data?d.isMultipleX()?(c=[d.x(a.data.x),d.getYScale(a.data.id)(a.data.value)],b=null):b=p(a.data.index)?a.data.index:d.getIndexByX(a.data.x):"undefined"!=typeof a.x?b=d.getIndexByX(a.x):"undefined"!=typeof a.index&&(b=a.index),d.dispatchEvent("mouseover",b,c),d.dispatchEvent("mousemove",b,c)},k.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};var C;l.isSafari=function(){var a=d.navigator.userAgent;return a.indexOf("Safari")>=0&&a.indexOf("Chrome")<0},l.isChrome=function(){var a=d.navigator.userAgent;return a.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"function"==typeof define&&define.amd?define("c3",["d3"],n):"undefined"!=typeof b&&"undefined"!=typeof c?c.exports=n:d.c3=n}(window),d.define=e,c.exports}),a.registerDynamic("40",["3f"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("3f"),d.define=e,c.exports}),a.register("41",["5","40","42","1c"],function(a){"use strict";function b(a,b){return a.map(function(c,d){return[a[d],b[d]]})}var c,d,e,f,g;return{setters:[function(a){c=a["default"]},function(a){d=a["default"]},function(a){e=a},function(a){f=a.getReferenceObject}],execute:function(){g=function(a){function g(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,g),c.maxWidth=c.maxWidth||350,babelHelpers.get(Object.getPrototypeOf(g.prototype),"constructor",this).call(this,c),this._covs=Array.isArray(a)?a:[a],this._language=c.language,this._precision=c.precision||4,this._labels=c.labels?c.labels:new Array(this._covs.length);var d=[];if(c.keys)d=Array.isArray(c.keys[0])?c.keys:c.keys.map(function(a){return[a]});else for(var e=0;e<this._covs.length;e++){var f=!0,h=!1,i=void 0;try{for(var j,k=this._covs[e].parameters.keys()[Symbol.iterator]();!(f=(j=k.next()).done);f=!0){var l=j.value,m=new Array(this._covs.length);m[e]=l,d.push(m)}}catch(n){h=!0,i=n}finally{try{!f&&k["return"]&&k["return"]()}finally{if(h)throw i}}}if(d=d.filter(function(a){return!a.every(function(a){return!a})}),d.some(function(a){return a.length!==b._covs.length}))throw new Error("Length of each parameter group must match number of coverages");this._paramKeyGroups=d,this._paramKeys=new Map;for(var o=function(a){var c=b._paramKeyGroups.map(function(b){return b[a]}).filter(function(a){return a});b._paramKeys.set(b._covs[a],c)},e=0;e<this._covs.length;e++)o(e)}return babelHelpers.inherits(g,a),babelHelpers.createClass(g,[{key:"onAdd",value:function(a){var b=this;a.fire("dataloading");var c=Promise.all(this._covs.map(function(a){return a.loadDomain()})),d=Promise.all(this._covs.map(function(a){return a.loadRanges(b._paramKeys.get(a))}));Promise.all([c,d]).then(function(c){var d=babelHelpers.slicedToArray(c,2),e=d[0],f=d[1];b._domains=e,b._ranges=f,b._addPlotToPopup(),babelHelpers.get(Object.getPrototypeOf(g.prototype),"onAdd",b).call(b,a),b.fire("add"),a.fire("dataload")})["catch"](function(c){console.error(c),b.fire("error",c),a.fire("dataload")})}},{key:"_addPlotToPopup",value:function(){var a=this;if(!this.getLatLng()){var b=this._domains[0].axes.get("x"),d=this._domains[0].axes.get("y");this.setLatLng(c.latLng(d.values[0],b.values[0]))}var f=this._paramKeyGroups[0],g=this._getPlotElement(f),h=document.createElement("span");if(this._paramKeyGroups.length>1){var i,j,k,l,m;!function(){var b=document.createElement("select");i=!0,j=!1,k=void 0;try{for(l=a._paramKeyGroups.map(function(a,b){return[a,b]})[Symbol.iterator]();!(i=(m=l.next()).done);i=!0){var c=babelHelpers.slicedToArray(m.value,2),d=c[0],f=c[1],n=a._getRefParam(d),o=document.createElement("option");o.value=f,o.text=e.getLanguageString(n.observedProperty.label,a._language),b.appendChild(o)}}catch(p){j=!0,k=p}finally{try{!i&&l["return"]&&l["return"]()}finally{if(j)throw k}}b.addEventListener("change",function(){h.removeChild(g);var c=a._paramKeyGroups[parseInt(b.value)];g=a._getPlotElement(c),h.appendChild(g)}),h.appendChild(b)}()}h.appendChild(g),this.setContent(h)}},{key:"_getRefParam",value:function(a){var c=b(this._covs,a),d=babelHelpers.slicedToArray(c.filter(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[1];return c})[0],2),e=d[0],f=d[1],g=e.parameters.get(f);return g}},{key:"_getUnitString",value:function(a,b){if(!a.unit)return"";if(a.unit.symbol){var c=a.unit.symbol.value||a.unit.symbol,d=a.unit.symbol.type;return"http://www.opengis.net/def/uom/UCUM/"===d&&("Cel"===c?c="°C":"1"===c&&(c="")),c}return e.getLanguageString(a.unit.label,b)}},{key:"_getPlotElement",value:function(a){var c=this,g=this._domains[0],h=b(this._covs,a),i=this._getRefParam(a),j="Vertical",k="",l=f(g,"z");if(l&&1===l.components.length){var m=l.system;if(m.cs&&(m.cs.axes||m.cs.csAxes)){var n=m.cs.axes?m.cs.axes[0]:m.cs.csAxes[0];k=this._getUnitString(n,this._language),n.name&&(j=e.getLanguageString(n.name,this._language))}}var o=j;k&&(o+=" ("+k+")");for(var p=this._getUnitString(i,this._language),q=e.getLanguageString(i.observedProperty.label,this._language),r={},s=[],t={},u=0;u<this._covs.length;u++){var v=h[u][1];if(v){var w="x"+u,x=i.key+u;t[x]=this._labels[u]?this._labels[u]:q,r[x]=w;for(var y=this._domains[u].axes.get("z").values,z=this._ranges[u].get(v),A=[w],B=[x],C=0;C<y.length;C++){var D=z.get({z:C});if(null!==D){var E=y[C];A.push(E),B.push(D)}}s.push(A),s.push(B)}}var F=document.createElement("div");return d.generate({bindto:F,data:{xs:r,columns:s,names:t},axis:{rotated:!0,x:{tick:{count:10,format:function(a){return a.toPrecision(c._precision)}},label:{text:o,position:"outer-center"}},y:{tick:{count:7,format:function(a){return a.toPrecision(c._precision)}},label:{text:q+(p?" ("+p+")":""),position:"outer-middle"}}},grid:{x:{show:!0},y:{show:!0}},legend:{show:this._covs.length>1?!0:!1},tooltip:{format:{title:function(a){return j+": "+a.toPrecision(c._precision)+" "+k},value:function(a,b,d){return a.toPrecision(c._precision)+" "+p}}},zoom:{enabled:!0,rescale:!0},size:{height:300,width:350}}),F}}]),g}(c.Popup),a("default",g)}}}),a.registerDynamic("20",["43"],!0,function(a,b,c){function d(a,b){if(!a)return"";if(a.symbol){var c=a.symbol.value||a.symbol,d=a.symbol.type;return"http://www.opengis.net/def/uom/UCUM/"===d&&("Cel"===c?c="°C":"1"===a&&(c="")),c}return g.getLanguageString(a.label,b)}var e=this,f=e.define;e.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.toAscii=d;var g=a("43");return e.define=f,c.exports}),a.register("1f",["5","44","45"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a["default"]},function(a){c=a.$$,d=a.HTML},function(a){e=a["default"]}],execute:function(){f='<div class="info" style="clear:none">\n  <strong class="select-title"></strong><br>\n  <select></select>\n</div>',g=function(a){function e(a,b){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,b.position?{position:b.position}:{position:"topleft"}),this._title=b.title||"",this._choices=a,this._value=b.value||a[0].value}return babelHelpers.inherits(e,a),babelHelpers.createClass(e,[{key:"onAdd",value:function(a){var e=this,g=d(f);this._el=g,b.DomEvent.disableClickPropagation(g),c(".select-title",g).innerHTML=this._title;var h=!0,i=!1,j=void 0;try{for(var k,l=this._choices[Symbol.iterator]();!(h=(k=l.next()).done);h=!0){var m=k.value,n=m.value,o=m.label;c("select",g).appendChild(d('<option value="'+n+'">'+o+"</option>"))}}catch(p){i=!0,j=p}finally{try{!h&&l["return"]&&l["return"]()}finally{if(i)throw j}}return c("select",g).disabled=this._choices.length<=1,this.value=this._value,c("select",g).addEventListener("change",function(a){e._value=a.target.value,e.fire("change",{value:a.target.value})}),g}},{key:"value",get:function(){return this._value},set:function(a){c("select",this._el).value=a}}]),e}(e(b.Control)),a("default",g)}}}),a.register("46",["5","20","42","45","1f"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a["default"]},function(a){c=a},function(a){d=a},function(a){e=a["default"]},function(a){f=a["default"]}],execute:function(){g=function(a){function b(a){var c=this,d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this._covLayer=a,this._title=d.title||"Vertical",this._position=d.position||"topleft",a.on&&(this._remove=function(){return c.removeFrom(c._map)},a.on("remove",this._remove),this._axisListener=function(a){"vertical"===a.axis&&c.update()})}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){var b=this;this._map=a,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);var e=this._covLayer.crsVerticalAxis||{},g=e.name?d.getLanguageString(e.name):this._title,h=c.toAscii(e.unit);h&&(h=" "+h);for(var i=[],j=this._covLayer.verticalSlices,k=0;k<j.length;k++)i.push({value:k.toString(),label:j[k]+h});this._dropdown=new f(i,{position:this._position,title:g,value:this._getVerticalIndex().toString()}).on("change",function(a){var c=parseInt(a.value),d=b._covLayer.verticalSlices[c];b._covLayer.vertical=d,b.fire("change",{vertical:d})}).addTo(a)}},{key:"onRemove",value:function(a){this._dropdown.removeFrom(a),this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}},{key:"addTo",value:function(a){return a.addLayer(this),this}},{key:"removeFrom",value:function(a){return this.onRemove(a),this}},{key:"_getVerticalIndex",value:function(){var a=this._covLayer.verticalSlices,b=a.indexOf(this._covLayer.vertical);return b}},{key:"update",value:function(){var a=this._getVerticalIndex();this._dropdown.value=a.toString()}}]),b}(e(b.Class)),a("default",g)}}}),a.register("1e",["5","44","45"],function(a){"use strict";function b(a){var b=parseInt(a.substr(0,4)),c=parseInt(a.substr(5,2)),d=parseInt(a.substr(8,2));return Date.UTC(b,c-1,d)}function c(a){var b=new Date(a).toISOString(),c=b.substr(0,10);return c}var d,e,f,g,h,i;return{setters:[function(a){d=a["default"]},function(a){e=a.$$,f=a.HTML},function(a){g=a["default"]}],execute:function(){h='<div class="info" style="clear:none">\n  <strong class="title">Time</strong><br>\n  <select name="date" class="date"></select>\n  <select name="time" class="time"></select>\n</div>',i=function(a){function g(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,g),babelHelpers.get(Object.getPrototypeOf(g.prototype),"constructor",this).call(this,{position:c.position||"topleft"}),this._title=c.title||"Time",this._covLayer=a,a.on&&(this._remove=function(){return b.removeFrom(b._map)},a.on("remove",this._remove),this._axisListener=function(a){"time"===a.axis&&b.update()});var d=this._covLayer.timeSlices,e=new Map,f=!0,h=!1,i=void 0;try{for(var j,k=d[Symbol.iterator]();!(f=(j=k.next()).done);f=!0){var l=j.value,m=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate())).getTime();e.has(m)||e.set(m,[]),e.get(m).push(l)}}catch(n){h=!0,i=n}finally{try{!f&&k["return"]&&k["return"]()}finally{if(h)throw i}}this._dateMap=e}return babelHelpers.inherits(g,a),babelHelpers.createClass(g,[{key:"onAdd",value:function(a){var g=this;this._map=a,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);var i=f(h);this._el=i,d.DomEvent.disableClickPropagation(i),this._title&&(e(".title",i).innerHTML=this._title);var j=!0,k=!1,l=void 0;try{for(var m,n=this._dateMap.keys()[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value,p=c(o);e(".date",i).appendChild(f('<option value="'+p+'">'+p+"</option>"))}}catch(q){k=!0,l=q}finally{try{!j&&n["return"]&&n["return"]()}finally{if(k)throw l}}return e(".date",i).disabled=1===this._dateMap.size,e(".date",i).addEventListener("change",function(a){var c=b(a.target.value),d=g._dateMap.get(c)[0];g._covLayer.time=d,g._initTimeSelect(c),g.fire("change",{time:d})}),e(".time",i).addEventListener("change",function(a){var b=e(".date",i).value,c=a.target.value,d=new Date(b+"T"+c);g._covLayer.time=d,g.fire("change",{time:d})}),this.update(),i}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}},{key:"update",value:function(){var a=this._covLayer.time;if(a){var d=this._el,f=b(a.toISOString()),g=c(f);e(".date",d).value=g,this._initTimeSelect(f);var h=a.toISOString().substr(11);e(".time",d).value=h}}},{key:"_initTimeSelect",value:function(a){var b=this._el,c=e(".time",b);c.innerHTML="";var d=this._dateMap.get(a),g=!0,h=!1,i=void 0;try{for(var j,k=d[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=l.toISOString().substr(11);c.appendChild(f('<option value="'+m+'">'+m+"</option>"))}}catch(n){h=!0,i=n}finally{try{!g&&k["return"]&&k["return"]()}finally{if(h)throw i}}c.disabled=1===d.length}}]),g}(g(d.Control)),a("default",i)}}}),a.register("47",["5","42","44"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a["default"]},function(a){c=a},function(a){d=a.inject,e=a.fromTemplate,f=a.$$}],execute:function(){g="template-coverage-parameter-continuous-legend",h='<template id="'+g+'">\n  <div class="info legend continuous-legend">\n    <div style="margin-bottom:3px" class="legend-title-container">\n      <strong class="legend-title"></strong>\n    </div>\n    <div style="display: inline-block; height: 144px; float:left">\n      <span style="height: 136px; width: 18px; display: block; margin-top: 9px;" class="legend-palette"></span>\n    </div>\n    <div style="display: inline-block; float:left; height:153px">\n      <table style="height: 100%;">\n        <tr><td style="vertical-align:top"><span class="legend-max"></span> <span class="legend-uom"></span></td></tr>\n        <tr><td><span class="legend-current"></span></td></tr>\n        <tr><td style="vertical-align:bottom"><span class="legend-min"></span> <span class="legend-uom"></span></td></tr>\n      </table>\n    </div>\n  </div>\n</template>',i="\n.legend {\n  color: #555;\n}\n.legend-title {\n  word-wrap: break-word;\n}\n.legend-title-container {\n  max-width: 120px;\n}\n",j=function(a){function b(a){var c=this,e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{position:e.position||"bottomright"}),this._covLayer=a,this._id=e.id||g,this._language=e.language,e.id||null!==document.getElementById(g)||d(h,i),a.on&&(this._remove=function(){return c.removeFrom(c._map)},this._update=function(){return c._doUpdate(!1)},a.on("remove",this._remove))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"update",value:function(){this._doUpdate(!0)}},{key:"_getUnitString",value:function(a,b){if(!a.unit)return"";if(a.unit.symbol){var d=a.unit.symbol.value||a.unit.symbol,e=a.unit.symbol.type;return"http://www.opengis.net/def/uom/UCUM/"===e&&("Cel"===d?d="°C":"1"===d&&(d="")),d}return c.getLanguageString(a.unit.label,b)}},{key:"_doUpdate",value:function(a){var b=this._el;if(a){var d=this._covLayer.parameter,e=c.getLanguageTag(d.observedProperty.label,this._language),g=c.getLanguageString(d.observedProperty.label,e),h=this._getUnitString(d,e);f(".legend-title",b).innerHTML=g,f(".legend-uom",b).innerHTML=h}var i=this._covLayer.palette,j=babelHelpers.slicedToArray(this._covLayer.paletteExtent,2),k=j[0],l=j[1];f(".legend-min",b).innerHTML=k.toFixed(2),f(".legend-max",b).innerHTML=l.toFixed(2);for(var m="",n=0;n<i.steps;n++)n>0&&(m+=","),m+="rgb("+i.red[n]+","+i.green[n]+","+i.blue[n]+")";f(".legend-palette",b).style.background="transparent linear-gradient(to top, "+m+") repeat scroll 0% 0%"}},{key:"onAdd",value:function(a){return this._map=a,this._covLayer.on&&(this._covLayer.on("paletteChange",this._update),this._covLayer.on("paletteExtentChange",this._update)),this._el=e(this._id),this.update(),this._el}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update),this._covLayer.off("paletteExtentChange",this._update))}}]),b}(b.Control),a("default",j)}}}),a.register("42",["43"],function(a){"use strict";return{setters:[function(b){var c={};c.getLanguageTag=b.getLanguageTag,c.getLanguageString=b.getLanguageString,a(c)}],execute:function(){}}}),a.register("44",[],function(a){"use strict";function b(a,c){return"string"==typeof c&&(c=b(c)),c=c||document,c.querySelector(a)}function c(a){var b=document.createElement("div");b.innerHTML=a;var c=b.firstChild;return c}function d(a,b){if(a&&document.body.appendChild(c(a)),b){var d=document.createElement("style");d.type="text/css",d.styleSheet?d.styleSheet.cssText=b:d.appendChild(document.createTextNode(b)),document.head.appendChild(d)}}function e(a){var c=b("#"+a);return"content"in c&&(c=c.content),document.importNode(c,!0).children[0]}return a("$$",b),a("HTML",c),a("inject",d),a("fromTemplate",e),{setters:[],execute:function(){}}}),a.register("48",["5","42","44"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a["default"]},function(a){c=a},function(a){d=a.inject,e=a.fromTemplate,f=a.$$}],execute:function(){g="template-coverage-parameter-discrete-legend",h='<template id="'+g+'">\n  <div class="info legend discrete-legend">\n    <div class="legend-title-container"><strong class="legend-title"></strong></div>\n    <div class="legend-palette discrete-legend-palette"></div>\n  </div>\n</template>',i="\n.legend {\n  color: #555;\n}\n.legend-title-container {\n  max-width: 120px;\n}\n.legend-title {\n  word-wrap: break-word;\n}\n.discrete-legend-palette {\n  padding: 2px 1px;\n  line-height: 18px;\n}\n.discrete-legend-palette i {\n  float: left;\n  height: 18px;\n  margin-right: 8px;\n  width: 18px;\n}\n",j=function(a){function b(a){var c=this,e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{position:e.position||"bottomright"}),this._covLayer=a,this._id=e.id||g,this._language=e.language,e.id||null!==document.getElementById(g)||d(h,i),a.on&&(this._remove=function(){return c.removeFrom(c._map)},this._update=function(){return c._doUpdate(!1)},a.on("remove",this._remove))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"update",value:function(){this._doUpdate(!0)}},{key:"_doUpdate",value:function(a){var b=this._el;if(a){var d=this._covLayer.parameter;this._language=c.getLanguageTag(d.observedProperty.label,this._language);var e=c.getLanguageString(d.observedProperty.label,this._language);
f(".legend-title",b).innerHTML=e}for(var g=this._covLayer.palette,h=this._covLayer.parameter,i="",j=0;j<g.steps;j++){var k=c.getLanguageString(h.observedProperty.categories[j].label,this._language);i+='\n        <i style="background:rgb('+g.red[j]+", "+g.green[j]+", "+g.blue[j]+')"></i>\n        '+k+"\n        <br>"}f(".legend-palette",b).innerHTML=i}},{key:"onAdd",value:function(a){return this._map=a,this._covLayer.on&&this._covLayer.on("paletteChange",this._update),this._el=e(this._id),this.update(),this._el}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update))}}]),b}(b.Control),a("default",j)}}}),a.register("49",["47","48"],function(a){"use strict";var b,c;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]}],execute:function(){a("default",function(a){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return d.position=d.position||"bottomright",a.parameter.observedProperty.categories?new c(a,d):new b(a,d)})}}}),a.register("4a",["5"],function(a){"use strict";function b(a,b){if(a.id&&b.id&&a.id===b.id)return!0;if(!a.observedProperty.id||!b.observedProperty.id)return!1;if(a.observedProperty.id!==b.observedProperty.id)return!1;if(a.unit&&b.unit){if(a.unit.id&&b.unit.id&&a.unit.id!==b.unit.id)return!1;if(a.unit.symbol&&b.unit.symbol&&a.unit.symbol!==b.unit.symbol)return!1}else if(a.unit||b.unit)return!1;if(a.categories&&b.categories){if(a.categories.length!==b.categories.length)return!1;var c=function(a){return!a.id};if(a.categories.some(c)||b.categories.some(c))return!1;var d=!0,e=!1,f=void 0;try{for(var g,h=function(){var a=g.value;return b.categories.some(function(b){return a.id===b.id})?void 0:{v:!1}},i=a.categories[Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j=h();if("object"==typeof j)return j.v}}catch(k){e=!0,f=k}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw f}}}else if(a.categories||b.categories)return!1;return!0}var c,d,e;return{setters:[function(a){c=a["default"]}],execute:function(){d=function(a){function c(a){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),this._syncProps=a.syncProperties||{},this._match=a.match||b,this._paramLayers=new Map,this._layerListeners=new Map,this._propSyncing=new Set}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"addLayer",value:function(a){var b=this;if(!a.parameter)return void console.log("layer has no parameter, skipping parameter sync");var c=Array.from(this._paramLayers.keys()),d=c.find(function(c){return b._match(c,a.parameter)}),f=void 0;d?(f=d,this._paramLayers.get(f).add(a),this._syncProperties(f)):(f=a.parameter,this._paramLayers.set(f,new Set([a]))),this._registerLayerListeners(a,f),d||this.fire("parameterAdd",{syncLayer:new e(f,this)})}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(a){if(this.paused=!1,a){var b=!0,c=!1,d=void 0;try{for(var e,f=this._paramLayers.keys()[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._syncProperties(g)}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}}},{key:"_removeLayer",value:function(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=this._layerListeners.get(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=babelHelpers.slicedToArray(f.value,2),i=h[0],j=h[1];a.off(i,j)}}catch(k){d=!0,e=k}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}this._layerListeners["delete"](a),this._paramLayers.get(b)["delete"](a),0===this._paramLayers.get(b).size&&(this._paramLayers["delete"](b),this.fire("_parameterRemove",{param:b}))}},{key:"_registerLayerListeners",value:function(a,b){var c=this,d=new Map([["remove",function(){return c._removeLayer(a,b)}]]),e=!0,f=!1,g=void 0;try{for(var h,i=function(){var a=h.value,e=a+"Change";d.set(e,function(){return c._syncProperty(b,a)})},j=Object.keys(this._syncProps)[Symbol.iterator]();!(e=(h=j.next()).done);e=!0)i()}catch(k){f=!0,g=k}finally{try{!e&&j["return"]&&j["return"]()}finally{if(f)throw g}}var l=!0,m=!1,n=void 0;try{for(var o,p=d[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=babelHelpers.slicedToArray(o.value,2),r=q[0],s=q[1];a.on(r,s)}}catch(k){m=!0,n=k}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}this._layerListeners.set(a,d)}},{key:"_syncProperties",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=Object.keys(this._syncProps)[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._syncProperty(a,g)}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}},{key:"_syncProperty",value:function(a,b){if(!this.paused&&!this._propSyncing.has(b)){var c=this._syncProps[b],d=[].concat(babelHelpers.toConsumableArray(this._paramLayers.get(a))).map(function(a){return a[b]}).reduce(c);this._propSyncing.add(b);var e=!0,f=!1,g=void 0;try{for(var h,i=this._paramLayers.get(a)[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;j[b]=d}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}this._propSyncing["delete"](b),this.fire("_syncPropChange",{param:a,prop:b})}}}]),c}(c.Class),d.include(c.Mixin.Events),e=function(a){function b(a,c){var d=this;babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this._param=a,c.on("_parameterRemove",function(b){b.param===a&&d.fire("remove")}),c.on("_syncPropChange",function(b){b.param===a&&d.fire(b.prop+"Change")});var e=function(){return c._paramLayers.get(a)},f=!0,g=!1,h=void 0;try{for(var i,j=function(){var a=i.value;Object.defineProperty(d,a,{get:function(){return e().values().next().value[a]},set:function(b){c._propSyncing.add(a);var f=!0,g=!1,h=void 0;try{for(var i,j=e()[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value;k[a]=b}}catch(l){g=!0,h=l}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}c._propSyncing["delete"](a),d.fire(a+"Change")},enumerable:!0})},k=Object.keys(c._syncProps)[Symbol.iterator]();!(f=(i=k.next()).done);f=!0)j()}catch(l){g=!0,h=l}finally{try{!f&&k["return"]&&k["return"]()}finally{if(g)throw h}}}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"parameter",get:function(){return this._param}}]),b}(c.Class),e.include(c.Mixin.Events),a("default",d)}}}),a.register("1d",["28"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k;return{setters:[function(b){var c={};c.COVERAGE=b.COVERAGE,c.COVERAGECOLLECTION=b.COVERAGECOLLECTION,c.DOMAIN=b.DOMAIN,a(c)}],execute:function(){b="http://coveragejson.org/def#",c=b+"Point",a("COVJSON_POINT",c),d=b+"PointSeries",a("COVJSON_POINTSERIES",d),e=b+"VerticalProfile",a("COVJSON_VERTICALPROFILE",e),f=b+"Grid",a("COVJSON_GRID",f),g=b+"Trajectory",a("COVJSON_TRAJECTORY",g),h=b+"PolygonSeries",a("COVJSON_POLYGONSERIES",h),i=b+"MultiPolygon",a("COVJSON_MULTIPOLYGON",i),j=b+"Tuple",a("COVJSON_DATATYPE_TUPLE",j),k=b+"Polygon",a("COVJSON_DATATYPE_POLYGON",k)}}}),a.register("4b",["5","25","35","36","37","45","4c","1b","4d","4e","4f"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){b=a["default"]},function(a){c=a},function(a){d=a.isDomain},function(a){e=a.ensureClockwisePolygon,f=a.getPointInPolygonsFn},function(a){g=a.fromDomain},function(a){h=a["default"]},function(a){i=a.enlargeExtentIfEqual},function(a){j=a},function(a){k=a["default"]},function(a){l=a["default"]},function(a){m=a.DEFAULT_COLOR}],execute:function(){n=function(a){function h(a,c){babelHelpers.classCallCheck(this,h),babelHelpers.get(Object.getPrototypeOf(h.prototype),"constructor",this).call(this),d(a)&&(a=g(a),delete c.keys),c.paletteExtent||(c.paletteExtent="full"),b.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this._axesSubset={t:{coordPref:c.time}},this.defaultColor=c.color?c.color:m}return babelHelpers.inherits(h,a),babelHelpers.createClass(h,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addPolygon(),b._pointInPolygonPreprocess(),b.fire("add")})}},{key:"_loadCoverageSubset",value:function(){var a=this._axesSubset.t;if(void 0==a.coordPref)a.idx=a.coord=void 0;else{var b=this.domain.axes.get("t").values.map(function(a){return a.getTime()});a.idx=j.indexOfNearest(b,a.coordPref.getTime()),a.coord=b[a.idx]}}},{key:"onRemove",value:function(){this.fire("remove"),this._removePolygon()}},{key:"getBounds",value:function(){return this._geojson.getBounds()}},{key:"getLatLng",value:function(){return this.getBounds().getCenter()}},{key:"bindPopup",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];if(this._popup=b,this._geojson){var d;(d=this._geojson).bindPopup.apply(d,b)}return this}},{key:"openPopup",value:function(){return this._geojson.openPopup(),this}},{key:"closePopup",value:function(){return this._geojson.closePopup(),this}},{key:"canUsePalette",value:function(){return void 0!==this.time}},{key:"computePaletteExtent",value:function(a){if("full"===a){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return a=c.minMax(this.range),a=i(a),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"_pointInPolygonPreprocess",value:function(){var a=this.domain.axes.get("composite").values[0],b=!1;e(a,b);var c=f([a]);this._pointInPolygon=function(a){return-1!==c(a)}}},{key:"_addPolygon",value:function(){var a=this,c=this.domain.axes.get("composite").values[0],d={type:"Feature",properties:{color:this._getColor(this.getValue())},geometry:{type:"Polygon",coordinates:c}};if(this._geojson=b.geoJson(d,{style:function(a){return{color:a.properties.color,fillOpacity:1,stroke:!1}},onEachFeature:function(b,c){c.on("click",function(b){return a.fire("click",b)})}}),this._popup){var e;(e=this._geojson).bindPopup.apply(e,babelHelpers.toConsumableArray(this._popup))}this._geojson.addTo(this._map)}},{key:"_removePolygon",value:function(){this._map.removeLayer(this._geojson),delete this._geojson}},{key:"getValue",value:function(){if(this.param&&void 0!==this._axesSubset.t.coord){var a=this.range.get({t:this._axesSubset.t.idx});return a}}},{key:"getValueAt",value:function(a){if(!a)throw new Error("latlng parameter missing");return this._pointInPolygon([a.lng,a.lat])?this.getValue():void 0}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return"rgb("+d[b]+", "+e[b]+", "+f[b]+")"}},{key:"_updatePolygon",value:function(){this._removePolygon(),this._addPolygon()}},{key:"redraw",value:function(){this._updatePolygon(),this._geojson.redraw()}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}},{key:"time",set:function(a){var b=this,c=this.time;this._axesSubset.t.coordPref=a.toISOString(),this._loadCoverageSubset().then(function(){c!==b.time&&(b.redraw(),b.fire("axisChange",{axis:"time"}))})},get:function(){if(this._axesSubset.t.coord){var a=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(a)}}},{key:"timeSlices",get:function(){return this.domain.axes.get("t").values.map(function(a){return new Date(a)})}}]),h}(l(k(h(b.Class)))),a("default",n)}}}),a.registerDynamic("50",[],!0,function(a,b,c){function d(a){return a.toString()}function e(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return.5*f}function f(a){return Math.abs((a[0][0]-a[2][0])*(a[1][1]-a[0][1])-(a[0][0]-a[1][0])*(a[2][1]-a[0][1]))}function g(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)}var h=this,i=h.define;return h.define=void 0,b.name="cartesian",b.formatDistance=d,b.ringArea=e,b.absoluteArea=Math.abs,b.triangleArea=f,b.distance=g,h.define=i,c.exports}),a.registerDynamic("51",[],!0,function(a,b,c){function d(a){var b=a*o*6371;return(b>1?b.toFixed(3)+"km":(1e3*b).toPrecision(3)+"m")+" ("+a.toPrecision(3)+"°)"}function e(a){if(!a.length)return 0;for(var b=0,c=a[0],d=c[0]*o,e=c[1]*o/2+n,f=d,g=Math.cos(e),h=Math.sin(e),i=1,j=a.length;j>i;++i){c=a[i],d=c[0]*o,e=c[1]*o/2+n;var k=d-f,l=Math.cos(e),p=Math.sin(e),q=h*p,r=g*l+q*Math.cos(k),s=q*Math.sin(k);b+=Math.atan2(s,r),f=d,g=l,h=p}return 2*(b>m?b-2*m:-m>b?b+2*m:b)}function f(a){return 0>a?a+4*m:a}function g(a){var b=h(a[0],a[1]),c=h(a[1],a[2]),d=h(a[2],a[0]),e=(b+c+d)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(e/2)*Math.tan((e-b)/2)*Math.tan((e-c)/2)*Math.tan((e-d)/2))))}function h(a,b){var c,d=(b[0]-a[0])*o,e=Math.sin(d),f=Math.cos(d),g=Math.sin(a[1]*o),h=Math.cos(a[1]*o),i=Math.sin(b[1]*o),j=Math.cos(b[1]*o);return Math.atan2(Math.sqrt((c=j*e)*c+(c=h*i-g*j*f)*c),g*i+h*j*f)}function i(a,b,c,d){return a*=o,b*=o,c*=o,d*=o,2*Math.asin(Math.sqrt(j(d-b)+Math.cos(b)*Math.cos(d)*j(c-a)))}function j(a){return(a=Math.sin(a/2))*a}var k=this,l=k.define;k.define=void 0;var m=Math.PI,n=m/4,o=m/180;return b.name="spherical",b.formatDistance=d,b.ringArea=e,b.absoluteArea=f,b.triangleArea=g,b.distance=i,k.define=l,c.exports}),a.registerDynamic("52",["53"],!0,function(a,b,c){function d(a,b,c,d,e){this.mid=a,this.left=b,this.right=c,this.leftPoints=d,this.rightPoints=e,this.count=(b?b.count:0)+(c?c.count:0)+d.length}function e(a,b){a.mid=b.mid,a.left=b.left,a.right=b.right,a.leftPoints=b.leftPoints,a.rightPoints=b.rightPoints,a.count=b.count}function f(a,b){var c=o(b);a.mid=c.mid,a.left=c.left,a.right=c.right,a.leftPoints=c.leftPoints,a.rightPoints=c.rightPoints,a.count=c.count}function g(a,b){var c=a.intervals([]);c.push(b),f(a,c)}function h(a,b){var c=a.intervals([]),d=c.indexOf(b);return 0>d?u:(c.splice(d,1),f(a,c),v)}function i(a,b,c){for(var d=0;d<a.length&&a[d][0]<=b;++d){var e=c(a[d]);if(e)return e}}function j(a,b,c){for(var d=a.length-1;d>=0&&a[d][1]>=b;--d){var e=c(a[d]);if(e)return e}}function k(a,b){for(var c=0;c<a.length;++c){var d=b(a[c]);if(d)return d}}function l(a,b){return a-b}function m(a,b){var c=a[0]-b[0];return c?c:a[1]-b[1]}function n(a,b){var c=a[1]-b[1];return c?c:a[0]-b[0]}function o(a){if(0===a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a[c][0],a[c][1]);b.sort(l);for(var e=b[b.length>>1],f=[],g=[],h=[],c=0;c<a.length;++c){var i=a[c];i[1]<e?f.push(i):e<i[0]?g.push(i):h.push(i)}var j=h,k=h.slice();return j.sort(m),k.sort(n),new d(e,o(f),o(g),j,k)}function p(a){this.root=a}function q(a){return new p(a&&0!==a.length?o(a):null)}var r=this,s=r.define;r.define=void 0;var t=a("53"),u=0,v=1,w=2;c.exports=q;var x=d.prototype;x.intervals=function(a){return a.push.apply(a,this.leftPoints),this.left&&this.left.intervals(a),this.right&&this.right.intervals(a),a},x.insert=function(a){var b=this.count-this.leftPoints.length;if(this.count+=1,a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?g(this,a):this.left.insert(a):this.left=o([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?g(this,a):this.right.insert(a):this.right=o([a]);else{var c=t.ge(this.leftPoints,a,m),d=t.ge(this.rightPoints,a,n);this.leftPoints.splice(c,0,a),this.rightPoints.splice(d,0,a)}},x.remove=function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return u;var c=this.right?this.right.count:0;if(4*c>3*(b-1))return h(this,a);var d=this.left.remove(a);return d===w?(this.left=null,this.count-=1,v):(d===v&&(this.count-=1),d)}if(a[0]>this.mid){if(!this.right)return u;var f=this.left?this.left.count:0;if(4*f>3*(b-1))return h(this,a);var d=this.right.remove(a);return d===w?(this.right=null,this.count-=1,v):(d===v&&(this.count-=1),d)}if(1===this.count)return this.leftPoints[0]===a?w:u;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){for(var g=this,i=this.left;i.right;)g=i,i=i.right;if(g===this)i.right=this.right;else{var j=this.left,d=this.right;g.count-=i.count,g.right=i.left,i.left=j,i.right=d}e(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?e(this,this.left):e(this,this.right);return v}for(var j=t.ge(this.leftPoints,a,m);j<this.leftPoints.length&&this.leftPoints[j][0]===a[0];++j)if(this.leftPoints[j]===a){this.count-=1,this.leftPoints.splice(j,1);for(var d=t.ge(this.rightPoints,a,n);d<this.rightPoints.length&&this.rightPoints[d][1]===a[1];++d)if(this.rightPoints[d]===a)return this.rightPoints.splice(d,1),v}return u},x.queryPoint=function(a,b){if(a<this.mid){if(this.left){var c=this.left.queryPoint(a,b);if(c)return c}return i(this.leftPoints,a,b)}if(a>this.mid){if(this.right){var c=this.right.queryPoint(a,b);if(c)return c}return j(this.rightPoints,a,b)}return k(this.leftPoints,b)},x.queryInterval=function(a,b,c){if(a<this.mid&&this.left){var d=this.left.queryInterval(a,b,c);if(d)return d}if(b>this.mid&&this.right){var d=this.right.queryInterval(a,b,c);if(d)return d}return b<this.mid?i(this.leftPoints,b,c):a>this.mid?j(this.rightPoints,a,c):k(this.leftPoints,c)};var y=p.prototype;return y.insert=function(a){this.root?this.root.insert(a):this.root=new d(a[0],null,null,[a],[a])},y.remove=function(a){if(this.root){var b=this.root.remove(a);return b===w&&(this.root=null),b!==u}return!1},y.queryPoint=function(a,b){return this.root?this.root.queryPoint(a,b):void 0},y.queryInterval=function(a,b,c){return b>=a&&this.root?this.root.queryInterval(a,b,c):void 0},Object.defineProperty(y,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(y,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}}),r.define=s,c.exports}),a.registerDynamic("54",["52"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("52"),d.define=e,c.exports}),a.registerDynamic("55",["56"],!0,function(a,b,c){function d(a,b){var c,d;if(b[0][0]<b[1][0])c=b[0],d=b[1];else{if(!(b[0][0]>b[1][0])){var e=Math.min(a[0][1],a[1][1]),f=Math.max(a[0][1],a[1][1]),g=Math.min(b[0][1],b[1][1]),i=Math.max(b[0][1],b[1][1]);return g>f?f-g:e>i?e-i:f-i}c=b[1],d=b[0]}var j,k;a[0][1]<a[1][1]?(j=a[0],k=a[1]):(j=a[1],k=a[0]);var l=h(d,c,j);return l?l:(l=h(d,c,k),l?l:k-d)}function e(a,b){var c,e;if(b[0][0]<b[1][0])c=b[0],e=b[1];else{if(!(b[0][0]>b[1][0]))return d(b,a);c=b[1],e=b[0]}var f,g;if(a[0][0]<a[1][0])f=a[0],g=a[1];else{if(!(a[0][0]>a[1][0]))return-d(a,b);f=a[1],g=a[0]}var i=h(c,e,g),j=h(c,e,f);if(0>i){if(0>=j)return i}else if(i>0){if(j>=0)return i}else if(j)return j;if(i=h(g,f,e),j=h(g,f,c),0>i){if(0>=j)return i}else if(i>0){if(j>=0)return i}else if(j)return j;return e[0]-g[0]}var f=this,g=f.define;f.define=void 0,c.exports=e;var h=a("56");return f.define=g,c.exports}),a.registerDynamic("57",[],!0,function(a,b,c){function d(a,b,c,d,e,f){this._color=a,this.key=b,this.value=c,this.left=d,this.right=e,this._count=f}function e(a){return new d(a._color,a.key,a.value,a.left,a.right,a._count)}function f(a,b){return new d(a,b.key,b.value,b.left,b.right,b._count)}function g(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function h(a,b){this._compare=a,this.root=b}function i(a,b){if(b.left){var c=i(a,b.left);if(c)return c}var c=a(b.key,b.value);return c?c:b.right?i(a,b.right):void 0}function j(a,b,c,d){var e=b(a,d.key);if(0>=e){if(d.left){var f=j(a,b,c,d.left);if(f)return f}var f=c(d.key,d.value);if(f)return f}return d.right?j(a,b,c,d.right):void 0}function k(a,b,c,d,e){var f,g=c(a,e.key),h=c(b,e.key);if(0>=g){if(e.left&&(f=k(a,b,c,d,e.left)))return f;if(h>0&&(f=d(e.key,e.value)))return f}return h>0&&e.right?k(a,b,c,d,e.right):void 0}function l(a,b){this.tree=a,this._stack=b}function m(a,b){a.key=b.key,a.value=b.value,a.left=b.left,a.right=b.right,a._color=b._color,a._count=b._count}function n(a){for(var b,c,d,h,i=a.length-1;i>=0;--i){if(b=a[i],0===i)return void(b._color=t);if(c=a[i-1],c.left===b){if(d=c.right,d.right&&d.right._color===s){if(d=c.right=e(d),h=d.right=e(d.right),c.right=d.left,d.left=c,d.right=h,d._color=c._color,b._color=t,c._color=t,h._color=t,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}return void(a[i-1]=d)}if(d.left&&d.left._color===s){if(d=c.right=e(d),h=d.left=e(d.left),c.right=h.left,d.left=h.right,h.left=c,h.right=d,h._color=c._color,c._color=t,d._color=t,b._color=t,g(c),g(d),g(h),i>1){var j=a[i-2];j.left===c?j.left=h:j.right=h}return void(a[i-1]=h)}if(d._color===t){if(c._color===s)return c._color=t,void(c.right=f(s,d));c.right=f(s,d);continue}if(d=e(d),c.right=d.left,d.left=c,d._color=c._color,c._color=s,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}else{if(d=c.left,d.left&&d.left._color===s){if(d=c.left=e(d),h=d.left=e(d.left),c.left=d.right,d.right=c,d.left=h,d._color=c._color,b._color=t,c._color=t,h._color=t,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}return void(a[i-1]=d)}if(d.right&&d.right._color===s){if(d=c.left=e(d),h=d.right=e(d.right),c.left=h.right,d.right=h.left,h.right=c,h.left=d,h._color=c._color,c._color=t,d._color=t,b._color=t,g(c),g(d),g(h),i>1){var j=a[i-2];j.right===c?j.right=h:j.left=h}return void(a[i-1]=h)}if(d._color===t){if(c._color===s)return c._color=t,void(c.left=f(s,d));c.left=f(s,d);continue}if(d=e(d),c.left=d.right,d.right=c,d._color=c._color,c._color=s,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}}}function o(a,b){return b>a?-1:a>b?1:0}function p(a){return new h(a||o,null)}var q=this,r=q.define;q.define=void 0,c.exports=p;var s=0,t=1,u=h.prototype;Object.defineProperty(u,"keys",{get:function(){var a=[];return this.forEach(function(b,c){a.push(b)}),a}}),Object.defineProperty(u,"values",{get:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a}}),Object.defineProperty(u,"length",{get:function(){return this.root?this.root._count:0}}),u.insert=function(a,b){for(var c=this._compare,e=this.root,i=[],j=[];e;){var k=c(a,e.key);i.push(e),j.push(k),e=0>=k?e.left:e.right}i.push(new d(s,a,b,null,null,1));for(var l=i.length-2;l>=0;--l){var e=i[l];j[l]<=0?i[l]=new d(e._color,e.key,e.value,i[l+1],e.right,e._count+1):i[l]=new d(e._color,e.key,e.value,e.left,i[l+1],e._count+1)}for(var l=i.length-1;l>1;--l){var m=i[l-1],e=i[l];if(m._color===t||e._color===t)break;var n=i[l-2];if(n.left===m)if(m.left===e){var o=n.right;if(!o||o._color!==s){if(n._color=s,n.left=m.right,m._color=t,m.right=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.left===n?p.left=m:p.right=m}break}m._color=t,n.right=f(t,o),n._color=s,l-=1}else{var o=n.right;if(!o||o._color!==s){if(m.right=e.left,n._color=s,n.left=e.right,e._color=t,e.left=m,e.right=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.left===n?p.left=e:p.right=e}break}m._color=t,n.right=f(t,o),n._color=s,l-=1}else if(m.right===e){var o=n.left;if(!o||o._color!==s){if(n._color=s,n.right=m.left,m._color=t,m.left=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.right===n?p.right=m:p.left=m}break}m._color=t,n.left=f(t,o),n._color=s,l-=1}else{var o=n.left;if(!o||o._color!==s){if(m.left=e.right,n._color=s,n.right=e.left,e._color=t,e.right=m,e.left=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.right===n?p.right=e:p.left=e}break}m._color=t,n.left=f(t,o),n._color=s,l-=1}}return i[0]._color=t,new h(c,i[0])},u.forEach=function(a,b,c){if(this.root)switch(arguments.length){case 1:return i(a,this.root);case 2:return j(b,this._compare,a,this.root);case 3:if(this._compare(b,c)>=0)return;return k(b,c,this._compare,a,this.root)}},Object.defineProperty(u,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new l(this,a)}}),Object.defineProperty(u,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new l(this,a)}}),u.at=function(a){if(0>a)return new l(this,[]);for(var b=this.root,c=[];;){if(c.push(b),b.left){if(a<b.left._count){b=b.left;continue}a-=b.left._count}if(!a)return new l(this,c);if(a-=1,!b.right)break;if(a>=b.right._count)break;b=b.right}return new l(this,[])},u.ge=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),0>=f&&(e=d.length),c=0>=f?c.left:c.right}return d.length=e,new l(this,d)},u.gt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),0>f&&(e=d.length),c=0>f?c.left:c.right}return d.length=e,new l(this,d)},u.lt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>0&&(e=d.length),c=0>=f?c.left:c.right}return d.length=e,new l(this,d)},u.le=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>=0&&(e=d.length),c=0>f?c.left:c.right}return d.length=e,new l(this,d)},u.find=function(a){for(var b=this._compare,c=this.root,d=[];c;){var e=b(a,c.key);if(d.push(c),0===e)return new l(this,d);c=0>=e?c.left:c.right}return new l(this,[])},u.remove=function(a){var b=this.find(a);return b?b.remove():this},u.get=function(a){for(var b=this._compare,c=this.root;c;){var d=b(a,c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};var v=l.prototype;return Object.defineProperty(v,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(v,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),v.clone=function(){return new l(this.tree,this._stack.slice())},v.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var b=new Array(a.length),c=a[a.length-1];b[b.length-1]=new d(c._color,c.key,c.value,c.left,c.right,c._count);for(var e=a.length-2;e>=0;--e){var c=a[e];c.left===a[e+1]?b[e]=new d(c._color,c.key,c.value,b[e+1],c.right,c._count):b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count)}if(c=b[b.length-1],c.left&&c.right){var f=b.length;for(c=c.left;c.right;)b.push(c),c=c.right;var g=b[f-1];b.push(new d(c._color,g.key,g.value,c.left,c.right,c._count)),b[f-1].key=c.key,b[f-1].value=c.value;for(var e=b.length-2;e>=f;--e)c=b[e],b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count);b[f-1].left=b[f]}if(c=b[b.length-1],c._color===s){var i=b[b.length-2];i.left===c?i.left=null:i.right===c&&(i.right=null),b.pop();for(var e=0;e<b.length;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(c.left||c.right){c.left?m(c,c.left):c.right&&m(c,c.right),c._color=t;for(var e=0;e<b.length-1;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(1===b.length)return new h(this.tree._compare,null);for(var e=0;e<b.length;++e)b[e]._count--;var j=b[b.length-2];return n(b),j.left===c?j.left=null:j.right=null,new h(this.tree._compare,b[0])},Object.defineProperty(v,"key",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].key:void 0},enumerable:!0}),Object.defineProperty(v,"value",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].value:void 0},enumerable:!0}),Object.defineProperty(v,"index",{get:function(){var a=0,b=this._stack;if(0===b.length){var c=this.tree.root;return c?c._count:0}b[b.length-1].left&&(a=b[b.length-1].left._count);for(var d=b.length-2;d>=0;--d)b[d+1]===b[d].right&&(++a,b[d].left&&(a+=b[d].left._count));return a},enumerable:!0}),v.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();a.length>0&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(v,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].left===a[b])return!0;return!1}}),v.update=function(a){var b=this._stack;if(0===b.length)throw new Error("Can't update empty node!");var c=new Array(b.length),e=b[b.length-1];c[c.length-1]=new d(e._color,e.key,a,e.left,e.right,e._count);for(var f=b.length-2;f>=0;--f)e=b[f],e.left===b[f+1]?c[f]=new d(e._color,e.key,e.value,c[f+1],e.right,e._count):c[f]=new d(e._color,e.key,e.value,e.left,c[f+1],e._count);return new h(this.tree._compare,c[0])},v.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=b.left;b;)a.push(b),b=b.right;else for(a.pop();a.length>0&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(v,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].right===a[b])return!0;return!1}}),q.define=r,c.exports}),a.registerDynamic("58",["57"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("57"),d.define=e,c.exports}),a.registerDynamic("59",[],!0,function(a,b,c){function d(a,b,c,d,e,f){var g=["function ",a,"(a,l,h,",d.join(","),"){",f?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",e?".get(m)":"[m]"];return f?b.indexOf("c")<0?g.push(";if(x===y){return m}else if(x<=y){"):g.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):g.push(";if(",b,"){i=m;"),c?g.push("l=m+1}else{h=m-1}"):g.push("h=m-1}else{l=m+1}"),g.push("}"),f?g.push("return -1};"):g.push("return i};"),g.join("")}function e(a,b,c,e){var f=new Function([d("A","x"+a+"y",b,["y"],!1,e),d("B","x"+a+"y",b,["y"],!0,e),d("P","c(x,y)"+a+"0",b,["y","c"],!1,e),d("Q","c(x,y)"+a+"0",b,["y","c"],!0,e),"function dispatchBsearch",c,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",c].join(""));return f()}var f=this,g=f.define;return f.define=void 0,c.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)},f.define=g,c.exports}),a.registerDynamic("53",["59"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("59"),d.define=e,c.exports}),a.registerDynamic("5a",["53","58","56","55"],!0,function(a,b,c){function d(a,b,c){this.slabs=a,this.coordinates=b,this.horizontal=c}function e(a,b){return a.y-b}function f(a,b){for(var c=null;a;){var d,e,g=a.key;g[0][0]<g[1][0]?(d=g[0],e=g[1]):(d=g[1],e=g[0]);var h=n(d,e,b);if(0>h)a=a.left;else if(h>0)if(b[0]!==g[1][0])c=a,a=a.right;else{var i=f(a.right,b);if(i)return i;a=a.left}else{if(b[0]!==g[1][0])return a;var i=f(a.right,b);if(i)return i;a=a.left}}return c}function g(a,b,c,d){this.y=a,this.index=b,this.start=c,this.closed=d}function h(a,b,c,d){this.x=a,this.segment=b,this.create=c,this.index=d}function i(a){for(var b=a.length,c=2*b,e=new Array(c),f=0;b>f;++f){var i=a[f],j=i[0][0]<i[1][0];e[2*f]=new h(i[0][0],i,j,f),e[2*f+1]=new h(i[1][0],i,!j,f)}e.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create,c?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1]))});for(var k=m(o),l=[],n=[],p=[],f=0;c>f;){for(var q=e[f].x,r=[];c>f;){var s=e[f];if(s.x!==q)break;f+=1,s.segment[0][0]===s.x&&s.segment[1][0]===s.x?s.create&&(s.segment[0][1]<s.segment[1][1]?(r.push(new g(s.segment[0][1],s.index,!0,!0)),r.push(new g(s.segment[1][1],s.index,!1,!1))):(r.push(new g(s.segment[1][1],s.index,!0,!1)),r.push(new g(s.segment[0][1],s.index,!1,!0)))):k=s.create?k.insert(s.segment,s.index):k.remove(s.segment)}l.push(k.root),n.push(q),p.push(r)}return new d(l,n,p)}var j=this,k=j.define;j.define=void 0,c.exports=i;var l=a("53"),m=a("58"),n=a("56"),o=a("55"),p=d.prototype;return p.castUp=function(a){var b=l.le(this.coordinates,a[0]);if(0>b)return-1;var c=(this.slabs[b],f(this.slabs[b],a)),d=-1;if(c&&(d=c.value),this.coordinates[b]===a[0]){var g=null;if(c&&(g=c.key),b>0){var h=f(this.slabs[b-1],a);h&&(g?o(h.key,g)>0&&(g=h.key,d=h.value):(d=h.value,g=h.key))}var i=this.horizontal[b];if(i.length>0){var j=l.ge(i,a[1],e);if(j<i.length){var k=i[j];if(a[1]===k.y){if(k.closed)return k.index;for(;j<i.length-1&&i[j+1].y===a[1];)if(j+=1,k=i[j],k.closed)return k.index;if(k.y===a[1]&&!k.start){if(j+=1,j>=i.length)return d;k=i[j]}}if(k.start)if(g){var m=n(g[0],g[1],[a[0],k.y]);g[0][0]>g[1][0]&&(m=-m),m>0&&(d=k.index)}else d=k.index;else k.y!==a[1]&&(d=k.index);
}}}return d},j.define=k,c.exports}),a.registerDynamic("5b",["5a"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("5a"),d.define=e,c.exports}),a.registerDynamic("5c",[],!0,function(a,b,c){function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],-b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=-b[l],q=m(p);q>o?(g=n,k+=1,c>k&&(n=a[k],o=m(n))):(g=p,l+=1,e>l&&(p=-b[l],q=m(p))),c>k&&q>o||l>=e?(f=n,k+=1,c>k&&(n=a[k],o=m(n))):(f=p,l+=1,e>l&&(p=-b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;c>k&&e>l;)q>o?(f=n,k+=1,c>k&&(n=a[k],o=m(n))):(f=p,l+=1,e>l&&(p=-b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;c>k;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,c>k&&(n=a[k]);for(;e>l;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,e>l&&(p=-b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}var f=this,g=f.define;return f.define=void 0,c.exports=e,f.define=g,c.exports}),a.registerDynamic("5d",["5c"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("5c"),d.define=e,c.exports}),a.registerDynamic("5e",[],!0,function(a,b,c){function d(a,b,c){var d=a+b,e=d-a,f=d-e,g=b-e,h=a-f;return c?(c[0]=h+g,c[1]=d,c):[h+g,d]}var e=this,f=e.define;return e.define=void 0,c.exports=d,e.define=f,c.exports}),a.registerDynamic("5f",["5e"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("5e"),d.define=e,c.exports}),a.registerDynamic("60",["61","5f"],!0,function(a,b,c){function d(a,b){var c=a.length;if(1===c){var d=g(a[0],b);return d[0]?d:[d[1]]}var e=new Array(2*c),f=[.1,.1],i=[.1,.1],j=0;g(a[0],b,f),f[0]&&(e[j++]=f[0]);for(var k=1;c>k;++k){g(a[k],b,i);var l=f[1];h(l,i[0],f),f[0]&&(e[j++]=f[0]);var m=i[1],n=f[1],o=m+n,p=o-m,q=n-p;f[1]=o,q&&(e[j++]=q)}return f[1]&&(e[j++]=f[1]),0===j&&(e[j++]=0),e.length=j,e}var e=this,f=e.define;e.define=void 0;var g=a("61"),h=a("5f");return c.exports=d,e.define=f,c.exports}),a.registerDynamic("62",["60"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("60"),d.define=e,c.exports}),a.registerDynamic("63",[],!0,function(a,b,c){function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=b[l],q=m(p);q>o?(g=n,k+=1,c>k&&(n=a[k],o=m(n))):(g=p,l+=1,e>l&&(p=b[l],q=m(p))),c>k&&q>o||l>=e?(f=n,k+=1,c>k&&(n=a[k],o=m(n))):(f=p,l+=1,e>l&&(p=b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;c>k&&e>l;)q>o?(f=n,k+=1,c>k&&(n=a[k],o=m(n))):(f=p,l+=1,e>l&&(p=b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;c>k;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,c>k&&(n=a[k]);for(;e>l;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,e>l&&(p=b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}var f=this,g=f.define;return f.define=void 0,c.exports=e,f.define=g,c.exports}),a.registerDynamic("64",["63"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("63"),d.define=e,c.exports}),a.registerDynamic("65",[],!0,function(a,b,c){function d(a,b,c){var d=a*b,e=g*a,f=e-a,h=e-f,i=a-h,j=g*b,k=j-b,l=j-k,m=b-l,n=d-h*l,o=n-i*l,p=o-h*m,q=i*m-p;return c?(c[0]=q,c[1]=d,c):[q,d]}var e=this,f=e.define;e.define=void 0,c.exports=d;var g=+(Math.pow(2,27)+1);return e.define=f,c.exports}),a.registerDynamic("61",["65"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("65"),d.define=e,c.exports}),a.registerDynamic("66",["61","64","62","5d"],!0,function(a,b,c){function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;a>c;++c){b[c]=new Array(a);for(var d=0;a>d;++d)b[c][d]=["m",d,"[",a-c-1,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",g(h(d(a,c))),",",f(c),a[0][c],")"].join(""));return b}function i(a){for(var b=[],c=[],f=e(a),i=[],j=0;a>j;++j)0===(1&j)?b.push.apply(b,h(d(f,j))):c.push.apply(c,h(d(f,j))),i.push("m"+j);var k=g(b),l=g(c),m="orientation"+a+"Exact",r=["function ",m,"(",i.join(),"){var p=",k,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",m].join(""),s=new Function("sum","prod","scale","sub",r);return s(o,n,p,q)}function j(a){var b=x[a.length];return b||(b=x[a.length]=i(a.length)),b.apply(void 0,a)}function k(){for(;x.length<=r;)x.push(i(x.length));for(var a=[],b=["slow"],d=0;r>=d;++d)a.push("a"+d),b.push("o"+d);for(var e=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;r>=d;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),b.push(e.join(""));var f=Function.apply(void 0,b);c.exports=f.apply(void 0,[j].concat(x));for(var d=0;r>=d;++d)c.exports[d]=x[d]}var l=this,m=l.define;l.define=void 0;var n=a("61"),o=a("64"),p=a("62"),q=a("5d"),r=5,s=1.1102230246251565e-16,t=(3+16*s)*s,u=(7+56*s)*s,v=i(3),w=i(4),x=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,c){var d,e=(a[1]-c[1])*(b[0]-c[0]),f=(a[0]-c[0])*(b[1]-c[1]),g=e-f;if(e>0){if(0>=f)return g;d=e+f}else{if(!(0>e))return g;if(f>=0)return g;d=-(e+f)}var h=t*d;return g>=h||-h>=g?g:v(a,b,c)},function(a,b,c,d){var e=a[0]-d[0],f=b[0]-d[0],g=c[0]-d[0],h=a[1]-d[1],i=b[1]-d[1],j=c[1]-d[1],k=a[2]-d[2],l=b[2]-d[2],m=c[2]-d[2],n=f*j,o=g*i,p=g*h,q=e*j,r=e*i,s=f*h,t=k*(n-o)+l*(p-q)+m*(r-s),v=(Math.abs(n)+Math.abs(o))*Math.abs(k)+(Math.abs(p)+Math.abs(q))*Math.abs(l)+(Math.abs(r)+Math.abs(s))*Math.abs(m),x=u*v;return t>x||-t>x?t:w(a,b,c,d)}];return k(),l.define=m,c.exports}),a.registerDynamic("56",["66"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("66"),d.define=e,c.exports}),a.registerDynamic("67",["56","5b","54","53"],!0,function(a,b,c){function d(){return!0}function e(a){return function(b,c){var e=a[b];return e?!!e.queryPoint(c,d):!1}}function f(a){for(var b={},c=0;c<a.length;++c){var d=a[c],f=d[0][0],g=d[0][1],h=d[1][1],i=[Math.min(g,h),Math.max(g,h)];f in b?b[f].push(i):b[f]=[i]}for(var j={},k=Object.keys(b),c=0;c<k.length;++c){var l=b[k[c]];j[k[c]]=p(l)}return e(j)}function g(a,b){return function(c){var d=q.le(b,c[0]);if(0>d)return 1;var e=a[d];if(!e){if(!(d>0&&b[d]===c[0]))return 1;e=a[d-1]}for(var f=1;e;){var g=e.key,h=n(c,g[0],g[1]);if(g[0][0]<g[1][0])if(0>h)e=e.left;else{if(!(h>0))return 0;f=-1,e=e.right}else if(h>0)e=e.left;else{if(!(0>h))return 0;f=1,e=e.right}}return f}}function h(a){return 1}function i(a){return function(b){return a(b[0],b[1])?0:1}}function j(a,b){return function(c){return a(c[0],c[1])?0:b(c)}}function k(a){for(var b=a.length,c=[],d=[],e=0;b>e;++e)for(var k=a[e],l=k.length,m=l-1,n=0;l>n;m=n++){var p=k[m],q=k[n];p[0]===q[0]?d.push([p,q]):c.push([p,q])}if(0===c.length)return 0===d.length?h:i(f(d));var r=o(c),s=g(r.slabs,r.coordinates);return 0===d.length?s:j(f(d),s)}var l=this,m=l.define;l.define=void 0,c.exports=k;var n=a("56")[3],o=a("5b"),p=a("54"),q=a("53");return l.define=m,c.exports}),a.registerDynamic("68",["67"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("67"),d.define=e,c.exports}),a.registerDynamic("36",["68","51","50"],!0,function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){for(var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c=b?l.ringArea:k.ringArea,d=0;d<a.length;d++){var e=c(a[d]);(0===d&&0>e||d>0&&e>0)&&a[d].reverse()}}function f(a){var b=a.map(j["default"]),c=a.length;return function(a){for(var d=0;c>d;d++)if(b[d](a)<=0)return d;return-1}}var g=this,h=g.define;g.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.ensureClockwisePolygon=e,b.getPointInPolygonsFn=f;var i=a("68"),j=d(i),k=a("51"),l=a("50");return g.define=h,c.exports}),a.register("69",["5","25","35","36","37","45","4c","4e","4d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a["default"]},function(a){c=a},function(a){d=a.isDomain},function(a){e=a.ensureClockwisePolygon,f=a.getPointInPolygonsFn},function(a){g=a.fromDomain},function(a){h=a["default"]},function(a){i=a.enlargeExtentIfEqual},function(a){j=a["default"]},function(a){k=a["default"]}],execute:function(){l="black",a("DEFAULT_COLOR",l),m=function(a){function h(a,c){babelHelpers.classCallCheck(this,h),babelHelpers.get(Object.getPrototypeOf(h.prototype),"constructor",this).call(this),d(a)&&(a=g(a),c.keys=[a.parameters.keys().next.value]),c.paletteExtent||(c.paletteExtent="full"),b.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this.defaultColor=c.color||l}return babelHelpers.inherits(h,a),babelHelpers.createClass(h,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addPolygons(),b._pointInPolygonPreprocess(),b.fire("add")})}},{key:"onRemove",value:function(a){this.fire("remove"),this._removePolygons()}},{key:"getBounds",value:function(){return this._geojson.getBounds()}},{key:"getLatLng",value:function(){return this.getBounds().getCenter()}},{key:"computePaletteExtent",value:function(a){if("full"===a){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return a=c.minMax(this.range),a=i(a),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"_pointInPolygonPreprocess",value:function(){var a=this.domain.axes.get("composite").values,b=!1;a.forEach(function(a){return e(a,b)}),this._pointInPolygons=f(a)}},{key:"_addPolygons",value:function(){for(var a=this,c=this.domain.axes.get("composite").values,d=[],e=0;e<c.length;e++)d.push({type:"Feature",properties:{index:e,color:this._getColor(this._getValue(e))},geometry:{type:"Polygon",coordinates:c[e]}});this._geojson=b.geoJson(d,{style:function(a){return{color:a.properties.color,fillOpacity:1,stroke:!1}},onEachFeature:function(b,c){c.on("click",function(c){c.index=b.properties.index,a.fire("click",c)})}}),this._geojson.addTo(this._map)}},{key:"_removePolygons",value:function(){this._map.removeLayer(this._geojson),delete this._geojson}},{key:"_getValue",value:function(a){return this.param?this.range.get({composite:a}):void 0}},{key:"getValueAt",value:function(a){var b=this._pointInPolygons([a.lng,a.lat]);return b>=0?this._getValue(b):void 0}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return"rgb("+d[b]+", "+e[b]+", "+f[b]+")"}},{key:"_updatePolygons",value:function(){this._removePolygons(),this._addPolygons()}},{key:"redraw",value:function(){this._updatePolygons(),this._geojson.redraw()}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}}]),h}(j(k(h(b.Class)))),a("default",m)}}}),a.register("6a",["6b","6c"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]}],execute:function(){d=function(a){function b(a,d){var e=this;babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,d),this.pointClass=c,this.pointOptionsFn=function(){return{vertical:e._vertical}},this._vertical=d.vertical}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"canUsePalette",value:function(){return void 0!==this._vertical}},{key:"vertical",set:function(a){this._vertical=a;var b=!0,c=!1,d=void 0;try{for(var e,f=this._layers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;g.vertical=a}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}}]),b}(b),a("default",d)}}}),a.register("6c",["5","25","35","37","45","4c","1b","4d","6d","4e","4f"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a["default"]},function(a){c=a},function(a){d=a.isDomain},function(a){e=a.fromDomain},function(a){f=a["default"]},function(a){g=a.enlargeExtentIfEqual},function(a){h=a},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a["default"]},function(a){l=a.DEFAULT_COLOR}],execute:function(){m=function(a){function f(a,c){babelHelpers.classCallCheck(this,f),babelHelpers.get(Object.getPrototypeOf(f.prototype),"constructor",this).call(this),d(a)&&(a=e(a),delete c.keys),c.paletteExtent||(c.paletteExtent="full"),b.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this._axesSubset={z:{coordPref:c.vertical}},this.defaultColor=c.color?c.color:l,this.showNoData=c.showNoData}return babelHelpers.inherits(f,a),babelHelpers.createClass(f,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addMarker(),b.fire("add")})}},{key:"_loadCoverageSubset",value:function(){var a=this._axesSubset.z;if(void 0==a.coordPref)a.idx=a.coord=void 0;else{var b=this.domain.axes.get("z").values;a.idx=h.indexOfNearest(b,a.coordPref),a.coord=b[a.idx]}}},{key:"onRemove",value:function(){this.fire("remove"),this._removeMarker()}},{key:"getBounds",value:function(){return b.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var a=this.domain.axes.get("x").values[0],c=this.domain.axes.get("y").values[0];return b.latLng(c,a)}},{key:"canUsePalette",value:function(){return void 0!==this.vertical}},{key:"computePaletteExtent",value:function(a){if("full"===a){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return a=c.minMax(this.range),a=g(a),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"getValue",value:function(){if(this.param&&void 0!==this._axesSubset.z.coord){var a=this.range.get({z:this._axesSubset.z.idx});return a}}},{key:"getValueAt",value:function(a,b){var c=this.getLatLng();return c.distanceTo(a)<=b?this.getValue():void 0}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return{r:d[b],g:e[b],b:f[b]}}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}},{key:"vertical",get:function(){return this._axesSubset.z.coord},set:function(a){this._axesSubset.z.coordPref=a,this._loadCoverageSubset(),this.redraw(),this.fire("axisChange",{axis:"vertical"})}},{key:"verticalSlices",get:function(){var a=this.domain.axes.get("z").values;return ArrayBuffer.isView(a)&&(a=[].concat(babelHelpers.toConsumableArray(a))),a}}]),f}(k(j(i(f(b.Class))))),a("default",m)}}}),a.register("6e",[],function(a){"use strict";function b(a,b,c){this.obj=a,this.left=null,this.right=null,this.parent=c,this.dimension=b}function c(a,c,e){function f(a,c,d){var g,h,i=c%e.length;return 0===a.length?null:1===a.length?new b(a[0],i,d):(a.sort(function(a,b){return a[e[i]]-b[e[i]]}),g=Math.floor(a.length/2),h=new b(a[g],i,d),h.left=f(a.slice(0,g),c+1,h),h.right=f(a.slice(g+1),c+1,h),h)}function g(a){function b(a){a.left&&(a.left.parent=a,b(a.left)),a.right&&(a.right.parent=a,b(a.right))}h.root=a,b(h.root)}var h=this;Array.isArray(a)?this.root=f(a,0,null):g(a,c,e),this.toJSON=function(a){a||(a=this.root);var c=new b(a.obj,a.dimension,null);return a.left&&(c.left=h.toJSON(a.left)),a.right&&(c.right=h.toJSON(a.right)),c},this.insert=function(a){function c(b,c){for(var d=!0;d;){var f=b,g=c;if(d=!1,null===f)return g;var h=e[f.dimension];a[h]<f.obj[h]?(b=f.left,c=f,d=!0,h=void 0):(b=f.right,c=f,d=!0,h=void 0)}}var d,f,g=c(this.root,null);return null===g?void(this.root=new b(a,0,null)):(d=new b(a,(g.dimension+1)%e.length,g),f=e[g.dimension],void(a[f]<g.obj[f]?g.left=d:g.right=d))},this.remove=function(a){function b(b){for(var c=!0;c;){var d=b;if(c=!1,null===d)return null;if(d.obj===a)return d;var f=e[d.dimension];a[f]<d.obj[f]?(b=d.left,c=!0,f=void 0):(b=d.right,c=!0,f=void 0)}}function c(a){function b(a,c){var d=!0;a:for(;d;){var f=a,g=c;d=!1;var h,i,j,k,l;if(null===f)return null;if(h=e[g],f.dimension===g){if(null!==f.left){a=f.left,c=g,d=!0,h=i=j=k=l=void 0;continue a}return f}return i=f.obj[h],j=b(f.left,g),k=b(f.right,g),l=f,null!==j&&j.obj[h]<i&&(l=j),null!==k&&k.obj[h]<l.obj[h]&&(l=k),l}}var d,f,g;return null===a.left&&null===a.right?null===a.parent?void(h.root=null):(g=e[a.parent.dimension],void(a.obj[g]<a.parent.obj[g]?a.parent.left=null:a.parent.right=null)):void(null!==a.right?(d=b(a.right,a.dimension),f=d.obj,c(d),a.obj=f):(d=b(a.left,a.dimension),f=d.obj,c(d),a.right=a.left,a.left=null,a.obj=f))}var d;d=b(h.root),null!==d&&c(d)},this.nearest=function(a,b,f){function g(d){function f(a,c){k.push([a,c]),k.size()>b&&k.pop()}var h,i,j,l,m=e[d.dimension],n=c(a,d.obj),o={};for(l=0;l<e.length;l+=1)l===d.dimension?o[e[l]]=a[e[l]]:o[e[l]]=d.obj[e[l]];return i=c(o,d.obj),null===d.right&&null===d.left?void((k.size()<b||n<k.peek()[1])&&f(d,n)):(h=null===d.right?d.left:null===d.left?d.right:a[m]<d.obj[m]?d.left:d.right,g(h),(k.size()<b||n<k.peek()[1])&&f(d,n),void((k.size()<b||Math.abs(i)<k.peek()[1])&&(j=h===d.left?d.right:d.left,null!==j&&g(j))))}var i,j,k;if(k=new d(function(a){return-a[1]}),f)for(i=0;b>i;i+=1)k.push([null,f]);for(h.root&&g(h.root),j=[],i=0;i<Math.min(b,k.content.length);i+=1)k.content[i][0]&&j.push([k.content[i][0].obj,k.content[i][1]]);return j},this.balanceFactor=function(){function a(b){return null===b?0:Math.max(a(b.left),a(b.right))+1}function b(a){return null===a?0:b(a.left)+b(a.right)+1}return a(h.root)/(Math.log(b(h.root))/Math.log(2))}}function d(a){this.content=[],this.scoreFunction=a}return{setters:[],execute:function(){d.prototype={push:function(a){this.content.push(a),this.bubbleUp(this.content.length-1)},pop:function(){var a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.sinkDown(0)),a},peek:function(){return this.content[0]},remove:function(a){for(var b=this.content.length,c=0;b>c;c++)if(this.content[c]==a){var d=this.content.pop();return void(c!=b-1&&(this.content[c]=d,this.scoreFunction(d)<this.scoreFunction(a)?this.bubbleUp(c):this.sinkDown(c)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(a){for(var b=this.content[a];a>0;){var c=Math.floor((a+1)/2)-1,d=this.content[c];if(!(this.scoreFunction(b)<this.scoreFunction(d)))break;this.content[c]=b,this.content[a]=d,a=c}},sinkDown:function(a){for(var b=this.content.length,c=this.content[a],d=this.scoreFunction(c);;){var e=2*(a+1),f=e-1,g=null;if(b>f){var h=this.content[f],i=this.scoreFunction(h);d>i&&(g=f)}if(b>e){var j=this.content[e],k=this.scoreFunction(j);(null==g?d:i)>k&&(g=e)}if(null==g)break;this.content[a]=this.content[g],this.content[g]=c,a=g}}},a("kdTree",c),a("BinaryHeap",d)}}}),a.register("6b",["5","45","4e","4f","4c","6e"],function(a){"use strict";var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a["default"]},function(a){e=a["default"],f=a.DEFAULT_COLOR},function(a){g=a.enlargeExtentIfEqual},function(a){h=a.kdTree}],execute:function(){i=function(a){function c(a,d){var g=this;babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),d.paletteExtent||(d.paletteExtent="full"),b.Util.setOptions(this,d),this.covcoll=a,this.param=d.keys?a.parameters.get(d.keys[0]):null,this.defaultColor=d.color||f,this.pointClass=d.pointClass||e,this.pointOptionsFn=d.pointOptionsFn,this._layerGroup=b.layerGroup(),this._layers=[],this._kdtree=void 0,this.on("paletteChange",function(){var a=!0,b=!1,c=void 0;try{for(var d,e=g._layers[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.palette=g.palette}}catch(h){b=!0,c=h}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}}),this.on("paletteExtentChange",function(){var a=!0,b=!1,c=void 0;try{for(var d,e=g._layers[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.paletteExtent=g.paletteExtent}}catch(h){b=!0,c=h}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}})}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"onAdd",value:function(a){this._map=a,this._layerLoadCount=0,this._layerErrors=[];var b={keys:this.param?[this.param.key]:void 0,color:this.defaultColor,palette:this.palette,paletteExtent:this.paletteExtent};if(this.pointOptionsFn){var c=this.pointOptionsFn();for(var d in c)b[d]=c[d]}var e=!0,f=!1,g=void 0;try{for(var h,i=this.covcoll.coverages[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,k=new this.pointClass(j,b);this._attachListeners(k,j),this._layerGroup.addLayer(k),this._layers.push(k),k.load()}}catch(l){f=!0,g=l}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}}},{key:"onRemove",value:function(a){a.removeLayer(this._layerGroup),this._layerGroup=b.layerGroup(),this._layers=[],this.fire("remove")}},{key:"bindPopupEach",value:function(a){var b=this;this._clickListenerPopup&&(this.off("click",this._clickListenerPopup),this.off("remove",this._removeListenerPopup)),this._clickListenerPopup=function(c){var d=a(c.coverage);b._map.openPopup(d),b._popup=d},this._removeListenerPopup=function(){b._map.closePopup(b._popup)},this.on("click",this._clickListenerPopup),this.on("remove",this._removeListenerPopup)}},{key:"_attachListeners",value:function(a,b){var c=this;a.once("dataLoad",function(){++c._layerLoadCount,c._fireIfOnAddDone()}).once("error",function(a){c._layerErrors.push(a)}).on("click",function(a){a.coverage=b,c.fire("click",a)})}},{key:"_fireIfOnAddDone",value:function(){var a=this;this._layerLoadCount===this._layers.length&&(this._layerErrors.length>0?this.fire("error",{errors:this._layerErrors}):(this._initKdtree(),this.initializePalette().then(function(){a._layerGroup.addTo(a._map),a.fire("add")})))}},{key:"_initKdtree",value:function(){var a=this._layers.map(function(a){var b=a.getLatLng();return b.layer=a,b}),c=function(a,c){return b.LatLng.prototype.distanceTo.call(a,c)},d=["lat","lng"];this._kdtree=new h(a,c,d)}},{key:"getBounds",value:function(){return b.latLngBounds(this._layers.map(function(a){return a.getLatLng()}))}},{key:"getValueAt",value:function(a,b){var c=this._kdtree.nearest(a,1,b);if(c.length>0){var d=c[0][0],e=d.layer.getValue();return e}}},{key:"computePaletteExtent",value:function(a){var b=this;if(!this.param)throw new Error("palette extent cannot be set when no parameter has been chosen");var c=void 0;if("full"===a)c=this._layers;else{if("fov"!==a)throw new Error("Unsupported: "+a);!function(){var a=b._map.getBounds();c=b._layers.filter(function(b){return a.contains(b.getLatLng())})}()}var d=1/0,e=-(1/0),f=!0,h=!1,i=void 0;try{for(var j,k=c[Symbol.iterator]();!(f=(j=k.next()).done);f=!0){var l=j.value,m=l.getValue();null!=m&&(d=Math.min(d,m),e=Math.max(e,m))}}catch(n){h=!0,i=n}finally{try{!f&&k["return"]&&k["return"]()}finally{if(h)throw i}}return a=g([d,e]),Promise.resolve(a)}},{key:"redraw",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._layers[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.redraw()}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}}},{key:"parameter",get:function(){return this.param}}]),c}(d(c(b.Class))),a("default",i)}}}),a.register("6f",["5","25","35","37","45","4c","1b","4d","6d","4e","4f"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a["default"]},function(a){c=a},function(a){d=a.isDomain},function(a){e=a.fromDomain},function(a){f=a["default"]},function(a){g=a.enlargeExtentIfEqual},function(a){h=a},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a["default"]},function(a){l=a.DEFAULT_COLOR}],execute:function(){m=function(a){function f(a,c){babelHelpers.classCallCheck(this,f),babelHelpers.get(Object.getPrototypeOf(f.prototype),"constructor",this).call(this),d(a)&&(a=e(a),delete c.keys),c.paletteExtent||(c.paletteExtent="full"),b.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this._axesSubset={t:{coordPref:c.time}},this.defaultColor=c.color?c.color:l,this.showNoData=c.showNoData}return babelHelpers.inherits(f,a),babelHelpers.createClass(f,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addMarker(),b.fire("add")})}},{key:"_loadCoverageSubset",value:function(){var a=this._axesSubset.t;if(void 0==a.coordPref)a.idx=a.coord=void 0;else{var b=this.domain.axes.get("t").values.map(function(a){return a.getTime()});a.idx=h.indexOfNearest(b,a.coordPref.getTime()),a.coord=b[a.idx]}}},{key:"onRemove",value:function(){this.fire("remove"),this._removeMarker()}},{key:"getBounds",value:function(){return b.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var a=this.domain.axes.get("x").values[0],c=this.domain.axes.get("y").values[0];return b.latLng(c,a)}},{key:"canUsePalette",value:function(){return void 0!==this.time}},{key:"computePaletteExtent",value:function(a){if("full"===a){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return a=c.minMax(this.range),a=g(a),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"getValue",value:function(){if(this.param&&void 0!==this._axesSubset.t.coord){var a=this.range.get({t:this._axesSubset.t.idx});return a}}},{key:"getValueAt",value:function(a,b){var c=this.getLatLng();return c.distanceTo(a)<=b?this.getValue():void 0}},{key:"_getColor",value:function(){var a=this.getValue();if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return{r:d[b],g:e[b],b:f[b]}}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}},{key:"time",set:function(a){var b=this,c=this.time;this._axesSubset.t.coordPref=a.toISOString(),this._loadCoverageSubset().then(function(){c!==b.time&&(b.redraw(),b.fire("axisChange",{axis:"time"}))})},get:function(){if(this._axesSubset.t.coord){var a=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(a)}}},{key:"timeSlices",get:function(){return this.domain.axes.get("t").values.map(function(a){return new Date(a)})}}]),f}(k(j(i(f(b.Class))))),a("default",m)}}}),a.register("45",["5"],function(a){"use strict";function b(a){return function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"on",value:function(){for(var a,b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return(a=c.Mixin.Events.on).call.apply(a,[this].concat(d))}},{key:"off",value:function(){for(var a,b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return(a=c.Mixin.Events.off).call.apply(a,[this].concat(d))}},{key:"once",value:function(){for(var a,b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return(a=c.Mixin.Events.once).call.apply(a,[this].concat(d))}},{key:"fire",value:function(){for(var a,b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return(a=c.Mixin.Events.fire).call.apply(a,[this].concat(d))}},{key:"hasEventListeners",value:function(){for(var a,b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return(a=c.Mixin.Events.hasEventListeners).call.apply(a,[this].concat(d))}},{key:"addEventListener",value:function(){for(var a,b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return(a=c.Mixin.Events.addEventListener).call.apply(a,[this].concat(d))}},{key:"removeEventListener",value:function(){for(var a,b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return(a=c.Mixin.Events.removeEventListener).call.apply(a,[this].concat(d))}},{key:"addOneTimeEventListener",value:function(){for(var a,b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return(a=c.Mixin.Events.addOneTimeEventListener).call.apply(a,[this].concat(d))}},{key:"fireEvent",value:function(){for(var a,b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return(a=c.Mixin.Events.fireEvent).call.apply(a,[this].concat(d))}}]),b}(a)}var c;return a("default",b),{setters:[function(a){c=a["default"]}],execute:function(){}}}),a.register("6d",["5"],function(a){"use strict";function b(a){return function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"_addMarker",value:function(){var a=this,b=this.getValue();if(null!==b||this.showNoData){var d=this._getColor(b),e=d.r,f=d.g,g=d.b,h=this.getLatLng(),i=.7;if(this._marker=c.circleMarker(h,{fillColor:"rgb("+e+","+f+","+g+")",fillOpacity:1,radius:5,stroke:!0,opacity:1,weight:1,color:"rgb("+Math.round(e*i)+","+Math.round(f*i)+","+Math.round(g*i)+")"}).on("click",function(b){b.coverage=a.coverage,a.fire("click",b)}).addTo(this._map),this._popup){var j;(j=this._marker).bindPopup.apply(j,babelHelpers.toConsumableArray(this._popup))}}}},{key:"_removeMarker",value:function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)}},{key:"__updateMarker",value:function(){this._marker.options.color=this._getColor()}},{key:"bindPopup",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];if(this._popup=b,this._marker){var d;(d=this._marker).bindPopup.apply(d,b)}}},{key:"openPopup",value:function(){return this._marker.openPopup(),this}},{key:"closePopup",value:function(){return this._marker.closePopup(),this}},{key:"redraw",value:function(){this._marker&&(this.__updateMarker(),this._marker.redraw())}}]),b}(a)}var c;return a("default",b),{setters:[function(a){c=a["default"]}],execute:function(){}}}),a.register("4f",["5","35","37","45","4c","4d","6d","4e"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k;return{setters:[function(a){b=a["default"]},function(a){c=a.isDomain},function(a){d=a.fromDomain},function(a){e=a["default"]},function(a){f=a.enlargeExtentIfEqual},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a["default"]}],execute:function(){j="black",a("DEFAULT_COLOR",j),k=function(a){function e(a,f){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),c(a)&&(a=d(a),delete f.keys),f.paletteExtent||(f.paletteExtent="full"),b.Util.setOptions(this,f),this.cov=a,this.param=f.keys?a.parameters.get(f.keys[0]):null,this.defaultColor=f.color||j,this.showNoData=f.showNoData}return babelHelpers.inherits(e,a),babelHelpers.createClass(e,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addMarker(),b.fire("add")})}},{key:"onRemove",value:function(){this.fire("remove"),this._removeMarker()}},{key:"getBounds",value:function(){return b.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var a=this.domain.axes.get("x").values[0],c=this.domain.axes.get("y").values[0];return b.latLng(c,a)}},{key:"computePaletteExtent",value:function(a){if("full"===a){
if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");var b=this.getValue();return a=f([b,b]),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"getValue",value:function(){return this.param?this.range.get({}):void 0}},{key:"getValueAt",value:function(a,b){var c=this.getLatLng();return c.distanceTo(a)<=b?this.getValue():void 0}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return{r:d[b],g:e[b],b:f[b]}}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}}]),e}(i(h(g(e(b.Class))))),a("default",k)}}}),a.register("70",["5","25","35","37","4c","4d","4e","4f"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a["default"]},function(a){c=a},function(a){d=a.isDomain},function(a){e=a.fromDomain},function(a){f=a.enlargeExtentIfEqual},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a.DEFAULT_COLOR}],execute:function(){j=function(a){function g(a,c){babelHelpers.classCallCheck(this,g),babelHelpers.get(Object.getPrototypeOf(g.prototype),"constructor",this).call(this),d(a)&&(a=e(a),c.keys=[a.parameters.keys().next.value]),c.paletteExtent||(c.paletteExtent="full"),b.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this.defaultColor=c.color||i}return babelHelpers.inherits(g,a),babelHelpers.createClass(g,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addTrajectoryLayers(),b.fire("add")})}},{key:"onRemove",value:function(a){this.fire("remove"),babelHelpers.get(Object.getPrototypeOf(g.prototype),"onRemove",this).call(this,a)}},{key:"computePaletteExtent",value:function(a){var b=this.range;if("full"!==a){if("fov"===a){this._map.getBounds();throw new Error("NOT IMPLEMENTED YET")}throw new Error("Unknown extent specification: "+a)}return a=c.minMax(b),a=f(a),Promise.resolve(a)}},{key:"_addTrajectoryLayers",value:function(){for(var a=this.getLatLngs(),c=0;c<a.length;c++){var d=new b.CircleMarker(a[c],{color:this._getColor(this._getValue(c)),opacity:1,fillOpacity:1});this.addLayer(d)}var e=b.polyline(a,{color:"black",weight:3});this.addLayer(e)}},{key:"getLatLngs",value:function(){for(var a=this.domain.axes.get("composite").values,c=[],d=0;d<a.length;d++){var e=a[d][1],f=a[d][2],g=new b.LatLng(f,e);c.push(g)}return c}},{key:"getValueAt",value:function(a,b){for(var c=this.getLatLngs(),d=c.map(function(b){return b.distanceTo(a)}),e=1/0,f=void 0,g=0;g<c.length;g++){var h=d[g];b>=h&&e>h&&(e=h,f=g)}return void 0!==f?this._getValue(f):void 0}},{key:"_getValue",value:function(a){return this.param?this.range.get({composite:a}):void 0}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return"rgb("+d[b]+", "+e[b]+", "+f[b]+")"}},{key:"redraw",value:function(){this.clearLayers(),this._addTrajectoryLayers()}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}}]),g}(h(g(b.FeatureGroup))),a("default",j)}}}),a.registerDynamic("37",["28","35","2b"],!0,function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];m.checkDomain(a);var c=b.gridAxes;c=void 0===c?["x","y"]:c;var e=k(c,2),f=e[0],i=e[1],j="domain",n="Domain",o=a.axes.has(f)&&a.axes.has(i)&&(a.axes.get(f).values.length>1||a.axes.get(i).values.length>1),p=void 0,q=void 0,r="a",s=0,t="b",u=1;o?(p=[{id:r,label:{en:"A"}},{id:t,label:{en:"B"}}],q=new Map([[r,[s]],[t,[u]]])):(p=[{id:r,label:{en:"X"}}],q=new Map([[r,[s]]]));var v=new Map;v.set(j,{key:j,observedProperty:{label:{en:n},categories:p},categoryEncoding:q});var w=new Map([].concat(d(a.axes)).map(function(a){var b=k(a,2),c=b[0],d=b[1];return[c,d.values.length]})),x=void 0;o?!function(){var a=function(a){return a%2};x=function(b){var c=b.x,d=void 0===c?0:c,e=b.y,f=void 0===e?0:e;return a(d+f)?s:u}}():x=function(){return s};var y=function(){return Promise.resolve({shape:w,dataType:"integer",get:x})},z={type:l.COVERAGE,domainType:a.domainType,parameters:v,loadDomain:function(){return Promise.resolve(a)},loadRange:y};return h(z),g(z),z}function f(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=b.parameter,e=void 0===c?{key:"p1",observedProperty:{label:{en:"Parameter 1"}}}:c,f=b.referencing,i=b.domainType,j=new Map;j.set(e.key,e),f||(f=[],a.coords.has("x")&&a.coords.has("y")&&f.push({components:["x","y"],system:{type:"GeodeticCRS",id:"http://www.opengis.net/def/crs/OGC/1.3/CRS84"}}),a.coords.has("t")&&f.push({components:["t"],system:{type:"TemporalRS",calendar:"Gregorian"}}));var m=new Map,n=!0,o=!1,p=void 0;try{for(var q,r=a.coords[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){for(var s=k(q.value,2),t=s[0],u=s[1],v=new Array(u.size),w=0;w<u.size;w++)v[w]=u.get(w);m.set(t,{key:t,components:[t],values:v})}}catch(x){o=!0,p=x}finally{try{!n&&r["return"]&&r["return"]()}finally{if(o)throw p}}var y={type:l.DOMAIN,domainType:i,referencing:f,axes:m},z=new Map([].concat(d(y.axes)).map(function(a){var b=k(a,2),c=b[0],d=b[1];return[c,d.values.length]})),A=-1!==a.dtype.indexOf("int")?"integer":"float",B=function(){return Promise.resolve({shape:z,dataType:A,get:a.xget.bind(a)})},C={type:l.COVERAGE,domainType:i,parameters:j,loadDomain:function(){return Promise.resolve(y)},loadRange:B};return h(C),g(C),C}function g(a){m.checkCoverage(a),a.subsetByIndex=n.subsetByIndex.bind(null,a),a.subsetByValue=n.subsetByValue.bind(null,a)}function h(a){function b(b){return b||(b=a.parameters.keys()),Promise.all([].concat(d(b)).map(a.loadRange)).then(function(a){return new Map(b.map(function(b,c){return[b,a[c]]}))})}m.checkCoverage(a),a.loadRanges=b}var i=this,j=i.define;i.define=void 0,Object.defineProperty(b,"__esModule",{value:!0});var k=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b.fromDomain=e,b.fromXndarray=f,b.addSubsetFunctions=g,b.addLoadRangesFunction=h;var l=a("28"),m=a("35"),n=a("2b");return i.define=j,c.exports}),a.registerDynamic("35",["28"],!0,function(a,b,c){function d(a){return a.type===j.COVERAGE}function e(a){if(!d(a))throw new Error("must be a Coverage")}function f(a){return a.type===j.DOMAIN}function g(a){if(!f(a))throw new Error("must be a Domain")}var h=this,i=h.define;h.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.isCoverage=d,b.checkCoverage=e,b.isDomain=f,b.checkDomain=g;var j=a("28");return h.define=i,c.exports}),a.registerDynamic("71",[],!0,function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a){var b=1/0,c=-(1/0),d=function(a){null!==a&&(b>a&&(b=a),a>c&&(c=a))};return g(a,d),b===1/0?[void 0,void 0]:[b,c]}function f(a,b,c){var d=c,e=function(a){d=b(d,a)};return g(a,e),d}function g(a,b){var c=[].concat(d(a.shape));c.sort(function(a,b){var c=j(a,2),d=c[1],e=j(b,2),f=e[1];return d-f});var e="var obj = {}",f="",g=!0,h=!1,i=void 0;try{for(var k,l=c[Symbol.iterator]();!(g=(k=l.next()).done);g=!0){var m=j(k.value,2),n=m[0],o=m[1];e+="\n      for (var i"+n+"=0; i"+n+" < "+o+"; ++i"+n+") {\n        obj['"+n+"'] = i"+n+"\n    ",f+="}"}}catch(p){h=!0,i=p}finally{try{!g&&l["return"]&&l["return"]()}finally{if(h)throw i}}e+="\n    fn(get(obj))\n  ";var q=new Function("return function iterateRange (get, fn) { "+e+" "+f+" }")();q(a.get,b)}var h=this,i=h.define;h.define=void 0,Object.defineProperty(b,"__esModule",{value:!0});var j=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return b.minMax=e,b.reduce=f,b.iterate=g,h.define=i,c.exports}),a.register("25",["71"],function(a){"use strict";return{setters:[function(b){var c={};c.minMax=b.minMax,c.reduce=b.reduce,c.iterate=b.iterate,a(c)}],execute:function(){}}}),a.register("1b",["72"],function(a){"use strict";return{setters:[function(b){var c={};c.indicesOfNearest=b.indicesOfNearest,c.indexOfNearest=b.indexOfNearest,a(c)}],execute:function(){}}}),a.register("1c",["29"],function(a){"use strict";return{setters:[function(b){var c={};c.isEllipsoidalCRS=b.isEllipsoidalCRS,c.getHorizontalCRSReferenceObject=b.getHorizontalCRSReferenceObject,c.getReferenceObject=b.getReferenceObject,c.getProjection=b.getProjection,c.reproject=b.reproject,a(c)}],execute:function(){}}}),a.register("4d",["1c"],function(a){"use strict";function b(a){return function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"load",value:function(){function a(a){if(!a.referencing.some(function(a){return c(a.system)}))throw new Error("Unsupported CRS, must be WGS84")}var b=this;this.fire("dataLoading");var d=this.coverage.loadDomain().then(function(c){a(c),b.domain=c});return this._loadCoverageSubset?d=d.then(function(){return b._loadCoverageSubset()}):this.parameter&&(d=d.then(function(){return b.coverage.loadRange(b.parameter.key)}).then(function(a){b.range=a})),d=d.then(function(){b.fire("dataLoad")})["catch"](function(a){console.error(a),b.fire("error",a),b.fire("dataLoad")})}}]),b}(a)}var c;return a("default",b),{setters:[function(a){c=a.isEllipsoidalCRS}],execute:function(){}}}),a.register("4e",["4c"],function(a){"use strict";function b(a){return function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"initializePalette",value:function(){var a=this,b=this.options,c=this.parameter;if(!c)return Promise.resolve();var f=c.observedProperty.categories;if(f&&this._initCategoryIdxMap(),this._palette||(b.palette?this._palette=b.palette:c.preferredPalette?this._palette=e(c.preferredPalette):f?f.every(function(a){return a.preferredColor})?this._palette=d(f.map(function(a){return a.preferredColor})):this._palette=h(f.length):this._palette=g()),f&&f.length!==this._palette.steps)throw new Error("Categorical palettes must match the number of categories of the parameter");return this._paletteExtent=this._paletteExtent||b.paletteExtent,this.parameter.categoryEncoding&&!function(){var b=a._categoryIdxMap,c=b.length-1;a.getPaletteIndex=function(a){if(!(null===a||0>a||a>c)){var d=b[a];if(255!==d)return d}}}(),!this.canUsePalette||this.canUsePalette()?this.setPaletteExtent(this._paletteExtent,!0).then(function(){return a._updatePaletteIndexFn()}):Promise.resolve()}},{key:"_updatePaletteIndexFn",value:function(){var a=this;this.parameter.categoryEncoding||!function(){var b=a.palette,c=a.paletteExtent;a.getPaletteIndex=function(a){if(null!==a){var d=f(a,b,c);return d}}}()}},{key:"setPaletteExtent",value:function(a,b){var c=this;if(this.parameter.observedProperty.categories)return Promise.resolve();var d=this.paletteExtent,e=function(a){return Array.isArray(d)?d[0]!==a[0]||d[1]!==a[1]?!0:!1:!0},f=Array.isArray(a)?Promise.resolve(a):this.computePaletteExtent(a);return f.then(function(a){Array.isArray(a)&&isNaN(a[0])||e(a)&&(c._paletteExtent=a,c._updatePaletteIndexFn(),b||c.redraw(),c.fire("paletteExtentChange"))})}},{key:"_initCategoryIdxMap",value:function(){var a=this.parameter;if(a.categoryEncoding){var b=-(1/0),c=1/0,d=a.observedProperty.categories,e=a.categoryEncoding,f=!0,g=!1,h=void 0;try{for(var i,j=d[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value;if(e.has(k.id)){var l=!0,m=!1,n=void 0;try{for(var o,p=e.get(k.id)[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value;b=Math.max(b,q),c=Math.min(c,q)}}catch(r){m=!0,n=r}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}}}}catch(r){g=!0,h=r}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}var s=void 0;if(!(d.length<256))throw new Error("Too many categories: "+d.length);if(b>1e4||0>c)throw new Error("category values too high (>10000) or low (<0)");s=new Uint8Array(b+1);for(var t=0;b>=t;t++)s[t]=255;for(var u=0;u<d.length;u++){var k=d[u];if(e.has(k.id)){var v=!0,w=!1,x=void 0;try{for(var y,z=a.categoryEncoding.get(k.id)[Symbol.iterator]();!(v=(y=z.next()).done);v=!0){var q=y.value;s[q]=u}}catch(r){w=!0,x=r}finally{try{!v&&z["return"]&&z["return"]()}finally{if(w)throw x}}}}this._categoryIdxMap=s}}},{key:"palette",get:function(){return!this.parameter||this.canUsePalette&&!this.canUsePalette()?void 0:this._palette},set:function(a){this._palette=a,this._updatePaletteIndexFn(),this.redraw(),this.fire("paletteChange")}},{key:"paletteExtent",set:function(a){this.setPaletteExtent(a)},get:function(){return this._paletteExtent}}]),b}(a)}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.linearPalette,d=a.directPalette,e=a.create,f=a.scale}],execute:function(){g=function(){return c(["#deebf7","#3182bd"])},h=function(a){if(a>12)throw new Error("not enough built-in categorical colors, must supply custom colors");return d(["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"].slice(0,a))}}}}),a.register("4c",[],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]?256:arguments[1];if(1===b)return c([a[0]]);var d=document.createElement("canvas");d.width=b,d.height=1;for(var e=d.getContext("2d"),f=e.createLinearGradient(0,0,b-1,0),g=a.length,h=0;g>h;h++)f.addColorStop(h/(g-1),a[h]);e.fillStyle=f,e.fillRect(0,0,b,1);for(var i=new Uint8Array(b),j=new Uint8Array(b),k=new Uint8Array(b),l=e.getImageData(0,0,b,1).data,m=0,n=0;m<l.length;m+=4,n++)i[n]=l[m],j[n]=l[m+1],k[n]=l[m+2];return{steps:i.length,red:i,green:j,blue:k}}function c(a){var b=document.createElement("canvas");b.width=1,b.height=1;for(var c=b.getContext("2d"),d=a.length,e=new Uint8Array(d),f=new Uint8Array(d),g=new Uint8Array(d),h=0;h<a.length;h++){c.fillStyle=a[h],c.fillRect(0,0,1,1);var i=c.getImageData(0,0,1,1).data;e[h]=i[0],f[h]=i[1],g[h]=i[2]}return{steps:e.length,red:e,green:f,blue:g}}function d(a){if(a){var d=a.colors,e=void 0;return e="linear"===a.interpolation?b(d,a.steps):c(d)}}function e(a,b,c){var d=Math.trunc((b.steps-1+.9999)*(a-c[0])/(c[1]-c[0]));return d}function f(a){var b=arguments.length<=1||void 0===arguments[1]?.1:arguments[1];if(a[0]===a[1]){var c=a[0]*b;return[a[0]-c,a[1]+c]}return a}function g(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a[c];if(0>d||d>255)throw new Error("Array value must be within [0,255], but is: "+d);b[c]=d}return b}var h;return a("linearPalette",b),a("directPalette",c),a("create",d),a("scale",e),a("enlargeExtentIfEqual",f),{setters:[],execute:function(){h=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=b.defaultSteps,d=void 0===c?256:c;babelHelpers.classCallCheck(this,a),this._defaultSteps=d,this._palettes=new Map}return babelHelpers.createClass(a,[{key:"add",value:function(a,b){if(Array.isArray(b)&&(b=c(b)),![b.red,b.green,b.blue].every(function(a){return a.length===b.red.length}))throw new Error("The red, green, blue arrays of the palette must be of equal lengths");b.red instanceof Uint8Array||(b.red=g(b.red),b.green=g(b.green),b.blue=g(b.blue)),b.steps=b.red.length,this._palettes.set(a,b)}},{key:"addLinear",value:function(a,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=d.steps;this.add(a,b(c,e?e:this._defaultSteps))}},{key:"get",value:function(a){var b=this._palettes.get(a);if(void 0===b)throw new Error('Palette "'+a+'" not found');return b}},{key:Symbol.iterator,get:function(){return this._palettes[Symbol.iterator]}}]),a}(),a("PaletteManager",h)}}}),a.register("73",["5","25","29","34","35","37","4c","4e","4d","1b","1c"],function(a){"use strict";function b(a,b){return c(a,b,!0)}function c(a,b,c){var d=b[1],e=b[0],f=d-e;return a===d&&c?a:((a-e)%f+f)%f+e}var d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){d=a["default"]},function(a){e=a},function(a){f=a.getReferenceObject},function(a){g=a["default"]},function(a){h=a.isDomain},function(a){i=a.fromDomain},function(a){j=a.enlargeExtentIfEqual},function(a){k=a["default"]},function(a){l=a["default"]},function(a){m=a},function(a){n=a}],execute:function(){o=function(a){function c(a,b){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),h(a)&&(a=i(a),b.keys=[a.parameters.keys().next.value]),b.paletteExtent||(b.paletteExtent="subset"),d.Util.setOptions(this,b),this.cov=a,this.param=a.parameters.get(b.keys[0]),this._axesSubset={t:{coordPref:b.time?b.time.toISOString():void 0},z:{coordPref:b.vertical}}}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){var a=f(b.domain,"z");if(a&&1===a.components.length){var c=a.system;c.cs&&(c.cs.csAxes||c.cs.axes)&&(b.crsVerticalAxis=c.cs.csAxes?c.cs.csAxes[0]:c.cs.axes[0])}}).then(function(){b.errored=!1,babelHelpers.get(Object.getPrototypeOf(c.prototype),"onAdd",b).call(b,a),b.fire("add")})["catch"](function(d){b.errored=!0,console.log(d),babelHelpers.get(Object.getPrototypeOf(c.prototype),"onAdd",b).call(b,a)})}},{key:"onRemove",value:function(a){delete this._map,this.fire("remove"),babelHelpers.get(Object.getPrototypeOf(c.prototype),"onRemove",this).call(this,a)}},{key:"getBounds",value:function(){var a=void 0;if(this.cov.bbox)a=this.cov.bbox;else{if(!this._isDomainUsingEllipsoidalCRS())return;a=this._getDomainBbox()}var b=d.latLng(a[1],a[0]),c=d.latLng(a[3],a[2]),e=new d.LatLngBounds(b,c);return e}},{key:"_loadCoverageSubset",value:function(){var a=this,b={},c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(this._axesSubset)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=this._axesSubset[h];this.domain.axes.has(h)&&(void 0==i.coordPref?b[h]={target:this.domain.axes.get(h).values[0]}:b[h]={target:i.coordPref})}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return this.fire("dataLoading"),this.cov.subsetByValue(b).then(function(b){return a.subsetCov=b,b.cacheRanges=!0,Promise.all([b.loadDomain(),b.loadRange(a.param.key)])}).then(function(b){var c=babelHelpers.slicedToArray(b,2),d=c[0],e=c[1];a.subsetDomain=d,a.subsetRange=e,a.fire("dataLoad")})["catch"](function(b){throw a.fire("dataLoad"),b})}},{key:"computePaletteExtent",value:function(a){var b=this;if("subset"===a){var c=this.subsetRange.shape.get("x"),d=this.subsetRange.shape.get("y");if(1e6>c*d)return a=e.minMax(this.subsetRange),a=j(a),Promise.resolve(a);var f={start:0,stop:c,step:Math.max(Math.round(c/1e3),1)},g={start:0,stop:d,step:Math.max(Math.round(d/1e3),1)};return this.subsetCov.subsetByIndex({x:f,y:g}).then(function(c){return c.loadRange(b.param.key).then(function(b){var c=e.minMax(b),d=babelHelpers.slicedToArray(c,2),f=d[0],g=d[1],h=.1*(g-f);return a=[f-h,g+h]})})}if("fov"===a){this._map.getBounds();throw new Error("NOT IMPLEMENTED YET")}throw new Error("Unknown extent specification: "+a)}},{key:"getValueAt",value:function(a){var c=this.domain.axes.get("x").values,d=this.domain.axes.get("y").values,e=this._getDomainBbox(),f=[e[0],e[0]+360],g=a.lat,h=a.lng;if(!(g<e[1]||g>e[3]||(h=b(h,f),h<e[0]||h>e[2]))){var i=m.indexOfNearest(d,g),j=m.indexOfNearest(c,h);return this.subsetRange.get({y:i,x:j})}}},{key:"drawTile",value:function(a,b,c){if(!this.errored){var d=a.getContext("2d"),e=this.options.tileSize,f=d.getImageData(0,0,e,e),h=g(f.data,[e,e,4]),i=b.multiplyBy(e),j=i.x,k=i.y,l=this.palette,m=l.red,n=l.green,o=l.blue,p=this.getPaletteIndex,q=function(a,b,c){var d=p(c);void 0!==d&&(h.set(a,b,0,m[d]),h.set(a,b,1,n[d]),h.set(a,b,2,o[d]),h.set(a,b,3,255))},r=this.subsetRange.get;if(!this._isDomainUsingEllipsoidalCRS())throw this._isGeodeticTransformAvailableForDomain()?new Error("NOT IMPLEMENTED YET"):new Error("Cannot draw grid, spatial CRS is not geodetic and no geodetic transform data is available");this._isRectilinearGeodeticMap()?this._drawRectilinearGeodeticMapProjection(q,e,j,k,r):this._drawAnyMapProjection(q,e,j,k,r),d.putImageData(f,0,0)}}},{key:"_getDomainBbox",value:function(){var a=this.domain.axes.get("x"),b=this.domain.axes.get("y"),c=a.values,d=b.values,e=a.bounds,f=b.bounds,g=c.length-1,h=d.length-1,i=void 0,j=void 0;e?(i=e.get(0)[0],j=e.get(g)[1]):(i=c[0],j=c[g]);var k=void 0,l=void 0;if(f?(k=f.get(0)[0],l=f.get(h)[1]):(k=d[0],l=d[h]),i>j){var m=[j,i];i=m[0],j=m[1]}if(k>l){var n=[l,k];k=n[0],l=n[1]}return!e&&c.length>1&&(i-=Math.abs(c[0]-c[1])/2,j+=Math.abs(c[g]-c[g-1])/2),!f&&d.length>1&&(k-=Math.abs(d[0]-d[1])/2,l+=Math.abs(d[h]-d[h-1])/2),[i,k,j,l]}},{key:"_drawAnyMapProjection",value:function(a,c,e,f,g){for(var h=this._map,i=this.domain.axes.get("x").values,j=this.domain.axes.get("y").values,k=this._getDomainBbox(),l=[k[0],k[0]+360],n=0;c>n;n++)for(var o=0;c>o;o++){var p=h.unproject(d.point(e+n,f+o)),q=p.lat,r=p.lon;if(!(q<k[1]||q>k[3]||(r=b(r,l),r<k[0]||r>k[2]))){var s=m.indexOfNearest(j,q),t=m.indexOfNearest(i,r);a(o,n,g({y:s,x:t}))}}}},{key:"_drawRectilinearGeodeticMapProjection",value:function(a,c,e,f,g){for(var h=this._map,i=this.domain.axes.get("x").values,j=this.domain.axes.get("y").values,k=this._getDomainBbox(),l=[k[0],k[0]+360],n=new Float64Array(c),o=new Uint32Array(c),p=0;c>p;p++){var q=h.unproject(d.point(e,f+p)).lat;n[p]=q,o[p]=m.indexOfNearest(j,q)}for(var r=0;c>r;r++){var s=h.unproject(d.point(e+r,f)).lng;if(s=b(s,l),!(s<k[0]||s>k[2]))for(var t=m.indexOfNearest(i,s),p=0;c>p;p++){var u=n[p];if(!(u<k[1]||u>k[3])){var v=o[p];a(p,r,g({y:v,x:t}))}}}}},{key:"_isRectilinearGeodeticMap",value:function(){var a=this._map.options.crs,b=[d.CRS.EPSG3857,d.CRS.EPSG4326,d.CRS.EPSG3395,d.CRS.Simple],c=-1!==b.indexOf(a);return c}},{key:"_isDomainUsingEllipsoidalCRS",value:function(){return this.domain.referencing.some(function(a){return n.isEllipsoidalCRS(a.system)})}},{key:"_isGeodeticTransformAvailableForDomain",value:function(){this.domain.referencing.find(function(a){return n.isEllipsoidalCRS(a.system)});return!1}},{key:"redraw",value:function(){this.getContainer()&&d.TileLayer.Canvas.prototype.redraw.call(this)}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}},{key:"time",set:function(a){var b=this;if(!this.domain.axes.has("t"))throw new Error("No time axis found");var c=this.time;this._axesSubset.t.coordPref=a.toISOString(),this._loadCoverageSubset().then(function(){c!==b.time&&(b.redraw(),b.fire("axisChange",{axis:"time"}))})},get:function(){if(this.domain.axes.has("t")){var a=this.subsetDomain.axes.get("t").values[0];return new Date(a)}}},{key:"timeSlices",get:function(){return this.domain.axes.has("t")?this.domain.axes.get("t").values.map(function(a){return new Date(a)}):void 0}},{key:"vertical",set:function(a){var b=this;if(!this.domain.axes.has("z"))throw new Error("No vertical axis found");var c=this.vertical;this._axesSubset.z.coordPref=a,this._loadCoverageSubset().then(function(){c!==b.vertical&&(b.redraw(),b.fire("axisChange",{axis:"vertical"}))})},get:function(){if(this.domain.axes.has("z")){var a=this.subsetDomain.axes.get("z").values[0];return a}}},{key:"verticalSlices",get:function(){if(this.domain.axes.has("z")){var a=this.domain.axes.get("z").values;return ArrayBuffer.isView(a)&&(a=[].concat(babelHelpers.toConsumableArray(a))),a}}}]),c}(k(l(d.TileLayer.Canvas))),a("default",o)}}}),a.register("74",["69","70","73","4f","6f","6b","6c","6a","4b","1d"],function(a){"use strict";function b(){return function(a,b){var d=c(a);if(!d){var e=a.type===u?"collection ":"";throw new Error("No "+e+"layer class found for domainType="+a.domainType)}return new d(a,b)}}function c(a){return(a.type===t||a.type===v)&&a.domainType in w?w[a.domainType]:a.type===u&&a.domainType in x?x[a.domainType]:void 0}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return a("default",b),a("getLayerClass",c),{setters:[function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a["default"]},function(a){l=a["default"]},function(a){m=a.COVJSON_POINT,n=a.COVJSON_POINTSERIES,o=a.COVJSON_VERTICALPROFILE,p=a.COVJSON_GRID,q=a.COVJSON_TRAJECTORY,r=a.COVJSON_MULTIPOLYGON,s=a.COVJSON_POLYGONSERIES,t=a.COVERAGE,u=a.COVERAGECOLLECTION,v=a.DOMAIN}],execute:function(){y={},babelHelpers.defineProperty(y,p,f),babelHelpers.defineProperty(y,m,g),babelHelpers.defineProperty(y,n,h),babelHelpers.defineProperty(y,o,j),babelHelpers.defineProperty(y,q,e),babelHelpers.defineProperty(y,r,d),babelHelpers.defineProperty(y,s,l),w=y,z={},babelHelpers.defineProperty(z,m,i),babelHelpers.defineProperty(z,o,k),x=z}}}),a.register("75",["74"],function(a){"use strict";return{setters:[function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);c["default"]=b["default"],a(c)}],execute:function(){}}}),a.register("76",["9","41","46","49","75","77","4a","1d","1e","b"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){b=a.i18n},function(a){c=a["default"]},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"],g=a.getLayerClass},function(a){h=a["default"]},function(a){i=a["default"]},function(a){j=a.COVJSON_VERTICALPROFILE},function(a){k=a["default"]},function(a){l=a["default"],m=a.VIEW}],execute:function(){n="ModelObservationComparisonActivity",o=function(a){function l(a,b){babelHelpers.classCallCheck(this,l),babelHelpers.get(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,b),this.cov=a,this._setHidden(),this.layers=[]}return babelHelpers.inherits(l,a),babelHelpers.createClass(l,[{key:"_setVisible",value:function(){this.visible=!0,this.label="Hide",this.icon='<span class="glyphicon glyphicon-eye-close"></span>',this.fire("labelChange")}},{key:"_setHidden",value:function(){this.visible=!1,this.label="View",this.icon='<span class="glyphicon glyphicon-eye-open"></span>',this.fire("labelChange")}},{key:"run",value:function(){var a=this.context.map,c=this.context.dataset,d=b(c.title);if(this.visible)return this.remove(),void this._setHidden();this._setVisible();var f=this.cov;g(f)||f.coverages&&1===f.coverages.length&&(f=f.coverages[0]);var h=this.context.distribution.formatImpl.shortLabel,j='<span class="label label-success">'+h+"</span> ";this.paramSync=new i({syncProperties:{palette:function(a,b){return a},paletteExtent:function(a,b){return a&&b?[Math.min(a[0],b[0]),Math.max(a[1],b[1])]:null}}}).on("parameterAdd",function(b){var c=b.syncLayer;c.palette&&e(c,{position:"bottomright"}).addTo(a)});var k=!0,l=!1,m=void 0;try{for(var n,o=f.parameters.keys()[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=n.value,q={keys:[p]},r=b(f.parameters.get(p).observedProperty.label),s=j+r,t=this._createLayer(f,q);a.layerControl.addOverlay(t,s,{groupName:d,expanded:!0}),this.layers.push(t)}}catch(u){l=!0,m=u}finally{try{!k&&o["return"]&&o["return"]()}finally{if(l)throw m}}var v=this.layers[0];a.addLayer(v)}},{key:"_createLayer",value:function(a,b){var e=this,g=a.coverages,i=this.context.map,l=f()(a,b).on("add",function(a){var b=a.target;if(e.paramSync.addLayer(b),g);else{if(b.timeSlices){var c=new k(b);c.addTo(i)}if(b.verticalSlices){var f=new d(b);f.addTo(i)}}}).on("dataLoading",function(){return e.fire("loading")}).on("dataLoad",function(){return e.fire("load")});return l.on("click",function(a){var b=a.coverage,d=b.ld.wasGeneratedBy;b.domainType===j?new c(b).addTo(i):d&&d.type===n&&!function(){var a=d.qualifiedUsage,b=a.model.parameterKey,e=a.observation.parameterKey,f=a.model.entity,g=a.observation.entity,j=new h;Promise.all([j.load(f),j.load(g,{eagerload:!0})]).then(function(a){var d=babelHelpers.slicedToArray(a,2),f=d[0],g=d[1];return g.loadDomain().then(function(a){var d=a.axes.get("x").values[0],h=a.axes.get("y").values[0];return f.subsetByValue({x:{start:d,stop:d},y:{start:h,stop:h}},{eagerload:!0}).then(function(a){new c([g,a],{keys:[[e,b]],labels:["Observation","Model"]}).addTo(i)})})})["catch"](function(a){console.log(a)})}()}),l}},{key:"remove",value:function(){var a=this.context.map,b=!0,c=!1,d=void 0;try{for(var e,f=this.layers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;a.hasLayer(g)&&a.removeLayer(g),a.layerControl.removeLayer(g)}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}this.layers=[]}},{key:"isSupported",get:function(){var a=this.cov;return g(a)?!0:a.coverages&&1===a.coverages.length&&g(a.coverages[0])?!0:!1}}]),l}(l),a("default",o),o.type=m}}}),function(){var b=a.get("@@amd-helpers").createDefine();/^u/.test(typeof define)&&function(a){var b=this.require=function(b){return a[b]};this.define=function(c,d){a[c]=a[c]||d(b)}}({}),define("78",[],function(){function a(a){return a.substr(0,3)}function b(a){return a!=Fa?""+a:""}function c(a){return"string"==typeof a}function d(a){return!!a&&"object"==typeof a}function e(a){return a&&a.nodeType}function f(a){return"number"==typeof a}function g(a){return d(a)&&!!a.getDay}function h(a){return!0===a||!1===a}function i(a){var b=typeof a;return"object"==b?!(!a||!a.getDay):"string"==b||"number"==b||h(a)}function j(a){return a}function k(a){return a+1}function l(a,c,d){return b(a).replace(c,d!=Fa?d:"")}function m(a){return l(a,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function n(a){return l(a,/^\s+|\s+$/g)}function o(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c||a,d,a[d]);return a}function p(a,b,c){if(a)for(var d=0;d<a.length;d++)b.call(c||a,a[d],d);return a}function q(a,b,c){var d=[],e=ea(b)?b:function(a){return b!=a};return p(a,function(b,f){e.call(c||a,b,f)&&d.push(b)}),d}function r(a,b,c,d){var e=[];return a(b,function(a,f){fa(a=c.call(d||b,a,f))?p(a,function(a){e.push(a)}):a!=Fa&&e.push(a)}),e}function s(a,b,c){return r(p,a,b,c)}function t(a){var b=0;return o(a,function(){b++}),b}function u(a){var b=[];return o(a,function(a){b.push(a)}),b}function v(a,b,c){var d=[];return p(a,function(e,f){d.push(b.call(c||a,e,f))}),d}function w(a,b){if(fa(a)){var c=wa(b);return M(G(a,0,c.length),c)}return b!=Fa&&a.substr(0,b.length)==b}function x(a,b){if(fa(a)){var c=wa(b);return M(G(a,-c.length),c)||!c.length}return b!=Fa&&a.substr(a.length-b.length)==b}function y(a){var b=a.length;return fa(a)?new va(v(a,function(){return a[--b]})):l(a,/[\s\S]/g,function(){return a.charAt(--b)})}function z(a,b){var c={};return p(a,function(a){c[a]=b}),c}function A(a,b){var c,d=b||{};for(c in a)d[c]=a[c];return d}function B(a,b){for(var c=b,d=0;d<a.length;d++)c=A(a[d],c);return c}function C(a){return ea(a)?a:function(b,c){return a===b?c:void 0}}function D(a,b,c){return b==Fa?c:0>b?Math.max(a.length+b,0):Math.min(a.length,b)}function E(a,b,c,d){b=C(b),d=D(a,d,a.length);for(var e=D(a,c,0);d>e;e++)if((c=b.call(a,a[e],e))!=Fa)return c}function F(a,b,c,d){b=C(b),d=D(a,d,-1);for(var e=D(a,c,a.length-1);e>d;e--)if((c=b.call(a,a[e],e))!=Fa)return c}function G(a,b,c){var d=[];if(a)for(c=D(a,c,a.length),
b=D(a,b,0);c>b;b++)d.push(a[b]);return d}function H(a){return v(a,j)}function I(a){return function(){return new va(O(a,arguments))}}function J(a){var b={};return q(a,function(a){return b[a]?!1:b[a]=1})}function K(a,b){var c=z(b,1);return q(a,function(a){var b=c[a];return c[a]=0,b})}function L(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function M(a,b){var c,d=ea(a)?a():a,e=ea(b)?b():b;return d==e?!0:d==Fa||e==Fa?!1:i(d)||i(e)?g(d)&&g(e)&&+d==+e:fa(d)?d.length==e.length&&!E(d,function(a,b){return M(a,e[b])?void 0:!0}):!fa(e)&&(c=u(d)).length==t(e)&&!E(c,function(a){return M(d[a],e[a])?void 0:!0})}function N(a,b,c){return ea(a)?a.apply(c&&b,v(c||b,j)):void 0}function O(a,b,c){return v(a,function(a){return N(a,b,c)})}function P(a,b,c,d){return function(){return N(a,b,s([c,arguments,d],j))}}function Q(a,b){for(var c=0>b?"-":"",d=(c?-b:b).toFixed(0);d.length<a;)d="0"+d;return c+d}function R(a,b,c){var d,e=0,f=c?b:y(b);return a=(c?a:y(a)).replace(/./g,function(a){return"0"==a?(d=!1,f.charAt(e++)||"0"):"#"==a?(d=!0,f.charAt(e++)||""):d&&!f.charAt(e)?"":a}),c?a:b.substr(0,b.length-e)+y(a)}function S(a,b,c){return b!=Fa&&a?60*parseFloat(a[b]+a[b+1])+parseFloat(a[b]+a[b+2])+c.getTimezoneOffset():0}function T(a){return new Date(+a)}function U(a,b,c){return a["set"+b](a["get"+b]()+c),a}function V(a,b,c){return c==Fa?V(new Date,a,b):U(T(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function W(a,b,c){var d=+b,e=+c,f=e-d;if(0>f)return-W(a,c,b);if(b={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5}[a])return f/b;for(b=a.charAt(0).toUpperCase()+a.substr(1),a=Math.floor(f/{fullYear:31536e6,month:2628e6,date:864e5}[a]-2),d=U(new Date(d),b,a),f=a;1.2*a+4>f;f++)if(+U(d,b,1)>e)return f}function X(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function Y(a){return l(a,/[\x00-\x1f'"\u2028\u2029]/g,X)}function Z(a,b){return a.split(b)}function $(a,b){function c(a,c){var d=[];return e.call(c||a,a,function(a,b){fa(a)?p(a,function(a,c){b.call(a,a,c)}):o(a,function(a,c){b.call(c,a,c)})},b||j,function(){N(d.push,d,arguments)},wa),d.join("")}if(Ma[a])return Ma[a];var d="with(_.isObject(obj)?obj:{}){"+v(Z(a,/{{|}}}?/g),function(a,b){var c,d=n(a),e=l(d,/^{/),d=d==e?"esc(":"";return b%2?(c=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(e))?"each("+(n(c[4])?c[4]:"this")+", function("+c[2]+"){":(c=/^if\b(.*)/.exec(e))?"if("+c[1]+"){":(c=/^else\b\s*(if\b(.*))?/.exec(e))?"}else "+(c[1]?"if("+c[2]+")":"")+"{":(c=/^\/(if)?/.exec(e))?c[1]?"}\n":"});\n":(c=/^(var\s.*)/.exec(e))?c[1]+";":(c=/^#(.*)/.exec(e))?c[1]:(c=/(.*)::\s*(.*)/.exec(e))?"print("+d+'_.formatValue("'+Y(c[2])+'",'+(n(c[1])?c[1]:"this")+(d&&")")+"));\n":"print("+d+(n(e)?e:"this")+(d&&")")+");\n":a?'print("'+Y(a)+'");\n':void 0}).join("")+"}",e=Function("obj","each","esc","print","_",d);return 99<Na.push(c)&&delete Ma[Na.shift()],Ma[a]=c}function _(a){return l(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function aa(a,b){return $(a,_)(b)}function ba(a){return function(b,c){return new va(a(this,b,c))}}function ca(a){return function(b,c,d){return a(this,b,c,d)}}function da(a){return function(b,c,d){return new va(a(b,c,d))}}function ea(a){return"function"==typeof a&&!a.item}function fa(a){return a&&a.length!=Fa&&!c(a)&&!e(a)&&!ea(a)&&a!==ya}function ga(a){return parseFloat(l(a,/^[^\d-]+/))}function ha(a){return a.Nia=a.Nia||++Ba}function ia(a,b){var c,d=[],e={};return sa(a,function(a){sa(b(a),function(a){e[c=ha(a)]||(d.push(a),e[c]=!0)})}),d}function ja(a,b){var c={$position:"absolute",$visibility:"hidden",$display:"block",$height:Fa},d=a.get(c),c=a.set(c).get("clientHeight");return a.set(d),c*b+"px"}function ka(a){Ca?Ca.push(a):setTimeout(a,0)}function la(a,b,c){return pa(a,b,c)[0]}function ma(a,b,c){return a=oa(document.createElement(a)),fa(b)||b!=Fa&&!d(b)?a.add(b):a.set(b).add(c)}function na(a){return r(sa,a,function(a){return fa(a)?na(a):(e(a)&&(a=a.cloneNode(!0),a.removeAttribute&&a.removeAttribute("id")),a)})}function oa(a,b,c){return ea(a)?ka(a):new va(pa(a,b,c))}function pa(a,b,d){function f(a){return fa(a)?r(sa,a,f):a}function g(a){return q(r(sa,a,f),function(a){for(;a=a.parentNode;)if(a==b[0]||d)return a==b[0]})}return b?1!=(b=pa(b)).length?ia(b,function(b){return pa(a,b,d)}):c(a)?1!=e(b[0])?[]:d?g(b[0].querySelectorAll(a)):b[0].querySelectorAll(a):g(a):c(a)?document.querySelectorAll(a):r(sa,a,f)}function qa(a,b){function d(a,b){var c=RegExp("(^|\\s+)"+a+"(?=$|\\s)","i");return function(d){return a?c.test(d[b]):!0}}var g,h,i={},j=i;return ea(a)?a:f(a)?function(b,c){return c==a}:!a||"*"==a||c(a)&&(j=/^([\w-]*)\.?([\w-]*)$/.exec(a))?(g=d(j[1],"tagName"),h=d(j[2],"className"),function(a){return 1==e(a)&&g(a)&&h(a)}):b?function(c){return oa(a,b).find(c)!=Fa}:(oa(a).each(function(a){i[ha(a)]=!0}),function(a){return i[ha(a)]})}function ra(a){var b=qa(a);return function(a){return b(a)?Fa:!0}}function sa(a,b){return fa(a)?p(a,b):a!=Fa&&b(a,0),a}function ta(){this.state=null,this.values=[],this.parent=null}function ua(){var a,b,c=[],e=arguments,f=e.length,g=0,h=0,i=new ta;return i.errHandled=function(){h++,i.parent&&i.parent.errHandled()},a=i.fire=function(a,b){return null==i.state&&null!=a&&(i.state=!!a,i.values=fa(b)?b:[b],setTimeout(function(){p(c,function(a){a()})},0)),i},p(e,function j(b,c){try{b.then?b.then(function(b){(d(b)||ea(b))&&ea(b.then)?j(b,c):(i.values[c]=H(arguments),++g==f&&a(!0,2>f?i.values[c]:i.values))},function(){i.values[c]=H(arguments),a(!1,2>f?i.values[c]:[i.values[c][0],i.values,c])}):b(function(){a(!0,H(arguments))},function(){a(!1,H(arguments))})}catch(e){a(!1,[e,i.values,c])}}),i.stop=function(){return p(e,function(a){a.stop&&a.stop()}),i.stop0&&N(i.stop0)},b=i.then=function(a,b){function e(){try{var c=i.state?a:b;ea(c)?function g(a){try{var b,c=0;if((d(a)||ea(a))&&ea(b=a.then)){if(a===f)throw new TypeError;b.call(a,function(a){c++||g(a)},function(a){c++||f.fire(!1,[a])}),f.stop0=a.stop}else f.fire(!0,[a])}catch(e){if(!c++&&(f.fire(!1,[e]),!h))throw e}}(N(c,xa,i.values)):f.fire(i.state,i.values)}catch(e){if(f.fire(!1,[e]),!h)throw e}}var f=ua();return ea(b)&&i.errHandled(),f.stop0=i.stop,f.parent=i,null!=i.state?setTimeout(e,0):c.push(e),f},i.always=function(a){return b(a,a)},i.error=function(a){return b(0,a)},i}function va(a,b){var c,d,e,f,g,h=0;if(a)for(c=0,d=a.length;d>c;c++)if(e=a[c],b&&fa(e))for(f=0,g=e.length;g>f;f++)this[h++]=e[f];else this[h++]=e;else this[h++]=b;this.length=h,this._=!0}function wa(){return new va(arguments,!0)}var xa,ya=window,za={},Aa={},Ba=1,Ca=/^[ic]/.test(document.readyState)?Fa:[],Da={},Ea=0,Fa=null,Ga=Z("January,February,March,April,May,June,July,August,September,October,November,December",/,/g),Ha=v(Ga,a),Ia=Z("Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",/,/g),Ja=v(Ia,a),Ka={y:["FullYear",j],Y:["FullYear",function(a){return a%100}],M:["Month",k],n:["Month",Ha],N:["Month",Ga],d:["Date",j],m:["Minutes",j],H:["Hours",j],h:["Hours",function(a){return a%12||12}],k:["Hours",k],K:["Hours",function(a){return a%12}],s:["Seconds",j],S:["Milliseconds",j],a:["Hours",Z("am,am,am,am,am,am,am,am,am,am,am,am,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm",/,/g)],w:["Day",Ja],W:["Day",Ia],z:["TimezoneOffset",function(a,b,c){return c?c:(b=0>a?-a:a,(a>0?"-":"+")+Q(2,Math.floor(b/60))+Q(2,b%60))}]},La={y:0,Y:[0,-2e3],M:[1,1],n:[1,Ha],N:[1,Ga],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,Z("am,pm",/,/g)]},Ma={},Na=[];return A({each:ca(p),filter:ba(q),collect:ba(s),map:ba(v),toObject:ca(z),equals:ca(M),sub:ba(G),reverse:ca(y),find:ca(E),findLast:ca(F),startsWith:ca(w),endsWith:ca(x),contains:ca(L),call:ba(O),array:ca(H),unite:ca(I),merge:ca(B),uniq:ba(J),intersection:ba(K),join:function(a){return v(this,j).join(a)},reduce:function(a,b){return p(this,function(c,d){b=a.call(this,b,c,d)}),b},sort:function(a){return new va(v(this,j).sort(a))},remove:function(){sa(this,function(a){a.parentNode.removeChild(a)})},text:function(){return r(sa,this,function(a){return a.textContent}).join("")},trav:function(a,b,c){var d=f(b),e=qa(d?Fa:b),g=d?b:c;return new va(ia(this,function(b){for(var c=[];(b=b[a])&&c.length!=g;)e(b)&&c.push(b);return c}))},next:function(a,b){return this.trav("nextSibling",a,b||1)},up:function(a,b){return this.trav("parentNode",a,b||1)},select:function(a,b){return oa(a,this,b)},is:function(a){return!this.find(ra(a))},only:function(a){return new va(q(this,qa(a)))},not:function(a){return new va(q(this,ra(a)))},get:function(a,b){var d,e,f,g,h=this,i=h[0];return i?c(a)?(d=/^(\W*)(.*)/.exec(l(a,/^%/,"@data-")),e=d[1],f=Aa[e]?Aa[e](this,d[2]):"$"==a?h.get("className"):"$$"==a?h.get("@style"):"$$slide"==a?h.get("$height"):"$$fade"==a||"$$show"==a?"hidden"==h.get("$visibility")||"none"==h.get("$display")?0:"$$fade"==a?isNaN(h.get("$opacity",!0))?1:h.get("$opacity",!0):1:"$"==e?ya.getComputedStyle(i,Fa).getPropertyValue(l(d[2],/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):"@"==e?i.getAttribute(d[2]):i[d[2]],b?ga(f):f):(g={},(fa(a)?sa:o)(a,function(a){g[a]=h.get(a,b)}),g):void 0},set:function(a,b){var d,e,f=this;return b!==xa?(d=/^(\W*)(.*)/.exec(l(l(a,/^\$float$/,"cssFloat"),/^%/,"@data-")),e=d[1],za[e]?za[e](this,d[2],b):"$$fade"==a?this.set({$visibility:b?"visible":"hidden",$opacity:b}):"$$slide"==a?f.set({$visibility:b?"visible":"hidden",$overflow:"hidden",$height:/px/.test(b)?b:function(a,c,d){return ja(oa(d),b)}}):"$$show"==a?b?f.set({$visibility:b?"visible":"hidden",$display:""}).set({$display:function(a){return"none"==a?"block":a}}):f.set({$display:"none"}):"$$"==a?f.set("@style",b):sa(this,function(c,f){var g=ea(b)?b(oa(c).get(a),f,c):b;"$"==e?d[2]?c.style[d[2]]=g:sa(g&&g.split(/\s+/),function(a){var b=l(a,/^[+-]/),d=c.className||"",e=l(d,RegExp("(^|\\s+)"+b+"(?=$|\\s)"));(/^\+/.test(a)||b==a&&d==e)&&(e+=" "+b),c.className=n(e)}):"$$scrollX"==a?c.scroll(g,oa(c).get("$$scrollY")):"$$scrollY"==a?c.scroll(oa(c).get("$$scrollX"),g):"@"==e?g==Fa?c.removeAttribute(d[2]):c.setAttribute(d[2],g):c[d[2]]=g})):c(a)||ea(a)?f.set("$",a):o(a,function(a,b){f.set(a,b)}),f},show:function(){return this.set("$$show",1)},hide:function(){return this.set("$$show",0)},add:function(a,b){return this.each(function(c,d){function f(a){fa(a)?sa(a,f):ea(a)?f(a(c,d)):a!=Fa&&(a=e(a)?a:document.createTextNode(a),g?g.parentNode.insertBefore(a,g.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),g=a)}var g;f(d&&!ea(a)?na(a):a)})},fill:function(a){return this.each(function(a){oa(a.childNodes).remove()}).add(a)},addAfter:function(a){return this.add(a,function(a,b,c){c.insertBefore(a,b.nextSibling)})},addBefore:function(a){return this.add(a,function(a,b,c){c.insertBefore(a,b)})},addFront:function(a){return this.add(a,function(a,b){b.insertBefore(a,b.firstChild)})},replace:function(a){return this.add(a,function(a,b,c){c.replaceChild(a,b)})},clone:ba(na),animate:function(a,b,c){var d,e=ua(),f=this,g=r(sa,this,function(b,d){var e,f=oa(b),g={};return o(e=f.get(a),function(c,e){var h=a[c];g[c]=ea(h)?h(e,d,b):"$$slide"==c?ja(f,h):h}),f.dial(e,g,c)}),h=b||500;return e.stop0=function(){return e.fire(!1),d()},d=oa.loop(function(a){O(g,[a/h]),a>=h&&(d(),e.fire(!0,[f]))}),e},dial:function(a,c,d){function e(a,b){return/^#/.test(a)?parseInt(6<a.length?a.substr(2*b+1,2):(a=a.charAt(b+1))+a,16):ga(a.split(",")[b])}var f=this,g=d||0,h=ea(g)?g:function(a,b,c){return c*(b-a)*(g+(1-g)*c*(3-2*c))+a};return function(d){o(a,function(a,g){var i=c[a],j=0;f.set(a,0>=d?g:d>=1?i:/^#|rgb\(/.test(i)?"rgb("+Math.round(h(e(g,j),e(i,j++),d))+","+Math.round(h(e(g,j),e(i,j++),d))+","+Math.round(h(e(g,j),e(i,j++),d))+")":l(i,/-?[\d.]+/,b(h(ga(g),ga(i),d))))})}},toggle:function(a,b,c,d){var e,f,g=this,h=!1;return b?(g.set(a),function(i){i!==h&&(f=(h=!0===i||!1===i?i:!h)?b:a,c?(e=g.animate(f,e?e.stop():c,d)).then(function(){e=Fa}):g.set(f))}):g.toggle(l(a,/\b(?=\w)/g,"-"),l(a,/\b(?=\w)/g,"+"))},values:function(a){var c=a||{};return this.each(function(a){var d=a.name||a.id,e=b(a.value);if(/form/i.test(a.tagName))for(d=0;d<a.elements.length;d++)oa(a.elements[d]).values(c);else!d||/ox|io/i.test(a.type)&&!a.checked||(c[d]=c[d]==Fa?e:r(sa,[c[d],e],j))}),c},offset:function(){for(var a=this[0],b={x:0,y:0};a;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b},on:function(a,d,e,f,g){return ea(d)?this.on(Fa,a,d,e,f):c(f)?this.on(a,d,e,Fa,f):this.each(function(c,h){sa(a?pa(a,c):c,function(a){sa(b(d).split(/\s/),function(b){function c(b,c,d){var j,l=!g;if(d=g?d:a,g)for(j=qa(g,a);d&&d!=a&&!(l=j(d));)d=d.parentNode;return!l||i!=b||e.apply(oa(d),f||[c,h])&&"?"==k||"|"==k}function d(a){c(i,a,a.target)||(a.preventDefault(),a.stopPropagation())}var i=l(b,/[?|]/g),k=l(b,/[^?|]/g),m=("blur"==i||"focus"==i)&&!!g,n=Ba++;a.addEventListener(i,d,m),a.M||(a.M={}),a.M[n]=c,e.M=r(sa,[e.M,function(){a.removeEventListener(i,d,m),delete a.M[n]}],j)})})})},onOver:function(a,b){var c=this,d=[];return ea(b)?this.on(a,"|mouseover |mouseout",function(a,e){var f=a.relatedTarget||a.toElement,g="mouseout"!=a.type;d[e]===g||!g&&f&&(f==c[e]||oa(f).up(c[e]).length)||(d[e]=g,b.call(this,g,a))}):this.onOver(Fa,a)},onFocus:function(a,b,c){return ea(b)?this.on(a,"|blur",b,[!1],c).on(a,"|focus",b,[!0],c):this.onFocus(Fa,a,b)},onChange:function(a,b,c){return ea(b)?this.on(a,"|input |change |click",function(a,c){var d=this[0],e=/ox|io/i.test(d.type)?d.checked:d.value;d.NiaP!=e&&b.call(this,d.NiaP=e,c)},c):this.onChange(Fa,a,b)},onClick:function(a,b,c,d){return ea(b)?this.on(a,"click",b,c,d):this.onClick(Fa,a,b,c)},trigger:function(a,b){return this.each(function(c){for(var d=!0,e=c;e&&d;)o(e.M,function(e,f){d=d&&f(a,b,c)}),e=e.parentNode})},per:function(a,b){if(ea(a))for(var c=this.length,d=0;c>d;d++)a.call(this,new va(Fa,this[d]),d);else oa(a,this).per(b);return this},ht:function(a,b){var c=2<arguments.length?B(G(arguments,1)):b;return this.set("innerHTML",ea(a)?a(c):/{{/.test(a)?aa(a,c):/^#\S+$/.test(a)?aa(la(a).text,c):a)}},va.prototype),A({request:function(a,c,d,e){e=e||{};var f,g=0,h=ua(),i=d&&d.constructor==e.constructor;try{h.xhr=f=new XMLHttpRequest,h.stop0=function(){f.abort()},i&&(d=r(o,d,function(a,b){return r(sa,b,function(b){return encodeURIComponent(a)+(b!=Fa?"="+encodeURIComponent(b):"")})}).join("&")),d==Fa||/post/i.test(a)||(c+="?"+d,d=Fa),f.open(a,c,!0,e.user,e.pass),i&&/post/i.test(a)&&f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o(e.headers,function(a,b){f.setRequestHeader(a,b)}),o(e.xhr,function(a,b){f[a]=b}),f.onreadystatechange=function(){4!=f.readyState||g++||(200<=f.status&&300>f.status?h.fire(!0,[f.responseText,f]):h.fire(!1,[f.status,f.responseText,f]))},f.send(d)}catch(j){g||h.fire(!1,[0,Fa,b(j)])}return h},toJSON:JSON.stringify,parseJSON:JSON.parse,ready:ka,loop:function(a){function b(a){o(Da,function(b,c){c(a)}),Ea&&g(b)}function c(){return Da[f]&&(delete Da[f],Ea--),e}var d,e=0,f=Ba++,g=ya.requestAnimationFrame||function(a){setTimeout(function(){a(+new Date)},33)};return Da[f]=function(b){d=d||b,a(e=b-d,c)},Ea++||g(b),c},off:function(a){O(a.M),a.M=Fa},setCookie:function(a,b,c,e){document.cookie=a+"="+(e?b:escape(b))+(c?"; expires="+(d(c)?c:new Date(+new Date+864e5*c)).toUTCString():"")},getCookie:function(a,b){var c,d=(c=RegExp("(^|;)\\s*"+a+"=([^;]*)").exec(document.cookie))&&c[2];return b?d:d&&unescape(d)},wait:function(a,b){var c=ua(),d=setTimeout(function(){c.fire(!0,b)},a);return c.stop0=function(){c.fire(!1),clearTimeout(d)},c}},oa),A({filter:da(q),collect:da(s),map:da(v),sub:da(G),reverse:y,each:p,toObject:z,find:E,findLast:F,contains:L,startsWith:w,endsWith:x,equals:M,call:da(O),array:H,unite:I,merge:B,uniq:da(J),intersection:da(K),keys:da(u),values:da(function(a,b){var c=[];return b?p(b,function(b){c.push(a[b])}):o(a,function(a,b){c.push(b)}),c}),copyObj:A,extend:function(a){return B(G(arguments,1),a)},range:function(a,b){for(var c=[],d=b==Fa?a:b,e=b!=Fa?a:0;d>e;e++)c.push(e);return new va(c)},bind:P,partial:function(a,b,c){return P(a,this,b,c)},eachObj:o,mapObj:function(a,b,c){var d={};return o(a,function(e,f){d[e]=b.call(c||a,e,f)}),d},filterObj:function(a,b,c){var d={};return o(a,function(e,f){b.call(c||a,e,f)&&(d[e]=f)}),d},isList:fa,isFunction:ea,isObject:d,isNumber:f,isBool:h,isDate:g,isValue:i,isString:c,toString:b,dateClone:T,dateAdd:V,dateDiff:W,dateMidnight:function(a){return a=a||new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate())},pad:Q,formatValue:function(a,d){var e,h,i=l(a,/^\?/);return g(d)?((h=/^\[(([+-])(\d\d)(\d\d))\]\s*(.*)/.exec(i))&&(e=h[1],d=V(d,"minutes",S(h,2,d)),i=h[5]),l(i,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(a,b,f,g){return(b=Ka[b])&&(a=d["get"+b[0]](),g=g&&g.split(","),a=fa(b[1])?(g||b[1])[a]:b[1](a,g,e),a==Fa||c(a)||(a=Q(f.length+1,a))),a})):E(i.split(/\s*\|\s*/),function(a){var c,e;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){if(a=d,e=+c[3],(isNaN(e)||!f(a))&&(a=a==Fa?"null":b(a),e=c[3]),c[1]){if(!c[2]&&a==e||"<"==c[1]&&a>e||">"==c[1]&&e>a)return Fa}else if(a!=e)return Fa;c=c[4]}else c=a;return f(d)?c.replace(/[0#](.*[0#])?/,function(a){var b,c=/^([^.]+)(\.)([^.]+)$/.exec(a)||/^([^,]+)(,)([^,]+)$/.exec(a),e=0>d?"-":"",f=/(\d+)(\.(\d+))?/.exec((e?-d:d).toFixed(c?c[3].length:0));return a=c?c[1]:a,b=c?R(c[3],l(f[3],/0+$/),!0):"",(e?"-":"")+("#"==a?f[1]:R(a,f[1]))+(b.length?c[2]:"")+b}):c})},parseDate:function(a,b){var c,d,e,f,g,h,i,j,k,o={},p=1,q=l(a,/^\?/);if(q!=a&&!n(b))return Fa;if((e=/^\[([+-])(\d\d)(\d\d)\]\s*(.*)/.exec(q))&&(c=e,q=e[4]),!(e=RegExp(q.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,e){return/[dmhkyhs]/i.test(b)?(o[p++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(d=p,p+=3,"([+-])(\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(o[p++]=[b,e&&e.split(",")],"([a-zA-Z\\u0080-\\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\\u0080-\\u1fff]+":/\s/.test(b)?"\\s+":m(a)})).exec(b)))return xa;for(q=[0,0,0,0,0,0,0],f=1;p>f;f++)if(g=e[f],h=o[f],fa(h)){if(i=h[0],j=La[i],k=j[0],h=E(h[1]||j[1],function(a,b){return w(g.toLowerCase(),a.toLowerCase())?b:void 0}),h==Fa)return xa;q[k]="a"==i?q[k]+12*h:h}else h&&(i=parseFloat(g),j=La[h],fa(j)?q[j[0]]+=i-j[1]:q[j]+=i);return q=new Date(q[0],q[1],q[2],q[3],q[4],q[5],q[6]),V(q,"minutes",-S(c,1,q)-S(e,d,q))},parseNumber:function(a,b){var c=l(a,/^\?/);return c==a||n(b)?(c=/(^|[^0#.,])(,|[0#.]*,[0#]+|[0#]+\.[0#]+\.[0#.,]*)($|[^0#.,])/.test(c)?",":".",c=parseFloat(l(l(l(b,","==c?/\./g:/,/g),c,"."),/^[^\d-]*(-?\d)/,"$1")),isNaN(c)?xa:c):Fa},trim:n,isEmpty:function(a,b){return a==Fa||!a.length||b&&/^\s*$/.test(a)},escapeRegExp:m,escapeHtml:_,format:function(a,b,c){return $(a,c)(b)},template:$,formatHtml:aa,promise:ua},wa),document.addEventListener("DOMContentLoaded",function(){O(Ca),Ca=Fa},!1),{HTML:function(){var a=ma("div");return wa(N(a.ht,a,arguments)[0].childNodes)},_:wa,$:oa,$$:la,EE:ma,M:va,getter:Aa,setter:za}}),b()}(),function(){var b=a.get("@@amd-helpers").createDefine();define("8",["78"],function(a){return a}),b()}(),a.register("79",["8","7a"],function(a){"use strict";function b(a){return c(a).then(d)}function c(a){var b=document.createElement("a");b.href=a;var c=b.username,d=b.password;if(c){var e=/^(https?:\/\/)(.*)@(.*)/.exec(a);a=e[1]+e[3]}var f=void 0;return f=a.startsWith("blob:")||-1!==a.indexOf("GetCapabilities")?a:a+"?service=wms&version=1.1.1&request=GetCapabilities",new Promise(function(b,e){var g=new XMLHttpRequest;if(g.open("GET",f),g.overrideMimeType("text/xml"),c){var h=c+":"+d;g.setRequestHeader("Authorization","Basic "+btoa(h))}g.addEventListener("load",function(){var a=g.responseXML;b(a)}),g.addEventListener("error",function(){e(new Error("Network error loading resource at "+a))}),g.send()})}function d(a){a=a.documentElement;var b=[];return e("Layer",a).each(function(a){if("1"===e(a).get("@queryable")){var c=e("Name",a,!0).text(),d=e("Title",a,!0).text();b.push({name:c,title:d})}}),b}var e,f,g;return{setters:[function(a){e=a.$},function(a){f=a["default"]}],execute:function(){g=function(a){function c(a){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,a),this.label="Web Map Service",this.shortLabel="WMS",this.mediaTypes=["application/wms+xml"]}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"doLoad",value:function(a){return b(a).then(function(b){return{layers:b,url:a}})}},{key:"getMetadata",value:function(a){return{format:this.label,content:a.layers.length+" layers"}}}]),c}(f),a("default",g)}}}),a.register("33",["9","7a"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.loadJSON},function(a){c=a["default"]}],execute:function(){d=function(a){function c(a){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,a),this.label="Category Remapping Definition in JSON-LD",this.shortLabel="CatRemap",this.mediaTypes=['application/ld+json;profile="http://purl.org/voc/cpm_catremap"']}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"doLoad",value:function(a){return b(a,this.mediaTypes)}},{key:"getMetadata",value:function(a){return{format:this.label,content:"1 Mapping"}}}]),c}(c),a("default",d)}}}),a.register("22",["9","7a"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.loadJSON},function(a){c=a["default"]}],execute:function(){d=function(a){function c(a){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,a),this.label="GeoJSON",this.shortLabel=this.label,this.mediaTypes=["application/vnd.geo+json"]}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"doLoad",value:function(a){return b(a,this.mediaTypes)}},{key:"getMetadata",value:function(a){return{format:this.label,content:a.type}}}]),c}(c),a("default",d)}}}),a.register("7b",["7c","7d","1a"],function(a){"use strict";var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a["default"]}],execute:function(){e=function(a){function d(a){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a),this.label="CoverageCBOR",this.shortLabel="CovCBOR",this.mediaTypes=["application/prs.coverage+cbor"]}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"doLoad",value:function(a){return"object"==typeof a&&a.loadDomain?Promise.resolve(a):b.read(a).then(function(a){return c.wrap(a,{loader:b.read})})}}]),d}(d),a("default",e)}}}),a.register("7e",[],function(a){"use strict";function b(a,b){if(!c(a,b))throw new Error("'"+b+"' is not a longitude axis");var d=a.axes.get(b).values,e=d[0],f=d[d.length-1];if(e>f){var g=[f,e];e=g[0],f=g[1]}var h=(f+e)/2,i=h-180,j=h+180;return function(a){return a>=i&&j>=a?a:((a-i)%360+360)%360+i}}function c(a,b){var c=e(a,b);if(!c)return!1;var d=c.system.id;if(-1===j.indexOf(d))return!1;var f=c.components.indexOf(b),g=k[d]===f;return g}function d(a,b){var c=a.axes.get(b).values[0];return"string"!=typeof c?!1:!isNaN(new Date(c).getTime())}function e(a,b){var c=a.referencing.find(function(a){return-1!==a.components.indexOf(b)});return c}var f,g,h,i,j,k,l;return a("getLongitudeWrapper",b),a("isLongitudeAxis",c),a("isISODateAxis",d),{setters:[],execute:function(){f="http://www.opengis.net/def/crs/",g=f+"EPSG/0/4979",h=f+"EPSG/0/4326",i=f+"OGC/1.3/CRS84",j=[g,h,i],l={},babelHelpers.defineProperty(l,g,1),babelHelpers.defineProperty(l,h,1),babelHelpers.defineProperty(l,i,0),k=l}}}),a.register("7f",[],function(a){"use strict";function b(a){var b=Object.create(Object.getPrototypeOf(a));for(var c in a)b[c]=a[c];return b}function c(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;b[h]=a[h]}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}return a("shallowcopy",b),a("mergeInto",c),{setters:[],execute:function(){}}}),a.register("80",[],function(a){"use strict";function b(a,b){if(0===a.length)throw new Error("Array must have at least one element");var c=-1,d=a.length,e=1===a.length||a[0]<a[1];if(e)for(;d-c>1;){var f=Math.round((c+d)/2);a[f]<=b?c=f:d=f}else for(;d-c>1;){var f=Math.round((c+d)/2);a[f]>=b?c=f:d=f}return a[c]===b&&(d=c),-1===c&&(c=d),d===a.length&&(d=c),[c,d]}function c(a,c){var d=b(a,c),e=d[0],f=d[1];return Math.abs(c-a[e])<=Math.abs(c-a[f])?e:f}return a("indicesOfNearest",b),a("indexOfNearest",c),{setters:[],execute:function(){}}}),a.registerDynamic("81",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(a,d){"object"==typeof b?c.exports=d():"function"==typeof define&&define.amd?define([],d):a.urltemplate=d()}(this,function(){function a(){}return a.prototype.encodeReserved=function(a){return a.split(/(%[0-9A-Fa-f]{2})/g).map(function(a){return/%[0-9A-Fa-f]/.test(a)||(a=encodeURI(a)),a}).join("")},a.prototype.encodeValue=function(a,b,c){return b="+"===a||"#"===a?this.encodeReserved(b):encodeURIComponent(b),c?encodeURIComponent(c)+"="+b:b},a.prototype.isDefined=function(a){return void 0!==a&&null!==a},a.prototype.isKeyOperator=function(a){return";"===a||"&"===a||"?"===a},a.prototype.getValues=function(a,b,c,d){var e=a[c],f=[];if(this.isDefined(e)&&""!==e)if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)e=e.toString(),d&&"*"!==d&&(e=e.substring(0,parseInt(d,10))),f.push(this.encodeValue(b,e,this.isKeyOperator(b)?c:null));else if("*"===d)Array.isArray(e)?e.filter(this.isDefined).forEach(function(a){f.push(this.encodeValue(b,a,this.isKeyOperator(b)?c:null))},this):Object.keys(e).forEach(function(a){this.isDefined(e[a])&&f.push(this.encodeValue(b,e[a],a))},this);else{var g=[];Array.isArray(e)?e.filter(this.isDefined).forEach(function(a){g.push(this.encodeValue(b,a))},this):Object.keys(e).forEach(function(a){this.isDefined(e[a])&&(g.push(encodeURIComponent(a)),g.push(this.encodeValue(b,e[a].toString())))},this),this.isKeyOperator(b)?f.push(encodeURIComponent(c)+"="+g.join(",")):0!==g.length&&f.push(g.join(","))}else";"===b?f.push(encodeURIComponent(c)):""!==e||"&"!==b&&"?"!==b?""===e&&f.push(""):f.push(encodeURIComponent(c)+"=");return f},a.prototype.parse=function(a){var b=this,c=["+","#",".","/",";","?","&"];return{expand:function(d){return a.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(a,e,f){if(e){var g=null,h=[];if(-1!==c.indexOf(e.charAt(0))&&(g=e.charAt(0),e=e.substr(1)),e.split(/,/g).forEach(function(a){var c=/([^:\*]*)(?::(\d+)|(\*))?/.exec(a);h.push.apply(h,b.getValues(d,g,c[1],c[2]||c[3]))}),g&&"+"!==g){var i=",";return"?"===g?i="&":"#"!==g&&(i=g),(0!==h.length?g:"")+h.join(i)}return h.join(",")}return b.encodeReserved(f)})}}},new a}),d.define=e,c.exports}),a.registerDynamic("82",["81"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("81"),d.define=e,c.exports}),a.register("83",["82","84"],function(a){"use strict";function b(a){return a.id?h.frame(a.ld,{"@context":q,id:a.id},t).then(function(a){return h.compact(a,a["@context"],t)}).then(function(a){return new u(a)}):Promise.resolve(new u)}function c(a,b){if(Object.keys(a).length>0)throw new Error(b)}function d(a){return a.map(e).join(",")}function e(a){var b=a.toString();return-1!==b.indexOf("e")&&(b=a.toFixed(20)),b}function f(a,b){var c=void 0;return"number"==typeof b?c=e(b):b.start!==b.stop||b.step&&1!==b.step?(c=e(b.start)+":"+e(stop),b.step&&(c+=":"+e(b.step))):c=e(b.start),a+"["+c+"]"}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return a("discover",b),{setters:[function(a){g=a["default"]},function(a){h=a.promises,i=a["default"]}],execute:function(){j="PartialCollectionView",k="IriTemplate",l="http://coverageapi.org/ns#",m=l+"api",n="http://a9.com/-/opensearch/extensions/geo/1.0/",o="http://a9.com/-/opensearch/extensions/time/1.0/",p={filterBbox:n+"box",filterTimeStart:o+"start",filterTimeEnd:o+"end",filterVerticalStart:l+"verticalStart",filterVerticalEnd:l+"verticalEnd",subsetBbox:l+"subsetBbox",subsetTimeStart:l+"subsetTimeStart",subsetTimeEnd:l+"subsetTimeEnd",subsetVerticalStart:l+"subsetVerticalStart",subsetVerticalEnd:l+"subsetVerticalEnd",subsetVerticalTarget:l+"subsetVerticalTarget",subsetIndex:l+"subsetIndex"},q=[{hydra:"http://www.w3.org/ns/hydra/core#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#",vs:"http://www.w3.org/2003/06/sw-vocab-status/ns#",dc:"http://purl.org/dc/terms/",cc:"http://creativecommons.org/ns#",property:{"@id":"hydra:property","@type":"@vocab"},required:"hydra:required",view:{"@id":"hydra:view","@type":"@id"},PartialCollectionView:"hydra:PartialCollectionView",totalItems:"hydra:totalItems",first:{"@id":"hydra:first","@type":"@id"},last:{"@id":"hydra:last","@type":"@id"},next:{"@id":"hydra:next","@type":"@id"},previous:{"@id":"hydra:previous","@type":"@id"},IriTemplate:"hydra:IriTemplate",template:"hydra:template",mapping:"hydra:mapping",IriTemplateMapping:"hydra:IriTemplateMapping",variable:"hydra:variable"},{id:"@id",type:"@type",property:{"@id":"hydra:property"},api:m}],r={"https://rawgit.com/reading-escience-centre/coveragejson/master/contexts/coveragejson-base.jsonld":{"@context":{id:"@id",type:"@type"}}},s=function(a){return a in r?Promise.resolve({contextUrl:null,document:r[a],documentUrl:a}):i.documentLoader(a)},t={documentLoader:s},u=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(babelHelpers.classCallCheck(this,a),this.supportedUrlProps=new Map,b.view&&b.view.type===j&&(this.isPaged=!0,this.paging=b.view,this.paging.total=b.totalItems),b.api&&b.api.type===k){this.hasUrlTemplate=!0,this.urlTemplate=b.api;var c=b.api.mapping,d=!0,e=!1,f=void 0;try{for(var g,h=c[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,l=i.property.id;for(var m in p)p[m]===l&&this.supportedUrlProps.set(l,i.variable)}}catch(n){e=!0,f=n}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}}this._createCapabilities()}return babelHelpers.createClass(a,[{key:"_createCapabilities",value:function(){var a={filter:{},subset:{}},b=function(){return{start:!0,stop:!0}};this.supportsBboxFiltering&&(a.filter.x={start:!0,stop:!0,dependency:["y"]},a.filter.y={start:!0,stop:!0,dependency:["x"]}),this.supportsTimeFiltering&&(a.filter.time=b()),this.supportsVerticalFiltering&&(a.filter.vertical=b()),this.supportsBboxSubsetting&&(a.subset.x={start:!0,stop:!0,dependency:["y"]},a.subset.y={start:!0,stop:!0,dependency:["x"]}),this.supportsTimeSubsetting&&(a.subset.time=b()),this.supportsVerticalSubsetting&&(a.subset.vertical=b()),this.supportsVerticalTargetSubsetting&&(a.subset.vertical||(a.subset.vertical={}),a.subset.vertical.target=!0),this.supportsIndexSubsetting&&(a.subset.index={start:!0,stop:!0,step:!0}),this.capabilities=a}},{key:"_getFilterTemplateVars",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b={};if(a.time){if(!this.supportsTimeFiltering)throw new Error("Time filtering not supported!");var f=a.time.start,g=a.time.stop;b[this.supportedUrlProps.get(p.filterTimeStart)]=f,b[this.supportedUrlProps.get(p.filterTimeEnd)]=g,delete a.time}if(a.vertical){if(!this.supportsVerticalFiltering)throw new Error("Vertical filtering not supported!");var h=e(a.vertical.start),i=e(a.vertical.stop);b[this.supportedUrlProps.get(p.filterVerticalStart)]=h,b[this.supportedUrlProps.get(p.filterVerticalEnd)]=i,delete a.vertical}if(a.x){if(!this.supportsBboxFiltering)throw new Error("BBOX filtering not supported!");var j=d([a.x.start,a.y.start,a.x.stop,a.y.stop]);b[this.supportedUrlProps.get(p.filterBbox)]=j,delete a.x,delete a.y}return c(a,"Unrecognized filter options"),b}},{key:"_getSubsetTemplateVars",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b={};if(a.time){if(!this.supportsTimeSubsetting)throw new Error("Time subsetting not supported!");var g=a.time.start,h=a.time.stop;b[this.supportedUrlProps.get(p.subsetTimeStart)]=g,b[this.supportedUrlProps.get(p.subsetTimeEnd)]=h,delete a.time}if(a.x){if(!this.supportsBboxSubsetting)throw new Error("BBOX subsetting not supported!");var i=d([a.x.start,a.y.start,a.x.stop,a.y.stop]);b[this.supportedUrlProps.get(p.subsetBbox)]=i,delete a.x,delete a.y}if(a.vertical){if(a.vertical.target){
if(!this.supportsVerticalTargetSubsetting)throw new Error("vertical target subsetting not supported!");var j=e(a.vertical.target);b[this.supportedUrlProps.get(p.subsetVerticalTarget)]=j}if(a.vertical.start){if(!this.supportsVerticalSubsetting)throw new Error("vertical subsetting not supported!");var k=e(a.vertical.start),l=e(a.vertical.stop);b[this.supportedUrlProps.get(p.subsetVerticalStart)]=k,b[this.supportedUrlProps.get(p.subsetVerticalEnd)]=l}delete a.vertical}if(a.index){if(!this.supportsIndexSubsetting)throw new Error("index subsetting not supported!");var m=[],n=!0,o=!1,q=void 0;try{for(var r,s=Object.keys(a.index)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var t=r.value;m.push(f(t,a.index[t]))}}catch(u){o=!0,q=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw q}}b[this.supportedUrlProps.get(p.subsetIndex)]=m}return c(a,"Unrecognized subset options"),b}},{key:"getUrl",value:function(a){a=JSON.parse(JSON.stringify(a));var b=this._getSubsetTemplateVars(a.subset),c=this._getFilterTemplateVars(a.filter),d=b;for(var e in c)d[e]=c[e];var f=g.parse(this.urlTemplate.template).expand(d);return f}},{key:"supportsBboxFiltering",get:function(){return this.supportedUrlProps.has(p.filterBbox)}},{key:"supportsBboxSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetBbox)}},{key:"supportsTimeFiltering",get:function(){return this.supportedUrlProps.has(p.filterTimeStart)&&this.supportedUrlProps.has(p.filterTimeEnd)}},{key:"supportsTimeSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetTimeStart)&&this.supportedUrlProps.has(p.subsetTimeEnd)}},{key:"supportsVerticalFiltering",get:function(){return this.supportedUrlProps.has(p.filterVerticalStart)&&this.supportedUrlProps.has(p.filterVerticalEnd)}},{key:"supportsVerticalSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetVerticalStart)&&this.supportedUrlProps.has(p.subsetVerticalEnd)}},{key:"supportsVerticalTargetSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetVerticalTarget)}},{key:"supportsIndexSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetIndex)}}]),a}(),a("API",u)}}}),a.register("85",["80","83","7f","7e"],function(a){"use strict";function b(a,b){if("function"!=typeof b.loader)throw new Error("options.loader must be a function");return a.type===w?c(a,b):a.type===v?d(a,b):a}function c(a,c){return p.discover(a).then(function(d){var e=q(a);return e.query=function(){var b=a.query();return new x(b,e,d,c)},d.isPaged&&!function(){var a=c.loader,f=function(d){return d?{load:function(e){return a(d,e).then(function(a){return b(a,c)})}}:void 0};e.paging={total:d.paging.total,previous:f(d.paging.previous),next:f(d.paging.next),first:f(d.paging.first),last:f(d.paging.last)}}(),e})}function d(a,b){return p.discover(a).then(function(c){var d=q(a);return d.subsetByIndex=e(a,d,c,b),d.subsetByValue=f(a,d,c,b),d})}function e(a,c,d,e){return function(f){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return a.loadDomain().then(function(j){if(f=n(f),!m(j,f))return c;if(a.loaded)return a.subsetByIndex(f,i);var k=d.capabilities.subset,l=g(j),o={subset:{}},p={};if(k.index)o.subset.index=f;else{var q=!0,r=!1,s=void 0;try{for(var t,u=Object.keys(f)[Symbol.iterator]();!(q=(t=u.next()).done);q=!0){var v=t.value,w=!1,x=f[v],y=k[l[v]];if(y){if("object"!=typeof x){if(y.start&&y.stop){var z=j.axes.get(v).values[x];x={start:z,stop:z},w=!0}}else if(!x.step&&y.start&&y.stop){var A=j.axes.get(v).values[x.start],B=j.axes.get(v).values[x.stop];x={start:A,stop:B},w=!0}}else;w?o.subset[l[v]]=x:p[v]=x}}catch(C){r=!0,s=C}finally{try{!q&&u["return"]&&u["return"]()}finally{if(r)throw s}}}if(h(o.subset,p,k,l),0===Object.keys(o.subset).length)return a.subsetByIndex(f,i);var D=d.getUrl(o);return e.loader(D,i).then(function(a){return Object.keys(p).length>0?a.subsetByIndex(p,i):b(a,e)})})}}function f(a,c,d,e){return function(f){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return a.loadDomain().then(function(p){if(f=n(f),!m(p,f))return c;if(a.loaded)return a.subsetByValue(f,o);var q=d.capabilities.subset,r=g(p),t={subset:{}},u={},v=!0,w=!1,x=void 0;try{for(var y,z=Object.keys(f)[Symbol.iterator]();!(v=(y=z.next()).done);v=!0){var A=y.value,B=!1,C=f[A],D=q[r[A]],E=s(p,A);if(D){if("object"!=typeof C){if(D.identity)B=!0;else if(D.start&&D.stop){var F=j(p,A,C.target),G=p.axes.get(A).values[F];E?new Date(G).getTime()===new Date(C).getTime()&&(C={start:C,stop:C},B=!0):G===C&&(C={start:C,stop:C},B=!0)}}else if("target"in C){if(D.target)B=!0;else if(D.start&&D.stop){var H=l(p,A,C.target),I=babelHelpers.slicedToArray(H,3),J=I[0],K=I[1],L=I[2],M=i(J,K),N=babelHelpers.slicedToArray(M,2),O=N[0],P=N[1];if(L>=O&&P>=L){var F=j(p,A,C.target),G=p.axes.get(A).values[F];C={start:G,stop:G},B=!0}}}else if(B=D.start&&D.stop){var Q=l(p,A,C.start,C.stop),R=babelHelpers.slicedToArray(Q,4),J=R[0],K=R[1],S=R[2],T=R[3],U=i(J,K),V=babelHelpers.slicedToArray(U,2),O=V[0],P=V[1];if(O>T||S>P)throw new Error("start or stop must be inside the axis extent");var W=k(J,S),X=k(J,T),Y=p.axes.get(A).values;C={start:Y[W],stop:Y[X]}}}else;B?t.subset[r[A]]=C:u[A]=C}}catch(Z){w=!0,x=Z}finally{try{!v&&z["return"]&&z["return"]()}finally{if(w)throw x}}if(h(t.subset,u,q,r),0===Object.keys(t.subset).length)return a.subsetByValue(f,o);var $=d.getUrl(t);return e.loader($,o).then(function(a){return Object.keys(u).length>0?a.subsetByValue(u,o):b(a,e)})})}}function g(a){var b={},c=a.referencing,d=!0,e=!1,f=void 0;try{for(var g,h=function(){var a=g.value,d=void 0,e=c.filter(function(b){return-1!==b.components.indexOf(a)});if(1===e.length){var f=e[0],h=f.components,i=f.system;if("TemporalRS"===i.type)d="time";else if("VerticalCRS"===i.type)d="vertical";else if("GeodeticCRS"===i.type||"ProjectedCRS"===i.type){var j=h.indexOf(a);0===j?d="x":1===j?d="y":2===j&&(d="vertical")}}b[a]=d},i=a.axes.keys()[Symbol.iterator]();!(d=(g=i.next()).done);d=!0)h()}catch(j){e=!0,f=j}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw f}}return b}function h(a,b,c,d){var e=!0,f=!1,g=void 0;try{for(var h,i=function(){var e=h.value,f=c[e].dependency;if(f&&f.some(function(b){return!a[b]})){var g=Object.keys(d).filter(function(a){return d[a]===e})[0];b[g]=a[e],delete a[e]}},j=Object.keys(a)[Symbol.iterator]();!(e=(h=j.next()).done);e=!0)i()}catch(k){f=!0,g=k}finally{try{!e&&j["return"]&&j["return"]()}finally{if(f)throw g}}}function i(a,b){var c=void 0,d=void 0;if(b?(c=b.get(0)[0],d=b.get(a.length-1)[1]):(c=a[0],d=a[a.length-1]),c>d){var e=[d,c];c=e[0],d=e[1]}if(!b&&a.length>1){var f=Math.abs(a[0]-a[1])/2,g=[c-f,d+f];c=g[0],d=g[1]}return[c,d]}function j(a,b,c){var d=l(a,b,c),e=babelHelpers.slicedToArray(d,3),f=e[0],g=e[2];return k(f,g)}function k(a,b){var c=o.indicesOfNearest(a,b),d=babelHelpers.slicedToArray(c,2),e=d[0],f=d[1],g=Math.abs(b-a[e])<=Math.abs(b-a[f])?e:f;return g}function l(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;c>e;e++)d[e-2]=arguments[e];var f=a.axes.get(b).values,g=a.axes.get(b).bounds;if(d=[].concat(babelHelpers.toConsumableArray(d)),s(a,b))!function(){var a=function(a){return new Date(a).getTime()};d=d.map(a),f=f.map(a),g&&!function(){var b=g;g={get:function(c){return[a(b.get(c)[0]),a(b.get(c)[1])]}}}()}();else if(t(a,b)){var h=u(a,b);d=d.map(h)}return[f,g].concat(babelHelpers.toConsumableArray(d))}function m(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(b)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=a.axes.get(h).values.length;if(i>1)return!0}}catch(j){d=!0,e=j}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return!1}function n(a){var b=q(a),c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;(void 0===a[h]||null===a[h])&&delete b[h]}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return b}var o,p,q,r,s,t,u,v,w,x;return a("wrap",b),{setters:[function(a){o=a},function(a){p=a},function(a){q=a.shallowcopy,r=a.mergeInto},function(a){s=a.isISODateAxis,t=a.isLongitudeAxis,u=a.getLongitudeWrapper}],execute:function(){v="Coverage",w=v+"Collection",x=function(){function a(b,c,d,e){babelHelpers.classCallCheck(this,a),this._query=b,this._collection=c,this._api=d,this._wrapOptions=e,this._filter={},this._subset={}}return babelHelpers.createClass(a,[{key:"filter",value:function(a){return this._query.filter(a),r(a,this._filter),this}},{key:"subset",value:function(a){return this._query.subset(a),r(a,this._subset),this}},{key:"execute",value:function(a){var b=this,c=this._collection.domainTemplate;return c?this._doExecute(c):this._collection.coverages.length>0?this._collection.coverages[0].loadDomain().then(function(c){return b._doExecute(a,c)}):this._query.execute(a)}},{key:"_doExecute",value:function(a,c){var d=this,e=this._wrapOptions.loader,f=this._api.capabilities.filter,i=this._api.capabilities.subset,j=g(c),k={filter:{},subset:{}},l={},m={},n=!0,o=!1,p=void 0;try{for(var q,r=Object.keys(this._filter)[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var s=q.value,t=this._filter[s],u=f[j[s]];u&&u.start&&u.stop?k.filter[j[s]]=t:l[s]=t}}catch(v){o=!0,p=v}finally{try{!n&&r["return"]&&r["return"]()}finally{if(o)throw p}}var w=!0,x=!1,y=void 0;try{for(var z,A=Object.keys(this._subset)[Symbol.iterator]();!(w=(z=A.next()).done);w=!0){var s=z.value,t=this._subset[s],u=i[j[s]],B=!1;u&&("object"!=typeof t&&u.identity?B=!0:"target"in t&&u.target?B=!0:"start"in t&&"stop"in t&&u.start&&u.stop&&(B=!0)),B?k.subset[j[s]]=t:m[s]=t}}catch(v){x=!0,y=v}finally{try{!w&&A["return"]&&A["return"]()}finally{if(x)throw y}}if(h(k.filter,l,f,j),h(k.subset,m,i,j),0===Object.keys(k.filter).length&&0===Object.keys(k.subset).length)return this._query.execute(a);var C=this._api.getUrl(k);return e(C,a).then(function(a){return Object.keys(m).length>0||Object.keys(l).length>0?a.query().filter(l).subset(m).execute():b(a,d._wrapOptions)})}}]),a}()}}}),a.register("7d",["85"],function(a){"use strict";return{setters:[function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);c["default"]=b["default"],a(c)}],execute:function(){}}}),a.registerDynamic("86",["87","88","89","29"],!0,function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(b)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=b[h];if(!a.axes.has(h))throw new Error('Axis "'+h+'" does not exist');var k=a.axes.get(h),l=k.values,m=l[0],n=l[l.length-1];if("number"!=typeof m&&"string"!=typeof m)throw new Error("Can only filter primitive axis values");var q=i.start,r=i.stop;if(p.isISODateAxis(a,h)){var s=[o.asTime(m),o.asTime(n)][r]=[o.asTime(q),o.asTime(r)],t=j(s,2);m=t[0],n=t[1]}else if(p.isLongitudeAxis(a,h))var u=p.getLongitudeWrapper(a,h)[r]=[u(q),u(r)];if(m>n){var v=[n,m];m=v[0],n=v[1]}if(q>n||m>r)return!1}}catch(w){d=!0,e=w}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return!0}function g(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;b[h]=a[h]}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}var h=this,i=h.define;h.define=void 0;var j=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0}),b.CollectionQuery=void 0;var l=a("87"),m=a("88"),n=d(m),o=a("89"),p=a("29"),q=function(){function a(b){e(this,a),this.type=l.COVERAGECOLLECTION,this.ld={},this._exposeLd(b),this.id=b.id,this.profiles=[];var c=b.profile,d=void 0;c&&("http"!==c.substr(0,4)&&(o.endsWith(c,l.COVERAGECOLLECTION)&&(d=c.substr(0,c.length-l.COVERAGECOLLECTION.length)),c=o.PREFIX+c),this.profiles.push(c)),d||(d=b.domainType),d&&"http"!==d.substr(0,4)&&(d=o.PREFIX+d),this.domainType=d,!c&&d&&(c=d+l.COVERAGECOLLECTION,this.profiles.push(c));var f=[],g=b.parameters?b.parameters:{},h=!0,i=!1,j=void 0;try{for(var k,p=Object.keys(g)[Symbol.iterator]();!(h=(k=p.next()).done);h=!0){var q=k.value,r=g[q];r.id||(r.id=Math.round((new Date).getTime()*Math.random()).toString())}}catch(s){i=!0,j=s}finally{try{!h&&p["return"]&&p["return"]()}finally{if(i)throw j}}var t={};b.referencing&&(t.referencing=b.referencing);var u=!0,v=!1,w=void 0;try{for(var x,y=b.coverages[Symbol.iterator]();!(u=(x=y.next()).done);u=!0){var z=x.value;z.domainProfile||(z.domainProfile=d),z.parameters||(z.parameters={});var A=!0,B=!1,C=void 0;try{for(var D,E=Object.keys(g)[Symbol.iterator]();!(A=(D=E.next()).done);A=!0){var q=D.value;q in z.ranges&&(z.parameters[q]=g[q])}}catch(s){B=!0,C=s}finally{try{!A&&E["return"]&&E["return"]()}finally{if(B)throw C}}b["@context"]&&(z["@context"]=b["@context"]),f.push(new n["default"](z,t))}}catch(s){v=!0,w=s}finally{try{!u&&y["return"]&&y["return"]()}finally{if(v)throw w}}if(this.coverages=f,b.parameters){this.parameters=new Map;var F=!0,G=!1,H=void 0;try{for(var I,J=Object.keys(b.parameters)[Symbol.iterator]();!(F=(I=J.next()).done);F=!0){var q=I.value;m.transformParameter(b.parameters,q),this.parameters.set(q,b.parameters[q])}}catch(s){G=!0,H=s}finally{try{!F&&J["return"]&&J["return"]()}finally{if(G)throw H}}}b.domainTemplate&&(m.transformDomain(b.domainTemplate),this.domainTemplate=b.domainTemplate)}return k(a,[{key:"query",value:function(){return new r(this)}},{key:"_exposeLd",value:function(a){if(a["@context"]){var b=o.shallowcopy(a);delete b.coverages,this.ld=JSON.parse(JSON.stringify(b))}}}]),a}();b["default"]=q;var r=b.CollectionQuery=function(){function a(b){e(this,a),this._collection=b,this._filter={},this._subset={}}return k(a,[{key:"filter",value:function(a){return g(a,this._filter),this}},{key:"subset",value:function(a){return g(a,this._subset),this}},{key:"embed",value:function(a){return this}},{key:"execute",value:function(){var b=this,c=this._collection,d={type:l.COVERAGECOLLECTION,coverages:[],parameters:c.parameters,domainTemplate:c.domainTemplate,profiles:c.profiles},e=[],g=!0,h=!1,i=void 0;try{for(var j,k=function(){var a=j.value;e.push(a.loadDomain().then(function(c){return f(c,b._filter)?0!==Object.keys(b._subset).length?a.subsetByValue(b._subset).then(function(a){d.coverages.push(a)}):void d.coverages.push(a):void 0}))},m=c.coverages[Symbol.iterator]();!(g=(j=m.next()).done);g=!0)k()}catch(n){h=!0,i=n}finally{try{!g&&m["return"]&&m["return"]()}finally{if(h)throw i}}return Promise.all(e).then(function(){return d.query=function(){return new a(d)},d})}}]),a}();return h.define=i,c.exports}),a.registerDynamic("8a",[],!0,function(a,b,c){function d(a){var b=a?'; profile="'+i+'"':"",c=h.COVCBOR+"; q=1.0, "+h.COVJSON+b+"; q=0.5, "+h.JSONLD+"; q=0.1, "+h.JSON+"; q=0.1";return c}function e(a,b){return Array.isArray(b)||(b=[b]),b.some(function(b){return 0===a.indexOf(b)})}var f=this,g=f.define;f.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.getAcceptHeader=d,b.matchesMediaTypes=e;var h=b.MEDIATYPE={COVCBOR:"application/prs.coverage+cbor",COVJSON:"application/prs.coverage+json",JSONLD:"application/ld+json",JSON:"application/json",OCTETSTREAM:"application/octet-stream",TEXT:"text/plain"},i=b.COVJSON_PROFILE_STANDALONE="http://coveragejson.org/profiles/standalone";b.EXT={COVJSON:".covjson",COVCBOR:".covcbor"};return f.define=g,c.exports}),a.registerDynamic("8b",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(a,b){"use strict";function d(a){function c(a){for(var b=p.byteLength,c=r+a;c>b;)b*=2;if(b!==p.byteLength){var d=q;p=new ArrayBuffer(b),q=new DataView(p);for(var e=r+3>>2,f=0;e>f;++f)q.setUint32(4*f,d.getUint32(4*f))}return o=a,q}function d(){r+=o}function e(a){d(c(8).setFloat64(r,a))}function f(a){d(c(1).setUint8(r,a))}function i(a){for(var b=c(a.length),e=0;e<a.length;++e)b.setUint8(r+e,a[e]);d()}function j(a){d(c(2).setUint16(r,a))}function k(a){d(c(4).setUint32(r,a))}function l(a){var b=a%g,e=(a-b)/g,f=c(8);f.setUint32(r,e),f.setUint32(r+4,b),d()}function m(a,b){24>b?f(a<<5|b):256>b?(f(a<<5|24),f(b)):65536>b?(f(a<<5|25),j(b)):4294967296>b?(f(a<<5|26),k(b)):(f(a<<5|27),l(b))}function n(a){var c;if(a===!1)return f(244);if(a===!0)return f(245);if(null===a)return f(246);if(a===b)return f(247);switch(typeof a){case"number":if(Math.floor(a)===a){if(a>=0&&h>=a)return m(0,a);if(a>=-h&&0>a)return m(1,-(a+1))}return f(251),e(a);case"string":var d=[];for(c=0;c<a.length;++c){var g=a.charCodeAt(c);128>g?d.push(g):2048>g?(d.push(192|g>>6),d.push(128|63&g)):55296>g?(d.push(224|g>>12),d.push(128|g>>6&63),d.push(128|63&g)):(g=(1023&g)<<10,g|=1023&a.charCodeAt(++c),g+=65536,d.push(240|g>>18),d.push(128|g>>12&63),d.push(128|g>>6&63),d.push(128|63&g))}return m(3,d.length),i(d);default:var j;if(Array.isArray(a))for(j=a.length,m(4,j),c=0;j>c;++c)n(a[c]);else if(a instanceof Uint8Array)m(2,a.length),i(a);else{var k=Object.keys(a);for(j=k.length,m(5,j),c=0;j>c;++c){var l=k[c];n(l),n(a[l])}}}}var o,p=new ArrayBuffer(256),q=new DataView(p),r=0;if(n(a),"slice"in p)return p.slice(0,r);for(var s=new ArrayBuffer(r),t=new DataView(s),u=0;r>u;++u)t.setUint8(u,q.getUint8(u));return s}function e(a,c,d){function e(a,b){return v+=b,a}function h(b){return e(new Uint8Array(a,v,b),b)}function i(){var a=new ArrayBuffer(4),b=new DataView(a),c=m(),d=32768&c,e=31744&c,g=1023&c;if(31744===e)e=261120;else if(0!==e)e+=114688;else if(0!==g)return g*f;return b.setUint32(0,d<<16|e<<13|g<<13),b.getFloat32(0)}function j(){return e(u.getFloat32(v),4)}function k(){return e(u.getFloat64(v),8)}function l(){return e(u.getUint8(v),1)}function m(){return e(u.getUint16(v),2)}function n(){return e(u.getUint32(v),4)}function o(){return n()*g+n()}function p(){return 255!==u.getUint8(v)?!1:(v+=1,!0)}function q(a){if(24>a)return a;if(24===a)return l();if(25===a)return m();if(26===a)return n();if(27===a)return o();if(31===a)return-1;throw"Invalid length encoding"}function r(a){var b=l();if(255===b)return-1;var c=q(31&b);if(0>c||b>>5!==a)throw"Invalid indefinite length element";return c}function s(a,b){for(var c=0;b>c;++c){var d=l();128&d&&(224>d?(d=(31&d)<<6|63&l(),b-=1):240>d?(d=(15&d)<<12|(63&l())<<6|63&l(),b-=2):(d=(15&d)<<18|(63&l())<<12|(63&l())<<6|63&l(),b-=3)),65536>d?a.push(d):(d-=65536,a.push(55296|d>>10),a.push(56320|1023&d))}}function t(){var a,e,f=l(),g=f>>5,m=31&f;if(7===g)switch(m){case 25:return i();case 26:return j();case 27:return k()}if(e=q(m),0>e&&(2>g||g>6))throw"Invalid length";switch(g){case 0:return e;case 1:return-1-e;case 2:if(0>e){for(var n=[],o=0;(e=r(g))>=0;)o+=e,n.push(h(e));var u=new Uint8Array(o),v=0;for(a=0;a<n.length;++a)u.set(n[a],v),v+=n[a].length;return u}return h(e);case 3:var w=[];if(0>e)for(;(e=r(g))>=0;)s(w,e);else s(w,e);return String.fromCharCode.apply(null,w);case 4:var x;if(0>e)for(x=[];!p();)x.push(t());else for(x=new Array(e),a=0;e>a;++a)x[a]=t();return x;case 5:var y={};for(a=0;e>a||0>e&&!p();++a){var z=t();y[z]=t()}return y;case 6:return c(t(),e);case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return b;default:return d(e)}}}var u=new DataView(a),v=0;"function"!=typeof c&&(c=function(a){return a}),"function"!=typeof d&&(d=function(){return b});var w=t();if(v!==a.byteLength)throw"Remaining bytes";return w}var f=Math.pow(2,-24),g=Math.pow(2,32),h=Math.pow(2,53),i={encode:d,decode:e};"function"==typeof define&&define.amd?define("cbor/cbor",i):"undefined"!=typeof c&&c.exports?c.exports=i:a.CBOR||(a.CBOR=i)}(this),d.define=e,c.exports}),a.registerDynamic("8c",["8b"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("8b"),d.define=e,c.exports}),a.registerDynamic("8d",["8c","89","8a"],!0,function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=arguments.length<=2||void 0===arguments[2]?"arraybuffer":arguments[2];if(-1===["arraybuffer","text"].indexOf(c))throw new Error;var d=b.headers||{};return new Promise(function(e,g){var h=new XMLHttpRequest;h.open("GET",a),h.responseType=c;var i=l.getAcceptHeader(b.eagerload);if(h.setRequestHeader("Accept",i),d){var m=!0,n=!1,o=void 0;try{for(var p,q=Object.keys(d)[Symbol.iterator]();!(m=(p=q.next()).done);m=!0){var r=p.value;h.setRequestHeader(r,d[r])}}catch(s){n=!0,o=s}finally{try{!m&&q["return"]&&q["return"]()}finally{if(n)throw o}}}h.addEventListener("load",function(){try{if(!(h.status>=200&&h.status<300||304===h.status))return void g(new Error('Resource "'+a+'" not found, HTTP status code: '+h.status));var b=h.getResponseHeader("Content-Type");l.matchesMediaTypes(b,[l.MEDIATYPE.OCTETSTREAM,l.MEDIATYPE.TEXT])&&(k.endsWith(a,l.EXT.COVJSON)?b=l.MEDIATYPE.COVJSON:k.endsWith(a,l.EXT.COVCBOR)&&(b=l.MEDIATYPE.COVCBOR));var d=void 0;if(l.matchesMediaTypes(b,l.MEDIATYPE.COVCBOR)){var i=h.response,m=new Date;d=j["default"].decode(i),console.log("CBOR decoding: "+(new Date-m)+"ms")}else{if(!l.matchesMediaTypes(b,[l.MEDIATYPE.COVJSON,l.MEDIATYPE.JSONLD,l.MEDIATYPE.JSON]))return void g(new Error("Unsupported media type: "+b));if("arraybuffer"===c){if(!window.TextDecoder)return void g({responseType:"text"});var m=new Date;d=JSON.parse((new TextDecoder).decode(new DataView(h.response))),console.log("JSON decoding: "+(new Date-m)+"ms")}else{var m=new Date;d=JSON.parse(h.response),console.log("JSON decoding (slow path): "+(new Date-m)+"ms")}}var n=f(h.getAllResponseHeaders());e({data:d,headers:n})}catch(o){g(o)}}),h.addEventListener("error",function(){g(new Error("Network error loading resource at "+a))}),h.send()})["catch"](function(b){if(b.responseType)return e(a,d,b.responseType);throw b})}function f(a){var b={};if(!a)return b;for(var c=a.split("\r\n"),d=0;d<c.length;d++){var e=c[d],f=e.indexOf(": ");if(f>0){var g=e.substring(0,f).toLowerCase(),h=e.substring(f+2);b[g]=h}}return b}var g=this,h=g.define;g.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.load=e;var i=a("8c"),j=d(i),k=a("89"),l=a("8a");return g.define=h,c.exports}),a.registerDynamic("89",["72"],!0,function(a,b,c){function d(a,b){if(!a)throw b=b||"Assertion failed",new Error(b)}function e(a){var b=Object.create(Object.getPrototypeOf(a));for(var c in a)b[c]=a[c];return b}function f(a,b){var c=a.length-b.length,d=a.indexOf(b,c);return-1!==d&&d===c}var g=this,h=g.define;g.define=void 0,Object.defineProperty(b,"__esModule",{value:!0});var i=a("72");Object.defineProperty(b,"minMax",{enumerable:!0,get:function(){return i.minMax}}),Object.defineProperty(b,"indicesOfNearest",{enumerable:!0,get:function(){return i.indicesOfNearest}}),Object.defineProperty(b,"indexOfNearest",{enumerable:!0,get:function(){return i.indexOfNearest}}),b.assert=d,b.shallowcopy=e,b.endsWith=f;b.PREFIX="http://coveragejson.org/def#";return g.define=h,c.exports}),a.registerDynamic("87",["28"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0,Object.defineProperty(b,"__esModule",{value:!0});var f=a("28");Object.defineProperty(b,"DOMAIN",{enumerable:!0,get:function(){return f.DOMAIN}}),Object.defineProperty(b,"COVERAGE",{enumerable:!0,get:function(){return f.COVERAGE}}),Object.defineProperty(b,"COVERAGECOLLECTION",{enumerable:!0,get:function(){return f.COVERAGECOLLECTION}});b.LINKRELPREFIX="http://www.iana.org/assignments/relation/";return d.define=e,c.exports}),a.registerDynamic("72",[],!0,function(a,b,c){function d(a){for(var b=a.length,c=1/0,d=-(1/0);b--;){var e=a[b];null==e||(c>e?c=e:e>d&&(d=e))}return c===1/0?c=d:d===-(1/0)&&(d=c),(c===1/0||c===-(1/0))&&(c=null,d=null),[c,d]}function e(a,b){if(0===a.length)throw new Error("Array must have at least one element");var c=-1,d=a.length,e=1===a.length||a[0]<a[1];if(e)for(;d-c>1;){var f=Math.round((c+d)/2);a[f]<=b?c=f:d=f}else for(;d-c>1;){var g=Math.round((c+d)/2);a[g]>=b?c=g:d=g}return a[c]===b&&(d=c),-1===c&&(c=d),d===a.length&&(d=c),[c,d]}function f(a,b){var c=e(a,b),d=c[0],f=c[1];return Math.abs(b-a[d])<=Math.abs(b-a[f])?d:f}var g=this,h=g.define;return g.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.minMax=d,b.indicesOfNearest=e,b.indexOfNearest=f,g.define=h,c.exports}),a.registerDynamic("29",["28"],!0,function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){var c=a.referencing.find(function(a){return-1!==a.components.indexOf(b)});return c}function g(a){var b=function(a){return-1!==["GeodeticCRS","ProjectedCRS"].indexOf(a.system.type)&&2===a.components.length},c=a.referencing.find(b);return c}function h(a){return-1!==x.indexOf(a.id)}function i(a){var b=a.referencing.find(function(a){return h(a.system)});if(b){var c=y[b.system.id];if(c>1)throw new Error;var e=b.components[c],f=void 0,g=void 0;if(a.axes.has(e)){var i=e,j=a.axes.get(i).values;if(f=j[0],g=j[j.length-1],f>g){var k=[g,f];f=k[0],g=k[1]}}else{var l=[].concat(d(a.axes.values())),m=l.find(function(a){return-1!==a.components.indexOf(e)}),n=m.components.indexOf(e);if(f=1/0,g=-(1/0),m.dataType===s.COVJSON_DATATYPE_TUPLE){var o=!0,p=!1,q=void 0;try{for(var t,u=m.values[Symbol.iterator]();!(o=(t=u.next()).done);o=!0){var v=t.value,w=v[n];f=Math.min(w,f),g=Math.max(w,g)}}catch(x){p=!0,q=x}finally{try{!o&&u["return"]&&u["return"]()}finally{if(p)throw q}}}else{if(m.dataType!==s.COVJSON_DATATYPE_POLYGON)throw new Error("Unsupported data type: "+m.dataType);var z=!0,A=!1,B=void 0;try{for(var C,D=m.values[Symbol.iterator]();!(z=(C=D.next()).done);z=!0){var E=C.value,F=!0,G=!1,H=void 0;try{for(var I,J=E[Symbol.iterator]();!(F=(I=J.next()).done);F=!0){var K=I.value,L=!0,M=!1,N=void 0;try{for(var O,P=K[Symbol.iterator]();!(L=(O=P.next()).done);L=!0){var Q=O.value,R=Q[n];f=Math.min(R,f),g=Math.max(R,g)}}catch(x){M=!0,N=x}finally{try{!L&&P["return"]&&P["return"]()}finally{if(M)throw N}}}}catch(x){G=!0,H=x}finally{try{!F&&J["return"]&&J["return"]()}finally{if(G)throw H}}}}catch(x){A=!0,B=x}finally{try{!z&&D["return"]&&D["return"]()}finally{if(A)throw B}}}}var S=(g+f)/2,T=S-180,U=S+180;return{project:function(a){var b=a.lon,d=a.lat,e=void 0;e=b>=T&&U>=b?b:((b-T)%360+360)%360+T;var f=0===c?[e,d]:[d,e],g=r(f,2),h=g[0],i=g[1];return{x:h,y:i}},unproject:function(a){var b=a.x,d=a.y,e=0===c?[b,d]:[d,b],f=r(e,2),g=f[0],h=f[1];return{lon:g,lat:h}}}}}function j(a,b,c){return c.project(b.unproject(a))}function k(a,b){if(!l(a,b))throw new Error("'"+b+"' is not a longitude axis");var c=a.axes.get(b).values,d=c[0],e=c[c.length-1];if(d>e){var f=[e,d];d=f[0],e=f[1]}var g=(e+d)/2,h=g-180,i=g+180;return function(a){return a>=h&&i>=a?a:((a-h)%360+360)%360+h}}function l(a,b){var c=f(a,b);if(!c)return!1;var d=c.system.id;if(-1===x.indexOf(d))return!1;var e=c.components.indexOf(b),g=y[d]===e;return g}function m(a,b){var c=a.axes.get(b).values[0];return"string"!=typeof c?!1:!isNaN(new Date(c).getTime())}function n(a){var b=void 0,c=!1;if("string"==typeof a?b=new Date(a).getTime():a instanceof Date?b=a.getTime():c=!0,isNaN(b)&&(c=!0),c)throw new Error("Invalid date: "+a);return b}var o=this,p=o.define;o.define=void 0,Object.defineProperty(b,"__esModule",{value:!0});var q,r=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b.getReferenceObject=f,b.getHorizontalCRSReferenceObject=g,b.isEllipsoidalCRS=h,b.getProjection=i,b.reproject=j,b.getLongitudeWrapper=k,b.isLongitudeAxis=l,b.isISODateAxis=m,b.asTime=n;var s=a("28"),t="http://www.opengis.net/def/crs/",u=t+"EPSG/0/4979",v=t+"EPSG/0/4326",w=t+"OGC/1.3/CRS84",x=[u,v,w],y=(q={},e(q,u,1),e(q,v,1),e(q,w,0),q);return o.define=p,c.exports}),a.registerDynamic("2b",["29","8e","72","28"],!0,function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){var c,d=arguments.length<=2||void 0===arguments[2]?["x","y"]:arguments[2],f=k(b,4),g=f[0],h=f[1],i=f[2],j=f[3];return a.subsetByValue((c={},e(c,d[0],{start:g,stop:i}),e(c,d[1],{start:h,stop:j}),c))}function g(a,b){return a.loadDomain().then(function(c){b=m.normalizeIndexSubsetConstraints(c,b);var e=m.subsetByIndex(c,b),f=function(a){var d={dataType:a.dataType,get:function(c){var d={},e=!0,f=!1,g=void 0;try{for(var h,i=Object.keys(c)[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,k=b[j],l=k.start,m=k.step;d[j]=l+c[j]*m}}catch(n){f=!0,g=n}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return a.get(d)}};d.shape=new Map;var f=!0,g=!1,h=void 0;try{for(var i,j=c.axes.keys()[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value,l=e.axes.get(k).values.length;d.shape.set(k,l)}}catch(m){g=!0,h=m}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}return d},i=function(b){return a.loadRange(b).then(f)},j=function(b){return a.loadRanges(b).then(function(a){return new Map([].concat(d(a)).map(function(a){var b=k(a,2),c=b[0],d=b[1];return[c,f(d)]}))})},l={type:o.COVERAGE,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return Promise.resolve(e)},loadRange:i,loadRanges:j};return l.subsetByIndex=g.bind(null,l),l.subsetByValue=h.bind(null,l),l})}function h(a,b){return a.loadDomain().then(function(c){var d={},e=!0,f=!1,g=void 0;try{for(var h,i=Object.keys(b)[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,m=b[j];if(void 0!==m&&null!==m&&c.axes.has(j)){var o=c.axes.get(j),p=o.values,q=l.isISODateAxis(c,j),r=l.isLongitudeAxis(c,j),s=r?l.getLongitudeWrapper(c,j):void 0;if("number"==typeof m||"string"==typeof m||m instanceof Date){var t=m;q?(t=l.asTime(t),p=p.map(function(a){return new Date(a).getTime()})):r&&(t=s(t));var u=void 0;if(u=p.indexOf?p.indexOf(t):Array.prototype.indexOf.call(p,t),-1===u)throw new Error("Domain value not found: "+m);d[j]=u}else if("target"in m){var v=m.target;if(q)v=l.asTime(v),p=p.map(function(a){return new Date(a).getTime()});else if(r)v=s(v);else if("number"!=typeof p[0]||"number"!=typeof v)throw new Error("Invalid axis or constraint value type");var w=n.indexOfNearest(p,v);d[j]=w}else{if(!("start"in m&&"stop"in m))throw new Error("Invalid subset constraints");var x=m.start,y=m.stop;if(q){var z=[l.asTime(x),l.asTime(y)];x=z[0],y=z[1],p=p.map(function(a){return new Date(a).getTime()})}else if(r){var A=[s(x),s(y)];x=A[0],y=A[1]}else if("number"!=typeof p[0]||"number"!=typeof x)throw new Error("Invalid axis or constraint value type");var B=n.indicesOfNearest(p,x),C=k(B,2),D=C[0],E=C[1],F=n.indicesOfNearest(p,y),G=k(F,2),H=G[0],I=G[1],J=Math.min(D,E,H,I),K=Math.max(D,E,H,I)+1;d[j]={start:J,stop:K}}}}}catch(L){f=!0,g=L}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return a.subsetByIndex(d)})}var i=this,j=i.define;i.define=void 0,Object.defineProperty(b,"__esModule",{value:!0});var k=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]();
}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b.subsetByBbox=f,b.subsetByIndex=g,b.subsetByValue=h;var l=a("29"),m=a("8e"),n=a("72"),o=a("28");return i.define=j,c.exports}),a.registerDynamic("28",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0,Object.defineProperty(b,"__esModule",{value:!0});var f=(b.DOMAIN="Domain",b.COVERAGE="Coverage"),g=(b.COVERAGECOLLECTION=f+"Collection","http://coveragejson.org/def#");b.COVJSON_DATATYPE_TUPLE=g+"Tuple",b.COVJSON_DATATYPE_POLYGON=g+"Polygon";return d.define=e,c.exports}),a.registerDynamic("8e",["28"],!0,function(a,b,c){function d(a,b){var c={};for(var d in b)if(a.axes.has(d)&&void 0!==b[d]&&null!==b[d]){if("number"==typeof b[d]){var e=b[d];c[d]={start:e,stop:e+1}}else c[d]=b[d];var f=c[d],g=f.start,h=void 0===g?0:g,i=f.stop,j=void 0===i?a.axes.get(d).values.length:i,k=f.step,l=void 0===k?1:k;if(0>=l)throw new Error("Invalid constraint for "+d+": step="+l+" must be > 0");if(h>=j||0>h)throw new Error("Invalid constraint for "+d+": stop="+j+" must be > start="+h+" and both >= 0");c[d]={start:h,stop:j,step:l}}var m=!0,n=!1,o=void 0;try{for(var p,q=a.axes.keys()[Symbol.iterator]();!(m=(p=q.next()).done);m=!0){var r=p.value;if(!(r in c)){var s=a.axes.get(r).values.length;c[r]={start:0,stop:s,step:1}}}}catch(t){n=!0,o=t}finally{try{!m&&q["return"]&&q["return"]()}finally{if(n)throw o}}return c}function e(a,b){b=d(a,b);var c={type:h.DOMAIN,domainType:a.domainType,axes:new Map(a.axes),referencing:a.referencing},e=!0,f=!1,g=void 0;try{for(var i,j=function(){var d=i.value,e=a.axes.get(d),f=e.values,g=e.bounds,h=b[d],j=void 0,k=void 0,l=h.start,m=h.stop,n=h.step;if(0===l&&m===f.length&&1===n)j=f,k=g;else if(1===n)j=f.subarray?f.subarray(l,m):f.slice(l,m),g&&(k={get:function(a){return g.get(l+a)}});else{var o=Math.trunc((m-l)/n),p=(m-l)%n,q=o+p;j=new f.constructor(q);for(var r=l,s=0;m>r;r+=n,s++)j[s]=f[r];g&&(k={get:function(a){return g.get(l+a*n)}})}var t={dataType:e.dataType,components:e.components,values:j,bounds:k};c.axes.set(d,t)},k=Object.keys(b)[Symbol.iterator]();!(e=(i=k.next()).done);e=!0)j()}catch(l){f=!0,g=l}finally{try{!e&&k["return"]&&k["return"]()}finally{if(f)throw g}}return c}var f=this,g=f.define;f.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.normalizeIndexSubsetConstraints=d,b.subsetByIndex=e;var h=a("28");return f.define=g,c.exports}),a.registerDynamic("8f",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f={}.toString;return c.exports=Array.isArray||function(a){return"[object Array]"==f.call(a)},d.define=e,c.exports}),a.registerDynamic("90",["8f"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("8f"),d.define=e,c.exports}),a.registerDynamic("91",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p},d.define=e,c.exports}),a.registerDynamic("92",["91"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("91"),d.define=e,c.exports}),a.registerDynamic("93",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,f,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new e(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,f=0;g>d;d+=4,f+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function d(a){function b(a){return f.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var d,e,g,h=a.length%3,i="";for(d=0,g=a.length-h;g>d;d+=3)e=(a[d]<<16)+(a[d+1]<<8)+a[d+2],i+=c(e);switch(h){case 1:e=a[a.length-1],i+=b(e>>2),i+=b(e<<4&63),i+="==";break;case 2:e=(a[a.length-2]<<8)+a[a.length-1],i+=b(e>>10),i+=b(e>>4&63),i+=b(e<<2&63),i+="="}return i}var e="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=d}("undefined"==typeof b?this.base64js={}:b),d.define=e,c.exports}),a.registerDynamic("94",["93"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("93"),d.define=e,c.exports}),a.registerDynamic("95",["94","92","90"],!0,function(a,b,c){function d(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function e(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a){return this instanceof f?(f.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof a?g(this,a):"string"==typeof a?h(this,a,arguments.length>1?arguments[1]:"utf8"):i(this,a)):arguments.length>1?new f(a,arguments[1]):new f(a)}function g(a,b){if(a=p(a,0>b?0:0|q(b)),!f.TYPED_ARRAY_SUPPORT)for(var c=0;b>c;c++)a[c]=0;return a}function h(a,b,c){("string"!=typeof c||""===c)&&(c="utf8");var d=0|s(b,c);return a=p(a,d),a.write(b,c),a}function i(a,b){if(f.isBuffer(b))return j(a,b);if($(b))return k(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return l(a,b);if(b instanceof ArrayBuffer)return m(a,b)}return b.length?n(a,b):o(a,b)}function j(a,b){var c=0|q(b.length);return a=p(a,c),b.copy(a,0,0,c),a}function k(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function l(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function m(a,b){return f.TYPED_ARRAY_SUPPORT?(b.byteLength,a=f._augment(new Uint8Array(b))):a=l(a,new Uint8Array(b)),a}function n(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function o(a,b){var c,d=0;"Buffer"===b.type&&$(b.data)&&(c=b.data,d=0|q(c.length)),a=p(a,d);for(var e=0;d>e;e+=1)a[e]=255&c[e];return a}function p(a,b){f.TYPED_ARRAY_SUPPORT?(a=f._augment(new Uint8Array(b)),a.__proto__=f.prototype):(a.length=b,a._isBuffer=!0);var c=0!==b&&b<=f.poolSize>>>1;return c&&(a.parent=_),a}function q(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function r(a,b){if(!(this instanceof r))return new r(a,b);var c=new f(a,b);return delete c.parent,c}function s(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return R(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return U(a).length;default:if(d)return R(a).length;b=(""+b).toLowerCase(),d=!0}}function t(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return F(this,b,c);case"utf8":case"utf-8":return B(this,b,c);case"ascii":return D(this,b,c);case"binary":return E(this,b,c);case"base64":return A(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function u(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function v(a,b,c,d){return V(R(b,a.length-c),a,c,d)}function w(a,b,c,d){return V(S(b),a,c,d)}function x(a,b,c,d){return w(a,b,c,d)}function y(a,b,c,d){return V(U(b),a,c,d)}function z(a,b,c,d){return V(T(b,a.length-c),a,c,d)}function A(a,b,c){return 0===b&&c===a.length?Y.fromByteArray(a):Y.fromByteArray(a.slice(b,c))}function B(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;c>e;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(c>=e+h){var i,j,k,l;switch(h){case 1:128>f&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(55296>l||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&1114112>l&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return C(d)}function C(a){var b=a.length;if(aa>=b)return String.fromCharCode.apply(String,a);for(var c="",d=0;b>d;)c+=String.fromCharCode.apply(String,a.slice(d,d+=aa));return c}function D(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(127&a[e]);return d}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function F(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=Q(a[f]);return e}function G(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function H(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function I(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>e||g>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function J(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function K(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function L(a,b,c,d,e,f){if(b>e||f>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function M(a,b,c,d,e){return e||L(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(a,b,c,d,23,4),c+4}function N(a,b,c,d,e){return e||L(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(a,b,c,d,52,8),c+8}function O(a){if(a=P(a).replace(ca,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function P(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Q(a){return 16>a?"0"+a.toString(16):a.toString(16)}function R(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;g++){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(1114112>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function S(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function T(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function U(a){return Y.toByteArray(O(a))}function V(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}var W=this,X=W.define;W.define=void 0;var Y=a("94"),Z=a("92"),$=a("90");b.Buffer=f,b.SlowBuffer=r,b.INSPECT_MAX_BYTES=50,f.poolSize=8192;var _={};f.TYPED_ARRAY_SUPPORT=void 0!==W.TYPED_ARRAY_SUPPORT?W.TYPED_ARRAY_SUPPORT:d(),f.TYPED_ARRAY_SUPPORT?(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array):(f.prototype.length=void 0,f.prototype.parent=void 0),f.isBuffer=function(a){return!(null==a||!a._isBuffer)},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);g>e&&a[e]===b[e];)++e;return e!==g&&(c=a[e],d=b[e]),d>c?-1:c>d?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!$(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new f(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new f(b),e=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,e),e+=g.length}return d},f.byteLength=s,f.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?B(this,0,a):t.apply(this,arguments)},f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===f.compare(this,a)},f.prototype.inspect=function(){var a="",c=b.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(a+=" ... ")),"<Buffer "+a+">"},f.prototype.compare=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:f.compare(this,a)},f.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[-1===d?0:e-d]){if(-1===d&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:-2147483648>b&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(0>b&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(f.isBuffer(a))return c(this,a,b);if("number"==typeof a)return f.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},f.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},f.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return u(this,a,b,c);case"utf8":case"utf-8":return v(this,a,b,c);case"ascii":return w(this,a,b,c);case"binary":return x(this,a,b,c);case"base64":return y(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var aa=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var d;if(f.TYPED_ARRAY_SUPPORT)d=f._augment(this.subarray(a,b));else{var e=b-a;d=new f(e,void 0);for(var g=0;e>g;g++)d[g]=this[g+a]}return d.length&&(d.parent=this.parent||this),d},f.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUInt8=function(a,b){return b||H(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,b){return b||H(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,b){return b||H(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,b){return b||H(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,b){return b||H(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return b||H(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},f.prototype.readInt16LE=function(a,b){b||H(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){b||H(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return b||H(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return b||H(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return b||H(a,4,this.length),Z.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return b||H(a,4,this.length),Z.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return b||H(a,8,this.length),Z.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return b||H(a,8,this.length),Z.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},f.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},f.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,255,0),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):K(this,a,b,!0),b+4},f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=0,g=1,h=0>a?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0>a?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,127,-128),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):K(this,a,b,!0),b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeFloatLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return N(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return N(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&c>d&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,g=d-c;if(this===a&&b>c&&d>b)for(e=g-1;e>=0;e--)a[e+b]=this[e+c];else if(1e3>g||!f.TYPED_ARRAY_SUPPORT)for(e=0;g>e;e++)a[e+b]=this[e+c];else a._set(this.subarray(c,c+g),b);return g},f.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=R(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},f.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(f.TYPED_ARRAY_SUPPORT)return new f(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var ba=f.prototype;f._augment=function(a){return a.constructor=f,a._isBuffer=!0,a._set=a.set,a.get=ba.get,a.set=ba.set,a.write=ba.write,a.toString=ba.toString,a.toLocaleString=ba.toString,a.toJSON=ba.toJSON,a.equals=ba.equals,a.compare=ba.compare,a.indexOf=ba.indexOf,a.copy=ba.copy,a.slice=ba.slice,a.readUIntLE=ba.readUIntLE,a.readUIntBE=ba.readUIntBE,a.readUInt8=ba.readUInt8,a.readUInt16LE=ba.readUInt16LE,a.readUInt16BE=ba.readUInt16BE,a.readUInt32LE=ba.readUInt32LE,a.readUInt32BE=ba.readUInt32BE,a.readIntLE=ba.readIntLE,a.readIntBE=ba.readIntBE,a.readInt8=ba.readInt8,a.readInt16LE=ba.readInt16LE,a.readInt16BE=ba.readInt16BE,a.readInt32LE=ba.readInt32LE,a.readInt32BE=ba.readInt32BE,a.readFloatLE=ba.readFloatLE,a.readFloatBE=ba.readFloatBE,a.readDoubleLE=ba.readDoubleLE,a.readDoubleBE=ba.readDoubleBE,a.writeUInt8=ba.writeUInt8,a.writeUIntLE=ba.writeUIntLE,a.writeUIntBE=ba.writeUIntBE,a.writeUInt16LE=ba.writeUInt16LE,a.writeUInt16BE=ba.writeUInt16BE,a.writeUInt32LE=ba.writeUInt32LE,a.writeUInt32BE=ba.writeUInt32BE,a.writeIntLE=ba.writeIntLE,a.writeIntBE=ba.writeIntBE,a.writeInt8=ba.writeInt8,a.writeInt16LE=ba.writeInt16LE,a.writeInt16BE=ba.writeInt16BE,a.writeInt32LE=ba.writeInt32LE,a.writeInt32BE=ba.writeInt32BE,a.writeFloatLE=ba.writeFloatLE,a.writeFloatBE=ba.writeFloatBE,a.writeDoubleLE=ba.writeDoubleLE,a.writeDoubleBE=ba.writeDoubleBE,a.fill=ba.fill,a.inspect=ba.inspect,a.toArrayBuffer=ba.toArrayBuffer,a};var ca=/[^+\/0-9A-Za-z-_]/g;return W.define=X,c.exports}),a.registerDynamic("96",["95"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("95"),d.define=e,c.exports}),a.registerDynamic("97",["96"],!0,function(b,c,d){var e=this,f=e.define;return e.define=void 0,d.exports=a._nodeRequire?a._nodeRequire("buffer"):b("96"),e.define=f,d.exports}),a.registerDynamic("98",["97"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("97"),d.define=e,c.exports}),a.registerDynamic("99",["98"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(a){c.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}}(a("98").Buffer),d.define=e,c.exports}),a.registerDynamic("9a",["99"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("99"),d.define=e,c.exports}),a.registerDynamic("9b",[],!0,function(a,b,c){function d(a){for(var b=new Array(a),c=0;a>c;++c)b[c]=c;return b}var e=this,f=e.define;return e.define=void 0,c.exports=d,e.define=f,c.exports}),a.registerDynamic("9c",["9b"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("9b"),d.define=e,c.exports}),a.registerDynamic("9d",["9c","9a"],!0,function(a,b,c){function d(a,b){return a[0]-b[0]}function e(){var a,b=this.stride,c=new Array(b.length);for(a=0;a<c.length;++a)c[a]=[Math.abs(b[a]),a];c.sort(d);var e=new Array(c.length);for(a=0;a<e.length;++a)e[a]=c[a][1];return e}function f(a,b){var c=["View",b,"d",a].join("");0>b&&(c="View_Nil"+a);var d="generic"===a;if(-1===b){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",g=new Function(f);return g()}if(0===b){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",g=new Function("TrivialArray",f);return g(n[a][0])}var f=["'use strict'"],h=k(b),i=h.map(function(a){return"i"+a}),j="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),l=h.map(function(a){return"b"+a}).join(","),m=h.map(function(a){return"c"+a}).join(",");f.push("function "+c+"(a,"+l+","+m+",d){this.data=a","this.shape=["+l+"]","this.stride=["+m+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})"),1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>b?(f.push("function "+c+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+i.join(",")+",v){"),d?f.push("return this.data.set("+j+",v)}"):f.push("return this.data["+j+"]=v}"),f.push("proto.get=function "+c+"_get("+i.join(",")+"){"),d?f.push("return this.data.get("+j+")}"):f.push("return this.data["+j+"]}"),f.push("proto.index=function "+c+"_index(",i.join(),"){return "+j+"}"),f.push("proto.hi=function "+c+"_hi("+i.join(",")+"){return new "+c+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");var o=h.map(function(a){return"a"+a+"=this.shape["+a+"]"}),p=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+c+"_lo("+i.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+p.join(","));for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){d=i"+q+"|0;b+=c"+q+"*d;a"+q+"-=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+i.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'){d=i"+q+"|0;if(d<0){c+=b"+q+"*(a"+q+"-1);a"+q+"=ceil(-a"+q+"/d)}else{a"+q+"=ceil(a"+q+"/d)}b"+q+"*=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");for(var r=new Array(b),s=new Array(b),q=0;b>q;++q)r[q]="a[i"+q+"]",s[q]="b[i"+q+"]";f.push("proto.transpose=function "+c+"_transpose("+i+"){"+i.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+r.join(",")+","+s.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+i+"){var a=[],b=[],c=this.offset");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){c=(c+this.stride["+q+"]*i"+q+")|0}else{a.push(this.shape["+q+"]);b.push(this.stride["+q+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",f.join("\n"));return g(n[a],e)}function g(a){if(l(a))return"buffer";if(m)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function h(a,b,c,d){if(void 0===a){var e=n.array[0];return e([])}"number"==typeof a&&(a=[a]),void 0===b&&(b=[a.length]);var h=b.length;if(void 0===c){c=new Array(h);for(var i=h-1,j=1;i>=0;--i)c[i]=j,j*=b[i]}if(void 0===d){d=0;for(var i=0;h>i;++i)c[i]<0&&(d-=(b[i]-1)*c[i])}for(var k=g(a),l=n[k];l.length<=h+1;)l.push(f(k,l.length-1));var e=l[h+1];return e(a,b,c,d)}var i=this,j=i.define;i.define=void 0;var k=a("9c"),l=a("9a"),m="undefined"!=typeof Float64Array,n={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};return c.exports=h,i.define=j,c.exports}),a.registerDynamic("34",["9d"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("9d"),d.define=e,c.exports}),a.registerDynamic("88",["34","8e","2b","72","87","89","8d"],!0,function(a,b,c){
function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){var c=[].concat(e(a.axes.values())).filter(function(a){return a.values.length>1}).length>1,d=a._rangeAxisOrder||b._axisNames;if(c&&!d)throw new Error("Range axis order missing");return d=d||[].concat(e(a.axes.keys()))}function h(a,b){var c=g(a,b),d=c.map(function(b){return a.axes.get(b).values.length});if(b._shape){var e=b._shape.length===d.length&&b._shape.every(function(a,b){return a===d[b]});if(!e)throw new Error("range.shape must match domain axis sizes")}return d}function i(a,b){return a.loadDomain().then(function(c){b=v.normalizeIndexSubsetConstraints(c,b);var d=v.subsetByIndex(c,b);c._rangeAxisOrder&&(d._rangeAxisOrder=c._rangeAxisOrder);var f=function(a){var f,h,i=a._ndarr,j=g(c,a),k=j.map(function(a){return b[a].start}),m=j.map(function(a){return b[a].stop}),n=j.map(function(a){return b[a].step}),o=(f=(h=i.hi.apply(i,e(m))).lo.apply(h,e(k))).step.apply(f,e(n)),p={dataType:a.dataType,get:l(o,j),_ndarr:o,_axisNames:j,_shape:j.map(function(a){return d.axes.get(a).values.length})};p.shape=new Map;var q=!0,r=!1,s=void 0;try{for(var t,u=j[Symbol.iterator]();!(q=(t=u.next()).done);q=!0){var v=t.value,w=d.axes.get(v).values.length;p.shape.set(v,w)}}catch(x){r=!0,s=x}finally{try{!q&&u["return"]&&u["return"]()}finally{if(r)throw s}}return p},h=function(b){return a.loadRange(b).then(f)},j=function(b){return a.loadRanges(b).then(function(a){return new Map([].concat(e(a)).map(function(a){var b=q(a,2),c=b[0],d=b[1];return[c,f(d)]}))})},k={type:y.COVERAGE,domainProfiles:a.domainProfiles,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return Promise.resolve(d)},loadRange:h,loadRanges:j};return k.subsetByIndex=i.bind(null,k),k.subsetByValue=w.subsetByValue.bind(null,k),k})}function j(a,b){if(!("__transformDone"in a[b])){var c=a[b];if(c.key=b,c.unit&&"string"==typeof c.unit.symbol&&(c.unit.symbol={value:c.unit.symbol}),c.categoryEncoding){var d=new Map,e=!0,f=!1,g=void 0;try{for(var h,i=Object.keys(c.categoryEncoding)[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,k=c.categoryEncoding[j];Array.isArray(k)||(k=[k]),d.set(j,k)}}catch(l){f=!0,g=l}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}c.categoryEncoding=d}c.__transformDone=!0}}function k(a,b){if(!("__transformDone"in a)){var c=a.values,d=(a.dataType,ArrayBuffer.isView(c),"number"==typeof a.validMin),e="offset"in a;"offset"in a&&z.assert("factor"in a);var f=a.offset,i=a.factor;d&&(z.assert("validMin"in a),z.assert("validMax"in a));var j=a.validMin,k=a.validMax,m=void 0;if(d||e){if(m=new Array(c.length),e){for(var n=0;n<c.length;n++){var o=c[n];d&&(j>o||o>k)?m[n]=null:d||null!==o?m[n]=o*i+f:m[n]=null}void 0!==j&&(a.validMin=j*i+f,a.validMax=k*i+f)}else for(var n=0;n<c.length;n++){var o=c[n];j>o||o>k?m[n]=null:m[n]=o}delete a.offset,delete a.factor,delete a.validMin,delete a.validMax}else m=c;if(void 0===a.actualMin){var p=x.minMax(m),r=q(p,2),s=r[0],t=r[1];null!==s&&(a.actualMin=s,a.actualMax=t)}a.shape&&(a._shape=a.shape),a.axisNames&&(a._axisNames=a.axisNames,delete a.axisNames);var v=g(b,a),w=h(b,a),y=u["default"](m,w);a._ndarr=y,a.get=l(y,v);var A=new Map,B=!0,C=!1,D=void 0;try{for(var E,F=b.axes[Symbol.iterator]();!(B=(E=F.next()).done);B=!0){var G=q(E.value,2),H=G[0],I=G[1];A.set(H,I.values.length)}}catch(J){C=!0,D=J}finally{try{!B&&F["return"]&&F["return"]()}finally{if(C)throw D}}return a.shape=A,a.__transformDone=!0,a}}function l(a,b){for(var c="",d=0;d<b.length;d++)c&&(c+=","),c+="'"+b[d]+"' in obj ? obj['"+b[d]+"'] : 0";var e=new Function("ndarr","return function ndarrget (obj) { return ndarr.get("+c+") }")(a);return e}function m(a,b,c){if(!("__transformDone"in a)){a.profiles=[];var d=a.profile||a.domainType||c;d&&("http"!==d.substr(0,4)&&(d=z.PREFIX+d),a.domainType=d,a.profiles.push(d));var e=new Map,f=!0,g=!1,h=void 0;try{for(var i,j=Object.keys(a.axes)[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value;e.set(k,a.axes[k])}}catch(l){g=!0,h=l}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}a.axes=e;var m=!0,o=!1,p=void 0;try{for(var r,s=e[Symbol.iterator]();!(m=(r=s.next()).done);m=!0){var t=q(r.value,2),u=t[0],v=t[1];if(v.key=u,("Tuple"===v.dataType||"Polygon"===v.dataType)&&(v.dataType=z.PREFIX+v.dataType),v.dimensions&&(v.components=v.dimensions),v.components||(v.components=[u]),v.dimensions=v.components,"start"in v&&"stop"in v&&"num"in v){var w=new Float64Array(v.num),x=void 0;if(1===v.num){if(v.start!==v.stop)throw new Error("regular axis of length 1 must have equal start/stop values");x=0}else x=(v.stop-v.start)/(v.num-1);for(var y=0;y<v.num;y++)w[y]=v.start+y*x;v.values=w,delete v.start,delete v.stop,delete v.num}if(!ArrayBuffer.isView(v.values)){if(Array.isArray(v.values)&&"number"==typeof v.values[0]){for(var w=new Float64Array(v.values.length),y=0;y<v.values.length;y++)w[y]=v.values[y];v.values=w}v.bounds=n(v)}}}catch(l){o=!0,p=l}finally{try{!m&&s["return"]&&s["return"]()}finally{if(o)throw p}}b&&(a.referencing=b);var A=!0,B=!1,C=void 0;try{for(var D,E=a.referencing[Symbol.iterator]();!(A=(D=E.next()).done);A=!0){var F=D.value;if(F.system)break;F.system=F.srs||F.trs||F.rs,F.dimensions&&(F.components=F.dimensions),delete F.srs,delete F.trs,delete F.rs}}catch(l){B=!0,C=l}finally{try{!A&&E["return"]&&E["return"]()}finally{if(B)throw C}}return a.rangeAxisOrder&&(a._rangeAxisOrder=a.rangeAxisOrder,delete a.rangeAxisOrder),a.__transformDone=!0,a}}function n(a){if(a.bounds){var b=function(){var b=a.bounds;return{v:{get:function(a){return[b[2*a],b[2*a+1]]}}}}();if("object"===("undefined"==typeof b?"undefined":r(b)))return b.v}}var o=this,p=o.define;o.define=void 0;var q=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0}),b.transformParameter=j,b.transformDomain=m;var t=a("34"),u=d(t),v=a("8e"),w=a("2b"),x=a("72"),y=a("87"),z=a("89"),A=a("8d"),B=function(){function a(b,c){f(this,a),this._covjson=b,this.type=y.COVERAGE,this.ld={},this._exposeLd(b),this.options=c?z.shallowcopy(c):{},this.id=b.id,this.parameters=new Map;var d=!0,e=!1,g=void 0;try{for(var h,i=Object.keys(b.parameters)[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var k=h.value;j(b.parameters,k),this.parameters.set(k,b.parameters[k])}}catch(l){e=!0,g=l}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw g}}this.profiles=[];var m=this._covjson.profile;m&&("http"!==m.substr(0,4)&&(m=z.PREFIX+m),this.profiles.push(m)),this.domainProfiles=[];var n=void 0;n="string"==typeof this._covjson.domain?this._covjson.domainProfile||this._covjson.domainType:this._covjson.domain.profile||this._covjson.domain.domainType||this._covjson.domainProfile||this._covjson.domainType,n&&("http"!==n.substr(0,4)&&(n=z.PREFIX+n),this.domainType=n,this.domainProfiles.push(n)),!m&&n&&(m=n+y.COVERAGE,this.profiles.push(m)),this._updateLoadStatus()}return s(a,[{key:"_updateLoadStatus",value:function(){var a=this,b=function(a){return"object"===("undefined"==typeof a?"undefined":r(a))},c=b(this._covjson.domain),d=Object.keys(this._covjson.ranges).every(function(c){return b(a._covjson.ranges[c])});this.loaded=c&&d}},{key:"_exposeLd",value:function(a){if(a["@context"]){var b=z.shallowcopy(a);delete b.domain,delete b.ranges,this.ld=JSON.parse(JSON.stringify(b))}}},{key:"loadDomain",value:function(){var a=this,b=this._covjson.domain;if(this._domainPromise)return this._domainPromise;var c=void 0;if("object"===("undefined"==typeof b?"undefined":r(b))){var d=b;m(d,this.options.referencing,this.domainType),c=Promise.resolve(d)}else{var e=b;c=A.load(e).then(function(b){var c=b.data;return m(c,a.options.referencing,a.domainType),a._covjson.domain=c,a._updateLoadStatus(),c})}return this._domainPromise=c,c}},{key:"loadRange",value:function(a){var b=this;return this.loadDomain().then(function(c){var d=b._covjson.ranges[a];if("object"===("undefined"==typeof d?"undefined":r(d))){var e=d;return k(e,c),Promise.resolve(e)}var f=d;return A.load(f).then(function(d){var e=d.data;return k(e,c),b.options.cacheRanges&&(b._covjson.ranges[a]=e,b._updateLoadStatus()),e})})}},{key:"loadRanges",value:function(a){var b=this;return void 0===a&&(a=this.parameters.keys()),a=Array.from(a),Promise.all(a.map(function(a){return b.loadRange(a)})).then(function(b){for(var c=new Map,d=0;d<a.length;d++)c.set(a[d],b[d]);return c})}},{key:"subsetByIndex",value:function(a){return i(this,a)}},{key:"subsetByValue",value:function(a){return w.subsetByValue(this,a)}}]),a}();return b["default"]=B,o.define=p,c.exports}),a.registerDynamic("9e",["88","86","89","87","8d"],!0,function(a,b,c){function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){return u.load(a,b)}function g(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return"object"===("undefined"==typeof a?"undefined":m(a))?Promise.resolve().then(function(){return h(a)}):f(a,b).then(function(a){var b=a.data,c=a.headers;return h(b,c)})}function h(a,b){if(j(a),-1===[s.COVERAGE,s.COVERAGECOLLECTION,s.DOMAIN].indexOf(a.type))throw new Error("CoverageJSON document must be of Coverage, CoverageCollection, or Domain type");var c=void 0;return a.type===s.DOMAIN?(n.transformDomain(a),c=a):c=a.type===s.COVERAGE?new o["default"](a):new q["default"](a),(a.type===s.COVERAGE||a.type===s.COVERAGECOLLECTION)&&i(c,b),c}function i(a,b){if(b&&b.link){var c=a.ld,d=!0,e=!1,f=void 0;try{for(var g,h=b.link.split(",")[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;i=i.trim();var j=i.split(";"),k=j[0].substr(1,j[0].length-2),l=!0,m=!1,n=void 0;try{for(var o,p=j.slice(1)[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value,r=q.indexOf("rel=");if(-1!==r){var t=q.substring(r+5,q.length-1);t.startsWith("http://")||t.startsWith("https://")||(t=s.LINKRELPREFIX+t),c[t]?Array.isArray(c[t])?c[t].push(k):c[t]=[c[t],k]:c[t]=k}}}catch(u){m=!0,n=u}finally{try{!l&&p["return"]&&p["return"]()}finally{if(m)throw n}}}}catch(u){e=!0,f=u}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}}}function j(a){r.assert("type"in a,'"type" missing'),a.type===s.COVERAGE?(r.assert("parameters"in a,'"parameters" missing'),r.assert("domain"in a,'"domain" missing'),r.assert("ranges"in a,'"ranges" missing')):a.type===s.COVERAGECOLLECTION&&r.assert(Array.isArray(a.coverages),'"coverages" must be an array')}var k=this,l=k.define;k.define=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};Object.defineProperty(b,"__esModule",{value:!0}),b.load=f,b.read=g;var n=a("88"),o=e(n),p=a("86"),q=e(p),r=a("89"),s=a("87"),t=a("8d"),u=d(t);return k.define=l,c.exports}),a.registerDynamic("7c",["9e"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("9e"),d.define=e,c.exports}),a.register("77",["7c","7d","1a"],function(a){"use strict";var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a["default"]}],execute:function(){e=function(a){function d(a){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a),this.label="CoverageJSON",this.shortLabel="CovJSON",this.mediaTypes=["application/prs.coverage+json"]}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"doLoad",value:function(a,d){return"object"==typeof a&&a.loadDomain?Promise.resolve(a):b.read(a,d).then(function(a){return c.wrap(a,{loader:b.read})})}}]),d}(d),a("default",e)}}}),a.register("7a",["a"],function(a){"use strict";var b,c;return{setters:[function(a){b=a["default"]}],execute:function(){c=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.actionClasses=a||[],this.label=void 0,this.shortLabel=void 0,this.mediaTypes=void 0}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"supports",value:function(a){return a&&this.mediaTypes.some(function(b){return a.toLowerCase().startsWith(b)})}},{key:"getActions",value:function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=this.actionClasses[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=new i(a,b);j.isSupported&&(c.push(j),this.fire("actionCreate",{action:j}))}}catch(k){e=!0,f=k}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}},{key:"load",value:function(a,b){var c=this;return this.fire("loading"),this.doLoad(a,b).then(function(a){return c.fire("load"),a})["catch"](function(a){throw c.fire("loadError",{error:a}),a})}}]),b}(b),a("default",c)}}}),a.register("1a",["7a"],function(a){"use strict";var b,c;return{setters:[function(a){b=a["default"]}],execute:function(){c=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.label="Coverage data",this.shortLabel="Coverage data",this.mediaTypes=["coveragedata"]}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"doLoad",value:function(a){return Promise.resolve(a)}},{key:"getMetadata",value:function(a){var b=void 0;return b=a.coverages?a.paging?a.paging.total:a.coverages.length:1,{format:this.label,content:1===b?"1 coverage":b+" coverages"}}}]),b}(b),a("default",c)}}}),a.register("9f",["a"],function(a){"use strict";var b,c;return{setters:[function(a){b=a["default"]}],execute:function(){c=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this._datasets=new Map,this._formats=a,this._staticActionContext={}}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"addStaticActionContext",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=Object.keys(a)[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._staticActionContext[g]=a[g]}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}},{key:"addDataset",value:function(a,b){a.id||(a.id=(new Date).getTime()),this._datasets.has(a.id)||(a.virtual||(a=JSON.parse(JSON.stringify(a))),this._datasets.set(a.id,a),this.fire("add",{dataset:a,parent:b}),this._loadDistribution(a))}},{key:"removeDataset",value:function(a){if(this._datasets.has(a.id)){var b=!0,c=!1,d=void 0;try{for(var e,f=(a.distributions.filter(function(a){return"actions"in a})[Symbol.iterator]());!(b=(e=f.next()).done);b=!0){var g=e.value,h=!0,i=!1,j=void 0;try{for(var k,l=g.actions[Symbol.iterator]();!(h=(k=l.next()).done);h=!0){var m=k.value;m.remove()}}catch(n){i=!0,j=n}finally{try{!h&&l["return"]&&l["return"]()}finally{if(i)throw j}}}}catch(n){c=!0,d=n}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}this._datasets["delete"](a.id),this.fire("remove",{dataset:a})}}},{key:"requestFocus",value:function(a){this.fire("requestFocus",{dataset:a})}},{key:"setDatasetTitle",value:function(a,b){var c=a.title,d={unknown:b};a.title=d,this.fire("titleChange",{dataset:a,oldTitle:c,newTitle:d})}},{key:"filterDistributions",value:function(a){var b=[],c=!0,d=!1,e=void 0;try{for(var f,g=this.datasets[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=!0,j=!1,k=void 0;try{for(var l,m=h.distributions[Symbol.iterator]();!(i=(l=m.next()).done);i=!0){var n=l.value;a(n)&&b.push({distribution:n,dataset:h})}}catch(o){j=!0,k=o}finally{try{!i&&m["return"]&&m["return"]()}finally{if(j)throw k}}}}catch(o){d=!0,e=o}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return b}},{key:"_loadDistribution",value:function(a){var b=this;this.fire("distributionsLoading",{dataset:a});var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=function(){var d=g.value;j=!0,k=!1,l=void 0;try{var e=function(){var e=n.value;if(e.supports(d.mediaType)){b.fire("distributionLoading",{dataset:a,distribution:d});var f=d.url||d.data;d.formatImpl=e;var g=e.load(f).then(function(c){var f=e.getMetadata(c),g={dataset:a,distribution:d,workspace:b};for(var h in b._staticActionContext)g[h]=b._staticActionContext[h];var i=e.getActions(c,g);d.metadata=f,d.actions=i,d.data=c,b.fire("distributionLoad",{dataset:a,distribution:d})})["catch"](function(c){d.error=c,b.fire("distributionLoadError",{dataset:a,distribution:d,error:c}),console.log(c)});c.push(g)}};for(m=b._formats[Symbol.iterator]();!(j=(n=m.next()).done);j=!0)e()}catch(f){k=!0,l=f}finally{try{!j&&m["return"]&&m["return"]()}finally{if(k)throw l}}},i=a.distributions[Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j,k,l,m,n;h()}}catch(o){e=!0,f=o}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw f}}Promise.all(c).then(function(){b.fire("distributionsLoad",{dataset:a})})}},{key:"datasets",get:function(){return[].concat(babelHelpers.toConsumableArray(this._datasets.values()))}}]),b}(b),a("default",c)}}}),a.registerDynamic("a0",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,d.define=e,c.exports}),a.registerDynamic("a1",["2e"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(a){(function(){"use strict";function b(a){return"function"==typeof a||"object"==typeof a&&null!==a}function e(a){return"function"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(){}function h(){return function(){a.nextTick(l)}}function i(){var a=0,b=new O(l),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function j(){var a=new MessageChannel;return a.port1.onmessage=l,function(){a.port2.postMessage(0)}}function k(){return function(){setTimeout(l,1)}}function l(){for(var a=0;L>a;a+=2){var b=Q[a],c=Q[a+1];b(c),Q[a]=void 0,Q[a+1]=void 0}L=0}function m(){}function n(){return new TypeError("You cannot resolve a promise with itself")}function o(){return new TypeError("A promises callback cannot return that same promise.")}function p(a){try{return a.then}catch(b){return U.error=b,U}}function q(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function r(a,b,c){M(function(a){var d=!1,e=q(c,b,function(c){d||(d=!0,b!==c?u(a,c):w(a,c))},function(b){d||(d=!0,x(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,x(a,e))},a)}function s(a,b){b._state===S?w(a,b._result):a._state===T?x(a,b._result):y(b,void 0,function(b){u(a,b)},function(b){x(a,b)})}function t(a,b){if(b.constructor===a.constructor)s(a,b);else{var c=p(b);c===U?x(a,U.error):void 0===c?w(a,b):e(c)?r(a,b,c):w(a,b)}}function u(a,c){a===c?x(a,n()):b(c)?t(a,c):w(a,c)}function v(a){a._onerror&&a._onerror(a._result),z(a)}function w(a,b){a._state===R&&(a._result=b,a._state=S,0===a._subscribers.length||M(z,a))}function x(a,b){a._state===R&&(a._state=T,a._result=b,M(v,a))}function y(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+S]=c,e[f+T]=d,0===f&&a._state&&M(z,a)}function z(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a._subscribers.length=0}}function A(){this.error=null}function B(a,b){try{return a(b)}catch(c){return V.error=c,V}}function C(a,b,c,d){var f,g,h,i,j=e(c);if(j){if(f=B(c,d),f===V?(i=!0,g=f.error,f=null):h=!0,b===f)return void x(b,o())}else f=d,h=!0;b._state!==R||(j&&h?u(b,f):i?x(b,g):a===S?w(b,f):a===T&&x(b,f))}function D(a,b){try{b(function(b){u(a,b)},function(b){x(a,b)})}catch(c){x(a,c)}}function E(a,b,c,d){this._instanceConstructor=a,this.promise=new a(m,d),this._abortOnReject=c,this._validateInput(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._init(),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):x(this.promise,this._validationError())}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(a){this._id=_++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==a&&(e(a)||F(),this instanceof H||G(),D(this,a))}var I;I=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var J,K=I,L=(Date.now||function(){return(new Date).getTime()},Object.create||function(a){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof a)throw new TypeError("Argument must be an object");return g.prototype=a,new g},0),M=function(a,b){Q[L]=a,Q[L+1]=b,L+=2,2===L&&J()},N="undefined"!=typeof window?window:{},O=N.MutationObserver||N.WebKitMutationObserver,P="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=new Array(1e3);J="undefined"!=typeof a&&"[object process]"==={}.toString.call(a)?h():O?i():P?j():k();var R=void 0,S=1,T=2,U=new A,V=new A;E.prototype._validateInput=function(a){return K(a)},E.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},E.prototype._init=function(){this._result=new Array(this.length)};var W=E;E.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;b._state===R&&a>d;d++)this._eachEntry(c[d],d)},E.prototype._eachEntry=function(a,b){var c=this._instanceConstructor;f(a)?a.constructor===c&&a._state!==R?(a._onerror=null,this._settledAt(a._state,b,a._result)):this._willSettleAt(c.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(S,b,a))},E.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===R&&(this._remaining--,this._abortOnReject&&a===T?x(d,c):this._result[b]=this._makeResult(a,b,c)),0===this._remaining&&w(d,this._result)},E.prototype._makeResult=function(a,b,c){return c},E.prototype._willSettleAt=function(a,b){var c=this;y(a,void 0,function(a){c._settledAt(S,b,a)},function(a){c._settledAt(T,b,a)})};var X=function(a,b){return new W(this,a,!0,b).promise},Y=function(a,b){function c(a){u(f,a)}function d(a){x(f,a)}var e=this,f=new e(m,b);if(!K(a))return x(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;f._state===R&&g>h;h++)y(e.resolve(a[h]),void 0,c,d);return f},Z=function(a,b){var c=this;if(a&&"object"==typeof a&&a.constructor===c)return a;var d=new c(m,b);return u(d,a),d},$=function(a,b){var c=this,d=new c(m,b);return x(d,a),d},_=0,aa=H;H.all=X,H.race=Y,H.resolve=Z,H.reject=$,H.prototype={constructor:H,then:function(a,b){var c=this,d=c._state;if(d===S&&!a||d===T&&!b)return this;var e=new this.constructor(m),f=c._result;if(d){var g=arguments[d-1];M(function(){C(d,e,g,f)})}else y(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var ba=function(){var a;a="undefined"!=typeof d?d:"undefined"!=typeof window&&window.document?window:self;var b="Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),e(b)}();b||(a.Promise=aa)},ca={Promise:aa,polyfill:ba};"function"==typeof define&&define.amd?define(function(){return ca}):"undefined"!=typeof c&&c.exports?c.exports=ca:"undefined"!=typeof this&&(this.ES6Promise=ca)}).call(this)}(a("2e")),d.define=e,c.exports}),a.registerDynamic("a2",["a1"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("a1"),d.define=e,c.exports}),a.registerDynamic("a3",["a2","a0","2e"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=(c.id,c.id.split("/").splice(0,c.id.split("/").length-1).join("/"));return function(b){!function(){var e="undefined"!=typeof b&&b.versions&&b.versions.node,g=!e&&("undefined"!=typeof window||"undefined"!=typeof self);g&&"undefined"==typeof d&&("undefined"!=typeof window?d=window:"undefined"!=typeof self?d=self:"undefined"!=typeof $&&(d=$));var h=function(c){function h(){}function i(a){for(var b=[],c=Object.keys(a).sort(),d=0;d<c.length;++d){var e=c[d],f=a[e];O(f)||(f=[f]);for(var g=0;g<f.length;++g){var h=f[g];if(null!==h){if(!Q(h))throw new Ga("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:a});b.push({"@value":h,"@language":e.toLowerCase()})}}}return b}function j(a,b){if(O(b))for(var c=0;c<b.length;++c)b[c]=j(a,b[c]);else if(Z(b))b["@list"]=j(a,b["@list"]);else if(M(b)){$(b)&&(b["@id"]=a.getId(b["@id"]));for(var d=Object.keys(b).sort(),e=0;e<d.length;++e){var f=d[e];"@id"!==f&&(b[f]=j(a,b[f]))}}return b}function k(a,b,d){if(null===d||void 0===d)return null;var e=H(a,b,{vocab:!0});if("@id"===e)return H(a,d,{base:!0});if("@type"===e)return H(a,d,{vocab:!0,base:!0});var f=c.getContextValue(a,b,"@type");if("@id"===f||"@graph"===e&&Q(d))return{"@id":H(a,d,{base:!0})};if("@vocab"===f)return{"@id":H(a,d,{vocab:!0,base:!0})};if(L(e))return d;var g={};if(null!==f)g["@type"]=f;else if(Q(d)){var h=c.getContextValue(a,b,"@language");null!==h&&(g["@language"]=h)}return-1===["boolean","number","string"].indexOf(typeof d)&&(d=d.toString()),g["@value"]=d,g}function l(a,b,c){for(var d=[],e=Object.keys(a).sort(),f=0;f<e.length;++f)for(var g=e[f],h=a[g],i=Object.keys(h).sort(),j=0;j<i.length;++j){var k=i[j],l=h[k];if("@type"===k)k=za;else if(L(k))continue;for(var o=0;o<l.length;++o){var p=l[o],q={};if(q.type=0===g.indexOf("_:")?"blank node":"IRI",q.value=g,_(g)){var r={};if(r.type=0===k.indexOf("_:")?"blank node":"IRI",r.value=k,_(k)&&("blank node"!==r.type||c.produceGeneralizedRdf))if(Z(p))m(p["@list"],b,q,r,d);else{var s=n(p);s&&d.push({subject:q,predicate:r,object:s})}}}}return d}function m(a,b,c,d,e){for(var f={type:"IRI",value:wa},g={type:"IRI",value:xa},h={type:"IRI",value:ya},i=0;i<a.length;++i){var j=a[i],k={type:"blank node",value:b.getId()};e.push({subject:c,predicate:d,object:k}),c=k,d=f;var l=n(j);l&&e.push({subject:c,predicate:d,object:l}),d=g}e.push({subject:c,predicate:d,object:h})}function n(a){var b={};if(Y(a)){b.type="literal";var c=a["@value"],d=a["@type"]||null;U(c)?(b.value=c.toString(),b.datatype=d||qa):S(c)||d===ra?(S(c)||(c=parseFloat(c)),b.value=c.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),b.datatype=d||ra):R(c)?(b.value=c.toFixed(0),b.datatype=d||sa):"@language"in a?(b.value=c,b.datatype=d||Da,b.language=a["@language"]):(b.value=c,b.datatype=d||ta)}else{var e=M(a)?a["@id"]:a;b.type=0===e.indexOf("_:")?"blank node":"IRI",b.value=e}return"IRI"!==b.type||_(b.value)?b:null}function o(a,b){if("IRI"===a.type||"blank node"===a.type)return{"@id":a.value};var c={"@value":a.value};if(a.language)c["@language"]=a.language;else{var d=a.datatype;if(d||(d=ta),b){if(d===qa)"true"===c["@value"]?c["@value"]=!0:"false"===c["@value"]&&(c["@value"]=!1);else if(T(c["@value"]))if(d===sa){var e=parseInt(c["@value"],10);e.toFixed(0)===c["@value"]&&(c["@value"]=e)}else d===ra&&(c["@value"]=parseFloat(c["@value"]));-1===[qa,sa,ra,ta].indexOf(d)&&(c["@type"]=d)}else d!==ta&&(c["@type"]=d)}return c}function p(a,b){for(var c=["subject","predicate","object"],d=0;d<c.length;++d){var e=c[d];if(a[e].type!==b[e].type||a[e].value!==b[e].value)return!1}return a.object.language!==b.object.language?!1:a.object.datatype!==b.object.datatype?!1:!0}function q(a,b,d,e,f,g){if(O(a))for(var h=0;h<a.length;++h)q(a[h],b,d,e,void 0,g);else{if(!M(a))return void(g&&g.push(a));if(Y(a)){if("@type"in a){var i=a["@type"];0===i.indexOf("_:")&&(a["@type"]=i=e.getId(i))}return void(g&&g.push(a))}if("@type"in a)for(var j=a["@type"],h=0;h<j.length;++h){var i=j[h];0===i.indexOf("_:")&&e.getId(i)}V(f)&&(f=$(a)?e.getId(a["@id"]):a["@id"]),g&&g.push({"@id":f});var k=b[d],l=k[f]=k[f]||{};l["@id"]=f;for(var m=Object.keys(a).sort(),n=0;n<m.length;++n){var o=m[n];if("@id"!==o)if("@reverse"!==o)if("@graph"!==o)if("@type"!==o&&L(o)){if("@index"===o&&o in l&&(a[o]!==l[o]||a[o]["@id"]!==l[o]["@id"]))throw new Ga("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:l});l[o]=a[o]}else{var p=a[o];if(0===o.indexOf("_:")&&(o=e.getId(o)),0!==p.length)for(var r=0;r<p.length;++r){var s=p[r];if("@type"===o&&(s=0===s.indexOf("_:")?e.getId(s):s),W(s)||X(s)){var t=$(s)?e.getId(s["@id"]):s["@id"];c.addValue(l,o,{"@id":t},{propertyIsArray:!0,allowDuplicate:!1}),q(s,b,d,e,t)}else if(Z(s)){var u=[];q(s["@list"],b,d,e,f,u),s={"@list":u},c.addValue(l,o,s,{propertyIsArray:!0,allowDuplicate:!1})}else q(s,b,d,e,f),c.addValue(l,o,s,{propertyIsArray:!0,allowDuplicate:!1})}else c.addValue(l,o,[],{propertyIsArray:!0})}else{f in b||(b[f]={});var v="@merged"===d?d:f;q(a[o],b,v,e)}else{var w={"@id":f},x=a["@reverse"];for(var y in x)for(var z=x[y],A=0;A<z.length;++A){var B=z[A],C=B["@id"];$(B)&&(C=e.getId(C)),q(B,b,d,e,C),c.addValue(k[C],y,w,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function r(a){for(var b=a["@default"],c=Object.keys(a).sort(),d=0;d<c.length;++d){var e=c[d];if("@default"!==e){var f=a[e],g=b[e];g?"@graph"in g||(g["@graph"]=[]):b[e]=g={"@id":e,"@graph":[]};for(var h=g["@graph"],i=Object.keys(f).sort(),j=0;j<i.length;++j){var k=f[i[j]];X(k)||h.push(k)}}}return b}function s(a,b,c,d,e){w(c),c=c[0];for(var f=a.options,g={embed:v(c,f,"embed"),explicit:v(c,f,"explicit"),requireAll:v(c,f,"requireAll")},h=x(a,b,c,g),i=Object.keys(h).sort(),j=0;j<i.length;++j){var k=i[j],l=h[k];if("@link"===g.embed&&k in a.link)A(d,e,a.link[k]);else{null===e&&(a.uniqueEmbeds={});var m={};if(m["@id"]=k,a.link[k]=m,"@never"===g.embed||u(l,a.subjectStack))A(d,e,m);else{"@last"===g.embed&&(k in a.uniqueEmbeds&&z(a,k),a.uniqueEmbeds[k]={parent:d,property:e}),a.subjectStack.push(l);for(var n=Object.keys(l).sort(),o=0;o<n.length;o++){var p=n[o];if(L(p))m[p]=aa(l[p]);else if(!g.explicit||p in c)for(var q=l[p],r=0;r<q.length;++r){var y=q[r];if(Z(y)){var B={"@list":[]};A(m,p,B);var C=y["@list"];for(var D in C)if(y=C[D],X(y)){var E=p in c?c[p][0]["@list"]:t(g);s(a,[y["@id"]],E,B,"@list")}else A(B,"@list",aa(y))}else if(X(y)){var E=p in c?c[p]:t(g);s(a,[y["@id"]],E,m,p)}else A(m,p,aa(y))}}for(var n=Object.keys(c).sort(),o=0;o<n.length;++o){var p=n[o];if(!L(p)){var F=c[p][0],G=v(F,f,"omitDefault");if(!(G||p in m)){var H="@null";"@default"in F&&(H=aa(F["@default"])),O(H)||(H=[H]),m[p]=[{"@preserve":H}]}}}A(d,e,m),a.subjectStack.pop()}}}}function t(a){var b={};for(var c in a)void 0!==a[c]&&(b["@"+c]=[a[c]]);return[b]}function u(a,b){for(var c=b.length-1;c>=0;--c)if(b[c]["@id"]===a["@id"])return!0;return!1}function v(a,b,c){var d="@"+c,e=d in a?a[d][0]:b[c];return"embed"===c&&(e===!0?e="@last":e===!1?e="@never":"@always"!==e&&"@never"!==e&&"@link"!==e&&(e="@last")),e}function w(a){if(!O(a)||1!==a.length||!M(a[0]))throw new Ga("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:a})}function x(a,b,c,d){for(var e={},f=0;f<b.length;++f){var g=b[f],h=a.subjects[g];y(h,c,d)&&(e[g]=h)}return e}function y(a,b,d){if("@type"in b&&(1!==b["@type"].length||!M(b["@type"][0]))){for(var e=b["@type"],f=0;f<e.length;++f)if(c.hasValue(a,"@type",e[f]))return!0;return!1;
}var g=!0,h=!1;for(var i in b){if(L(i)){if("@id"!==i&&"@type"!==i)continue;if(g=!1,"@id"===i&&Q(b[i])){if(a[i]!==b[i])return!1;h=!0;continue}}if(g=!1,i in a){if(O(b[i])&&0===b[i].length&&void 0!==a[i])return!1;h=!0}else{var j=O(b[i])&&M(b[i][0])&&"@default"in b[i][0];if(d.requireAll&&!j)return!1}}return g||h}function z(a,b){var d=a.uniqueEmbeds,e=d[b],f=e.parent,g=e.property,h={"@id":b};if(O(f)){for(var i=0;i<f.length;++i)if(c.compareValues(f[i],h)){f[i]=h;break}}else{var j=O(f[g]);c.removeValue(f,g,h,{propertyIsArray:j}),c.addValue(f,g,h,{propertyIsArray:j})}var k=function(a){for(var b=Object.keys(d),c=0;c<b.length;++c){var e=b[c];e in d&&M(d[e].parent)&&d[e].parent["@id"]===a&&(delete d[e],k(e))}};k(b)}function A(a,b,d){M(a)?c.addValue(a,b,d,{propertyIsArray:!0}):a.push(d)}function B(a,b,d){if(O(b)){for(var e=[],f=0;f<b.length;++f){var g=B(a,b[f],d);null!==g&&e.push(g)}b=e}else if(M(b)){if("@preserve"in b)return"@null"===b["@preserve"]?null:b["@preserve"];if(Y(b))return b;if(Z(b))return b["@list"]=B(a,b["@list"],d),b;var h=E(a,"@id");if(h in b){var i=b[h];if(i in d.link){var j=d.link[i].indexOf(b);if(-1!==j)return d.link[i][j];d.link[i].push(b)}else d.link[i]=[b]}for(var k in b){var g=B(a,b[k],d),l=c.getContextValue(a,k,"@container");d.compactArrays&&O(g)&&1===g.length&&null===l&&(g=g[0]),b[k]=g}}return b}function C(a,b){return a.length<b.length?-1:b.length<a.length?1:a===b?0:b>a?-1:1}function D(a,b,c,d,e,f){null===f&&(f="@null");var g=[];if("@id"!==f&&"@reverse"!==f||!X(c))g.push(f);else{"@reverse"===f&&g.push("@reverse");var h=E(a,c["@id"],null,{vocab:!0});h in a.mappings&&a.mappings[h]&&a.mappings[h]["@id"]===c["@id"]?g.push.apply(g,["@vocab","@id"]):g.push.apply(g,["@id","@vocab"])}g.push("@none");for(var i=a.inverse[b],j=0;j<d.length;++j){var k=d[j];if(k in i)for(var l=i[k][e],m=0;m<g.length;++m){var n=g[m];if(n in l)return l[n]}}return null}function E(a,b,c,d,e){if(null===b)return b;if(V(c)&&(c=null),V(e)&&(e=!1),d=d||{},L(b)&&(d.vocab=!0),d.vocab&&b in a.getInverse()){var f=a["@language"]||"@none",g=[];M(c)&&"@index"in c&&g.push("@index");var h="@language",i="@null";if(e)h="@type",i="@reverse",g.push("@set");else if(Z(c)){"@index"in c||g.push("@list");for(var j=c["@list"],k=0===j.length?f:null,l=null,m=0;m<j.length;++m){var n=j[m],o="@none",p="@none";if(Y(n)?"@language"in n?o=n["@language"]:"@type"in n?p=n["@type"]:o="@null":p="@id",null===k?k=o:o!==k&&Y(n)&&(k="@none"),null===l?l=p:p!==l&&(l="@none"),"@none"===k&&"@none"===l)break}k=k||"@none",l=l||"@none","@none"!==l?(h="@type",i=l):i=k}else Y(c)?"@language"in c&&!("@index"in c)?(g.push("@language"),i=c["@language"]):"@type"in c&&(h="@type",i=c["@type"]):(h="@type",i="@id"),g.push("@set");g.push("@none");var q=D(a,b,c,g,h,i);if(null!==q)return q}if(d.vocab&&"@vocab"in a){var r=a["@vocab"];if(0===b.indexOf(r)&&b!==r){var s=b.substr(r.length);if(!(s in a.mappings))return s}}var t=null;for(var q in a.mappings)if(-1===q.indexOf(":")){var u=a.mappings[q];if(u&&u["@id"]!==b&&0===b.indexOf(u["@id"])){var v=q+":"+b.substr(u["@id"].length),w=!(v in a.mappings)||null===c&&a.mappings[v]&&a.mappings[v]["@id"]===b;w&&(null===t||C(v,t)<0)&&(t=v)}}return null!==t?t:d.vocab?b:J(a["@base"],b)}function F(a,b,d){if(Y(d)){var e=c.getContextValue(a,b,"@type"),f=c.getContextValue(a,b,"@language"),g=c.getContextValue(a,b,"@container"),h="@index"in d&&"@index"!==g;if(!h&&(d["@type"]===e||d["@language"]===f))return d["@value"];var i=Object.keys(d).length,j=1===i||2===i&&"@index"in d&&!h,k="@language"in a,l=Q(d["@value"]),m=a.mappings[b]&&null===a.mappings[b]["@language"];if(j&&(!k||!l||m))return d["@value"];var n={};return h&&(n[E(a,"@index")]=d["@index"]),"@type"in d?n[E(a,"@type")]=E(a,d["@type"],null,{vocab:!0}):"@language"in d&&(n[E(a,"@language")]=d["@language"]),n[E(a,"@value")]=d["@value"],n}var o=H(a,b,{vocab:!0}),e=c.getContextValue(a,b,"@type"),p=E(a,d["@id"],null,{vocab:"@vocab"===e});if("@id"===e||"@vocab"===e||"@graph"===o)return p;var n={};return n[E(a,"@id")]=p,n}function G(a,b,c,d){if(c in d){if(d[c])return;throw new Ga("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:b,term:c})}if(d[c]=!1,L(c))throw new Ga("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:b,term:c});if(""===c)throw new Ga("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:b});a.mappings[c]&&delete a.mappings[c];var e=b[c];if(null===e||M(e)&&null===e["@id"])return a.mappings[c]=null,void(d[c]=!0);if(Q(e)&&(e={"@id":e}),!M(e))throw new Ga("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:b});var f=a.mappings[c]={};if(f.reverse=!1,"@reverse"in e){if("@id"in e)throw new Ga("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});var g=e["@reverse"];if(!Q(g))throw new Ga("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});var h=H(a,g,{vocab:!0,base:!1},b,d);if(!_(h))throw new Ga("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h,f.reverse=!0}else if("@id"in e){var h=e["@id"];if(!Q(h))throw new Ga("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});if(h!==c){if(h=H(a,h,{vocab:!0,base:!1},b,d),!_(h)&&!L(h))throw new Ga("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h}}if(!("@id"in f)){var i=c.indexOf(":");if(-1!==i){var j=c.substr(0,i);if(j in b&&G(a,b,j,d),a.mappings[j]){var k=c.substr(i+1);f["@id"]=a.mappings[j]["@id"]+k}else f["@id"]=c}else{if(!("@vocab"in a))throw new Ga("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b,term:c});f["@id"]=a["@vocab"]+c}}if(d[c]=!0,"@type"in e){var l=e["@type"];if(!Q(l))throw new Ga("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if("@id"!==l&&"@vocab"!==l){if(l=H(a,l,{vocab:!0,base:!1},b,d),!_(l))throw new Ga("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if(0===l.indexOf("_:"))throw new Ga("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:b})}f["@type"]=l}if("@container"in e){var m=e["@container"];if("@list"!==m&&"@set"!==m&&"@index"!==m&&"@language"!==m)throw new Ga("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:b});if(f.reverse&&"@index"!==m&&"@set"!==m&&null!==m)throw new Ga("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});f["@container"]=m}if("@language"in e&&!("@type"in e)){var n=e["@language"];if(null!==n&&!Q(n))throw new Ga("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:b});null!==n&&(n=n.toLowerCase()),f["@language"]=n}var h=f["@id"];if("@context"===h||"@preserve"===h)throw new Ga("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:b})}function H(a,b,d,e,f){if(null===b||L(b))return b;if(b=String(b),e&&b in e&&f[b]!==!0&&G(a,e,b,f),d=d||{},d.vocab){var g=a.mappings[b];if(null===g)return null;if(g)return g["@id"]}var h=b.indexOf(":");if(-1!==h){var i=b.substr(0,h),j=b.substr(h+1);if("_"===i||0===j.indexOf("//"))return b;e&&i in e&&G(a,e,i,f);var g=a.mappings[i];return g?g["@id"]+j:b}if(d.vocab&&"@vocab"in a)return a["@vocab"]+b;var k=b;return d.base&&(k=c.prependBase(a["@base"],k)),k}function I(a,b){if(null===a)return b;if(-1!==b.indexOf(":"))return b;Q(a)&&(a=c.url.parse(a||""));var d=c.url.parse(b),e={protocol:a.protocol||""};if(null!==d.authority)e.authority=d.authority,e.path=d.path,e.query=d.query;else if(e.authority=a.authority,""===d.path)e.path=a.path,null!==d.query?e.query=d.query:e.query=a.query;else{if(0===d.path.indexOf("/"))e.path=d.path;else{var f=a.path;""!==d.path&&(f=f.substr(0,f.lastIndexOf("/")+1),f.length>0&&"/"!==f.substr(-1)&&(f+="/"),f+=d.path),e.path=f}e.query=d.query}e.path=ia(e.path,!!e.authority);var g=e.protocol;return null!==e.authority&&(g+="//"+e.authority),g+=e.path,null!==e.query&&(g+="?"+e.query),null!==d.fragment&&(g+="#"+d.fragment),""===g&&(g="./"),g}function J(a,b){if(null===a)return b;Q(a)&&(a=c.url.parse(a||""));var d="";if(""!==a.href?d+=(a.protocol||"")+"//"+(a.authority||""):b.indexOf("//")&&(d+="//"),0!==b.indexOf(d))return b;for(var e=c.url.parse(b.substr(d.length)),f=a.normalizedPath.split("/"),g=e.normalizedPath.split("/"),h=e.fragment||e.query?0:1;f.length>0&&g.length>h&&f[0]===g[0];)f.shift(),g.shift();var i="";if(f.length>0){f.pop();for(var j=0;j<f.length;++j)i+="../"}return i+=g.join("/"),null!==e.query&&(i+="?"+e.query),null!==e.fragment&&(i+="#"+e.fragment),""===i&&(i="./"),i}function K(a){function b(){var a=this;if(a.inverse)return a.inverse;for(var b=a.inverse={},c=a["@language"]||"@none",e=a.mappings,f=Object.keys(e).sort(C),g=0;g<f.length;++g){var h=f[g],i=e[h];if(null!==i){var j=i["@container"]||"@none",k=i["@id"];O(k)||(k=[k]);for(var l=0;l<k.length;++l){var m=k[l],n=b[m];if(n||(b[m]=n={}),n[j]||(n[j]={"@language":{},"@type":{}}),n=n[j],i.reverse)d(i,h,n["@type"],"@reverse");else if("@type"in i)d(i,h,n["@type"],i["@type"]);else if("@language"in i){var o=i["@language"]||"@null";d(i,h,n["@language"],o)}else d(i,h,n["@language"],c),d(i,h,n["@type"],"@none"),d(i,h,n["@language"],"@none")}}}return b}function d(a,b,c,d){d in c||(c[d]=b)}function e(){var a={};return a["@base"]=this["@base"],a.mappings=aa(this.mappings),a.clone=this.clone,a.inverse=null,a.getInverse=this.getInverse,"@language"in this&&(a["@language"]=this["@language"]),"@vocab"in this&&(a["@vocab"]=this["@vocab"]),a}var f=c.url.parse(a.base||"");return{"@base":f,mappings:{},inverse:null,getInverse:b,clone:e}}function L(a){if(!Q(a))return!1;switch(a){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function M(a){return"[object Object]"===Object.prototype.toString.call(a)}function N(a){return M(a)&&0===Object.keys(a).length}function O(a){return Array.isArray(a)}function P(a){if(!Q(a)&&!N(a)){var b=!1;if(O(a)){b=!0;for(var c=0;c<a.length;++c)if(!Q(a[c])){b=!1;break}}if(!b)throw new Ga('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:a})}}function Q(a){return"string"==typeof a||"[object String]"===Object.prototype.toString.call(a)}function R(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function S(a){return R(a)&&-1!==String(a).indexOf(".")}function T(a){return!isNaN(parseFloat(a))&&isFinite(a)}function U(a){return"boolean"==typeof a||"[object Boolean]"===Object.prototype.toString.call(a)}function V(a){return"undefined"==typeof a}function W(a){var b=!1;if(M(a)&&!("@value"in a||"@set"in a||"@list"in a)){var c=Object.keys(a).length;b=c>1||!("@id"in a)}return b}function X(a){return M(a)&&1===Object.keys(a).length&&"@id"in a}function Y(a){return M(a)&&"@value"in a}function Z(a){return M(a)&&"@list"in a}function $(a){var b=!1;return M(a)&&(b="@id"in a?0===a["@id"].indexOf("_:"):0===Object.keys(a).length||!("@value"in a||"@set"in a||"@list"in a)),b}function _(a){return Q(a)&&-1!==a.indexOf(":")}function aa(a){if(a&&"object"==typeof a){var b;if(O(a)){b=[];for(var c=0;c<a.length;++c)b[c]=aa(a[c])}else if(M(a)){b={};for(var d in a)b[d]=aa(a[d])}else b=a.toString();return b}return a}function ba(a,b,d,e){var f=Object.keys(b).length;if(O(a)){for(var g=0;g<a.length;++g)ba(a[g],b,d,e);return f<Object.keys(b).length}if(M(a)){for(var h in a)if("@context"===h){var i=a[h];if(O(i))for(var j=i.length,g=0;j>g;++g){var k=i[g];Q(k)&&(k=c.prependBase(e,k),d?(k=b[k],O(k)?(Array.prototype.splice.apply(i,[g,1].concat(k)),g+=k.length-1,j=i.length):i[g]=k):k in b||(b[k]=!1))}else Q(i)&&(i=c.prependBase(e,i),d?a[h]=b[i]:i in b||(b[i]=!1))}else ba(a[h],b,d,e);return f<Object.keys(b).length}return!1}function ca(a,b,c){var d=null,e=b.documentLoader,f=function(a,b,c,e,g){if(Object.keys(b).length>Fa)return d=new Ga("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Fa}),g(d);var h={},i=function(){ba(a,h,!0,e),g(null,a)};ba(a,h,!1,e)||i();var j=[];for(var k in h)h[k]===!1&&j.push(k);for(var l=j.length,m=0;m<j.length;++m)!function(a){if(a in b)return d=new Ga("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:a}),g(d);var e=aa(b);e[a]=!0;var j=function(b,j){if(!d){var k=j?j.document:null;if(!b&&Q(k))try{k=JSON.parse(k)}catch(m){b=m}if(b?b=new Ga("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:a,cause:b}):M(k)||(b=new Ga("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:a,cause:b})),b)return d=b,g(d);k="@context"in k?{"@context":k["@context"]}:{"@context":{}},j.contextUrl&&(O(k["@context"])||(k["@context"]=[k["@context"]]),k["@context"].push(j.contextUrl)),f(k,e,c,a,function(b,c){return b?g(b):(h[a]=c["@context"],l-=1,void(0===l&&i()))})}},k=c(a,j);k&&"then"in k&&k.then(j.bind(null,null),j)}(j[m])};f(a,{},e,b.base,c)}function da(a){for(var b="(?:<([^:]+:[^>]*)>)",c="(_:(?:[A-Za-z0-9]+))",d='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',e="(?:\\^\\^"+b+")",f="(?:@([a-z]+(?:-[a-z0-9]+)*))",g="(?:"+d+"(?:"+e+"|"+f+")?)",h="(?:#.*)?",i="[ \\t]+",j="[ \\t]*",k=/(?:\r\n)|(?:\n)|(?:\r)/g,l=new RegExp("^"+j+h+"$"),m="(?:"+b+"|"+c+")"+i,n=b+i,o="(?:"+b+"|"+c+"|"+g+")"+j,q="(?:\\.|(?:(?:"+b+"|"+c+")"+j+"\\.))",r=new RegExp("^"+j+m+n+o+q+j+h+"$"),s={},t=a.split(k),u=0,v=0;v<t.length;++v){var w=t[v];if(u++,!l.test(w)){var x=w.match(r);if(null===x)throw new Ga("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:u});var y={};if(V(x[1])?y.subject={type:"blank node",value:x[2]}:y.subject={type:"IRI",value:x[1]},y.predicate={type:"IRI",value:x[3]},V(x[4]))if(V(x[5])){y.object={type:"literal"},V(x[7])?V(x[8])?y.object.datatype=ta:(y.object.datatype=Da,y.object.language=x[8]):y.object.datatype=x[7];var z=x[6].replace(/\\"/g,'"').replace(/\\t/g,"	").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");y.object.value=z}else y.object={type:"blank node",value:x[5]};else y.object={type:"IRI",value:x[4]};var A="@default";if(V(x[9])?V(x[10])||(A=x[10]):A=x[9],A in s){for(var B=!0,C=s[A],D=0;B&&D<C.length;++D)p(C[D],y)&&(B=!1);B&&C.push(y)}else s[A]=[y]}}return s}function ea(a){var b=[];for(var c in a)for(var d=a[c],e=0;e<d.length;++e){var f=d[e];"@default"===c&&(c=null),b.push(fa(f,c))}return b.sort().join("")}function fa(a,b){var c=a.subject,d=a.predicate,e=a.object,f=b||null;"name"in a&&a.name&&(f=a.name.value);var g="";if(g+="IRI"===c.type?"<"+c.value+">":c.value,g+=" ",g+="IRI"===d.type?"<"+d.value+">":d.value,g+=" ","IRI"===e.type)g+="<"+e.value+">";else if("blank node"===e.type)g+=e.value;else{var h=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');g+='"'+h+'"',e.datatype===Da?e.language&&(g+="@"+e.language):e.datatype!==ta&&(g+="^^<"+e.datatype+">")}return null!==f&&void 0!==f&&(g+=0!==f.indexOf("_:")?" <"+f+">":" "+f),g+=" .\n"}function ga(a){var b={};b["@default"]=[];for(var c=a.getSubjects(),d=0;d<c.length;++d){var e=c[d];if(null!==e){var f=a.getSubjectTriples(e);if(null!==f){var g=f.predicates;for(var h in g)for(var i=g[h].objects,j=0;j<i.length;++j){var k=i[j],l={};0===e.indexOf("_:")?l.subject={type:"blank node",value:e}:l.subject={type:"IRI",value:e},0===h.indexOf("_:")?l.predicate={type:"blank node",value:h}:l.predicate={type:"IRI",value:h};var m=k.value;if(k.type===Ba){oa||Ma();var n=new oa;m="";for(var o=0;o<k.value.length;o++)k.value[o].nodeType===pa.ELEMENT_NODE?m+=n.serializeToString(k.value[o]):k.value[o].nodeType===pa.TEXT_NODE&&(m+=k.value[o].nodeValue)}l.object={},k.type===Ca?0===k.value.indexOf("_:")?l.object.type="blank node":l.object.type="IRI":(l.object.type="literal",k.type===Aa?k.language?(l.object.datatype=Da,l.object.language=k.language):l.object.datatype=ta:l.object.datatype=k.type),l.object.value=m,b["@default"].push(l)}}}}return b}function ha(a){this.prefix=a,this.counter=0,this.existing={}}function ia(a,b){var c="";0===a.indexOf("/")&&(c="/");for(var d=a.split("/"),e=[];d.length>0;)"."===d[0]||""===d[0]&&d.length>1?d.shift():".."!==d[0]?e.push(d.shift()):(d.shift(),b||e.length>0&&".."!==e[e.length-1]?e.pop():e.push(".."));return c+e.join("/")}c.compact=function(a,b,d,e){function f(a,c,d,f){if(a)return e(a);f.compactArrays&&!f.graph&&O(c)?1===c.length?c=c[0]:0===c.length&&(c={}):f.graph&&M(c)&&(c=[c]),M(b)&&"@context"in b&&(b=b["@context"]),b=aa(b),O(b)||(b=[b]);var g=b;b=[];for(var h=0;h<g.length;++h)(!M(g[h])||Object.keys(g[h]).length>0)&&b.push(g[h]);var i=b.length>0;if(1===b.length&&(b=b[0]),O(c)){var j=E(d,"@graph"),k=c;c={},i&&(c["@context"]=b),c[j]=k}else if(M(c)&&i){var k=c;c={"@context":b};for(var l in k)c[l]=k[l]}e(null,c,d)}if(arguments.length<2)return c.nextTick(function(){e(new TypeError("Could not compact, too few arguments."))});if("function"==typeof d&&(e=d,d={}),d=d||{},null===b)return c.nextTick(function(){e(new Ga("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===a)return c.nextTick(function(){e(null,null)});"base"in d||(d.base="string"==typeof a?a:""),"compactArrays"in d||(d.compactArrays=!0),"graph"in d||(d.graph=!1),"skipExpansion"in d||(d.skipExpansion=!1),"documentLoader"in d||(d.documentLoader=c.loadDocument),"link"in d||(d.link=!1),d.link&&(d.skipExpansion=!0);var g=function(a,b,d){c.nextTick(function(){return b.skipExpansion?d(null,a):void c.expand(a,b,d)})};g(a,d,function(a,g){if(a)return e(new Ga("Could not expand input before compaction.","jsonld.CompactError",{cause:a}));var h=K(d);c.processContext(h,b,d,function(a,b){if(a)return e(new Ga("Could not process context before compaction.","jsonld.CompactError",{cause:a}));var c;try{c=(new Ha).compact(b,null,g,d)}catch(h){return e(h)}f(null,c,b,d)})})},c.expand=function(a,b,d){function e(a){"base"in b||(b.base=a.documentUrl||"");var c={document:aa(a.document),remoteContext:{"@context":a.contextUrl}};if("expandContext"in b){var e=aa(b.expandContext);"object"==typeof e&&"@context"in e?c.expandContext=e:c.expandContext={"@context":e}}ca(c,b,function(a,c){if(a)return d(a);var e;try{var f=new Ha,g=K(b),h=c.document,i=c.remoteContext["@context"];c.expandContext&&(g=f.processContext(g,c.expandContext["@context"],b)),i&&(g=f.processContext(g,i,b)),e=f.expand(g,null,h,b,!1),M(e)&&"@graph"in e&&1===Object.keys(e).length?e=e["@graph"]:null===e&&(e=[]),O(e)||(e=[e])}catch(j){return d(j)}d(null,e)})}return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not expand, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"documentLoader"in b||(b.documentLoader=c.loadDocument),"keepFreeFloatingNodes"in b||(b.keepFreeFloatingNodes=!1),void c.nextTick(function(){if("string"==typeof a){var c=function(a,b){if(a)return d(a);try{if(!b.document)throw new Ga("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(c){return d(new Ga("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:c,remoteDoc:b}))}e(b)},f=b.documentLoader(a,c);return void(f&&"then"in f&&f.then(c.bind(null,null),c))}e({contextUrl:null,documentUrl:null,document:a})}))},c.flatten=function(a,b,d,e){return arguments.length<1?c.nextTick(function(){e(new TypeError("Could not flatten, too few arguments."))}):("function"==typeof d?(e=d,d={}):"function"==typeof b&&(e=b,b=null,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=c.loadDocument),void c.expand(a,d,function(a,f){if(a)return e(new Ga("Could not expand input before flattening.","jsonld.FlattenError",{cause:a}));var g;try{g=(new Ha).flatten(f)}catch(h){return e(h)}return null===b?e(null,g):(d.graph=!0,d.skipExpansion=!0,void c.compact(g,b,d,function(a,b){return a?e(new Ga("Could not compact flattened output.","jsonld.FlattenError",{cause:a})):void e(null,b)}))}))},c.frame=function(a,b,d,e){function f(b){var f,g=b.document;g?(f=g["@context"],b.contextUrl?(f?O(f)?f.push(b.contextUrl):f=[f,b.contextUrl]:f=b.contextUrl,g["@context"]=f):f=f||{}):f={},c.expand(a,d,function(a,b){if(a)return e(new Ga("Could not expand input before framing.","jsonld.FrameError",{cause:a}));var h=aa(d);h.isFrame=!0,h.keepFreeFloatingNodes=!0,c.expand(g,h,function(a,d){if(a)return e(new Ga("Could not expand frame before framing.","jsonld.FrameError",{cause:a}));var g;try{g=(new Ha).frame(b,d,h)}catch(i){return e(i)}h.graph=!0,h.skipExpansion=!0,h.link={},c.compact(g,f,h,function(a,b,c){if(a)return e(new Ga("Could not compact framed output.","jsonld.FrameError",{cause:a}));var d=E(c,"@graph");h.link={},b[d]=B(c,b[d],h),e(null,b)})})})}return arguments.length<2?c.nextTick(function(){e(new TypeError("Could not frame, too few arguments."))}):("function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=c.loadDocument),"embed"in d||(d.embed="@last"),d.explicit=d.explicit||!1,"requireAll"in d||(d.requireAll=!0),d.omitDefault=d.omitDefault||!1,void c.nextTick(function(){if("string"==typeof b){var a=function(a,b){if(a)return e(a);try{if(!b.document)throw new Ga("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(c){return e(new Ga("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:c,remoteDoc:b}))}f(b)},c=d.documentLoader(b,a);return void(c&&"then"in c&&c.then(a.bind(null,null),a))}f({contextUrl:null,documentUrl:null,document:b})}))},c.link=function(a,b,d,e){var f={};b&&(f["@context"]=b),f["@embed"]="@link",c.frame(a,f,d,e)},c.objectify=function(a,b,d,e){"function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=c.loadDocument),c.expand(a,d,function(a,f){if(a)return e(new Ga("Could not expand input before linking.","jsonld.LinkError",{cause:a}));var g;try{g=(new Ha).flatten(f)}catch(h){return e(h)}d.graph=!0,d.skipExpansion=!0,c.compact(g,b,d,function(a,b,d){if(a)return e(new Ga("Could not compact flattened output before linking.","jsonld.LinkError",{cause:a}));var f=E(d,"@graph"),g=b[f][0],h=function(a){if(M(a)||O(a)){if(M(a)){if(h.visited[a["@id"]])return;h.visited[a["@id"]]=!0}for(var b in a){var e=a[b],f="@id"===c.getContextValue(d,b,"@type");if(O(e)||M(e)||f)if(Q(e)&&f)a[b]=e=g[e],h(e);else if(O(e))for(var i=0;i<e.length;++i)Q(e[i])&&f?e[i]=g[e[i]]:M(e[i])&&"@id"in e[i]&&(e[i]=g[e[i]["@id"]]),h(e[i]);else if(M(e)){var j=e["@id"];a[b]=e=g[j],h(e)}}}};h.visited={},h(g),b.of_type={};for(var i in g)if("@type"in g[i]){var j=g[i]["@type"];O(j)||(j=[j]);for(var k=0;k<j.length;++k)j[k]in b.of_type||(b.of_type[j[k]]=[]),b.of_type[j[k]].push(g[i])}e(null,b)})})},c.normalize=function(a,b,d){if(arguments.length<1)return c.nextTick(function(){d(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof b&&(d=b,b={}),b=b||{},"algorithm"in b||(b.algorithm="URGNA2012"),"base"in b||(b.base="string"==typeof a?a:""),"documentLoader"in b||(b.documentLoader=c.loadDocument),"inputFormat"in b){if("application/nquads"!==b.inputFormat)return d(new Ga("Unknown normalization input format.","jsonld.NormalizeError"));var e=da(a);(new Ha).normalize(e,b,d)}else{var f=aa(b);delete f.format,f.produceGeneralizedRdf=!1,c.toRDF(a,f,function(a,c){return a?d(new Ga("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:a})):void(new Ha).normalize(c,b,d)})}},c.fromRDF=function(a,b,d){return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not convert from RDF, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"useRdfType"in b||(b.useRdfType=!1),"useNativeTypes"in b||(b.useNativeTypes=!1),"format"in b||!Q(a)||"format"in b||(b.format="application/nquads"),void c.nextTick(function(){function c(a,b,c){(new Ha).fromRDF(a,b,c)}var e;if(b.format){if(e=b.rdfParser||na[b.format],!e)return d(new Ga("Unknown input format.","jsonld.UnknownFormat",{format:b.format}))}else e=function(){return a};var f=!1;try{a=e(a,function(a,e){return f=!0,a?d(a):void c(e,b,d)})}catch(g){if(!f)return d(g);throw g}if(a){if("then"in a)return a.then(function(a){c(a,b,d)},d);c(a,b,d)}}))},c.toRDF=function(a,b,d){return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not convert to RDF, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"base"in b||(b.base="string"==typeof a?a:""),"documentLoader"in b||(b.documentLoader=c.loadDocument),void c.expand(a,b,function(a,c){if(a)return d(new Ga("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:a}));var e;try{if(e=Ha.prototype.toRDF(c,b),b.format){if("application/nquads"===b.format)return d(null,ea(e));throw new Ga("Unknown output format.","jsonld.UnknownFormat",{format:b.format})}}catch(f){return d(f)}d(null,e)}))},c.createNodeMap=function(a,b,d){return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not create node map, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"base"in b||(b.base="string"==typeof a?a:""),"documentLoader"in b||(b.documentLoader=c.loadDocument),void c.expand(a,b,function(a,c){if(a)return d(new Ga("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:a}));var e;try{e=(new Ha).createNodeMap(c,b)}catch(f){return d(f)}d(null,e)}))},c.merge=function(a,b,d,e){function f(a,b){if(!i){if(a)return i=a,e(new Ga("Could not expand input before flattening.","jsonld.FlattenError",{cause:a}));h.push(b),0===--j&&g(h)}}function g(a){var f=!0;"mergeNodes"in d&&(f=d.mergeNodes);var g,h=d.namer||d.issuer||new ha("_:b"),i={"@default":{}};try{for(var j=0;j<a.length;++j){var k=a[j];k=c.relabelBlankNodes(k,{issuer:new ha("_:b"+j+"-")});var l=f||0===j?i:{"@default":{}};if(q(k,l,"@default",h),l!==i)for(var m in l){var n=l[m];if(m in i){var o=i[m];for(var p in n)p in o||(o[p]=n[p])}else i[m]=n}}g=r(i)}catch(s){return e(s)}for(var t=[],u=Object.keys(g).sort(),v=0;v<u.length;++v){var w=g[u[v]];X(w)||t.push(w)}return null===b?e(null,t):(d.graph=!0,d.skipExpansion=!0,void c.compact(t,b,d,function(a,b){return a?e(new Ga("Could not compact merged output.","jsonld.MergeError",{cause:a})):void e(null,b)}))}if(arguments.length<1)return c.nextTick(function(){e(new TypeError("Could not merge, too few arguments."))});if(!O(a))return c.nextTick(function(){e(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof d?(e=d,d={}):"function"==typeof b&&(e=b,b=null,d={}),d=d||{};for(var h=[],i=null,j=a.length,k=0;k<a.length;++k){var l={};for(var m in d)l[m]=d[m];c.expand(a[k],l,f)}},c.relabelBlankNodes=function(a,b){b=b||{};var c=b.namer||b.issuer||new ha("_:b");return j(c,a)},c.prependBase=function(a,b){return I(a,b)},c.documentLoader=function(a,b){var d=new Ga("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return e?b(d,{contextUrl:null,documentUrl:a,document:null}):c.promisify(function(a){a(d)})},c.loadDocument=function(a,b){var d=c.documentLoader(a,b);d&&"then"in d&&d.then(b.bind(null,null),b)},c.promises=function(b){b=b||{};var e=Array.prototype.slice,f=c.promisify,g=b.api||{},h=b.version||"jsonld.js";"string"==typeof b.api&&(b.version||(h=b.api),g={}),g.expand=function(a){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return f.apply(null,[c.expand].concat(e.call(arguments)))},g.compact=function(a,b){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var d=function(a,b,d,e){c.compact(a,b,d,function(a,b){e(a,b)})};return f.apply(null,[d].concat(e.call(arguments)))},g.flatten=function(a){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return f.apply(null,[c.flatten].concat(e.call(arguments)))},g.frame=function(a,b){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return f.apply(null,[c.frame].concat(e.call(arguments)))},g.fromRDF=function(a){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return f.apply(null,[c.fromRDF].concat(e.call(arguments)))},g.toRDF=function(a){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return f.apply(null,[c.toRDF].concat(e.call(arguments)))},g.normalize=function(a){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return f.apply(null,[c.normalize].concat(e.call(arguments)))},"jsonld.js"===h&&(g.link=function(a,b){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return f.apply(null,[c.link].concat(e.call(arguments)))},g.objectify=function(a){return f.apply(null,[c.objectify].concat(e.call(arguments)))},g.createNodeMap=function(a){return f.apply(null,[c.createNodeMap].concat(e.call(arguments)))},g.merge=function(a){return f.apply(null,[c.merge].concat(e.call(arguments)))});try{c.Promise=d.Promise||a("a2").Promise}catch(i){var j=function(){throw new Error("Unable to find a Promise implementation.")};for(var k in g)g[k]=j}return g},c.promisify=function(b){if(!c.Promise)try{c.Promise=d.Promise||a("a2").Promise}catch(e){throw new Error("Unable to find a Promise implementation.")}var f=Array.prototype.slice.call(arguments,1);return new c.Promise(function(a,c){b.apply(null,f.concat(function(b,d){b?c(b):a(d)}))})},c.promises({api:c.promises}),h.prototype=c.promises({version:"json-ld-1.0"}),h.prototype.toString=function(){return this instanceof h?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},c.JsonLdProcessor=h;var ja=!!Object.defineProperty;if(ja)try{Object.defineProperty({},"x",{})}catch(ka){ja=!1}ja&&(Object.defineProperty(h,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(h.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:h})),g&&"undefined"==typeof d.JsonLdProcessor&&(ja?Object.defineProperty(d,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:h}):d.JsonLdProcessor=h);var la="function"==typeof setImmediate&&setImmediate,ma=la?function(a){la(a)}:function(a){setTimeout(a,0);
};"object"==typeof b&&"function"==typeof b.nextTick?c.nextTick=b.nextTick:c.nextTick=ma,c.setImmediate=la?ma:c.nextTick,c.parseLinkHeader=function(a){for(var b={},c=a.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),d=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,e=0;e<c.length;++e){var f=c[e].match(d);if(f){for(var g={target:f[1]},h=f[2],i=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;f=i.exec(h);)g[f[1]]=void 0===f[2]?f[3]:f[2];var j=g.rel||"";O(b[j])?b[j].push(g):j in b?b[j]=[b[j],g]:b[j]=g}}return b},c.RequestQueue=function(){this._requests={}},c.RequestQueue.prototype.wrapLoader=function(a){return this._loader=a,this._usePromise=1===a.length,this.add.bind(this)},c.RequestQueue.prototype.add=function(a,b){var d=this;if(!b&&!d._usePromise)throw new Error("callback must be specified.");return d._usePromise?new c.Promise(function(b,c){var e=d._requests[a];e||(e=d._requests[a]=d._loader(a).then(function(b){return delete d._requests[a],b})["catch"](function(b){throw delete d._requests[a],b})),e.then(function(a){b(a)})["catch"](function(a){c(a)})}):void(a in d._requests?d._requests[a].push(b):(d._requests[a]=[b],d._loader(a,function(b,c){var e=d._requests[a];delete d._requests[a];for(var f=0;f<e.length;++f)e[f](b,c)})))},c.DocumentCache=function(a){this.order=[],this.cache={},this.size=a||50,this.expires=3e4},c.DocumentCache.prototype.get=function(a){if(a in this.cache){var b=this.cache[a];if(b.expires>=+new Date)return b.ctx;delete this.cache[a],this.order.splice(this.order.indexOf(a),1)}return null},c.DocumentCache.prototype.set=function(a,b){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(a),this.cache[a]={ctx:b,expires:+new Date+this.expires}},c.ActiveContextCache=function(a){this.order=[],this.cache={},this.size=a||100},c.ActiveContextCache.prototype.get=function(a,b){var c=JSON.stringify(a),d=JSON.stringify(b),e=this.cache[c];return e&&d in e?e[d]:null},c.ActiveContextCache.prototype.set=function(a,b,c){if(this.order.length===this.size){var d=this.order.shift();delete this.cache[d.activeCtx][d.localCtx]}var e=JSON.stringify(a),f=JSON.stringify(b);this.order.push({activeCtx:e,localCtx:f}),e in this.cache||(this.cache[e]={}),this.cache[e][f]=aa(c)},c.cache={activeCtx:new c.ActiveContextCache},c.documentLoaders={},c.documentLoaders.jquery=function(a,b){function d(d,e){return 0!==d.indexOf("http:")&&0!==d.indexOf("https:")?e(new Ga('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):b.secure&&0!==d.indexOf("https")?e(new Ga('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):void a.ajax({url:d,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(a,b,f){var g={contextUrl:null,documentUrl:d,document:a},h=f.getResponseHeader("Content-Type"),i=f.getResponseHeader("Link");if(i&&"application/ld+json"!==h){if(i=c.parseLinkHeader(i)[Ea],O(i))return e(new Ga("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d}),g);i&&(g.contextUrl=i.target)}e(null,g)},error:function(a,b,c){e(new Ga("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d,cause:c}),{contextUrl:null,documentUrl:d,document:null})}})}b=b||{};var e=new c.RequestQueue,f="usePromise"in b?b.usePromise:"undefined"!=typeof Promise;return f?e.wrapLoader(function(a){return c.promisify(d,a)}):e.wrapLoader(d)},c.documentLoaders.node=function(b){function d(a,j,k){function l(b,e,g){if(m={contextUrl:null,documentUrl:a,document:g||null},b)return k(new Ga("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:b}),m);var h=i.STATUS_CODES[e.statusCode];if(e.statusCode>=400)return k(new Ga("URL could not be dereferenced: "+h,"jsonld.InvalidUrl",{code:"loading document failed",url:a,httpStatusCode:e.statusCode}),m);if(e.headers.link&&"application/ld+json"!==e.headers["content-type"]){var l=c.parseLinkHeader(e.headers.link)[Ea];if(O(l))return k(new Ga("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a}),m);l&&(m.contextUrl=l.target)}return e.statusCode>=300&&e.statusCode<400&&e.headers.location?j.length===f?k(new Ga("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:a,httpStatusCode:e.statusCode,redirects:j}),m):-1!==j.indexOf(a)?k(new Ga("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:a,httpStatusCode:e.statusCode,redirects:j}),m):(j.push(a),d(e.headers.location,j,k)):(j.push(a),void k(b,m))}if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))return k(new Ga('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null});if(b.secure&&0!==a.indexOf("https"))return k(new Ga('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null});var m=null;if(null!==m)return k(null,m);var n={Accept:h};for(var o in b.headers)n[o]=b.headers[o];g({url:a,headers:n,strictSSL:e,followRedirect:!1},l)}b=b||{};var e="strictSSL"in b?b.strictSSL:!0,f="maxRedirects"in b?b.maxRedirects:-1,g="request"in b?b.request:a("a0"),h="application/ld+json, application/json",i=a("a0"),j=new c.RequestQueue;if(b.usePromise)return j.wrapLoader(function(a){return c.promisify(d,a,[])});var k=b.headers||{};if("Accept"in k||"accept"in k)throw new RangeError('Accept header may not be specified as an option; only "'+h+'" is supported.');return j.wrapLoader(function(a,b){d(a,[],b)})},c.documentLoaders.xhr=function(a){function b(b,e){if(0!==b.indexOf("http:")&&0!==b.indexOf("https:"))return e(new Ga('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:b}),{contextUrl:null,documentUrl:b,document:null});if(a.secure&&0!==b.indexOf("https"))return e(new Ga('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:b}),{contextUrl:null,documentUrl:b,document:null});var f=a.xhr||XMLHttpRequest,g=new f;g.onload=function(){if(g.status>=400)return e(new Ga("URL could not be dereferenced: "+g.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:b,httpStatusCode:g.status}),{contextUrl:null,documentUrl:b,document:null});var a,f={contextUrl:null,documentUrl:b,document:g.response},h=g.getResponseHeader("Content-Type");if(d.test(g.getAllResponseHeaders())&&(a=g.getResponseHeader("Link")),a&&"application/ld+json"!==h){if(a=c.parseLinkHeader(a)[Ea],O(a))return e(new Ga("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:b}),f);a&&(f.contextUrl=a.target)}e(null,f)},g.onerror=function(){e(new Ga("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:b}),{contextUrl:null,documentUrl:b,document:null})},g.open("GET",b,!0),g.setRequestHeader("Accept","application/ld+json, application/json"),g.send()}a=a||{};var d=/(^|(\r\n))link:/i,e=new c.RequestQueue,f="usePromise"in a?a.usePromise:"undefined"!=typeof Promise;return f?e.wrapLoader(function(a){return c.promisify(b,a)}):e.wrapLoader(b)},c.useDocumentLoader=function(a){if(!(a in c.documentLoaders))throw new Ga('Unknown document loader type: "'+a+'"',"jsonld.UnknownDocumentLoader",{type:a});c.documentLoader=c.documentLoaders[a].apply(c,Array.prototype.slice.call(arguments,1))},c.processContext=function(a,b){var d={},e=2;arguments.length>3&&(d=arguments[2]||{},e+=1);var f=arguments[e];return"base"in d||(d.base=""),"documentLoader"in d||(d.documentLoader=c.loadDocument),null===b?f(null,K(d)):(b=aa(b),M(b)&&"@context"in b||(b={"@context":b}),void ca(b,d,function(b,c){if(b)return f(b);try{c=(new Ha).processContext(a,c,d)}catch(e){return f(e)}f(null,c)}))},c.hasProperty=function(a,b){var c=!1;if(b in a){var d=a[b];c=!O(d)||d.length>0}return c},c.hasValue=function(a,b,d){var e=!1;if(c.hasProperty(a,b)){var f=a[b],g=Z(f);if(O(f)||g){g&&(f=f["@list"]);for(var h=0;h<f.length;++h)if(c.compareValues(d,f[h])){e=!0;break}}else O(d)||(e=c.compareValues(d,f))}return e},c.addValue=function(a,b,d,e){if(e=e||{},"propertyIsArray"in e||(e.propertyIsArray=!1),"allowDuplicate"in e||(e.allowDuplicate=!0),O(d)){0!==d.length||!e.propertyIsArray||b in a||(a[b]=[]);for(var f=0;f<d.length;++f)c.addValue(a,b,d[f],e)}else if(b in a){var g=!e.allowDuplicate&&c.hasValue(a,b,d);O(a[b])||g&&!e.propertyIsArray||(a[b]=[a[b]]),g||a[b].push(d)}else a[b]=e.propertyIsArray?[d]:d},c.getValues=function(a,b){var c=a[b]||[];return O(c)||(c=[c]),c},c.removeProperty=function(a,b){delete a[b]},c.removeValue=function(a,b,d,e){e=e||{},"propertyIsArray"in e||(e.propertyIsArray=!1);var f=c.getValues(a,b).filter(function(a){return!c.compareValues(a,d)});0===f.length?c.removeProperty(a,b):1!==f.length||e.propertyIsArray?a[b]=f:a[b]=f[0]},c.compareValues=function(a,b){return a===b?!0:Y(a)&&Y(b)&&a["@value"]===b["@value"]&&a["@type"]===b["@type"]&&a["@language"]===b["@language"]&&a["@index"]===b["@index"]?!0:M(a)&&"@id"in a&&M(b)&&"@id"in b?a["@id"]===b["@id"]:!1},c.getContextValue=function(a,b,c){var d=null;if(null===b)return d;if("@language"===c&&c in a&&(d=a[c]),a.mappings[b]){var e=a.mappings[b];V(c)?d=e:c in e&&(d=e[c])}return d};var na={};if(c.registerRDFParser=function(a,b){na[a]=b},c.unregisterRDFParser=function(a){delete na[a]},e){if("undefined"==typeof oa)var oa=null;if("undefined"==typeof pa)var pa={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var qa="http://www.w3.org/2001/XMLSchema#boolean",ra="http://www.w3.org/2001/XMLSchema#double",sa="http://www.w3.org/2001/XMLSchema#integer",ta="http://www.w3.org/2001/XMLSchema#string",ua="http://www.w3.org/1999/02/22-rdf-syntax-ns#",va=ua+"List",wa=ua+"first",xa=ua+"rest",ya=ua+"nil",za=ua+"type",Aa=ua+"PlainLiteral",Ba=ua+"XMLLiteral",Ca=ua+"object",Da=ua+"langString",Ea="http://www.w3.org/ns/json-ld#context",Fa=10,Ga=function(a,b,c){e?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=b||"jsonld.Error",this.message=a||"An unspecified JSON-LD error occurred.",this.details=c||{}};e?a("a0").inherits(Ga,Error):"undefined"!=typeof Error&&(Ga.prototype=new Error);var Ha=function(){};Ha.prototype.compact=function(a,b,d,e){if(O(d)){for(var f=[],g=0;g<d.length;++g){var h=this.compact(a,b,d[g],e);null!==h&&f.push(h)}if(e.compactArrays&&1===f.length){var i=c.getContextValue(a,b,"@container");null===i&&(f=f[0])}return f}if(M(d)){if(e.link&&"@id"in d&&d["@id"]in e.link)for(var j=e.link[d["@id"]],g=0;g<j.length;++g)if(j[g].expanded===d)return j[g].compacted;if(Y(d)||X(d)){var f=F(a,b,d);return e.link&&X(d)&&(d["@id"]in e.link||(e.link[d["@id"]]=[]),e.link[d["@id"]].push({expanded:d,compacted:f})),f}var k="@reverse"===b,f={};e.link&&"@id"in d&&(d["@id"]in e.link||(e.link[d["@id"]]=[]),e.link[d["@id"]].push({expanded:d,compacted:f}));for(var l=Object.keys(d).sort(),m=0;m<l.length;++m){var n=l[m],o=d[n];if("@id"!==n&&"@type"!==n)if("@reverse"!==n)if("@index"!==n)if("@graph"!==n&&"@list"!==n&&L(n)){var p=E(a,n);c.addValue(f,p,o)}else{if(0===o.length){var q=E(a,n,o,{vocab:!0},k);c.addValue(f,q,o,{propertyIsArray:!0})}for(var r=0;r<o.length;++r){var s=o[r],q=E(a,n,s,{vocab:!0},k),i=c.getContextValue(a,q,"@container"),t=Z(s),u=null;t&&(u=s["@list"]);var v=this.compact(a,q,t?u:s,e);if(t)if(O(v)||(v=[v]),"@list"!==i){var w={};w[E(a,"@list")]=v,v=w,"@index"in s&&(v[E(a,"@index")]=s["@index"])}else if(q in f)throw new Ga('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===i||"@index"===i){var x;q in f?x=f[q]:f[q]=x={},"@language"===i&&Y(v)&&(v=v["@value"]),c.addValue(x,s[i],v)}else{var y=!e.compactArrays||"@set"===i||"@list"===i||O(v)&&0===v.length||"@list"===n||"@graph"===n;c.addValue(f,q,v,{propertyIsArray:y})}}}else{var i=c.getContextValue(a,b,"@container");if("@index"===i)continue;var p=E(a,n);c.addValue(f,p,o)}else{var z=this.compact(a,"@reverse",o,e);for(var A in z)if(a.mappings[A]&&a.mappings[A].reverse){var B=z[A],i=c.getContextValue(a,A,"@container"),C="@set"===i||!e.compactArrays;c.addValue(f,A,B,{propertyIsArray:C}),delete z[A]}if(Object.keys(z).length>0){var p=E(a,n);c.addValue(f,p,z)}}else{var z;if(Q(o))z=E(a,o,null,{vocab:"@type"===n});else{z=[];for(var r=0;r<o.length;++r)z.push(E(a,o[r],null,{vocab:!0}))}var p=E(a,n),y=O(z)&&0===o.length;c.addValue(f,p,z,{propertyIsArray:y})}}return f}return d},Ha.prototype.expand=function(a,b,d,e,f){var g=this;if(null===d||void 0===d)return null;if(!O(d)&&!M(d))return f||null!==b&&"@graph"!==H(a,b,{vocab:!0})?k(a,b,d):null;if(O(d)){var h=[],j=c.getContextValue(a,b,"@container");f=f||"@list"===j;for(var l=0;l<d.length;++l){var m=g.expand(a,b,d[l],e);if(f&&(O(m)||Z(m)))throw new Ga("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==m&&(O(m)?h=h.concat(m):h.push(m))}return h}"@context"in d&&(a=g.processContext(a,d["@context"],e));for(var n=H(a,b,{vocab:!0}),h={},o=Object.keys(d).sort(),p=0;p<o.length;++p){var q,r=o[p],s=d[r];if("@context"!==r){var t=H(a,r,{vocab:!0});if(null!==t&&(_(t)||L(t))){if(L(t)){if("@reverse"===n)throw new Ga("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:s});if(t in h)throw new Ga("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:t})}if("@id"===t&&!Q(s)){if(!e.isFrame)throw new Ga('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:s});if(!M(s))throw new Ga('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:s})}if("@type"===t&&P(s),"@graph"===t&&!M(s)&&!O(s))throw new Ga('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:s});if("@value"===t&&(M(s)||O(s)))throw new Ga('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:s});if("@language"===t){if(null===s)continue;if(!Q(s))throw new Ga('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:s});s=s.toLowerCase()}if("@index"===t&&!Q(s))throw new Ga('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:s});if("@reverse"!==t){var j=c.getContextValue(a,r,"@container");if("@language"===j&&M(s))q=i(s);else if("@index"===j&&M(s))q=function(b){for(var c=[],d=Object.keys(s).sort(),f=0;f<d.length;++f){var h=d[f],i=s[h];O(i)||(i=[i]),i=g.expand(a,b,i,e,!1);for(var j=0;j<i.length;++j){var k=i[j];"@index"in k||(k["@index"]=h),c.push(k)}}return c}(r);else{var u="@list"===t;if(u||"@set"===t){var v=b;if(u&&"@graph"===n&&(v=null),q=g.expand(a,v,s,e,u),u&&Z(q))throw new Ga("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else q=g.expand(a,r,s,e,!1)}if(null!==q||"@value"===t)if("@list"===t||Z(q)||"@list"!==j||(q=O(q)?q:[q],q={"@list":q}),a.mappings[r]&&a.mappings[r].reverse){var w=h["@reverse"]=h["@reverse"]||{};O(q)||(q=[q]);for(var x=0;x<q.length;++x){var y=q[x];if(Y(y)||Z(y))throw new Ga('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});c.addValue(w,t,y,{propertyIsArray:!0})}}else{var z=-1===["@index","@id","@type","@value","@language"].indexOf(t);c.addValue(h,t,q,{propertyIsArray:z})}}else{if(!M(s))throw new Ga('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:s});if(q=g.expand(a,"@reverse",s,e),"@reverse"in q)for(var A in q["@reverse"])c.addValue(h,A,q["@reverse"][A],{propertyIsArray:!0});var w=h["@reverse"]||null;for(var A in q)if("@reverse"!==A){null===w&&(w=h["@reverse"]={}),c.addValue(w,A,[],{propertyIsArray:!0});for(var B=q[A],x=0;x<B.length;++x){var y=B[x];if(Y(y)||Z(y))throw new Ga('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});c.addValue(w,A,y,{propertyIsArray:!0})}}}}}}o=Object.keys(h);var C=o.length;if("@value"in h){if("@type"in h&&"@language"in h)throw new Ga('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});var D=C-1;if("@type"in h&&(D-=1),"@index"in h&&(D-=1),"@language"in h&&(D-=1),0!==D)throw new Ga('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});if(null===h["@value"])h=null;else{if("@language"in h&&!Q(h["@value"]))throw new Ga("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:h});if("@type"in h&&(!_(h["@type"])||0===h["@type"].indexOf("_:")))throw new Ga('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:h})}}else if("@type"in h&&!O(h["@type"]))h["@type"]=[h["@type"]];else if("@set"in h||"@list"in h){if(C>1&&!(2===C&&"@index"in h))throw new Ga('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:h});"@set"in h&&(h=h["@set"],o=Object.keys(h),C=o.length)}else 1===C&&"@language"in h&&(h=null);return!M(h)||e.keepFreeFloatingNodes||f||null!==b&&"@graph"!==n||(0===C||"@value"in h||"@list"in h||1===C&&"@id"in h)&&(h=null),h},Ha.prototype.createNodeMap=function(a,b){b=b||{};var c=b.namer||b.issuer||new ha("_:b"),d={"@default":{}};return q(a,d,"@default",c),r(d)},Ha.prototype.flatten=function(a){for(var b=this.createNodeMap(a),c=[],d=Object.keys(b).sort(),e=0;e<d.length;++e){var f=b[d[e]];X(f)||c.push(f)}return c},Ha.prototype.frame=function(a,b,c){var d={options:c,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},e=new ha("_:b");q(a,d.graphs,"@merged",e),d.subjects=d.graphs["@merged"];var f=[];return s(d,Object.keys(d.subjects).sort(),b,f,null),f},Ha.prototype.normalize=function(a,b,c){return"URDNA2015"===b.algorithm?new Ia(b).main(a,c):"URGNA2012"===b.algorithm?new Ja(b).main(a,c):void c(new Error("Invalid RDF Dataset Normalization algorithm: "+b.algorithm))},Ha.prototype.fromRDF=function(a,b,d){var e={},f={"@default":e},g={};for(var h in a){var i=a[h];h in f||(f[h]={}),"@default"===h||h in e||(e[h]={"@id":h});for(var j=f[h],k=0;k<i.length;++k){var l=i[k],m=l.subject.value,n=l.predicate.value,p=l.object;m in j||(j[m]={"@id":m});var q=j[m],r="IRI"===p.type||"blank node"===p.type;if(!r||p.value in j||(j[p.value]={"@id":p.value}),n!==za||b.useRdfType||!r){var s=o(p,b.useNativeTypes);if(c.addValue(q,n,s,{propertyIsArray:!0}),r)if(p.value===ya){var t=j[p.value];"usages"in t||(t.usages=[]),t.usages.push({node:q,property:n,value:s})}else p.value in g?g[p.value]=!1:g[p.value]={node:q,property:n,value:s}}else c.addValue(q,"@type",p.value,{propertyIsArray:!0})}}for(var h in f){var u=f[h];if(ya in u){for(var v=u[ya],w=0;w<v.usages.length;++w){for(var x=v.usages[w],q=x.node,y=x.property,z=x.value,A=[],B=[],C=Object.keys(q).length;y===xa&&M(g[q["@id"]])&&O(q[wa])&&1===q[wa].length&&O(q[xa])&&1===q[xa].length&&(3===C||4===C&&O(q["@type"])&&1===q["@type"].length&&q["@type"][0]===va)&&(A.push(q[wa][0]),B.push(q["@id"]),x=g[q["@id"]],q=x.node,y=x.property,z=x.value,C=Object.keys(q).length,0===q["@id"].indexOf("_:")););if(y===wa){if(q["@id"]===ya)continue;z=u[z["@id"]][xa][0],A.pop(),B.pop()}delete z["@id"],z["@list"]=A.reverse();for(var D=0;D<B.length;++D)delete u[B[D]]}delete v.usages}}for(var E=[],F=Object.keys(e).sort(),w=0;w<F.length;++w){var G=F[w],q=e[G];if(G in f)for(var i=q["@graph"]=[],u=f[G],H=Object.keys(u).sort(),I=0;I<H.length;++I){var J=u[H[I]];X(J)||i.push(J)}X(q)||E.push(q)}d(null,E)},Ha.prototype.toRDF=function(a,b){var c=new ha("_:b"),d={"@default":{}};q(a,d,"@default",c);for(var e={},f=Object.keys(d).sort(),g=0;g<f.length;++g){var h=f[g];("@default"===h||_(h))&&(e[h]=l(d[h],c,b))}return e},Ha.prototype.processContext=function(a,b,d){M(b)&&"@context"in b&&O(b["@context"])&&(b=b["@context"]);var e=O(b)?b:[b];if(0===e.length)return a.clone();for(var f=a,g=0;g<e.length;++g){var h=e[g];if(null!==h){if(M(h)&&"@context"in h&&(h=h["@context"]),!M(h))throw new Ga("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:h});if(c.cache.activeCtx){var i=c.cache.activeCtx.get(a,h);if(i){f=a=i;continue}}a=f,f=f.clone();var j={};if("@base"in h){var k=h["@base"];if(null===k)k=null;else{if(!Q(k))throw new Ga('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h});if(""!==k&&!_(k))throw new Ga('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h})}null!==k&&(k=c.url.parse(k||"")),f["@base"]=k,j["@base"]=!0}if("@vocab"in h){var l=h["@vocab"];if(null===l)delete f["@vocab"];else{if(!Q(l))throw new Ga('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});if(!_(l))throw new Ga('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});f["@vocab"]=l}j["@vocab"]=!0}if("@language"in h){var l=h["@language"];if(null===l)delete f["@language"];else{if(!Q(l))throw new Ga('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:h});f["@language"]=l.toLowerCase()}j["@language"]=!0}for(var m in h)G(f,h,m,j);c.cache.activeCtx&&c.cache.activeCtx.set(a,h,f)}else f=a=K(d)}return f};var Ia=function(){var a={subject:"s",object:"o",name:"g"},b=function(a){a=a||{},this.name="URDNA2015",this.options=a,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new ha("_:c14n"),this.quads=[],this.schedule={},"maxCallStackDepth"in a?this.schedule.MAX_DEPTH=a.maxCallStackDepth:this.schedule.MAX_DEPTH=500,"maxTotalCallStackDepth"in a?this.schedule.MAX_TOTAL_DEPTH=a.maxCallStackDepth:this.schedule.MAX_TOTAL_DEPTH=4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,"timeSlice"in a?this.schedule.timeSlice=a.timeSlice:this.schedule.timeSlice=10};return b.prototype.doWork=function(a,b){var d=this.schedule;return d.totalDepth>=d.MAX_TOTAL_DEPTH?b(new Error("Maximum total call stack depth exceeded; normalization aborting.")):void function e(){if(d.depth===d.MAX_DEPTH)return d.depth=0,d.running=!1,c.nextTick(e);var f=(new Date).getTime();return d.running||(d.start=(new Date).getTime(),d.deadline=d.start+d.timeSlice),f<d.deadline?(d.running=!0,d.depth++,d.totalDepth++,a(function(a,c){d.depth--,d.totalDepth--,b(a,c)})):(d.depth=0,d.running=!1,void c.setImmediate(e))}()},b.prototype.forEach=function(a,b,c){var d,e,f=this,g=0;if(O(a))e=a.length,d=function(){return g===e?!1:(d.value=a[g++],d.key=g,!0)};else{var h=Object.keys(a);e=h.length,d=function(){return g===e?!1:(d.key=h[g++],d.value=a[d.key],!0)}}!function i(a,e){return a?c(a):d()?f.doWork(function(){b(d.value,d.key,i)}):void c()}()},b.prototype.waterfall=function(a,b){var c=this;c.forEach(a,function(a,b,d){c.doWork(a,d)},b)},b.prototype.whilst=function(a,b,c){var d=this;!function e(f){return f?c(f):a()?void d.doWork(b,e):c()}()},b.prototype.main=function(a,b){var c=this;c.schedule.start=(new Date).getTime();var d;if(c.options.format&&"application/nquads"!==c.options.format)return b(new Ga("Unknown output format.","jsonld.UnknownFormat",{format:c.options.format}));var e={};c.waterfall([function(b){c.forEach(a,function(a,b,d){"@default"===b&&(b=null),c.forEach(a,function(a,d,f){null!==b&&(0===b.indexOf("_:")?a.name={type:"blank node",value:b}:a.name={type:"IRI",value:b}),c.quads.push(a),c.forEachComponent(a,function(b){if("blank node"===b.type){var d=b.value;d in c.blankNodeInfo?c.blankNodeInfo[d].quads.push(a):(e[d]=!0,c.blankNodeInfo[d]={quads:[a]})}}),f()},d)},b)},function(a){var b=!0;c.whilst(function(){return b},function(a){b=!1,c.hashToBlankNodes={},c.waterfall([function(a){c.forEach(e,function(a,b,d){c.hashFirstDegreeQuads(b,function(a,e){return a?d(a):(e in c.hashToBlankNodes?c.hashToBlankNodes[e].push(b):c.hashToBlankNodes[e]=[b],void d())})},a)},function(a){var d=Object.keys(c.hashToBlankNodes).sort();c.forEach(d,function(a,d,f){var g=c.hashToBlankNodes[a];if(g.length>1)return f();var h=g[0];c.canonicalIssuer.getId(h),delete e[h],delete c.hashToBlankNodes[a],b=!0,f()},a)}],a)},a)},function(a){var b=Object.keys(c.hashToBlankNodes).sort();c.forEach(b,function(a,b,d){var e=[],f=c.hashToBlankNodes[a];c.waterfall([function(a){c.forEach(f,function(a,b,d){if(c.canonicalIssuer.hasId(a))return d();var f=new ha("_:b");f.getId(a),c.hashNDegreeQuads(a,f,function(a,b){return a?d(a):(e.push(b),void d())})},a)},function(a){e.sort(function(a,b){return a.hash<b.hash?-1:a.hash>b.hash?1:0}),c.forEach(e,function(a,b,d){for(var e in a.issuer.existing)c.canonicalIssuer.getId(e);d()},a)}],d)},a)},function(a){var b=[];c.waterfall([function(a){c.forEach(c.quads,function(a,d,e){c.forEachComponent(a,function(a){"blank node"===a.type&&0!==a.value.indexOf(c.canonicalIssuer.prefix)&&(a.value=c.canonicalIssuer.getId(a.value))}),b.push(fa(a)),e()},a)},function(a){return b.sort(),"application/nquads"===c.options.format?(d=b.join(""),a()):(d=da(b.join("")),void a())}],a)}],function(a){b(a,d)})},b.prototype.hashFirstDegreeQuads=function(a,b){var c=this,d=c.blankNodeInfo[a];if("hash"in d)return b(null,d.hash);var e=[],f=d.quads;c.forEach(f,function(b,d,f){var g={predicate:b.predicate};c.forEachComponent(b,function(b,d){g[d]=c.modifyFirstDegreeComponent(a,b,d)}),e.push(fa(g)),f()},function(a){return a?b(a):(e.sort(),d.hash=La.hashNQuads(c.name,e),void b(null,d.hash))})},b.prototype.modifyFirstDegreeComponent=function(a,b){return"blank node"!==b.type?b:(b=aa(b),b.value=b.value===a?"_:a":"_:z",b)},b.prototype.hashRelatedBlankNode=function(a,b,c,d,e){var f,g=this;g.waterfall([function(b){return g.canonicalIssuer.hasId(a)?(f=g.canonicalIssuer.getId(a),b()):c.hasId(a)?(f=c.getId(a),b()):void g.hashFirstDegreeQuads(a,function(a,c){return a?b(a):(f=c,void b())})}],function(a){if(a)return e(a);var c=new La(g.name);return c.update(d),"g"!==d&&c.update(g.getRelatedPredicate(b)),c.update(f),e(null,c.digest())})},b.prototype.getRelatedPredicate=function(a){return"<"+a.predicate.value+">"},b.prototype.hashNDegreeQuads=function(a,b,c){var d,e=this,f=new La(e.name);e.waterfall([function(c){e.createHashToRelated(a,b,function(a,b){return a?c(a):(d=b,void c())})},function(a){var c=Object.keys(d).sort();e.forEach(c,function(a,c,g){f.update(a);var h,i="",j=new Ka(d[a]);e.whilst(function(){return j.hasNext()},function(a){var c=j.next(),d=b.clone(),f="",g=[];e.waterfall([function(b){e.forEach(c,function(b,c,h){return e.canonicalIssuer.hasId(b)?f+=e.canonicalIssuer.getId(b):(d.hasId(b)||g.push(b),f+=d.getId(b)),0!==i.length&&f.length>=i.length&&f>i?a():void h()},b)},function(b){e.forEach(g,function(b,c,g){e.hashNDegreeQuads(b,d,function(c,e){return c?g(c):(f+=d.getId(b),f+="<"+e.hash+">",d=e.issuer,0!==i.length&&f.length>=i.length&&f>i?a():void g())})},b)},function(a){(0===i.length||i>f)&&(i=f,h=d),a()}],a)},function(a){return a?g(a):(f.update(i),b=h,void g())})},a)}],function(a){c(a,{hash:f.digest(),issuer:b})})},b.prototype.createHashToRelated=function(b,c,d){var e=this,f={},g=e.blankNodeInfo[b].quads;e.forEach(g,function(d,g,h){e.forEach(d,function(g,h,i){if("predicate"===h||"blank node"!==g.type||g.value===b)return i();var j=g.value,k=a[h];e.hashRelatedBlankNode(j,d,c,k,function(a,b){return a?i(a):(b in f?f[b].push(j):f[b]=[j],void i())})},h)},function(a){d(a,f)})},b.prototype.forEachComponent=function(a,b){for(var c in a)"predicate"!==c&&b(a[c],c,a)},b}(),Ja=function(){var a=function(a){Ia.call(this,a),this.name="URGNA2012"};return a.prototype=new Ia,a.prototype.modifyFirstDegreeComponent=function(a,b,c){return"blank node"!==b.type?b:(b=aa(b),"name"===c?b.value="_:g":b.value=b.value===a?"_:a":"_:z",b)},a.prototype.getRelatedPredicate=function(a){return a.predicate.value},a.prototype.createHashToRelated=function(a,b,c){var d=this,e={},f=d.blankNodeInfo[a].quads;d.forEach(f,function(c,f,g){var h,i;if("blank node"===c.subject.type&&c.subject.value!==a)i=c.subject.value,h="p";else{if("blank node"!==c.object.type||c.object.value===a)return g();i=c.object.value,h="r"}d.hashRelatedBlankNode(i,c,b,h,function(a,b){b in e?e[b].push(i):e[b]=[i],g()})},function(a){c(a,e)})},a}();Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}),c.registerRDFParser("application/nquads",da),c.registerRDFParser("rdfa-api",ga),c.IdentifierIssuer=ha,c.UniqueNamer=ha,ha.prototype.clone=function(){var a=new ha(this.prefix);return a.counter=this.counter,a.existing=aa(this.existing),a},ha.prototype.getId=function(a){if(a&&a in this.existing)return this.existing[a];var b=this.prefix+this.counter;return this.counter+=1,a&&(this.existing[a]=b),b},ha.prototype.getName=ha.prototype.getName,ha.prototype.hasId=function(a){return a in this.existing},ha.prototype.isNamed=ha.prototype.hasId;var Ka=function(a){this.list=a.sort(),this.done=!1,this.left={};for(var b=0;b<a.length;++b)this.left[a[b]]=!0};Ka.prototype.hasNext=function(){return!this.done},Ka.prototype.next=function(){for(var a=this.list.slice(),b=null,c=0,d=this.list.length,e=0;d>e;++e){var f=this.list[e],g=this.left[f];(null===b||f>b)&&(g&&e>0&&f>this.list[e-1]||!g&&d-1>e&&f>this.list[e+1])&&(b=f,c=e)}if(null===b)this.done=!0;else{var h=this.left[b]?c-1:c+1;this.list[c]=this.list[h],this.list[h]=b;for(var e=0;d>e;++e)this.list[e]>b&&(this.left[this.list[e]]=!this.left[this.list[e]])}return a};var La=function(a){if(!(this instanceof La))return new La(a);if(-1===["URDNA2015","URGNA2012"].indexOf(a))throw new Error("Invalid RDF Dataset Normalization algorithm: "+a);La._init.call(this,a)};if(La.hashNQuads=function(a,b){for(var c=new La(a),d=0;d<b.length;++d)c.update(b[d]);return c.digest()},function(b){if(b){var c=a("a0");return La._init=function(a){a="URDNA2015"===a?"sha256":"sha1",
this.md=c.createHash(a)},La.prototype.update=function(a){return this.md.update(a,"utf8")},void(La.prototype.digest=function(){return this.md.digest("hex")})}La._init=function(a){a="URDNA2015"===a?new f.Algorithm:new e.Algorithm,this.md=new d(a)},La.prototype.update=function(a){return this.md.update(a)},La.prototype.digest=function(){return this.md.digest().toHex()};var d=function(a){if(!(this instanceof d))return new d(a);if(this._algorithm=a,!d._padding||d._padding.length<this._algorithm.blockSize){d._padding=String.fromCharCode(128);for(var b=String.fromCharCode(0),c=64;c>0;)1&c&&(d._padding+=b),c>>>=1,c>0&&(b+=b)}this.start()};d.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var a=this._algorithm.messageLengthSize/4,b=0;a>b;++b)this.fullMessageLength.push(0);return this._input=new d.ByteBuffer,this.state=this._algorithm.start(),this},d.prototype.update=function(a){a=new d.ByteBuffer(unescape(encodeURIComponent(a))),this.messageLength+=a.length();var b=a.length();b=[b/4294967296>>>0,b>>>0];for(var c=this.fullMessageLength.length-1;c>=0;--c)this.fullMessageLength[c]+=b[1],b[1]=b[0]+(this.fullMessageLength[c]/4294967296>>>0),this.fullMessageLength[c]=this.fullMessageLength[c]>>>0,b[0]=b[1]/4294967296>>>0;for(this._input.putBytes(a.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},d.prototype.digest=function(){var a=new d.ByteBuffer;a.putBytes(this._input.bytes());var b=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,c=b&this._algorithm.blockSize-1;a.putBytes(d._padding.substr(0,this._algorithm.blockSize-c));for(var e=new d.ByteBuffer,f=0;f<this.fullMessageLength.length;++f)e.putInt32(this.fullMessageLength[f]<<3|this.fullMessageLength[f+1]>>>28);this._algorithm.writeMessageLength(a,e);var g=this._algorithm.digest(this.state.copy(),a),h=new d.ByteBuffer;return g.write(h),h},d.ByteBuffer=function(a){"string"==typeof a?this.data=a:this.data="",this.read=0},d.ByteBuffer.prototype.putInt32=function(a){this.data+=String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a)},d.ByteBuffer.prototype.getInt32=function(){var a=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,a},d.ByteBuffer.prototype.putBytes=function(a){this.data+=a},d.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},d.ByteBuffer.prototype.length=function(){return this.data.length-this.read},d.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},d.ByteBuffer.prototype.toHex=function(){for(var a="",b=this.read;b<this.data.length;++b){var c=this.data.charCodeAt(b);16>c&&(a+="0"),a+=c.toString(16)}return a};var e={_w:null};e.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},e.Algorithm.prototype.start=function(){return e._w||(e._w=new Array(80)),e._createState()},e.Algorithm.prototype.writeMessageLength=function(a,b){a.putBytes(b.bytes())},e.Algorithm.prototype.digest=function(a,b){for(var c,d,f,g,h,i,j,k,l=b.length(),m=e._w;l>=64;){for(d=a.h0,f=a.h1,g=a.h2,h=a.h3,i=a.h4,k=0;16>k;++k)c=b.getInt32(),m[k]=c,j=h^f&(g^h),c=(d<<5|d>>>27)+j+i+1518500249+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;20>k;++k)c=m[k-3]^m[k-8]^m[k-14]^m[k-16],c=c<<1|c>>>31,m[k]=c,j=h^f&(g^h),c=(d<<5|d>>>27)+j+i+1518500249+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;32>k;++k)c=m[k-3]^m[k-8]^m[k-14]^m[k-16],c=c<<1|c>>>31,m[k]=c,j=f^g^h,c=(d<<5|d>>>27)+j+i+1859775393+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;40>k;++k)c=m[k-6]^m[k-16]^m[k-28]^m[k-32],c=c<<2|c>>>30,m[k]=c,j=f^g^h,c=(d<<5|d>>>27)+j+i+1859775393+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;60>k;++k)c=m[k-6]^m[k-16]^m[k-28]^m[k-32],c=c<<2|c>>>30,m[k]=c,j=f&g|h&(f^g),c=(d<<5|d>>>27)+j+i+2400959708+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;80>k;++k)c=m[k-6]^m[k-16]^m[k-28]^m[k-32],c=c<<2|c>>>30,m[k]=c,j=f^g^h,c=(d<<5|d>>>27)+j+i+3395469782+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;a.h0=a.h0+d|0,a.h1=a.h1+f|0,a.h2=a.h2+g|0,a.h3=a.h3+h|0,a.h4=a.h4+i|0,l-=64}return a},e._createState=function(){var a={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return a.copy=function(){var b=e._createState();return b.h0=a.h0,b.h1=a.h1,b.h2=a.h2,b.h3=a.h3,b.h4=a.h4,b},a.write=function(b){b.putInt32(a.h0),b.putInt32(a.h1),b.putInt32(a.h2),b.putInt32(a.h3),b.putInt32(a.h4)},a};var f={_k:null,_w:null};f.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},f.Algorithm.prototype.start=function(){return f._k||f._init(),f._createState()},f.Algorithm.prototype.writeMessageLength=function(a,b){a.putBytes(b.bytes())},f.Algorithm.prototype.digest=function(a,b){for(var c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s=b.length(),t=f._k,u=f._w;s>=64;){for(j=0;16>j;++j)u[j]=b.getInt32();for(;64>j;++j)c=u[j-2],c=(c>>>17|c<<15)^(c>>>19|c<<13)^c>>>10,d=u[j-15],d=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,u[j]=c+u[j-7]+d+u[j-16]|0;for(k=a.h0,l=a.h1,m=a.h2,n=a.h3,o=a.h4,p=a.h5,q=a.h6,r=a.h7,j=0;64>j;++j)g=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),h=q^o&(p^q),e=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),i=k&l|m&(k^l),c=r+g+h+t[j]+u[j],d=e+i,r=q,q=p,p=o,o=n+c|0,n=m,m=l,l=k,k=c+d|0;a.h0=a.h0+k|0,a.h1=a.h1+l|0,a.h2=a.h2+m|0,a.h3=a.h3+n|0,a.h4=a.h4+o|0,a.h5=a.h5+p|0,a.h6=a.h6+q|0,a.h7=a.h7+r|0,s-=64}return a},f._createState=function(){var a={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return a.copy=function(){var b=f._createState();return b.h0=a.h0,b.h1=a.h1,b.h2=a.h2,b.h3=a.h3,b.h4=a.h4,b.h5=a.h5,b.h6=a.h6,b.h7=a.h7,b},a.write=function(b){b.putInt32(a.h0),b.putInt32(a.h1),b.putInt32(a.h2),b.putInt32(a.h3),b.putInt32(a.h4),b.putInt32(a.h5),b.putInt32(a.h6),b.putInt32(a.h7)},a},f._init=function(){f._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f._w=new Array(64)}}(e),!oa)var Ma=function(){oa=a("a0").XMLSerializer};if(c.url={},c.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},c.url.parse=function(a,b){for(var d={},e=c.url.parsers[b||"full"],f=e.regex.exec(a),g=e.keys.length;g--;)d[e.keys[g]]=void 0===f[g]?null:f[g];return d.normalizedPath=ia(d.path,!!d.authority),d},e?c.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&c.useDocumentLoader("xhr"),e){c.use=function(b){switch(b){case"request":c.request=a("a0");break;default:throw new Ga("Unknown extension.","jsonld.UnknownExtension",{extension:b})}};var Na={exports:{},filename:f};a("a0")(Na,"version"),c.version=Na.exports.version}return c},i=function(){return h(function(){return i()})};return!e&&"function"==typeof define&&define.amd?define([],function(){return h(i),i}):(h(i),"function"==typeof a&&"undefined"!=typeof c&&c.exports&&(c.exports=i),g&&("undefined"==typeof jsonld?jsonld=jsonldjs=i:jsonldjs=i)),i}()}(a("2e")),d.define=e,c.exports}),a.registerDynamic("84",["a3"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("a3"),d.define=e,c.exports}),a.register("f",["9","84"],function(a){"use strict";function b(a){return e(a,["application/ld+json"]).then(function(b){return f.frame(b,h).then(function(a){return f.compact(a,a["@context"])}).then(function(c){return"Catalog"===c["@type"]?{compacted:c,raw:b,frame:h}:f.frame(a,i).then(function(a){return f.compact(a,a["@context"])}).then(function(a){if("Dataset"!==a["@type"])throw new Error("No DCAT data found");return{compacted:a,raw:b,frame:i}})})})}function c(a){return b(a).then(function(a){var b=a.compacted,c=void 0;c="Catalog"===b["@type"]?b:{datasets:[b]};var e=!0,f=!1,g=void 0;try{for(var h,i=c.datasets[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){for(var j=h.value,k=["title","description"],l=0;l<k.length;l++){var m=k[l];d(j,m)}var n=!0,o=!1,p=void 0;try{for(var q,r=j.distributions[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){for(var s=q.value,t=["title","description"],u=0;u<t.length;u++){var m=t[u];d(s,m)}s.mediaType||("geojson"===s.format.toLowerCase()&&(s.mediaType="application/vnd.geo+json"),"wms"===s.format.toLowerCase()&&(s.mediaType="application/wms+xml")),s["dcat:downloadURL"]&&(s.downloadURL=s["dcat:downloadURL"]),s["dcat:accessURL"]&&(s.accessURL=s["dcat:accessURL"]),s.url=s.downloadURL||s.accessURL}}catch(v){o=!0,p=v}finally{try{!n&&r["return"]&&r["return"]()}finally{if(o)throw p}}}}catch(v){f=!0,g=v}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return delete c["@context"],c})}function d(a,b){if(a[b]&&(a[b+k]||(a[b+k]={}),a[b+k][j]=a[b]),a[b+k]){var c={};for(var d in a[b+k])c[d]=a[b+k][d];a[b]=c,delete a[b+k]}}var e,f,g,h,i,j,k;return a("loadDCATCatalog",b),a("loadCatalog",c),{setters:[function(a){e=a.loadJSON},function(a){f=a.promises}],execute:function(){g=[{"@language":"en",xsd:"http://www.w3.org/2001/XMLSchema#",dcat:"http://www.w3.org/ns/dcat#",dct:"http://purl.org/dc/terms/",locn:"http://www.w3.org/ns/locn#",foaf:"http://xmlns.com/foaf/0.1/",schema:"http://schema.org/",label:"http://www.w3.org/2000/01/rdf-schema#label",Catalog:"dcat:Catalog",datasets:{"@id":"dcat:dataset","@container":"@set"},Dataset:"dcat:Dataset",Location:"dct:Location",geometry:{"@id":"locn:geometry","@type":"gsp:wktLiteral"},gsp:"http://www.opengis.net/ont/geosparql#",PeriodOfTime:"dct:PeriodOfTime",startDate:{"@id":"schema:startDate","@type":"xsd:dateTime"},endDate:{"@id":"schema:endDate","@type":"xsd:dateTime"},title:{"@id":"dct:title","@container":"@language"},description:{"@id":"dct:description","@container":"@language"},theme:{"@id":"dcat:theme","@type":"@id"},issued:{"@id":"dct:issued","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},modified:{"@id":"dct:modified","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},landingPage:{"@id":"dcat:landingPage","@type":"@id"},homepage:{"@id":"foaf:homepage","@type":"@id"},spatial:"dct:spatial",temporal:"dct:temporal",keywords:{"@id":"dcat:keyword","@container":"@set"},ssn:"http://purl.oclc.org/NET/ssnx/ssn#",observedProperties:{"@id":"ssn:observedProperty","@type":"@id","@container":"@set"},publisher:"dct:publisher",Organization:"foaf:Organization",Group:"foaf:Group",name:{"@id":"foaf:name","@language":null},Distribution:"dcat:Distribution",distributions:{"@id":"dcat:distribution","@container":"@set"},accessURL:{"@id":"dcat:accessURL","@type":"@id"},downloadURL:{"@id":"dcat:downloadURL","@type":"@id"},mediaType:{"@id":"dcat:mediaType","@language":null},format:{"@id":"dct:format","@language":null},isPartOf:{"@id":"dct:isPartOf","@type":"@id"},parts:{"@id":"dct:hasPart","@type":"@id","@container":"@set"}},{geometry:{"@id":"locn:geometry","@type":"https://www.iana.org/assignments/media-types/application/vnd.geo+json"},"@language":null,title:{"@id":"dct:title"},description:{"@id":"dct:description"},title_i18n:{"@id":"dct:title","@container":"@language"},description_i18n:{"@id":"dct:description","@container":"@language"},"@base":null,id:"@id"}],h={"@context":g,"@type":"Catalog",datasets:{"@type":"Dataset",isPartOf:{"@embed":"@never","@omitDefault":!0},parts:{"@embed":"@never","@omitDefault":!0},distributions:{}}},i={"@context":g,"@type":"Dataset",isPartOf:{"@embed":"@never","@omitDefault":!0},parts:{"@embed":"@never","@omitDefault":!0},distributions:{}},j="unknown",k="_i18n"}}}),a.register("a4",["f","a"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a},function(a){c=a["default"]}],execute:function(){d=function(a){function c(){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),this.datasets=[]}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"loadFromDCAT",value:function(a){var c=this;return this.datasets=[],this.fire("loading",{url:a}),b.loadCatalog(a).then(function(b){c.url=a;var d=b.datasets,e=!0,f=!1,g=void 0;try{for(var h,i=d[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;c.datasets.push(j)}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}c.fire("load",{url:a,datasets:d})})["catch"](function(b){throw c.fire("loadError",{url:a,error:b}),b})}}]),c}(c),a("default",d)}}}),a.register("a",["9"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.DefaultMap}],execute:function(){c=function(){function a(){babelHelpers.classCallCheck(this,a),this.listeners=new b(function(){return new Set})}return babelHelpers.createClass(a,[{key:"on",value:function(a,b){a=Array.isArray(a)?a:[a];var c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this.listeners.get(h).add(b)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return this}},{key:"off",value:function(a,b){if(!this.listeners.get(a)["delete"](b))throw new Error("Event listener not found")}},{key:"fire",value:function(a,b){console.log("Event: '"+a+"', Class: "+this.constructor.name+", Data:",b);var c=!0,d=!1,e=void 0;try{for(var f,g=new Set(this.listeners.get(a))[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h(b)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}}]),a}(),a("default",c)}}}),a.register("a5",["14","16","17","19","21","22","24","32","33","38","76","77","79","a","a4","9f","1a","7b","3d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a["default"]},function(a){l=a["default"]},function(a){m=a["default"]},function(a){n=a["default"]},function(a){o=a["default"]},function(a){p=a["default"]},function(a){q=a["default"]},function(a){r=a["default"]},function(a){s=a["default"]},function(a){t=a["default"]}],execute:function(){u=function(a){function o(a){babelHelpers.classCallCheck(this,o),babelHelpers.get(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.map=a,this.catalogue=new p,this.formats=[new m([l,t,k,i,h,f,e,b]),new s([l,t,k,i,h,f,e,b]),new r([l,t,k,i,h,f,e]),new g([d,b]),new n([c,b]),new j([b])],this.workspace=new q(this.formats),this.workspace.addStaticActionContext({map:a}),this._registerLoadingListeners()}return babelHelpers.inherits(o,a),babelHelpers.createClass(o,[{key:"_registerLoadingListeners",value:function(){var a=this,b=function(){return a.fire("dataLoading")},c=function(){return a.fire("dataLoad")};this.catalogue.on("loading",b).on(["load","loadError"],c),this.workspace.on("distributionsLoading",b).on("distributionsLoad",c);var d=!0,e=!1,f=void 0;try{for(var g,h=this.formats[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;i.on("loading",b).on(["load","loadError"],c).on("actionCreate",function(a){var d=a.action;d.on("loading",b).on(["load","loadError"],c)})}}catch(j){e=!0,f=j}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}}}]),o}(o),a("default",u)}}}),a.registerDynamic("a6",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(){!function(){"use strict";function a(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function b(a){return"string"!=typeof a&&(a=String(a)),a}function c(a){this.map={},a instanceof c?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function d(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function e(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function f(a){var b=new FileReader;return b.readAsArrayBuffer(a),e(b)}function g(a){var b=new FileReader;return b.readAsText(a),e(b)}function h(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,"string"==typeof a)this._bodyText=a;else if(n.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(n.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(a){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n.blob?(this.blob=function(){var a=d(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(f)},this.text=function(){var a=d(this);if(a)return a;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=d(this);return a?a:Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function i(a){var b=a.toUpperCase();return o.indexOf(b)>-1?b:a}function j(a,b){b=b||{};var d=b.body;if(j.prototype.isPrototypeOf(a)){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new c(a.headers)),this.method=a.method,this.mode=a.mode,d||(d=a._bodyInit,a.bodyUsed=!0)}else this.url=a;if(this.credentials=b.credentials||this.credentials||"omit",(b.headers||!this.headers)&&(this.headers=new c(b.headers)),this.method=i(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&d)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(d)}function k(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function l(a){var b=new c,d=a.getAllResponseHeaders().trim().split("\n");return d.forEach(function(a){var c=a.trim().split(":"),d=c.shift().trim(),e=c.join(":").trim();b.append(d,e)}),b}function m(a,b){b||(b={}),this._initBody(a),this.type="default",this.status=b.status,this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText,this.headers=b.headers instanceof c?b.headers:new c(b.headers),this.url=b.url||""}if(!self.fetch){c.prototype.append=function(c,d){c=a(c),d=b(d);var e=this.map[c];e||(e=[],this.map[c]=e),e.push(d)},c.prototype["delete"]=function(b){delete this.map[a(b)]},c.prototype.get=function(b){var c=this.map[a(b)];return c?c[0]:null},c.prototype.getAll=function(b){return this.map[a(b)]||[]},c.prototype.has=function(b){return this.map.hasOwnProperty(a(b))},c.prototype.set=function(c,d){this.map[a(c)]=[b(d)]},c.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,d,c,this)},this)},this)};var n={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self},o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];j.prototype.clone=function(){return new j(this)},h.call(j.prototype),h.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var a=new m(null,{status:0,statusText:""});return a.type="error",a};var p=[301,302,303,307,308];m.redirect=function(a,b){if(-1===p.indexOf(b))throw new RangeError("Invalid status code");return new m(null,{status:b,headers:{location:a}})},self.Headers=c,self.Request=j,self.Response=m,self.fetch=function(a,b){return new Promise(function(c,d){function e(){return"responseURL"in g?g.responseURL:/^X-Request-URL:/m.test(g.getAllResponseHeaders())?g.getResponseHeader("X-Request-URL"):void 0}var f;f=j.prototype.isPrototypeOf(a)&&!b?a:new j(a,b);var g=new XMLHttpRequest;g.onload=function(){var a=1223===g.status?204:g.status;if(100>a||a>599)return void d(new TypeError("Network request failed"));var b={status:a,statusText:g.statusText,headers:l(g),url:e()},f="response"in g?g.response:g.responseText;c(new m(f,b))},g.onerror=function(){d(new TypeError("Network request failed"))},g.open(f.method,f.url,!0),"include"===f.credentials&&(g.withCredentials=!0),"responseType"in g&&n.blob&&(g.responseType="blob"),f.headers.forEach(function(a,b){g.setRequestHeader(b,a)}),g.send("undefined"==typeof f._bodyInit?null:f._bodyInit)})},self.fetch.polyfill=!0}}()}(),e()}),a.registerDynamic("a7",["a6"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("a6"),d.define=e,c.exports}),a.register("9",["a7"],function(a){"use strict";function b(a){return a?a.en?a.en:a[Object.keys(a)[0]]:void 0}function c(a,b){return a.sort(function(a,c){var d=b(a),e=b(c);return e>d?-1:d>e?1:0})}function d(a,b){if("string"==typeof a){var c=b.map(function(a){return a+"; q=1.0"});return c.push("application/json; q=0.5"),c=c.join(","),fetch(a,{headers:new Headers({Accept:c})})["catch"](function(b){throw b.response={url:a},b}).then(e).then(function(a){return a.json()})}return Promise.resolve(a)}function e(a){if(a.ok)return a;var b=new Error(a.statusText);throw b.response=a,b}var f,g,h;return a("i18n",b),a("sortByKey",c),a("loadJSON",d),a("checkStatus",e),{setters:[function(a){}],execute:function(){f="http://coveragejson.org/def#",a("COVJSON_PREFIX",f),g="http://ckan-demo.melodiesproject.eu",a("MELODIES_DCAT_CATALOG_URL",g),h=function(){function a(b,c){babelHelpers.classCallCheck(this,a),this._map=new Map(c),this.defaultFactory=b}return babelHelpers.createClass(a,[{key:"get",value:function(a){return this._map.has(a)||this._map.set(a,this.defaultFactory()),this._map.get(a)}},{key:"set",value:function(a,b){this._map.set(a,b)}},{key:"delete",value:function(a){this._map["delete"](a)}}]),a}(),a("DefaultMap",h)}}}),a.registerDynamic("a8",[],!0,function(a,b,c){function d(a,b){var c=!0,d=!1,e=void 0;try{for(var f,i=function(){var c=g(f.value,2),d=c[0],e=c[1];if(-1!==e.indexOf(b)){var h=a.observedProperty.categories.filter(function(a){return a.id===d})[0];return{v:h}}},j=a.categoryEncoding[Symbol.iterator]();!(c=(f=j.next()).done);c=!0){var k=i();if("object"===("undefined"==typeof k?"undefined":h(k)))return k.v}}catch(l){d=!0,e=l}finally{try{!c&&j["return"]&&j["return"]()}finally{if(d)throw e}}}var e=this,f=e.define;e.define=void 0,Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};return b.getCategory=d,e.define=f,c.exports}),a.registerDynamic("43",[],!0,function(a,b,c){function d(a){var b=arguments.length<=1||void 0===arguments[1]?h:arguments[1];if(b in a)return b;var c=b.split("-")[0],d=Object.keys(a).filter(function(a){return c===a.split("-")[0]});return d.length?d[0]:Object.keys(a)[0]}function e(a){var b=arguments.length<=1||void 0===arguments[1]?h:arguments[1],c=d(a,b);return a[c]}var f=this,g=f.define;f.define=void 0,Object.defineProperty(b,"__esModule",{value:!0}),b.getLanguageTag=d,b.getLanguageString=e;var h="en";return f.define=g,c.exports}),a.register("a9",["5","43","a8"],function(a){"use strict";function b(a,b){if(a.observedProperty.categories||!a.unit)return"";if(a.unit.symbol){var c=a.unit.symbol.value||a.unit.symbol,d=a.unit.symbol.type;return"http://www.opengis.net/def/uom/UCUM/"===d&&("Cel"===c?c="°C":"1"===c&&(c="")),c}return e.getLanguageString(a.unit.label,b)}function c(a){var b=a.getBounds(),c=b.getCenter().lat,d=6378137*Math.PI*Math.cos(c*Math.PI/180),e=d*(b.getNorthEast().lng-b.getSouthWest().lng)/180,f=a.getSize(),g=e/f.x;return g}var d,e,f,g;return{setters:[function(a){d=a["default"]},function(a){e=a.getLanguageString},function(a){f=a.getCategory}],execute:function(){g=function(a){function d(a,b){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,b);var c=this.options.layers||[];this._maxDistanceForPointsInPx=this.options.maxDistanceForPointsInPx||20,this.coverageLayers=new Set(c.filter(function(a){return a.getValueAt}))}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"addCoverageLayer",value:function(a){return a.getValueAt?(this.coverageLayers.add(a),this.updateData(),this):void 0}},{key:"removeCoverageLayer",value:function(a){return this.coverageLayers["delete"](a),this.updateData(),this}},{key:"onAdd",value:function(a){this._map=a,babelHelpers.get(Object.getPrototypeOf(d.prototype),"onAdd",this).call(this,a),this.updateData()}},{key:"onRemove",value:function(a){babelHelpers.get(Object.getPrototypeOf(d.prototype),"onRemove",this).call(this,a),this._map=null}},{key:"setLatLng",value:function(a){return babelHelpers.get(Object.getPrototypeOf(d.prototype),"setLatLng",this).call(this,a),this.updateData(),this}},{key:"hasData",value:function(){return this._hasData}},{key:"updateData",value:function(){if(this._map){var a="",d=this.getLatLng(),g=!0,h=!1,i=void 0;try{for(var j,k=this.coverageLayers[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=c(this._map)*this._maxDistanceForPointsInPx,n=l.getValueAt(d,m);if(null!=n){var o=l.parameter,p=b(o);if(o.categoryEncoding){var q=f(o,n);n=e(q.label)}a+="<div><strong>"+e(o.observedProperty.label)+"</strong>: "+n+" "+p+"</div>"}}}catch(r){h=!0,i=r}finally{try{!g&&k["return"]&&k["return"]()}finally{if(h)throw i}}return a||(this._hasData=!1,a="No data."),this._hasData=!0,this.setContent(a),this}}}]),d}(d.Popup),a("default",g)}}}),a.register("aa",["5"],function(a){"use strict";function b(a){return function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){var d=this;babelHelpers.get(Object.getPrototypeOf(b.prototype),"onAdd",this).call(this,a),this._draggable=new c.Draggable(this._container,this._wrapper),this._draggable.enable(),this._draggable.on("drag",function(b){var e=c.DomUtil.getPosition(d._wrapper.parentNode),f=a.layerPointToLatLng(e);d.setLatLng(f),d.fire("drag",b)}),this._draggable.on("dragstart predrag dragend",function(a){return d.fire(a.type,a)})}},{key:"onRemove",value:function(a){this._draggable.disable(),babelHelpers.get(Object.getPrototypeOf(b.prototype),"onRemove",this).call(this,a)}}]),b}(a)}var c;return a("default",b),{setters:[function(a){c=a["default"]}],execute:function(){}}}),a.register("ab",["aa","a9"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]}],execute:function(){d=function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),b}(b(c)),a("default",d)}}}),a.register("ac",[],function(){return{setters:[],execute:function(){}}}),function(){var b=a.get("@@amd-helpers").createDefine();!function(){function a(a){a.Control.Loading=a.Control.extend({options:{position:"topleft",separate:!1,zoomControl:null,spinjs:!1,spin:{lines:7,length:3,width:3,radius:5,rotate:13,top:"83%"}},initialize:function(b){a.setOptions(this,b),this._dataLoaders={},null!==this.options.zoomControl&&(this.zoomControl=this.options.zoomControl)},onAdd:function(c){if(this.options.spinjs&&"function"!=typeof Spinner)return b.error("Leaflet.loading cannot load because you didn't load spin.js (http://fgnass.github.io/spin.js/), even though you set it in options.");this._addLayerListeners(c),this._addMapListeners(c),this.options.separate||this.zoomControl||(c.zoomControl?this.zoomControl=c.zoomControl:c.zoomsliderControl&&(this.zoomControl=c.zoomsliderControl));var d,e="leaflet-control-loading";return this.zoomControl&&!this.options.separate?(d=this.zoomControl._container,e+=" leaflet-bar-part-bottom leaflet-bar-part last",a.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom")):d=a.DomUtil.create("div","leaflet-control-zoom leaflet-bar"),this._indicator=a.DomUtil.create("a",e,d),this.options.spinjs&&(this._spinner=new Spinner(this.options.spin).spin(),this._indicator.appendChild(this._spinner.el)),d},onRemove:function(a){this._removeLayerListeners(a),this._removeMapListeners(a)},removeFrom:function(b){return this.zoomControl&&!this.options.separate?(this._container.removeChild(this._indicator),this._map=null,this.onRemove(b),this):a.Control.prototype.removeFrom.call(this,b)},addLoader:function(a){this._dataLoaders[a]=!0,this.updateIndicator()},removeLoader:function(a){delete this._dataLoaders[a],this.updateIndicator()},updateIndicator:function(){this.isLoading()?this._showIndicator():this._hideIndicator()},isLoading:function(){return this._countLoaders()>0},_countLoaders:function(){var a,b=0;for(a in this._dataLoaders)this._dataLoaders.hasOwnProperty(a)&&b++;return b},_showIndicator:function(){a.DomUtil.addClass(this._indicator,"is-loading"),this.options.separate||(this.zoomControl instanceof a.Control.Zoom?a.DomUtil.removeClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"==typeof a.Control.Zoomslider&&this.zoomControl instanceof a.Control.Zoomslider&&a.DomUtil.removeClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_hideIndicator:function(){a.DomUtil.removeClass(this._indicator,"is-loading"),this.options.separate||(this.zoomControl instanceof a.Control.Zoom?a.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"==typeof a.Control.Zoomslider&&this.zoomControl instanceof a.Control.Zoomslider&&a.DomUtil.addClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_getLastControlButton:function(){for(var a=this.zoomControl._container,b=a.children.length-1;b>0;){var c=a.children[b];if(this._indicator!==c&&0!==c.offsetWidth&&0!==c.offsetHeight)break;b--}return a.children[b]},_handleLoading:function(a){this.addLoader(this.getEventId(a))},_handleLoad:function(a){this.removeLoader(this.getEventId(a))},getEventId:function(a){return a.id?a.id:a.layer?a.layer._leaflet_id:a.target._leaflet_id},_layerAdd:function(a){if(a.layer&&a.layer.on)try{a.layer.on({loading:this._handleLoading,load:this._handleLoad},this)}catch(c){b.warn("L.Control.Loading: Tried and failed to add  event handlers to layer",a.layer),
b.warn("L.Control.Loading: Full details",c)}},_addLayerListeners:function(a){a.eachLayer(function(a){a.on&&a.on({loading:this._handleLoading,load:this._handleLoad},this)},this),a.on("layeradd",this._layerAdd,this)},_removeLayerListeners:function(a){a.eachLayer(function(a){a.off&&a.off({loading:this._handleLoading,load:this._handleLoad},this)},this),a.off("layeradd",this._layerAdd,this)},_addMapListeners:function(a){a.on({baselayerchange:this._handleLoading,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)},_removeMapListeners:function(a){a.off({baselayerchange:this._handleLoading,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)}}),a.Map.addInitHook(function(){this.options.loadingControl&&(this.loadingControl=new a.Control.Loading,this.addControl(this.loadingControl))}),a.Control.loading=function(b){return new a.Control.Loading(b)}}var b=window.console||{error:function(){},warn:function(){}};"function"==typeof define&&define.amd?define("ad",["5"],function(b){a(b)}):a(L)}(),b()}(),function(){var b=a.get("@@amd-helpers").createDefine();define("ae",["ad"],function(a){return a}),b()}(),function(){var b=a.get("@@amd-helpers").createDefine();!function(a,b){"function"==typeof define&&define.amd?define("af",["5"],b):"object"==typeof modules&&module.exports?module.exports=b(require("leaflet")):b(L)}(this,function(a){"use strict";return a.TileLayer.Provider=a.TileLayer.extend({initialize:function(b,c){var d=a.TileLayer.Provider.providers,e=b.split("."),f=e[0],g=e[1];if(!d[f])throw"No such provider ("+f+")";var h={url:d[f].url,options:d[f].options};if(g&&"variants"in d[f]){if(!(g in d[f].variants))throw"No such variant of "+f+" ("+g+")";var i,j=d[f].variants[g];i="string"==typeof j?{variant:j}:j.options,h={url:j.url||h.url,options:a.Util.extend({},h.options,i)}}var k="file:"===window.location.protocol||h.options.forceHTTP;0===h.url.indexOf("//")&&k&&(h.url="http:"+h.url),h.options.retina&&(c.detectRetina&&a.Browser.retina?c.detectRetina=!1:h.options.retina="");var l=function(a){return-1===a.indexOf("{attribution.")?a:a.replace(/\{attribution.(\w*)\}/,function(a,b){return l(d[b].options.attribution)})};h.options.attribution=l(h.options.attribution);var m=a.Util.extend({},h.options,c);a.TileLayer.prototype.initialize.call(this,h.url,m)}}),a.TileLayer.Provider.providers={OpenStreetMap:{url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},OpenTopoMap:{url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},Thunderforest:{url:"//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, {attribution.OpenStreetMap}',variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19}},SpinalMap:{options:{variant:"spinal-map",maxZoom:11}},Landscape:"landscape",Outdoors:"outdoors",Pioneer:"pioneer"}},OpenMapSurfer:{url:"http://korona.geog.uni-heidelberg.de/tiles/{variant}/x={x}&y={y}&z={z}",options:{maxZoom:20,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Roads:"roads",AdminBounds:{options:{variant:"adminb",maxZoom:19}},Grayscale:{options:{variant:"roadsg",maxZoom:19}}}},Hydda:{url:"http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"1234"},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:"//api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd"}},Stamen:{url:"//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{options:{variant:"watercolor",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TerrainBackground:{options:{variant:"terrain-background",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TopOSMRelief:{options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},Esri:{url:"//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"//{s}.{base}.maps.cit.api.here.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?app_id={app_id}&app_code={app_code}&lg={language}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},FreeMapSK:{url:"http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,subdomains:"1234",bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,attribution:'Datenquelle: <a href="www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}",options:{attribution:'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{options:{variant:"VIIRS_CityLights_2012",maxZoom:8}},ModisTerraLSTDay:{options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,opacity:.75}},ModisTerraSnowCover:{options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,opacity:.75}},ModisTerraAOD:{options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,opacity:.75}},ModisTerraChlorophyll:{options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,opacity:.75}}}},NLS:{url:"//nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,subdomains:"0123"}}},a.tileLayer.provider=function(b,c){return new a.TileLayer.Provider(b,c)},a}),b()}(),function(){var b=a.get("@@amd-helpers").createDefine();define("b0",["af"],function(a){return a}),b()}(),a.register("b1",[],function(){return{setters:[],execute:function(){}}}),function(){var b=a.get("@@amd-helpers").createDefine();!function(a,b,c){var d=a.L,e={};e.version="0.7.7","object"==typeof module&&"object"==typeof module.exports?module.exports=e:"function"==typeof define&&define.amd&&define("b2",[],e),e.noConflict=function(){return a.L=d,this},a.L=e,e.Util={extend:function(a){var b,c,d,e,f=Array.prototype.slice.call(arguments,1);for(c=0,d=f.length;d>c;c++){e=f[c]||{};for(b in e)e.hasOwnProperty(b)&&(a[b]=e[b])}return a},bind:function(a,b){var c=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0,b="_leaflet_id";return function(c){return c[b]=c[b]||++a,c[b]}}(),invokeEach:function(a,b,c){var d,e;if("object"==typeof a){e=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(e));return!0}return!1},limitExecByInterval:function(a,b,c){var d,e;return function f(){var g=arguments;return d?void(e=!0):(d=!0,setTimeout(function(){d=!1,e&&(f.apply(c,g),e=!1)},b),void a.apply(c,g))}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return e.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=e.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,d){var e=b[d];if(e===c)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){var c,d,e=["webkit","moz","o","ms"];for(c=0;c<e.length&&!d;c++)d=a[e[c]+b];return d}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,f=a.requestAnimationFrame||b("RequestAnimationFrame")||c,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};e.Util.requestAnimFrame=function(b,d,g,h){return b=e.bind(b,d),g&&f===c?void b():f.call(a,b,h)},e.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),e.extend=e.Util.extend,e.bind=e.Util.bind,e.stamp=e.Util.stamp,e.setOptions=e.Util.setOptions,e.Class=function(){},e.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;var d=new c;d.constructor=b,b.prototype=d;for(var f in this)this.hasOwnProperty(f)&&"prototype"!==f&&(b[f]=this[f]);a.statics&&(e.extend(b,a.statics),delete a.statics),a.includes&&(e.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),a.options&&d.options&&(a.options=e.extend({},d.options,a.options)),e.extend(d,a),d._initHooks=[];var g=this;return b.__super__=g.prototype,d.callInitHooks=function(){if(!this._initHooksCalled){g.prototype.callInitHooks&&g.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;b>a;a++)d._initHooks[a].call(this)}},b},e.Class.include=function(a){e.extend(this.prototype,a)},e.Class.mergeOptions=function(a){e.extend(this.prototype.options,a)},e.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)};var f="_leaflet_events";e.Mixin={},e.Mixin.Events={addEventListener:function(a,b,c){if(e.Util.invokeEach(a,this.addEventListener,this,b,c))return this;var d,g,h,i,j,k,l,m=this[f]=this[f]||{},n=c&&c!==this&&e.stamp(c);for(a=e.Util.splitWords(a),d=0,g=a.length;g>d;d++)h={action:b,context:c||this},i=a[d],n?(j=i+"_idx",k=j+"_len",l=m[j]=m[j]||{},l[n]||(l[n]=[],m[k]=(m[k]||0)+1),l[n].push(h)):(m[i]=m[i]||[],m[i].push(h));return this},hasEventListeners:function(a){var b=this[f];return!!b&&(a in b&&b[a].length>0||a+"_idx"in b&&b[a+"_idx_len"]>0)},removeEventListener:function(a,b,c){if(!this[f])return this;if(!a)return this.clearAllEventListeners();if(e.Util.invokeEach(a,this.removeEventListener,this,b,c))return this;var d,g,h,i,j,k,l,m,n,o=this[f],p=c&&c!==this&&e.stamp(c);for(a=e.Util.splitWords(a),d=0,g=a.length;g>d;d++)if(h=a[d],k=h+"_idx",l=k+"_len",m=o[k],b){if(i=p&&m?m[p]:o[h]){for(j=i.length-1;j>=0;j--)i[j].action!==b||c&&i[j].context!==c||(n=i.splice(j,1),n[0].action=e.Util.falseFn);c&&m&&0===i.length&&(delete m[p],o[l]--)}}else delete o[h],delete o[k],delete o[l];return this},clearAllEventListeners:function(){return delete this[f],this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var c,d,g,h,i,j=e.Util.extend({},b,{type:a,target:this}),k=this[f];if(k[a])for(c=k[a].slice(),d=0,g=c.length;g>d;d++)c[d].action.call(c[d].context,j);h=k[a+"_idx"];for(i in h)if(c=h[i].slice())for(d=0,g=c.length;g>d;d++)c[d].action.call(c[d].context,j);return this},addOneTimeEventListener:function(a,b,c){if(e.Util.invokeEach(a,this.addOneTimeEventListener,this,b,c))return this;var d=e.bind(function(){this.removeEventListener(a,b,c).removeEventListener(a,d,c)},this);return this.addEventListener(a,b,c).addEventListener(a,d,c)}},e.Mixin.Events.on=e.Mixin.Events.addEventListener,e.Mixin.Events.off=e.Mixin.Events.removeEventListener,e.Mixin.Events.once=e.Mixin.Events.addOneTimeEventListener,e.Mixin.Events.fire=e.Mixin.Events.fireEvent,function(){var d="ActiveXObject"in a,f=d&&!b.addEventListener,g=navigator.userAgent.toLowerCase(),h=-1!==g.indexOf("webkit"),i=-1!==g.indexOf("chrome"),j=-1!==g.indexOf("phantom"),k=-1!==g.indexOf("android"),l=-1!==g.search("android [23]"),m=-1!==g.indexOf("gecko"),n=typeof orientation!=c+"",o=!a.PointerEvent&&a.MSPointerEvent,p=a.PointerEvent&&a.navigator.pointerEnabled||o,q="devicePixelRatio"in a&&a.devicePixelRatio>1||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&a.matchMedia("(min-resolution:144dpi)").matches,r=b.documentElement,s=d&&"transition"in r.style,t="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!l,u="MozPerspective"in r.style,v="OTransition"in r.style,w=!a.L_DISABLE_3D&&(s||t||u||v)&&!j,x=!a.L_NO_TOUCH&&!j&&(p||"ontouchstart"in a||a.DocumentTouch&&b instanceof a.DocumentTouch);e.Browser={ie:d,ielt9:f,webkit:h,gecko:m&&!h&&!a.opera&&!d,android:k,android23:l,chrome:i,ie3d:s,webkit3d:t,gecko3d:u,opera3d:v,any3d:w,mobile:n,mobileWebkit:n&&h,mobileWebkit3d:n&&t,mobileOpera:n&&a.opera,touch:x,msPointer:o,pointer:p,retina:q}}(),e.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},add:function(a){return this.clone()._add(e.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(e.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=e.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=e.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=e.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+e.Util.formatNum(this.x)+", "+e.Util.formatNum(this.y)+")"}},e.point=function(a,b,d){return a instanceof e.Point?a:e.Util.isArray(a)?new e.Point(a[0],a[1]):a===c||null===a?a:new e.Point(a,b,d)},e.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},e.Bounds.prototype={extend:function(a){return a=e.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new e.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new e.Point(this.min.x,this.max.y)},getTopRight:function(){return new e.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof e.Point?e.point(a):e.bounds(a),a instanceof e.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=e.bounds(a);var b=this.min,c=this.max,d=a.min,f=a.max,g=f.x>=b.x&&d.x<=c.x,h=f.y>=b.y&&d.y<=c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},e.bounds=function(a,b){return!a||a instanceof e.Bounds?a:new e.Bounds(a,b)},e.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},e.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new e.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},e.DomUtil={get:function(a){return"string"==typeof a?b.getElementById(a):a},getStyle:function(a,c){var d=a.style[c];if(!d&&a.currentStyle&&(d=a.currentStyle[c]),(!d||"auto"===d)&&b.defaultView){var e=b.defaultView.getComputedStyle(a,null);d=e?e[c]:null}return"auto"===d?null:d},getViewportOffset:function(a){var c,d=0,f=0,g=a,h=b.body,i=b.documentElement;do{if(d+=g.offsetTop||0,f+=g.offsetLeft||0,d+=parseInt(e.DomUtil.getStyle(g,"borderTopWidth"),10)||0,f+=parseInt(e.DomUtil.getStyle(g,"borderLeftWidth"),10)||0,c=e.DomUtil.getStyle(g,"position"),g.offsetParent===h&&"absolute"===c)break;if("fixed"===c){d+=h.scrollTop||i.scrollTop||0,f+=h.scrollLeft||i.scrollLeft||0;break}if("relative"===c&&!g.offsetLeft){var j=e.DomUtil.getStyle(g,"width"),k=e.DomUtil.getStyle(g,"max-width"),l=g.getBoundingClientRect();("none"!==j||"none"!==k)&&(f+=l.left+g.clientLeft),d+=l.top+(h.scrollTop||i.scrollTop||0);break}g=g.offsetParent}while(g);g=a;do{if(g===h)break;d-=g.scrollTop||0,f-=g.scrollLeft||0,g=g.parentNode}while(g);return new e.Point(f,d)},documentIsLtr:function(){return e.DomUtil._docIsLtrCached||(e.DomUtil._docIsLtrCached=!0,e.DomUtil._docIsLtr="ltr"===e.DomUtil.getStyle(b.body,"direction")),e.DomUtil._docIsLtr},create:function(a,c,d){var e=b.createElement(a);return e.className=c,d&&d.appendChild(e),e},hasClass:function(a,b){if(a.classList!==c)return a.classList.contains(b);var d=e.DomUtil._getClass(a);return d.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(d)},addClass:function(a,b){if(a.classList!==c)for(var d=e.Util.splitWords(b),f=0,g=d.length;g>f;f++)a.classList.add(d[f]);else if(!e.DomUtil.hasClass(a,b)){var h=e.DomUtil._getClass(a);e.DomUtil._setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==c?a.classList.remove(b):e.DomUtil._setClass(a,e.Util.trim((" "+e.DomUtil._getClass(a)+" ").replace(" "+b+" "," ")))},_setClass:function(a,b){a.className.baseVal===c?a.className=b:a.className.baseVal=b},_getClass:function(a){return a.className.baseVal===c?a.className:a.className.baseVal},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(e){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}},testProp:function(a){for(var c=b.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1},getTranslateString:function(a){var b=e.Browser.webkit3d,c="translate"+(b?"3d":"")+"(",d=(b?",0":"")+")";return c+a.x+"px,"+a.y+"px"+d},getScaleString:function(a,b){var c=e.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a))),d=" scale("+a+") ";return c+d},setPosition:function(a,b,c){a._leaflet_pos=b,!c&&e.Browser.any3d?a.style[e.DomUtil.TRANSFORM]=e.DomUtil.getTranslateString(b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},e.DomUtil.TRANSFORM=e.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),e.DomUtil.TRANSITION=e.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),e.DomUtil.TRANSITION_END="webkitTransition"===e.DomUtil.TRANSITION||"OTransition"===e.DomUtil.TRANSITION?e.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in b)e.extend(e.DomUtil,{disableTextSelection:function(){e.DomEvent.on(a,"selectstart",e.DomEvent.preventDefault)},enableTextSelection:function(){e.DomEvent.off(a,"selectstart",e.DomEvent.preventDefault)}});else{var c=e.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);e.extend(e.DomUtil,{disableTextSelection:function(){if(c){var a=b.documentElement.style;this._userSelect=a[c],a[c]="none"}},enableTextSelection:function(){c&&(b.documentElement.style[c]=this._userSelect,delete this._userSelect)}})}e.extend(e.DomUtil,{disableImageDrag:function(){e.DomEvent.on(a,"dragstart",e.DomEvent.preventDefault)},enableImageDrag:function(){e.DomEvent.off(a,"dragstart",e.DomEvent.preventDefault)}})}(),e.LatLng=function(a,b,d){if(a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=a,this.lng=b,d!==c&&(this.alt=parseFloat(d))},e.extend(e.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),e.LatLng.prototype={equals:function(a){if(!a)return!1;a=e.latLng(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=e.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+e.Util.formatNum(this.lat,a)+", "+e.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=e.latLng(a);var b=6378137,c=e.LatLng.DEG_TO_RAD,d=(a.lat-this.lat)*c,f=(a.lng-this.lng)*c,g=this.lat*c,h=a.lat*c,i=Math.sin(d/2),j=Math.sin(f/2),k=i*i+j*j*Math.cos(g)*Math.cos(h);return 2*b*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(a>c||c===b?b:a),new e.LatLng(this.lat,c)}},e.latLng=function(a,b){return a instanceof e.LatLng?a:e.Util.isArray(a)?"number"==typeof a[0]||"string"==typeof a[0]?new e.LatLng(a[0],a[1],a[2]):null:a===c||null===a?a:"object"==typeof a&&"lat"in a?new e.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===c?null:new e.LatLng(a,b)},e.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},e.LatLngBounds.prototype={extend:function(a){if(!a)return this;var b=e.latLng(a);return a=null!==b?b:e.latLngBounds(a),a instanceof e.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new e.LatLng(a.lat,a.lng),this._northEast=new e.LatLng(a.lat,a.lng)):a instanceof e.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,f=Math.abs(b.lng-c.lng)*a;return new e.LatLngBounds(new e.LatLng(b.lat-d,b.lng-f),new e.LatLng(c.lat+d,c.lng+f))},getCenter:function(){return new e.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new e.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new e.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof e.LatLng?e.latLng(a):e.latLngBounds(a);var b,c,d=this._southWest,f=this._northEast;return a instanceof e.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=f.lat&&b.lng>=d.lng&&c.lng<=f.lng},intersects:function(a){a=e.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),f=a.getNorthEast(),g=f.lat>=b.lat&&d.lat<=c.lat,h=f.lng>=b.lng&&d.lng<=c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return a?(a=e.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},e.latLngBounds=function(a,b){return!a||a instanceof e.LatLngBounds?a:new e.LatLngBounds(a,b)},e.Projection={},e.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=e.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),f=a.lng*b,g=d*b;return g=Math.log(Math.tan(Math.PI/4+g/2)),new e.Point(f,g)},unproject:function(a){var b=e.LatLng.RAD_TO_DEG,c=a.x*b,d=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new e.LatLng(d,c)}},e.Projection.LonLat={project:function(a){return new e.Point(a.lng,a.lat)},unproject:function(a){return new e.LatLng(a.y,a.x)}},e.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)},getSize:function(a){var b=this.scale(a);return e.point(b,b)}},e.CRS.Simple=e.extend({},e.CRS,{projection:e.Projection.LonLat,transformation:new e.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}}),e.CRS.EPSG3857=e.extend({},e.CRS,{code:"EPSG:3857",projection:e.Projection.SphericalMercator,transformation:new e.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),
project:function(a){var b=this.projection.project(a),c=6378137;return b.multiplyBy(c)}}),e.CRS.EPSG900913=e.extend({},e.CRS.EPSG3857,{code:"EPSG:900913"}),e.CRS.EPSG4326=e.extend({},e.CRS,{code:"EPSG:4326",projection:e.Projection.LonLat,transformation:new e.Transformation(1/360,.5,-1/360,.5)}),e.Map=e.Class.extend({includes:e.Mixin.Events,options:{crs:e.CRS.EPSG3857,fadeAnimation:e.DomUtil.TRANSITION&&!e.Browser.android23,trackResize:!0,markerZoomAnimation:e.DomUtil.TRANSITION&&e.Browser.any3d},initialize:function(a,b){b=e.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=e.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.center&&b.zoom!==c&&this.setView(e.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(b.layers)},setView:function(a,b){return b=b===c?this.getZoom():b,this._resetView(e.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=this._limitZoom(a),this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),f=this.getSize().divideBy(2),g=a instanceof e.Point?a:this.latLngToContainerPoint(a),h=g.subtract(f).multiplyBy(1-1/d),i=this.containerPointToLatLng(f.add(h));return this.setView(i,b,{zoom:c})},fitBounds:function(a,b){b=b||{},a=a.getBounds?a.getBounds():e.latLngBounds(a);var c=e.point(b.paddingTopLeft||b.padding||[0,0]),d=e.point(b.paddingBottomRight||b.padding||[0,0]),f=this.getBoundsZoom(a,!1,c.add(d));f=b.maxZoom?Math.min(b.maxZoom,f):f;var g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),f),i=this.project(a.getNorthEast(),f),j=this.unproject(h.add(i).divideBy(2).add(g),f);return this.setView(j,f,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(e.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=e.latLngBounds(a),this.options.maxBounds=a,a?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(a,b){var c=this.getCenter(),d=this._limitCenter(c,this._zoom,a);return c.equals(d)?this:this.panTo(d,b)},addLayer:function(a){var b=e.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&e.TileLayer&&a instanceof e.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),this)},removeLayer:function(a){var b=e.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&e.TileLayer&&a instanceof e.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(a){return a?e.stamp(a)in this._layers:!1},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){if(!this._loaded)return this;a=e.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),f=c.divideBy(2).round(),g=d.subtract(f);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=c}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new e.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===c?this._layersMinZoom===c?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===c?this._layersMaxZoom===c?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=e.latLngBounds(a);var d,f=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),h=this.getSize(),i=a.getNorthWest(),j=a.getSouthEast(),k=!0;c=e.point(c||[0,0]);do f++,d=this.project(j,f).subtract(this.project(i,f)).add(c),k=b?d.x<h.x||d.y<h.y:h.contains(d);while(k&&g>=f);return k&&b?null:b?f:f-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new e.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new e.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===c?this._zoom:b,this.options.crs.latLngToPoint(e.latLng(a),b)},unproject:function(a,b){return b=b===c?this._zoom:b,this.options.crs.pointToLatLng(e.point(a),b)},layerPointToLatLng:function(a){var b=e.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(e.latLng(a))._round();return b._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return e.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return e.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(e.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(e.latLng(a)))},mouseEventToContainerPoint:function(a){return e.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=e.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet)throw new Error("Map container is already initialized.");b._leaflet=!0},_initLayout:function(){var a=this._container;e.DomUtil.addClass(a,"leaflet-container"+(e.Browser.touch?" leaflet-touch":"")+(e.Browser.retina?" leaflet-retina":"")+(e.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var b=e.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),a.shadowPane=this._createPane("leaflet-shadow-pane"),a.overlayPane=this._createPane("leaflet-overlay-pane"),a.markerPane=this._createPane("leaflet-marker-pane"),a.popupPane=this._createPane("leaflet-popup-pane");var b=" leaflet-zoom-hide";this.options.markerZoomAnimation||(e.DomUtil.addClass(a.markerPane,b),e.DomUtil.addClass(a.shadowPane,b),e.DomUtil.addClass(a.popupPane,b))},_createPane:function(a,b){return e.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?e.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_resetView:function(a,b,c,d){var f=this._zoom!==b;d||(this.fire("movestart"),f&&this.fire("zoomstart")),this._zoom=b,this._initialCenter=a,this._initialTopLeftPoint=this._getNewTopLeftPoint(a),c?this._initialTopLeftPoint._add(this._getMapPanePos()):e.DomUtil.setPosition(this._mapPane,new e.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var g=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!c}),g&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(f||d)&&this.fire("zoomend"),this.fire("moveend",{hard:!c})},_rawPanBy:function(a){e.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,d=-(1/0),e=this._getZoomSpan();for(a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a];isNaN(f.options.minZoom)||(b=Math.min(b,f.options.minZoom)),isNaN(f.options.maxZoom)||(d=Math.max(d,f.options.maxZoom))}a===c?this._layersMaxZoom=this._layersMinZoom=c:(this._layersMaxZoom=d,this._layersMinZoom=b),e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(e.DomEvent){b=b||"on",e.DomEvent[b](this._container,"click",this._onMouseClick,this);var c,d,f=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(c=0,d=f.length;d>c;c++)e.DomEvent[b](this._container,f[c],this._fireMouseEvent,this);this.options.trackResize&&e.DomEvent[b](a,"resize",this._onResize,this)}},_onResize:function(){e.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=e.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||e.DomEvent._skipped(a)||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!e.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&e.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),d=this.containerPointToLayerPoint(c),f=this.layerPointToLatLng(d);this.fire(b,{latlng:f,layerPoint:d,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this),this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return e.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),f=this.getSize().divideBy(2),g=new e.Bounds(d.subtract(f),d.add(f)),h=this._getBoundsOffset(g,c,b);return this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new e.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=this.project(b.getNorthWest(),c).subtract(a.min),f=this.project(b.getSouthEast(),c).subtract(a.max),g=this._rebound(d.x,-f.x),h=this._rebound(d.y,-f.y);return new e.Point(g,h)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}}),e.map=function(a,b){return new e.Map(a,b)},e.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=e.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),f=this.R_MAJOR,g=this.R_MINOR,h=a.lng*b*f,i=d*b,j=g/f,k=Math.sqrt(1-j*j),l=k*Math.sin(i);l=Math.pow((1-l)/(1+l),.5*k);var m=Math.tan(.5*(.5*Math.PI-i))/l;return i=-f*Math.log(m),new e.Point(h,i)},unproject:function(a){for(var b,c=e.LatLng.RAD_TO_DEG,d=this.R_MAJOR,f=this.R_MINOR,g=a.x*c/d,h=f/d,i=Math.sqrt(1-h*h),j=Math.exp(-a.y/d),k=Math.PI/2-2*Math.atan(j),l=15,m=1e-7,n=l,o=.1;Math.abs(o)>m&&--n>0;)b=i*Math.sin(k),o=Math.PI/2-2*Math.atan(j*Math.pow((1-b)/(1+b),.5*i))-k,k+=o;return new e.LatLng(k*c,g)}},e.CRS.EPSG3395=e.extend({},e.CRS,{code:"EPSG:3395",projection:e.Projection.Mercator,transformation:function(){var a=e.Projection.Mercator,b=a.R_MAJOR,c=.5/(Math.PI*b);return new e.Transformation(c,.5,-c,.5)}()}),e.TileLayer=e.Class.extend({includes:e.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:e.Browser.mobile,updateWhenIdle:e.Browser.mobile},initialize:function(a,b){b=e.setOptions(this,b),b.detectRetina&&e.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom>0&&b.minZoom--,this.options.maxZoom--),b.bounds&&(b.bounds=e.latLngBounds(b.bounds)),this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a,this._animated=a._zoomAnimated,this._initContainer(),a.on({viewreset:this._reset,moveend:this._update},this),this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=e.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container),a.off({viewreset:this._reset,moveend:this._update},this),this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==c&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,d,e,f=a.children,g=-b(1/0,-(1/0));for(d=0,e=f.length;e>d;d++)f[d]!==this._container&&(c=parseInt(f[d].style.zIndex,10),isNaN(c)||(g=b(g,c)));this.options.zIndex=this._container.style.zIndex=(isFinite(g)?g:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(e.Browser.ielt9)for(a in b)e.DomUtil.setOpacity(b[a],this.options.opacity);else e.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;if(!this._container){if(this._container=e.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var b="leaflet-tile-container";this._bgBuffer=e.DomUtil.create("div",b,this._container),this._tileContainer=e.DomUtil.create("div",b,this._container)}else this._tileContainer=this._container;a.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{tile:this._tiles[b]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&a&&a.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var a=this._map,b=a.getZoom()+this.options.zoomOffset,c=this.options.maxNativeZoom,d=this.options.tileSize;return c&&b>c&&(d=Math.round(a.getZoomScale(b)/a.getZoomScale(c)*d)),d},_update:function(){if(this._map){var a=this._map,b=a.getPixelBounds(),c=a.getZoom(),d=this._getTileSize();if(!(c>this.options.maxZoom||c<this.options.minZoom)){var f=e.bounds(b.min.divideBy(d)._floor(),b.max.divideBy(d)._floor());this._addTilesFromCenterOut(f),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(f)}}},_addTilesFromCenterOut:function(a){var c,d,f,g=[],h=a.getCenter();for(c=a.min.y;c<=a.max.y;c++)for(d=a.min.x;d<=a.max.x;d++)f=new e.Point(d,c),this._tileShouldBeLoaded(f)&&g.push(f);var i=g.length;if(0!==i){g.sort(function(a,b){return a.distanceTo(h)-b.distanceTo(h)});var j=b.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=i,d=0;i>d;d++)this._addTile(g[d],j);this._tileContainer.appendChild(j)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=this._getWrapTileNum();if(b.noWrap&&(a.x<0||a.x>=c.x)||a.y<0||a.y>=c.y)return!1}if(b.bounds){var d=this._getTileSize(),e=a.multiplyBy(d),f=e.add([d,d]),g=this._map.unproject(e),h=this._map.unproject(f);if(b.continuousWorld||b.noWrap||(g=g.wrap(),h=h.wrap()),!b.bounds.intersects([g,h]))return!1}return!0},_removeOtherTiles:function(a){var b,c,d,e;for(e in this._tiles)b=e.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),(c<a.min.x||c>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(e)},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src}),this.options.reuseTiles?(e.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b),e.Browser.android||(b.onload=null,b.src=e.Util.emptyImageUrl),delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),d=this._getTile();e.DomUtil.setPosition(d,c,e.Browser.chrome),this._tiles[a.x+":"+a.y]=d,this._loadTile(d,a),d.parentNode!==this._tileContainer&&b.appendChild(d)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this._getTileSize();return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return e.Util.template(this._url,e.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){var a=this._map.options.crs,b=a.getSize(this._map.getZoom());return b.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b.x+b.x)%b.x),this.options.tms&&(a.y=b.y-a.y-1),a.z=this._getZoomForUrl()},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=e.DomUtil.create("img","leaflet-tile");return a.style.width=a.style.height=this._getTileSize()+"px",a.galleryimg="no",a.onselectstart=a.onmousemove=e.Util.falseFn,e.Browser.ielt9&&this.options.opacity!==c&&e.DomUtil.setOpacity(a,this.options.opacity),e.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden"),a},_loadTile:function(a,b){a._layer=this,a.onload=this._tileOnLoad,a.onerror=this._tileOnError,this._adjustTilePoint(b),a.src=this.getTileUrl(b),this.fire("tileloadstart",{tile:a,url:a.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&e.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(e.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==e.Util.emptyImageUrl&&(e.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src})),a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b),a._tileLoaded()}}),e.tileLayer=function(a,b){return new e.TileLayer(a,b)},e.TileLayer.WMS=e.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=e.extend({},this.defaultWmsParams),d=b.tileSize||this.options.tileSize;b.detectRetina&&e.Browser.retina?c.width=c.height=2*d:c.width=c.height=d;for(var f in b)this.options.hasOwnProperty(f)||"crs"===f||(c[f]=b[f]);this.wmsParams=c,e.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,e.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._map,c=this.options.tileSize,d=a.multiplyBy(c),f=d.add([c,c]),g=this._crs.project(b.unproject(d,a.z)),h=this._crs.project(b.unproject(f,a.z)),i=this._wmsVersion>=1.3&&this._crs===e.CRS.EPSG4326?[h.y,g.x,g.y,h.x].join(","):[g.x,h.y,h.x,g.y].join(","),j=e.Util.template(this._url,{s:this._getSubdomain(a)});return j+e.Util.getParamString(this.wmsParams,j,!0)+"&BBOX="+i},setParams:function(a,b){return e.extend(this.wmsParams,a),b||this.redraw(),this}}),e.tileLayer.wms=function(a,b){return new e.TileLayer.WMS(a,b)},e.TileLayer.Canvas=e.TileLayer.extend({options:{async:!1},initialize:function(a){e.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTile:function(){var a=e.DomUtil.create("canvas","leaflet-tile");return a.width=a.height=this.options.tileSize,a.onselectstart=a.onmousemove=e.Util.falseFn,a},_loadTile:function(a,b){a._layer=this,a._tilePoint=b,this._redrawTile(a),this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}}),e.tileLayer.canvas=function(a){return new e.TileLayer.Canvas(a)},e.ImageOverlay=e.Class.extend({includes:e.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a,this._bounds=e.latLngBounds(b),e.setOptions(this,c)},onAdd:function(a){this._map=a,this._image||this._initImage(),a._panes.overlayPane.appendChild(this._image),a.on("viewreset",this._reset,this),a.options.zoomAnimation&&e.Browser.any3d&&a.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image),a.off("viewreset",this._reset,this),a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},setUrl:function(a){this._url=a,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=e.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&e.Browser.any3d?e.DomUtil.addClass(this._image,"leaflet-zoom-animated"):e.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),e.extend(this._image,{galleryimg:"no",onselectstart:e.Util.falseFn,onmousemove:e.Util.falseFn,onload:e.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,c=this._image,d=b.getZoomScale(a.zoom),f=this._bounds.getNorthWest(),g=this._bounds.getSouthEast(),h=b._latLngToNewLayerPoint(f,a.zoom,a.center),i=b._latLngToNewLayerPoint(g,a.zoom,a.center)._subtract(h),j=h._add(i._multiplyBy(.5*(1-1/d)));c.style[e.DomUtil.TRANSFORM]=e.DomUtil.getTranslateString(j)+" scale("+d+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);e.DomUtil.setPosition(a,b),a.style.width=c.x+"px",a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){e.DomUtil.setOpacity(this._image,this.options.opacity)}}),e.imageOverlay=function(a,b,c){return new e.ImageOverlay(a,b,c)},e.Icon=e.Class.extend({options:{className:""},initialize:function(a){e.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d;return d=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c,d=this.options,f=e.point(d[b+"Size"]);c="shadow"===b?e.point(d.shadowAnchor||d.iconAnchor):e.point(d.iconAnchor),!c&&f&&(c=f.divideBy(2,!0)),a.className="leaflet-marker-"+b+" "+d.className,c&&(a.style.marginLeft=-c.x+"px",a.style.marginTop=-c.y+"px"),f&&(a.style.width=f.x+"px",a.style.height=f.y+"px")},_createImg:function(a,c){return c=c||b.createElement("img"),c.src=a,c},_getIconUrl:function(a){return e.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}}),e.icon=function(a){return new e.Icon(a)},e.Icon.Default=e.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];e.Browser.retina&&"icon"===a&&(a+="-2x");var c=e.Icon.Default.imagePath;if(!c)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+".png"}}),e.Icon.Default.imagePath=function(){var a,c,d,e,f,g=b.getElementsByTagName("script"),h=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,c=g.length;c>a;a++)if(d=g[a].src,e=d.match(h))return f=d.split(h)[0],(f?f+"/":"")+"images"}(),e.Marker=e.Class.extend({includes:e.Mixin.Events,options:{icon:new e.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){e.setOptions(this,b),this._latlng=e.latLng(a)},onAdd:function(a){this._map=a,a.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),a.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=e.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,d=c?"leaflet-zoom-animated":"leaflet-zoom-hide",f=a.icon.createIcon(this._icon),g=!1;f!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(f.title=a.title),a.alt&&(f.alt=a.alt)),e.DomUtil.addClass(f,d),a.keyboard&&(f.tabIndex="0"),this._icon=f,this._initInteraction(),a.riseOnHover&&e.DomEvent.on(f,"mouseover",this._bringToFront,this).on(f,"mouseout",this._resetZIndex,this);var h=a.icon.createShadow(this._shadow),i=!1;h!==this._shadow&&(this._removeShadow(),i=!0),h&&e.DomUtil.addClass(h,d),this._shadow=h,a.opacity<1&&this._updateOpacity();var j=this._map._panes;g&&j.markerPane.appendChild(this._icon),h&&i&&j.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&e.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(a){e.DomUtil.setPosition(this._icon,a),this._shadow&&e.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];e.DomUtil.addClass(a,"leaflet-clickable"),e.DomEvent.on(a,"click",this._onMouseClick,this),e.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)e.DomEvent.on(a,b[c],this._fireMouseEvent,this);e.Handler.MarkerDrag&&(this.dragging=new e.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&e.DomEvent.stopPropagation(a),b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&e.DomEvent.preventDefault(a),"mousedown"!==a.type?e.DomEvent.stopPropagation(a):e.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){e.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&e.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),e.marker=function(a,b){return new e.Marker(a,b)},e.DivIcon=e.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){var c=a&&"DIV"===a.tagName?a:b.createElement("div"),d=this.options;return d.html!==!1?c.innerHTML=d.html:c.innerHTML="",d.bgPos&&(c.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px"),
this._setIconStyles(c,"icon"),c},createShadow:function(){return null}}),e.divIcon=function(a){return new e.DivIcon(a)},e.Map.mergeOptions({closePopupOnClick:!0}),e.Popup=e.Class.extend({includes:e.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,b){e.setOptions(this,a),this._source=b,this._animated=e.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._container||this._initLayout();var b=a.options.fadeAnimation;b&&e.DomUtil.setOpacity(this._container,0),a._panes.popupPane.appendChild(this._container),a.on(this._getEvents(),this),this.update(),b&&e.DomUtil.setOpacity(this._container,1),this.fire("open"),a.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container),e.Util.falseFn(this._container.offsetWidth),a.off(this._getEvents(),this),a.options.fadeAnimation&&e.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),a.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=e.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var a={viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b="leaflet-popup",c=b+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),d=this._container=e.DomUtil.create("div",c);this.options.closeButton&&(a=this._closeButton=e.DomUtil.create("a",b+"-close-button",d),a.href="#close",a.innerHTML="&#215;",e.DomEvent.disableClickPropagation(a),e.DomEvent.on(a,"click",this._onCloseButtonClick,this));var f=this._wrapper=e.DomUtil.create("div",b+"-content-wrapper",d);e.DomEvent.disableClickPropagation(f),this._contentNode=e.DomUtil.create("div",b+"-content",f),e.DomEvent.disableScrollPropagation(this._contentNode),e.DomEvent.on(f,"contextmenu",e.DomEvent.stopPropagation),this._tipContainer=e.DomUtil.create("div",b+"-tip-container",d),this._tip=e.DomUtil.create("div",b+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,f=this.options.maxHeight,g="leaflet-popup-scrolled";f&&d>f?(b.height=f+"px",e.DomUtil.addClass(a,g)):e.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=e.point(this.options.offset);b&&e.DomUtil.setPosition(this._container,a),this._containerBottom=-c.y-(b?0:a.y),this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);e.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,d=new e.Point(this._containerLeft,-b-this._containerBottom);this._animated&&d._add(e.DomUtil.getPosition(this._container));var f=a.layerPointToContainerPoint(d),g=e.point(this.options.autoPanPadding),h=e.point(this.options.autoPanPaddingTopLeft||g),i=e.point(this.options.autoPanPaddingBottomRight||g),j=a.getSize(),k=0,l=0;f.x+c+i.x>j.x&&(k=f.x+c-j.x+i.x),f.x-k-h.x<0&&(k=f.x-h.x),f.y+b+i.y>j.y&&(l=f.y+b-j.y+i.y),f.y-l-h.y<0&&(l=f.y-h.y),(k||l)&&a.fire("autopanstart").panBy([k,l])}},_onCloseButtonClick:function(a){this._close(),e.DomEvent.stop(a)}}),e.popup=function(a,b){return new e.Popup(a,b)},e.Map.include({openPopup:function(a,b,c){if(this.closePopup(),!(a instanceof e.Popup)){var d=a;a=new e.Popup(c).setLatLng(b).setContent(d)}return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&(this.removeLayer(a),a._isOpen=!1),this}}),e.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(a,b){var c=e.point(this.options.icon.options.popupAnchor||[0,0]);return c=c.add(e.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=e.extend({offset:c},b),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),a instanceof e.Popup?(e.setOptions(a,b),this._popup=a,a._source=this):this._popup=new e.Popup(b,this).setContent(a),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),e.LayerGroup=e.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return a?a in this._layers||this.getLayerId(a)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){this._map=a,this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a),this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return e.stamp(a)}}),e.layerGroup=function(a){return new e.LayerGroup(a)},e.FeatureGroup=e.LayerGroup.extend({includes:e.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?this:("on"in a&&a.on(e.FeatureGroup.EVENTS,this._propagateEvent,this),e.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),"off"in a&&a.off(e.FeatureGroup.EVENTS,this._propagateEvent,this),e.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},openPopup:function(a){for(var b in this._layers){this._layers[b].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new e.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof e.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a=e.extend({layer:a.target,target:this},a),this.fire(a.type,a)}}),e.featureGroup=function(a){return new e.FeatureGroup(a)},e.Path=e.Class.extend({includes:[e.Mixin.Events],statics:{CLIP_PADDING:function(){var b=e.Browser.mobile?1280:2e3,c=(b/Math.max(a.outerWidth,a.outerHeight)-1)/2;return Math.max(0,Math.min(.5,c))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){e.setOptions(this,a)},onAdd:function(a){this._map=a,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,e.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return e.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),e.Map.include({_updatePathViewport:function(){var a=e.Path.CLIP_PADDING,b=this.getSize(),c=e.DomUtil.getPosition(this._mapPane),d=c.multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),f=d.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new e.Bounds(d,f)}}),e.Path.SVG_NS="http://www.w3.org/2000/svg",e.Browser.svg=!(!b.createElementNS||!b.createElementNS(e.Path.SVG_NS,"svg").createSVGRect),e.Path=e.Path.extend({statics:{SVG:e.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return b.createElementNS(e.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&e.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0"),this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){(e.Browser.svg||!e.Browser.vml)&&e.DomUtil.addClass(this._path,"leaflet-clickable"),e.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],b=0;b<a.length;b++)e.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this._map&&this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),d=b.containerPointToLayerPoint(c),f=b.layerPointToLatLng(d);this.fire(a.type,{latlng:f,layerPoint:d,containerPoint:c,originalEvent:a}),"contextmenu"===a.type&&e.DomEvent.preventDefault(a),"mousemove"!==a.type&&e.DomEvent.stopPropagation(a)}}}),e.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=e.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&e.Browser.any3d?(e.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):e.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom),c=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[e.DomUtil.TRANSFORM]=e.DomUtil.getTranslateString(c)+" scale("+b+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,d=c.x-b.x,f=c.y-b.y,g=this._pathRoot,h=this._panes.overlayPane;e.Browser.mobileWebkit&&h.removeChild(g),e.DomUtil.setPosition(g,b),g.setAttribute("width",d),g.setAttribute("height",f),g.setAttribute("viewBox",[b.x,b.y,d,f].join(" ")),e.Browser.mobileWebkit&&h.appendChild(g)}}}),e.Path.include({bindPopup:function(a,b){return a instanceof e.Popup?this._popup=a:((!this._popup||b)&&(this._popup=new e.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng),this._map.openPopup(this._popup)}}),e.Browser.vml=!e.Browser.svg&&function(){try{var a=b.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(d){return!1}}(),e.Path=e.Browser.svg||!e.Browser.vml?e.Path:e.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return b.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return b.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");e.DomUtil.addClass(a,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&e.DomUtil.addClass(a,"leaflet-clickable"),a.coordsize="1 1",this._path=this._createElement("path"),a.appendChild(this._path),this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,d=this._container;d.stroked=c.stroke,d.filled=c.fill,c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",d.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,c.dashArray?a.dashStyle=e.Util.isArray(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):a.dashStyle="",c.lineCap&&(a.endcap=c.lineCap.replace("butt","flat")),c.lineJoin&&(a.joinstyle=c.lineJoin)):a&&(d.removeChild(a),this._stroke=null),c.fill?(b||(b=this._fill=this._createElement("fill"),d.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(d.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none",this._path.v=this.getPathString()+" ",a.display=""}}),e.Map.include(e.Browser.svg||!e.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=b.createElement("div");a.className="leaflet-vml-container",this._panes.overlayPane.appendChild(a),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),e.Browser.canvas=function(){return!!b.createElement("canvas").getContext}(),e.Path=e.Path.SVG&&!a.L_PREFER_CANVAS||!e.Browser.canvas?e.Path:e.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return e.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!e.Path._updateRequest&&(e.Path._updateRequest=e.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){e.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color),a.fill&&(this._ctx.fillStyle=a.fillColor||a.color),a.lineCap&&(this._ctx.lineCap=a.lineCap),a.lineJoin&&(this._ctx.lineJoin=a.lineJoin)},_drawPath:function(){var a,b,c,d,f,g;for(this._ctx.beginPath(),a=0,c=this._parts.length;c>a;a++){for(b=0,d=this._parts[a].length;d>b;b++)f=this._parts[a][b],g=(0===b?"move":"line")+"To",this._ctx[g](f.x,f.y);this instanceof e.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath(),a.save(),this._updateStyle(),b.fill&&(a.globalAlpha=b.fillOpacity,a.fill(b.fillRule||"evenodd")),b.stroke&&(a.globalAlpha=b.opacity,a.stroke()),a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(a){this._containsPoint(a.layerPoint)&&this.fire(a.type,a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}}),e.Map.include(e.Path.SVG&&!a.L_PREFER_CANVAS||!e.Browser.canvas?{}:{_initPathRoot:function(){var a,c=this._pathRoot;c||(c=this._pathRoot=b.createElement("canvas"),c.style.position="absolute",a=this._canvasCtx=c.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(c),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max.subtract(b),d=this._pathRoot;e.DomUtil.setPosition(d,b),d.width=c.x,d.height=c.y,d.getContext("2d").translate(-b.x,-b.y)}}}),e.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var d=a.length,e=typeof Uint8Array!=c+""?Uint8Array:Array,f=new e(d);f[0]=f[d-1]=1,this._simplifyDPStep(a,f,b,0,d-1);var g,h=[];for(g=0;d>g;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;e-1>=g;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;f>d;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return f-1>e&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d){var e,f,g,h=d?this._lastCode:this._getBitCode(a,c),i=this._getBitCode(b,c);for(this._lastCode=i;;){if(!(h|i))return[a,b];if(h&i)return!1;e=h||i,f=this._getEdgeIntersection(a,b,e,c),g=this._getBitCode(f,c),e===h?(a=f,h=g):(b=f,i=g)}},_getEdgeIntersection:function(a,b,c,d){var f=b.x-a.x,g=b.y-a.y,h=d.min,i=d.max;return 8&c?new e.Point(a.x+f*(i.y-a.y)/g,i.y):4&c?new e.Point(a.x+f*(h.y-a.y)/g,h.y):2&c?new e.Point(i.x,a.y+g*(i.x-a.x)/f):1&c?new e.Point(h.x,a.y+g*(h.x-a.x)/f):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var f,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(f=((a.x-g)*i+(a.y-h)*j)/k,f>1?(g=c.x,h=c.y):f>0&&(g+=i*f,h+=j*f)),i=a.x-g,j=a.y-h,d?i*i+j*j:new e.Point(g,h)}},e.Polyline=e.Path.extend({initialize:function(a,b){e.Path.prototype.initialize.call(this,b),this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(e.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,d=1/0,f=this._parts,g=null,h=0,i=f.length;i>h;h++)for(var j=f[h],k=1,l=j.length;l>k;k++){b=j[k-1],c=j[k];var m=e.LineUtil._sqClosestPointOnSegment(a,b,c,!0);d>m&&(d=m,g=e.LineUtil._sqClosestPointOnSegment(a,b,c))}return g&&(g.distance=Math.sqrt(d)),g},getBounds:function(){return new e.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,b){var c,d,f=b?a:[];for(c=0,d=a.length;d>c;c++){if(e.Util.isArray(a[c])&&"number"!=typeof a[c][0])return;f[c]=e.latLng(a[c])}return f},_initEvents:function(){e.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var b,c=e.Path.VML,d=0,f=a.length,g="";f>d;d++)b=a[d],c&&b._round(),g+=(d?"L":"M")+b.x+" "+b.y;return g},_clipPoints:function(){var a,b,c,d=this._originalPoints,f=d.length;if(this.options.noClip)return void(this._parts=[d]);this._parts=[];var g=this._parts,h=this._map._pathViewport,i=e.LineUtil;for(a=0,b=0;f-1>a;a++)c=i.clipSegment(d[a],d[a+1],h,a),c&&(g[b]=g[b]||[],g[b].push(c[0]),(c[1]!==d[a+1]||a===f-2)&&(g[b].push(c[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,b=e.LineUtil,c=0,d=a.length;d>c;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),e.Path.prototype._updatePath.call(this))}}),e.polyline=function(a,b){return new e.Polyline(a,b)},e.PolyUtil={},e.PolyUtil.clipPolygon=function(a,b){var c,d,f,g,h,i,j,k,l,m=[1,4,2,8],n=e.LineUtil;for(d=0,j=a.length;j>d;d++)a[d]._code=n._getBitCode(a[d],b);for(g=0;4>g;g++){for(k=m[g],c=[],d=0,j=a.length,f=j-1;j>d;f=d++)h=a[d],i=a[f],h._code&k?i._code&k||(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)):(i._code&k&&(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)),c.push(h));a=c}return a},e.Polygon=e.Polyline.extend({options:{fill:!0},initialize:function(a,b){e.Polyline.prototype.initialize.call(this,a,b),this._initWithHoles(a)},_initWithHoles:function(a){var b,c,d;if(a&&e.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),b=0,c=this._holes.length;c>b;b++)d=this._holes[b]=this._convertLatLngs(this._holes[b]),d[0].equals(d[d.length-1])&&d.pop();a=this._latlngs,a.length>=2&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(e.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,d;for(a=0,c=this._holes.length;c>a;a++)for(this._holePoints[a]=[],b=0,d=this._holes[a].length;d>b;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},setLatLngs:function(a){return a&&e.Util.isArray(a[0])&&"number"!=typeof a[0][0]?(this._initWithHoles(a),this.redraw()):e.Polyline.prototype.setLatLngs.call(this,a)},_clipPoints:function(){var a=this._originalPoints,b=[];if(this._parts=[a].concat(this._holePoints),!this.options.noClip){for(var c=0,d=this._parts.length;d>c;c++){var f=e.PolyUtil.clipPolygon(this._parts[c],this._map._pathViewport);f.length&&b.push(f)}this._parts=b}},_getPathPartStr:function(a){var b=e.Polyline.prototype._getPathPartStr.call(this,a);return b+(e.Browser.svg?"z":"x")}}),e.polygon=function(a,b){return new e.Polygon(a,b)},function(){function a(a){return e.FeatureGroup.extend({initialize:function(a,b){this._layers={},this._options=b,this.setLatLngs(a)},setLatLngs:function(b){var c=0,d=b.length;for(this.eachLayer(function(a){d>c?a.setLatLngs(b[c++]):this.removeLayer(a)},this);d>c;)this.addLayer(new a(b[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}e.MultiPolyline=a(e.Polyline),e.MultiPolygon=a(e.Polygon),e.multiPolyline=function(a,b){return new e.MultiPolyline(a,b)},e.multiPolygon=function(a,b){return new e.MultiPolygon(a,b)}}(),e.Rectangle=e.Polygon.extend({initialize:function(a,b){e.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=e.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),e.rectangle=function(a,b){return new e.Rectangle(a,b)},e.Circle=e.Path.extend({initialize:function(a,b,c){e.Path.prototype.initialize.call(this,c),this._latlng=e.latLng(a),this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=e.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng,c=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b),this._radius=Math.max(this._point.x-c.x,1)},getBounds:function(){var a=this._getLngRadius(),b=this._mRadius/40075017*360,c=this._latlng;return new e.LatLngBounds([c.lat-b,c.lng-a],[c.lat+b,c.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":e.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(e.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}}),e.circle=function(a,b,c){return new e.Circle(a,b,c)},e.CircleMarker=e.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){e.Circle.prototype.initialize.call(this,a,null,b),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){e.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(a){return e.Circle.prototype.setLatLng.call(this,a),this._popup&&this._popup._isOpen&&this._popup.setLatLng(a),this},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius}}),e.circleMarker=function(a,b){return new e.CircleMarker(a,b)},e.Polyline.include(e.Path.CANVAS?{_containsPoint:function(a,b){var c,d,f,g,h,i,j,k=this.options.weight/2;for(e.Browser.touch&&(k+=10),c=0,g=this._parts.length;g>c;c++)for(j=this._parts[c],d=0,h=j.length,f=h-1;h>d;f=d++)if((b||0!==d)&&(i=e.LineUtil.pointToSegmentDistance(a,j[f],j[d]),k>=i))return!0;return!1}}:{}),e.Polygon.include(e.Path.CANVAS?{_containsPoint:function(a){var b,c,d,f,g,h,i,j,k=!1;if(e.Polyline.prototype._containsPoint.call(this,a,!0))return!0;for(f=0,i=this._parts.length;i>f;f++)for(b=this._parts[f],g=0,j=b.length,h=j-1;j>g;h=g++)c=b[g],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k}}:{}),e.Circle.include(e.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath(),this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this._point,c=this.options.stroke?this.options.weight/2:0;return a.distanceTo(b)<=this._radius+c}}:{}),e.CircleMarker.include(e.Path.CANVAS?{_updateStyle:function(){e.Path.prototype._updateStyle.call(this)}}:{}),e.GeoJSON=e.FeatureGroup.extend({initialize:function(a,b){e.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,f=e.Util.isArray(a)?a:a.features;if(f){for(b=0,c=f.length;c>b;b++)d=f[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(f[b]);return this}var g=this.options;if(!g.filter||g.filter(a)){var h=e.GeoJSON.geometryToLayer(a,g.pointToLayer,g.coordsToLatLng,g);return h.feature=e.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)}},resetStyle:function(a){var b=this.options.style;b&&(e.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),e.extend(e.GeoJSON,{geometryToLayer:function(a,b,c,d){var f,g,h,i,j="Feature"===a.type?a.geometry:a,k=j.coordinates,l=[];switch(c=c||this.coordsToLatLng,j.type){case"Point":return f=c(k),b?b(a,f):new e.Marker(f);case"MultiPoint":for(h=0,i=k.length;i>h;h++)f=c(k[h]),l.push(b?b(a,f):new e.Marker(f));return new e.FeatureGroup(l);case"LineString":return g=this.coordsToLatLngs(k,0,c),new e.Polyline(g,d);case"Polygon":if(2===k.length&&!k[1].length)throw new Error("Invalid GeoJSON object.");return g=this.coordsToLatLngs(k,1,c),new e.Polygon(g,d);case"MultiLineString":return g=this.coordsToLatLngs(k,1,c),new e.MultiPolyline(g,d);case"MultiPolygon":return g=this.coordsToLatLngs(k,2,c),new e.MultiPolygon(g,d);case"GeometryCollection":
for(h=0,i=j.geometries.length;i>h;h++)l.push(this.geometryToLayer({geometry:j.geometries[h],type:"Feature",properties:a.properties},b,c,d));return new e.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new e.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){var d,e,f,g=[];for(e=0,f=a.length;f>e;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):(c||this.coordsToLatLng)(a[e]),g.push(d);return g},latLngToCoords:function(a){var b=[a.lng,a.lat];return a.alt!==c&&b.push(a.alt),b},latLngsToCoords:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(e.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?e.extend({},a.feature,{geometry:b}):e.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var g={toGeoJSON:function(){return e.GeoJSON.getFeature(this,{type:"Point",coordinates:e.GeoJSON.latLngToCoords(this.getLatLng())})}};e.Marker.include(g),e.Circle.include(g),e.CircleMarker.include(g),e.Polyline.include({toGeoJSON:function(){return e.GeoJSON.getFeature(this,{type:"LineString",coordinates:e.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),e.Polygon.include({toGeoJSON:function(){var a,b,c,d=[e.GeoJSON.latLngsToCoords(this.getLatLngs())];if(d[0].push(d[0][0]),this._holes)for(a=0,b=this._holes.length;b>a;a++)c=e.GeoJSON.latLngsToCoords(this._holes[a]),c.push(c[0]),d.push(c);return e.GeoJSON.getFeature(this,{type:"Polygon",coordinates:d})}}),function(){function a(a){return function(){var b=[];return this.eachLayer(function(a){b.push(a.toGeoJSON().geometry.coordinates)}),e.GeoJSON.getFeature(this,{type:a,coordinates:b})}}e.MultiPolyline.include({toGeoJSON:a("MultiLineString")}),e.MultiPolygon.include({toGeoJSON:a("MultiPolygon")}),e.LayerGroup.include({toGeoJSON:function(){var b,c=this.feature&&this.feature.geometry,d=[];if(c&&"MultiPoint"===c.type)return a("MultiPoint").call(this);var f=c&&"GeometryCollection"===c.type;return this.eachLayer(function(a){a.toGeoJSON&&(b=a.toGeoJSON(),d.push(f?b.geometry:e.GeoJSON.asFeature(b)))}),f?e.GeoJSON.getFeature(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}})}(),e.geoJson=function(a,b){return new e.GeoJSON(a,b)},e.DomEvent={addListener:function(a,b,c,d){var f,g,h,i=e.stamp(c),j="_leaflet_"+b+i;return a[j]?this:(f=function(b){return c.call(d||a,b||e.DomEvent._getEvent())},e.Browser.pointer&&0===b.indexOf("touch")?this.addPointerListener(a,b,f,i):(e.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,f,i),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",f,!1),a.addEventListener(b,f,!1)):"mouseenter"===b||"mouseleave"===b?(g=f,h="mouseenter"===b?"mouseover":"mouseout",f=function(b){return e.DomEvent._checkMouse(a,b)?g(b):void 0},a.addEventListener(h,f,!1)):"click"===b&&e.Browser.android?(g=f,f=function(a){return e.DomEvent._filterClick(a,g)},a.addEventListener(b,f,!1)):a.addEventListener(b,f,!1):"attachEvent"in a&&a.attachEvent("on"+b,f),a[j]=f,this))},removeListener:function(a,b,c){var d=e.stamp(c),f="_leaflet_"+b+d,g=a[f];return g?(e.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,d):e.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,d):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[f]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,e.DomEvent._skipped(a),this},disableScrollPropagation:function(a){var b=e.DomEvent.stopPropagation;return e.DomEvent.on(a,"mousewheel",b).on(a,"MozMousePixelScroll",b)},disableClickPropagation:function(a){for(var b=e.DomEvent.stopPropagation,c=e.Draggable.START.length-1;c>=0;c--)e.DomEvent.on(a,e.Draggable.START[c],b);return e.DomEvent.on(a,"click",e.DomEvent._fakeStop).on(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return e.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new e.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new e.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){e.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent.timeStamp,d=e.DomEvent._lastClick&&c-e.DomEvent._lastClick;return d&&d>100&&500>d||a.target._simulatedClick&&!a._simulated?void e.DomEvent.stop(a):(e.DomEvent._lastClick=c,b(a))}},e.DomEvent.on=e.DomEvent.addListener,e.DomEvent.off=e.DomEvent.removeListener,e.Draggable=e.Class.extend({includes:e.Mixin.Events,statics:{START:e.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a,this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=e.Draggable.START.length-1;a>=0;a--)e.DomEvent.on(this._dragStartTarget,e.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=e.Draggable.START.length-1;a>=0;a--)e.DomEvent.off(this._dragStartTarget,e.Draggable.START[a],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(a){if(this._moved=!1,!a.shiftKey&&(1===a.which||1===a.button||a.touches)&&(e.DomEvent.stopPropagation(a),!e.Draggable._disabled&&(e.DomUtil.disableImageDrag(),e.DomUtil.disableTextSelection(),!this._moving))){var c=a.touches?a.touches[0]:a;this._startPoint=new e.Point(c.clientX,c.clientY),this._startPos=this._newPos=e.DomUtil.getPosition(this._element),e.DomEvent.on(b,e.Draggable.MOVE[a.type],this._onMove,this).on(b,e.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var c=a.touches&&1===a.touches.length?a.touches[0]:a,d=new e.Point(c.clientX,c.clientY),f=d.subtract(this._startPoint);(f.x||f.y)&&(e.Browser.touch&&Math.abs(f.x)+Math.abs(f.y)<3||(e.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=e.DomUtil.getPosition(this._element).subtract(f),e.DomUtil.addClass(b.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,e.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,e.Util.cancelAnimFrame(this._animRequest),this._animRequest=e.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),e.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){e.DomUtil.removeClass(b.body,"leaflet-dragging"),this._lastTarget&&(e.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in e.Draggable.MOVE)e.DomEvent.off(b,e.Draggable.MOVE[a],this._onMove).off(b,e.Draggable.END[a],this._onUp);e.DomUtil.enableImageDrag(),e.DomUtil.enableTextSelection(),this._moved&&this._moving&&(e.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),e.Handler=e.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),e.Map.mergeOptions({dragging:!0,inertia:!e.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:e.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),e.Map.Drag=e.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new e.Draggable(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop(),a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b),this._times.push(a),a-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=+new Date-this._lastTime,f=!c.inertia||d>c.inertiaThreshold||!this._positions[0];if(b.fire("dragend",a),f)b.fire("moveend");else{var g=this._lastPos.subtract(this._positions[0]),h=(this._lastTime+d-this._times[0])/1e3,i=c.easeLinearity,j=g.multiplyBy(i/h),k=j.distanceTo([0,0]),l=Math.min(c.inertiaMaxSpeed,k),m=j.multiplyBy(l/k),n=l/(c.inertiaDeceleration*i),o=m.multiplyBy(-n/2).round();o.x&&o.y?(o=b._limitOffset(o,b.options.maxBounds),e.Util.requestAnimFrame(function(){b.panBy(o,{duration:n,easeLinearity:i,noMoveStart:!0})})):b.fire("moveend")}}}),e.Map.addInitHook("addHandler","dragging",e.Map.Drag),e.Map.mergeOptions({doubleClickZoom:!0}),e.Map.DoubleClickZoom=e.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===b.options.doubleClickZoom?b.setZoom(c):b.setZoomAround(a.containerPoint,c)}}),e.Map.addInitHook("addHandler","doubleClickZoom",e.Map.DoubleClickZoom),e.Map.mergeOptions({scrollWheelZoom:!0}),e.Map.ScrollWheelZoom=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),e.DomEvent.on(this._map._container,"MozMousePixelScroll",e.DomEvent.preventDefault),this._delta=0},removeHooks:function(){e.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),e.DomEvent.off(this._map._container,"MozMousePixelScroll",e.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=e.DomEvent.getWheelDelta(a);this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var c=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(e.bind(this._performZoom,this),c),e.DomEvent.preventDefault(a),e.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=b>0?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}}),e.Map.addInitHook("addHandler","scrollWheelZoom",e.Map.ScrollWheelZoom),e.extend(e.DomEvent,{_touchstart:e.Browser.msPointer?"MSPointerDown":e.Browser.pointer?"pointerdown":"touchstart",_touchend:e.Browser.msPointer?"MSPointerUp":e.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,c,d){function f(a){var b;if(e.Browser.pointer?(o.push(a.pointerId),b=o.length):b=a.touches.length,!(b>1)){var c=Date.now(),d=c-(h||c);i=a.touches?a.touches[0]:a,j=d>0&&k>=d,h=c}}function g(a){if(e.Browser.pointer){var b=o.indexOf(a.pointerId);if(-1===b)return;o.splice(b,1)}if(j){if(e.Browser.pointer){var d,f={};for(var g in i)d=i[g],"function"==typeof d?f[g]=d.bind(i):f[g]=d;i=f}i.type="dblclick",c(i),h=null}}var h,i,j=!1,k=250,l="_leaflet_",m=this._touchstart,n=this._touchend,o=[];a[l+m+d]=f,a[l+n+d]=g;var p=e.Browser.pointer?b.documentElement:a;return a.addEventListener(m,f,!1),p.addEventListener(n,g,!1),e.Browser.pointer&&p.addEventListener(e.DomEvent.POINTER_CANCEL,g,!1),this},removeDoubleTapListener:function(a,c){var d="_leaflet_";return a.removeEventListener(this._touchstart,a[d+this._touchstart+c],!1),(e.Browser.pointer?b.documentElement:a).removeEventListener(this._touchend,a[d+this._touchend+c],!1),e.Browser.pointer&&b.documentElement.removeEventListener(e.DomEvent.POINTER_CANCEL,a[d+this._touchend+c],!1),this}}),e.extend(e.DomEvent,{POINTER_DOWN:e.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:e.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:e.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:e.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(a,b,c,d){switch(b){case"touchstart":return this.addPointerListenerStart(a,b,c,d);case"touchend":return this.addPointerListenerEnd(a,b,c,d);case"touchmove":return this.addPointerListenerMove(a,b,c,d);default:throw"Unknown touch event type"}},addPointerListenerStart:function(a,c,d,f){var g="_leaflet_",h=this._pointers,i=function(a){"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&e.DomEvent.preventDefault(a);for(var b=!1,c=0;c<h.length;c++)if(h[c].pointerId===a.pointerId){b=!0;break}b||h.push(a),a.touches=h.slice(),a.changedTouches=[a],d(a)};if(a[g+"touchstart"+f]=i,a.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocumentListener){var j=function(a){for(var b=0;b<h.length;b++)if(h[b].pointerId===a.pointerId){h.splice(b,1);break}};b.documentElement.addEventListener(this.POINTER_UP,j,!1),b.documentElement.addEventListener(this.POINTER_CANCEL,j,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(a,b,c,d){function e(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice(),a.changedTouches=[a],c(a)}}var f="_leaflet_",g=this._pointers;return a[f+"touchmove"+d]=e,a.addEventListener(this.POINTER_MOVE,e,!1),this},addPointerListenerEnd:function(a,b,c,d){var e="_leaflet_",f=this._pointers,g=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}a.touches=f.slice(),a.changedTouches=[a],c(a)};return a[e+"touchend"+d]=g,a.addEventListener(this.POINTER_UP,g,!1),a.addEventListener(this.POINTER_CANCEL,g,!1),this},removePointerListener:function(a,b,c){var d="_leaflet_",e=a[d+b+c];switch(b){case"touchstart":a.removeEventListener(this.POINTER_DOWN,e,!1);break;case"touchmove":a.removeEventListener(this.POINTER_MOVE,e,!1);break;case"touchend":a.removeEventListener(this.POINTER_UP,e,!1),a.removeEventListener(this.POINTER_CANCEL,e,!1)}return this}}),e.Map.mergeOptions({touchZoom:e.Browser.touch&&!e.Browser.android23,bounceAtZoomLimits:!0}),e.Map.TouchZoom=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){e.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(a.touches&&2===a.touches.length&&!c._animatingZoom&&!this._zooming){var d=c.mouseEventToLayerPoint(a.touches[0]),f=c.mouseEventToLayerPoint(a.touches[1]),g=c._getCenterLayerPoint();this._startCenter=d.add(f)._divideBy(2),this._startDist=d.distanceTo(f),this._moved=!1,this._zooming=!0,this._centerOffset=g.subtract(this._startCenter),c._panAnim&&c._panAnim.stop(),e.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this),e.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var c=b.mouseEventToLayerPoint(a.touches[0]),d=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(d)/this._startDist,this._delta=c._add(d)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(b.options.bounceAtZoomLimits||!(b.getZoom()===b.getMinZoom()&&this._scale<1||b.getZoom()===b.getMaxZoom()&&this._scale>1))&&(this._moved||(e.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=!0),e.Util.cancelAnimFrame(this._animRequest),this._animRequest=e.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),e.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),c=a.layerPointToLatLng(b),d=a.getScaleZoom(this._scale);a._animateZoom(c,d,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var a=this._map;this._zooming=!1,e.DomUtil.removeClass(a._mapPane,"leaflet-touching"),e.Util.cancelAnimFrame(this._animRequest),e.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);var c=this._getScaleOrigin(),d=a.layerPointToLatLng(c),f=a.getZoom(),g=a.getScaleZoom(this._scale)-f,h=g>0?Math.ceil(g):Math.floor(g),i=a._limitZoom(f+h),j=a.getZoomScale(i)/this._scale;a._animateZoom(d,i,c,j)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}}),e.Map.addInitHook("addHandler","touchZoom",e.Map.TouchZoom),e.Map.mergeOptions({tap:!0,tapTolerance:15}),e.Map.Tap=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){e.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(e.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var c=a.touches[0],d=c.target;this._startPos=this._newPos=new e.Point(c.clientX,c.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&e.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(e.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",c))},this),1e3),e.DomEvent.on(b,"touchmove",this._onMove,this).on(b,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),e.DomEvent.off(b,"touchmove",this._onMove,this).off(b,"touchend",this._onUp,this),this._fireClick&&a&&a.changedTouches){var c=a.changedTouches[0],d=c.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&e.DomUtil.removeClass(d,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",c)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new e.Point(b.clientX,b.clientY)},_simulateEvent:function(c,d){var e=b.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(c,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),e.Browser.touch&&!e.Browser.pointer&&e.Map.addInitHook("addHandler","tap",e.Map.Tap),e.Map.mergeOptions({boxZoom:!0}),e.Map.BoxZoom=e.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._moved=!1},addHooks:function(){e.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){e.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(a){return this._moved=!1,!a.shiftKey||1!==a.which&&1!==a.button?!1:(e.DomUtil.disableTextSelection(),e.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),void e.DomEvent.on(b,"mousemove",this._onMouseMove,this).on(b,"mouseup",this._onMouseUp,this).on(b,"keydown",this._onKeyDown,this))},_onMouseMove:function(a){this._moved||(this._box=e.DomUtil.create("div","leaflet-zoom-box",this._pane),e.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var b=this._startLayerPoint,c=this._box,d=this._map.mouseEventToLayerPoint(a),f=d.subtract(b),g=new e.Point(Math.min(d.x,b.x),Math.min(d.y,b.y));e.DomUtil.setPosition(c,g),this._moved=!0,c.style.width=Math.max(0,Math.abs(f.x)-4)+"px",c.style.height=Math.max(0,Math.abs(f.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),e.DomUtil.enableTextSelection(),e.DomUtil.enableImageDrag(),e.DomEvent.off(b,"mousemove",this._onMouseMove).off(b,"mouseup",this._onMouseUp).off(b,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map,c=b.mouseEventToLayerPoint(a);if(!this._startLayerPoint.equals(c)){var d=new e.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(c));b.fitBounds(d),b.fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),e.Map.addInitHook("addHandler","boxZoom",e.Map.BoxZoom),e.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),e.Map.Keyboard=e.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===a.tabIndex&&(a.tabIndex="0"),e.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;e.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var c=b.body,d=b.documentElement,e=c.scrollTop||d.scrollTop,f=c.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;c>b;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;c>b;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;c>b;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;c>b;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;c>b;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;c>b;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){e.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){e.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}e.DomEvent.stop(a)}}),e.Map.addInitHook("addHandler","keyboard",e.Map.Keyboard),e.Handler.MarkerDrag=e.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new e.Draggable(a,a)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),e.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),e.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=e.DomUtil.getPosition(a._icon),d=a._map.layerPointToLatLng(c);b&&e.DomUtil.setPosition(b,c),a._latlng=d,a.fire("move",{latlng:d}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}}),e.Control=e.Class.extend({options:{position:"topright"},initialize:function(a){e.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return e.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b),this},removeFrom:function(a){var b=this.getPosition(),c=a._controlCorners[b];return c.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),e.control=function(a){return new e.Control(a)},e.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(a,f){var g=c+a+" "+c+f;b[a+f]=e.DomUtil.create("div",g,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=e.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),e.Control.Zoom=e.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=e.DomUtil.create("div",b+" leaflet-bar");return this._map=a,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,b+"-in",c,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,b+"-out",c,this._zoomOut,this),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,f,g){var h=e.DomUtil.create("a",c,d);h.innerHTML=a,h.href="#",h.title=b;var i=e.DomEvent.stopPropagation;return e.DomEvent.on(h,"click",i).on(h,"mousedown",i).on(h,"dblclick",i).on(h,"click",e.DomEvent.preventDefault).on(h,"click",f,g).on(h,"click",this._refocusOnMap,g),h},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";e.DomUtil.removeClass(this._zoomInButton,b),e.DomUtil.removeClass(this._zoomOutButton,b),a._zoom===a.getMinZoom()&&e.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&e.DomUtil.addClass(this._zoomInButton,b)}}),e.Map.mergeOptions({zoomControl:!0}),e.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new e.Control.Zoom,this.addControl(this.zoomControl))}),e.control.zoom=function(a){return new e.Control.Zoom(a)},e.Control.Attribution=e.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){e.setOptions(this,a),this._attributions={}},onAdd:function(a){this._container=e.DomUtil.create("div","leaflet-control-attribution"),e.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):void 0},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}}),e.Map.mergeOptions({attributionControl:!0}),e.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new e.Control.Attribution).addTo(this))}),e.control.attribution=function(a){return new e.Control.Attribution(a)},e.Control.Scale=e.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b="leaflet-control-scale",c=e.DomUtil.create("div",b),d=this.options;return this._addScales(d,b,c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=e.DomUtil.create("div",b+"-line",c)),a.imperial&&(this._iScale=e.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,c=6378137*Math.PI*Math.cos(b*Math.PI/180),d=c*(a.getNorthEast().lng-a.getSouthWest().lng)/180,e=this._map.getSize(),f=this.options,g=0;e.x>0&&(g=d*(f.maxWidth/e.x)),this._updateScales(f,g)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b),a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px",this._mScale.innerHTML=1e3>b?b+" m":b/1e3+" km"},_updateImperial:function(a){var b,c,d,e=3.2808399*a,f=this._iScale;e>5280?(b=e/5280,c=this._getRoundNum(b),f.style.width=this._getScaleWidth(c/b)+"px",f.innerHTML=c+" mi"):(d=this._getRoundNum(e),f.style.width=this._getScaleWidth(d/e)+"px",f.innerHTML=d+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),e.control.scale=function(a){return new e.Control.Scale(a)},e.Control.Layers=e.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){e.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){var b=e.stamp(a);return delete this._layers[b],this._update(),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=e.DomUtil.create("div",a);
b.setAttribute("aria-haspopup",!0),e.Browser.touch?e.DomEvent.on(b,"click",e.DomEvent.stopPropagation):e.DomEvent.disableClickPropagation(b).disableScrollPropagation(b);var c=this._form=e.DomUtil.create("form",a+"-list");if(this.options.collapsed){e.Browser.android||e.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var d=this._layersLink=e.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",e.Browser.touch?e.DomEvent.on(d,"click",e.DomEvent.stop).on(d,"click",this._expand,this):e.DomEvent.on(d,"focus",this._expand,this),e.DomEvent.on(c,"click",function(){setTimeout(e.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=e.DomUtil.create("div",a+"-base",c),this._separator=e.DomUtil.create("div",a+"-separator",c),this._overlaysList=e.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){var d=e.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var a,b,c=!1,d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay;this._separator.style.display=d&&c?"":"none"}},_onLayerChange:function(a){var b=this._layers[e.stamp(a.layer)];if(b){this._handlingClick||this._update();var c=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)}},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';c&&(d+=' checked="checked"'),d+="/>";var e=b.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var c,d=b.createElement("label"),f=this._map.hasLayer(a.layer);a.overlay?(c=b.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=f):c=this._createRadioElement("leaflet-base-layers",f),c.layerId=e.stamp(a.layer),e.DomEvent.on(c,"click",this._onInputClick,this);var g=b.createElement("span");g.innerHTML=" "+a.name,d.appendChild(c),d.appendChild(g);var h=a.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(d),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;e>a;a++)b=d[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){e.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),e.control.layers=function(a,b,c){return new e.Control.Layers(a,b,c)},e.PosAnimation=e.Class.extend({includes:e.Mixin.Events,run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._newPos=b,this.fire("start"),a.style[e.DomUtil.TRANSITION]="all "+(c||.25)+"s cubic-bezier(0,0,"+(d||.5)+",1)",e.DomEvent.on(a,e.DomUtil.TRANSITION_END,this._onTransitionEnd,this),e.DomUtil.setPosition(a,b),e.Util.falseFn(a.offsetWidth),this._stepTimer=setInterval(e.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(e.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),e.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,d,f=this._el,g=a.getComputedStyle(f);if(e.Browser.any3d){if(d=g[e.DomUtil.TRANSFORM].match(this._transformRe),!d)return;b=parseFloat(d[1]),c=parseFloat(d[2])}else b=parseFloat(g.left),c=parseFloat(g.top);return new e.Point(b,c,!0)},_onTransitionEnd:function(){e.DomEvent.off(this._el,e.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[e.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),e.Map.include({setView:function(a,b,d){if(b=b===c?this._zoom:this._limitZoom(b),a=this._limitCenter(e.latLng(a),b,this.options.maxBounds),d=d||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==c&&(d.zoom=e.extend({animate:d.animate},d.zoom),d.pan=e.extend({animate:d.animate},d.pan));var f=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,d.zoom):this._tryAnimatedPan(a,d.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=e.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(this._panAnim||(this._panAnim=new e.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){e.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){e.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return(b&&b.animate)===!0||this.getSize().contains(c)?(this.panBy(c,b),!0):!1}}),e.PosAnimation=e.DomUtil.TRANSITION?e.PosAnimation:e.PosAnimation.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=e.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=e.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){var b=this._startPos.add(this._offset.multiplyBy(a));e.DomUtil.setPosition(this._el,b),this.fire("step")},_complete:function(){e.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),e.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),e.DomUtil.TRANSITION&&e.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&e.DomUtil.TRANSITION&&e.Browser.any3d&&!e.Browser.android23&&!e.Browser.mobileOpera,this._zoomAnimated&&e.DomEvent.on(this._mapPane,e.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),e.Map.include(e.DomUtil.TRANSITION?{_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d),f=this._getCenterLayerPoint()._add(e);return c.animate===!0||this.getSize().contains(e)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,f,d,null,!0),!0):!1},_animateZoom:function(a,b,c,d,f,g,h){h||(this._animatingZoom=!0),e.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=a,this._animateToZoom=b,e.Draggable&&(e.Draggable._disabled=!0),e.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:a,zoom:b,origin:c,scale:d,delta:f,backwards:g}),setTimeout(e.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,e.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),e.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),e.Draggable&&(e.Draggable._disabled=!1)},this))}}:{}),e.TileLayer.include({_animateZoom:function(a){this._animating||(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,c=e.DomUtil.TRANSFORM,d=a.delta?e.DomUtil.getTranslateString(a.delta):b.style[c],f=e.DomUtil.getScaleString(a.scale,a.origin);b.style[c]=a.backwards?f+" "+d:d+" "+f},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="",a.parentNode.appendChild(a),e.Util.falseFn(b.offsetWidth);var c=this._map.getZoom();(c>this.options.maxZoom||c<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[e.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,c=this._getLoadedTilesPercentage(b),d=this._getLoadedTilesPercentage(a);return b&&c>.5&&.5>d?(a.style.visibility="hidden",void this._stopLoadingImages(a)):(b.style.visibility="hidden",b.style[e.DomUtil.TRANSFORM]="",this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){var b,c,d=a.getElementsByTagName("img"),e=0;for(b=0,c=d.length;c>b;b++)d[b].complete&&e++;return e/c},_stopLoadingImages:function(a){var b,c,d,f=Array.prototype.slice.call(a.getElementsByTagName("img"));for(b=0,c=f.length;c>b;b++)d=f[b],d.complete||(d.onload=e.Util.falseFn,d.onerror=e.Util.falseFn,d.src=e.Util.emptyImageUrl,d.parentNode.removeChild(d))}}),e.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=e.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=e.bind(this._handleGeolocationResponse,this),c=e.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new e.LatLng(b,c),f=180*a.coords.accuracy/40075017,g=f/Math.cos(e.LatLng.DEG_TO_RAD*b),h=e.latLngBounds([b-f,c-g],[b+f,c+g]),i=this._locateOptions;if(i.setView){var j=Math.min(this.getBoundsZoom(h),i.maxZoom);this.setView(d,j)}var k={latlng:d,bounds:h,timestamp:a.timestamp};for(var l in a.coords)"number"==typeof a.coords[l]&&(k[l]=a.coords[l]);this.fire("locationfound",k)}})}(window,document),b()}(),function(){var b=a.get("@@amd-helpers").createDefine();define("5",["b2"],function(a){return a}),b()}(),a.register("13",[],function(){return{setters:[],execute:function(){}}}),a.registerDynamic("b3",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports.stringQs=function(a){return a.split("&").reduce(function(a,b){var c=b.split("=");return 2===c.length&&(a[c[0]]=null===c[1]?"":decodeURIComponent(c[1])),a},{})},c.exports.qsString=function(a,b){function c(a){return(""+a).replace("&","%26")}return b=!0,Object.keys(a).sort().map(function(d){return encodeURIComponent(d)+"="+(b?c(a[d]):encodeURIComponent(a[d]))}).join("&")},d.define=e,c.exports}),a.registerDynamic("b4",["b3"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("b3"),d.define=e,c.exports}),a.registerDynamic("b5",["b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("b6")("iterator"),g=!1;try{var h=[7][f]();h["return"]=function(){g=!0},Array.from(h,function(){throw 2})}catch(i){}return c.exports=function(a,b){if(!b&&!g)return!1;var c=!1;try{var d=[7],e=d[f]();e.next=function(){c=!0},d[f]=function(){return e},a(d)}catch(h){}return c},d.define=e,c.exports}),a.registerDynamic("b7",["b8","b9","ba","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var d=a("b8"),f=a("b9"),g=a("ba"),h=a("b6")("species");return c.exports=function(a){var b=d[a];g&&b&&!b[h]&&f.setDesc(b,h,{configurable:!0,get:function(){return this}})},d.define=e,c.exports}),a.registerDynamic("bb",["bc"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("bc");return c.exports=function(a,b){for(var c in b)f(a,c,b[c]);return a},d.define=e,c.exports}),a.registerDynamic("bd",[],!0,function(a,b,c){function d(){m&&j&&(m=!1,j.length?l=j.concat(l):n=-1,l.length&&e())}function e(){if(!m){var a=setTimeout(d);m=!0;for(var b=l.length;b;){for(j=l,l=[];++n<b;)j&&j[n].run();n=-1,b=l.length}j=null,m=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h=this,i=h.define;h.define=void 0;var j,k=c.exports={},l=[],m=!1,n=-1;return k.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];l.push(new f(a,b)),1!==l.length||m||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=g,k.addListener=g,k.once=g,k.off=g,k.removeListener=g,k.removeAllListeners=g,k.emit=g,k.binding=function(a){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(a){throw new Error("process.chdir is not supported")},k.umask=function(){return 0},h.define=i,c.exports}),a.registerDynamic("be",["bd"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("bd"),d.define=e,c.exports}),a.registerDynamic("bf",["be"],!0,function(b,c,d){var e=this,f=e.define;return e.define=void 0,d.exports=a._nodeRequire?process:b("be"),e.define=f,d.exports}),a.registerDynamic("2e",["bf"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("bf"),d.define=e,c.exports}),a.registerDynamic("c0",["c1","b8"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c1"),g=a("b8").document,h=f(g)&&f(g.createElement);return c.exports=function(a){return h?g.createElement(a):{}},d.define=e,c.exports}),a.registerDynamic("c2",["b8"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=a("b8").document&&document.documentElement,d.define=e,c.exports}),a.registerDynamic("c3",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)},d.define=e,c.exports}),a.registerDynamic("c4",["c5","c3","c2","c0","b8","c6","2e"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(b){var d,e,f,g=a("c5"),h=a("c3"),i=a("c2"),j=a("c0"),k=a("b8"),b=k.process,l=k.setImmediate,m=k.clearImmediate,n=k.MessageChannel,o=0,p={},q="onreadystatechange",r=function(){var a=+this;if(p.hasOwnProperty(a)){var b=p[a];delete p[a],b()}},s=function(a){r.call(a.data)};l&&m||(l=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return p[++o]=function(){h("function"==typeof a?a:Function(a),b)},d(o),o},m=function(a){delete p[a]},"process"==a("c6")(b)?d=function(a){b.nextTick(g(r,a,1))}:n?(e=new n,f=e.port2,e.port1.onmessage=s,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",s,!1)):d=q in j("script")?function(a){i.appendChild(j("script"))[q]=function(){i.removeChild(this),r.call(a)}}:function(a){setTimeout(g(r,a,1),0)}),c.exports={set:l,clear:m}}(a("2e")),d.define=e,c.exports}),a.registerDynamic("c7",["b8","c4","c6","2e"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(b){var d,e,f,g=a("b8"),h=a("c4").set,i=g.MutationObserver||g.WebKitMutationObserver,b=g.process,j=g.Promise,k="process"==a("c6")(b),l=function(){var a,c,f;for(k&&(a=b.domain)&&(b.domain=null,a.exit());d;)c=d.domain,f=d.fn,c&&c.enter(),f(),c&&c.exit(),d=d.next;e=void 0,a&&a.enter()};if(k)f=function(){b.nextTick(l)};else if(i){var m=1,n=document.createTextNode("");new i(l).observe(n,{characterData:!0}),f=function(){n.data=m=-m}}else f=j&&j.resolve?function(){j.resolve().then(l)}:function(){h.call(g,l)};c.exports=function(a){var c={fn:a,next:void 0,domain:k&&b.domain};e&&(e.next=c),d||(d=c,f()),e=c}}(a("2e")),d.define=e,c.exports}),a.registerDynamic("c8",["c9","ca","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c9"),g=a("ca"),h=a("b6")("species");return c.exports=function(a,b){var c,d=f(a).constructor;return void 0===d||void 0==(c=f(d)[h])?b:g(c)},d.define=e,c.exports}),a.registerDynamic("cb",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=Object.is||function(a,b){return a===b?0!==a||1/a===1/b:a!=a&&b!=b},d.define=e,c.exports}),a.registerDynamic("cc",["b9","c1","c9","c5"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("b9").getDesc,g=a("c1"),h=a("c9"),i=function(a,b){if(h(a),!g(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};return c.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,d){try{d=a("c5")(Function.call,f(Object.prototype,"__proto__").set,2),d(b,[]),c=!(b instanceof Array)}catch(e){c=!0}return function(a,b){return i(a,b),c?a.__proto__=b:d(a,b),a}}({},!1):void 0),check:i},d.define=e,c.exports}),a.registerDynamic("cd",["ce","b6","cf","d0"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("ce"),g=a("b6")("iterator"),h=a("cf");return c.exports=a("d0").getIteratorMethod=function(a){return void 0!=a?a[g]||a["@@iterator"]||h[f(a)]:void 0},d.define=e,c.exports}),a.registerDynamic("d1",["cf","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("cf"),g=a("b6")("iterator"),h=Array.prototype;return c.exports=function(a){return void 0!==a&&(f.Array===a||h[g]===a)},d.define=e,c.exports}),a.registerDynamic("d2",["c9"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c9");return c.exports=function(a,b,c,d){try{return d?b(f(c)[0],c[1]):b(c)}catch(e){var g=a["return"];throw void 0!==g&&f(g.call(a)),e}},d.define=e,c.exports}),a.registerDynamic("d3",["c5","d2","d1","c9","d4","cd"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c5"),g=a("d2"),h=a("d1"),i=a("c9"),j=a("d4"),k=a("cd");return c.exports=function(a,b,c,d){var e,l,m,n=k(a),o=f(c,d,b?2:1),p=0;if("function"!=typeof n)throw TypeError(a+" is not iterable!");if(h(n))for(e=j(a.length);e>p;p++)b?o(i(l=a[p])[0],l[1]):o(a[p]);else for(m=n.call(a);!(l=m.next()).done;)g(m,o,l.value,b)},d.define=e,c.exports}),a.registerDynamic("d5",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a,b,c){if(!(a instanceof b))throw TypeError(c+": use the 'new' operator!");return a},d.define=e,c.exports}),a.registerDynamic("c9",["c1"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c1");return c.exports=function(a){if(!f(a))throw TypeError(a+" is not an object!");return a},d.define=e,c.exports}),a.registerDynamic("d6",["b9","d7","b8","c5","ce","d8","c1","c9","ca","d5","d3","cc","cb","b6","c8","c7","ba","bb","d9","b7","d0","b5","2e"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,function(b){"use strict";var c,d=a("b9"),e=a("d7"),f=a("b8"),g=a("c5"),h=a("ce"),i=a("d8"),j=a("c1"),k=a("c9"),l=a("ca"),m=a("d5"),n=a("d3"),o=a("cc").set,p=a("cb"),q=a("b6")("species"),r=a("c8"),s=a("c7"),t="Promise",b=f.process,u="process"==h(b),v=f[t],w=function(a){var b=new v(function(){});return a&&(b.constructor=Object),v.resolve(b)===b},x=function(){function b(a){var c=new v(a);return o(c,b.prototype),c}var c=!1;try{if(c=v&&v.resolve&&w(),o(b,v),b.prototype=d.create(v.prototype,{constructor:{value:b}}),b.resolve(5).then(function(){})instanceof b||(c=!1),c&&a("ba")){var e=!1;v.resolve(d.setDesc({},"then",{get:function(){e=!0}})),c=e}}catch(f){c=!1}return c}(),y=function(a,b){return e&&a===v&&b===c?!0:p(a,b)},z=function(a){var b=k(a)[q];return void 0!=b?b:a},A=function(a){var b;return j(a)&&"function"==typeof(b=a.then)?b:!1},B=function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=l(b),this.reject=l(c)},C=function(a){try{a()}catch(b){return{error:b}}},D=function(a,c){if(!a.n){a.n=!0;var d=a.c;s(function(){for(var e=a.v,g=1==a.s,h=0,i=function(b){var c,d,f=g?b.ok:b.fail,h=b.resolve,i=b.reject;try{f?(g||(a.h=!0),c=f===!0?e:f(e),c===b.promise?i(TypeError("Promise-chain cycle")):(d=A(c))?d.call(c,h,i):h(c)):i(e)}catch(j){i(j)}};d.length>h;)i(d[h++]);d.length=0,a.n=!1,c&&setTimeout(function(){var c,d,g=a.p;E(g)&&(u?b.emit("unhandledRejection",e,g):(c=f.onunhandledrejection)?c({promise:g,reason:e}):(d=f.console)&&d.error&&d.error("Unhandled promise rejection",e)),a.a=void 0},1)})}},E=function(a){var b,c=a._d,d=c.a||c.c,e=0;if(c.h)return!1;for(;d.length>e;)if(b=d[e++],b.fail||!E(b.promise))return!1;return!0},F=function(a){var b=this;b.d||(b.d=!0,b=b.r||b,b.v=a,b.s=2,b.a=b.c.slice(),D(b,!0))},G=function(a){var b,c=this;if(!c.d){c.d=!0,c=c.r||c;try{if(c.p===a)throw TypeError("Promise can't be resolved itself");(b=A(a))?s(function(){var d={r:c,d:!1};try{b.call(a,g(G,d,1),g(F,d,1))}catch(e){F.call(d,e)}}):(c.v=a,c.s=1,D(c,!1))}catch(d){F.call({r:c,d:!1},d)}}};x||(v=function(a){l(a);var b=this._d={p:m(this,v,t),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{a(g(G,b,1),g(F,b,1))}catch(c){F.call(b,c)}},a("bb")(v.prototype,{then:function(a,b){var c=new B(r(this,v)),d=c.promise,e=this._d;return c.ok="function"==typeof a?a:!0,c.fail="function"==typeof b&&b,e.c.push(c),e.a&&e.a.push(c),e.s&&D(e,!1),d},"catch":function(a){return this.then(void 0,a)}})),i(i.G+i.W+i.F*!x,{Promise:v}),a("d9")(v,t),a("b7")(t),c=a("d0")[t],i(i.S+i.F*!x,t,{reject:function(a){var b=new B(this),c=b.reject;return c(a),b.promise}}),i(i.S+i.F*(!x||w(!0)),t,{resolve:function(a){if(a instanceof v&&y(a.constructor,this))return a;var b=new B(this),c=b.resolve;return c(a),b.promise}}),i(i.S+i.F*!(x&&a("b5")(function(a){v.all(a)["catch"](function(){})})),t,{all:function(a){var b=z(this),c=new B(b),e=c.resolve,f=c.reject,g=[],h=C(function(){n(a,!1,g.push,g);var c=g.length,h=Array(c);c?d.each.call(g,function(a,d){var g=!1;b.resolve(a).then(function(a){g||(g=!0,h[d]=a,--c||e(h))},f)}):e(h)});return h&&f(h.error),c.promise},race:function(a){var b=z(this),c=new B(b),d=c.reject,e=C(function(){n(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e&&d(e.error),c.promise}})}(a("2e")),d.define=e,c.exports}),a.registerDynamic("da",["db","dc"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("db"),g=a("dc");return c.exports=function(a){return f(g(a))},d.define=e,c.exports}),a.registerDynamic("dd",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a,b){return{value:b,done:!!a}},d.define=e,c.exports}),a.registerDynamic("de",["df","dd","cf","da","e0"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("df"),g=a("dd"),h=a("cf"),i=a("da");return c.exports=a("e0")(Array,"Array",function(a,b){this._t=i(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,g(1)):"keys"==b?g(0,c):"values"==b?g(0,a[c]):g(0,[c,a[c]])},"values"),h.Arguments=h.Array,f("keys"),f("values"),f("entries"),d.define=e,c.exports}),a.registerDynamic("e1",["de","b8","e2","cf","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0,a("de");var d=a("b8"),f=a("e2"),g=a("cf"),h=a("b6")("iterator"),i=d.NodeList,j=d.HTMLCollection,k=i&&i.prototype,l=j&&j.prototype,m=g.NodeList=g.HTMLCollection=g.Array;return k&&!k[h]&&f(k,h,m),l&&!l[h]&&f(l,h,m),d.define=e,c.exports}),a.registerDynamic("d9",["b9","e3","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("b9").setDesc,g=a("e3"),h=a("b6")("toStringTag");return c.exports=function(a,b,c){a&&!g(a=c?a:a.prototype,h)&&f(a,h,{configurable:!0,value:b})},d.define=e,c.exports}),a.registerDynamic("e4",["b9","e5","d9","e2","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("b9"),g=a("e5"),h=a("d9"),i={};return a("e2")(i,a("b6")("iterator"),function(){return this}),c.exports=function(a,b,c){a.prototype=f.create(i,{next:g(1,c)}),h(a,b+" Iterator")},d.define=e,c.exports}),a.registerDynamic("cf",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports={},d.define=e,c.exports}),a.registerDynamic("e3",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f={}.hasOwnProperty;return c.exports=function(a,b){return f.call(a,b)},d.define=e,c.exports}),a.registerDynamic("d7",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=!1,d.define=e,c.exports}),a.registerDynamic("e0",["d7","d8","bc","e2","e3","cf","e4","d9","b9","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("d7"),g=a("d8"),h=a("bc"),i=a("e2"),j=a("e3"),k=a("cf"),l=a("e4"),m=a("d9"),n=a("b9").getProto,o=a("b6")("iterator"),p=!([].keys&&"next"in[].keys()),q="@@iterator",r="keys",s="values",t=function(){return this};return c.exports=function(a,b,c,d,e,u,v){l(c,b,d);var w,x,y=function(a){if(!p&&a in C)return C[a];switch(a){case r:return function(){return new c(this,a)};case s:return function(){return new c(this,a)}}return function(){return new c(this,a)}},z=b+" Iterator",A=e==s,B=!1,C=a.prototype,D=C[o]||C[q]||e&&C[e],E=D||y(e);if(D){var F=n(E.call(new a));m(F,z,!0),!f&&j(C,q)&&i(F,o,t),A&&D.name!==s&&(B=!0,E=function(){return D.call(this)})}if(f&&!v||!p&&!B&&C[o]||i(C,o,E),k[b]=E,k[z]=t,e)if(w={values:A?E:y(s),keys:u?E:y(r),entries:A?y("entries"):E},v)for(x in w)x in C||h(C,x,w[x]);else g(g.P+g.F*(p||B),b,w);return w},d.define=e,c.exports}),a.registerDynamic("e6",["e7","dc"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("e7"),g=a("dc");return c.exports=function(a){return function(b,c){var d,e,h=String(g(b)),i=f(c),j=h.length;return 0>i||i>=j?a?"":void 0:(d=h.charCodeAt(i),55296>d||d>56319||i+1===j||(e=h.charCodeAt(i+1))<56320||e>57343?a?h.charAt(i):d:a?h.slice(i,i+2):(d-55296<<10)+(e-56320)+65536)}},d.define=e,c.exports}),a.registerDynamic("e8",["e6","e0"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("e6")(!0);return a("e0")(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=f(b,c),this._i+=a.length,{value:a,done:!1})}),d.define=e,c.exports}),a.registerDynamic("ce",["c6","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c6"),g=a("b6")("toStringTag"),h="Arguments"==f(function(){return arguments}());return c.exports=function(a){var b,c,d;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=(b=Object(a))[g])?c:h?f(b):"Object"==(d=f(b))&&"function"==typeof b.callee?"Arguments":d},d.define=e,c.exports}),a.registerDynamic("e9",["ce","b6","bc"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("ce"),g={};return g[a("b6")("toStringTag")]="z",g+""!="[object z]"&&a("bc")(Object.prototype,"toString",function(){return"[object "+f(this)+"]"},!0),d.define=e,c.exports}),a.registerDynamic("ea",["e9","e8","e1","d6","d0"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,a("e9"),a("e8"),a("e1"),a("d6"),c.exports=a("d0").Promise,d.define=e,c.exports}),a.registerDynamic("df",["b6","e2"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("b6")("unscopables"),g=Array.prototype;return void 0==g[f]&&a("e2")(g,f,{}),c.exports=function(a){g[f][a]=!0},d.define=e,c.exports}),a.registerDynamic("eb",["c6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c6");return c.exports=Array.isArray||function(a){return"Array"==f(a)},d.define=e,c.exports}),a.registerDynamic("ec",["c1","eb","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c1"),g=a("eb"),h=a("b6")("species");return c.exports=function(a,b){var c;return g(a)&&(c=a.constructor,"function"!=typeof c||c!==Array&&!g(c.prototype)||(c=void 0),f(c)&&(c=c[h],null===c&&(c=void 0))),new(void 0===c?Array:c)(b)},d.define=e,c.exports}),a.registerDynamic("ed",["dc"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("dc");return c.exports=function(a){return Object(f(a))},d.define=e,c.exports}),a.registerDynamic("db",["c6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c6");return c.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==f(a)?a.split(""):Object(a)},d.define=e,c.exports}),a.registerDynamic("ee",["c5","db","ed","d4","ec"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c5"),g=a("db"),h=a("ed"),i=a("d4"),j=a("ec");return c.exports=function(a){var b=1==a,c=2==a,d=3==a,e=4==a,k=6==a,l=5==a||k;return function(m,n,o){for(var p,q,r=h(m),s=g(r),t=f(n,o,3),u=i(s.length),v=0,w=b?j(m,u):c?j(m,0):void 0;u>v;v++)if((l||v in s)&&(p=s[v],q=t(p,v,r),a))if(b)w[v]=q;else if(q)switch(a){case 3:return!0;case 5:return p;case 6:return v;case 2:w.push(p)}else if(e)return!1;return k?-1:d||e?e:w}},d.define=e,c.exports}),a.registerDynamic("ef",["d8","ee","df"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("d8"),g=a("ee")(5),h="find",i=!0;return h in[]&&Array(1)[h](function(){i=!1}),f(f.P+f.F*i,"Array",{find:function(a){return g(this,a,arguments.length>1?arguments[1]:void 0)}}),a("df")(h),d.define=e,c.exports}),a.registerDynamic("f0",["ef","d0"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,a("ef"),c.exports=a("d0").Array.find,d.define=e,c.exports}),a.registerDynamic("f1",["d8","d4","f2","f3"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("d8"),g=a("d4"),h=a("f2"),i="endsWith",j=""[i];return f(f.P+f.F*a("f3")(i),"String",{endsWith:function(a){var b=h(this,a,i),c=arguments,d=c.length>1?c[1]:void 0,e=g(b.length),f=void 0===d?e:Math.min(g(d),e),k=String(a);return j?j.call(b,k,f):b.slice(f-k.length,f)===k}}),d.define=e,c.exports}),a.registerDynamic("f4",["f1","d0"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,a("f1"),c.exports=a("d0").String.endsWith,d.define=e,c.exports}),a.registerDynamic("f3",["b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("b6")("match");return c.exports=function(a){var b=/./;try{"/./"[a](b)}catch(c){try{return b[f]=!1,!"/./"[a](b)}catch(d){}}return!0},d.define=e,c.exports}),a.registerDynamic("dc",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a},d.define=e,c.exports}),a.registerDynamic("f5",["b8"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var d=a("b8"),f="__core-js_shared__",g=d[f]||(d[f]={});return c.exports=function(a){return g[a]||(g[a]={})},d.define=e,c.exports}),a.registerDynamic("b6",["f5","f6","b8"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("f5")("wks"),g=a("f6"),h=a("b8").Symbol;return c.exports=function(a){return f[a]||(f[a]=h&&h[a]||(h||g)("Symbol."+a))},d.define=e,c.exports}),a.registerDynamic("c6",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f={}.toString;return c.exports=function(a){return f.call(a).slice(8,-1)},d.define=e,c.exports}),a.registerDynamic("c1",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a;
},d.define=e,c.exports}),a.registerDynamic("f7",["c1","c6","b6"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("c1"),g=a("c6"),h=a("b6")("match");return c.exports=function(a){var b;return f(a)&&(void 0!==(b=a[h])?!!b:"RegExp"==g(a))},d.define=e,c.exports}),a.registerDynamic("f2",["f7","dc"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("f7"),g=a("dc");return c.exports=function(a,b,c){if(f(b))throw TypeError("String#"+c+" doesn't accept regex!");return String(g(a))},d.define=e,c.exports}),a.registerDynamic("e7",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=Math.ceil,g=Math.floor;return c.exports=function(a){return isNaN(a=+a)?0:(a>0?g:f)(a)},d.define=e,c.exports}),a.registerDynamic("d4",["e7"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("e7"),g=Math.min;return c.exports=function(a){return a>0?g(f(a),9007199254740991):0},d.define=e,c.exports}),a.registerDynamic("ca",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a},d.define=e,c.exports}),a.registerDynamic("c5",["ca"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("ca");return c.exports=function(a,b,c){if(f(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}},d.define=e,c.exports}),a.registerDynamic("f6",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=0,g=Math.random();return c.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++f+g).toString(36))},d.define=e,c.exports}),a.registerDynamic("bc",["b8","e2","f6","d0"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var d=a("b8"),f=a("e2"),g=a("f6")("src"),h="toString",i=Function[h],j=(""+i).split(h);return a("d0").inspectSource=function(a){return i.call(a)},(c.exports=function(a,b,c,e){"function"==typeof c&&(c.hasOwnProperty(g)||f(c,g,a[b]?""+a[b]:j.join(String(b))),c.hasOwnProperty("name")||f(c,"name",b)),a===d?a[b]=c:(e||delete a[b],f(a,b,c))})(Function.prototype,h,function(){return"function"==typeof this&&this[g]||i.call(this)}),d.define=e,c.exports}),a.registerDynamic("f8",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a){try{return!!a()}catch(b){return!0}},d.define=e,c.exports}),a.registerDynamic("ba",["f8"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=!a("f8")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),d.define=e,c.exports}),a.registerDynamic("e5",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}},d.define=e,c.exports}),a.registerDynamic("b9",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=Object;return c.exports={create:f.create,getProto:f.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:f.getOwnPropertyDescriptor,setDesc:f.defineProperty,setDescs:f.defineProperties,getKeys:f.keys,getNames:f.getOwnPropertyNames,getSymbols:f.getOwnPropertySymbols,each:[].forEach},d.define=e,c.exports}),a.registerDynamic("e2",["b9","e5","ba"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("b9"),g=a("e5");return c.exports=a("ba")?function(a,b,c){return f.setDesc(a,b,g(1,c))}:function(a,b,c){return a[b]=c,a},d.define=e,c.exports}),a.registerDynamic("d0",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=c.exports={version:"1.2.6"};return"number"==typeof __e&&(__e=f),d.define=e,c.exports}),a.registerDynamic("b8",[],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var d=c.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();return"number"==typeof __g&&(__g=d),d.define=e,c.exports}),a.registerDynamic("d8",["b8","d0","e2","bc","c5"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var d=a("b8"),f=a("d0"),g=a("e2"),h=a("bc"),i=a("c5"),j="prototype",k=function(a,b,c){var e,l,m,n,o=a&k.F,p=a&k.G,q=a&k.S,r=a&k.P,s=a&k.B,t=p?d:q?d[b]||(d[b]={}):(d[b]||{})[j],u=p?f:f[b]||(f[b]={}),v=u[j]||(u[j]={});p&&(c=b);for(e in c)l=!o&&t&&e in t,m=(l?t:c)[e],n=s&&l?i(m,d):r&&"function"==typeof m?i(Function.call,m):m,t&&!l&&h(t,e,m),u[e]!=m&&g(u,e,n),r&&v[e]!=m&&(v[e]=m)};return d.core=f,k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,c.exports=k,d.define=e,c.exports}),a.registerDynamic("f9",["d8","d4","f2","f3"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("d8"),g=a("d4"),h=a("f2"),i="startsWith",j=""[i];return f(f.P+f.F*a("f3")(i),"String",{startsWith:function(a){var b=h(this,a,i),c=arguments,d=g(Math.min(c.length>1?c[1]:void 0,b.length)),e=String(a);return j?j.call(b,e,d):b.slice(d,d+e.length)===e}}),d.define=e,c.exports}),a.registerDynamic("fa",["f9","d0"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,a("f9"),c.exports=a("d0").String.startsWith,d.define=e,c.exports}),a.register("1",["2","3","4","5","6","8","9","12","13","fa","f4","f0","ea","b4","b1","b0","ae","ac","ab","a5"],function(a){"use strict";function b(){var a=!0,b=!1,c=void 0;try{for(var d,e=function(){var a=d.value;"1"===a.style.opacity?setTimeout(function(){return a.style.display="none"},3500):a.style.display="block",setTimeout(function(){return a.style.opacity="1"===a.style.opacity?"0":"1"},100)},f=document.querySelectorAll(".snow")[Symbol.iterator]();!(a=(d=f.next()).done);a=!0)e()}catch(g){b=!0,c=g}finally{try{!a&&f["return"]&&f["return"]()}finally{if(b)throw c}}}function c(a){if(window.location.hash){var b=window.location.hash.substr(1),c=k(b);if(c.url&&(c.url.toLowerCase().startsWith("http://")||c.url.toLowerCase().startsWith("https://"))&&w.catalogue.url!==c.url&&(x=c.url,a||w.catalogue.loadFromDCAT(x)),c.map){var d=c.map.split("/").map(parseFloat),e=babelHelpers.slicedToArray(d,3),f=e[0],g=e[1],h=e[2];o.setView([g,h],f)}}}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return{setters:[function(a){},function(a){},function(a){},function(a){d=a["default"]},function(a){},function(a){e=a.$,f=a.HTML},function(a){g=a.i18n,h=a.DefaultMap,i=a.MELODIES_DCAT_CATALOG_URL},function(a){j=a["default"]},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){k=a.stringQs},function(a){},function(a){},function(a){},function(a){},function(a){l=a["default"]},function(a){m=a["default"]}],execute:function(){e("body").add(f('\n  <div id="snow1" class="snow"></div>\n  <div id="snow2" class="snow"></div>\n  <div id="snow3" class="snow"></div>\n')),document.getElementById("map").addEventListener("keypress",function(a){"s"==String.fromCharCode(a.charCode)&&b()},!1),n=(new Date).getFullYear(),new Date(n+"-12-22")<=new Date&&new Date<=new Date(n+"-01-03")&&b(),o=d.map("map",{loadingControl:!0,center:[10,0],zoom:2}),p={"Hydda.Base":"Hydda",OpenStreetMap:"OpenStreetMap","OpenStreetMap.BlackAndWhite":"OpenStreetMap (B/W)",OpenTopoMap:"OpenTopoMap","MapQuestOpen.Aerial":"MapQuestOpen Aerial"},q={};for(r in p)s=d.tileLayer.provider(r),q[p[r]]=s;q[p["MapQuestOpen.Aerial"]].addTo(o),t=[{groupName:"Base Maps",expanded:!0,layers:q}],u=d.Control.styledLayerControl(t,[],{container_width:"300px",container_maxHeight:"500px",collapsed:!1}),o.addControl(u),v=function(){function a(b){babelHelpers.classCallCheck(this,a),this._control=b,this._groups=new h(function(){return[]}),this._layers=new Map}return babelHelpers.createClass(a,[{key:"addOverlay",value:function(a,b,c){var d=c.groupName;this._groups.get(d).push({layer:a,name:b}),this._layers.set(a,d),this._control.addOverlay(a,b,c)}},{key:"removeLayer",value:function(a){this._control.removeLayer(a);var b=this._layers.get(a);this._layers["delete"](a);var c=this._groups.get(b),d=c.filter(function(b){return b.layer!==a});this._groups.set(b,d),0===d.length&&(this._control.removeGroup(b),this._groups["delete"](b))}},{key:"renameGroup",value:function(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=this._groups.get(a).slice()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=h.layer,j=h.name;this.removeLayer(i),this.addOverlay(i,j,{groupName:b,expanded:!0})}}catch(k){d=!0,e=k}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}},{key:"getLayers",value:function(){return[].concat(babelHelpers.toConsumableArray(this._layers.keys()))}}]),a}(),o.layerControl=new v(u),o.on("click",function(a){new l({layers:o.layerControl.getLayers(),className:"leaflet-popup-draggable"}).setLatLng(a.latlng).openOn(o)}),w=new m(o),w.on("dataLoading",function(){return o.fire("dataloading")}),w.on("dataLoad",function(){return o.fire("dataload")}),w.workspace.on("titleChange",function(a){var b=a.oldTitle,c=a.newTitle;o.layerControl.renameGroup(g(b),g(c))}),x=void 0,c(!0),window.addEventListener("hashchange",function(){return c(!1)},!1),x||(x=i),y=new j(o,{app:w,layerControl:u}),w.catalogue.loadFromDCAT(x).then(function(){y.open(y.panes.Search)})["catch"](function(){y.open(y.panes.Search)}),window.api={map:o}}}}),a.register("app/css/snow.css!github:systemjs/plugin-css@0.1.21",[],!1,function(){}),a.register("app/css/styledLayerControl/styledLayerControl.css!github:systemjs/plugin-css@0.1.21",[],!1,function(){}),a.register("app/css/style.css!github:systemjs/plugin-css@0.1.21",[],!1,function(){}),a.register("github:Turbo87/sidebar-v2@master/css/leaflet-sidebar.css!github:systemjs/plugin-css@0.1.21",[],!1,function(){}),a.register("github:guygriffiths/category-remapper-js@master/css/remapper.css!github:systemjs/plugin-css@0.1.21",[],!1,function(){}),a.register("npm:c3@0.4.11-rc4/c3.css!github:systemjs/plugin-css@0.1.21",[],!1,function(){}),a.register("github:ebrelsford/Leaflet.loading@0.1.18/src/Control.Loading.css!github:systemjs/plugin-css@0.1.21",[],!1,function(){}),a.register("github:Leaflet/Leaflet@0.7.7/dist/leaflet.css!github:systemjs/plugin-css@0.1.21",[],!1,function(){}),a.register("github:twbs/bootstrap@3.3.6/css/bootstrap.css!github:systemjs/plugin-css@0.1.21",[],!1,function(){}),function(a){if("undefined"!=typeof document){var b=document,c="appendChild",d="styleSheet",e=b.createElement("style");e.type="text/css",b.getElementsByTagName("head")[0][c](e),e[d]?e[d].cssText=a:e[c](b.createTextNode(a))}}('.sidebar-left,.snow{left:0}.c3-tooltip,table{border-spacing:0;border-collapse:collapse}.c3 svg,html{-webkit-tap-highlight-color:transparent}.snow{display:none;height:100%;position:absolute;top:0;width:100%;z-index:1;pointer-events:none;opacity:0;transition:opacity 3s}#snow1{background-image:url(http://www.wearewebstars.dk/codepen/img/s1.png);animation:snow1 5s linear infinite}#snow2{background-image:url(http://www.wearewebstars.dk/codepen/img/s2.png);animation:snow2 20s linear infinite}#snow3{background-image:url(http://www.wearewebstars.dk/codepen/img/s3.png);animation:snow3 30s linear infinite}@keyframes snow1{from{background-position:0 0}to{background-position:500px 500px}}@keyframes snow2{from{background-position:0 0}to{background-position:400px 800px}}@keyframes snow3{from{background-position:0 0}to{background-position:-600px 900px}}.ac-container{width:auto;margin:10px auto;text-align:left;overflow-y:auto;overflow-x:hidden;height:auto}.ac-container label{font-family:BebasNeueRegular,\'Arial Narrow\',Arial,sans-serif;padding:5px 20px;position:relative;z-index:20;display:block;cursor:pointer;color:#777;text-shadow:1px 1px 1px rgba(255,255,255,.8);line-height:30px;font-size:17px;background:#fff;background:-moz-linear-gradient(top,#fff 1%,#eaeaea 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(1%,#fff),color-stop(100%,#eaeaea));background:-webkit-linear-gradient(top,#fff 1%,#eaeaea 100%);background:-o-linear-gradient(top,#fff 1%,#eaeaea 100%);background:-ms-linear-gradient(top,#fff 1%,#eaeaea 100%);background:linear-gradient(top,#fff 1%,#eaeaea 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#ffffff\', endColorstr=\'#eaeaea\', GradientType=0 );box-shadow:0 0 0 1px rgba(155,155,155,.3),1px 0 0 0 rgba(255,255,255,.9) inset,0 2px 2px rgba(0,0,0,.1);box-sizing:content-box;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ac-container label:hover{background:#fff}.ac-container input.menu:checked+label,.ac-container input.menu:checked+label:hover{background:#c6e1ec;color:#3d7489;text-shadow:0 1px 1px rgba(255,255,255,.6);box-shadow:0 0 0 1px rgba(155,155,155,.3),0 2px 2px rgba(0,0,0,.1)}.ac-container input.menu:checked+label:after,.ac-container label:hover:after{content:\'\';position:absolute;width:24px;height:24px;right:13px;top:7px;background:url(app/css/styledLayerControl/images/arrow_down.png) center center no-repeat}.ac-container input.menu:checked+label:after{background-image:url(app/css/styledLayerControl/images/arrow_up.png)}.ac-container input.menu{display:none}.ac-container article{background:rgba(255,255,255,.5);margin-top:-1px;overflow:hidden;height:0;position:relative;z-index:10;-webkit-transition:height .3s ease-in-out,box-shadow .6s linear;-moz-transition:height .3s ease-in-out,box-shadow .6s linear;-o-transition:height .3s ease-in-out,box-shadow .6s linear;-ms-transition:height .3s ease-in-out,box-shadow .6s linear;transition:height .3s ease-in-out,box-shadow .6s linear}.ac-container input.menu:checked~article{-webkit-transition:height .5s ease-in-out,box-shadow .1s linear;-moz-transition:height .5s ease-in-out,box-shadow .1s linear;-o-transition:height .5s ease-in-out,box-shadow .1s linear;-ms-transition:height .5s ease-in-out,box-shadow .1s linear;transition:height .5s ease-in-out,box-shadow .1s linear;box-shadow:0 0 0 1px rgba(155,155,155,.3)}.ac-container input.menu:checked~article.ac-large{height:auto;max-height:200px;padding-top:5px;overflow-y:auto}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.pre-scrollable{max-height:340px}.menu-item-checkbox,.menu-item-radio{font-family:Ubuntu-Regular,Arial,sans-serif;font-size:13px}.info,.leaflet-control-layers{padding:6px 8px;font:14px/16px Arial,Helvetica,sans-serif}.bt_delete{position:relative;float:right;background-image:url(app/css/styledLayerControl/images/delete.png);background-color:transparent;background-repeat:no-repeat;background-position:0 0;border:none;cursor:pointer;height:16px;width:16px;vertical-align:middle}#map,body,html{height:100%}input[type=radio].leaflet-control-layers-selector,input[type=checkbox].leaflet-control-layers-selector{margin:3px 3px 0 5px}body,html{margin:0}.info{background:#fff;background:rgba(255,255,255,.8);box-shadow:0 0 15px rgba(0,0,0,.2);border-radius:5px}.external{background-image:linear-gradient(transparent,transparent),url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2210%22%20height%3D%2210%22%3E%3Cg%20transform%3D%22translate%28-826.429%20-698.791%29%22%3E%3Crect%20width%3D%225.982%22%20height%3D%225.982%22%20x%3D%22826.929%22%20y%3D%22702.309%22%20fill%3D%22%23fff%22%20stroke%3D%22%2306c%22%2F%3E%3Cg%3E%3Cpath%20d%3D%22M831.194%20698.791h5.234v5.391l-1.571%201.545-1.31-1.31-2.725%202.725-2.689-2.689%202.808-2.808-1.311-1.311z%22%20fill%3D%22%2306f%22%2F%3E%3Cpath%20d%3D%22M835.424%20699.795l.022%204.885-1.817-1.817-2.881%202.881-1.228-1.228%202.881-2.881-1.851-1.851z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E);background-position:right center;background-repeat:no-repeat;padding-right:13px}.dataset-spatial-minimap{height:120px}.code-nowrap{word-wrap:normal;white-space:pre}.leaflet-popup-draggable .leaflet-popup-content-wrapper{cursor:move}.sidebar{position:absolute;top:0;bottom:0;width:100%;overflow:hidden;z-index:2000;box-shadow:0 1px 5px rgba(0,0,0,.65)}.sidebar.collapsed{width:40px}@media (min-width:768px) and (max-width:991px){.sidebar{width:305px}.sidebar-pane{min-width:265px}}@media (min-width:992px) and (max-width:1199px){.sidebar{width:390px}}@media (min-width:1200px){.sidebar{width:460px}}.sidebar-right{right:0}@media (min-width:768px){.sidebar{top:10px;bottom:10px;transition:width .5s}.sidebar-left{left:10px}.sidebar-right{right:10px}}.sidebar-tabs{top:0;bottom:0;height:100%;background-color:#fff}.sidebar-left .sidebar-tabs{left:0}.sidebar-right .sidebar-tabs{right:0}.sidebar-tabs,.sidebar-tabs>ul{position:absolute;width:40px;margin:0;padding:0}.sidebar-tabs>li,.sidebar-tabs>ul>li{width:100%;height:40px;color:#333;font-size:12pt;overflow:hidden;transition:all 80ms}.sidebar-tabs>li:hover,.sidebar-tabs>ul>li:hover{color:#000;background-color:#eee}.sidebar-tabs>li.active,.sidebar-tabs>ul>li.active{color:#fff;background-color:#0074d9}.sidebar-tabs>li.disabled,.sidebar-tabs>ul>li.disabled{color:rgba(51,51,51,.4)}.sidebar-tabs>li.disabled:hover,.sidebar-tabs>ul>li.disabled:hover{background:0 0}.sidebar-tabs>li.disabled>a,.sidebar-tabs>ul>li.disabled>a{cursor:default}.leaflet-clickable,.sidebar-close{cursor:pointer}.sidebar-tabs>li>a,.sidebar-tabs>ul>li>a{display:block;width:100%;height:100%;line-height:40px;color:inherit;text-decoration:none;text-align:center}.sidebar-tabs>ul+ul{bottom:0}.sidebar-content{position:absolute;top:0;bottom:0;background-color:rgba(255,255,255,.95);overflow-x:hidden;overflow-y:auto}.sidebar-left .sidebar-content{left:40px;right:0}.sidebar-right .sidebar-content{left:0;right:40px}.sidebar.collapsed>.sidebar-content{overflow-y:hidden}.sidebar-pane{display:none;left:0;right:0;box-sizing:border-box;padding:10px 20px}.sidebar-pane.active{display:block}.sidebar-header{margin:-10px -20px 0;height:40px;padding:0 20px;line-height:40px;font-size:14.4pt;color:#fff;background-color:#0074d9}.sidebar-right .sidebar-header{padding-left:40px}.sidebar-close{position:absolute;top:0;width:40px;height:40px;text-align:center}.sidebar-left .sidebar-close{right:0}.sidebar-right .sidebar-close{left:0}.sidebar-left~.sidebar-map{margin-left:40px}.sidebar-right~.sidebar-map{margin-right:40px}.sidebar.leaflet-touch{box-shadow:none;border-right:2px solid rgba(0,0,0,.2)}@media (min-width:768px) and (max-width:991px){.sidebar-left~.sidebar-map .leaflet-left{left:315px}.sidebar-right~.sidebar-map .leaflet-right{right:315px}}@media (min-width:992px) and (max-width:1199px){.sidebar-pane{min-width:350px}.sidebar-left~.sidebar-map .leaflet-left{left:400px}}@media (min-width:1200px){.sidebar-pane{min-width:420px}.sidebar-left~.sidebar-map .leaflet-left{left:470px}}@media (min-width:992px) and (max-width:1199px){.sidebar-right~.sidebar-map .leaflet-right{right:400px}}@media (min-width:1200px){.sidebar-right~.sidebar-map .leaflet-right{right:470px}}@media (min-width:768px){.sidebar-left~.sidebar-map{margin-left:0}.sidebar-right~.sidebar-map{margin-right:0}.sidebar{border-radius:4px}.sidebar.leaflet-touch{border:2px solid rgba(0,0,0,.2)}.sidebar-left~.sidebar-map .leaflet-left{transition:left .5s}.sidebar-left.collapsed~.sidebar-map .leaflet-left{left:50px}.sidebar-right~.sidebar-map .leaflet-right{transition:right .5s}.sidebar-right.collapsed~.sidebar-map .leaflet-right{right:50px}}.jsplumb-connector{z-index:9040}.jsplumb-endpoint{z-index:9050}.jsplumb-overlay{z-index:9060}.main-remapper{position:fixed;width:100%;height:100%;left:0;top:0;z-index:1000}.remap-froms,.remap-tos{position:absolute;top:0;left:0;width:250px;height:100%;background-color:rgba(150,220,255,.8);color:#000;text-align:right}.remap-tos{left:auto;right:0;width:250px;overflow:hidden;color:#000;text-align:left}.buttonholder,.centrecontent{left:250px;right:250px;text-align:center;position:absolute;bottom:0}.centrecontent{opacity:.8;height:100%;background:#fff;vertical-align:bottom}.buttonholder{background-color:rgba(255,255,255,0)}.cancel-remap-button,.remap-button{font-size:20pt;padding:20px;margin:20px}.map-from,.map-to{margin:2px;border-style:solid;border-width:thin;font-family:sans-serif;background-color:rgba(0,210,255,1)}.map-from{padding-right:10px}.map-to{padding-left:10px}.c3 svg{font:10px sans-serif}.c3 line,.c3 path{fill:none;stroke:#000}.c3 text{-webkit-user-select:none;-moz-user-select:none;user-select:none}.c3-bars path,.c3-event-rect,.c3-legend-item-tile,.c3-xgrid-focus,.c3-ygrid{shape-rendering:crispEdges}.c3-chart-arc path{stroke:#fff}.c3-chart-arc text{fill:#fff;font-size:13px}.c3-grid line{stroke:#aaa}.c3-grid text{fill:#aaa}.c3-xgrid,.c3-ygrid{stroke-dasharray:3 3}.c3-text.c3-empty{fill:grey;font-size:2em}.c3-line{stroke-width:1px}.c3-circle._expanded_{stroke-width:1px;stroke:#fff}.c3-selected-circle{fill:#fff;stroke-width:2px}.c3-bar{stroke-width:0}.c3-bar._expanded_{fill-opacity:.75}.c3-target.c3-focused{opacity:1}.c3-target.c3-focused path.c3-line,.c3-target.c3-focused path.c3-step{stroke-width:2px}.c3-target.c3-defocused{opacity:.3!important}.c3-region{fill:#4682b4;fill-opacity:.1}.c3-brush .extent{fill-opacity:.1}.c3-legend-item{font-size:12px}.c3-legend-item-hidden{opacity:.15}.c3-legend-background{opacity:.75;fill:#fff;stroke:#d3d3d3;stroke-width:1}.c3-title{font:14px sans-serif}.c3-tooltip-container{z-index:10}.c3-tooltip{background-color:#fff;empty-cells:show;-webkit-box-shadow:7px 7px 12px -9px #777;-moz-box-shadow:7px 7px 12px -9px #777;box-shadow:7px 7px 12px -9px #777;opacity:.9}.c3-tooltip tr{border:1px solid #CCC}.c3-tooltip th{background-color:#aaa;font-size:14px;padding:2px 5px;text-align:left;color:#FFF}.c3-tooltip td{font-size:13px;padding:3px 6px;background-color:#fff;border-left:1px dotted #999}.c3-tooltip td>span{display:inline-block;width:10px;height:10px;margin-right:6px}.c3-tooltip td.value{text-align:right}.c3-area{stroke-width:0;opacity:.2}.c3-chart-arcs-title{dominant-baseline:middle;font-size:1.3em}.c3-chart-arcs .c3-chart-arcs-background{fill:#e0e0e0;stroke:none}.c3-chart-arcs .c3-chart-arcs-gauge-unit{fill:#000;font-size:16px}.c3-chart-arcs .c3-chart-arcs-gauge-max,.c3-chart-arcs .c3-chart-arcs-gauge-min{fill:#777}.c3-chart-arc .c3-gauge-value{fill:#000}.leaflet-control-loading:empty{background-image:url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAAKAAEALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQACgACACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQACgADACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkEAAoABAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkEAAoABQAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkEAAoABgAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAAKAAcALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkEAAoACAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAAKAAkALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQACgAKACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQACgALACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==);background-repeat:no-repeat}.leaflet-control-loading,.leaflet-control-zoom a.leaflet-control-loading,.leaflet-control-zoomslider a.leaflet-control-loading{display:none}.leaflet-control-loading.is-loading,.leaflet-control-zoom a.leaflet-control-loading.is-loading,.leaflet-control-zoomslider a.leaflet-control-loading.is-loading,.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-bar-part-bottom{border-bottom:medium none;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.leaflet-image-layer,.leaflet-layer,.leaflet-map-pane,.leaflet-marker-icon,.leaflet-marker-pane,.leaflet-marker-shadow,.leaflet-overlay-pane,.leaflet-overlay-pane svg,.leaflet-popup-pane,.leaflet-shadow-pane,.leaflet-tile,.leaflet-tile-container,.leaflet-tile-pane,.leaflet-zoom-box{position:absolute;left:0;top:0}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.btn,.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-container img{max-width:none!important}.leaflet-container img.leaflet-image-layer{max-width:15000px!important}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.invisible,.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-zoom-box{width:0;height:0}.leaflet-tile-pane{z-index:2}.leaflet-objects-pane{z-index:3}.leaflet-overlay-pane{z-index:4}.leaflet-shadow-pane{z-index:5}.leaflet-marker-pane{z-index:6}.leaflet-popup-pane{z-index:7}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:7;pointer-events:auto;float:left;clear:both}.leaflet-bottom,.leaflet-top{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-right .leaflet-control{float:right;margin-right:10px}.btn-group>.btn-group,.btn-toolbar .btn,.btn-toolbar .btn-group,.btn-toolbar .input-group,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.dropdown-menu{float:left}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-fade-anim .leaflet-popup,.leaflet-fade-anim .leaflet-tile{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;-o-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup,.leaflet-fade-anim .leaflet-tile-loaded{opacity:1}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);-o-transition:-o-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-pan-anim .leaflet-tile,.leaflet-touching .leaflet-zoom-animated,.leaflet-zoom-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.leaflet-container{overflow:hidden;-ms-touch-action:none;touch-action:none;cursor:-webkit-grab;cursor:-moz-grab;background:#ddd;outline:0;font:12px/1.5 "Helvetica Neue",Arial,Helvetica,sans-serif}.leaflet-control,.leaflet-popup-pane{cursor:auto}.leaflet-dragging .leaflet-clickable,.leaflet-dragging .leaflet-container{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing}.leaflet-container a{color:#0078A8}.leaflet-container a.leaflet-active{outline:orange solid 2px}.leaflet-zoom-box{border:2px dotted #38f;background:rgba(255,255,255,.5)}.leaflet-bar{box-shadow:0 1px 5px rgba(0,0,0,.65);border-radius:4px}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px \'Lucida Console\',Monaco,monospace;text-indent:1px}.leaflet-control-zoom-out{font-size:20px}.leaflet-touch .leaflet-control-zoom-in{font-size:22px}.leaflet-touch .leaflet-control-zoom-out{font-size:24px}.leaflet-control-layers{box-shadow:0 1px 5px rgba(0,0,0,.4);background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(jspm_packages/github/Leaflet/Leaflet@0.7.7/dist/images/layers.png);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(jspm_packages/github/Leaflet/Leaflet@0.7.7/dist/images/layers-2x.png);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers label,article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-container .leaflet-control-attribution{background:#fff;background:rgba(255,255,255,.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;font-size:11px;white-space:nowrap;overflow:hidden;-moz-box-sizing:content-box;box-sizing:content-box;background:#fff;background:rgba(255,255,255,.5)}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-layers{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 19px;line-height:1.4}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-tip-container{margin:0 auto;width:40px;height:20px;position:relative;overflow:hidden}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;box-shadow:0 3px 14px rgba(0,0,0,.4)}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;padding:4px 4px 0 0;text-align:center;width:18px;height:14px;font:16px/14px Tahoma,Verdana,sans-serif;color:#c3c3c3;text-decoration:none;font-weight:700;background:0 0}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-scrolled{overflow:auto;border-bottom:1px solid #ddd;border-top:1px solid #ddd}.leaflet-oldie .leaflet-popup-content-wrapper{zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678, M12=.70710678, M21=-.70710678, M22=.70710678)}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}body,figure{margin:0}.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}hr,img{border:0}/*!\n * Bootstrap v3.3.6 (http://getbootstrap.com)\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n *//*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}b,optgroup,strong{font-weight:700}dfn{font-style:italic}h1{margin:.67em 0}mark{color:#000;background:#ff0}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{vertical-align:middle}svg:not(:root){overflow:hidden}hr{height:0;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}pre,textarea{overflow:auto}code,kbd,pre,samp{font-size:1em}button,input,optgroup,select,textarea{margin:0;font:inherit;color:inherit}.glyphicon,address{font-style:normal}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input[type=radio],input[type=checkbox]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}td,th{padding:0}/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */@media print{blockquote,img,pre,tr{page-break-inside:avoid}*,:after,:before{color:#000!important;text-shadow:none!important;background:0 0!important;-webkit-box-shadow:none!important;box-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="#"]:after,a[href^="javascript:"]:after{content:""}blockquote,pre{border:1px solid #999}thead{display:table-header-group}img{max-width:100%!important}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}.navbar{display:none}.btn>.caret,.dropup>.btn>.caret{border-top-color:#000!important}.label{border:1px solid #000}.table{border-collapse:collapse!important}.table td,.table th{background-color:#fff!important}.table-bordered td,.table-bordered th{border:1px solid #ddd!important}}.dropdown-menu,.modal-content{-webkit-background-clip:padding-box}.btn,.btn-danger.active,.btn-danger:active,.btn-default.active,.btn-default:active,.btn-info.active,.btn-info:active,.btn-primary.active,.btn-primary:active,.btn-warning.active,.btn-warning:active,.btn.active,.btn:active,.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover,.form-control,.navbar-toggle,.open>.dropdown-toggle.btn-danger,.open>.dropdown-toggle.btn-default,.open>.dropdown-toggle.btn-info,.open>.dropdown-toggle.btn-primary,.open>.dropdown-toggle.btn-warning{background-image:none}.img-thumbnail,body{background-color:#fff}@font-face{font-family:\'Glyphicons Halflings\';src:url(jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.eot);src:url(jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.eot?#iefix) format(\'embedded-opentype\'),url(jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.woff2) format(\'woff2\'),url(jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.woff) format(\'woff\'),url(jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.ttf) format(\'truetype\'),url(jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular) format(\'svg\')}.glyphicon{position:relative;top:1px;display:inline-block;font-family:\'Glyphicons Halflings\';font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.glyphicon-asterisk:before{content:"\\002a"}.glyphicon-plus:before{content:"\\002b"}.glyphicon-eur:before,.glyphicon-euro:before{content:"\\20ac"}.glyphicon-minus:before{content:"\\2212"}.glyphicon-cloud:before{content:"\\2601"}.glyphicon-envelope:before{content:"\\2709"}.glyphicon-pencil:before{content:"\\270f"}.glyphicon-glass:before{content:"\\e001"}.glyphicon-music:before{content:"\\e002"}.glyphicon-search:before{content:"\\e003"}.glyphicon-heart:before{content:"\\e005"}.glyphicon-star:before{content:"\\e006"}.glyphicon-star-empty:before{content:"\\e007"}.glyphicon-user:before{content:"\\e008"}.glyphicon-film:before{content:"\\e009"}.glyphicon-th-large:before{content:"\\e010"}.glyphicon-th:before{content:"\\e011"}.glyphicon-th-list:before{content:"\\e012"}.glyphicon-ok:before{content:"\\e013"}.glyphicon-remove:before{content:"\\e014"}.glyphicon-zoom-in:before{content:"\\e015"}.glyphicon-zoom-out:before{content:"\\e016"}.glyphicon-off:before{content:"\\e017"}.glyphicon-signal:before{content:"\\e018"}.glyphicon-cog:before{content:"\\e019"}.glyphicon-trash:before{content:"\\e020"}.glyphicon-home:before{content:"\\e021"}.glyphicon-file:before{content:"\\e022"}.glyphicon-time:before{content:"\\e023"}.glyphicon-road:before{content:"\\e024"}.glyphicon-download-alt:before{content:"\\e025"}.glyphicon-download:before{content:"\\e026"}.glyphicon-upload:before{content:"\\e027"}.glyphicon-inbox:before{content:"\\e028"}.glyphicon-play-circle:before{content:"\\e029"}.glyphicon-repeat:before{content:"\\e030"}.glyphicon-refresh:before{content:"\\e031"}.glyphicon-list-alt:before{content:"\\e032"}.glyphicon-lock:before{content:"\\e033"}.glyphicon-flag:before{content:"\\e034"}.glyphicon-headphones:before{content:"\\e035"}.glyphicon-volume-off:before{content:"\\e036"}.glyphicon-volume-down:before{content:"\\e037"}.glyphicon-volume-up:before{content:"\\e038"}.glyphicon-qrcode:before{content:"\\e039"}.glyphicon-barcode:before{content:"\\e040"}.glyphicon-tag:before{content:"\\e041"}.glyphicon-tags:before{content:"\\e042"}.glyphicon-book:before{content:"\\e043"}.glyphicon-bookmark:before{content:"\\e044"}.glyphicon-print:before{content:"\\e045"}.glyphicon-camera:before{content:"\\e046"}.glyphicon-font:before{content:"\\e047"}.glyphicon-bold:before{content:"\\e048"}.glyphicon-italic:before{content:"\\e049"}.glyphicon-text-height:before{content:"\\e050"}.glyphicon-text-width:before{content:"\\e051"}.glyphicon-align-left:before{content:"\\e052"}.glyphicon-align-center:before{content:"\\e053"}.glyphicon-align-right:before{content:"\\e054"}.glyphicon-align-justify:before{content:"\\e055"}.glyphicon-list:before{content:"\\e056"}.glyphicon-indent-left:before{content:"\\e057"}.glyphicon-indent-right:before{content:"\\e058"}.glyphicon-facetime-video:before{content:"\\e059"}.glyphicon-picture:before{content:"\\e060"}.glyphicon-map-marker:before{content:"\\e062"}.glyphicon-adjust:before{content:"\\e063"}.glyphicon-tint:before{content:"\\e064"}.glyphicon-edit:before{content:"\\e065"}.glyphicon-share:before{content:"\\e066"}.glyphicon-check:before{content:"\\e067"}.glyphicon-move:before{content:"\\e068"}.glyphicon-step-backward:before{content:"\\e069"}.glyphicon-fast-backward:before{content:"\\e070"}.glyphicon-backward:before{content:"\\e071"}.glyphicon-play:before{content:"\\e072"}.glyphicon-pause:before{content:"\\e073"}.glyphicon-stop:before{content:"\\e074"}.glyphicon-forward:before{content:"\\e075"}.glyphicon-fast-forward:before{content:"\\e076"}.glyphicon-step-forward:before{content:"\\e077"}.glyphicon-eject:before{content:"\\e078"}.glyphicon-chevron-left:before{content:"\\e079"}.glyphicon-chevron-right:before{content:"\\e080"}.glyphicon-plus-sign:before{content:"\\e081"}.glyphicon-minus-sign:before{content:"\\e082"}.glyphicon-remove-sign:before{content:"\\e083"}.glyphicon-ok-sign:before{content:"\\e084"}.glyphicon-question-sign:before{content:"\\e085"}.glyphicon-info-sign:before{content:"\\e086"}.glyphicon-screenshot:before{content:"\\e087"}.glyphicon-remove-circle:before{content:"\\e088"}.glyphicon-ok-circle:before{content:"\\e089"}.glyphicon-ban-circle:before{content:"\\e090"}.glyphicon-arrow-left:before{content:"\\e091"}.glyphicon-arrow-right:before{content:"\\e092"}.glyphicon-arrow-up:before{content:"\\e093"}.glyphicon-arrow-down:before{content:"\\e094"}.glyphicon-share-alt:before{content:"\\e095"}.glyphicon-resize-full:before{content:"\\e096"}.glyphicon-resize-small:before{content:"\\e097"}.glyphicon-exclamation-sign:before{content:"\\e101"}.glyphicon-gift:before{content:"\\e102"}.glyphicon-leaf:before{content:"\\e103"}.glyphicon-fire:before{content:"\\e104"}.glyphicon-eye-open:before{content:"\\e105"}.glyphicon-eye-close:before{content:"\\e106"}.glyphicon-warning-sign:before{content:"\\e107"}.glyphicon-plane:before{content:"\\e108"}.glyphicon-calendar:before{content:"\\e109"}.glyphicon-random:before{content:"\\e110"}.glyphicon-comment:before{content:"\\e111"}.glyphicon-magnet:before{content:"\\e112"}.glyphicon-chevron-up:before{content:"\\e113"}.glyphicon-chevron-down:before{content:"\\e114"}.glyphicon-retweet:before{content:"\\e115"}.glyphicon-shopping-cart:before{content:"\\e116"}.glyphicon-folder-close:before{content:"\\e117"}.glyphicon-folder-open:before{content:"\\e118"}.glyphicon-resize-vertical:before{content:"\\e119"}.glyphicon-resize-horizontal:before{content:"\\e120"}.glyphicon-hdd:before{content:"\\e121"}.glyphicon-bullhorn:before{content:"\\e122"}.glyphicon-bell:before{content:"\\e123"}.glyphicon-certificate:before{content:"\\e124"}.glyphicon-thumbs-up:before{content:"\\e125"}.glyphicon-thumbs-down:before{content:"\\e126"}.glyphicon-hand-right:before{content:"\\e127"}.glyphicon-hand-left:before{content:"\\e128"}.glyphicon-hand-up:before{content:"\\e129"}.glyphicon-hand-down:before{content:"\\e130"}.glyphicon-circle-arrow-right:before{content:"\\e131"}.glyphicon-circle-arrow-left:before{content:"\\e132"}.glyphicon-circle-arrow-up:before{content:"\\e133"}.glyphicon-circle-arrow-down:before{content:"\\e134"}.glyphicon-globe:before{content:"\\e135"}.glyphicon-wrench:before{content:"\\e136"}.glyphicon-tasks:before{content:"\\e137"}.glyphicon-filter:before{content:"\\e138"}.glyphicon-briefcase:before{content:"\\e139"}.glyphicon-fullscreen:before{content:"\\e140"}.glyphicon-dashboard:before{content:"\\e141"}.glyphicon-paperclip:before{content:"\\e142"}.glyphicon-heart-empty:before{content:"\\e143"}.glyphicon-link:before{content:"\\e144"}.glyphicon-phone:before{content:"\\e145"}.glyphicon-pushpin:before{content:"\\e146"}.glyphicon-usd:before{content:"\\e148"}.glyphicon-gbp:before{content:"\\e149"}.glyphicon-sort:before{content:"\\e150"}.glyphicon-sort-by-alphabet:before{content:"\\e151"}.glyphicon-sort-by-alphabet-alt:before{content:"\\e152"}.glyphicon-sort-by-order:before{content:"\\e153"}.glyphicon-sort-by-order-alt:before{content:"\\e154"}.glyphicon-sort-by-attributes:before{content:"\\e155"}.glyphicon-sort-by-attributes-alt:before{content:"\\e156"}.glyphicon-unchecked:before{content:"\\e157"}.glyphicon-expand:before{content:"\\e158"}.glyphicon-collapse-down:before{content:"\\e159"}.glyphicon-collapse-up:before{content:"\\e160"}.glyphicon-log-in:before{content:"\\e161"}.glyphicon-flash:before{content:"\\e162"}.glyphicon-log-out:before{content:"\\e163"}.glyphicon-new-window:before{content:"\\e164"}.glyphicon-record:before{content:"\\e165"}.glyphicon-save:before{content:"\\e166"}.glyphicon-open:before{content:"\\e167"}.glyphicon-saved:before{content:"\\e168"}.glyphicon-import:before{content:"\\e169"}.glyphicon-export:before{content:"\\e170"}.glyphicon-send:before{content:"\\e171"}.glyphicon-floppy-disk:before{content:"\\e172"}.glyphicon-floppy-saved:before{content:"\\e173"}.glyphicon-floppy-remove:before{content:"\\e174"}.glyphicon-floppy-save:before{content:"\\e175"}.glyphicon-floppy-open:before{content:"\\e176"}.glyphicon-credit-card:before{content:"\\e177"}.glyphicon-transfer:before{content:"\\e178"}.glyphicon-cutlery:before{content:"\\e179"}.glyphicon-header:before{content:"\\e180"}.glyphicon-compressed:before{content:"\\e181"}.glyphicon-earphone:before{content:"\\e182"}.glyphicon-phone-alt:before{content:"\\e183"}.glyphicon-tower:before{content:"\\e184"}.glyphicon-stats:before{content:"\\e185"}.glyphicon-sd-video:before{content:"\\e186"}.glyphicon-hd-video:before{content:"\\e187"}.glyphicon-subtitles:before{content:"\\e188"}.glyphicon-sound-stereo:before{content:"\\e189"}.glyphicon-sound-dolby:before{content:"\\e190"}.glyphicon-sound-5-1:before{content:"\\e191"}.glyphicon-sound-6-1:before{content:"\\e192"}.glyphicon-sound-7-1:before{content:"\\e193"}.glyphicon-copyright-mark:before{content:"\\e194"}.glyphicon-registration-mark:before{content:"\\e195"}.glyphicon-cloud-download:before{content:"\\e197"}.glyphicon-cloud-upload:before{content:"\\e198"}.glyphicon-tree-conifer:before{content:"\\e199"}.glyphicon-tree-deciduous:before{content:"\\e200"}.glyphicon-cd:before{content:"\\e201"}.glyphicon-save-file:before{content:"\\e202"}.glyphicon-open-file:before{content:"\\e203"}.glyphicon-level-up:before{content:"\\e204"}.glyphicon-copy:before{content:"\\e205"}.glyphicon-paste:before{content:"\\e206"}.glyphicon-alert:before{content:"\\e209"}.glyphicon-equalizer:before{content:"\\e210"}.glyphicon-king:before{content:"\\e211"}.glyphicon-queen:before{content:"\\e212"}.glyphicon-pawn:before{content:"\\e213"}.glyphicon-bishop:before{content:"\\e214"}.glyphicon-knight:before{content:"\\e215"}.glyphicon-baby-formula:before{content:"\\e216"}.glyphicon-tent:before{content:"\\26fa"}.glyphicon-blackboard:before{content:"\\e218"}.glyphicon-bed:before{content:"\\e219"}.glyphicon-apple:before{content:"\\f8ff"}.glyphicon-erase:before{content:"\\e221"}.glyphicon-hourglass:before{content:"\\231b"}.glyphicon-lamp:before{content:"\\e223"}.glyphicon-duplicate:before{content:"\\e224"}.glyphicon-piggy-bank:before{content:"\\e225"}.glyphicon-scissors:before{content:"\\e226"}.glyphicon-bitcoin:before,.glyphicon-btc:before,.glyphicon-xbt:before{content:"\\e227"}.glyphicon-jpy:before,.glyphicon-yen:before{content:"\\00a5"}.glyphicon-rub:before,.glyphicon-ruble:before{content:"\\20bd"}.glyphicon-scale:before{content:"\\e230"}.glyphicon-ice-lolly:before{content:"\\e231"}.glyphicon-ice-lolly-tasted:before{content:"\\e232"}.glyphicon-education:before{content:"\\e233"}.glyphicon-option-horizontal:before{content:"\\e234"}.glyphicon-option-vertical:before{content:"\\e235"}.glyphicon-menu-hamburger:before{content:"\\e236"}.glyphicon-modal-window:before{content:"\\e237"}.glyphicon-oil:before{content:"\\e238"}.glyphicon-grain:before{content:"\\e239"}.glyphicon-sunglasses:before{content:"\\e240"}.glyphicon-text-size:before{content:"\\e241"}.glyphicon-text-color:before{content:"\\e242"}.glyphicon-text-background:before{content:"\\e243"}.glyphicon-object-align-top:before{content:"\\e244"}.glyphicon-object-align-bottom:before{content:"\\e245"}.glyphicon-object-align-horizontal:before{content:"\\e246"}.glyphicon-object-align-left:before{content:"\\e247"}.glyphicon-object-align-vertical:before{content:"\\e248"}.glyphicon-object-align-right:before{content:"\\e249"}.glyphicon-triangle-right:before{content:"\\e250"}.glyphicon-triangle-left:before{content:"\\e251"}.glyphicon-triangle-bottom:before{content:"\\e252"}.glyphicon-triangle-top:before{content:"\\e253"}.glyphicon-console:before{content:"\\e254"}.glyphicon-superscript:before{content:"\\e255"}.glyphicon-subscript:before{content:"\\e256"}.glyphicon-menu-left:before{content:"\\e257"}.glyphicon-menu-right:before{content:"\\e258"}.glyphicon-menu-down:before{content:"\\e259"}.glyphicon-menu-up:before{content:"\\e260"}*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{font-size:10px}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#333}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#337ab7;text-decoration:none}a:focus,a:hover{color:#23527c;text-decoration:underline}a:focus{outline:dotted thin;outline:-webkit-focus-ring-color auto 5px;outline-offset:-2px}.carousel-inner>.item>a>img,.carousel-inner>.item>img,.img-responsive,.thumbnail a>img,.thumbnail>img{display:block;max-width:100%;height:auto}.img-rounded{border-radius:6px}.img-thumbnail{display:inline-block;max-width:100%;height:auto;padding:4px;line-height:1.42857143;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}[role=button]{cursor:pointer}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{font-family:inherit;font-weight:500;line-height:1.1;color:inherit}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-weight:400;line-height:1;color:#777}.h1,.h2,.h3,h1,h2,h3{margin-top:20px;margin-bottom:10px}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small{font-size:65%}.h4,.h5,.h6,h4,h5,h6{margin-top:10px;margin-bottom:10px}.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-size:75%}.h1,h1{font-size:36px}.h2,h2{font-size:30px}.h3,h3{font-size:24px}.h4,h4{font-size:18px}.h5,h5{font-size:14px}.h6,h6{font-size:12px}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:16px;font-weight:300;line-height:1.4}dt,kbd kbd,label{font-weight:700}address,blockquote .small,blockquote footer,blockquote small,dd,dt,pre{line-height:1.42857143}@media (min-width:768px){.lead{font-size:21px}}.small,small{font-size:85%}.mark,mark{padding:.2em;background-color:#fcf8e3}.list-inline,.list-unstyled{padding-left:0;list-style:none}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}.text-nowrap{white-space:nowrap}.text-lowercase{text-transform:lowercase}.text-uppercase{text-transform:uppercase}.text-capitalize{text-transform:capitalize}.text-muted{color:#777}.text-primary{color:#337ab7}a.text-primary:focus,a.text-primary:hover{color:#286090}.text-success{color:#3c763d}a.text-success:focus,a.text-success:hover{color:#2b542c}.text-info{color:#31708f}a.text-info:focus,a.text-info:hover{color:#245269}.text-warning{color:#8a6d3b}a.text-warning:focus,a.text-warning:hover{color:#66512c}.text-danger{color:#a94442}a.text-danger:focus,a.text-danger:hover{color:#843534}.bg-primary{color:#fff;background-color:#337ab7}a.bg-primary:focus,a.bg-primary:hover{background-color:#286090}.bg-success{background-color:#dff0d8}a.bg-success:focus,a.bg-success:hover{background-color:#c1e2b3}.bg-info{background-color:#d9edf7}a.bg-info:focus,a.bg-info:hover{background-color:#afd9ee}.bg-warning{background-color:#fcf8e3}a.bg-warning:focus,a.bg-warning:hover{background-color:#f7ecb5}.bg-danger{background-color:#f2dede}a.bg-danger:focus,a.bg-danger:hover{background-color:#e4b9b9}pre code,table{background-color:transparent}.page-header{padding-bottom:9px;margin:40px 0 20px;border-bottom:1px solid #eee}dl,ol,ul{margin-top:0}blockquote ol:last-child,blockquote p:last-child,blockquote ul:last-child,ol ol,ol ul,ul ol,ul ul{margin-bottom:0}address,dl{margin-bottom:20px}ol,ul{margin-bottom:10px}.list-inline{margin-left:-5px}.list-inline>li{display:inline-block;padding-right:5px;padding-left:5px}dd{margin-left:0}@media (min-width:768px){.dl-horizontal dt{float:left;width:160px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:180px}.container{width:750px}}abbr[data-original-title],abbr[title]{cursor:help;border-bottom:1px dotted #777}.initialism{font-size:90%;text-transform:uppercase}blockquote{padding:10px 20px;margin:0 0 20px;font-size:17.5px;border-left:5px solid #eee}blockquote .small,blockquote footer,blockquote small{display:block;font-size:80%;color:#777}legend,pre{display:block;color:#333}blockquote .small:before,blockquote footer:before,blockquote small:before{content:\'\\2014 \\00A0\'}.blockquote-reverse,blockquote.pull-right{padding-right:15px;padding-left:0;text-align:right;border-right:5px solid #eee;border-left:0}code,kbd{padding:2px 4px;font-size:90%}caption,th{text-align:left}.blockquote-reverse .small:before,.blockquote-reverse footer:before,.blockquote-reverse small:before,blockquote.pull-right .small:before,blockquote.pull-right footer:before,blockquote.pull-right small:before{content:\'\'}.blockquote-reverse .small:after,.blockquote-reverse footer:after,.blockquote-reverse small:after,blockquote.pull-right .small:after,blockquote.pull-right footer:after,blockquote.pull-right small:after{content:\'\\00A0 \\2014\'}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Courier New",monospace}code{color:#c7254e;background-color:#f9f2f4;border-radius:4px}kbd{color:#fff;background-color:#333;border-radius:3px;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,.25);box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}kbd kbd{padding:0;font-size:100%;-webkit-box-shadow:none;box-shadow:none}pre{padding:9.5px;margin:0 0 10px;font-size:13px;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}.container,.container-fluid{margin-right:auto;margin-left:auto}pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;border-radius:0}.container,.container-fluid{padding-right:15px;padding-left:15px}.pre-scrollable{overflow-y:scroll}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.row{margin-right:-15px;margin-left:-15px}.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9{position:relative;min-height:1px;padding-right:15px;padding-left:15px}.col-xs-12{width:100%}.col-xs-11{width:91.66666667%}.col-xs-10{width:83.33333333%}.col-xs-9{width:75%}.col-xs-8{width:66.66666667%}.col-xs-7{width:58.33333333%}.col-xs-6{width:50%}.col-xs-5{width:41.66666667%}.col-xs-4{width:33.33333333%}.col-xs-3{width:25%}.col-xs-2{width:16.66666667%}.col-xs-1{width:8.33333333%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666667%}.col-xs-pull-10{right:83.33333333%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666667%}.col-xs-pull-7{right:58.33333333%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666667%}.col-xs-pull-4{right:33.33333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.66666667%}.col-xs-pull-1{right:8.33333333%}.col-xs-pull-0{right:auto}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666667%}.col-xs-push-10{left:83.33333333%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666667%}.col-xs-push-7{left:58.33333333%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666667%}.col-xs-push-4{left:33.33333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.66666667%}.col-xs-push-1{left:8.33333333%}.col-xs-push-0{left:auto}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666667%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-0{margin-left:0}@media (min-width:768px){.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0}}@media (min-width:992px){.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0}}@media (min-width:1200px){.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666667%}.col-lg-10{width:83.33333333%}.col-lg-9{width:75%}.col-lg-8{width:66.66666667%}.col-lg-7{width:58.33333333%}.col-lg-6{width:50%}.col-lg-5{width:41.66666667%}.col-lg-4{width:33.33333333%}.col-lg-3{width:25%}.col-lg-2{width:16.66666667%}.col-lg-1{width:8.33333333%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666667%}.col-lg-pull-10{right:83.33333333%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666667%}.col-lg-pull-7{right:58.33333333%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666667%}.col-lg-pull-4{right:33.33333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.66666667%}.col-lg-pull-1{right:8.33333333%}.col-lg-pull-0{right:auto}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666667%}.col-lg-push-10{left:83.33333333%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666667%}.col-lg-push-7{left:58.33333333%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666667%}.col-lg-push-4{left:33.33333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.66666667%}.col-lg-push-1{left:8.33333333%}.col-lg-push-0{left:auto}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666667%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-0{margin-left:0}}caption{padding-top:8px;padding-bottom:8px;color:#777}.table{width:100%;max-width:100%;margin-bottom:20px}.table>tbody>tr>td,.table>tbody>tr>th,.table>tfoot>tr>td,.table>tfoot>tr>th,.table>thead>tr>td,.table>thead>tr>th{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #ddd}.table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.table>caption+thead>tr:first-child>td,.table>caption+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>th,.table>thead:first-child>tr:first-child>td,.table>thead:first-child>tr:first-child>th{border-top:0}.table>tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed>tbody>tr>td,.table-condensed>tbody>tr>th,.table-condensed>tfoot>tr>td,.table-condensed>tfoot>tr>th,.table-condensed>thead>tr>td,.table-condensed>thead>tr>th{padding:5px}.table-bordered,.table-bordered>tbody>tr>td,.table-bordered>tbody>tr>th,.table-bordered>tfoot>tr>td,.table-bordered>tfoot>tr>th,.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border:1px solid #ddd}.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border-bottom-width:2px}.table-striped>tbody>tr:nth-of-type(odd){background-color:#f9f9f9}.table-hover>tbody>tr:hover,.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>thead>tr>td.active,.table>thead>tr>th.active{background-color:#f5f5f5}table col[class*=col-]{position:static;display:table-column;float:none}table td[class*=col-],table th[class*=col-]{position:static;display:table-cell;float:none}.table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr.active:hover>th,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover{background-color:#e8e8e8}.table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>thead>tr>td.success,.table>thead>tr>th.success{background-color:#dff0d8}.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr.success:hover>th,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover{background-color:#d0e9c6}.table>tbody>tr.info>td,.table>tbody>tr.info>th,.table>tbody>tr>td.info,.table>tbody>tr>th.info,.table>tfoot>tr.info>td,.table>tfoot>tr.info>th,.table>tfoot>tr>td.info,.table>tfoot>tr>th.info,.table>thead>tr.info>td,.table>thead>tr.info>th,.table>thead>tr>td.info,.table>thead>tr>th.info{background-color:#d9edf7}.table-hover>tbody>tr.info:hover>td,.table-hover>tbody>tr.info:hover>th,.table-hover>tbody>tr:hover>.info,.table-hover>tbody>tr>td.info:hover,.table-hover>tbody>tr>th.info:hover{background-color:#c4e3f3}.table>tbody>tr.warning>td,.table>tbody>tr.warning>th,.table>tbody>tr>td.warning,.table>tbody>tr>th.warning,.table>tfoot>tr.warning>td,.table>tfoot>tr.warning>th,.table>tfoot>tr>td.warning,.table>tfoot>tr>th.warning,.table>thead>tr.warning>td,.table>thead>tr.warning>th,.table>thead>tr>td.warning,.table>thead>tr>th.warning{background-color:#fcf8e3}.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr.warning:hover>th,.table-hover>tbody>tr:hover>.warning,.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover{background-color:#faf2cc}.table>tbody>tr.danger>td,.table>tbody>tr.danger>th,.table>tbody>tr>td.danger,.table>tbody>tr>th.danger,.table>tfoot>tr.danger>td,.table>tfoot>tr.danger>th,.table>tfoot>tr>td.danger,.table>tfoot>tr>th.danger,.table>thead>tr.danger>td,.table>thead>tr.danger>th,.table>thead>tr>td.danger,.table>thead>tr>th.danger{background-color:#f2dede}.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr.danger:hover>th,.table-hover>tbody>tr:hover>.danger,.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover{background-color:#ebcccc}.table-responsive{min-height:.01%;overflow-x:auto}@media screen and (max-width:767px){.table-responsive{width:100%;margin-bottom:15px;overflow-y:hidden;-ms-overflow-style:-ms-autohiding-scrollbar;border:1px solid #ddd}.table-responsive>.table{margin-bottom:0}.table-responsive>.table>tbody>tr>td,.table-responsive>.table>tbody>tr>th,.table-responsive>.table>tfoot>tr>td,.table-responsive>.table>tfoot>tr>th,.table-responsive>.table>thead>tr>td,.table-responsive>.table>thead>tr>th{white-space:nowrap}.table-responsive>.table-bordered{border:0}.table-responsive>.table-bordered>tbody>tr>td:first-child,.table-responsive>.table-bordered>tbody>tr>th:first-child,.table-responsive>.table-bordered>tfoot>tr>td:first-child,.table-responsive>.table-bordered>tfoot>tr>th:first-child,.table-responsive>.table-bordered>thead>tr>td:first-child,.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.table-responsive>.table-bordered>tbody>tr>td:last-child,.table-responsive>.table-bordered>tbody>tr>th:last-child,.table-responsive>.table-bordered>tfoot>tr>td:last-child,.table-responsive>.table-bordered>tfoot>tr>th:last-child,.table-responsive>.table-bordered>thead>tr>td:last-child,.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.table-responsive>.table-bordered>tbody>tr:last-child>td,.table-responsive>.table-bordered>tbody>tr:last-child>th,.table-responsive>.table-bordered>tfoot>tr:last-child>td,.table-responsive>.table-bordered>tfoot>tr:last-child>th{border-bottom:0}}fieldset,legend{padding:0;border:0}fieldset{min-width:0;margin:0}legend{width:100%;margin-bottom:20px;font-size:21px;line-height:inherit;border-bottom:1px solid #e5e5e5}label{display:inline-block;max-width:100%;margin-bottom:5px}input[type=search]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none}input[type=radio],input[type=checkbox]{margin:4px 0 0;margin-top:1px\\9;line-height:normal}.form-control,output{font-size:14px;line-height:1.42857143;color:#555;display:block}input[type=file]{display:block}input[type=range]{display:block;width:100%}select[multiple],select[size]{height:auto}input[type=file]:focus,input[type=radio]:focus,input[type=checkbox]:focus{outline:dotted thin;outline:-webkit-focus-ring-color auto 5px;outline-offset:-2px}output{padding-top:7px}.form-control{width:100%;height:34px;padding:6px 12px;background-color:#fff;border:1px solid #ccc;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;-o-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.form-control:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.form-control::-moz-placeholder{color:#999;opacity:1}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.has-success .checkbox,.has-success .checkbox-inline,.has-success .control-label,.has-success .form-control-feedback,.has-success .help-block,.has-success .radio,.has-success .radio-inline,.has-success.checkbox label,.has-success.checkbox-inline label,.has-success.radio label,.has-success.radio-inline label{color:#3c763d}.form-control::-ms-expand{background-color:transparent;border:0}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{background-color:#eee;opacity:1}.form-control[disabled],fieldset[disabled] .form-control{cursor:not-allowed}textarea.form-control{height:auto}@media screen and (-webkit-min-device-pixel-ratio:0){input[type=date].form-control,input[type=time].form-control,input[type=datetime-local].form-control,input[type=month].form-control{line-height:34px}.input-group-sm input[type=date],.input-group-sm input[type=time],.input-group-sm input[type=datetime-local],.input-group-sm input[type=month],input[type=date].input-sm,input[type=time].input-sm,input[type=datetime-local].input-sm,input[type=month].input-sm{line-height:30px}.input-group-lg input[type=date],.input-group-lg input[type=time],.input-group-lg input[type=datetime-local],.input-group-lg input[type=month],input[type=date].input-lg,input[type=time].input-lg,input[type=datetime-local].input-lg,input[type=month].input-lg{line-height:46px}}.form-group{margin-bottom:15px}.checkbox,.radio{position:relative;display:block;margin-top:10px;margin-bottom:10px}.checkbox label,.radio label{min-height:20px;padding-left:20px;margin-bottom:0;font-weight:400;cursor:pointer}.checkbox input[type=checkbox],.checkbox-inline input[type=checkbox],.radio input[type=radio],.radio-inline input[type=radio]{position:absolute;margin-top:4px\\9;margin-left:-20px}.checkbox+.checkbox,.radio+.radio{margin-top:-5px}.checkbox-inline,.radio-inline{position:relative;display:inline-block;padding-left:20px;margin-bottom:0;font-weight:400;vertical-align:middle;cursor:pointer}.checkbox-inline+.checkbox-inline,.radio-inline+.radio-inline{margin-top:0;margin-left:10px}.checkbox-inline.disabled,.checkbox.disabled label,.radio-inline.disabled,.radio.disabled label,fieldset[disabled] .checkbox label,fieldset[disabled] .checkbox-inline,fieldset[disabled] .radio label,fieldset[disabled] .radio-inline,fieldset[disabled] input[type=radio],fieldset[disabled] input[type=checkbox],input[type=radio].disabled,input[type=radio][disabled],input[type=checkbox].disabled,input[type=checkbox][disabled]{cursor:not-allowed}.form-control-static{min-height:34px;padding-top:7px;padding-bottom:7px;margin-bottom:0}.form-control-static.input-lg,.form-control-static.input-sm{padding-right:0;padding-left:0}.form-group-sm .form-control,.input-sm{padding:5px 10px;border-radius:3px;font-size:12px}.input-sm{height:30px;line-height:1.5}select.input-sm{height:30px;line-height:30px}select[multiple].input-sm,textarea.input-sm{height:auto}.form-group-sm .form-control{height:30px;line-height:1.5}.form-group-lg .form-control,.input-lg{border-radius:6px;padding:10px 16px;font-size:18px}.form-group-sm select.form-control{height:30px;line-height:30px}.form-group-sm select[multiple].form-control,.form-group-sm textarea.form-control{height:auto}.form-group-sm .form-control-static{height:30px;min-height:32px;padding:6px 10px;font-size:12px;line-height:1.5}.input-lg{height:46px;line-height:1.3333333}select.input-lg{height:46px;line-height:46px}select[multiple].input-lg,textarea.input-lg{height:auto}.form-group-lg .form-control{height:46px;line-height:1.3333333}.form-group-lg select.form-control{height:46px;line-height:46px}.form-group-lg select[multiple].form-control,.form-group-lg textarea.form-control{height:auto}.form-group-lg .form-control-static{height:46px;min-height:38px;padding:11px 16px;font-size:18px;line-height:1.3333333}.has-feedback{position:relative}.has-feedback .form-control{padding-right:42.5px}.form-control-feedback{position:absolute;top:0;right:0;z-index:2;display:block;width:34px;height:34px;line-height:34px;text-align:center;pointer-events:none}.collapsing,.dropdown,.dropup{position:relative}.form-group-lg .form-control+.form-control-feedback,.input-group-lg+.form-control-feedback,.input-lg+.form-control-feedback{width:46px;height:46px;line-height:46px}.form-group-sm .form-control+.form-control-feedback,.input-group-sm+.form-control-feedback,.input-sm+.form-control-feedback{width:30px;height:30px;line-height:30px}.has-success .form-control{border-color:#3c763d;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-success .form-control:focus{border-color:#2b542c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #67b168;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #67b168}.has-success .input-group-addon{color:#3c763d;background-color:#dff0d8;border-color:#3c763d}.has-warning .checkbox,.has-warning .checkbox-inline,.has-warning .control-label,.has-warning .form-control-feedback,.has-warning .help-block,.has-warning .radio,.has-warning .radio-inline,.has-warning.checkbox label,.has-warning.checkbox-inline label,.has-warning.radio label,.has-warning.radio-inline label{color:#8a6d3b}.has-warning .form-control{border-color:#8a6d3b;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-warning .form-control:focus{border-color:#66512c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #c0a16b;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #c0a16b}.has-warning .input-group-addon{color:#8a6d3b;background-color:#fcf8e3;border-color:#8a6d3b}.has-error .checkbox,.has-error .checkbox-inline,.has-error .control-label,.has-error .form-control-feedback,.has-error .help-block,.has-error .radio,.has-error .radio-inline,.has-error.checkbox label,.has-error.checkbox-inline label,.has-error.radio label,.has-error.radio-inline label{color:#a94442}.has-error .form-control{border-color:#a94442;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-error .form-control:focus{border-color:#843534;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483}.has-error .input-group-addon{color:#a94442;background-color:#f2dede;border-color:#a94442}.has-feedback label~.form-control-feedback{top:25px}.has-feedback label.sr-only~.form-control-feedback{top:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#737373}@media (min-width:768px){.form-inline .form-control-static,.form-inline .form-group{display:inline-block}.form-inline .control-label,.form-inline .form-group{margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}.form-inline .input-group{display:inline-table;vertical-align:middle}.form-inline .input-group .form-control,.form-inline .input-group .input-group-addon,.form-inline .input-group .input-group-btn{width:auto}.form-inline .input-group>.form-control{width:100%}.form-inline .checkbox,.form-inline .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.form-inline .checkbox label,.form-inline .radio label{padding-left:0}.form-inline .checkbox input[type=checkbox],.form-inline .radio input[type=radio]{position:relative;margin-left:0}.form-inline .has-feedback .form-control-feedback{top:0}.form-horizontal .control-label{padding-top:7px;margin-bottom:0;text-align:right}}.form-horizontal .checkbox,.form-horizontal .checkbox-inline,.form-horizontal .radio,.form-horizontal .radio-inline{padding-top:7px;margin-top:0;margin-bottom:0}.form-horizontal .checkbox,.form-horizontal .radio{min-height:27px}.form-horizontal .form-group{margin-right:-15px;margin-left:-15px}.form-horizontal .has-feedback .form-control-feedback{right:15px}@media (min-width:768px){.form-horizontal .form-group-lg .control-label{padding-top:11px;font-size:18px}.form-horizontal .form-group-sm .control-label{padding-top:6px;font-size:12px}}.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;border-radius:4px}.btn.active.focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn:active:focus,.btn:focus{outline:dotted thin;outline:-webkit-focus-ring-color auto 5px;outline-offset:-2px}.btn.focus,.btn:focus,.btn:hover{color:#333;text-decoration:none}.btn.active,.btn:active{outline:0;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,.125);box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{cursor:not-allowed;filter:alpha(opacity=65);-webkit-box-shadow:none;box-shadow:none;opacity:.65}a.btn.disabled,fieldset[disabled] a.btn{pointer-events:none}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default.focus,.btn-default:focus{color:#333;background-color:#e6e6e6;border-color:#8c8c8c}.btn-default.active,.btn-default:active,.btn-default:hover,.open>.dropdown-toggle.btn-default{color:#333;background-color:#e6e6e6;border-color:#adadad}.btn-default.active.focus,.btn-default.active:focus,.btn-default.active:hover,.btn-default:active.focus,.btn-default:active:focus,.btn-default:active:hover,.open>.dropdown-toggle.btn-default.focus,.open>.dropdown-toggle.btn-default:focus,.open>.dropdown-toggle.btn-default:hover{color:#333;background-color:#d4d4d4;border-color:#8c8c8c}.btn-default.disabled.focus,.btn-default.disabled:focus,.btn-default.disabled:hover,.btn-default[disabled].focus,.btn-default[disabled]:focus,.btn-default[disabled]:hover,fieldset[disabled] .btn-default.focus,fieldset[disabled] .btn-default:focus,fieldset[disabled] .btn-default:hover{background-color:#fff;border-color:#ccc}.btn-default .badge{color:#fff;background-color:#333}.btn-primary{color:#fff;background-color:#337ab7;border-color:#2e6da4}.btn-primary.focus,.btn-primary:focus{color:#fff;background-color:#286090;border-color:#122b40}.btn-primary.active,.btn-primary:active,.btn-primary:hover,.open>.dropdown-toggle.btn-primary{color:#fff;background-color:#286090;border-color:#204d74}.btn-primary.active.focus,.btn-primary.active:focus,.btn-primary.active:hover,.btn-primary:active.focus,.btn-primary:active:focus,.btn-primary:active:hover,.open>.dropdown-toggle.btn-primary.focus,.open>.dropdown-toggle.btn-primary:focus,.open>.dropdown-toggle.btn-primary:hover{color:#fff;background-color:#204d74;border-color:#122b40}.btn-primary.disabled.focus,.btn-primary.disabled:focus,.btn-primary.disabled:hover,.btn-primary[disabled].focus,.btn-primary[disabled]:focus,.btn-primary[disabled]:hover,fieldset[disabled] .btn-primary.focus,fieldset[disabled] .btn-primary:focus,fieldset[disabled] .btn-primary:hover{background-color:#337ab7;border-color:#2e6da4}.btn-primary .badge{color:#337ab7;background-color:#fff}.btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.btn-success.focus,.btn-success:focus{color:#fff;background-color:#449d44;border-color:#255625}.btn-success.active,.btn-success:active,.btn-success:hover,.open>.dropdown-toggle.btn-success{color:#fff;background-color:#449d44;border-color:#398439}.btn-success.active.focus,.btn-success.active:focus,.btn-success.active:hover,.btn-success:active.focus,.btn-success:active:focus,.btn-success:active:hover,.open>.dropdown-toggle.btn-success.focus,.open>.dropdown-toggle.btn-success:focus,.open>.dropdown-toggle.btn-success:hover{color:#fff;background-color:#398439;border-color:#255625}.btn-success.active,.btn-success:active,.open>.dropdown-toggle.btn-success{background-image:none}.btn-success.disabled.focus,.btn-success.disabled:focus,.btn-success.disabled:hover,.btn-success[disabled].focus,.btn-success[disabled]:focus,.btn-success[disabled]:hover,fieldset[disabled] .btn-success.focus,fieldset[disabled] .btn-success:focus,fieldset[disabled] .btn-success:hover{background-color:#5cb85c;border-color:#4cae4c}.btn-success .badge{color:#5cb85c;background-color:#fff}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info.focus,.btn-info:focus{color:#fff;background-color:#31b0d5;border-color:#1b6d85}.btn-info.active,.btn-info:active,.btn-info:hover,.open>.dropdown-toggle.btn-info{color:#fff;background-color:#31b0d5;border-color:#269abc}.btn-info.active.focus,.btn-info.active:focus,.btn-info.active:hover,.btn-info:active.focus,.btn-info:active:focus,.btn-info:active:hover,.open>.dropdown-toggle.btn-info.focus,.open>.dropdown-toggle.btn-info:focus,.open>.dropdown-toggle.btn-info:hover{color:#fff;background-color:#269abc;border-color:#1b6d85}.btn-info.disabled.focus,.btn-info.disabled:focus,.btn-info.disabled:hover,.btn-info[disabled].focus,.btn-info[disabled]:focus,.btn-info[disabled]:hover,fieldset[disabled] .btn-info.focus,fieldset[disabled] .btn-info:focus,fieldset[disabled] .btn-info:hover{background-color:#5bc0de;border-color:#46b8da}.btn-info .badge{color:#5bc0de;background-color:#fff}.btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.btn-warning.focus,.btn-warning:focus{color:#fff;background-color:#ec971f;border-color:#985f0d}.btn-warning.active,.btn-warning:active,.btn-warning:hover,.open>.dropdown-toggle.btn-warning{color:#fff;background-color:#ec971f;border-color:#d58512}.btn-warning.active.focus,.btn-warning.active:focus,.btn-warning.active:hover,.btn-warning:active.focus,.btn-warning:active:focus,.btn-warning:active:hover,.open>.dropdown-toggle.btn-warning.focus,.open>.dropdown-toggle.btn-warning:focus,.open>.dropdown-toggle.btn-warning:hover{color:#fff;background-color:#d58512;border-color:#985f0d}.btn-warning.disabled.focus,.btn-warning.disabled:focus,.btn-warning.disabled:hover,.btn-warning[disabled].focus,.btn-warning[disabled]:focus,.btn-warning[disabled]:hover,fieldset[disabled] .btn-warning.focus,fieldset[disabled] .btn-warning:focus,fieldset[disabled] .btn-warning:hover{background-color:#f0ad4e;border-color:#eea236}.btn-warning .badge{color:#f0ad4e;background-color:#fff}.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger.focus,.btn-danger:focus{color:#fff;background-color:#c9302c;border-color:#761c19}.btn-danger.active,.btn-danger:active,.btn-danger:hover,.open>.dropdown-toggle.btn-danger{color:#fff;background-color:#c9302c;border-color:#ac2925}.btn-danger.active.focus,.btn-danger.active:focus,.btn-danger.active:hover,.btn-danger:active.focus,.btn-danger:active:focus,.btn-danger:active:hover,.open>.dropdown-toggle.btn-danger.focus,.open>.dropdown-toggle.btn-danger:focus,.open>.dropdown-toggle.btn-danger:hover{color:#fff;background-color:#ac2925;border-color:#761c19}.btn-danger.disabled.focus,.btn-danger.disabled:focus,.btn-danger.disabled:hover,.btn-danger[disabled].focus,.btn-danger[disabled]:focus,.btn-danger[disabled]:hover,fieldset[disabled] .btn-danger.focus,fieldset[disabled] .btn-danger:focus,fieldset[disabled] .btn-danger:hover{background-color:#d9534f;border-color:#d43f3a}.btn-danger .badge{color:#d9534f;background-color:#fff}.btn-link{font-weight:400;color:#337ab7;border-radius:0}.btn-link,.btn-link.active,.btn-link:active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;-webkit-box-shadow:none;box-shadow:none}.btn-link,.btn-link:active,.btn-link:focus,.btn-link:hover{border-color:transparent}.btn-link:focus,.btn-link:hover{color:#23527c;text-decoration:underline;background-color:transparent}.btn-link[disabled]:focus,.btn-link[disabled]:hover,fieldset[disabled] .btn-link:focus,fieldset[disabled] .btn-link:hover{color:#777;text-decoration:none}.btn-group-lg>.btn,.btn-lg{padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:6px}.btn-group-sm>.btn,.btn-sm{padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.btn-group-xs>.btn,.btn-xs{padding:1px 5px;font-size:12px;line-height:1.5;border-radius:3px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:5px}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.fade{opacity:0;-webkit-transition:opacity .15s linear;-o-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{display:none}.collapse.in{display:block}tr.collapse.in{display:table-row}tbody.collapse.in{display:table-row-group}.collapsing{height:0;overflow:hidden;-webkit-transition-timing-function:ease;-o-transition-timing-function:ease;transition-timing-function:ease;-webkit-transition-duration:.35s;-o-transition-duration:.35s;transition-duration:.35s;-webkit-transition-property:height,visibility;-o-transition-property:height,visibility;transition-property:height,visibility}.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px dashed;border-top:4px solid\\9;border-right:4px solid transparent;border-left:4px solid transparent}.dropdown-toggle:focus{outline:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;min-width:160px;padding:5px 0;margin:2px 0 0;font-size:14px;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:4px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px rgba(0,0,0,.175)}.dropdown-menu-right,.dropdown-menu.pull-right{right:0;left:auto}.dropdown-header,.dropdown-menu>li>a{display:block;padding:3px 20px;line-height:1.42857143;white-space:nowrap}.btn-group>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group>.btn-group:first-child:not(:last-child)>.dropdown-toggle,.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:last-child:not(:first-child)>.btn:first-child,.btn-group>.btn:last-child:not(:first-child),.btn-group>.dropdown-toggle:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn:not(:first-child):not(:last-child),.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn,.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}.dropdown-menu .divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.dropdown-menu>li>a{clear:both;font-weight:400;color:#333}.dropdown-menu>li>a:focus,.dropdown-menu>li>a:hover{color:#262626;text-decoration:none;background-color:#f5f5f5}.dropdown-menu>.active>a,.dropdown-menu>.active>a:focus,.dropdown-menu>.active>a:hover{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{color:#777}.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{text-decoration:none;cursor:not-allowed;background-color:transparent;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.open>.dropdown-menu{display:block}.open>a{outline:0}.dropdown-menu-left{right:auto;left:0}.dropdown-header{font-size:12px;color:#777}.dropdown-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:990}.nav-justified>.dropdown .dropdown-menu,.nav-tabs.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{content:"";border-top:0;border-bottom:4px dashed;border-bottom:4px solid\\9}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:2px}@media (min-width:768px){.navbar-right .dropdown-menu{right:0;left:auto}.navbar-right .dropdown-menu-left{right:auto;left:0}}.btn-group,.btn-group-vertical{position:relative;display:inline-block;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;float:left}.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:2}.btn-group .btn+.btn,.btn-group .btn+.btn-group,.btn-group .btn-group+.btn,.btn-group .btn-group+.btn-group{margin-left:-1px}.btn-toolbar{margin-left:-5px}.btn-toolbar>.btn,.btn-toolbar>.btn-group,.btn-toolbar>.input-group{margin-left:5px}.btn .caret,.btn-group>.btn:first-child{margin-left:0}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group>.btn+.dropdown-toggle{padding-right:8px;padding-left:8px}.btn-group>.btn-lg+.dropdown-toggle{padding-right:12px;padding-left:12px}.btn-group.open .dropdown-toggle{-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,.125);box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn-group.open .dropdown-toggle.btn-link{-webkit-box-shadow:none;box-shadow:none}.btn-lg .caret{border-width:5px 5px 0}.dropup .btn-lg .caret{border-width:0 5px 5px}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group,.btn-group-vertical>.btn-group>.btn{display:block;float:none;width:100%;max-width:100%}.btn-group-vertical>.btn-group>.btn{float:none}.btn-group-vertical>.btn+.btn,.btn-group-vertical>.btn+.btn-group,.btn-group-vertical>.btn-group+.btn,.btn-group-vertical>.btn-group+.btn-group{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:first-child:not(:last-child){border-radius:4px 4px 0 0}.btn-group-vertical>.btn:last-child:not(:first-child){border-radius:0 0 4px 4px}.btn-group-vertical>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group-vertical>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group-vertical>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:last-child:not(:first-child)>.btn:first-child{border-top-left-radius:0;border-top-right-radius:0}.btn-group-justified{display:table;width:100%;table-layout:fixed;border-collapse:separate}.btn-group-justified>.btn,.btn-group-justified>.btn-group{display:table-cell;float:none;width:1%}.btn-group-justified>.btn-group .btn{width:100%}.btn-group-justified>.btn-group .dropdown-menu{left:auto}[data-toggle=buttons]>.btn input[type=radio],[data-toggle=buttons]>.btn input[type=checkbox],[data-toggle=buttons]>.btn-group>.btn input[type=radio],[data-toggle=buttons]>.btn-group>.btn input[type=checkbox]{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.input-group{position:relative;display:table;border-collapse:separate}.input-group[class*=col-]{float:none;padding-right:0;padding-left:0}.input-group .form-control{position:relative;z-index:2;float:left;width:100%;margin-bottom:0}.input-group .form-control:focus{z-index:3}.input-group-lg>.form-control,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.btn{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:6px}select.input-group-lg>.form-control,select.input-group-lg>.input-group-addon,select.input-group-lg>.input-group-btn>.btn{height:46px;line-height:46px}select[multiple].input-group-lg>.form-control,select[multiple].input-group-lg>.input-group-addon,select[multiple].input-group-lg>.input-group-btn>.btn,textarea.input-group-lg>.form-control,textarea.input-group-lg>.input-group-addon,textarea.input-group-lg>.input-group-btn>.btn{height:auto}.input-group-sm>.form-control,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.btn{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}select.input-group-sm>.form-control,select.input-group-sm>.input-group-addon,select.input-group-sm>.input-group-btn>.btn{height:30px;line-height:30px}select[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.input-group-addon,select[multiple].input-group-sm>.input-group-btn>.btn,textarea.input-group-sm>.form-control,textarea.input-group-sm>.input-group-addon,textarea.input-group-sm>.input-group-btn>.btn{height:auto}.input-group .form-control,.input-group-addon,.input-group-btn{display:table-cell}.nav>li,.nav>li>a{display:block;position:relative}.input-group .form-control:not(:first-child):not(:last-child),.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child){border-radius:0}.input-group-addon,.input-group-btn{width:1%;white-space:nowrap;vertical-align:middle}.input-group-addon{padding:6px 12px;font-size:14px;font-weight:400;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:4px}.input-group-addon.input-sm{padding:5px 10px;font-size:12px;border-radius:3px}.input-group-addon.input-lg{padding:10px 16px;font-size:18px;border-radius:6px}.input-group-addon input[type=radio],.input-group-addon input[type=checkbox]{margin-top:0}.input-group .form-control:first-child,.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn-group:not(:last-child)>.btn,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group .form-control:last-child,.input-group-addon:last-child,.input-group-btn:first-child>.btn-group:not(:first-child)>.btn,.input-group-btn:first-child>.btn:not(:first-child),.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group>.btn,.input-group-btn:last-child>.dropdown-toggle{border-top-left-radius:0;border-bottom-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{position:relative;font-size:0;white-space:nowrap}.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-1px}.input-group-btn>.btn:active,.input-group-btn>.btn:focus,.input-group-btn>.btn:hover{z-index:2}.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group{margin-right:-1px}.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group{z-index:2;margin-left:-1px}.nav{padding-left:0;margin-bottom:0;list-style:none}.nav>li>a{padding:10px 15px}.nav>li>a:focus,.nav>li>a:hover{text-decoration:none;background-color:#eee}.nav>li.disabled>a{color:#777}.nav>li.disabled>a:focus,.nav>li.disabled>a:hover{color:#777;text-decoration:none;cursor:not-allowed;background-color:transparent}.nav .open>a,.nav .open>a:focus,.nav .open>a:hover{background-color:#eee;border-color:#337ab7}.nav .nav-divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.nav>li>a>img{max-width:none}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{float:left;margin-bottom:-1px}.nav-tabs>li>a{margin-right:2px;line-height:1.42857143;border:1px solid transparent;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover{border-color:#eee #eee #ddd}.nav-tabs>li.active>a,.nav-tabs>li.active>a:focus,.nav-tabs>li.active>a:hover{color:#555;cursor:default;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent}.nav-tabs.nav-justified{width:100%;border-bottom:0}.nav-tabs.nav-justified>li{float:none}.nav-tabs.nav-justified>li>a{margin-bottom:5px;text-align:center;margin-right:0;border-radius:4px}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-tabs.nav-justified>li{display:table-cell;width:1%}.nav-tabs.nav-justified>li>a{margin-bottom:0;border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border-bottom-color:#fff}}.nav-pills>li{float:left}.nav-justified>li,.nav-stacked>li{float:none}.nav-pills>li>a{border-radius:4px}.nav-pills>li+li{margin-left:2px}.nav-pills>li.active>a,.nav-pills>li.active>a:focus,.nav-pills>li.active>a:hover{color:#fff;background-color:#337ab7}.nav-stacked>li+li{margin-top:2px;margin-left:0}.nav-justified{width:100%}.nav-justified>li>a{margin-bottom:5px;text-align:center}.nav-tabs-justified{border-bottom:0}.nav-tabs-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-justified>li{display:table-cell;width:1%}.nav-justified>li>a{margin-bottom:0}.nav-tabs-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover{border-bottom-color:#fff}}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-left-radius:0;border-top-right-radius:0}.navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}.navbar-collapse{padding-right:15px;padding-left:15px;overflow-x:visible;-webkit-overflow-scrolling:touch;border-top:1px solid transparent;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.1);box-shadow:inset 0 1px 0 rgba(255,255,255,.1)}.navbar-collapse.in{overflow-y:auto}@media (min-width:768px){.navbar{border-radius:4px}.navbar-header{float:left}.navbar-collapse{width:auto;border-top:0;-webkit-box-shadow:none;box-shadow:none}.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important}.navbar-collapse.in{overflow-y:visible}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.navbar-static-top .navbar-collapse{padding-right:0;padding-left:0}}.carousel-inner,.embed-responsive,.modal,.modal-open,.progress{overflow:hidden}@media (max-device-width:480px) and (orientation:landscape){.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:200px}}.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:-15px;margin-left:-15px}.navbar-static-top{z-index:1000;border-width:0 0 1px}.navbar-fixed-bottom,.navbar-fixed-top{position:fixed;right:0;left:0;z-index:1030}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;margin-bottom:0;border-width:1px 0 0}.navbar-brand{float:left;height:50px;padding:15px;font-size:18px;line-height:20px}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-brand>img{display:block}@media (min-width:768px){.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:0;margin-left:0}.navbar-fixed-bottom,.navbar-fixed-top,.navbar-static-top{border-radius:0}.navbar>.container .navbar-brand,.navbar>.container-fluid .navbar-brand{margin-left:-15px}}.navbar-toggle{position:relative;float:right;padding:9px 10px;margin-top:8px;margin-right:15px;margin-bottom:8px;background-color:transparent;border:1px solid transparent;border-radius:4px}.navbar-toggle:focus{outline:0}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}@media (max-width:767px){.navbar-nav .open .dropdown-menu{position:static;float:none;width:auto;margin-top:0;background-color:transparent;border:0;-webkit-box-shadow:none;box-shadow:none}.navbar-nav .open .dropdown-menu .dropdown-header,.navbar-nav .open .dropdown-menu>li>a{padding:5px 15px 5px 25px}.navbar-nav .open .dropdown-menu>li>a{line-height:20px}.navbar-nav .open .dropdown-menu>li>a:focus,.navbar-nav .open .dropdown-menu>li>a:hover{background-image:none}}.progress-bar-striped,.progress-striped .progress-bar,.progress-striped .progress-bar-success{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}@media (min-width:768px){.navbar-toggle{display:none}.navbar-nav{float:left;margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}}.navbar-form{padding:10px 15px;border-top:1px solid transparent;border-bottom:1px solid transparent;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.1);box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.1);margin:8px -15px}@media (min-width:768px){.navbar-form .form-control-static,.navbar-form .form-group{display:inline-block}.navbar-form .control-label,.navbar-form .form-group{margin-bottom:0;vertical-align:middle}.navbar-form .form-control{display:inline-block;width:auto;vertical-align:middle}.navbar-form .input-group{display:inline-table;vertical-align:middle}.navbar-form .input-group .form-control,.navbar-form .input-group .input-group-addon,.navbar-form .input-group .input-group-btn{width:auto}.navbar-form .input-group>.form-control{width:100%}.navbar-form .checkbox,.navbar-form .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.navbar-form .checkbox label,.navbar-form .radio label{padding-left:0}.navbar-form .checkbox input[type=checkbox],.navbar-form .radio input[type=radio]{position:relative;margin-left:0}.navbar-form .has-feedback .form-control-feedback{top:0}.navbar-form{width:auto;padding-top:0;padding-bottom:0;margin-right:0;margin-left:0;border:0;-webkit-box-shadow:none;box-shadow:none}}.breadcrumb>li,.pagination{display:inline-block}.btn .badge,.btn .label{top:-1px;position:relative}@media (max-width:767px){.navbar-form .form-group{margin-bottom:5px}.navbar-form .form-group:last-child{margin-bottom:0}}.navbar-nav>li>.dropdown-menu{margin-top:0;border-top-left-radius:0;border-top-right-radius:0}.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{margin-bottom:0;border-radius:4px 4px 0 0}.navbar-btn{margin-top:8px;margin-bottom:8px}.navbar-btn.btn-sm{margin-top:10px;margin-bottom:10px}.navbar-btn.btn-xs{margin-top:14px;margin-bottom:14px}.navbar-text{margin-top:15px;margin-bottom:15px}@media (min-width:768px){.navbar-text{float:left;margin-right:15px;margin-left:15px}.navbar-left{float:left!important}.navbar-right{float:right!important;margin-right:-15px}.navbar-right~.navbar-right{margin-right:0}}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-brand:focus,.navbar-default .navbar-brand:hover{color:#5e5e5e;background-color:transparent}.navbar-default .navbar-nav>li>a,.navbar-default .navbar-text{color:#777}.navbar-default .navbar-nav>li>a:focus,.navbar-default .navbar-nav>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav>.active>a,.navbar-default .navbar-nav>.active>a:focus,.navbar-default .navbar-nav>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav>.disabled>a,.navbar-default .navbar-nav>.disabled>a:focus,.navbar-default .navbar-nav>.disabled>a:hover{color:#ccc;background-color:transparent}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#e7e7e7}.navbar-default .navbar-nav>.open>a,.navbar-default .navbar-nav>.open>a:focus,.navbar-default .navbar-nav>.open>a:hover{color:#555;background-color:#e7e7e7}@media (max-width:767px){.navbar-default .navbar-nav .open .dropdown-menu>li>a{color:#777}.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.active>a,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#ccc;background-color:transparent}}.navbar-default .navbar-link{color:#777}.navbar-default .navbar-link:hover{color:#333}.navbar-default .btn-link{color:#777}.navbar-default .btn-link:focus,.navbar-default .btn-link:hover{color:#333}.navbar-default .btn-link[disabled]:focus,.navbar-default .btn-link[disabled]:hover,fieldset[disabled] .navbar-default .btn-link:focus,fieldset[disabled] .navbar-default .btn-link:hover{color:#ccc}.navbar-inverse{background-color:#222;border-color:#080808}.navbar-inverse .navbar-brand{color:#9d9d9d}.navbar-inverse .navbar-brand:focus,.navbar-inverse .navbar-brand:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>li>a,.navbar-inverse .navbar-text{color:#9d9d9d}.navbar-inverse .navbar-nav>li>a:focus,.navbar-inverse .navbar-nav>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>.active>a,.navbar-inverse .navbar-nav>.active>a:focus,.navbar-inverse .navbar-nav>.active>a:hover{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav>.disabled>a,.navbar-inverse .navbar-nav>.disabled>a:focus,.navbar-inverse .navbar-nav>.disabled>a:hover{color:#444;background-color:transparent}.navbar-inverse .navbar-toggle{border-color:#333}.navbar-inverse .navbar-toggle:focus,.navbar-inverse .navbar-toggle:hover{background-color:#333}.navbar-inverse .navbar-toggle .icon-bar{background-color:#fff}.navbar-inverse .navbar-collapse,.navbar-inverse .navbar-form{border-color:#101010}.navbar-inverse .navbar-nav>.open>a,.navbar-inverse .navbar-nav>.open>a:focus,.navbar-inverse .navbar-nav>.open>a:hover{color:#fff;background-color:#080808}@media (max-width:767px){.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header{border-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu .divider{background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a{color:#9d9d9d}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#444;background-color:transparent}}.navbar-inverse .navbar-link{color:#9d9d9d}.navbar-inverse .navbar-link:hover{color:#fff}.navbar-inverse .btn-link{color:#9d9d9d}.navbar-inverse .btn-link:focus,.navbar-inverse .btn-link:hover{color:#fff}.navbar-inverse .btn-link[disabled]:focus,.navbar-inverse .btn-link[disabled]:hover,fieldset[disabled] .navbar-inverse .btn-link:focus,fieldset[disabled] .navbar-inverse .btn-link:hover{color:#444}.breadcrumb{padding:8px 15px;margin-bottom:20px;list-style:none;background-color:#f5f5f5;border-radius:4px}.breadcrumb>li+li:before{padding:0 5px;color:#ccc;content:"/\\00a0"}.breadcrumb>.active{color:#777}.pagination{padding-left:0;margin:20px 0;border-radius:4px}.pager li,.pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;margin-left:-1px;line-height:1.42857143;color:#337ab7;text-decoration:none;background-color:#fff;border:1px solid #ddd}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-top-right-radius:4px;border-bottom-right-radius:4px}.pagination>li>a:focus,.pagination>li>a:hover,.pagination>li>span:focus,.pagination>li>span:hover{z-index:2;color:#23527c;background-color:#eee;border-color:#ddd}.pagination>.active>a,.pagination>.active>a:focus,.pagination>.active>a:hover,.pagination>.active>span,.pagination>.active>span:focus,.pagination>.active>span:hover{z-index:3;color:#fff;cursor:default;background-color:#337ab7;border-color:#337ab7}.pagination>.disabled>a,.pagination>.disabled>a:focus,.pagination>.disabled>a:hover,.pagination>.disabled>span,.pagination>.disabled>span:focus,.pagination>.disabled>span:hover{color:#777;cursor:not-allowed;background-color:#fff;border-color:#ddd}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;font-size:18px;line-height:1.3333333}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-top-left-radius:6px;border-bottom-left-radius:6px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-top-right-radius:6px;border-bottom-right-radius:6px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;font-size:12px;line-height:1.5}.badge,.label{font-weight:700;line-height:1;white-space:nowrap;text-align:center}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-top-left-radius:3px;border-bottom-left-radius:3px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-top-right-radius:3px;border-bottom-right-radius:3px}.pager{padding-left:0;margin:20px 0;text-align:center;list-style:none}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;border-radius:15px}.pager li>a:focus,.pager li>a:hover{text-decoration:none;background-color:#eee}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:focus,.pager .disabled>a:hover,.pager .disabled>span{color:#777;cursor:not-allowed;background-color:#fff}.label{display:inline;padding:.2em .6em .3em;font-size:75%;color:#fff;vertical-align:baseline;border-radius:.25em}a.label:focus,a.label:hover{color:#fff;text-decoration:none;cursor:pointer}.label:empty{display:none}.label-default{background-color:#777}.label-default[href]:focus,.label-default[href]:hover{background-color:#5e5e5e}.label-primary{background-color:#337ab7}.label-primary[href]:focus,.label-primary[href]:hover{background-color:#286090}.label-success{background-color:#5cb85c}.label-success[href]:focus,.label-success[href]:hover{background-color:#449d44}.label-info{background-color:#5bc0de}.label-info[href]:focus,.label-info[href]:hover{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:focus,.label-warning[href]:hover{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:focus,.label-danger[href]:hover{background-color:#c9302c}.badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;color:#fff;vertical-align:middle;background-color:#777;border-radius:10px}.badge:empty{display:none}.media-object,.thumbnail{display:block}.btn-group-xs>.btn .badge,.btn-xs .badge{top:0;padding:1px 5px}a.badge:focus,a.badge:hover{color:#fff;text-decoration:none;cursor:pointer}.list-group-item.active>.badge,.nav-pills>.active>a>.badge{color:#337ab7;background-color:#fff}.jumbotron,.jumbotron .h1,.jumbotron h1{color:inherit}.list-group-item>.badge{float:right}.list-group-item>.badge+.badge{margin-right:5px}.nav-pills>li>a>.badge{margin-left:3px}.jumbotron{padding-top:30px;padding-bottom:30px;margin-bottom:30px;background-color:#eee}.jumbotron p{margin-bottom:15px;font-size:21px;font-weight:200}.alert,.thumbnail{margin-bottom:20px}.alert .alert-link,.close{font-weight:700}.jumbotron>hr{border-top-color:#d5d5d5}.container .jumbotron,.container-fluid .jumbotron{padding-right:15px;padding-left:15px;border-radius:6px}.jumbotron .container{max-width:100%}@media screen and (min-width:768px){.jumbotron{padding-top:48px;padding-bottom:48px}.container .jumbotron,.container-fluid .jumbotron{padding-right:60px;padding-left:60px}.jumbotron .h1,.jumbotron h1{font-size:63px}}.thumbnail{padding:4px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:border .2s ease-in-out;-o-transition:border .2s ease-in-out;transition:border .2s ease-in-out}.thumbnail a>img,.thumbnail>img{margin-right:auto;margin-left:auto}a.thumbnail.active,a.thumbnail:focus,a.thumbnail:hover{border-color:#337ab7}.thumbnail .caption{padding:9px;color:#333}.alert{padding:15px;border:1px solid transparent;border-radius:4px}.alert h4{margin-top:0;color:inherit}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable,.alert-dismissible{padding-right:35px}.alert-dismissable .close,.alert-dismissible .close{position:relative;top:-2px;right:-21px;color:inherit}.modal,.modal-backdrop{top:0;right:0;bottom:0;left:0}.alert-success{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#2b542c}.alert-info{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#245269}.alert-warning{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#66512c}.alert-danger{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#843534}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-o-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.progress{height:20px;margin-bottom:20px;background-color:#f5f5f5;border-radius:4px;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.1);box-shadow:inset 0 1px 2px rgba(0,0,0,.1)}.progress-bar{float:left;width:0;height:100%;font-size:12px;line-height:20px;color:#fff;text-align:center;background-color:#337ab7;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-webkit-transition:width .6s ease;-o-transition:width .6s ease;transition:width .6s ease}.progress-bar-striped,.progress-striped .progress-bar{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);-webkit-background-size:40px 40px;background-size:40px 40px}.progress-bar.active,.progress.active .progress-bar{-webkit-animation:progress-bar-stripes 2s linear infinite;-o-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}.progress-bar-success{background-color:#5cb85c}.progress-striped .progress-bar-success{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-striped .progress-bar-info,.progress-striped .progress-bar-warning{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-bar-info{background-color:#5bc0de}.progress-striped .progress-bar-info{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-bar-warning{background-color:#f0ad4e}.progress-striped .progress-bar-warning{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-bar-danger{background-color:#d9534f}.progress-striped .progress-bar-danger{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.media{margin-top:15px}.media:first-child{margin-top:0}.media,.media-body{overflow:hidden;zoom:1}.media-body{width:10000px}.media-object.img-thumbnail{max-width:none}.media-right,.media>.pull-right{padding-left:10px}.media-left,.media>.pull-left{padding-right:10px}.media-body,.media-left,.media-right{display:table-cell;vertical-align:top}.media-middle{vertical-align:middle}.media-bottom{vertical-align:bottom}.media-heading{margin-top:0;margin-bottom:5px}.media-list{padding-left:0;list-style:none}.list-group{padding-left:0;margin-bottom:20px}.list-group-item{position:relative;display:block;padding:10px 15px;margin-bottom:-1px;background-color:#fff;border:1px solid #ddd}.list-group-item:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.list-group-item:last-child{margin-bottom:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}a.list-group-item,button.list-group-item{color:#555}a.list-group-item .list-group-item-heading,button.list-group-item .list-group-item-heading{color:#333}a.list-group-item:focus,a.list-group-item:hover,button.list-group-item:focus,button.list-group-item:hover{color:#555;text-decoration:none;background-color:#f5f5f5}button.list-group-item{width:100%;text-align:left}.list-group-item.disabled,.list-group-item.disabled:focus,.list-group-item.disabled:hover{color:#777;cursor:not-allowed;background-color:#eee}.list-group-item.disabled .list-group-item-heading,.list-group-item.disabled:focus .list-group-item-heading,.list-group-item.disabled:hover .list-group-item-heading{color:inherit}.list-group-item.disabled .list-group-item-text,.list-group-item.disabled:focus .list-group-item-text,.list-group-item.disabled:hover .list-group-item-text{color:#777}.list-group-item.active,.list-group-item.active:focus,.list-group-item.active:hover{z-index:2;color:#fff;background-color:#337ab7;border-color:#337ab7}.list-group-item.active .list-group-item-heading,.list-group-item.active .list-group-item-heading>.small,.list-group-item.active .list-group-item-heading>small,.list-group-item.active:focus .list-group-item-heading,.list-group-item.active:focus .list-group-item-heading>.small,.list-group-item.active:focus .list-group-item-heading>small,.list-group-item.active:hover .list-group-item-heading,.list-group-item.active:hover .list-group-item-heading>.small,.list-group-item.active:hover .list-group-item-heading>small{color:inherit}.list-group-item.active .list-group-item-text,.list-group-item.active:focus .list-group-item-text,.list-group-item.active:hover .list-group-item-text{color:#c7ddef}.list-group-item-success{color:#3c763d;background-color:#dff0d8}a.list-group-item-success,button.list-group-item-success{color:#3c763d}a.list-group-item-success .list-group-item-heading,button.list-group-item-success .list-group-item-heading{color:inherit}a.list-group-item-success:focus,a.list-group-item-success:hover,button.list-group-item-success:focus,button.list-group-item-success:hover{color:#3c763d;background-color:#d0e9c6}a.list-group-item-success.active,a.list-group-item-success.active:focus,a.list-group-item-success.active:hover,button.list-group-item-success.active,button.list-group-item-success.active:focus,button.list-group-item-success.active:hover{color:#fff;background-color:#3c763d;border-color:#3c763d}.list-group-item-info{color:#31708f;background-color:#d9edf7}a.list-group-item-info,button.list-group-item-info{color:#31708f}a.list-group-item-info .list-group-item-heading,button.list-group-item-info .list-group-item-heading{color:inherit}a.list-group-item-info:focus,a.list-group-item-info:hover,button.list-group-item-info:focus,button.list-group-item-info:hover{color:#31708f;background-color:#c4e3f3}a.list-group-item-info.active,a.list-group-item-info.active:focus,a.list-group-item-info.active:hover,button.list-group-item-info.active,button.list-group-item-info.active:focus,button.list-group-item-info.active:hover{color:#fff;background-color:#31708f;border-color:#31708f}.list-group-item-warning{color:#8a6d3b;background-color:#fcf8e3}a.list-group-item-warning,button.list-group-item-warning{color:#8a6d3b}a.list-group-item-warning .list-group-item-heading,button.list-group-item-warning .list-group-item-heading{color:inherit}a.list-group-item-warning:focus,a.list-group-item-warning:hover,button.list-group-item-warning:focus,button.list-group-item-warning:hover{color:#8a6d3b;background-color:#faf2cc}a.list-group-item-warning.active,a.list-group-item-warning.active:focus,a.list-group-item-warning.active:hover,button.list-group-item-warning.active,button.list-group-item-warning.active:focus,button.list-group-item-warning.active:hover{color:#fff;background-color:#8a6d3b;border-color:#8a6d3b}.list-group-item-danger{color:#a94442;background-color:#f2dede}a.list-group-item-danger,button.list-group-item-danger{color:#a94442}a.list-group-item-danger .list-group-item-heading,button.list-group-item-danger .list-group-item-heading{color:inherit}a.list-group-item-danger:focus,a.list-group-item-danger:hover,button.list-group-item-danger:focus,button.list-group-item-danger:hover{color:#a94442;background-color:#ebcccc}a.list-group-item-danger.active,a.list-group-item-danger.active:focus,a.list-group-item-danger.active:hover,button.list-group-item-danger.active,button.list-group-item-danger.active:focus,button.list-group-item-danger.active:hover{color:#fff;background-color:#a94442;border-color:#a94442}.panel-heading>.dropdown .dropdown-toggle,.panel-title,.panel-title>.small,.panel-title>.small>a,.panel-title>a,.panel-title>small,.panel-title>small>a{color:inherit}.list-group-item-heading{margin-top:0;margin-bottom:5px}.list-group-item-text{margin-bottom:0;line-height:1.3}.panel{margin-bottom:20px;background-color:#fff;border:1px solid transparent;border-radius:4px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05)}.panel-title,.panel>.list-group,.panel>.panel-collapse>.list-group,.panel>.panel-collapse>.table,.panel>.table,.panel>.table-responsive>.table{margin-bottom:0}.panel-body{padding:15px}.panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-left-radius:3px;border-top-right-radius:3px}.panel-title{margin-top:0;font-size:16px}.panel-footer{padding:10px 15px;background-color:#f5f5f5;border-top:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.list-group .list-group-item,.panel>.panel-collapse>.list-group .list-group-item{border-width:1px 0;border-radius:0}.panel-group .panel-heading,.panel>.table-bordered>tbody>tr:first-child>td,.panel>.table-bordered>tbody>tr:first-child>th,.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-bordered>thead>tr:first-child>td,.panel>.table-bordered>thead>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>thead>tr:first-child>td,.panel>.table-responsive>.table-bordered>thead>tr:first-child>th{border-bottom:0}.panel>.list-group:first-child .list-group-item:first-child,.panel>.panel-collapse>.list-group:first-child .list-group-item:first-child{border-top:0;border-top-left-radius:3px;border-top-right-radius:3px}.panel>.list-group:last-child .list-group-item:last-child,.panel>.panel-collapse>.list-group:last-child .list-group-item:last-child{border-bottom:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.panel-heading+.panel-collapse>.list-group .list-group-item:first-child{border-top-left-radius:0;border-top-right-radius:0}.list-group+.panel-footer,.panel-heading+.list-group .list-group-item:first-child{border-top-width:0}.panel>.panel-collapse>.table caption,.panel>.table caption,.panel>.table-responsive>.table caption{padding-right:15px;padding-left:15px}.panel>.table-responsive:first-child>.table:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child,.panel>.table:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child,.panel>.table:first-child>thead:first-child>tr:first-child{border-top-left-radius:3px;border-top-right-radius:3px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table:first-child>thead:first-child>tr:first-child th:first-child{border-top-left-radius:3px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table:first-child>thead:first-child>tr:first-child th:last-child{border-top-right-radius:3px}.panel>.table-responsive:last-child>.table:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child,.panel>.table:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child{border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:first-child{border-bottom-left-radius:3px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:last-child{border-bottom-right-radius:3px}.panel>.panel-body+.table,.panel>.panel-body+.table-responsive,.panel>.table+.panel-body,.panel>.table-responsive+.panel-body{border-top:1px solid #ddd}.panel>.table>tbody:first-child>tr:first-child td,.panel>.table>tbody:first-child>tr:first-child th{border-top:0}.panel>.table-bordered,.panel>.table-responsive>.table-bordered{border:0}.panel>.table-bordered>tbody>tr>td:first-child,.panel>.table-bordered>tbody>tr>th:first-child,.panel>.table-bordered>tfoot>tr>td:first-child,.panel>.table-bordered>tfoot>tr>th:first-child,.panel>.table-bordered>thead>tr>td:first-child,.panel>.table-bordered>thead>tr>th:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:first-child,.panel>.table-responsive>.table-bordered>thead>tr>td:first-child,.panel>.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.panel>.table-bordered>tbody>tr>td:last-child,.panel>.table-bordered>tbody>tr>th:last-child,.panel>.table-bordered>tfoot>tr>td:last-child,.panel>.table-bordered>tfoot>tr>th:last-child,.panel>.table-bordered>thead>tr>td:last-child,.panel>.table-bordered>thead>tr>th:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:last-child,.panel>.table-responsive>.table-bordered>thead>tr>td:last-child,.panel>.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.panel>.table-responsive{margin-bottom:0;border:0}.panel-group{margin-bottom:20px}.panel-group .panel{margin-bottom:0;border-radius:4px}.panel-group .panel+.panel{margin-top:5px}.panel-group .panel-heading+.panel-collapse>.list-group,.panel-group .panel-heading+.panel-collapse>.panel-body{border-top:1px solid #ddd}.panel-group .panel-footer{border-top:0}.panel-group .panel-footer+.panel-collapse .panel-body{border-bottom:1px solid #ddd}.panel-default{border-color:#ddd}.panel-default>.panel-heading{color:#333;background-color:#f5f5f5;border-color:#ddd}.panel-default>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ddd}.panel-default>.panel-heading .badge{color:#f5f5f5;background-color:#333}.panel-default>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ddd}.panel-primary{border-color:#337ab7}.panel-primary>.panel-heading{color:#fff;background-color:#337ab7;border-color:#337ab7}.panel-primary>.panel-heading+.panel-collapse>.panel-body{border-top-color:#337ab7}.panel-primary>.panel-heading .badge{color:#337ab7;background-color:#fff}.panel-primary>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#337ab7}.panel-success{border-color:#d6e9c6}.panel-success>.panel-heading{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.panel-success>.panel-heading+.panel-collapse>.panel-body{border-top-color:#d6e9c6}.panel-success>.panel-heading .badge{color:#dff0d8;background-color:#3c763d}.panel-success>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#d6e9c6}.panel-info{border-color:#bce8f1}.panel-info>.panel-heading{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.panel-info>.panel-heading+.panel-collapse>.panel-body{border-top-color:#bce8f1}.panel-info>.panel-heading .badge{color:#d9edf7;background-color:#31708f}.panel-info>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#bce8f1}.panel-warning{border-color:#faebcc}.panel-warning>.panel-heading{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.panel-warning>.panel-heading+.panel-collapse>.panel-body{border-top-color:#faebcc}.panel-warning>.panel-heading .badge{color:#fcf8e3;background-color:#8a6d3b}.panel-warning>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#faebcc}.panel-danger{border-color:#ebccd1}.panel-danger>.panel-heading{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.panel-danger>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ebccd1}.panel-danger>.panel-heading .badge{color:#f2dede;background-color:#a94442}.panel-danger>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ebccd1}.embed-responsive{position:relative;display:block;height:0;padding:0}.embed-responsive .embed-responsive-item,.embed-responsive embed,.embed-responsive iframe,.embed-responsive object,.embed-responsive video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.embed-responsive-16by9{padding-bottom:56.25%}.embed-responsive-4by3{padding-bottom:75%}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.05);box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,.15)}.well-lg{padding:24px;border-radius:6px}.well-sm{padding:9px;border-radius:3px}.close{float:right;font-size:21px;line-height:1;color:#000;text-shadow:0 1px 0 #fff;filter:alpha(opacity=20);opacity:.2}.popover,.tooltip{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-style:normal;font-weight:400;line-height:1.42857143;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;word-wrap:normal;white-space:normal;line-break:auto;text-decoration:none}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer;filter:alpha(opacity=50);opacity:.5}button.close{-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;border:0}.modal{position:fixed;z-index:1050;display:none;-webkit-overflow-scrolling:touch;outline:0}.modal.fade .modal-dialog{-webkit-transition:-webkit-transform .3s ease-out;-o-transition:-o-transform .3s ease-out;transition:transform .3s ease-out;-webkit-transform:translate(0,-25%);-ms-transform:translate(0,-25%);-o-transform:translate(0,-25%);transform:translate(0,-25%)}.modal.in .modal-dialog{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);-o-transform:translate(0,0);transform:translate(0,0)}.modal-open .modal{overflow-x:hidden;overflow-y:auto}.modal-dialog{position:relative;width:auto;margin:10px}.modal-content{position:relative;background-color:#fff;background-clip:padding-box;border:1px solid #999;border:1px solid rgba(0,0,0,.2);border-radius:6px;outline:0;-webkit-box-shadow:0 3px 9px rgba(0,0,0,.5);box-shadow:0 3px 9px rgba(0,0,0,.5)}.modal-backdrop{position:fixed;z-index:1040;background-color:#000}.modal-backdrop.fade{filter:alpha(opacity=0);opacity:0}.carousel-control,.modal-backdrop.in{filter:alpha(opacity=50);opacity:.5}.modal-header{padding:15px;border-bottom:1px solid #e5e5e5}.modal-header .close{margin-top:-2px}.modal-title{margin:0;line-height:1.42857143}.modal-body{position:relative;padding:15px}.modal-footer{padding:15px;text-align:right;border-top:1px solid #e5e5e5}.modal-footer .btn+.btn{margin-bottom:0;margin-left:5px}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.modal-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (min-width:768px){.modal-dialog{width:600px;margin:30px auto}.modal-content{-webkit-box-shadow:0 5px 15px rgba(0,0,0,.5);box-shadow:0 5px 15px rgba(0,0,0,.5)}.modal-sm{width:300px}}.tooltip.top-left .tooltip-arrow,.tooltip.top-right .tooltip-arrow{bottom:0;margin-bottom:-5px;border-width:5px 5px 0;border-top-color:#000}@media (min-width:992px){.modal-lg{width:900px}}.tooltip{position:absolute;z-index:1070;display:block;font-size:12px;text-align:left;text-align:start;filter:alpha(opacity=0);opacity:0}.tooltip.in{filter:alpha(opacity=90);opacity:.9}.tooltip.top{padding:5px 0;margin-top:-3px}.tooltip.right{padding:0 5px;margin-left:3px}.tooltip.bottom{padding:5px 0;margin-top:3px}.tooltip.left{padding:0 5px;margin-left:-3px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;background-color:#000;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.top-left .tooltip-arrow{right:5px}.tooltip.top-right .tooltip-arrow{left:5px}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#000}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#000}.tooltip.bottom .tooltip-arrow,.tooltip.bottom-left .tooltip-arrow,.tooltip.bottom-right .tooltip-arrow{border-width:0 5px 5px;border-bottom-color:#000;top:0}.tooltip.bottom .tooltip-arrow{left:50%;margin-left:-5px}.tooltip.bottom-left .tooltip-arrow{right:5px;margin-top:-5px}.tooltip.bottom-right .tooltip-arrow{left:5px;margin-top:-5px}.popover{position:absolute;top:0;left:0;z-index:1060;display:none;max-width:276px;padding:1px;font-size:14px;text-align:left;text-align:start;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,.2);box-shadow:0 5px 10px rgba(0,0,0,.2)}.carousel-caption,.carousel-control{color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6)}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{padding:8px 14px;margin:0;font-size:14px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.popover-content{padding:9px 14px}.popover>.arrow,.popover>.arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.carousel,.carousel-inner{position:relative}.popover>.arrow{border-width:11px}.popover>.arrow:after{content:"";border-width:10px}.popover.top>.arrow{bottom:-11px;left:50%;margin-left:-11px;border-top-color:#999;border-top-color:rgba(0,0,0,.25);border-bottom-width:0}.popover.top>.arrow:after{bottom:1px;margin-left:-10px;content:" ";border-top-color:#fff;border-bottom-width:0}.popover.left>.arrow:after,.popover.right>.arrow:after{bottom:-10px;content:" "}.popover.right>.arrow{top:50%;left:-11px;margin-top:-11px;border-right-color:#999;border-right-color:rgba(0,0,0,.25);border-left-width:0}.popover.right>.arrow:after{left:1px;border-right-color:#fff;border-left-width:0}.popover.bottom>.arrow{top:-11px;left:50%;margin-left:-11px;border-top-width:0;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,.25)}.popover.bottom>.arrow:after{top:1px;margin-left:-10px;content:" ";border-top-width:0;border-bottom-color:#fff}.popover.left>.arrow{top:50%;right:-11px;margin-top:-11px;border-right-width:0;border-left-color:#999;border-left-color:rgba(0,0,0,.25)}.popover.left>.arrow:after{right:1px;border-right-width:0;border-left-color:#fff}.carousel-inner{width:100%}.carousel-inner>.item{position:relative;display:none;-webkit-transition:.6s ease-in-out left;-o-transition:.6s ease-in-out left;transition:.6s ease-in-out left}.carousel-inner>.item>a>img,.carousel-inner>.item>img{line-height:1}@media all and (transform-3d),(-webkit-transform-3d){.carousel-inner>.item{-webkit-transition:-webkit-transform .6s ease-in-out;-o-transition:-o-transform .6s ease-in-out;transition:transform .6s ease-in-out;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000px;perspective:1000px}.carousel-inner>.item.active.right,.carousel-inner>.item.next{left:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.carousel-inner>.item.active.left,.carousel-inner>.item.prev{left:0;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.carousel-inner>.item.active,.carousel-inner>.item.next.left,.carousel-inner>.item.prev.right{left:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:0;bottom:0;left:0;width:15%;font-size:20px;background-color:rgba(0,0,0,0)}.carousel-control.left{background-image:-webkit-linear-gradient(left,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);background-image:-o-linear-gradient(left,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.5)),to(rgba(0,0,0,.0001)));background-image:linear-gradient(to right,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#80000000\', endColorstr=\'#00000000\', GradientType=1);background-repeat:repeat-x}.carousel-control.right{right:0;left:auto;background-image:-webkit-linear-gradient(left,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);background-image:-o-linear-gradient(left,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.0001)),to(rgba(0,0,0,.5)));background-image:linear-gradient(to right,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#00000000\', endColorstr=\'#80000000\', GradientType=1);background-repeat:repeat-x}.carousel-control:focus,.carousel-control:hover{color:#fff;text-decoration:none;filter:alpha(opacity=90);outline:0;opacity:.9}.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{position:absolute;top:50%;z-index:5;display:inline-block;margin-top:-10px}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{left:50%;margin-left:-10px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{right:50%;margin-right:-10px}.carousel-control .icon-next,.carousel-control .icon-prev{width:20px;height:20px;font-family:serif;line-height:1}.carousel-control .icon-prev:before{content:\'\\2039\'}.carousel-control .icon-next:before{content:\'\\203a\'}.carousel-indicators{position:absolute;bottom:10px;left:50%;z-index:15;width:60%;padding-left:0;margin-left:-30%;text-align:center;list-style:none}.carousel-indicators li{display:inline-block;width:10px;height:10px;margin:1px;text-indent:-999px;cursor:pointer;background-color:#000\\9;background-color:rgba(0,0,0,0);border:1px solid #fff;border-radius:10px}.carousel-indicators .active{width:12px;height:12px;margin:0;background-color:#fff}.carousel-caption{position:absolute;right:15%;bottom:20px;left:15%;z-index:10;padding-top:20px;padding-bottom:20px}.carousel-caption .btn,.text-hide{text-shadow:none}@media screen and (min-width:768px){.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{width:30px;height:30px;margin-top:-10px;font-size:30px}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{margin-left:-10px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{margin-right:-10px}.carousel-caption{right:20%;left:20%;padding-bottom:30px}.carousel-indicators{bottom:20px}}.btn-group-vertical>.btn-group:after,.btn-group-vertical>.btn-group:before,.btn-toolbar:after,.btn-toolbar:before,.clearfix:after,.clearfix:before,.container-fluid:after,.container-fluid:before,.container:after,.container:before,.dl-horizontal dd:after,.dl-horizontal dd:before,.form-horizontal .form-group:after,.form-horizontal .form-group:before,.modal-footer:after,.modal-footer:before,.modal-header:after,.modal-header:before,.nav:after,.nav:before,.navbar-collapse:after,.navbar-collapse:before,.navbar-header:after,.navbar-header:before,.navbar:after,.navbar:before,.pager:after,.pager:before,.panel-body:after,.panel-body:before,.row:after,.row:before{display:table;content:" "}.btn-group-vertical>.btn-group:after,.btn-toolbar:after,.clearfix:after,.container-fluid:after,.container:after,.dl-horizontal dd:after,.form-horizontal .form-group:after,.modal-footer:after,.modal-header:after,.nav:after,.navbar-collapse:after,.navbar-header:after,.navbar:after,.pager:after,.panel-body:after,.row:after{clear:both}.center-block{display:block;margin-right:auto;margin-left:auto}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.hidden,.visible-lg,.visible-lg-block,.visible-lg-inline,.visible-lg-inline-block,.visible-md,.visible-md-block,.visible-md-inline,.visible-md-inline-block,.visible-sm,.visible-sm-block,.visible-sm-inline,.visible-sm-inline-block,.visible-xs,.visible-xs-block,.visible-xs-inline,.visible-xs-inline-block{display:none!important}.text-hide{font:0/0 a;color:transparent;background-color:transparent;border:0}.affix{position:fixed}@-ms-viewport{width:device-width}@media (max-width:767px){.visible-xs{display:block!important}table.visible-xs{display:table!important}tr.visible-xs{display:table-row!important}td.visible-xs,th.visible-xs{display:table-cell!important}.visible-xs-block{display:block!important}.visible-xs-inline{display:inline!important}.visible-xs-inline-block{display:inline-block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm{display:block!important}table.visible-sm{display:table!important}tr.visible-sm{display:table-row!important}td.visible-sm,th.visible-sm{display:table-cell!important}.visible-sm-block{display:block!important}.visible-sm-inline{display:inline!important}.visible-sm-inline-block{display:inline-block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md{display:block!important}table.visible-md{display:table!important}tr.visible-md{display:table-row!important}td.visible-md,th.visible-md{display:table-cell!important}.visible-md-block{display:block!important}.visible-md-inline{display:inline!important}.visible-md-inline-block{display:inline-block!important}}@media (min-width:1200px){.visible-lg{display:block!important}table.visible-lg{display:table!important}tr.visible-lg{display:table-row!important}td.visible-lg,th.visible-lg{display:table-cell!important}.visible-lg-block{display:block!important}.visible-lg-inline{display:inline!important}.visible-lg-inline-block{display:inline-block!important}.hidden-lg{display:none!important}}@media (max-width:767px){.hidden-xs{display:none!important}}@media (min-width:768px) and (max-width:991px){.hidden-sm{display:none!important}}@media (min-width:992px) and (max-width:1199px){.hidden-md{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:block!important}table.visible-print{display:table!important}tr.visible-print{display:table-row!important}td.visible-print,th.visible-print{display:table-cell!important}}.visible-print-block{display:none!important}@media print{.visible-print-block{display:block!important}}.visible-print-inline{display:none!important}@media print{.visible-print-inline{display:inline!important}}.visible-print-inline-block{display:none!important}@media print{.visible-print-inline-block{display:inline-block!important}.hidden-print{display:none!important}}');
})(function(a){a()});