/* */
"format global";!function(a){var b=a.babelHelpers={};b.inherits=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},b.defaults=function(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a},b.createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b.createDecoratedClass=function(){function a(a,b,c){for(var d=0;d<b.length;d++){var e=b[d],f=e.decorators,g=e.key;if(delete e.key,delete e.decorators,e.enumerable=e.enumerable||!1,e.configurable=!0,("value"in e||e.initializer)&&(e.writable=!0),f){for(var h=0;h<f.length;h++){var i=f[h];if("function"!=typeof i)throw new TypeError("The decorator for method "+e.key+" is of the invalid type "+typeof i);e=i(a,g,e)||e}if(void 0!==e.initializer){c[g]=e;continue}}Object.defineProperty(a,g,e)}}return function(b,c,d,e,f){return c&&a(b.prototype,c,e),d&&a(b,d,f),b}}(),b.createDecoratedObject=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.decorators,f=d.key;if(delete d.key,delete d.decorators,d.enumerable=!0,d.configurable=!0,("value"in d||d.initializer)&&(d.writable=!0),e)for(var g=0;g<e.length;g++){var h=e[g];if("function"!=typeof h)throw new TypeError("The decorator for method "+d.key+" is of the invalid type "+typeof h);d=h(b,f,d)||d}d.initializer&&(d.value=d.initializer.call(b)),Object.defineProperty(b,f,d)}return b},b.defineDecoratedPropertyDescriptor=function(a,b,c){var d=c[b];if(d){var e={};for(var f in d)e[f]=d[f];e.value=e.initializer?e.initializer.call(a):void 0,Object.defineProperty(a,b,e)}},b.taggedTemplateLiteral=function(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))},b.taggedTemplateLiteralLoose=function(a,b){return a.raw=b,a},b.toArray=function(a){return Array.isArray(a)?a:Array.from(a)},b.toConsumableArray=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},b.slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b.slicedToArrayLoose=function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){for(var c,d=[],e=a[Symbol.iterator]();!(c=e.next()).done&&(d.push(c.value),!b||d.length!==b););return d}throw new TypeError("Invalid attempt to destructure non-iterable instance")},b.objectWithoutProperties=function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c},b.hasOwn=Object.prototype.hasOwnProperty,b.slice=Array.prototype.slice,b.bind=Function.prototype.bind,b.defineProperty=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},b.asyncToGenerator=function(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(d,g){try{var h=b[d](g),i=h.value}catch(a){return void c(a)}h.done?a(i):Promise.resolve(i).then(e,f)}var e=d.bind(null,"next"),f=d.bind(null,"throw");e()})}},b.interopExportWildcard=function(a,b){var c=b({},a);return delete c.default,c},b.interopRequireWildcard=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b},b.interopRequireDefault=function(a){return a&&a.__esModule?a:{default:a}},b._typeof=function(a){return a&&a.constructor===Symbol?"symbol":typeof a},b._extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b.get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},b.set=function a(b,c,d,e){var f=Object.getOwnPropertyDescriptor(b,c);if(void 0===f){var g=Object.getPrototypeOf(b);null!==g&&a(g,c,d,e)}else if("value"in f&&f.writable)f.value=d;else{var h=f.set;void 0!==h&&h.call(e,d)}return d},b.newArrowCheck=function(a,b){if(a!==b)throw new TypeError("Cannot instantiate an arrow function")},b.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b.objectDestructuringEmpty=function(a){if(null==a)throw new TypeError("Cannot destructure undefined")},b.temporalUndefined={},b.temporalAssertDefined=function(a,b,c){if(a===c)throw new ReferenceError(b+" is not defined - temporal dead zone");return!0},b.selfGlobal="undefined"==typeof a?self:a,b.typeofReactElement="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,b.defaultProps=function(a,b){if(a)for(var c in a)"undefined"==typeof b[c]&&(b[c]=a[c]);return b},b._instanceof=function(a,b){return null!=b&&b[Symbol.hasInstance]?b[Symbol.hasInstance](a):a instanceof b},b.interopRequire=function(a){return a&&a.__esModule?a.default:a}}("undefined"==typeof global?self:global),!function(a){function b(a,b,e){return 4===arguments.length?c.apply(this,arguments):void d(a,{declarative:!0,deps:b,declare:e})}function c(a,b,c,e){d(a,{declarative:!1,deps:b,executingRequire:c,execute:e})}function d(a,b){b.name=a,a in o||(o[a]=b),b.normalizedDeps=b.deps}function e(a,b){if(b[a.groupIndex]=b[a.groupIndex]||[],-1==p.call(b[a.groupIndex],a)){b[a.groupIndex].push(a);for(var c=0,d=a.normalizedDeps.length;d>c;c++){var f=a.normalizedDeps[c],g=o[f];if(g&&!g.evaluated){var h=a.groupIndex+(g.declarative!=a.declarative);if(void 0===g.groupIndex||g.groupIndex<h){if(void 0!==g.groupIndex&&(b[g.groupIndex].splice(p.call(b[g.groupIndex],g),1),0==b[g.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");g.groupIndex=h}e(g,b)}}}}function f(a){var b=o[a];b.groupIndex=0;var c=[];e(b,c);for(var d=!!b.declarative==c.length%2,f=c.length-1;f>=0;f--){for(var g=c[f],i=0;i<g.length;i++){var k=g[i];d?h(k):j(k)}d=!d}}function g(a){return s[a]||(s[a]={name:a,dependencies:[],exports:{},importers:[]})}function h(b){if(!b.module){var c=b.module=g(b.name),d=b.module.exports,e=b.declare.call(a,function(a,b){if(c.locked=!0,"object"==typeof a)for(var e in a)d[e]=a[e];else d[a]=b;for(var f=0,g=c.importers.length;g>f;f++){var h=c.importers[f];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===c&&h.setters[i](d)}return c.locked=!1,b},{id:b.name});c.setters=e.setters,c.execute=e.execute;for(var f=0,i=b.normalizedDeps.length;i>f;f++){var j,k=b.normalizedDeps[f],l=o[k],m=s[k];m?j=m.exports:l&&!l.declarative?j=l.esModule:l?(h(l),m=l.module,j=m.exports):j=n(k),m&&m.importers?(m.importers.push(c),c.dependencies.push(m)):c.dependencies.push(null),c.setters[f]&&c.setters[f](j)}}}function i(a){var b,c=o[a];if(c)c.declarative?m(a,[]):c.evaluated||j(c),b=c.module.exports;else if(b=n(a),!b)throw new Error("Unable to load dependency "+a+".");return(!c||c.declarative)&&b&&b.__useDefault?b.default:b}function j(b){if(!b.module){var c={},d=b.module={exports:c,id:b.name};if(!b.executingRequire)for(var e=0,f=b.normalizedDeps.length;f>e;e++){var g=b.normalizedDeps[e],h=o[g];h&&j(h)}b.evaluated=!0;var l=b.execute.call(a,function(a){for(var c=0,d=b.deps.length;d>c;c++)if(b.deps[c]==a)return i(b.normalizedDeps[c]);throw new TypeError("Module "+a+" not declared as a dependency.")},c,d);void 0!==typeof l&&(d.exports=l),c=d.exports,c&&c.__esModule?b.esModule=c:b.esModule=k(c)}}function k(b){var c={};if(("object"==typeof b||"function"==typeof b)&&b!==a)if(q)for(var d in b)"default"!==d&&l(c,b,d);else{var e=b&&b.hasOwnProperty;for(var d in b)"default"===d||e&&!b.hasOwnProperty(d)||(c[d]=b[d])}return c.default=b,r(c,"__useDefault",{value:!0}),c}function l(a,b,c){try{var d;(d=Object.getOwnPropertyDescriptor(b,c))&&r(a,c,d)}catch(d){return a[c]=b[c],!1}}function m(b,c){var d=o[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var g=d.normalizedDeps[e];-1==p.call(c,g)&&(o[g]?m(g,c):n(g))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function n(a){if(u[a])return u[a];if("@node/"==a.substr(0,6))return u[a]=k(t(a.substr(6)));var b=o[a];if(!b)throw"Module "+a+" not present.";return f(a),m(a,[]),o[a]=void 0,b.declarative&&r(b.module.exports,"__esModule",{value:!0}),u[a]=b.declarative?b.module.exports:b.esModule}var o={},p=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},q=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(a){q=!1}var r;!function(){try{Object.defineProperty({},"a",{})&&(r=Object.defineProperty)}catch(a){r=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(a){}}}}();var s={},t="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,u={"@empty":{}};return function(a,d,e,f){return function(g){g(function(g){for(var h={_nodeRequire:t,register:b,registerDynamic:c,get:n,set:function(a,b){u[a]=b},newModule:function(a){return a}},i=0;i<d.length;i++)(function(a,b){b&&b.__esModule?u[a]=b:u[a]=k(b)})(d[i],arguments[i]);f(h);var j=n(a[0]);if(a.length>1)for(var i=1;i<a.length;i++)n(a[i]);return e?j.default:j})}}}("undefined"!=typeof self?self:global)(["1"],[],!1,function(a){var b=this.require,c=this.exports,d=this.module;!function(b){function c(a,b){for(var c=a.split(".");c.length;)b=b[c.shift()];return b}function d(a){if("string"==typeof a)return c(a,b);if(!(a instanceof Array))throw new Error("Global exports must be a string or array.");for(var d={},e=!0,f=0;f<a.length;f++){var g=c(a[f],b);e&&(d.default=g,e=!1),d[a[f].split(".").pop()]=g}return d}function e(a){if(Object.keys)Object.keys(b).forEach(a);else for(var c in b)i.call(b,c)&&a(c)}function f(a){e(function(c){if(-1==j.call(k,c)){try{var d=b[c]}catch(a){k.push(c)}a(c,d)}})}var g,h=a,i=Object.prototype.hasOwnProperty,j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},k=["_g","sessionStorage","localStorage","clipboardData","frames","frameElement","external","mozAnimationStartTime","webkitStorageInfo","webkitIndexedDB","mozInnerScreenY","mozInnerScreenX"];h.set("@@global-helpers",h.newModule({prepareGlobal:function(a,c,e){var h=b.define;b.define=void 0;var i;if(e){i={};for(var j in e)i[j]=b[j],b[j]=e[j]}return c||(g={},f(function(a,b){g[a]=b})),function(){var a;if(c)a=d(c);else{a={};var e,j;f(function(b,c){g[b]!==c&&"undefined"!=typeof c&&(a[b]=c,"undefined"!=typeof e?j||e===c||(j=!0):e=c)}),a=j?a:e}if(i)for(var k in i)b[k]=i[k];return b.define=h,a}}}))}("undefined"!=typeof self?self:global),!function(b){function c(a,b){a=a.replace(h,"");var c=a.match(k),d=(c[1].split(",")[b]||"require").replace(l,""),e=m[d]||(m[d]=new RegExp(i+d+j,"g"));e.lastIndex=0;for(var f,g=[];f=e.exec(a);)g.push(f[2]||f[3]);return g}function d(a,b,c,e){if("object"==typeof a&&!(a instanceof Array))return d.apply(null,Array.prototype.splice.call(arguments,1,arguments.length-1));if("string"==typeof a&&"function"==typeof b&&(a=[a]),!(a instanceof Array)){if("string"==typeof a){var g=f.get(a);return g.__useDefault?g.default:g}throw new TypeError("Invalid require")}for(var h=[],i=0;i<a.length;i++)h.push(f.import(a[i],e));Promise.all(h).then(function(a){b&&b.apply(null,a)},c)}function e(a,e,h){"string"!=typeof a&&(h=e,e=a,a=null),e instanceof Array||(h=e,e=["require","exports","module"].splice(0,h.length)),"function"!=typeof h&&(h=function(a){return function(){return a}}(h)),void 0===e[e.length-1]&&e.pop();var i,j,k;-1!=(i=g.call(e,"require"))&&(e.splice(i,1),a||(e=e.concat(c(h.toString(),i)))),-1!=(j=g.call(e,"exports"))&&e.splice(j,1),-1!=(k=g.call(e,"module"))&&e.splice(k,1);var l={name:a,deps:e,execute:function(a,c,g){for(var l=[],m=0;m<e.length;m++)l.push(a(e[m]));g.uri=g.id,g.config=function(){},-1!=k&&l.splice(k,0,g),-1!=j&&l.splice(j,0,c),-1!=i&&l.splice(i,0,function(b,c,e){return"string"==typeof b&&"function"!=typeof c?a(b):d.call(f,b,c,e,g.id)});var n=h.apply(-1==j?b:c,l);return"undefined"==typeof n&&g&&(n=g.exports),"undefined"!=typeof n?n:void 0}};if(a)n.anonDefine||n.isBundle?n.anonDefine&&n.anonDefine.name&&(n.anonDefine=null):n.anonDefine=l,n.isBundle=!0,f.registerDynamic(l.name,l.deps,!1,l.execute);else{if(n.anonDefine&&!n.anonDefine.name)throw new Error("Multiple anonymous defines in module "+a);n.anonDefine=l}}var f=a,g=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},h=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,i="(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])",j="\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)",k=/\(([^\)]*)\)/,l=/^\s+|\s+$/g,m={};e.amd={};var n={isBundle:!1,anonDefine:null};f.amdDefine=e,f.amdRequire=d}("undefined"!=typeof self?self:global),a.registerDynamic("2",["3","4","5","6"],!0,function(a,b,c){"use strict";var d=(this||self,a("3")),e=a("4"),f=a("5"),g="startsWith",h=""[g];return d(d.P+d.F*a("6")(g),"String",{startsWith:function(a){var b=f(this,a,g),c=arguments,d=e(Math.min(c.length>1?c[1]:void 0,b.length)),i=String(a);return h?h.call(b,i,d):b.slice(d,d+i.length)===i}}),c.exports}),a.registerDynamic("7",["2","8"],!0,function(a,b,c){this||self;return a("2"),c.exports=a("8").String.startsWith,c.exports}),a.registerDynamic("9",["a","b","c"],!0,function(a,b,c){var d=(this||self,a("a")),e=a("b"),f=a("c")("match");return c.exports=function(a){var b;return d(a)&&(void 0!==(b=a[f])?!!b:"RegExp"==e(a))},c.exports}),a.registerDynamic("5",["9","d"],!0,function(a,b,c){var d=(this||self,a("9")),e=a("d");return c.exports=function(a,b,c){if(d(b))throw TypeError("String#"+c+" doesn't accept regex!");return String(e(a))},c.exports}),a.registerDynamic("6",["c"],!0,function(a,b,c){var d=(this||self,a("c")("match"));return c.exports=function(a){var b=/./;try{"/./"[a](b)}catch(c){try{return b[d]=!1,!"/./"[a](b)}catch(a){}}return!0},c.exports}),a.registerDynamic("e",["3","4","5","6"],!0,function(a,b,c){"use strict";var d=(this||self,a("3")),e=a("4"),f=a("5"),g="endsWith",h=""[g];return d(d.P+d.F*a("6")(g),"String",{endsWith:function(a){var b=f(this,a,g),c=arguments,d=c.length>1?c[1]:void 0,i=e(b.length),j=void 0===d?i:Math.min(e(d),i),k=String(a);return h?h.call(b,k,j):b.slice(j-k.length,j)===k}}),c.exports}),a.registerDynamic("f",["e","8"],!0,function(a,b,c){this||self;return a("e"),c.exports=a("8").String.endsWith,c.exports}),a.registerDynamic("10",["d"],!0,function(a,b,c){var d=(this||self,a("d"));return c.exports=function(a){return Object(d(a))},c.exports}),a.registerDynamic("11",["b"],!0,function(a,b,c){var d=(this||self,a("b"));return c.exports=Array.isArray||function(a){return"Array"==d(a)},c.exports}),a.registerDynamic("12",["a","11","c"],!0,function(a,b,c){var d=(this||self,a("a")),e=a("11"),f=a("c")("species");return c.exports=function(a,b){var c;return e(a)&&(c=a.constructor,"function"!=typeof c||c!==Array&&!e(c.prototype)||(c=void 0),d(c)&&(c=c[f],null===c&&(c=void 0))),new(void 0===c?Array:c)(b)},c.exports}),a.registerDynamic("13",["14","15","10","4","12"],!0,function(a,b,c){var d=(this||self,a("14")),e=a("15"),f=a("10"),g=a("4"),h=a("12");return c.exports=function(a){var b=1==a,c=2==a,i=3==a,j=4==a,k=6==a,l=5==a||k;return function(m,n,o){for(var p,q,r=f(m),s=e(r),t=d(n,o,3),u=g(s.length),v=0,w=b?h(m,u):c?h(m,0):void 0;u>v;v++)if((l||v in s)&&(p=s[v],q=t(p,v,r),a))if(b)w[v]=q;else if(q)switch(a){case 3:return!0;case 5:return p;case 6:return v;case 2:w.push(p)}else if(j)return!1;return k?-1:i||j?j:w}},c.exports}),a.registerDynamic("16",["3","13","17"],!0,function(a,b,c){"use strict";var d=(this||self,a("3")),e=a("13")(5),f="find",g=!0;return f in[]&&Array(1)[f](function(){g=!1}),d(d.P+d.F*g,"Array",{find:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),a("17")(f),c.exports}),a.registerDynamic("18",["16","8"],!0,function(a,b,c){this||self;return a("16"),c.exports=a("8").Array.find,c.exports}),a.registerDynamic("19",["1a","c","1b"],!0,function(a,b,c){"use strict";var d=(this||self,a("1a")),e={};return e[a("c")("toStringTag")]="z",e+""!="[object z]"&&a("1b")(Object.prototype,"toString",function(){return"[object "+d(this)+"]"},!0),c.exports}),a.registerDynamic("1c",["1d","d"],!0,function(a,b,c){var d=(this||self,a("1d")),e=a("d");return c.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return i<0||i>=j?a?"":void 0:(f=h.charCodeAt(i),f<55296||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}},c.exports}),a.registerDynamic("1e",["1c","1f"],!0,function(a,b,c){"use strict";var d=(this||self,a("1c")(!0));return a("1f")(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})}),c.exports}),a.registerDynamic("17",["c","20"],!0,function(a,b,c){var d=(this||self,a("c")("unscopables")),e=Array.prototype;return void 0==e[d]&&a("20")(e,d,{}),c.exports=function(a){e[d][a]=!0},c.exports}),a.registerDynamic("21",[],!0,function(a,b,c){this||self;return c.exports=function(a,b){return{value:b,done:!!a}},c.exports}),a.registerDynamic("15",["b"],!0,function(a,b,c){var d=(this||self,a("b"));return c.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)},c.exports}),a.registerDynamic("d",[],!0,function(a,b,c){this||self;return c.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a},c.exports}),a.registerDynamic("22",["15","d"],!0,function(a,b,c){var d=(this||self,a("15")),e=a("d");return c.exports=function(a){return d(e(a))},c.exports}),a.registerDynamic("23",["24","25","26","20","c"],!0,function(a,b,c){"use strict";var d=(this||self,a("24")),e=a("25"),f=a("26"),g={};return a("20")(g,a("c")("iterator"),function(){return this}),c.exports=function(a,b,c){a.prototype=d.create(g,{next:e(1,c)}),f(a,b+" Iterator")},c.exports}),a.registerDynamic("1f",["27","3","1b","20","28","29","23","26","24","c"],!0,function(a,b,c){"use strict";var d=(this||self,a("27")),e=a("3"),f=a("1b"),g=a("20"),h=a("28"),i=a("29"),j=a("23"),k=a("26"),l=a("24").getProto,m=a("c")("iterator"),n=!([].keys&&"next"in[].keys()),o="@@iterator",p="keys",q="values",r=function(){return this};return c.exports=function(a,b,c,s,t,u,v){j(c,b,s);var w,x,y=function(a){if(!n&&a in C)return C[a];switch(a){case p:return function(){return new c(this,a)};case q:return function(){return new c(this,a)}}return function(){return new c(this,a)}},z=b+" Iterator",A=t==q,B=!1,C=a.prototype,D=C[m]||C[o]||t&&C[t],E=D||y(t);if(D){var F=l(E.call(new a));k(F,z,!0),!d&&h(C,o)&&g(F,m,r),A&&D.name!==q&&(B=!0,E=function(){return D.call(this)})}if(d&&!v||!n&&!B&&C[m]||g(C,m,E),i[b]=E,i[z]=r,t)if(w={values:A?E:y(q),keys:u?E:y(p),entries:A?y("entries"):E},v)for(x in w)x in C||f(C,x,w[x]);else e(e.P+e.F*(n||B),b,w);return w},c.exports}),a.registerDynamic("2a",["17","21","29","22","1f"],!0,function(a,b,c){"use strict";var d=(this||self,a("17")),e=a("21"),f=a("29"),g=a("22");return c.exports=a("1f")(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries"),c.exports}),a.registerDynamic("2b",["2a","2c","20","29","c"],!0,function(a,b,c){var d=this||self;a("2a");var d=a("2c"),e=a("20"),f=a("29"),g=a("c")("iterator"),h=d.NodeList,i=d.HTMLCollection,j=h&&h.prototype,k=i&&i.prototype,l=f.NodeList=f.HTMLCollection=f.Array;return j&&!j[g]&&e(j,g,l),k&&!k[g]&&e(k,g,l),c.exports}),a.registerDynamic("27",[],!0,function(a,b,c){this||self;return c.exports=!1,c.exports}),a.registerDynamic("3",["2c","8","20","1b","14"],!0,function(a,b,c){var d=this||self,d=a("2c"),e=a("8"),f=a("20"),g=a("1b"),h=a("14"),i="prototype",j=function(a,b,c){var k,l,m,n,o=a&j.F,p=a&j.G,q=a&j.S,r=a&j.P,s=a&j.B,t=p?d:q?d[b]||(d[b]={}):(d[b]||{})[i],u=p?e:e[b]||(e[b]={}),v=u[i]||(u[i]={});p&&(c=b);for(k in c)l=!o&&t&&k in t,m=(l?t:c)[k],n=s&&l?h(m,d):r&&"function"==typeof m?h(Function.call,m):m,t&&!l&&g(t,k,m),u[k]!=m&&f(u,k,n),r&&v[k]!=m&&(v[k]=m)};return d.core=e,j.F=1,j.G=2,j.S=4,j.P=8,j.B=16,j.W=32,c.exports=j,c.exports}),a.registerDynamic("2d",[],!0,function(a,b,c){this||self;return c.exports=function(a,b,c){if(!(a instanceof b))throw TypeError(c+": use the 'new' operator!");return a},c.exports}),a.registerDynamic("2e",["2f"],!0,function(a,b,c){var d=(this||self,a("2f"));return c.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a.return;throw void 0!==f&&d(f.call(a)),b}},c.exports}),a.registerDynamic("30",["29","c"],!0,function(a,b,c){var d=(this||self,a("29")),e=a("c")("iterator"),f=Array.prototype;return c.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)},c.exports}),a.registerDynamic("1d",[],!0,function(a,b,c){var d=(this||self,Math.ceil),e=Math.floor;return c.exports=function(a){return isNaN(a=+a)?0:(a>0?e:d)(a)},c.exports}),a.registerDynamic("4",["1d"],!0,function(a,b,c){var d=(this||self,a("1d")),e=Math.min;return c.exports=function(a){return a>0?e(d(a),9007199254740991):0},c.exports}),a.registerDynamic("1a",["b","c"],!0,function(a,b,c){var d=(this||self,a("b")),e=a("c")("toStringTag"),f="Arguments"==d(function(){return arguments}());return c.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=(b=Object(a))[e])?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g},c.exports}),a.registerDynamic("29",[],!0,function(a,b,c){this||self;return c.exports={},c.exports}),a.registerDynamic("31",["1a","c","29","8"],!0,function(a,b,c){var d=(this||self,a("1a")),e=a("c")("iterator"),f=a("29");return c.exports=a("8").getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]},c.exports}),a.registerDynamic("32",["14","2e","30","2f","4","31"],!0,function(a,b,c){var d=(this||self,a("14")),e=a("2e"),f=a("30"),g=a("2f"),h=a("4"),i=a("31");return c.exports=function(a,b,c,j){var k,l,m,n=i(a),o=d(c,j,b?2:1),p=0;if("function"!=typeof n)throw TypeError(a+" is not iterable!");if(f(n))for(k=h(a.length);k>p;p++)b?o(g(l=a[p])[0],l[1]):o(a[p]);else for(m=n.call(a);!(l=m.next()).done;)e(m,o,l.value,b)},c.exports}),a.registerDynamic("33",["24","a","2f","14"],!0,function(a,b,c){var d=(this||self,a("24").getDesc),e=a("a"),f=a("2f"),g=function(a,b){if(f(a),!e(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};return c.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,e){try{e=a("14")(Function.call,d(Object.prototype,"__proto__").set,2),e(b,[]),c=!(b instanceof Array)}catch(a){c=!0}return function(a,b){return g(a,b),c?a.__proto__=b:e(a,b),a}}({},!1):void 0),check:g},c.exports}),a.registerDynamic("34",[],!0,function(a,b,c){this||self;return c.exports=Object.is||function(a,b){return a===b?0!==a||1/a===1/b:a!=a&&b!=b},c.exports}),a.registerDynamic("2f",["a"],!0,function(a,b,c){var d=(this||self,a("a"));return c.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a},c.exports}),a.registerDynamic("35",["2f","36","c"],!0,function(a,b,c){var d=(this||self,a("2f")),e=a("36"),f=a("c")("species");return c.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)},c.exports}),a.registerDynamic("36",[],!0,function(a,b,c){this||self;return c.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a},c.exports}),a.registerDynamic("14",["36"],!0,function(a,b,c){var d=(this||self,a("36"));return c.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}},c.exports}),a.registerDynamic("37",[],!0,function(a,b,c){this||self;return c.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)},c.exports}),a.registerDynamic("38",["2c"],!0,function(a,b,c){this||self;return c.exports=a("2c").document&&document.documentElement,c.exports}),a.registerDynamic("a",[],!0,function(a,b,c){this||self;return c.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a},c.exports}),a.registerDynamic("39",["a","2c"],!0,function(a,b,c){var d=(this||self,a("a")),e=a("2c").document,f=d(e)&&d(e.createElement);return c.exports=function(a){return f?e.createElement(a):{}},c.exports}),a.registerDynamic("3a",["14","37","38","39","2c","b","3b"],!0,function(a,b,c){this||self;return function(b){var d,e,f,g=a("14"),h=a("37"),i=a("38"),j=a("39"),k=a("2c"),b=k.process,l=k.setImmediate,m=k.clearImmediate,n=k.MessageChannel,o=0,p={},q="onreadystatechange",r=function(){var a=+this;if(p.hasOwnProperty(a)){var b=p[a];delete p[a],b()}},s=function(a){r.call(a.data)};l&&m||(l=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return p[++o]=function(){h("function"==typeof a?a:Function(a),b)},d(o),o},m=function(a){delete p[a]},"process"==a("b")(b)?d=function(a){b.nextTick(g(r,a,1))}:n?(e=new n,f=e.port2,e.port1.onmessage=s,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",s,!1)):d=q in j("script")?function(a){i.appendChild(j("script"))[q]=function(){i.removeChild(this),r.call(a)}}:function(a){setTimeout(g(r,a,1),0)}),c.exports={set:l,clear:m}}(a("3b")),c.exports}),a.registerDynamic("b",[],!0,function(a,b,c){var d=(this||self,{}.toString);return c.exports=function(a){return d.call(a).slice(8,-1)},c.exports}),a.registerDynamic("3c",["2c","3a","b","3b"],!0,function(a,b,c){this||self;return function(b){var d,e,f,g=a("2c"),h=a("3a").set,i=g.MutationObserver||g.WebKitMutationObserver,b=g.process,j=g.Promise,k="process"==a("b")(b),l=function(){var a,c,f;for(k&&(a=b.domain)&&(b.domain=null,a.exit());d;)c=d.domain,f=d.fn,c&&c.enter(),f(),c&&c.exit(),d=d.next;e=void 0,a&&a.enter()};if(k)f=function(){b.nextTick(l)};else if(i){var m=1,n=document.createTextNode("");new i(l).observe(n,{characterData:!0}),f=function(){n.data=m=-m}}else f=j&&j.resolve?function(){j.resolve().then(l)}:function(){h.call(g,l)};c.exports=function(a){var c={fn:a,next:void 0,domain:k&&b.domain};e&&(e.next=c),d||(d=c,f()),e=c}}(a("3b")),c.exports}),a.registerDynamic("25",[],!0,function(a,b,c){this||self;return c.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}},c.exports}),a.registerDynamic("20",["24","25","3d"],!0,function(a,b,c){var d=(this||self,a("24")),e=a("25");return c.exports=a("3d")?function(a,b,c){return d.setDesc(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a},c.exports}),a.registerDynamic("1b",["2c","20","3e","8"],!0,function(a,b,c){var d=this||self,d=a("2c"),e=a("20"),f=a("3e")("src"),g="toString",h=Function[g],i=(""+h).split(g);return a("8").inspectSource=function(a){return h.call(a)},(c.exports=function(a,b,c,g){"function"==typeof c&&(c.hasOwnProperty(f)||e(c,f,a[b]?""+a[b]:i.join(String(b))),c.hasOwnProperty("name")||e(c,"name",b)),a===d?a[b]=c:(g||delete a[b],e(a,b,c))})(Function.prototype,g,function(){return"function"==typeof this&&this[f]||h.call(this)}),c.exports}),a.registerDynamic("3f",["1b"],!0,function(a,b,c){var d=(this||self,a("1b"));return c.exports=function(a,b){for(var c in b)d(a,c,b[c]);return a},c.exports}),a.registerDynamic("28",[],!0,function(a,b,c){var d=(this||self,{}.hasOwnProperty);return c.exports=function(a,b){return d.call(a,b)},c.exports}),a.registerDynamic("26",["24","28","c"],!0,function(a,b,c){var d=(this||self,a("24").setDesc),e=a("28"),f=a("c")("toStringTag");return c.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})},c.exports}),a.registerDynamic("24",[],!0,function(a,b,c){var d=(this||self,Object);return c.exports={create:d.create,getProto:d.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:d.getOwnPropertyDescriptor,setDesc:d.defineProperty,setDescs:d.defineProperties,getKeys:d.keys,getNames:d.getOwnPropertyNames,getSymbols:d.getOwnPropertySymbols,each:[].forEach},c.exports}),a.registerDynamic("40",[],!0,function(a,b,c){this||self;return c.exports=function(a){try{return!!a()}catch(a){return!0}},c.exports}),a.registerDynamic("3d",["40"],!0,function(a,b,c){this||self;return c.exports=!a("40")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c.exports}),a.registerDynamic("41",["2c","24","3d","c"],!0,function(a,b,c){"use strict";var d=this||self,d=a("2c"),e=a("24"),f=a("3d"),g=a("c")("species");return c.exports=function(a){var b=d[a];f&&b&&!b[g]&&e.setDesc(b,g,{configurable:!0,get:function(){return this}})},c.exports}),a.registerDynamic("42",["2c"],!0,function(a,b,c){var d=this||self,d=a("2c"),e="__core-js_shared__",f=d[e]||(d[e]={});return c.exports=function(a){return f[a]||(f[a]={})},c.exports}),a.registerDynamic("3e",[],!0,function(a,b,c){var d=(this||self,0),e=Math.random();return c.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++d+e).toString(36))},c.exports}),a.registerDynamic("2c",[],!0,function(a,b,c){var d=this||self,d=c.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();return"number"==typeof __g&&(__g=d),c.exports}),a.registerDynamic("c",["42","3e","2c"],!0,function(a,b,c){var d=(this||self,a("42")("wks")),e=a("3e"),f=a("2c").Symbol;return c.exports=function(a){return d[a]||(d[a]=f&&f[a]||(f||e)("Symbol."+a))},c.exports}),a.registerDynamic("43",["c"],!0,function(a,b,c){var d=(this||self,a("c")("iterator")),e=!1;try{var f=[7][d]();f.return=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}return c.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){c=!0},f[d]=function(){return g},a(f)}catch(a){}return c},c.exports}),a.registerDynamic("44",["24","27","2c","14","1a","3","a","2f","36","2d","32","33","34","c","35","3c","3d","3f","26","41","8","43","3b"],!0,function(a,b,c){this||self;return function(b){"use strict";var c,d=a("24"),e=a("27"),f=a("2c"),g=a("14"),h=a("1a"),i=a("3"),j=a("a"),k=a("2f"),l=a("36"),m=a("2d"),n=a("32"),o=a("33").set,p=a("34"),q=a("c")("species"),r=a("35"),s=a("3c"),t="Promise",b=f.process,u="process"==h(b),v=f[t],w=function(a){var b=new v(function(){});return a&&(b.constructor=Object),v.resolve(b)===b},x=function(){function b(a){var c=new v(a);return o(c,b.prototype),c}var c=!1;try{if(c=v&&v.resolve&&w(),o(b,v),b.prototype=d.create(v.prototype,{constructor:{value:b}}),b.resolve(5).then(function(){})instanceof b||(c=!1),c&&a("3d")){var e=!1;v.resolve(d.setDesc({},"then",{get:function(){e=!0}})),c=e}}catch(a){c=!1}return c}(),y=function(a,b){return!(!e||a!==v||b!==c)||p(a,b)},z=function(a){var b=k(a)[q];return void 0!=b?b:a},A=function(a){var b;return!(!j(a)||"function"!=typeof(b=a.then))&&b},B=function(a){var b,c;this.promise=new a(function(a,d){
if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=l(b),this.reject=l(c)},C=function(a){try{a()}catch(a){return{error:a}}},D=function(a,c){if(!a.n){a.n=!0;var d=a.c;s(function(){for(var e=a.v,g=1==a.s,h=0,i=function(b){var c,d,f=g?b.ok:b.fail,h=b.resolve,i=b.reject;try{f?(g||(a.h=!0),c=f===!0?e:f(e),c===b.promise?i(TypeError("Promise-chain cycle")):(d=A(c))?d.call(c,h,i):h(c)):i(e)}catch(a){i(a)}};d.length>h;)i(d[h++]);d.length=0,a.n=!1,c&&setTimeout(function(){var c,d,g=a.p;E(g)&&(u?b.emit("unhandledRejection",e,g):(c=f.onunhandledrejection)?c({promise:g,reason:e}):(d=f.console)&&d.error&&d.error("Unhandled promise rejection",e)),a.a=void 0},1)})}},E=function(a){var b,c=a._d,d=c.a||c.c,e=0;if(c.h)return!1;for(;d.length>e;)if(b=d[e++],b.fail||!E(b.promise))return!1;return!0},F=function(a){var b=this;b.d||(b.d=!0,b=b.r||b,b.v=a,b.s=2,b.a=b.c.slice(),D(b,!0))},G=function(a){var b,c=this;if(!c.d){c.d=!0,c=c.r||c;try{if(c.p===a)throw TypeError("Promise can't be resolved itself");(b=A(a))?s(function(){var d={r:c,d:!1};try{b.call(a,g(G,d,1),g(F,d,1))}catch(a){F.call(d,a)}}):(c.v=a,c.s=1,D(c,!1))}catch(a){F.call({r:c,d:!1},a)}}};x||(v=function(a){l(a);var b=this._d={p:m(this,v,t),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{a(g(G,b,1),g(F,b,1))}catch(a){F.call(b,a)}},a("3f")(v.prototype,{then:function(a,b){var c=new B(r(this,v)),d=c.promise,e=this._d;return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,e.c.push(c),e.a&&e.a.push(c),e.s&&D(e,!1),d},catch:function(a){return this.then(void 0,a)}})),i(i.G+i.W+i.F*!x,{Promise:v}),a("26")(v,t),a("41")(t),c=a("8")[t],i(i.S+i.F*!x,t,{reject:function(a){var b=new B(this),c=b.reject;return c(a),b.promise}}),i(i.S+i.F*(!x||w(!0)),t,{resolve:function(a){if(a instanceof v&&y(a.constructor,this))return a;var b=new B(this),c=b.resolve;return c(a),b.promise}}),i(i.S+i.F*!(x&&a("43")(function(a){v.all(a).catch(function(){})})),t,{all:function(a){var b=z(this),c=new B(b),e=c.resolve,f=c.reject,g=[],h=C(function(){n(a,!1,g.push,g);var c=g.length,h=Array(c);c?d.each.call(g,function(a,d){var g=!1;b.resolve(a).then(function(a){g||(g=!0,h[d]=a,--c||e(h))},f)}):e(h)});return h&&f(h.error),c.promise},race:function(a){var b=z(this),c=new B(b),d=c.reject,e=C(function(){n(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e&&d(e.error),c.promise}})}(a("3b")),c.exports}),a.registerDynamic("8",[],!0,function(a,b,c){var d=(this||self,c.exports={version:"1.2.6"});return"number"==typeof __e&&(__e=d),c.exports}),a.registerDynamic("45",["19","1e","2b","44","8"],!0,function(a,b,c){this||self;return a("19"),a("1e"),a("2b"),a("44"),c.exports=a("8").Promise,c.exports}),a.registerDynamic("46",[],!0,function(a,b,c){this||self;return c.exports.stringQs=function(a){return a.split("&").reduce(function(a,b){var c=b.split("=");return 2===c.length&&(a[c[0]]=null===c[1]?"":decodeURIComponent(c[1])),a},{})},c.exports.qsString=function(a,b){function c(a){return(""+a).replace("&","%26")}return b=!0,Object.keys(a).sort().map(function(d){return encodeURIComponent(d)+"="+(b?c(a[d]):encodeURIComponent(a[d]))}).join("&")},c.exports}),a.registerDynamic("47",["46"],!0,function(a,b,c){this||self;return c.exports=a("46"),c.exports}),a.registerDynamic("48",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),function(){var c=a.amdDefine;!function(a,e){"function"==typeof c&&c.amd?c("49",["4a"],e):"object"==typeof modules&&d.exports?d.exports=e(b("leaflet")):e(L)}(this,function(a){"use strict";return a.TileLayer.Provider=a.TileLayer.extend({initialize:function(b,c){var d=a.TileLayer.Provider.providers,e=b.split("."),f=e[0],g=e[1];if(!d[f])throw"No such provider ("+f+")";var h={url:d[f].url,options:d[f].options};if(g&&"variants"in d[f]){if(!(g in d[f].variants))throw"No such variant of "+f+" ("+g+")";var i,j=d[f].variants[g];i="string"==typeof j?{variant:j}:j.options,h={url:j.url||h.url,options:a.Util.extend({},h.options,i)}}var k="file:"===window.location.protocol||h.options.forceHTTP;0===h.url.indexOf("//")&&k&&(h.url="http:"+h.url),h.options.retina&&(c.detectRetina&&a.Browser.retina?c.detectRetina=!1:h.options.retina="");var l=function(a){return a.indexOf("{attribution.")===-1?a:a.replace(/\{attribution.(\w*)\}/,function(a,b){return l(d[b].options.attribution)})};h.options.attribution=l(h.options.attribution);var m=a.Util.extend({},h.options,c);a.TileLayer.prototype.initialize.call(this,h.url,m)}}),a.TileLayer.Provider.providers={OpenStreetMap:{url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},OpenTopoMap:{url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},Thunderforest:{url:"//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, {attribution.OpenStreetMap}',variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19}},SpinalMap:{options:{variant:"spinal-map",maxZoom:11}},Landscape:"landscape",Outdoors:"outdoors",Pioneer:"pioneer"}},OpenMapSurfer:{url:"http://korona.geog.uni-heidelberg.de/tiles/{variant}/x={x}&y={y}&z={z}",options:{maxZoom:20,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Roads:"roads",AdminBounds:{options:{variant:"adminb",maxZoom:19}},Grayscale:{options:{variant:"roadsg",maxZoom:19}}}},Hydda:{url:"http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"1234"},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:"//api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd"}},Stamen:{url:"//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{options:{variant:"watercolor",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TerrainBackground:{options:{variant:"terrain-background",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TopOSMRelief:{options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},Esri:{url:"//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"//{s}.{base}.maps.cit.api.here.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?app_id={app_id}&app_code={app_code}&lg={language}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},FreeMapSK:{url:"http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,subdomains:"1234",bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,attribution:'Datenquelle: <a href="www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}",options:{attribution:'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{options:{variant:"VIIRS_CityLights_2012",maxZoom:8}},ModisTerraLSTDay:{options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,opacity:.75}},ModisTerraSnowCover:{options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,opacity:.75}},ModisTerraAOD:{options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,opacity:.75}},ModisTerraChlorophyll:{options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,opacity:.75}}}},NLS:{url:"//nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,subdomains:"0123"}}},a.tileLayer.provider=function(b,c){return new a.TileLayer.Provider(b,c)},a})}(),function(){var b=a.amdDefine;b("4b",["49"],function(a){return a})}(),function(){var b=a.amdDefine;!function(){function a(a){a.Control.Loading=a.Control.extend({options:{position:"topleft",separate:!1,zoomControl:null,spinjs:!1,spin:{lines:7,length:3,width:3,radius:5,rotate:13,top:"83%"}},initialize:function(b){a.setOptions(this,b),this._dataLoaders={},null!==this.options.zoomControl&&(this.zoomControl=this.options.zoomControl)},onAdd:function(b){if(this.options.spinjs&&"function"!=typeof Spinner)return c.error("Leaflet.loading cannot load because you didn't load spin.js (http://fgnass.github.io/spin.js/), even though you set it in options.");this._addLayerListeners(b),this._addMapListeners(b),this.options.separate||this.zoomControl||(b.zoomControl?this.zoomControl=b.zoomControl:b.zoomsliderControl&&(this.zoomControl=b.zoomsliderControl));var d,e="leaflet-control-loading";return this.zoomControl&&!this.options.separate?(d=this.zoomControl._container,e+=" leaflet-bar-part-bottom leaflet-bar-part last",a.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom")):d=a.DomUtil.create("div","leaflet-control-zoom leaflet-bar"),this._indicator=a.DomUtil.create("a",e,d),this.options.spinjs&&(this._spinner=new Spinner(this.options.spin).spin(),this._indicator.appendChild(this._spinner.el)),d},onRemove:function(a){this._removeLayerListeners(a),this._removeMapListeners(a)},removeFrom:function(b){return this.zoomControl&&!this.options.separate?(this._container.removeChild(this._indicator),this._map=null,this.onRemove(b),this):a.Control.prototype.removeFrom.call(this,b)},addLoader:function(a){this._dataLoaders[a]=!0,this.updateIndicator()},removeLoader:function(a){delete this._dataLoaders[a],this.updateIndicator()},updateIndicator:function(){this.isLoading()?this._showIndicator():this._hideIndicator()},isLoading:function(){return this._countLoaders()>0},_countLoaders:function(){var a,b=0;for(a in this._dataLoaders)this._dataLoaders.hasOwnProperty(a)&&b++;return b},_showIndicator:function(){a.DomUtil.addClass(this._indicator,"is-loading"),this.options.separate||(this.zoomControl instanceof a.Control.Zoom?a.DomUtil.removeClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"==typeof a.Control.Zoomslider&&this.zoomControl instanceof a.Control.Zoomslider&&a.DomUtil.removeClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_hideIndicator:function(){a.DomUtil.removeClass(this._indicator,"is-loading"),this.options.separate||(this.zoomControl instanceof a.Control.Zoom?a.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"==typeof a.Control.Zoomslider&&this.zoomControl instanceof a.Control.Zoomslider&&a.DomUtil.addClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_getLastControlButton:function(){for(var a=this.zoomControl._container,b=a.children.length-1;b>0;){var c=a.children[b];if(this._indicator!==c&&0!==c.offsetWidth&&0!==c.offsetHeight)break;b--}return a.children[b]},_handleLoading:function(a){this.addLoader(this.getEventId(a))},_handleLoad:function(a){this.removeLoader(this.getEventId(a))},getEventId:function(a){return a.id?a.id:a.layer?a.layer._leaflet_id:a.target._leaflet_id},_layerAdd:function(a){if(a.layer&&a.layer.on)try{a.layer.on({loading:this._handleLoading,load:this._handleLoad},this)}catch(b){c.warn("L.Control.Loading: Tried and failed to add  event handlers to layer",a.layer),c.warn("L.Control.Loading: Full details",b)}},_addLayerListeners:function(a){a.eachLayer(function(a){a.on&&a.on({loading:this._handleLoading,load:this._handleLoad},this)},this),a.on("layeradd",this._layerAdd,this)},_removeLayerListeners:function(a){a.eachLayer(function(a){a.off&&a.off({loading:this._handleLoading,load:this._handleLoad},this)},this),a.off("layeradd",this._layerAdd,this)},_addMapListeners:function(a){a.on({baselayerchange:this._handleLoading,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)},_removeMapListeners:function(a){a.off({baselayerchange:this._handleLoading,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)}}),a.Map.addInitHook(function(){this.options.loadingControl&&(this.loadingControl=new a.Control.Loading,this.addControl(this.loadingControl))}),a.Control.loading=function(b){return new a.Control.Loading(b)}}var c=window.console||{error:function(){},warn:function(){}};"function"==typeof b&&b.amd?b("4c",["4a"],function(b){a(b)}):a(L)}()}(),function(){var b=a.amdDefine;b("4d",["4c"],function(a){return a})}(),a.registerDynamic("4e",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),a.register("4f",["50","51"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a},function(a){c=a.default}],execute:function(){d=function(a){function c(){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),this.datasets=[]}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"loadFromDCAT",value:function(a){var c=this;return this.datasets=[],this.fire("loading",{url:a}),b.loadCatalog(a).then(function(b){c.url=a;var d=b.datasets,e=!0,f=!1,g=void 0;try{for(var h,i=d[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;c.datasets.push(j)}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}c.fire("load",{url:a,datasets:d})}).catch(function(b){throw c.fire("loadError",{url:a,error:b}),b})}}]),c}(c),a("default",d)}}}),a.register("52",["51"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default}],execute:function(){c=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this._datasets=new Map,this._formats=a,this._staticActionContext={}}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"addStaticActionContext",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=Object.keys(a)[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._staticActionContext[g]=a[g]}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"addDataset",value:function(a,b){a.id||(a.id=(new Date).getTime()),this._datasets.has(a.id)||(a.virtual||(a=JSON.parse(JSON.stringify(a))),this._datasets.set(a.id,a),this.fire("add",{dataset:a,parent:b}),this._loadDistribution(a))}},{key:"removeDataset",value:function(a){if(this._datasets.has(a.id)){var b=!0,c=!1,d=void 0;try{for(var e,f=(a.distributions.filter(function(a){return"actions"in a})[Symbol.iterator]());!(b=(e=f.next()).done);b=!0){var g=e.value,h=!0,i=!1,j=void 0;try{for(var k,l=g.actions[Symbol.iterator]();!(h=(k=l.next()).done);h=!0){var m=k.value;m.remove()}}catch(a){i=!0,j=a}finally{try{!h&&l.return&&l.return()}finally{if(i)throw j}}}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}this._datasets.delete(a.id),this.fire("remove",{dataset:a})}}},{key:"requestFocus",value:function(a){this.fire("requestFocus",{dataset:a})}},{key:"setDatasetTitle",value:function(a,b){var c=a.title,d={unknown:b};a.title=d,this.fire("titleChange",{dataset:a,oldTitle:c,newTitle:d})}},{key:"filterDistributions",value:function(a){var b=[],c=!0,d=!1,e=void 0;try{for(var f,g=this.datasets[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=!0,j=!1,k=void 0;try{for(var l,m=h.distributions[Symbol.iterator]();!(i=(l=m.next()).done);i=!0){var n=l.value;a(n)&&b.push({distribution:n,dataset:h})}}catch(a){j=!0,k=a}finally{try{!i&&m.return&&m.return()}finally{if(j)throw k}}}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return b}},{key:"_loadDistribution",value:function(a){var b=this;this.fire("distributionsLoading",{dataset:a});var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=function(){var d=g.value;j=!0,k=!1,l=void 0;try{var e=function(){var e=n.value;if(e.supports(d.mediaType)){b.fire("distributionLoading",{dataset:a,distribution:d});var f=d.url||d.data;d.formatImpl=e;var g=e.load(f).then(function(c){var f=e.getMetadata(c),g={dataset:a,distribution:d,workspace:b};for(var h in b._staticActionContext)g[h]=b._staticActionContext[h];var i=e.getActions(c,g);d.metadata=f,d.actions=i,d.data=c,b.fire("distributionLoad",{dataset:a,distribution:d})}).catch(function(c){d.error=c,b.fire("distributionLoadError",{dataset:a,distribution:d,error:c}),console.log(c)});c.push(g)}};for(m=b._formats[Symbol.iterator]();!(j=(n=m.next()).done);j=!0)e()}catch(a){k=!0,l=a}finally{try{!j&&m.return&&m.return()}finally{if(k)throw l}}},i=a.distributions[Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j,k,l,m,n;h()}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}Promise.all(c).then(function(){b.fire("distributionsLoad",{dataset:a})})}},{key:"datasets",get:function(){return[].concat(babelHelpers.toConsumableArray(this._datasets.values()))}}]),b}(b),a("default",c)}}}),a.register("53",["54","55"],function(a){"use strict";function b(a){return c(a).then(d)}function c(a){var b=document.createElement("a");b.href=a;var c=b.username,d=b.password;if(c){var e=/^(https?:\/\/)(.*)@(.*)/.exec(a);a=e[1]+e[3]}var f=void 0;return f=a.startsWith("blob:")||a.indexOf("GetCapabilities")!==-1?a:a+"?service=wms&version=1.1.1&request=GetCapabilities",new Promise(function(b,e){var g=new XMLHttpRequest;if(g.open("GET",f),g.overrideMimeType("text/xml"),c){var h=c+":"+d;g.setRequestHeader("Authorization","Basic "+btoa(h))}g.addEventListener("load",function(){var a=g.responseXML;b(a)}),g.addEventListener("error",function(){e(new Error("Network error loading resource at "+a))}),g.send()})}function d(a){a=a.documentElement;var b=[];return e("Layer",a).each(function(a){if("1"===e(a).get("@queryable")){var c=e("Name",a,!0).text(),d=e("Title",a,!0).text();b.push({name:c,title:d})}}),b}var e,f,g;return{setters:[function(a){e=a.$},function(a){f=a.default}],execute:function(){g=function(a){function c(a){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,a),this.label="Web Map Service",this.shortLabel="WMS",this.mediaTypes=["application/wms+xml"]}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"doLoad",value:function(a){return b(a).then(function(b){return{layers:b,url:a}})}},{key:"getMetadata",value:function(a){return{format:this.label,content:a.layers.length+" layers"}}}]),c}(f),a("default",g)}}}),a.registerDynamic("56",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),a.register("57",["58","59","5b","5c","5d","5a"],function(a){"use strict";function b(a,b){if(!a)return b._axisNames;var c=[].concat(babelHelpers.toConsumableArray(a.axes.values())).filter(function(a){return a.values.length>1}).length>1,d=a._rangeAxisOrder||b._axisNames;if(c&&!d)throw new Error("Range axis order missing");return d=d||[].concat(babelHelpers.toConsumableArray(a.axes.keys()))}function c(a,c){if(!a)return c._shape;var d=b(a,c),e=d.map(function(b){return a.axes.get(b).values.length});if(c._shape){var f=c._shape.length===e.length&&c._shape.every(function(a,b){return a===e[b]});if(!f)throw new Error("range.shape must match domain axis sizes")}return e}function d(a){return function(b){return void 0===b&&(b=a.parameters.keys()),b=Array.from(b),Promise.all(b.map(function(b){return a.loadRange(b)})).then(function(a){for(var c=new Map,d=0;d<b.length;d++)c.set(b[d],a[d]);return c})}}function e(a,b){return function(c){return a.loadDomain().then(function(){var d=a._covjson.ranges[c];if("object"==typeof d){var e=d;return f(a,c,e,a._covjson.domain,b)}var g=d;return D(g).then(function(d){var e=d.data;return f(a,c,e,a._covjson.domain,b)})})}}function f(a,b,c,d){var e=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];if(e=C(d,e),"NdArray"===c.type||"Range"===c.type){n(c,d),a.options.cacheRanges&&(a._covjson.ranges[b]=c,a._updateLoadStatus());var f=k(c,d,e);return Promise.resolve(f)}if("TiledNdArray"===c.type)return g(c,e);throw new Error("Unsupported: "+c.type)}function g(a,b){function c(b){var c={};return b.forEach(function(b,d){return c[a.axisNames[d]]=b}),l.expand(c)}for(var d=a.axisNames.map(function(a){return b[a]}),e=function(b){return b.map(function(b,c){return null===b?a.shape[c]:b})},f=a.tileSets.map(function(a){return i(e(a.tileShape),d)}),g=j(f),k=a.tileSets[g],l=y.parse(k.urlTemplate),m=e(k.tileShape),p=[],q=0;q<m.length;q++){for(var r=d[q],s=r.start,t=r.stop,u=r.step,v=m[q],w=Math.floor(s/v),z=Math.ceil(t/v),A=[],B=w;B<z;B++){var C=(B+.5)*v,E=Math.floor((C-s)/u),F=s+E*u,G=s+(E+1)*u,H=B*v,I=(B+1)*v;(F>=H||I<=G)&&A.push(B)}p.push(A)}var J=h(p),K=d.map(function(a){var b=a.start,c=a.stop,d=a.step;return Math.floor((c-b)/d)+(c-b)%d});if(1===J.length&&K.every(function(a,b){return a===m[b]})){var L=c(J[0]);return D(L).then(function(a){var b=a.data;return n(b),b})}var M=function(){var b=K.reduce(function(a,b){return a*b}),e=x(new Array(b),K),f=J.map(function(a){var b=c(a);return D(b).then(function(b){var c=b.data;n(c);for(var f=a.map(function(a,b){return a*m[b]}),g=[],i=0;i<m.length;i++){var j=d[i],k=j.start,l=j.stop,o=j.step,p=m[i],q=f[i],r=[],s=0;q<k&&(s=k-q);var t=p;q+t>l&&(t=l-q);for(var u=s;u<t;u++){var v=q+u;(v-k)%o===0&&r.push(u)}g.push(r)}var w=h(g),x=!0,y=!1,z=void 0;try{for(var A,B=w[Symbol.iterator]();!(x=(A=B.next()).done);x=!0){var C,D=A.value,E=(C=c._ndarr).get.apply(C,babelHelpers.toConsumableArray(D)),F=D.map(function(a,b){var c=f[b]+a;return Math.floor((c-d[b].start)/d[b].step)});e.set.apply(e,babelHelpers.toConsumableArray(F).concat([E]))}}catch(a){y=!0,z=a}finally{try{!x&&B.return&&B.return()}finally{if(y)throw z}}})});return{v:Promise.all(f).then(function(){var b={dataType:a.dataType,get:o(e,a.axisNames),_ndarr:e,_axisNames:a.axisNames,_shape:K};return b.shape=new Map(a.axisNames.map(function(a,b){return[a,e.shape[b]]})),b})}}();if("object"==typeof M)return M.v}function h(a){return a.reduce(function(a,b){return a.map(function(a){return b.map(function(b){return a.concat(b)})}).reduce(function(a,b){return a.concat(b)},[])},[[]])}function i(a,b){for(var c=1,d=0;d<a.length;d++){var e=b[d],f=e.start,g=e.stop,h=e.step,i=a[d],j=Math.floor(f/i),k=Math.ceil(g/i),l=i*(k-j);c*=Math.ceil(l/Math.max(h,i))}var m=c*a.reduce(function(a,b){return a*b});return{tileCount:c,valueCount:m}}function j(a){var b=1e3,c=a.map(function(a){return a.tileCount+a.valueCount/b}),d=c.reduce(function(a,b,c,d){return b<d[a]?c:a},0);return d}function k(a,c,d){var e,f,g=a._ndarr,h=b(c,a),i=h.map(function(a){return d[a].start}),j=h.map(function(a){return d[a].stop}),k=h.map(function(a){return d[a].step}),l=(e=(f=g.hi.apply(g,babelHelpers.toConsumableArray(j))).lo.apply(f,babelHelpers.toConsumableArray(i))).step.apply(e,babelHelpers.toConsumableArray(k)),m={dataType:a.dataType,get:o(l,h),_ndarr:l,_axisNames:h,_shape:l.shape};return m.shape=new Map(h.map(function(a,b){return[a,l.shape[b]]})),m}function l(a,b){return function(c){return a.loadDomain().then(function(f){c=C(f,c);var g=A(f,c),h=q(c,b);f._rangeAxisOrder&&(g._rangeAxisOrder=f._rangeAxisOrder);var i={_covjson:a._covjson,options:a.options,type:s,domainProfiles:a.domainProfiles,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return Promise.resolve(g)}};return i.loadRange=e(i,h),i.loadRanges=d(i),i.subsetByIndex=l(i,h),i.subsetByValue=B.bind(null,i),i})}}function m(a,b){if(!("__transformDone"in a[b])){var c=a[b];if(c.key=b,c.unit&&"string"==typeof c.unit.symbol&&(c.unit.symbol={value:c.unit.symbol}),c.categoryEncoding){var d=new Map,e=!0,f=!1,g=void 0;try{for(var h,i=Object.keys(c.categoryEncoding)[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,k=c.categoryEncoding[j];Array.isArray(k)||(k=[k]),d.set(j,k)}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}c.categoryEncoding=d}c.__transformDone=!0}}function n(a,d){if(!("__transformDone"in a)){var e=a.values;if(void 0===a.actualMin){var f=z(e),g=babelHelpers.slicedToArray(f,2),h=g[0],i=g[1];null!==h&&(a.actualMin=h,a.actualMax=i)}a.shape&&(a._shape=a.shape),a.axisNames&&(a._axisNames=a.axisNames,delete a.axisNames);var j=b(d,a),k=c(d,a),l=x(e,k);return a._ndarr=l,a.get=o(l,j),a.shape=new Map(j.map(function(a,b){return[a,k[b]]})),a.__transformDone=!0,
a}}function o(a,b){for(var c="",d=0;d<b.length;d++)c&&(c+=","),c+="'"+b[d]+"' in obj ? obj['"+b[d]+"'] : 0";var e=new Function("ndarr","return function ndarrget (obj) { return ndarr.get("+c+") }")(a);return e}function p(a,b,c){if(!("__transformDone"in a)){c=a.domainType||c,c&&c.indexOf(":")===-1&&(c=w+c),a.domainType=c;var d=new Map,e=!0,f=!1,g=void 0;try{for(var h,i=Object.keys(a.axes)[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;d.set(j,a.axes[j])}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}a.axes=d;var k=!0,l=!1,m=void 0;try{for(var n,o=d[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=babelHelpers.slicedToArray(n.value,2),q=p[0],s=p[1];if(s.key=q,s.dataType&&s.dataType.indexOf(":")===-1&&(s.dataType=v+s.dataType),s.components&&(s.coordinates=s.components),s.coordinates||(s.coordinates=[q]),s.components=s.coordinates,"start"in s&&"stop"in s&&"num"in s){var t=new Float64Array(s.num),u=void 0;if(1===s.num){if(s.start!==s.stop)throw new Error("regular axis of length 1 must have equal start/stop values");u=0}else u=(s.stop-s.start)/(s.num-1);for(var x=0;x<s.num;x++)t[x]=s.start+x*u;s.values=t,delete s.start,delete s.stop,delete s.num}if(Array.isArray(s.values)&&"number"==typeof s.values[0]){for(var t=new Float64Array(s.values.length),x=0;x<s.values.length;x++)t[x]=s.values[x];s.values=t}s.bounds=r(s)}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}b&&(a.referencing=b);var y=!0,z=!1,A=void 0;try{for(var B,C=a.referencing[Symbol.iterator]();!(y=(B=C.next()).done);y=!0){var D=B.value;D.components&&(D.coordinates=D.components)}}catch(a){z=!0,A=a}finally{try{!y&&C.return&&C.return()}finally{if(z)throw A}}return a.rangeAxisOrder&&(a._rangeAxisOrder=a.rangeAxisOrder,delete a.rangeAxisOrder),a.__transformDone=!0,a}}function q(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c={},d=!0,e=!1,f=void 0;try{for(var g,h=Object.keys(a)[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=a[i],k=b[i]||{},l=k.start,m=void 0===l?0:l,n=k.step,o=void 0===n?1:n;c[i]={start:m+o*j.start,stop:m+o*j.stop,step:o*j.step}}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}function r(a){if(a.bounds){var b=function(){var b=a.bounds;return{v:{get:function(a){return[b[2*a],b[2*a+1]]}}}}();if("object"==typeof b)return b.v}}var s,t,u,v,w,x,y,z,A,B,C,D,E;return a("transformParameter",m),a("transformDomain",p),{setters:[function(a){s=a.COVERAGE},function(a){t=a.shallowcopy,u=a.getNamespacePrefixes,v=a.CORE_PREFIX,w=a.DOMAINTYPES_PREFIX},function(a){x=a.default},function(a){y=a.default},function(a){z=a.minMax,A=a.subsetDomainByIndex,B=a.subsetByValue,C=a.normalizeIndexSubsetConstraints},function(a){D=a.load}],execute:function(){E=function(){function a(b,c){babelHelpers.classCallCheck(this,a),this._covjson=b,this.type=s,this.ld={},this._exposeLd(b),this.prefixes=u(this.ld),this.options=c?t(c):{},this.id=b.id,this.parameters=new Map;var d=!0,e=!1,f=void 0;try{for(var g,h=Object.keys(b.parameters)[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;m(b.parameters,i),this.parameters.set(i,b.parameters[i])}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}var j=void 0;j="string"==typeof this._covjson.domain?this._covjson.domainType:this._covjson.domain.domainType||this._covjson.domainType,j&&j.indexOf(":")===-1&&(j=w+j),this.domainType=j,this._updateLoadStatus()}return babelHelpers.createClass(a,[{key:"_updateLoadStatus",value:function(){var a=this,b=function(a){return"object"==typeof a},c=b(this._covjson.domain),d=Object.keys(this._covjson.ranges).every(function(c){return b(a._covjson.ranges[c])});this.loaded=c&&d}},{key:"_exposeLd",value:function(a){if(a["@context"]){var b=t(a);delete b.domain,delete b.ranges,this.ld=JSON.parse(JSON.stringify(b))}}},{key:"loadDomain",value:function(){var a=this,b=this._covjson.domain;if(this._domainPromise)return this._domainPromise;var c=void 0;if("object"==typeof b){var d=b;p(d,this.options.referencing,this.domainType),c=Promise.resolve(d)}else{var e=b;c=D(e).then(function(b){var c=b.data;return p(c,a.options.referencing,a.domainType),a._covjson.domain=c,a._updateLoadStatus(),c})}return this._domainPromise=c,c}},{key:"loadRange",value:function(a){return e(this)(a)}},{key:"loadRanges",value:function(a){return d(this)(a)}},{key:"subsetByIndex",value:function(a){return l(this)(a)}},{key:"subsetByValue",value:function(a){return B(this,a)}}]),a}(),a("default",E)}}}),a.register("5e",["57","58","59","5d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default,c=a.transformDomain,d=a.transformParameter},function(a){e=a.COVERAGECOLLECTION},function(a){f=a.shallowcopy,g=a.getNamespacePrefixes,h=a.DOMAINTYPES_PREFIX},function(a){i=a.CollectionQuery}],execute:function(){j=function(){function a(f){babelHelpers.classCallCheck(this,a),this.type=e,this.ld={},this._exposeLd(f),this.prefixes=g(this.ld),this.id=f.id;var i=f.domainType;i&&i.indexOf(":")===-1&&(i=h+i),this.domainType=i;var j=[],k=f.parameters?f.parameters:{},l=!0,m=!1,n=void 0;try{for(var o,p=Object.keys(k)[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value,r=k[q];r.id||(r.id=Math.round((new Date).getTime()*Math.random()).toString())}}catch(a){m=!0,n=a}finally{try{!l&&p.return&&p.return()}finally{if(m)throw n}}var s={};f.referencing&&(s.referencing=f.referencing);var t=!0,u=!1,v=void 0;try{for(var w,x=f.coverages[Symbol.iterator]();!(t=(w=x.next()).done);t=!0){var y=w.value;y.domainType||(y.domainType=i),y.parameters||(y.parameters={});var z=!0,A=!1,B=void 0;try{for(var C,D=Object.keys(k)[Symbol.iterator]();!(z=(C=D.next()).done);z=!0){var q=C.value;q in y.ranges&&(y.parameters[q]=k[q])}}catch(a){A=!0,B=a}finally{try{!z&&D.return&&D.return()}finally{if(A)throw B}}f["@context"]&&(y["@context"]=f["@context"]),j.push(new b(y,s))}}catch(a){u=!0,v=a}finally{try{!t&&x.return&&x.return()}finally{if(u)throw v}}if(this.coverages=j,f.parameters){this.parameters=new Map;var E=!0,F=!1,G=void 0;try{for(var H,I=Object.keys(f.parameters)[Symbol.iterator]();!(E=(H=I.next()).done);E=!0){var q=H.value;d(f.parameters,q),this.parameters.set(q,f.parameters[q])}}catch(a){F=!0,G=a}finally{try{!E&&I.return&&I.return()}finally{if(F)throw G}}}f.domainTemplate&&(c(f.domainTemplate),this.domainTemplate=f.domainTemplate)}return babelHelpers.createClass(a,[{key:"query",value:function(){return new i(this)}},{key:"_exposeLd",value:function(a){if(a["@context"]){var b=f(a);delete b.coverages,this.ld=JSON.parse(JSON.stringify(b))}}}]),a}(),a("default",j)}}}),a.register("58",["5d"],function(a){"use strict";var b;return{setters:[function(b){var c={};c.DOMAIN=b.DOMAIN,c.COVERAGE=b.COVERAGE,c.COVERAGECOLLECTION=b.COVERAGECOLLECTION,a(c)}],execute:function(){b="http://www.iana.org/assignments/relation/",a("LINKRELPREFIX",b)}}}),a.register("59",["5d"],function(a){"use strict";function b(a,b){if(!a)throw b=b||"Assertion failed",new Error(b)}function c(a){var b=Object.create(Object.getPrototypeOf(a));for(var c in a)b[c]=a[c];return b}function d(a){var b=a["@context"];if(b){Array.isArray(b)||(b=[b]);var c=new Map,d=!0,e=!1,f=void 0;try{for(var g,h=b[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;if("string"!=typeof i){var j=!0,k=!1,l=void 0;try{for(var m,n=Object.keys(i)[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value;"string"==typeof i[o]&&c.set(o,i[o])}}catch(a){k=!0,l=a}finally{try{!j&&n.return&&n.return()}finally{if(k)throw l}}}}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}}var e,f,g;return a("assert",b),a("shallowcopy",c),a("getNamespacePrefixes",d),{setters:[function(b){var c={};c.minMax=b.minMax,c.indicesOfNearest=b.indicesOfNearest,c.indexOfNearest=b.indexOfNearest,a(c)}],execute:function(){e="https://covjson.org/def/",f=e+"core#",a("CORE_PREFIX",f),g=e+"domainTypes#",a("DOMAINTYPES_PREFIX",g)}}}),a.register("5f",["59"],function(a){"use strict";function b(a){var b=a?'; profile="'+g+'"':"",c=e.COVJSON+b+"; q=1.0, "+e.JSONLD+"; q=0.1, "+e.JSON+"; q=0.1";return c}function c(a,b){return Array.isArray(b)||(b=[b]),b.some(function(b){return 0===a.indexOf(b)})}var d,e,f,g;return a("getAcceptHeader",b),a("matchesMediaTypes",c),{setters:[function(a){d=a.CORE_PREFIX}],execute:function(){e={COVJSON:"application/prs.coverage+json",JSONLD:"application/ld+json",JSON:"application/json",TEXT:"text/plain"},a("MEDIATYPE",e),f={COVJSON:".covjson"},a("EXT",f),g=d+"standalone",a("COVJSON_PROFILE_STANDALONE",g)}}}),a.register("5a",["5f"],function(a){"use strict";function b(a){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],f=arguments.length<=2||void 0===arguments[2]?"arraybuffer":arguments[2];if(["arraybuffer","text"].indexOf(f)===-1)throw new Error;var g=e.headers||{};return new Promise(function(b,h){var i=new XMLHttpRequest;i.open("GET",a),i.responseType=f;var j=d(e.eagerload);if(i.setRequestHeader("Accept",j),g){var k=!0,l=!1,m=void 0;try{for(var n,o=Object.keys(g)[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=n.value;i.setRequestHeader(p,g[p])}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}}i.addEventListener("load",function(){try{if(!(i.status>=200&&i.status<300||304===i.status))return void h(new Error('Resource "'+a+'" not found, HTTP status code: '+i.status));var d=void 0;if("arraybuffer"===f){if(!window.TextDecoder)return void h({responseType:"text"});var e=new Date;d=JSON.parse((new TextDecoder).decode(new DataView(i.response))),console.log("JSON decoding: "+(new Date-e)+"ms")}else{var e=new Date;d=JSON.parse(i.response),console.log("JSON decoding (slow path): "+(new Date-e)+"ms")}var g=c(i.getAllResponseHeaders());b({data:d,headers:g})}catch(a){h(a)}}),i.addEventListener("error",function(){h(new Error("Network error loading resource at "+a))}),i.send()}).catch(function(c){if(c.responseType)return b(a,g,c.responseType);throw c})}function c(a){var b={};if(!a)return b;for(var c=a.split("\r\n"),d=0;d<c.length;d++){var e=c[d],f=e.indexOf(": ");if(f>0){var g=e.substring(0,f).toLowerCase(),h=e.substring(f+2);b[g]=h}}return b}var d;return a("load",b),{setters:[function(a){d=a.getAcceptHeader}],execute:function(){}}}),a.register("60",["57","58","59","5e","5a"],function(a){"use strict";function b(a,b){return o.load(a,b)}function c(a){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return"object"==typeof a?Promise.resolve().then(function(){return d(a)}):b(a,c).then(function(a){var b=a.data,c=a.headers;return d(b,c)})}function d(a,b){if(f(a),[i,j,k].indexOf(a.type)===-1)throw new Error("CoverageJSON document must be of Coverage, CoverageCollection, or Domain type");var c=void 0;return a.type===k?(h(a),c=a):c=a.type===i?new g(a):new n(a),a.type!==i&&a.type!==j||e(c,b),c}function e(a,b){if(b&&b.link){var c=a.ld,d=!0,e=!1,f=void 0;try{for(var g,h=b.link.split(",")[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;i=i.trim();var j=i.split(";"),k=j[0].substr(1,j[0].length-2),m=!0,n=!1,o=void 0;try{for(var p,q=j.slice(1)[Symbol.iterator]();!(m=(p=q.next()).done);m=!0){var r=p.value,s=r.indexOf("rel=");if(s!==-1){var t=r.substring(s+5,r.length-1);t.startsWith("http://")||t.startsWith("https://")||(t=l+t),c[t]?Array.isArray(c[t])?c[t].push(k):c[t]=[c[t],k]:c[t]=k}}}catch(a){n=!0,o=a}finally{try{!m&&q.return&&q.return()}finally{if(n)throw o}}}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}}}function f(a){m("type"in a,'"type" missing'),a.type===i?(m("parameters"in a,'"parameters" missing'),m("domain"in a,'"domain" missing'),m("ranges"in a,'"ranges" missing')):a.type===j&&m(Array.isArray(a.coverages),'"coverages" must be an array')}var g,h,i,j,k,l,m,n,o;return a("load",b),a("read",c),{setters:[function(a){g=a.default,h=a.transformDomain},function(a){i=a.COVERAGE,j=a.COVERAGECOLLECTION,k=a.DOMAIN,l=a.LINKRELPREFIX},function(a){m=a.assert},function(a){n=a.default},function(a){o=a}],execute:function(){}}}),a.register("61",["60"],function(a){"use strict";return{setters:[function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);c.default=b.default,a(c)}],execute:function(){}}}),a.registerDynamic("62",[],!0,function(a,b,c){"format cjs";var d;this||self;return function(a,e){"object"==typeof b?c.exports=e():"function"==typeof d&&d.amd?d([],e):a.urltemplate=e()}(this,function(){function a(){}return a.prototype.encodeReserved=function(a){return a.split(/(%[0-9A-Fa-f]{2})/g).map(function(a){return/%[0-9A-Fa-f]/.test(a)||(a=encodeURI(a).replace(/%5B/g,"[").replace(/%5D/g,"]")),a}).join("")},a.prototype.encodeUnreserved=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})},a.prototype.encodeValue=function(a,b,c){return b="+"===a||"#"===a?this.encodeReserved(b):this.encodeUnreserved(b),c?this.encodeUnreserved(c)+"="+b:b},a.prototype.isDefined=function(a){return void 0!==a&&null!==a},a.prototype.isKeyOperator=function(a){return";"===a||"&"===a||"?"===a},a.prototype.getValues=function(a,b,c,d){var e=a[c],f=[];if(this.isDefined(e)&&""!==e)if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)e=e.toString(),d&&"*"!==d&&(e=e.substring(0,parseInt(d,10))),f.push(this.encodeValue(b,e,this.isKeyOperator(b)?c:null));else if("*"===d)Array.isArray(e)?e.filter(this.isDefined).forEach(function(a){f.push(this.encodeValue(b,a,this.isKeyOperator(b)?c:null))},this):Object.keys(e).forEach(function(a){this.isDefined(e[a])&&f.push(this.encodeValue(b,e[a],a))},this);else{var g=[];Array.isArray(e)?e.filter(this.isDefined).forEach(function(a){g.push(this.encodeValue(b,a))},this):Object.keys(e).forEach(function(a){this.isDefined(e[a])&&(g.push(this.encodeUnreserved(a)),g.push(this.encodeValue(b,e[a].toString())))},this),this.isKeyOperator(b)?f.push(this.encodeUnreserved(c)+"="+g.join(",")):0!==g.length&&f.push(g.join(","))}else";"===b?this.isDefined(e)&&f.push(this.encodeUnreserved(c)):""!==e||"&"!==b&&"?"!==b?""===e&&f.push(""):f.push(this.encodeUnreserved(c)+"=");return f},a.prototype.parse=function(a){var b=this,c=["+","#",".","/",";","?","&"];return{expand:function(d){return a.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(a,e,f){if(e){var g=null,h=[];if(c.indexOf(e.charAt(0))!==-1&&(g=e.charAt(0),e=e.substr(1)),e.split(/,/g).forEach(function(a){var c=/([^:\*]*)(?::(\d+)|(\*))?/.exec(a);h.push.apply(h,b.getValues(d,g,c[1],c[2]||c[3]))}),g&&"+"!==g){var i=",";return"?"===g?i="&":"#"!==g&&(i=g),(0!==h.length?g:"")+h.join(i)}return h.join(",")}return b.encodeReserved(f)})}}},new a}),c.exports}),a.registerDynamic("5c",["62"],!0,function(a,b,c){this||self;return c.exports=a("62"),c.exports}),a.register("63",["64","5c"],function(a){"use strict";function b(a){return a.id?g.frame(a.ld,{"@context":q,id:a.id},t).then(function(a){return g.compact(a,a["@context"],t)}).then(function(a){return new u(a)}):Promise.resolve(new u)}function c(a,b){if(Object.keys(a).length>0)throw new Error(b)}function d(a){return a.map(e).join(",")}function e(a){var b=a.toString();return b.indexOf("e")!==-1&&(b=a.toFixed(20)),b}function f(a,b){var c=void 0;return"number"==typeof b?c=e(b):b.start!==b.stop||b.step&&1!==b.step?(c=e(b.start)+":"+e(stop),b.step&&(c+=":"+e(b.step))):c=e(b.start),a+"["+c+"]"}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return a("discover",b),{setters:[function(a){g=a.promises,h=a.default},function(a){i=a.default}],execute:function(){j="PartialCollectionView",k="IriTemplate",l="http://coverageapi.org/ns#",m=l+"api",n="http://a9.com/-/opensearch/extensions/geo/1.0/",o="http://a9.com/-/opensearch/extensions/time/1.0/",p={filterBbox:n+"box",filterTimeStart:o+"start",filterTimeEnd:o+"end",filterVerticalStart:l+"verticalStart",filterVerticalEnd:l+"verticalEnd",subsetBbox:l+"subsetBbox",subsetTimeStart:l+"subsetTimeStart",subsetTimeEnd:l+"subsetTimeEnd",subsetVerticalStart:l+"subsetVerticalStart",subsetVerticalEnd:l+"subsetVerticalEnd",subsetVerticalTarget:l+"subsetVerticalTarget",subsetIndex:l+"subsetIndex"},q=[{hydra:"http://www.w3.org/ns/hydra/core#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#",vs:"http://www.w3.org/2003/06/sw-vocab-status/ns#",dc:"http://purl.org/dc/terms/",cc:"http://creativecommons.org/ns#",property:{"@id":"hydra:property","@type":"@vocab"},required:"hydra:required",view:{"@id":"hydra:view","@type":"@id"},PartialCollectionView:"hydra:PartialCollectionView",totalItems:"hydra:totalItems",first:{"@id":"hydra:first","@type":"@id"},last:{"@id":"hydra:last","@type":"@id"},next:{"@id":"hydra:next","@type":"@id"},previous:{"@id":"hydra:previous","@type":"@id"},IriTemplate:"hydra:IriTemplate",template:"hydra:template",mapping:"hydra:mapping",IriTemplateMapping:"hydra:IriTemplateMapping",variable:"hydra:variable"},{id:"@id",type:"@type",property:{"@id":"hydra:property"},api:m}],r={"https://rawgit.com/reading-escience-centre/coveragejson/master/contexts/coveragejson-base.jsonld":{"@context":{id:"@id",type:"@type"}}},s=function(a){return a in r?Promise.resolve({contextUrl:null,document:r[a],documentUrl:a}):h.documentLoader(a)},t={documentLoader:s},u=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(babelHelpers.classCallCheck(this,a),this.supportedUrlProps=new Map,b.view&&b.view.type===j&&(this.isPaged=!0,this.paging=b.view,this.paging.total=b.totalItems),b.api&&b.api.type===k){this.hasUrlTemplate=!0,this.urlTemplate=b.api;var c=b.api.mapping,d=!0,e=!1,f=void 0;try{for(var g,h=c[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,l=i.property.id;for(var m in p)p[m]===l&&this.supportedUrlProps.set(l,i.variable)}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}}this._createCapabilities()}return babelHelpers.createClass(a,[{key:"_createCapabilities",value:function(){var a={filter:{},subset:{}},b=function(){return{start:!0,stop:!0}};this.supportsBboxFiltering&&(a.filter.x={start:!0,stop:!0,dependency:["y"]},a.filter.y={start:!0,stop:!0,dependency:["x"]}),this.supportsTimeFiltering&&(a.filter.time=b()),this.supportsVerticalFiltering&&(a.filter.vertical=b()),this.supportsBboxSubsetting&&(a.subset.x={start:!0,stop:!0,dependency:["y"]},a.subset.y={start:!0,stop:!0,dependency:["x"]}),this.supportsTimeSubsetting&&(a.subset.time=b()),this.supportsVerticalSubsetting&&(a.subset.vertical=b()),this.supportsVerticalTargetSubsetting&&(a.subset.vertical||(a.subset.vertical={}),a.subset.vertical.target=!0),this.supportsIndexSubsetting&&(a.subset.index={start:!0,stop:!0,step:!0}),this.capabilities=a}},{key:"_getFilterTemplateVars",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b={};if(a.time){if(!this.supportsTimeFiltering)throw new Error("Time filtering not supported!");var f=a.time.start,g=a.time.stop;b[this.supportedUrlProps.get(p.filterTimeStart)]=f,b[this.supportedUrlProps.get(p.filterTimeEnd)]=g,delete a.time}if(a.vertical){if(!this.supportsVerticalFiltering)throw new Error("Vertical filtering not supported!");var h=e(a.vertical.start),i=e(a.vertical.stop);b[this.supportedUrlProps.get(p.filterVerticalStart)]=h,b[this.supportedUrlProps.get(p.filterVerticalEnd)]=i,delete a.vertical}if(a.x){if(!this.supportsBboxFiltering)throw new Error("BBOX filtering not supported!");var j=d([a.x.start,a.y.start,a.x.stop,a.y.stop]);b[this.supportedUrlProps.get(p.filterBbox)]=j,delete a.x,delete a.y}return c(a,"Unrecognized filter options"),b}},{key:"_getSubsetTemplateVars",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b={};if(a.time){if(!this.supportsTimeSubsetting)throw new Error("Time subsetting not supported!");var g=a.time.start,h=a.time.stop;b[this.supportedUrlProps.get(p.subsetTimeStart)]=g,b[this.supportedUrlProps.get(p.subsetTimeEnd)]=h,delete a.time}if(a.x){if(!this.supportsBboxSubsetting)throw new Error("BBOX subsetting not supported!");var i=d([a.x.start,a.y.start,a.x.stop,a.y.stop]);b[this.supportedUrlProps.get(p.subsetBbox)]=i,delete a.x,delete a.y}if(a.vertical){if(a.vertical.target){if(!this.supportsVerticalTargetSubsetting)throw new Error("vertical target subsetting not supported!");var j=e(a.vertical.target);b[this.supportedUrlProps.get(p.subsetVerticalTarget)]=j}if(a.vertical.start){if(!this.supportsVerticalSubsetting)throw new Error("vertical subsetting not supported!");var k=e(a.vertical.start),l=e(a.vertical.stop);b[this.supportedUrlProps.get(p.subsetVerticalStart)]=k,b[this.supportedUrlProps.get(p.subsetVerticalEnd)]=l}delete a.vertical}if(a.index){if(!this.supportsIndexSubsetting)throw new Error("index subsetting not supported!");var m=[],n=!0,o=!1,q=void 0;try{for(var r,s=Object.keys(a.index)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var t=r.value;m.push(f(t,a.index[t]))}}catch(a){o=!0,q=a}finally{try{!n&&s.return&&s.return()}finally{if(o)throw q}}b[this.supportedUrlProps.get(p.subsetIndex)]=m}return c(a,"Unrecognized subset options"),b}},{key:"getUrl",value:function(a){a=JSON.parse(JSON.stringify(a));var b=this._getSubsetTemplateVars(a.subset),c=this._getFilterTemplateVars(a.filter),d=b;for(var e in c)d[e]=c[e];var f=i.parse(this.urlTemplate.template).expand(d);return f}},{key:"supportsBboxFiltering",get:function(){return this.supportedUrlProps.has(p.filterBbox)}},{key:"supportsBboxSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetBbox)}},{key:"supportsTimeFiltering",get:function(){return this.supportedUrlProps.has(p.filterTimeStart)&&this.supportedUrlProps.has(p.filterTimeEnd)}},{key:"supportsTimeSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetTimeStart)&&this.supportedUrlProps.has(p.subsetTimeEnd)}},{key:"supportsVerticalFiltering",get:function(){return this.supportedUrlProps.has(p.filterVerticalStart)&&this.supportedUrlProps.has(p.filterVerticalEnd)}},{key:"supportsVerticalSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetVerticalStart)&&this.supportedUrlProps.has(p.subsetVerticalEnd)}},{key:"supportsVerticalTargetSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetVerticalTarget)}},{key:"supportsIndexSubsetting",get:function(){return this.supportedUrlProps.has(p.subsetIndex)}}]),a}(),a("API",u)}}}),a.register("65",[],function(a){"use strict";function b(a,b){if(0===a.length)throw new Error("Array must have at least one element");var c=-1,d=a.length,e=1===a.length||a[0]<a[1];if(e)for(;d-c>1;){var f=Math.round((c+d)/2);a[f]<=b?c=f:d=f}else for(;d-c>1;){var f=Math.round((c+d)/2);a[f]>=b?c=f:d=f}return a[c]===b&&(d=c),c===-1&&(c=d),d===a.length&&(d=c),[c,d]}function c(a,c){var d=b(a,c),e=d[0],f=d[1];return Math.abs(c-a[e])<=Math.abs(c-a[f])?e:f}return a("indicesOfNearest",b),a("indexOfNearest",c),{setters:[],execute:function(){}}}),a.register("66",[],function(a){"use strict";function b(a){var b=Object.create(Object.getPrototypeOf(a));for(var c in a)b[c]=a[c];return b}function c(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;b[h]=a[h]}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}return a("shallowcopy",b),a("mergeInto",c),{setters:[],execute:function(){}}}),a.register("67",[],function(a){"use strict";function b(a,b){if(!c(a,b))throw new Error("'"+b+"' is not a longitude axis");var d=a.axes.get(b).values,e=d[0],f=d[d.length-1];if(e>f){var g=[f,e];e=g[0],f=g[1]}var h=(f+e)/2,i=h-180,j=h+180;return function(a){return i<=a&&a<=j?a:((a-i)%360+360)%360+i}}function c(a,b){var c=e(a,b);if(!c)return!1;var d=c.system.id;if(j.indexOf(d)===-1)return!1;var f=c.components.indexOf(b),g=k[d]===f;return g}function d(a,b){var c=a.axes.get(b).values[0];return"string"==typeof c&&!isNaN(new Date(c).getTime())}function e(a,b){var c=a.referencing.find(function(a){return a.components.indexOf(b)!==-1});return c}var f,g,h,i,j,k,l;return a("getLongitudeWrapper",b),a("isLongitudeAxis",c),a("isISODateAxis",d),{setters:[],execute:function(){f="http://www.opengis.net/def/crs/",g=f+"EPSG/0/4979",h=f+"EPSG/0/4326",i=f+"OGC/1.3/CRS84",j=[g,h,i],l={},babelHelpers.defineProperty(l,g,1),babelHelpers.defineProperty(l,h,1),babelHelpers.defineProperty(l,i,0),k=l}}}),a.register("68",["63","65","66","67"],function(a){"use strict";function b(a,b){if("function"!=typeof b.loader)throw new Error("options.loader must be a function");return a.type===w?c(a,b):a.type===v?d(a,b):a}function c(a,c){return o.discover(a).then(function(d){var e=q(a);return e.query=function(){var b=a.query();return new x(b,e,d,c)},d.isPaged&&!function(){var a=c.loader,f=function(d){if(d)return{load:function(e){return a(d,e).then(function(a){return b(a,c)})}}};e.paging={total:d.paging.total,previous:f(d.paging.previous),next:f(d.paging.next),first:f(d.paging.first),last:f(d.paging.last)}}(),e})}function d(a,b){return o.discover(a).then(function(c){var d=q(a);return d.subsetByIndex=e(a,d,c,b),d.subsetByValue=f(a,d,c,b),d})}function e(a,c,d,e){return function(f){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return a.loadDomain().then(function(j){if(f=n(f),!m(j,f))return c;if(a.loaded)return a.subsetByIndex(f,i);var k=d.capabilities.subset,l=g(j),o={subset:{}},p={};if(k.index)o.subset.index=f;else{var q=!0,r=!1,s=void 0;try{for(var t,u=Object.keys(f)[Symbol.iterator]();!(q=(t=u.next()).done);q=!0){var v=t.value,w=!1,x=f[v],y=k[l[v]];if(y){if("object"!=typeof x){if(y.start&&y.stop){var z=j.axes.get(v).values[x];x={start:z,stop:z},w=!0}}else if(!x.step&&y.start&&y.stop){var A=j.axes.get(v).values[x.start],B=j.axes.get(v).values[x.stop];x={start:A,stop:B},w=!0}}else;w?o.subset[l[v]]=x:p[v]=x}}catch(a){r=!0,s=a}finally{try{!q&&u.return&&u.return()}finally{if(r)throw s}}}if(h(o.subset,p,k,l),0===Object.keys(o.subset).length)return a.subsetByIndex(f,i);var C=d.getUrl(o);return e.loader(C,i).then(function(a){return Object.keys(p).length>0?a.subsetByIndex(p,i):b(a,e)})})}}function f(a,c,d,e){return function(f){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return a.loadDomain().then(function(p){if(f=n(f),!m(p,f))return c;if(a.loaded)return a.subsetByValue(f,o);var q=d.capabilities.subset,r=g(p),t={subset:{}},u={},v=!0,w=!1,x=void 0;try{for(var y,z=Object.keys(f)[Symbol.iterator]();!(v=(y=z.next()).done);v=!0){var A=y.value,B=!1,C=f[A],D=q[r[A]],E=s(p,A);if(D){if("object"!=typeof C){if(D.identity)B=!0;else if(D.start&&D.stop){var F=j(p,A,C.target),G=p.axes.get(A).values[F];E?new Date(G).getTime()===new Date(C).getTime()&&(C={start:C,stop:C},B=!0):G===C&&(C={start:C,stop:C},B=!0)}}else if("target"in C){if(D.target)B=!0;else if(D.start&&D.stop){var H=l(p,A,C.target),I=babelHelpers.slicedToArray(H,3),J=I[0],K=I[1],L=I[2],M=i(J,K),N=babelHelpers.slicedToArray(M,2),O=N[0],P=N[1];if(O<=L&&L<=P){var F=j(p,A,C.target),G=p.axes.get(A).values[F];C={start:G,stop:G},B=!0}}}else if(B=D.start&&D.stop){var Q=l(p,A,C.start,C.stop),R=babelHelpers.slicedToArray(Q,4),J=R[0],K=R[1],S=R[2],T=R[3],U=i(J,K),V=babelHelpers.slicedToArray(U,2),O=V[0],P=V[1];if(T<O||S>P)throw new Error("start or stop must be inside the axis extent");var W=k(J,S),X=k(J,T),Y=p.axes.get(A).values;C={start:Y[W],stop:Y[X]}}}else;B?t.subset[r[A]]=C:u[A]=C}}catch(a){w=!0,x=a}finally{try{!v&&z.return&&z.return()}finally{if(w)throw x}}if(h(t.subset,u,q,r),0===Object.keys(t.subset).length)return a.subsetByValue(f,o);var Z=d.getUrl(t);return e.loader(Z,o).then(function(a){return Object.keys(u).length>0?a.subsetByValue(u,o):b(a,e)})})}}function g(a){var b={},c=a.referencing,d=!0,e=!1,f=void 0;try{for(var g,h=function(){var a=g.value,d=void 0,e=c.filter(function(b){return b.components.indexOf(a)!==-1});if(1===e.length){var f=e[0],h=f.components,i=f.system;if("TemporalRS"===i.type)d="time";else if("VerticalCRS"===i.type)d="vertical";else if("GeodeticCRS"===i.type||"ProjectedCRS"===i.type){var j=h.indexOf(a);0===j?d="x":1===j?d="y":2===j&&(d="vertical")}}b[a]=d},i=a.axes.keys()[Symbol.iterator]();!(d=(g=i.next()).done);d=!0)h()}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return b}function h(a,b,c,d){var e=!0,f=!1,g=void 0;try{for(var h,i=function(){var e=h.value,f=c[e].dependency;if(f&&f.some(function(b){return!a[b]})){var g=Object.keys(d).filter(function(a){return d[a]===e})[0];b[g]=a[e],delete a[e]}},j=Object.keys(a)[Symbol.iterator]();!(e=(h=j.next()).done);e=!0)i()}catch(a){f=!0,g=a}finally{try{!e&&j.return&&j.return()}finally{if(f)throw g}}}function i(a,b){var c=void 0,d=void 0;if(b?(c=b.get(0)[0],d=b.get(a.length-1)[1]):(c=a[0],d=a[a.length-1]),c>d){var e=[d,c];c=e[0],d=e[1]}if(!b&&a.length>1){var f=Math.abs(a[0]-a[1])/2,g=[c-f,d+f];c=g[0],d=g[1]}return[c,d]}function j(a,b,c){var d=l(a,b,c),e=babelHelpers.slicedToArray(d,3),f=e[0],g=e[2];return k(f,g)}function k(a,b){var c=p.indicesOfNearest(a,b),d=babelHelpers.slicedToArray(c,2),e=d[0],f=d[1],g=Math.abs(b-a[e])<=Math.abs(b-a[f])?e:f;return g}function l(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];var f=a.axes.get(b).values,g=a.axes.get(b).bounds;if(d=[].concat(babelHelpers.toConsumableArray(d)),s(a,b))!function(){var a=function(a){return new Date(a).getTime()};d=d.map(a),f=f.map(a),g&&!function(){var b=g;g={get:function(c){return[a(b.get(c)[0]),a(b.get(c)[1])]}}}()}();else if(t(a,b)){var h=u(a,b);d=d.map(h)}return[f,g].concat(babelHelpers.toConsumableArray(d))}function m(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(b)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=a.axes.get(h).values.length;if(i>1)return!0}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return!1}function n(a){var b=q(a),c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;void 0!==a[h]&&null!==a[h]||delete b[h]}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return b}var o,p,q,r,s,t,u,v,w,x;return a("wrap",b),{setters:[function(a){o=a},function(a){p=a},function(a){q=a.shallowcopy,r=a.mergeInto},function(a){s=a.isISODateAxis,t=a.isLongitudeAxis,u=a.getLongitudeWrapper}],execute:function(){v="Coverage",w=v+"Collection",x=function(){function a(b,c,d,e){babelHelpers.classCallCheck(this,a),this._query=b,this._collection=c,this._api=d,this._wrapOptions=e,this._filter={},this._subset={}}return babelHelpers.createClass(a,[{key:"filter",value:function(a){return this._query.filter(a),r(a,this._filter),this}},{key:"subset",value:function(a){return this._query.subset(a),r(a,this._subset),this}},{key:"execute",value:function(a){var b=this,c=this._collection.domainTemplate;return c?this._doExecute(c):this._collection.coverages.length>0?this._collection.coverages[0].loadDomain().then(function(c){return b._doExecute(a,c)}):this._query.execute(a)}},{key:"_doExecute",value:function(a,c){var d=this,e=this._wrapOptions.loader,f=this._api.capabilities.filter,i=this._api.capabilities.subset,j=g(c),k={filter:{},subset:{}},l={},m={},n=!0,o=!1,p=void 0;try{for(var q,r=Object.keys(this._filter)[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var s=q.value,t=this._filter[s],u=f[j[s]];u&&u.start&&u.stop?k.filter[j[s]]=t:l[s]=t}}catch(a){o=!0,p=a}finally{try{!n&&r.return&&r.return()}finally{if(o)throw p}}var v=!0,w=!1,x=void 0;try{for(var y,z=Object.keys(this._subset)[Symbol.iterator]();!(v=(y=z.next()).done);v=!0){var s=y.value,t=this._subset[s],u=i[j[s]],A=!1;u&&("object"!=typeof t&&u.identity?A=!0:"target"in t&&u.target?A=!0:"start"in t&&"stop"in t&&u.start&&u.stop&&(A=!0)),A?k.subset[j[s]]=t:m[s]=t}}catch(a){w=!0,x=a}finally{try{!v&&z.return&&z.return()}finally{if(w)throw x}}if(h(k.filter,l,f,j),h(k.subset,m,i,j),0===Object.keys(k.filter).length&&0===Object.keys(k.subset).length)return this._query.execute(a);var B=this._api.getUrl(k);return e(B,a).then(function(a){return Object.keys(m).length>0||Object.keys(l).length>0?a.query().filter(l).subset(m).execute():b(a,d._wrapOptions)})}}]),a}()}}}),a.register("69",["68"],function(a){
"use strict";return{setters:[function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);c.default=b.default,a(c)}],execute:function(){}}}),a.register("6a",["61","69","6b"],function(a){"use strict";var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a.default}],execute:function(){e=function(a){function d(a){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a),this.label="CoverageJSON",this.shortLabel="CovJSON",this.mediaTypes=["application/prs.coverage+json"]}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"doLoad",value:function(a,d){return"object"==typeof a&&a.loadDomain?Promise.resolve(a):b.read(a,d).then(function(a){return c.wrap(a,{loader:b.read})})}}]),d}(d),a("default",e)}}}),a.register("6c",["56","70","6f","6d","6e","6a"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){},function(a){},function(a){b=a.dataLayer,c=a.dataLayerClass,d=a.ParameterSync,e=a.legend,f=a.TimeAxis,g=a.VerticalAxis,h=a.VerticalProfilePlot,i=a.COVJSON_VERTICALPROFILE},function(a){j=a.default,k=a.VIEW},function(a){l=a.i18n},function(a){m=a.default}],execute:function(){n="ModelObservationComparisonActivity",o=function(a){function j(a,b){babelHelpers.classCallCheck(this,j),babelHelpers.get(Object.getPrototypeOf(j.prototype),"constructor",this).call(this,b),this.cov=a,this._setHidden(),this.layers=[]}return babelHelpers.inherits(j,a),babelHelpers.createClass(j,[{key:"_setVisible",value:function(){this.visible=!0,this.label="Hide",this.icon='<span class="glyphicon glyphicon-eye-close"></span>',this.fire("labelChange")}},{key:"_setHidden",value:function(){this.visible=!1,this.label="View",this.icon='<span class="glyphicon glyphicon-eye-open"></span>',this.fire("labelChange")}},{key:"run",value:function(){var a=this.context.map,b=this.context.dataset,f=l(b.title);if(this.visible)return this.remove(),void this._setHidden();this._setVisible();var g=this.cov;c(g)||g.coverages&&1===g.coverages.length&&(g=g.coverages[0]);var h=this.context.distribution.formatImpl.shortLabel,i='<span class="label label-success">'+h+"</span> ";this.paramSync=new d({syncProperties:{palette:function(a,b){return a},paletteExtent:function(a,b){return a&&b?[Math.min(a[0],b[0]),Math.max(a[1],b[1])]:null}}}).on("parameterAdd",function(b){var c=b.syncLayer;c.palette&&e(c,{position:"bottomright"}).addTo(a)});var j=!0,k=!1,m=void 0;try{for(var n,o=g.parameters.keys()[Symbol.iterator]();!(j=(n=o.next()).done);j=!0){var p=n.value,q={keys:[p]},r=l(g.parameters.get(p).observedProperty.label),s=i+r,t=this._createLayer(g,q);a.layerControl.addOverlay(t,s,{groupName:f,expanded:!0}),this.layers.push(t)}}catch(a){k=!0,m=a}finally{try{!j&&o.return&&o.return()}finally{if(k)throw m}}var u=this.layers[0];a.addLayer(u)}},{key:"_createLayer",value:function(a,c){var d=this,e=a.coverages,j=this.context.map,k=b(a,c).on("afterAdd",function(a){var b=a.target;if(d.paramSync.addLayer(b),e);else{if(b.timeSlices){var c=new f(b);c.addTo(j)}if(b.verticalSlices){var h=new g(b);h.addTo(j)}}}).on("dataLoading",function(){return d.fire("loading")}).on("dataLoad",function(){return d.fire("load")});return k.on("axisChange",function(){k.paletteExtent="subset"}),k.on("click",function(a){var b=a.coverage,c=b.ld.wasGeneratedBy;b.domainType===i?new h(b).addTo(j):c&&c.type===n&&!function(){var a=c.qualifiedUsage,b=a.model.parameterKey,d=a.observation.parameterKey,e=a.model.entity,f=a.observation.entity,g=new m;Promise.all([g.load(e),g.load(f,{eagerload:!0})]).then(function(a){var c=babelHelpers.slicedToArray(a,2),e=c[0],f=c[1];return f.loadDomain().then(function(a){var c=a.axes.get("x").values[0],g=a.axes.get("y").values[0];return e.subsetByValue({x:{start:c,stop:c},y:{start:g,stop:g}},{eagerload:!0}).then(function(a){new h([f,a],{keys:[[d,b]],labels:["Observation","Model"]}).addTo(j)})})}).catch(function(a){console.log(a)})}()}),k}},{key:"remove",value:function(){var a=this.context.map,b=!0,c=!1,d=void 0;try{for(var e,f=this.layers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;a.hasLayer(g)&&a.removeLayer(g),a.layerControl.removeLayer(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}this.layers=[]}},{key:"isSupported",get:function(){var a=this.cov;return!!c(a)||!(!a.coverages||1!==a.coverages.length||!c(a.coverages[0]))}}]),j}(j),a("default",o),o.type=k}}}),a.register("71",["54","70","72","73","5d","6d","6e"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){b=a.$,c=a.$$,d=a.HTML},function(a){},function(a){e=a.default},function(a){f=a.default},function(a){g=a.minMaxOfRange,h=a.iterateRange},function(a){i=a.default,j=a.VIEW},function(a){k=a.i18n}],execute:function(){l="http://www.uncertml.org/statistics/discrete-probability",m='\n<div class="modal fade" id="statisticsViewModal" tabindex="-1" role="dialog" aria-labelledby="statisticsViewModalLabel">\n  <div class="modal-dialog modal-lg" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="statisticsViewModalLabel">Statistics View</h4>\n      </div>\n      <div class="modal-body">\n        <div class="param-selector"></div>\n      \n        <div class="chart-container"></div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n',b("body").add(d(m)),n={"param-selector":'<select name="param"></select>'},o=function(a){function i(a,b){babelHelpers.classCallCheck(this,i),babelHelpers.get(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,b),this.cov=a,this.label="View",this.icon='<span class="glyphicon glyphicon-stats"></span>'}return babelHelpers.inherits(i,a),babelHelpers.createClass(i,[{key:"run",value:function(){var a=this;Promise.all([this.cov.loadDomain(),this.cov.loadRanges()]).then(function(b){var c=babelHelpers.slicedToArray(b,2),d=c[0],e=c[1];return d.axes.size>1?void alert("Sorry, only statistical coverages with exactly one axis (often time) are supported."):void a._displayChart(d,e)})}},{key:"_displayChart",value:function(a,i){var j=this,l=b("#statisticsViewModal");b(".chart-container",l).fill(),b(".param-selector",l).fill(d(n["param-selector"])),b("select",l).add(d('<option value="">All</option>'));var m=function(a){var b=a.observedProperty.statisticalCategories,c=void 0;return c=b?b.map(function(a){return k(a.label)}).join(" & "):k(a.observedProperty.label)},o=!0,p=!1,q=void 0;try{for(var r,s=this.cov.parameters.values()[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var t=r.value,u=m(t);b("select",l).add(d('<option value="'+t.key+'">'+u+"</option>"))}}catch(a){p=!0,q=a}finally{try{!o&&s.return&&s.return()}finally{if(p)throw q}}var v=["t"].concat(a.axes.get("t").values.map(function(a){return new Date(a)})),w=function(){var a={},b={},d={},f=[],k=[],n=!0,o=!1,p=void 0;try{for(var q,r=function(){var c=q.value,e=c.key,j=i.get(e),l=g(j),n=babelHelpers.slicedToArray(l,2),o=n[0],p=n[1];if(!o||0===p)return"continue";a[e]=m(c),d[e]="area",f.push(e);var r=c.observedProperty.statisticalCategories;r&&1===r.length&&r[0].preferredColor&&(b[e]=r[0].preferredColor);var s=[];h(j,function(a){return s.push(100*a)}),k.push([e].concat(s))},s=j.cov.parameters.values()[Symbol.iterator]();!(n=(q=s.next()).done);n=!0){r()}}catch(a){o=!0,p=a}finally{try{!n&&s.return&&s.return()}finally{if(o)throw p}}e.generate({bindto:c(".chart-container",l),data:{x:"t",columns:[v].concat(k),types:d,groups:[f],names:a,colors:b},grid:{y:{show:!0}},tooltip:{format:{value:function(a){return a.toFixed(2)+"%"}}},axis:{y:{min:0,max:100,padding:0,label:{text:"Percentage (%)",position:"outer-middle"},tick:{format:function(a){return a.toFixed(2)}}},x:{type:"timeseries",tick:{format:"%Y-%m-%d"}}},size:{height:500}})},x=function(a){var b=j.cov.parameters.get(a),d=i.get(a),f=[];h(d,function(a){return f.push(100*a)});var g=[a].concat(f),m=void 0,n=b.observedProperty.statisticalCategories;m=n&&1===n.length?k(n[0].label)+" Percentage":k(b.observedProperty.label),e.generate({bindto:c(".chart-container",l),data:{x:"t",columns:[v,g],names:babelHelpers.defineProperty({},a,m)},legend:{show:!1},grid:{y:{show:!0}},tooltip:{format:{value:function(a){return a.toFixed(2)+"%"}}},axis:{y:{min:0,padding:{bottom:0},label:{text:m+" (%)",position:"outer-middle"},tick:{format:function(a){return a.toFixed(2)}}},x:{type:"timeseries",tick:{format:"%Y-%m-%d"}}}})};b("select",l).on("change",function(){var a=c("select",l).value;a?x(a):w()}),new f(l[0]).open(),setTimeout(function(){return w()},500)}},{key:"isSupported",get:function(){if(this.cov.coverages)return!1;var a=!0,b=!1,c=void 0;try{for(var d,e=this.cov.parameters.values()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value,g=f.observedProperty;if(g.statisticalMeasure!==l)return!1}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return!0}}]),i}(i),a("default",o),o.type=j}}}),a.register("74",["54","73","5d","6e","6d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.$,c=a.$$,d=a.HTML},function(a){e=a.default},function(a){f=a.withSimpleDerivedParameter},function(a){g=a.i18n},function(a){h=a.default,i=a.PROCESS}],execute:function(){j='\n<div class="modal fade" id="deriveParameterModal" tabindex="-1" role="dialog" aria-labelledby="deriveParameterModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="deriveParameterModalLabel">Derive a Parameter</h4>\n      </div>\n      <div class="modal-body">\n        <div class="panel panel-primary derive-input-parameters">\n          <div class="panel-heading">\n            <h4>Select input parameters</h4>\n          </div>\n          <div class="panel-body input-parameters">\n          </div>\n        </div>\n        \n        <div class="panel panel-primary derive-ouput-parameter">\n          <div class="panel-heading">\n            <h4>Define derived parameter</h4>\n          </div>\n          <div class="panel-body">\n            \n            <div class="form-horizontal">\n              <div class="form-group">\n                <label for="inputParameterKey" class="col-sm-2 control-label">ID</label>\n                <div class="col-sm-10">\n                  <input type="text" class="form-control" id="inputParameterKey" placeholder="salinity">\n                </div>\n              </div>\n              <div class="form-group">\n                <label for="inputObservedPropertyLabel" class="col-sm-2 control-label">Observed Property</label>\n                <div class="col-sm-10">\n                  <input type="text" class="form-control" id="inputObservedPropertyLabel" placeholder="Sea Water Salinity">\n                </div>\n              </div>\n              <div class="form-group">\n                <label for="inputParameterUnits" class="col-sm-2 control-label">Units</label>\n                <div class="col-sm-10">\n                  <input type="text" class="form-control" id="inputParameterUnits">\n                </div>\n              </div>\n              <div class="form-group">\n                <label for="inputParameterFormula" class="col-sm-2 control-label">Formula</label>\n                <div class="col-sm-10">\n                  <input type="text" class="form-control" id="inputParameterFormula">\n                </div>\n              </div>\n              <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10 submit-button-container">\n                </div>\n              </div>\n            </div>\n  \n          </div>\n        </div>\n               \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n',b("body").add(d(j)),k={"input-parameter":'\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" class="input-parameter-key">\n      <code class="parameter-key"></code> - <span class="observedProperty-label"></span>\n    </label>\n  </div>\n  ',"submit-button":'\n  <button type="submit" class="btn btn-primary submit-button" data-dismiss="modal">Confirm</button>\n  '},l=function(a){function h(a,b){babelHelpers.classCallCheck(this,h),babelHelpers.get(Object.getPrototypeOf(h.prototype),"constructor",this).call(this,b),this._isSingleCoverage(a)?this.cov=this._getSingleCoverage(a):this.cov=a,this.label="Derive",this.icon='<span class="glyphicon glyphicon-plus"></span>'}return babelHelpers.inherits(h,a),babelHelpers.createClass(h,[{key:"_isSingleCoverage",value:function(a){try{return this._getSingleCoverage(a),!0}catch(a){return!1}}},{key:"_getSingleCoverage",value:function(a){if(a.coverages){if(1===a.coverages.length)return a.coverages[0];throw new Error("not a single coverage")}return a}},{key:"run",value:function(){var a=this,f=this.cov,h=b("#deriveParameterModal");b(".input-parameters",h).fill(),c("#inputParameterKey",h).value="",c("#inputObservedPropertyLabel",h).value="",c("#inputParameterUnits",h).value="",c("#inputParameterFormula",h).value="";var i=!0,j=!1,l=void 0;try{for(var m,n=f.parameters.values()[Symbol.iterator]();!(i=(m=n.next()).done);i=!0){var o=m.value,p=b(d(k["input-parameter"]));c(".input-parameter-key",p).value=o.key,b(".parameter-key",p).fill(o.key),b(".observedProperty-label",p).fill(g(o.observedProperty.label)),b("input",p).on("|click",function(){var b=c("#inputParameterFormula",h);if(!b.value){var d=a._getCheckedParameterKeys(h);b.placeholder=d.join(" + ")}}),b(".input-parameters",h).add(p)}}catch(a){j=!0,l=a}finally{try{!i&&n.return&&n.return()}finally{if(j)throw l}}var q=b(d(k["submit-button"]));b(".submit-button-container",h).fill().add(q),b(".submit-button",h).on("?click",function(){var b=a._getCheckedParameterKeys(h),d=c("#inputParameterKey",h).value,e=c("#inputObservedPropertyLabel",h).value,f=c("#inputParameterUnits",h).value,g=c("#inputParameterFormula",h).value;if(!(b.length&&d&&e&&g))return void alert("Input parameters, ID, observed property, and formula are required");var i=new(babelHelpers.bind.apply(Function,[null].concat(babelHelpers.toConsumableArray(b),["return "+g])));try{var j=b.map(function(){return Math.random()});i.apply(void 0,babelHelpers.toConsumableArray(j))}catch(a){return void alert("Invalid formula: "+a)}return console.log(i.toString()),a._createVirtualDataset(b,d,e,f,i),!0}),new e(h[0]).open()}},{key:"_createVirtualDataset",value:function(a,b,c,d,e){var h={key:b,observedProperty:{label:{en:c}}};d&&(h.unit={symbol:d});var i=f(this.cov,{parameter:h,inputParameters:a,fn:e}),j=" [derived: "+b+"]",k={title:{en:g(this.context.dataset.title)+j},virtual:!0,distributions:[{title:{en:g(this.context.distribution.title)+j},mediaType:"coveragedata",data:i}]},l=this.context.workspace;l.addDataset(k,this.context.dataset),l.requestFocus(k)}},{key:"_getCheckedParameterKeys",value:function(a){var c=b(".input-parameter-key",a).array(),d=c.filter(function(a){return a.checked});return d.map(function(a){return a.value})}},{key:"isSupported",get:function(){return!!this._isSingleCoverage(this.cov)}}]),h}(h),a("default",l),l.type=i}}}),a.registerDynamic("75",["3b"],!0,function(a,b,c){"format cjs";var d;this||self;return function(a){(function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(a){return 0==a?0:a>0?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=64,c=Math.pow(2,-b-1),d=function(b,c){for(var d=[],e=f(b,c),h=c.length-1,i=2*h-1,j=g(e,i,d,0),k=a.subtract(b,c[0]),m=a.square(k),n=0,o=0;o<j;o++){k=a.subtract(b,l(c,h,d[o],null,null));var p=a.square(k);p<m&&(m=p,n=d[o])}return k=a.subtract(b,c[h]),p=a.square(k),p<m&&(m=p,n=1),{location:n,distance:m}},e=function(a,b){var c=d(a,b);return{point:l(b,b.length-1,c.location,null,null),location:c.location}},f=function(b,c){for(var d=c.length-1,e=2*d-1,f=[],g=[],h=[],i=[],k=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],l=0;l<=d;l++)f[l]=a.subtract(c[l],b);for(var l=0;l<=d-1;l++)g[l]=a.subtract(c[l+1],c[l]),g[l]=a.scale(g[l],3);for(var m=0;m<=d-1;m++)for(var n=0;n<=d;n++)h[m]||(h[m]=[]),h[m][n]=a.dotProduct(g[m],f[n]);for(l=0;l<=e;l++)i[l]||(i[l]=[]),i[l].y=0,i[l].x=parseFloat(l)/e;for(var o=d,p=d-1,q=0;q<=o+p;q++){var r=Math.max(0,q-p),s=Math.min(q,o);for(l=r;l<=s;l++)j=q-l,i[l+j].y+=h[j][l]*k[j][l]}return i},g=function(a,c,d,e){var f,j,m=[],n=[],o=[],p=[];switch(h(a,c)){case 0:return 0;case 1:if(e>=b)return d[0]=(a[0].x+a[c].x)/2,1;if(i(a,c))return d[0]=k(a,c),1}l(a,c,.5,m,n),f=g(m,c,o,e+1),j=g(n,c,p,e+1);for(var q=0;q<f;q++)d[q]=o[q];for(var q=0;q<j;q++)d[q+f]=p[q];return f+j},h=function(a,b){var c,d,e=0;c=d=Math.sgn(a[0].y);for(var f=1;f<=b;f++)c=Math.sgn(a[f].y),c!=d&&e++,d=c;return e},i=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;i=a[0].y-a[b].y,j=a[b].x-a[0].x,k=a[0].x*a[b].y-a[b].x*a[0].y;for(var t=max_distance_below=0,u=1;u<b;u++){var v=i*a[u].x+j*a[u].y+k;v>t?t=v:v<max_distance_below&&(max_distance_below=v)}return n=0,o=1,p=0,q=i,r=j,s=k-t,l=n*r-q*o,m=1/l,e=(o*s-r*p)*m,q=i,r=j,s=k-max_distance_below,l=n*r-q*o,m=1/l,f=(o*s-r*p)*m,g=Math.min(e,f),h=Math.max(e,f),d=h-g,d<c?1:0},k=function(a,b){var c=1,d=0,e=a[b].x-a[0].x,f=a[b].y-a[0].y,g=a[0].x-0,h=a[0].y-0,i=e*d-f*c,j=1/i,k=(e*h-f*g)*j;return 0+c*k},l=function(a,b,c,d,e){for(var f=[[]],g=0;g<=b;g++)f[0][g]=a[g];for(var h=1;h<=b;h++)for(var g=0;g<=b-h;g++)f[h]||(f[h]=[]),f[h][g]||(f[h][g]={}),f[h][g].x=(1-c)*f[h-1][g].x+c*f[h-1][g+1].x,f[h][g].y=(1-c)*f[h-1][g].y+c*f[h-1][g+1].y;if(null!=d)for(g=0;g<=b;g++)d[g]=f[g][0];if(null!=e)for(g=0;g<=b;g++)e[g]=f[b-g][g];return f[b][0]},m={},n=function(a){var b=m[a];if(!b){b=[];var c=function(){return function(b){return Math.pow(b,a)}},d=function(){return function(b){return Math.pow(1-b,a)}},e=function(a){return function(b){return a}},f=function(){return function(a){return a}},g=function(){return function(a){return 1-a}},h=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}};b.push(new c);for(var i=1;i<a;i++){for(var j=[new e(a)],k=0;k<a-i;k++)j.push(new f);for(var k=0;k<i;k++)j.push(new g);b.push(new h(j))}b.push(new d),m[a]=b}return b},o=function(a,b){for(var c=n(a.length-1),d=0,e=0,f=0;f<a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},p=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},q=function(a){return a[0].x==a[1].x&&a[0].y==a[1].y},r=function(a,b,c){if(q(a))return{point:a[0],location:b};for(var d=o(a,b),e=0,f=b,g=c>0?1:-1,h=null;e<Math.abs(c);)f+=.005*g,h=o(a,f),e+=p(h,d),d=h;return{point:h,location:f}},s=function(a){if(q(a))return 0;for(var b=o(a,0),c=0,d=0,e=1,f=null;d<1;)d+=.005*e,f=o(a,d),c+=p(f,b),b=f;return c},t=function(a,b,c){return r(a,b,c).point},u=function(a,b,c){return r(a,b,c).location},v=function(a,b){var c=o(a,b),d=o(a.slice(0,a.length-1),b),e=d.y-c.y,f=d.x-c.x;return 0==e?1/0:Math.atan(e/f)},w=function(a,b,c){var d=r(a,b,c);return d.location>1&&(d.location=1),d.location<0&&(d.location=0),v(a,d.location)},x=function(a,b,c,d){d=null==d?0:d;var e=r(a,b,d),f=v(a,e.location),g=Math.atan(-1/f),h=c/2*Math.sin(g),i=c/2*Math.cos(g);return[{x:e.point.x+i,y:e.point.y+h},{x:e.point.x-i,y:e.point.y-h}]};this.jsBezier={distanceFromCurve:d,gradientAtPoint:v,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:e,pointOnCurve:o,pointAlongCurveFrom:t,perpendicularToCurveAt:x,locationAlongCurveFrom:u,getLength:s}}).call(this),function(){"use strict";var a=this.Biltong={},b=function(a){return"[object Array]"===Object.prototype.toString.call(a)},c=function(a,c,d){return a=b(a)?a:[a.x,a.y],c=b(c)?c:[c.x,c.y],d(a,c)},d=a.gradient=function(a,b){return c(a,b,function(a,b){return b[0]==a[0]?b[1]>a[1]?1/0:-(1/0):b[1]==a[1]?b[0]>a[0]?0:-0:(b[1]-a[1])/(b[0]-a[0])})},e=(a.normal=function(a,b){return-1/d(a,b)},a.lineLength=function(a,b){return c(a,b,function(a,b){return Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))})},a.quadrant=function(a,b){return c(a,b,function(a,b){return b[0]>a[0]?b[1]>a[1]?2:1:b[0]==a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4})}),f=(a.theta=function(a,b){return c(a,b,function(a,b){var c=d(a,b),f=Math.atan(c),g=e(a,b);return 4!=g&&3!=g||(f+=Math.PI),f<0&&(f+=2*Math.PI),f})},a.intersects=function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return c<=g&&g<=d&&e<=i&&i<=f||c<=h&&h<=d&&e<=i&&i<=f||c<=g&&g<=d&&e<=j&&j<=f||c<=h&&g<=d&&e<=j&&j<=f||g<=c&&c<=h&&i<=e&&e<=j||g<=d&&d<=h&&i<=e&&e<=j||g<=c&&c<=h&&i<=f&&f<=j||g<=d&&c<=h&&i<=f&&f<=j},a.encloses=function(a,b,c){var d=a.x,e=a.x+a.w,f=a.y,g=a.y+a.h,h=b.x,i=b.x+b.w,j=b.y,k=b.y+b.h,l=function(a,b,d,e){return c?a<=b&&d>=e:a<b&&d>e};return l(d,h,e,i)&&l(f,j,g,k)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),g=[null,[-1,-1],[-1,1],[1,1],[1,-1]];a.pointOnLine=function(a,b,c){var h=d(a,b),i=e(a,b),j=c>0?f[i]:g[i],k=Math.atan(h),l=Math.abs(c*Math.sin(k))*j[1],m=Math.abs(c*Math.cos(k))*j[0];return{x:a.x+m,y:a.y+l}},a.perpendicularLineTo=function(a,b,c){var e=d(a,b),f=Math.atan(-1/e),g=c/2*Math.sin(f),h=c/2*Math.cos(f);return[{x:b.x+h,y:b.y+g},{x:b.x-h,y:b.y-g}]}}.call(this),function(){"use strict";var a=this,b={android:navigator.userAgent.toLowerCase().indexOf("android")>-1},c=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},d=function(a){return"string"==typeof a||a.constructor===String?document.getElementById(a):a},e=function(a){return a.srcElement||a.target},f=function(a,b){for(var c=0,d=a.length;c<d&&a[c]!=b;c++);c<a.length&&a.splice(c,1)},g=1,h=function(a,b,c){var d=g++;return a.__ta=a.__ta||{},a.__ta[b]=a.__ta[b]||{},a.__ta[b][d]=c,c.__tauid=d,d},i=function(a,b,c){if(a.__ta&&a.__ta[b]&&delete a.__ta[b][c.__tauid],c.__taExtra){for(var d=0;d<c.__taExtra.length;d++)E(a,c.__taExtra[d][0],c.__taExtra[d][1]);c.__taExtra.length=0}c.__taUnstore&&c.__taUnstore()},j=function(a,b,d,f){if(null==a)return d;var g=a.split(","),h=function(a){h.__tauid=d.__tauid;for(var f=e(a),i=0;i<g.length;i++)c(f,g[i],b)&&d.apply(f,arguments)};return k(d,f,h),h},k=function(a,b,c){a.__taExtra=a.__taExtra||[],a.__taExtra.push([b,c])},l=function(a,b,c,d){if(r&&t[b]){var e=j(d,a,c,t[b]);D(a,t[b],e,c)}"focus"===b&&null==a.getAttribute("tabindex")&&a.setAttribute("tabindex","1"),D(a,b,j(d,a,c,b),c)},m=function(a,b,c,d){if(null==a.__taSmartClicks){var g=function(b){a.__tad=x(b)},h=function(b){a.__tau=x(b)},i=function(b){if(a.__tad&&a.__tau&&a.__tad[0]===a.__tau[0]&&a.__tad[1]===a.__tau[1])for(var c=0;c<a.__taSmartClicks.length;c++)a.__taSmartClicks[c].apply(e(b),[b])};l(a,"mousedown",g,d),l(a,"mouseup",h,d),l(a,"click",i,d),a.__taSmartClicks=[]}a.__taSmartClicks.push(c),c.__taUnstore=function(){f(a.__taSmartClicks,c)}},n={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},o=function(a,b){return function(d,g,h,i){if("contextmenu"==g&&s)l(d,g,h,i);else{if(null==d.__taTapHandler){var j=d.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},k=function(e){for(var f=e.srcElement||e.target,g=0;g<j.downSelectors.length;g++)if(null==j.downSelectors[g]||c(f,j.downSelectors[g],d)){j.down=!0,setTimeout(o,a),setTimeout(p,b);break}},m=function(a){if(j.down){var b=a.srcElement||a.target;j.taps++;var f=C(a);for(var g in n)if(n.hasOwnProperty(g)){var h=n[g];if(h.touches===f&&(1===h.taps||h.taps===j.taps))for(var i=0;i<j[g].length;i++)(null==j[g][i][1]||c(b,j[g][i][1],d))&&j[g][i][0].apply(e(a),[a])}}},o=function(){j.down=!1},p=function(){j.taps=0};l(d,"mousedown",k),l(d,"mouseup",m)}d.__taTapHandler.downSelectors.push(i),d.__taTapHandler[g].push([h,i]),h.__taUnstore=function(){f(d.__taTapHandler[g],h)}}}},p=function(a,b,c,d){for(var e in c.__tamee[a])c.__tamee[a].hasOwnProperty(e)&&c.__tamee[a][e].apply(d,[b])},q=function(){var a=[];return function(b,d,f,g){if(!b.__tamee){b.__tamee={over:!1,mouseenter:[],mouseexit:[]};var i=function(d){var f=e(d);(null==g&&f==b&&!b.__tamee.over||c(f,g,b)&&(null==f.__tamee||!f.__tamee.over))&&(p("mouseenter",d,b,f),f.__tamee=f.__tamee||{},f.__tamee.over=!0,a.push(f))},k=function(d){for(var f=e(d),g=0;g<a.length;g++)f!=a[g]||c(d.relatedTarget||d.toElement,"*",f)||(f.__tamee.over=!1,a.splice(g,1),p("mouseexit",d,b,f))};D(b,"mouseover",j(g,b,i,"mouseover"),i),D(b,"mouseout",j(g,b,k,"mouseout"),k)}f.__taUnstore=function(){delete b.__tamee[d][f.__tauid]},h(b,d,f),b.__tamee[d][f.__tauid]=f}},r="ontouchstart"in document.documentElement,s="onmousedown"in document.documentElement,t={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},u=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}(),v=u>-1&&u<9,w=function(a,b){if(null==a)return[0,0];var c=B(a),d=A(c,0);return[d[b+"X"],d[b+"Y"]]},x=function(a){return null==a?[0,0]:v?[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop]:w(a,"page")},y=function(a){return w(a,"screen")},z=function(a){return w(a,"client")},A=function(a,b){return a.item?a.item(b):a[b]},B=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},C=function(a){return B(a).length},D=function(a,b,c,d){if(h(a,b,c),d.__tauid=c.__tauid,a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent){var e=b+c.__tauid;a["e"+e]=c,a[e]=function(){a["e"+e]&&a["e"+e](window.event)},a.attachEvent("on"+b,a[e])}},E=function(a,b,c){null!=c&&F(a,function(){var e=d(this);if(i(e,b,c),null!=c.__tauid)if(e.removeEventListener)e.removeEventListener(b,c,!1),r&&t[b]&&e.removeEventListener(t[b],c,!1);else if(this.detachEvent){var f=b+c.__tauid;e[f]&&e.detachEvent("on"+b,e[f]),e[f]=null,e["e"+f]=null}c.__taTouchProxy&&E(a,c.__taTouchProxy[1],c.__taTouchProxy[0])})},F=function(a,b){if(null!=a){a="undefined"!=typeof Window&&"unknown"!=typeof a.top&&a==a.top?[a]:"string"!=typeof a&&null==a.tagName&&null!=a.length?a:"string"==typeof a?document.querySelectorAll(a):[a];for(var c=0;c<a.length;c++)b.apply(a[c])}};a.Mottle=function(a){a=a||{};var c=a.clickThreshold||150,e=a.dblClickThreshold||350,f=new q,g=new o(c,e),h=a.smartClicks,i=function(a,b,c,e){null!=c&&F(a,function(){var a=d(this);h&&"click"===b?m(a,b,c,e):"tap"===b||"dbltap"===b||"contextmenu"===b?g(a,b,c,e):"mouseenter"===b||"mouseexit"==b?f(a,b,c,e):l(a,b,c,e)})};this.remove=function(a){return F(a,function(){var a=d(this);if(a.__ta)for(var b in a.__ta)if(a.__ta.hasOwnProperty(b))for(var c in a.__ta[b])a.__ta[b].hasOwnProperty(c)&&E(a,b,a.__ta[b][c]);a.parentNode&&a.parentNode.removeChild(a)}),this},this.on=function(a,b,c,d){var e=arguments[0],f=4==arguments.length?arguments[2]:null,g=arguments[1],h=arguments[arguments.length-1];return i(e,g,h,f),this},this.off=function(a,b,c){return E(a,b,c),this},this.trigger=function(a,c,e,f){var g=s&&("undefined"==typeof MouseEvent||null==e||e.constructor===MouseEvent),h=r&&!s&&t[c]?t[c]:c,i=!(r&&!s&&t[c]),j=x(e),k=y(e),l=z(e);return F(a,function(){var a,m=d(this);e=e||{screenX:k[0],screenY:k[1],clientX:l[0],clientY:l[1]};var n=function(a){f&&(a.payload=f)},o={TouchEvent:function(a){var b=document.createTouch(window,m,0,j[0],j[1],k[0],k[1],l[0],l[1],0,0,0,0),c=document.createTouchList(b),d=document.createTouchList(b),e=document.createTouchList(b);a.initTouchEvent(h,!0,!0,window,null,k[0],k[1],l[0],l[1],!1,!1,!1,!1,c,d,e,1,0)},MouseEvents:function(a){if(a.initMouseEvent(h,!0,!0,window,0,k[0],k[1],l[0],l[1],!1,!1,!1,!1,1,m),b.android){var c=document.createTouch(window,m,0,j[0],j[1],k[0],k[1],l[0],l[1],0,0,0,0);a.touches=a.targetTouches=a.changedTouches=document.createTouchList(c)}}};if(document.createEvent){var p=!i&&!g&&r&&t[c]&&!b.android,q=p?"TouchEvent":"MouseEvents";a=document.createEvent(q),o[q](a),n(a),m.dispatchEvent(a)}else document.createEventObject&&(a=document.createEventObject(),a.eventType=a.eventName=h,a.screenX=k[0],a.screenY=k[1],a.clientX=l[0],a.clientY=l[1],n(a),m.fireEvent("on"+h,a))}),this}},a.Mottle.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&&a.preventDefault&&a.preventDefault()},a.Mottle.pageLocation=x,a.Mottle.setForceTouchEvents=function(a){r=a},a.Mottle.setForceMouseEvents=function(a){s=a}}.call(this),function(){"use strict";var a=function(a,b,c){return a.indexOf(b)===-1&&(c?a.unshift(b):a.push(b),!0)},b=function(a,b){var c=a.indexOf(b);c!=-1&&a.splice(c,1)},c=function(a,b){for(var c=[],d=0;d<a.length;d++)b.indexOf(a[d])==-1&&c.push(a[d]);return c},d=function(a){return null!=a&&("string"==typeof a||a.constructor==String)},e=function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}},f=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},g=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}(),h=50,i=50,j=g>-1&&g<9,k=9==g,l=function(a){if(j)return[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop];var b=n(a),c=m(b,0);return k?[c.pageX||c.clientX,c.pageY||c.clientY]:[c.pageX,c.pageY]},m=function(a,b){return a.item?a.item(b):a[b]},n=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},o={draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select"},p="katavorio-drag-scope",q=["stop","start","drag","drop","over","out","beforeStart"],r=function(){},s=function(){return!0},t=function(a,b,c){for(var d=0;d<a.length;d++)a[d]!=c&&b(a[d])},u=function(a,b,c,d){t(a,function(a){a.setActive(b),b&&a.updatePosition(),c&&a.setHover(d,b)})},v=function(a,b){if(null!=a){a=d(a)||null!=a.tagName||null==a.length?[a]:a;for(var c=0;c<a.length;c++)b.apply(a[c],[a[c]])}},w=function(a){a.stopPropagation?(a.stopPropagation(),a.preventDefault()):a.returnValue=!1},x="input,textarea,select,button,option",y=function(a,b,c){var d=a.srcElement||a.target;return!f(d,c.getInputFilterSelector(),b)},z=function(a,b,c,d){this.params=b||{},this.el=a,this.params.addClass(this.el,this._class),this.uuid=C();var e=!0;return this.setEnabled=function(a){e=a},this.isEnabled=function(){return e},this.toggleEnabled=function(){e=!e},this.setScope=function(a){this.scopes=a?a.split(/\s+/):[d]},this.addScope=function(a){var b={};v(this.scopes,function(a){b[a]=!0}),v(a?a.split(/\s+/):[],function(a){b[a]=!0}),this.scopes=[];for(var c in b)this.scopes.push(c)},this.removeScope=function(a){var b={};v(this.scopes,function(a){b[a]=!0}),v(a?a.split(/\s+/):[],function(a){delete b[a]}),this.scopes=[];for(var c in b)this.scopes.push(c)},this.toggleScope=function(a){var b={};v(this.scopes,function(a){b[a]=!0}),v(a?a.split(/\s+/):[],function(a){b[a]?delete b[a]:b[a]=!0}),this.scopes=[];for(var c in b)this.scopes.push(c)},this.setScope(b.scope),this.k=b.katavorio,b.katavorio},A=function(a,b,c,g){this._class=c.draggable;
var j=z.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var k=[0,0],m=null,n=!1,o=this.params.consumeStartEvent!==!1,p=this.el,q=this.params.clone,r=(this.params.scroll,b.multipleDrop!==!1),t=b.snapThreshold||5,v=function(a,b,c,d,e){d=d||t,e=e||t;var f=Math.floor(a[0]/b),g=b*f,h=g+b,i=Math.abs(a[0]-g)<=d?g:Math.abs(h-a[0])<=d?h:a[0],j=Math.floor(a[1]/c),k=c*j,l=k+c,m=Math.abs(a[1]-k)<=e?k:Math.abs(l-a[1])<=e?l:a[1];return[i,m]};this.posses=[],this.posseRoles={},this.toGrid=function(a){return null==this.params.grid?a:v(a,this.params.grid[0],this.params.grid[1])},this.snap=function(a,b){if(null!=p){a=a||(this.params.grid?this.params.grid[0]:h),b=b||(this.params.grid?this.params.grid[1]:i);var c=this.params.getPosition(p);this.params.setPosition(p,v(c,a,b,a,b))}},this.constrain="function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment?function(a){return[Math.max(0,Math.min(E.w-this.size[0],a[0])),Math.max(0,Math.min(E.h-this.size[1],a[1]))]}:function(a){return a};var x=function(a){return"function"==typeof a?(a._katavorioId=C(),a._katavorioId):a},A={},B=function(a){for(var b in A){var c=A[b],d=c[0](a);if(c[1]&&(d=!d),!d)return!1}return!0},D=this.setFilter=function(b,c){if(b){var e=x(b);A[e]=[function(c){var e,g=c.srcElement||c.target;return d(b)?e=f(g,b,a):"function"==typeof b&&(e=b(c,a)),e},c!==!1]}};this.addFilter=D,this.removeFilter=function(a){var b="function"==typeof a?a._katavorioId:a;delete A[b]};this.clearAllFilters=function(){A={}},this.canDrag=this.params.canDrag||s;var E,F=[],G=[];this.downListener=function(a){var b=this.rightButtonCanDrag||3!==a.which&&2!==a.button;if(b&&this.isEnabled()&&this.canDrag()){var d=B(a)&&y(a,this.el,this.k);if(d){if(q){p=this.el.cloneNode(!0),p.setAttribute("id",null),p.style.position="absolute";var f=e(this.el);p.style.left=f.left+"px",p.style.top=f.top+"px",document.body.appendChild(p)}else p=this.el;o&&w(a),k=l(a),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),j.markSelection(this),j.markPosses(this),this.params.addClass(document.body,c.noSelect),I("beforeStart",{el:this.el,pos:m,e:a,drag:this})}else this.params.consumeFilteredEvents&&w(a)}}.bind(this),this.moveListener=function(a){if(k){if(!n){var b=I("start",{el:this.el,pos:m,e:a,drag:this});if(b!==!1){if(!k)return;this.mark(!0),n=!0}}if(k){G.length=0;var c=l(a),d=c[0]-k[0],e=c[1]-k[1],f=this.params.ignoreZoom?1:j.getZoom();d/=f,e/=f,this.moveBy(d,e,a),j.updateSelection(d,e,this),j.updatePosses(d,e,this)}}}.bind(this),this.upListener=function(a){k&&(k=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,c.noSelect),this.unmark(a),j.unmarkSelection(this,a),j.unmarkPosses(this,a),this.stop(a),j.notifySelectionDragStop(this,a),j.notifyPosseDragStop(this,a),n=!1,q&&(p&&p.parentNode&&p.parentNode.removeChild(p),p=null))}.bind(this),this.getFilters=function(){return A},this.abort=function(){null!=k&&this.upListener()},this.getDragElement=function(){return p||this.el};var H={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[]};b.events.start&&H.start.push(b.events.start),b.events.beforeStart&&H.beforeStart.push(b.events.beforeStart),b.events.stop&&H.stop.push(b.events.stop),b.events.drag&&H.drag.push(b.events.drag),this.on=function(a,b){H[a]&&H[a].push(b)};var I=function(a,b){if(H[a])for(var c=0;c<H[a].length;c++)try{H[a][c](b)}catch(a){}};this.notifyStart=function(a){I("start",{el:this.el,pos:this.params.getPosition(p),e:a,drag:this})},this.stop=function(a,b){if(b||n){var c=[],d=j.getSelection(),e=this.params.getPosition(p);if(d.length>1)for(var f=0;f<d.length;f++){var g=this.params.getPosition(d[f].el);c.push([d[f].el,{left:g[0],top:g[1]},d[f]])}else c.push([p,{left:e[0],top:e[1]},this]);I("stop",{el:p,pos:e,e:a,drag:this,selection:c})}},this.mark=function(a){if(m=this.params.getPosition(p),this.size=this.params.getSize(p),F=j.getMatchingDroppables(this),u(F,!0,!1,this),this.params.addClass(p,this.params.dragClass||c.drag),this.params.constrain||this.params.containment){var b=this.params.getSize(p.parentNode);E={w:b[0],h:b[1]}}a&&j.notifySelectionDragStart(this)},this.unmark=function(a,b){if(u(F,!1,!0,this),this.params.removeClass(p,this.params.dragClass||c.drag),F.length=0,!b)for(var d=0;d<G.length;d++){var e=G[d].drop(this,a);if(e===!0)break}},this.moveBy=function(a,b,c){G.length=0;var d=this.constrain(this.toGrid([m[0]+a,m[1]+b]),p),e={x:d[0],y:d[1],w:this.size[0],h:this.size[1]},f=null;this.params.setPosition(p,d);for(var g=0;g<F.length;g++){var h={x:F[g].position[0],y:F[g].position[1],w:F[g].size[0],h:F[g].size[1]};this.params.intersects(e,h)&&(r||null==f||f==F[g].el)&&F[g].canDrop(this)?(f||(f=F[g].el),G.push(F[g]),F[g].setHover(this,!0,c)):F[g].isHover()&&F[g].setHover(this,!1,c)}I("drag",{el:this.el,pos:d,e:c,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?D(this.params.handle,!1):D(this.params.filter,this.params.filterExclude)},B=function(a,b,c,d){this._class=c.droppable,this.params=b||{},this._activeClass=this.params.activeClass||c.active,this._hoverClass=this.params.hoverClass||c.hover,z.apply(this,arguments);var e=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(a){this.params[a?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(a){return!0},this.isHover=function(){return e},this.setHover=function(a,b,c){(b||null==this.el._katavorioDragHover||this.el._katavorioDragHover==a.el._katavorio)&&(this.params[b?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=b?a.el._katavorio:null,e!==b&&this.params.events[b?"over":"out"]({el:this.el,e:c,drag:a,drop:this}),e=b)},this.drop=function(a,b){return this.params.events.drop({drag:a,e:b,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,e=null}},C=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},D=function(a){return null==a?null:(a="string"==typeof a||a.constructor==String?document.getElementById(a):a,null==a?null:(a._katavorio=a._katavorio||C(),a))};this.Katavorio=function(e){var f=[],g={};this._dragsByScope={},this._dropsByScope={};var h=1,i=function(a,b){v(a,function(a){for(var c=0;c<a.scopes.length;c++)b[a.scopes[c]]=b[a.scopes[c]]||[],b[a.scopes[c]].push(a)})},j=function(a,b){var c=0;return v(a,function(a){for(var d=0;d<a.scopes.length;d++)if(b[a.scopes[d]]){var f=e.indexOf(b[a.scopes[d]],a);f!=-1&&(b[a.scopes[d]].splice(f,1),c++)}}),c>0},k=(this.getMatchingDroppables=function(a){for(var b=[],c={},d=0;d<a.scopes.length;d++){var e=this._dropsByScope[a.scopes[d]];if(e)for(var f=0;f<e.length;f++)!e[f].canDrop(a)||c[e[f].uuid]||!e[f].allowLoopback&&e[f].el===a.el||(c[e[f].uuid]=!0,b.push(e[f]))}return b},function(a){a=a||{};var b,c={events:{}};for(b in e)c[b]=e[b];for(b in a)c[b]=a[b];for(b=0;b<q.length;b++)c.events[q[b]]=a[q[b]]||r;return c.katavorio=this,c}.bind(this)),l=function(a,b){for(var c=0;c<q.length;c++)b[q[c]]&&a.on(q[c],b[q[c]])}.bind(this),m={},n=e.css||{},s=e.scope||p;for(var u in o)m[u]=o[u];for(var u in n)m[u]=n[u];var w=e.inputFilterSelector||x;this.getInputFilterSelector=function(){return w},this.setInputFilterSelector=function(a){return w=a,this},this.draggable=function(a,b){var c=[];return v(a,function(a){if(a=D(a),null!=a)if(null==a._katavorioDrag){var d=k(b);a._katavorioDrag=new A(a,d,m,s),i(a._katavorioDrag,this._dragsByScope),c.push(a._katavorioDrag),e.addClass(a,m.draggable)}else l(a._katavorioDrag,b)}.bind(this)),c},this.droppable=function(a,b){var c=[];return v(a,function(a){if(a=D(a),null!=a){var d=new B(a,k(b),m,s);a._katavorioDrop=a._katavorioDrop||[],a._katavorioDrop.push(d),i(d,this._dropsByScope),c.push(d),e.addClass(a,m.droppable)}}.bind(this)),c},this.select=function(a){return v(a,function(){var a=D(this);a&&a._katavorioDrag&&(g[a._katavorio]||(f.push(a._katavorioDrag),g[a._katavorio]=[a,f.length-1],e.addClass(a,m.selected)))}),this},this.deselect=function(a){return v(a,function(){var a=D(this);if(a&&a._katavorio){var b=g[a._katavorio];if(b){for(var c=[],d=0;d<f.length;d++)f[d].el!==a&&c.push(f[d]);f=c,delete g[a._katavorio],e.removeClass(a,m.selected)}}}),this},this.deselectAll=function(){for(var a in g){var b=g[a];e.removeClass(b[0],m.selected)}f.length=0,g={}},this.markSelection=function(a){t(f,function(a){a.mark()},a)},this.markPosses=function(a){a.posses&&v(a.posses,function(b){a.posseRoles[b]&&E[b]&&t(E[b].members,function(a){a.mark()},a)})},this.unmarkSelection=function(a,b){t(f,function(a){a.unmark(b)},a)},this.unmarkPosses=function(a,b){a.posses&&v(a.posses,function(c){a.posseRoles[c]&&E[c]&&t(E[c].members,function(a){a.unmark(b,!0)},a)})},this.getSelection=function(){return f.slice(0)},this.updateSelection=function(a,b,c){t(f,function(c){c.moveBy(a,b)},c)};var y=function(a,b){b.posses&&v(b.posses,function(c){b.posseRoles[c]&&E[c]&&t(E[c].members,function(b){a(b)},b)})};this.updatePosses=function(a,b,c){y(function(c){c.moveBy(a,b)},c)},this.notifyPosseDragStop=function(a,b){y(function(a){a.stop(b,!0)},a)},this.notifySelectionDragStop=function(a,b){t(f,function(a){a.stop(b,!0)},a)},this.notifySelectionDragStart=function(a,b){t(f,function(a){a.notifyStart(b)},a)},this.setZoom=function(a){h=a},this.getZoom=function(){return h};var z=function(a,b,c,d){v(a,function(a){j(a,c),a[d](b),i(a,c)})};v(["set","add","remove","toggle"],function(a){this[a+"Scope"]=function(b,c){z(b._katavorioDrag,c,this._dragsByScope,a+"Scope"),z(b._katavorioDrop,c,this._dropsByScope,a+"Scope")}.bind(this),this[a+"DragScope"]=function(b,c){z(b.constructor===A?b:b._katavorioDrag,c,this._dragsByScope,a+"Scope")}.bind(this),this[a+"DropScope"]=function(b,c){z(b.constructor===B?b:b._katavorioDrop,c,this._dropsByScope,a+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(a,b){for(var c in this._dragsByScope)t(this._dragsByScope[c],function(c){c.snap(a,b)})},this.getDragsForScope=function(a){return this._dragsByScope[a]},this.getDropsForScope=function(a){return this._dropsByScope[a]};var C=function(a,b,c){a=D(a),a[b]&&(j(a[b],c)&&v(a[b],function(a){a.destroy()}),a[b]=null)};this.elementRemoved=function(a){this.destroyDraggable(a),this.destroyDroppable(a)},this.destroyDraggable=function(a){C(a,"_katavorioDrag",this._dragsByScope)},this.destroyDroppable=function(a){C(a,"_katavorioDrop",this._dropsByScope)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},f=[],g={},E={}};var E={},F=function(b,c,e){var f=d(c)?c:c.id,g=!!d(c)||c.active!==!1,h=E[f]||function(){var a={name:f,members:[]};return E[f]=a,a}();return v(b,function(b){if(b._katavorioDrag){if(e&&null!=b._katavorioDrag.posseRoles[h.name])return;a(h.members,b._katavorioDrag),a(b._katavorioDrag.posses,h.name),b._katavorioDrag.posseRoles[h.name]=g}}),h};this.addToPosse=function(a,b){for(var c=[],d=1;d<arguments.length;d++)c.push(F(a,arguments[d]));return 1==c.length?c[0]:c},this.setPosse=function(a,b){for(var d=[],e=1;e<arguments.length;e++)d.push(F(a,arguments[e],!0).name);return v(a,function(a){if(a._katavorioDrag){var b=c(a._katavorioDrag.posses,d),e=[];Array.prototype.push.apply(e,a._katavorioDrag.posses);for(var f=0;f<b.length;f++)this.removeFromPosse(a,b[f])}}.bind(this)),1==d.length?d[0]:d},this.removeFromPosse=function(a,c){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var d=1;d<arguments.length;d++)c=arguments[d],v(a,function(a){if(a._katavorioDrag&&a._katavorioDrag.posses){var d=a._katavorioDrag;v(c,function(a){b(E[a].members,d),b(d.posses,a),delete d.posseRoles[a]})}})},this.removeFromAllPosses=function(a){v(a,function(a){if(a._katavorioDrag&&a._katavorioDrag.posses){var c=a._katavorioDrag;v(c.posses,function(a){b(E[a].members,c)}),c.posses.length=0,c.posseRoles={}}})},this.setPosseState=function(a,b,c){var d=E[b];d&&v(a,function(a){a._katavorioDrag&&a._katavorioDrag.posses&&(a._katavorioDrag.posseRoles[d.name]=c)})}}}.call(this),function(){var a=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=function(a){return"[object Number]"===Object.prototype.toString.call(a)},c=function(a){return"string"==typeof a},d=function(a){return"boolean"==typeof a},e=function(a){return null==a},f=function(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)},g=function(a){return"[object Date]"===Object.prototype.toString.call(a)},h=function(a){return"[object Function]"===Object.prototype.toString.call(a)},i=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},j=this,k=j.jsPlumbUtil={isArray:a,isString:c,isBoolean:d,isNull:e,isObject:f,isDate:g,isFunction:h,isEmpty:i,isNumber:b,clone:function(b){if(c(b))return""+b;if(d(b))return!!b;if(g(b))return new Date(b.getTime());if(h(b))return b;if(a(b)){for(var e=[],i=0;i<b.length;i++)e.push(this.clone(b[i]));return e}if(f(b)){var j={};for(var k in b)j[k]=this.clone(b[k]);return j}return b},merge:function(b,e,g){var h,i,j={};for(g=g||[],i=0;i<g.length;i++)j[g[i]]=!0;var k=this.clone(b);for(i in e)if(null==k[i])k[i]=e[i];else if(c(e[i])||d(e[i]))j[i]?(h=[],h.push.apply(h,a(k[i])?k[i]:[k[i]]),h.push.apply(h,a(e[i])?e[i]:[e[i]]),k[i]=h):k[i]=e[i];else if(a(e[i]))h=[],a(k[i])&&h.push.apply(h,k[i]),h.push.apply(h,e[i]),k[i]=h;else if(f(e[i])){f(k[i])||(k[i]={});for(var l in e[i])k[i][l]=e[i][l]}return k},replace:function(a,b,c){if(null!=a){var d=a,e=d;return b.replace(/([^\.])+/g,function(a,b,d,f){var g=a.match(/([^\[0-9]+){1}(\[)([0-9+])/),h=d+a.length>=f.length,i=function(){return e[g[1]]||function(){return e[g[1]]=[],e[g[1]]}()};if(h)g?i()[g[3]]=c:e[a]=c;else if(g){var j=i();e=j[g[3]]||function(){return j[g[3]]={},j[g[3]]}()}else e=e[a]||function(){return e[a]={},e[a]}()}),a}},functionChain:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0][c[d][1]].apply(c[d][0],c[d][2]);if(e===b)return e}return a},populate:function(b,d,e){var g=function(a){var b=a.match(/(\${.*?})/g);if(null!=b)for(var c=0;c<b.length;c++){var e=d[b[c].substring(2,b[c].length-1)]||"";null!=e&&(a=a.replace(b[c],e))}return a},i=function(b){if(null!=b){if(c(b))return g(b);if(!h(b)||null!=e&&0!==(b.name||"").indexOf(e)){if(a(b)){for(var j=[],k=0;k<b.length;k++)j.push(i(b[k]));return j}if(f(b)){var l={};for(var m in b)l[m]=i(b[m]);return l}return b}return b(d)}};return i(b)},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},removeWithFunction:function(a,b){var c=k.findWithFunction(a,b);return c>-1&&a.splice(c,1),c!=-1},remove:function(a,b){var c=a.indexOf(b);return c>-1&&a.splice(c,1),c!=-1},addWithFunction:function(a,b,c){k.findWithFunction(a,c)==-1&&a.push(b)},addToList:function(a,b,c,d){var e=a[b];return null==e&&(e=[],a[b]=e),e[d?"unshift":"push"](c),e},extend:function(b,c,d){var e;for(c=a(c)?c:[c],e=0;e<c.length;e++)for(var f in c[e].prototype)c[e].prototype.hasOwnProperty(f)&&(b.prototype[f]=c[e].prototype[f]);var g=function(a,b){return function(){for(e=0;e<c.length;e++)c[e].prototype[a]&&c[e].prototype[a].apply(this,arguments);return b.apply(this,arguments)}},h=function(a){for(var c in a)b.prototype[c]=g(c,a[c])};if(arguments.length>2)for(e=2;e<arguments.length;e++)h(arguments[e]);return b},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},logEnabled:!0,log:function(){if(k.logEnabled&&"undefined"!=typeof console)try{var a=arguments[arguments.length-1];console.log(a)}catch(a){}},wrap:function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(a){k.log("jsPlumb function failed : "+a)}if(null==c||d!==c)try{d=a.apply(this,arguments)}catch(a){k.log("wrapped function failed : "+a)}return d}}};k.EventGenerator=function(){var a={},b=!1,c={ready:!0};this.bind=function(b,c,d){var e=function(b){k.addToList(a,b,c,d),c.__jsPlumb=c.__jsPlumb||{},c.__jsPlumb[jsPlumbUtil.uuid()]=b};if("string"==typeof b)e(b);else if(null!=b.length)for(var f=0;f<b.length;f++)e(b[f]);return this},this.fire=function(d,e,f){if(!b&&a[d]){var g=a[d].length,h=0,i=!1,j=null;if(!this.shouldFireEvent||this.shouldFireEvent(d,e,f))for(;!i&&h<g&&j!==!1;){if(c[d])a[d][h].apply(this,[e,f]);else try{j=a[d][h].apply(this,[e,f])}catch(a){k.log("jsPlumb: fire failed for event "+d+" : "+a)}h++,null!=a&&null!=a[d]||(i=!0)}}return this},this.unbind=function(b,c){if(0===arguments.length)a={};else if(1===arguments.length){if("string"==typeof b)delete a[b];else if(b.__jsPlumb){var d;for(var e in b.__jsPlumb)d=b.__jsPlumb[e],k.remove(a[d]||[],b)}}else 2===arguments.length&&k.remove(a[b]||[],c);return this},this.getListener=function(b){return a[b]},this.setSuspendEvents=function(a){b=a},this.isSuspendEvents=function(){return b},this.silently=function(a){this.setSuspendEvents(!0);try{a()}catch(a){jsPlumbUtil.log("Cannot execute silent function "+a)}this.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var b in a)a[b]=null}},k.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}}}.call(this),function(){"use strict";var a=this,b=a.jsPlumbUtil;b.matchesSelector=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},b.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&&a.preventDefault&&a.preventDefault()},b.sizeElement=function(a,b,c,d,e){a&&(a.style.height=e+"px",a.height=e,a.style.width=d+"px",a.width=d,a.style.left=b+"px",a.style.top=c+"px")}}.call(this),function(){"use strict";var a,c=this,e=[],f=c.jsPlumbUtil,g=function(){return""+(new Date).getTime()},h=function(a){if(a._jsPlumb.paintStyle&&a._jsPlumb.hoverPaintStyle){var b={};t.extend(b,a._jsPlumb.paintStyle),t.extend(b,a._jsPlumb.hoverPaintStyle),delete a._jsPlumb.hoverPaintStyle,b.gradient&&a._jsPlumb.paintStyle.fillStyle&&delete b.gradient,a._jsPlumb.hoverPaintStyle=b}},i=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],j=function(a,b,c,d){var e=a.getAttachedElements();if(e)for(var f=0,g=e.length;f<g;f++)d&&d==e[f]||e[f].setHover(b,!0,c)},k=function(a){return null==a?null:a.split(" ")},l=function(a,b,c){for(var d in b)a[d]=c},m=function(a,b){b=f.isArray(b)||null!=b.length&&!f.isString(b)?b:[b];for(var c=0;c<b.length;c++)try{a.apply(b[c],[b[c]])}catch(a){f.log(".each iteration failed : "+a)}},n=function(a,b,c){if(a.getDefaultType){var d=a.getTypeDescriptor(),e={},g=a.getDefaultType(),h=f.merge({},g);l(e,g,"__default");for(var i=0,j=a._jsPlumb.types.length;i<j;i++){var k=a._jsPlumb.types[i];if("__default"!==k){var m=a._jsPlumb.instance.getType(k,d);null!=m&&(h=f.merge(h,m,["cssClass"]),l(e,m,k))}}b&&(h=f.populate(h,b,"_")),a.applyType(h,c,e),c||a.repaint()}},o=c.jsPlumbUIComponent=function(a){f.EventGenerator.apply(this,arguments);var b=this,c=arguments,d=b.idPrefix,e=d+(new Date).getTime();this._jsPlumb={instance:a._jsPlumb,parameters:a.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:a.beforeDetach,beforeDrop:a.beforeDrop,overlayPlacements:[],hoverClass:a.hoverClass||a._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(a,b,c){this._jsPlumb.typeCache[c]=this._jsPlumb.typeCache[c]||{},this._jsPlumb.typeCache[c][a]=b},this.getCachedTypeItem=function(a,b){return this._jsPlumb.typeCache[b]?this._jsPlumb.typeCache[b][a]:null},this.getId=function(){return e};var g=a.overlays||[],h={};if(this.defaultOverlayKeys){for(var i=0;i<this.defaultOverlayKeys.length;i++)Array.prototype.push.apply(g,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[i]]||[]);for(i=0;i<g.length;i++){var j=t.convertToFullOverlaySpec(g[i]);h[j[1].id]=j}}var k={overlays:h,parameters:a.parameters||{},scope:a.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return k},this.appendToDefaultType=function(a){for(var b in a)k[b]=a[b]},a.events)for(i in a.events)b.bind(i,a.events[i]);this.clone=function(){var a={};return this.constructor.apply(a,c),a}.bind(this),this.isDetachAllowed=function(a){var b=!0;if(this._jsPlumb.beforeDetach)try{b=this._jsPlumb.beforeDetach(a)}catch(a){f.log("jsPlumb: beforeDetach callback failed",a)}return b},this.isDropAllowed=function(a,b,c,d,e,g,h){var i=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:a,targetId:b,scope:c,connection:d,dropEndpoint:e,source:g,target:h});if(this._jsPlumb.beforeDrop)try{i=this._jsPlumb.beforeDrop({sourceId:a,targetId:b,scope:c,connection:d,dropEndpoint:e,source:g,target:h})}catch(a){f.log("jsPlumb: beforeDrop callback failed",a)}return i};var l=[];this.setListenerComponent=function(a){for(var b=0;b<l.length;b++)l[b][3]=a}},p=function(a,b){var c=a._jsPlumb.types[b],d=a._jsPlumb.instance.getType(c,a.getTypeDescriptor());null!=d&&d.cssClass&&a.canvas&&a._jsPlumb.instance.removeClass(a.canvas,d.cssClass)};f.extend(c.jsPlumbUIComponent,f.EventGenerator,{getParameter:function(a){return this._jsPlumb.parameters[a]},setParameter:function(a,b){this._jsPlumb.parameters[a]=b},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(a){this._jsPlumb.parameters=a},getClass:function(){return t.getClass(this.canvas)},hasClass:function(a){return t.hasClass(this.canvas,a)},addClass:function(a){t.addClass(this.canvas,a)},removeClass:function(a){t.removeClass(this.canvas,a)},updateClasses:function(a,b){t.updateClasses(this.canvas,a,b)},setType:function(a,b,c){this.clearTypes(),this._jsPlumb.types=k(a)||[],n(this,b,c)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(a,b){n(this,a,b)},hasType:function(a){return this._jsPlumb.types.indexOf(a)!=-1},addType:function(a,b,c){var d=k(a),e=!1;if(null!=d){for(var f=0,g=d.length;f<g;f++)this.hasType(d[f])||(this._jsPlumb.types.push(d[f]),e=!0);e&&n(this,b,c)}},removeType:function(a,b,c){var d=k(a),e=!1,f=function(a){var b=this._jsPlumb.types.indexOf(a);return b!=-1&&(p(this,b),this._jsPlumb.types.splice(b,1),!0)}.bind(this);if(null!=d){for(var g=0,h=d.length;g<h;g++)e=f(d[g])||e;e&&n(this,b,c)}},clearTypes:function(a,b){for(var c=this._jsPlumb.types.length,d=0;d<c;d++)p(this,0),this._jsPlumb.types.splice(0,1);n(this,a,b)},toggleType:function(a,b,c){var d=k(a);if(null!=d){for(var e=0,f=d.length;e<f;e++){var g=this._jsPlumb.types.indexOf(d[e]);g!=-1?(p(this,g),this._jsPlumb.types.splice(g,1)):this._jsPlumb.types.push(d[e])}n(this,b,c)}},applyType:function(a,b){if(this.setPaintStyle(a.paintStyle,b),this.setHoverPaintStyle(a.hoverPaintStyle,b),a.parameters)for(var c in a.parameters)this.setParameter(c,a.parameters[c]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(a,b){this._jsPlumb.paintStyle=a,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,h(this),b||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(a,b){this._jsPlumb.hoverPaintStyle=a,h(this),b||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(a){(a||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(a,b,c){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=a,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var d=a?"addClass":"removeClass";this._jsPlumb.instance[d](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[d](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=a?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(c=c||g(),this.repaint({timestamp:c,recalc:!1}))),this.getAttachedElements&&!b&&j(this,a,g(),this)}}});var q=0,r=function(){var a=q+1;return q++,a},s=window.jsPlumbInstance=function(b){this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:4,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},b&&t.extend(this.Defaults,b),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},f.EventGenerator.apply(this);var c=this,d=r(),h=c.bind,j={},k=1,l=function(a){if(null==a)return null;if(3==a.nodeType||8==a.nodeType)return{el:a,text:!0};var b=c.getElement(a);return{el:b,id:f.isString(a)&&null==b?a:Y(b)}};this.getInstanceIndex=function(){return d},this.setZoom=function(a,b){return k=a,c.fire("zoom",k),b&&c.repaintEverything(),!0},this.getZoom=function(){return k};for(var n in this.Defaults)j[n]=this.Defaults[n];var p,q=[];this.unbindContainer=function(){if(null!=p&&q.length>0)for(var a=0;a<q.length;a++)c.off(p,q[a][0],q[a][1])},this.setContainer=function(a){this.unbindContainer(),a=this.getElement(a),this.select().each(function(b){b.moveParent(a)}),this.selectEndpoints().each(function(b){b.moveParent(a)});var b=p;p=a,q.length=0;for(var d=function(a,b){var d=b.srcElement||b.target,e=(d&&d.parentNode?d.parentNode._jsPlumb:null)||(d?d._jsPlumb:null)||(d&&d.parentNode&&d.parentNode.parentNode?d.parentNode.parentNode._jsPlumb:null);e&&(e.fire(a,e,b),c.fire(a,e.component||e,b))},e=function(a,b,d){q.push([a,d]),c.on(p,a,b,d)},f=function(a){e(a,".jsplumb-connector > *",function(b){d(a,b)}),e(a,".jsplumb-endpoint, .jsplumb-endpoint > *, .jsplumb-endpoint svg *",function(b){d(a,b)}),e(a,".jsplumb-overlay, .jsplumb-overlay *",function(b){d(a,b)})},g=0;g<i.length;g++)f(i[g]);for(var h in y){var j=y[h].el;j.parentNode===b&&(b.removeChild(j),p.appendChild(j))}},this.getContainer=function(){return p},this.bind=function(a,b){"ready"===a&&u?b():h.apply(c,[a,b])},c.importDefaults=function(a){for(var b in a)c.Defaults[b]=a[b];return a.Container&&c.setContainer(a.Container),c},c.restoreDefaults=function(){return c.Defaults=t.extend({},j),c};var s=null,u=!1,v=[],w={},x={},y={},z={},A={},B={},C=!1,D=[],E=!1,F=null,G=this.Defaults.Scope,H=1,I=function(){return""+H++},J=function(a,b){p?p.appendChild(a):b?this.getElement(b).appendChild(a):this.appendToRoot(a)}.bind(this),K=function(a,b,d,e){if(!t.headless&&!E){var f=Y(a),h=c.getDragManager().getElementsForDraggable(f);null==d&&(d=g());var i=qa({elId:f,offset:b,recalc:!1,timestamp:d});if(h)for(var j in h)qa({elId:h[j].id,offset:{left:i.o.left+h[j].offset.left,top:i.o.top+h[j].offset.top},recalc:!1,timestamp:d});if(c.anchorManager.redraw(f,b,d,null,e),h)for(var k in h)c.anchorManager.redraw(h[k].id,b,d,h[k].offset,e,!0)}},L=function(a){return x[a]},M=function(a,b,d,e){if(!t.headless){var g=null!=b&&b;if(g&&t.isDragSupported(a,c)){var h=d||c.Defaults.DragOptions;if(h=t.extend({},h),t.isAlreadyDraggable(a,c))d.force&&c.initDraggable(a,h);else{var i=t.dragEvents.drag,j=t.dragEvents.stop,k=t.dragEvents.start,l=c.getElement(a),m=c.getDragManager().getDragAncestor(l),n={left:0,top:0},o=n,p=!1;pa(e,a),h[k]=f.wrap(h[k],function(){if(o=null!=m?c.getOffset(m):n,c.setHoverSuspended(!0),c.select({source:a}).addClass(c.elementDraggingClass+" "+c.sourceElementDraggingClass,!0),c.select({target:a}).addClass(c.elementDraggingClass+" "+c.targetElementDraggingClass,!0),c.setConnectionBeingDragged(!0),h.canDrag)return d.canDrag()},!1),h[i]=f.wrap(h[i],function(){var b=c.getUIPosition(arguments,c.getZoom());b.left+=o.left,b.top+=o.top,K(a,b,null,!0),p&&c.addClass(a,"jsplumb-dragged"),p=!0}),h[j]=f.wrap(h[j],function(){for(var a=arguments[0].selection,b=c.getUIPosition(arguments),d=function(a){K(a[0],b),c.removeClass(a[0],"jsplumb-dragged"),c.select({source:a[0]}).removeClass(c.elementDraggingClass+" "+c.sourceElementDraggingClass,!0),c.select({target:a[0]}).removeClass(c.elementDraggingClass+" "+c.targetElementDraggingClass,!0),c.getDragManager().dragEnded(a[0])},e=0;e<a.length;e++)d(a[e]);p=!1,c.setHoverSuspended(!1),c.setConnectionBeingDragged(!1)});var q=Y(a);B[q]=!0;var r=B[q];h.disabled=null!=r&&!r,c.initDraggable(a,h),c.getDragManager().register(a)}}}},N=function(a,b){for(var c=a.scope.split(/\s/),d=b.scope.split(/\s/),e=0;e<c.length;e++)for(var f=0;f<d.length;f++)if(d[f]==c[e])return!0;return!1},O=function(a,b){var d=t.extend({},a);if(b&&t.extend(d,b),d.source&&(d.source.endpoint?d.sourceEndpoint=d.source:d.source=c.getElement(d.source)),d.target&&(d.target.endpoint?d.targetEndpoint=d.target:d.target=c.getElement(d.target)),a.uuids&&(d.sourceEndpoint=L(a.uuids[0]),d.targetEndpoint=L(a.uuids[1])),d.sourceEndpoint&&d.sourceEndpoint.isFull())return void f.log(c,"could not add connection; source endpoint is full");if(d.targetEndpoint&&d.targetEndpoint.isFull())return void f.log(c,"could not add connection; target endpoint is full");if(!d.type&&d.sourceEndpoint&&(d.type=d.sourceEndpoint.connectionType),d.sourceEndpoint&&d.sourceEndpoint.connectorOverlays){d.overlays=d.overlays||[];for(var e=0,g=d.sourceEndpoint.connectorOverlays.length;e<g;e++)d.overlays.push(d.sourceEndpoint.connectorOverlays[e])}d.sourceEndpoint&&d.sourceEndpoint.scope&&(d.scope=d.sourceEndpoint.scope),!d["pointer-events"]&&d.sourceEndpoint&&d.sourceEndpoint.connectorPointerEvents&&(d["pointer-events"]=d.sourceEndpoint.connectorPointerEvents);var h=function(a,b){var c=t.extend({},a);for(var d in b)b[d]&&(c[d]=b[d]);return c},i=function(a,b,e){return c.addEndpoint(a,h(b,{anchor:d.anchors?d.anchors[e]:d.anchor,endpoint:d.endpoints?d.endpoints[e]:d.endpoint,paintStyle:d.endpointStyles?d.endpointStyles[e]:d.endpointStyle,hoverPaintStyle:d.endpointHoverStyles?d.endpointHoverStyles[e]:d.endpointHoverStyle}))},j=function(a,b,c,e){if(d[a]&&!d[a].endpoint&&!d[a+"Endpoint"]&&!d.newConnection){var f=Y(d[a]),g=c[f];if(g=g?g[e]:null){if(!g.enabled)return!1;var h=null!=g.endpoint&&g.endpoint._jsPlumb?g.endpoint:i(d[a],g.def,b);if(h.isFull())return!1;d[a+"Endpoint"]=h,h._doNotDeleteOnDetach=!1,h._deleteOnDetach=!0,g.uniqueEndpoint&&(g.endpoint?h.finalEndpoint=g.endpoint:(g.endpoint=h,h._deleteOnDetach=!1,h._doNotDeleteOnDetach=!0))}}};return j("source",0,this.sourceEndpointDefinitions,d.type||"default")!==!1&&j("target",1,this.targetEndpointDefinitions,d.type||"default")!==!1?(d.sourceEndpoint&&d.targetEndpoint&&(N(d.sourceEndpoint,d.targetEndpoint)||(d=null)),d):void 0}.bind(c),P=function(a){var b=c.Defaults.ConnectionType||c.getDefaultConnectionType();a._jsPlumb=c,a.newConnection=P,a.newEndpoint=R,a.endpointsByUUID=x,a.endpointsByElement=w,a.finaliseConnection=Q,a.id="con_"+I();var d=new b(a);return d.isDetachable()&&(d.endpoints[0].initDraggable("_jsPlumbSource"),d.endpoints[1].initDraggable("_jsPlumbTarget")),d},Q=c.finaliseConnection=function(a,b,d,e){if(b=b||{},a.suspendedEndpoint||v.push(a),a.pending=null,a.endpoints[0].isTemporarySource=!1,e!==!1&&c.anchorManager.newConnection(a),K(a.source),!b.doNotFireConnectionEvent&&b.fireEvent!==!1){var f={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};c.fire("connection",f,d)}},R=function(a,b){var d=c.Defaults.EndpointType||t.Endpoint,e=t.extend({},a);e._jsPlumb=c,e.newConnection=P,
e.newEndpoint=R,e.endpointsByUUID=x,e.endpointsByElement=w,e.fireDetachEvent=_,e.elementId=b||Y(e.source);var f=new d(e);return f.id="ep_"+I(),pa(e.elementId,e.source),t.headless||c.getDragManager().endpointAdded(e.source,b),f},S=function(a,b,c){var d=w[a];if(d&&d.length)for(var e=0,f=d.length;e<f;e++){for(var g=0,h=d[e].connections.length;g<h;g++){var i=b(d[e].connections[g]);if(i)return}c&&c(d[e])}},T=function(a,b){return t.each(a,function(a){c.isDragSupported(a)&&(B[c.getAttribute(a,"id")]=b,c.setElementDraggable(a,b))})},U=function(a,b,c){b="block"===b;var d=null;c&&(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)});var e=l(a);S(e.id,function(a){if(b&&c){var d=a.sourceId===e.id?1:0;a.endpoints[d].isVisible()&&a.setVisible(!0)}else a.setVisible(b)},d)},V=function(a){return t.each(a,function(a){var b=c.getAttribute(a,"id"),d=null!=B[b]&&B[b];return d=!d,B[b]=d,c.setDraggable(a,d),d}.bind(this))},W=function(a,b){var c=null;b&&(c=function(a){var b=a.isVisible();a.setVisible(!b)}),S(a,function(a){var b=a.isVisible();a.setVisible(!b)},c)},X=function(a){var b=z[a];return b?{o:b,s:D[a]}:qa({elId:a})},Y=function(a,b,e){if(f.isString(a))return a;if(null==a)return null;var g=c.getAttribute(a,"id");return g&&"undefined"!==g||(2==arguments.length&&void 0!==arguments[1]?g=b:(1==arguments.length||3==arguments.length&&!arguments[2])&&(g="jsPlumb_"+d+"_"+I()),e||c.setAttribute(a,"id",g)),g};this.setConnectionBeingDragged=function(a){C=a},this.isConnectionBeingDragged=function(){return C},this.getManagedElements=function(){return y},this.getRenderMode=function(){return"svg"},this.connectorClass="jsplumb-connector",this.connectorOutlineClass="jsplumb-connector-outline",this.editableConnectorClass="jsplumb-connector-editable",this.connectedClass="jsplumb-connected",this.hoverClass="jsplumb-hover",this.endpointClass="jsplumb-endpoint",this.endpointConnectedClass="jsplumb-endpoint-connected",this.endpointFullClass="jsplumb-endpoint-full",this.endpointDropAllowedClass="jsplumb-endpoint-drop-allowed",this.endpointDropForbiddenClass="jsplumb-endpoint-drop-forbidden",this.overlayClass="jsplumb-overlay",this.draggingClass="jsplumb-dragging",this.elementDraggingClass="jsplumb-element-dragging",this.sourceElementDraggingClass="jsplumb-source-element-dragging",this.targetElementDraggingClass="jsplumb-target-element-dragging",this.endpointAnchorClassPrefix="jsplumb-endpoint-anchor",this.hoverSourceClass="jsplumb-source-hover",this.hoverTargetClass="jsplumb-target-hover",this.dragSelectClass="jsplumb-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(a,b,d){d=d||{};var e=t.extend({},d);t.extend(e,b),e.endpoint=e.endpoint||c.Defaults.Endpoint,e.paintStyle=e.paintStyle||c.Defaults.EndpointStyle;for(var g=[],h=f.isArray(a)||null!=a.length&&!f.isString(a)?a:[a],i=0,j=h.length;i<j;i++){e.source=c.getElement(h[i]),na(e.source);var k=Y(e.source),l=R(e,k),m=pa(k,e.source).info.o;f.addToList(w,k,l),E||l.paint({anchorLoc:l.anchor.compute({xy:[m.left,m.top],wh:D[k],element:l,timestamp:F}),timestamp:F}),g.push(l),l._doNotDeleteOnDetach=!0}return 1==g.length?g[0]:g},this.addEndpoints=function(a,b,d){for(var e=[],g=0,h=b.length;g<h;g++){var i=c.addEndpoint(a,b[g],d);f.isArray(i)?Array.prototype.push.apply(e,i):e.push(i)}return e},this.animate=function(a,b,d){if(!this.animationSupported)return!1;d=d||{};var e=c.getElement(a),g=Y(e),h=t.animEvents.step,i=t.animEvents.complete;d[h]=f.wrap(d[h],function(){c.revalidate(g)}),d[i]=f.wrap(d[i],function(){c.revalidate(g)}),c.doAnimate(e,b,d)},this.checkCondition=function(a,b){var d=c.getListener(a),e=!0;if(d&&d.length>0){var g=Array.prototype.slice.call(arguments,1);try{for(var h=0,i=d.length;h<i;h++)e=e&&d[h].apply(d[h],g)}catch(b){f.log(c,"cannot check condition ["+a+"]"+b)}}return e},this.connect=function(a,b){var c,d=O(a,b);if(d){if(null==d.source&&null==d.sourceEndpoint)return void f.log("Cannot establish connection - source does not exist");if(null==d.target&&null==d.targetEndpoint)return void f.log("Cannot establish connection - target does not exist");na(d.source),c=P(d),Q(c,d)}return c};var Z=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],$=function(a,b,c,d){var e,f,g,h=Z[c],i=a[h.elId],j=(a[h.el],a.endpoints[c]),k={index:c,originalSourceId:0===c?i:a.sourceId,newSourceId:a.sourceId,originalTargetId:1==c?i:a.targetId,newTargetId:a.targetId,connection:a};if(b.constructor==t.Endpoint)e=b,e.addConnection(a);else if(f=Y(b),g=this[h.epDefs][f],f===a[h.elId])e=null;else if(g)for(var l in g){if(!g[l].enabled)return;e=null!=g[l].endpoint&&g[l].endpoint._jsPlumb?g[l].endpoint:this.addEndpoint(b,g[l].def),g[l].uniqueEndpoint&&(g[l].endpoint=e),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0,e.addConnection(a)}else e=a.makeEndpoint(0===c,b,f),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0;return null!=e&&(j.detachFromConnection(a),a.endpoints[c]=e,a[h.el]=e.element,a[h.elId]=e.elementId,k[0===c?"newSourceId":"newTargetId"]=e.elementId,aa(k),d||a.repaint()),k}.bind(this);this.setSource=function(a,b,c){var d=$(a,b,0,c);this.anchorManager.sourceChanged(d.originalSourceId,d.newSourceId,a)},this.setTarget=function(a,b,c){var d=$(a,b,1,c);this.anchorManager.updateOtherEndpoint(d.originalSourceId,d.originalTargetId,d.newTargetId,a)},this.deleteEndpoint=function(a,b){var d="string"==typeof a?x[a]:a;return d&&c.deleteObject({endpoint:d,dontUpdateHover:b}),c},this.deleteEveryEndpoint=function(){var a=c.setSuspendDrawing(!0);for(var b in w){var d=w[b];if(d&&d.length)for(var e=0,f=d.length;e<f;e++)c.deleteEndpoint(d[e],!0)}return w={},y={},x={},z={},A={},c.anchorManager.reset(),c.getDragManager().reset(),a||c.setSuspendDrawing(!1),c};var _=function(a,b,d){var e=c.Defaults.ConnectionType||c.getDefaultConnectionType(),f=a.constructor==e,g=f?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&&c.fire("connectionDetached",g,d),c.anchorManager.connectionDetached(g)},aa=c.fireMoveEvent=function(a,b){c.fire("connectionMoved",a,b)};this.unregisterEndpoint=function(a){a._jsPlumb.uuid&&(x[a._jsPlumb.uuid]=null),c.anchorManager.deleteEndpoint(a);for(var b in w){var d=w[b];if(d){for(var e=[],f=0,g=d.length;f<g;f++)d[f]!=a&&e.push(d[f]);w[b]=e}w[b].length<1&&delete w[b]}},this.detach=function(){if(0!==arguments.length){var a=c.Defaults.ConnectionType||c.getDefaultConnectionType(),b=arguments[0].constructor==a,d=2==arguments.length&&b?arguments[1]||{}:arguments[0],e=d.fireEvent!==!1,g=d.forceDetach,h=b?arguments[0]:d.connection;if(h)(g||f.functionChain(!0,!1,[[h.endpoints[0],"isDetachAllowed",[h]],[h.endpoints[1],"isDetachAllowed",[h]],[h,"isDetachAllowed",[h]],[c,"checkCondition",["beforeDetach",h]]]))&&h.endpoints[0].detach(h,!1,!0,e);else{var i=t.extend({},d);if(i.uuids)L(i.uuids[0]).detachFrom(L(i.uuids[1]),e);else if(i.sourceEndpoint&&i.targetEndpoint)i.sourceEndpoint.detachFrom(i.targetEndpoint);else{var j=Y(c.getElement(i.source)),k=Y(c.getElement(i.target));S(j,function(a){(a.sourceId==j&&a.targetId==k||a.targetId==j&&a.sourceId==k)&&c.checkCondition("beforeDetach",a)&&a.endpoints[0].detach(a,!1,!0,e)})}}}},this.detachAllConnections=function(a,b){b=b||{},a=c.getElement(a);var d=Y(a),e=w[d];if(e&&e.length)for(var f=0,g=e.length;f<g;f++)e[f].detachAll(b.fireEvent!==!1,b.forceDetach);return c},this.detachEveryConnection=function(a){return a=a||{},c.batch(function(){for(var b in w){var c=w[b];if(c&&c.length)for(var d=0,e=c.length;d<e;d++)c[d].detachAll(a.fireEvent!==!1,a.forceDetach)}v.length=0}),c},this.deleteObject=function(a){var b={endpoints:{},connections:{},endpointCount:0,connectionCount:0},d=(a.fireEvent!==!1,a.deleteAttachedObjects!==!1),e=function(c){if(null!=c&&null==b.connections[c.id]&&(a.dontUpdateHover||null==c._jsPlumb||c.setHover(!1),b.connections[c.id]=c,b.connectionCount++,d))for(var e=0;e<c.endpoints.length;e++)c.endpoints[e]._deleteOnDetach&&g(c.endpoints[e])},g=function(c){if(null!=c&&null==b.endpoints[c.id]&&(a.dontUpdateHover||null==c._jsPlumb||c.setHover(!1),b.endpoints[c.id]=c,b.endpointCount++,d))for(var f=0;f<c.connections.length;f++){var g=c.connections[f];e(g)}};a.connection?e(a.connection):g(a.endpoint);for(var h in b.connections){var i=b.connections[h];i._jsPlumb&&(f.removeWithFunction(v,function(a){return i.id==a.id}),_(i,a.fireEvent!==!1&&!i.pending,a.originalEvent),i.endpoints[0].detachFromConnection(i),i.endpoints[1].detachFromConnection(i),i.cleanup(!0),i.destroy(!0))}for(var j in b.endpoints){var k=b.endpoints[j];k._jsPlumb&&(c.unregisterEndpoint(k),k.cleanup(!0),k.destroy(!0))}return b},this.draggable=function(a,b){var d;return m(function(a){d=l(a),d.el&&M(d.el,!0,b,d.id)},a),c},this.droppable=function(a,b){var d;return b=b||{},b.allowLoopback=!1,m(function(a){d=l(a),d.el&&c.initDroppable(d.el,b)},a),c};var ba=function(a,b,c,d){for(var e=0,f=a.length;e<f;e++)a[e][b].apply(a[e],c);return d(a)},ca=function(a,b,c){for(var d=[],e=0,f=a.length;e<f;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},da=function(a,b,c){return function(){return ba(a,b,arguments,c)}},ea=function(a,b){return function(){return ca(a,b,arguments)}},fa=function(a,b){var c=[];if(a)if("string"==typeof a){if("*"===a)return a;c.push(a)}else if(b)c=a;else if(a.length)for(var d=0,e=a.length;d<e;d++)c.push(l(a[d]).id);else c.push(l(a).id);return c},ga=function(a,b,c){return"*"===a||(a.length>0?a.indexOf(b)!=-1:!c)};this.getConnections=function(a,b){a?a.constructor==String&&(a={scope:a}):a={};for(var d=a.scope||c.getDefaultScope(),e=fa(d,!0),f=fa(a.source),g=fa(a.target),h=!b&&e.length>1?{}:[],i=function(a,c){if(!b&&e.length>1){var d=h[a];null==d&&(d=h[a]=[]),d.push(c)}else h.push(c)},j=0,k=v.length;j<k;j++){var l=v[j];ga(e,l.scope)&&ga(f,l.sourceId)&&ga(g,l.targetId)&&i(l.scope,l)}return h};var ha=function(a,b){return function(c){for(var d=0,e=a.length;d<e;d++)c(a[d]);return b(a)}},ia=function(a){return function(b){return a[b]}},ja=function(a,b){var c,d,e={length:a.length,each:ha(a,b),get:ia(a)},f=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],g=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(c=0,d=f.length;c<d;c++)e[f[c]]=da(a,f[c],b);for(c=0,d=g.length;c<d;c++)e[g[c]]=ea(a,g[c]);return e},ka=function(a){var b=ja(a,ka);return t.extend(b,{setDetachable:da(a,"setDetachable",ka),setReattach:da(a,"setReattach",ka),setConnector:da(a,"setConnector",ka),detach:function(){for(var b=0,d=a.length;b<d;b++)c.detach(a[b])},isDetachable:ea(a,"isDetachable"),isReattach:ea(a,"isReattach")})},la=function(a){var b=ja(a,la);return t.extend(b,{setEnabled:da(a,"setEnabled",la),setAnchor:da(a,"setAnchor",la),isEnabled:ea(a,"isEnabled"),detachAll:function(){for(var b=0,c=a.length;b<c;b++)a[b].detachAll()},remove:function(){for(var b=0,d=a.length;b<d;b++)c.deleteObject({endpoint:a[b]})}})};this.select=function(a){return a=a||{},a.scope=a.scope||"*",ka(a.connections||c.getConnections(a,!0))},this.selectEndpoints=function(a){a=a||{},a.scope=a.scope||"*";var b=!a.element&&!a.source&&!a.target,c=b?"*":fa(a.element),d=b?"*":fa(a.source),e=b?"*":fa(a.target),f=fa(a.scope,!0),g=[];for(var h in w){var i=ga(c,h,!0),j=ga(d,h,!0),k="*"!=d,l=ga(e,h,!0),m="*"!=e;if(i||j||l)a:for(var n=0,o=w[h].length;n<o;n++){var p=w[h][n];if(ga(f,p.scope,!0)){var q=k&&d.length>0&&!p.isSource,r=m&&e.length>0&&!p.isTarget;if(q||r)continue a;g.push(p)}}}return la(g)},this.getAllConnections=function(){return v},this.getDefaultScope=function(){return G},this.getEndpoint=L,this.getEndpoints=function(a){return w[l(a).id]},this.getDefaultEndpointType=function(){return t.Endpoint},this.getDefaultConnectionType=function(){return t.Connection},this.getId=Y,this.appendElement=J;var ma=!1;this.isHoverSuspended=function(){return ma},this.setHoverSuspended=function(a){ma=a},this.hide=function(a,b){return U(a,"none",b),c},this.idstamp=I,this.connectorsInitialized=!1,this.registerConnectorType=function(a,b){e.push([a,b])};var na=function(a){if(!p&&a){var b=c.getElement(a);b.offsetParent&&c.setContainer(b.offsetParent)}},oa=function(){c.Defaults.Container&&c.setContainer(c.Defaults.Container)},pa=c.manage=function(a,b,d){return y[a]||(y[a]={el:b,endpoints:[],connections:[]},y[a].info=qa({elId:a,timestamp:F}),d||c.fire("manageElement",{id:a,info:y[a].info,el:b})),y[a]},qa=this.updateOffset=function(a){var b,d=a.timestamp,e=a.recalc,f=a.offset,g=a.elId;return E&&!d&&(d=F),!e&&d&&d===A[g]?{o:a.offset||z[g],s:D[g]}:(e||!f&&null==z[g]?(b=y[g]?y[g].el:null,null!=b&&(D[g]=c.getSize(b),z[g]=c.getOffset(b),A[g]=d)):(z[g]=f||z[g],null==D[g]&&(b=y[g].el,null!=b&&(D[g]=c.getSize(b))),A[g]=d),z[g]&&!z[g].right&&(z[g].right=z[g].left+D[g][0],z[g].bottom=z[g].top+D[g][1],z[g].width=D[g][0],z[g].height=D[g][1],z[g].centerx=z[g].left+z[g].width/2,z[g].centery=z[g].top+z[g].height/2),{o:z[g],s:D[g]})};this.init=function(){a=t.getRenderModes();var b=function(a,b,c){t.Connectors[a][b]=function(){c.apply(this,arguments),t.ConnectorRenderers[a].apply(this,arguments)},f.extend(t.Connectors[a][b],[c,t.ConnectorRenderers[a]])};if(!t.connectorsInitialized){for(var d=0;d<e.length;d++)for(var g=0;g<a.length;g++)b(a[g],e[d][1],e[d][0]);t.connectorsInitialized=!0}u||(oa(),c.anchorManager=new t.AnchorManager({jsPlumbInstance:c}),u=!0,c.fire("ready",c))}.bind(this),this.log=s,this.jsPlumbUIComponent=o,this.makeAnchor=function(){var a,b=function(a,b){if(t.Anchors[a])return new t.Anchors[a](b);if(!c.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+a+"'"}};if(0===arguments.length)return null;var d=arguments[0],e=arguments[1],g=(arguments[2],null);if(d.compute&&d.getOrientation)return d;if("string"==typeof d)g=b(arguments[0],{elementId:e,jsPlumbInstance:c});else if(f.isArray(d))if(f.isArray(d[0])||f.isString(d[0]))2==d.length&&f.isObject(d[1])?f.isString(d[0])?(a=t.extend({elementId:e,jsPlumbInstance:c},d[1]),g=b(d[0],a)):(a=t.extend({elementId:e,jsPlumbInstance:c,anchors:d[0]},d[1]),g=new t.DynamicAnchor(a)):g=new t.DynamicAnchor({anchors:d,selector:null,elementId:e,jsPlumbInstance:c});else{var h={x:d[0],y:d[1],orientation:d.length>=4?[d[2],d[3]]:[0,0],offsets:d.length>=6?[d[4],d[5]]:[0,0],elementId:e,jsPlumbInstance:c,cssClass:7==d.length?d[6]:null};g=new t.Anchor(h),g.clone=function(){return new t.Anchor(h)}}return g.id||(g.id="anchor_"+I()),g},this.makeAnchors=function(a,b,d){for(var e=[],g=0,h=a.length;g<h;g++)"string"==typeof a[g]?e.push(t.Anchors[a[g]]({elementId:b,jsPlumbInstance:d})):f.isArray(a[g])&&e.push(c.makeAnchor(a[g],b,d));return e},this.makeDynamicAnchor=function(a,b){return new t.DynamicAnchor({anchors:a,selector:b,elementId:null,jsPlumbInstance:c})},this.targetEndpointDefinitions={};var ra=function(a,b,c){};this.sourceEndpointDefinitions={};var sa=function(a,b,c,d,e){for(var f=a.target||a.srcElement,g=!1,h=d.getSelector(b,c),i=0;i<h.length;i++)if(h[i]==f){g=!0;break}return e?!g:g},ta=function(a,b,d,e,g){var h=new o(b),i=b._jsPlumb.EndpointDropHandler({jsPlumb:c,enabled:function(){return a.def.enabled},isFull:function(){var b=c.select({target:a.id}).length;return a.def.maxConnections>0&&b>=a.def.maxConnections},element:a.el,elementId:a.id,isSource:e,isTarget:g,addClass:function(b){c.addClass(a.el,b)},removeClass:function(b){c.removeClass(a.el,b)},onDrop:function(a){var b=a.endpoints[0];b.anchor.locked=!1},isDropAllowed:function(){return h.isDropAllowed.apply(h,arguments)},isRedrop:function(b){return null!=b.suspendedElement&&null!=b.suspendedEndpoint&&b.suspendedEndpoint.element===a.el},getEndpoint:function(d){var e=a.def.endpoint;if(null==e||null==e._jsPlumb){var f=c.deriveEndpointAndAnchorSpec(d.getType().join(" "),!0),g=f.endpoints?t.extend(b,{endpoint:a.def.def.endpoint||f.endpoints[1]}):b;f.anchors&&(g=t.extend(g,{anchor:a.def.def.anchor||f.anchors[1]})),e=c.addEndpoint(a.el,g),e._mtNew=!0}if(b.uniqueEndpoint&&(a.def.endpoint=e),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0,d.isDetachable()&&e.initDraggable(),null!=e.anchor.positionFinder){var h=c.getUIPosition(arguments,c.getZoom()),i=c.getOffset(a.el),j=c.getSize(a.el),k=e.anchor.positionFinder(h,i,j,e.anchor.constructorParams);e.anchor.x=k[0],e.anchor.y=k[1]}return e},maybeCleanup:function(a){a._mtNew&&0===a.connections.length?c.deleteObject({endpoint:a}):delete a._mtNew}}),j=t.dragEvents.drop;return d.scope=d.scope||b.scope||c.Defaults.Scope,d[j]=f.wrap(d[j],i,!0),g&&(d[t.dragEvents.over]=function(){return!0}),b.allowLoopback===!1&&(d.canDrop=function(b){var c=b.getDragElement()._jsPlumbRelatedElement;return c!=a.el}),c.initDroppable(a.el,d,"internal"),i};this.makeTarget=function(a,b,c){var d=t.extend({_jsPlumb:this},c);t.extend(d,b),ra(d,1,this);for(var e=(!(d.deleteEndpointsOnDetach===!1),d.maxConnections||-1),f=function(a){var b=l(a),c=b.id,f=t.extend({},d.dropOptions||{}),g="default";this.targetEndpointDefinitions[c]=this.targetEndpointDefinitions[c]||{},na(c);var h={def:t.extend({},d),uniqueEndpoint:d.uniqueEndpoint,maxConnections:e,enabled:!0};b.def=h,this.targetEndpointDefinitions[c][g]=h,ta(b,d,f,d.isSource===!0,!0),b.el._katavorioDrop[b.el._katavorioDrop.length-1].targetDef=h}.bind(this),g=a.length&&a.constructor!=String?a:[a],h=0,i=g.length;h<i;h++)f(g[h]);return this},this.unmakeTarget=function(a,b){var c=l(a);return t.destroyDroppable(c.el),b||delete this.targetEndpointDefinitions[c.id],this},this.makeSource=function(a,b,d){var e=t.extend({_jsPlumb:this},d);t.extend(e,b);var g=e.connectionType||"default",h=c.deriveEndpointAndAnchorSpec(g);e.endpoint=e.endpoint||h.endpoints[0],e.anchor=e.anchor||h.anchors[0],ra(e,0,this);for(var i=e.maxConnections||-1,j=e.onMaxConnections,m=function(a){var b=a.id,d=this.getElement(a.el);this.sourceEndpointDefinitions[b]=this.sourceEndpointDefinitions[b]||{},na(b);var h={def:t.extend({},e),uniqueEndpoint:e.uniqueEndpoint,maxConnections:i,enabled:!0};this.sourceEndpointDefinitions[b][g]=h,a.def=h;var l=t.dragEvents.stop,m=t.dragEvents.drag,n=t.extend({},e.dragOptions||{}),o=n.drag,p=n.stop,q=null,r=!1;n.scope=n.scope||e.scope,n[m]=f.wrap(n[m],function(){o&&o.apply(this,arguments),r=!1}),n[l]=f.wrap(n[l],function(){if(p&&p.apply(this,arguments),this.currentlyDragging=!1,null!=q._jsPlumb){var a=e.anchor||this.Defaults.Anchor,d=q.anchor,f=q.connections[0],g=this.makeAnchor(a,b,this),h=q.element;if(null!=g.positionFinder){var i=c.getOffset(h),j=this.getSize(h),k={left:i.left+d.x*j[0],top:i.top+d.y*j[1]},l=g.positionFinder(k,i,j,g.constructorParams);g.x=l[0],g.y=l[1]}q.setAnchor(g,!0),q.repaint(),this.repaint(q.elementId),null!=f&&this.repaint(f.targetId)}}.bind(this));var s=function(h){if(3!==h.which&&2!==h.button){var l=this.sourceEndpointDefinitions[b][g];if(l.enabled){if(b=this.getId(this.getElement(a.el)),e.filter){var m=f.isString(e.filter)?sa(h,a.el,e.filter,this,e.filterExclude):e.filter(h,a.el);if(m===!1)return}var o=this.select({source:b}).length;if(l.maxConnections>=0&&o>=l.maxConnections)return j&&j({element:a.el,maxConnections:i},h),!1;var p=t.getPositionOnElement(h,d,k),s={};t.extend(s,e),s.isTemporarySource=!0,s.anchor=[p[0],p[1],0,0],s.dragOptions=n,l.def.scope&&(s.scope=l.def.scope),q=this.addEndpoint(b,s),r=!0,q._doNotDeleteOnDetach=!1,q._deleteOnDetach=!0,l.uniqueEndpoint&&(l.endpoint?q.finalEndpoint=l.endpoint:(l.endpoint=q,q._deleteOnDetach=!1,q._doNotDeleteOnDetach=!0));var u=function(){c.off(q.canvas,"mouseup",u),c.off(a.el,"mouseup",u),r&&(r=!1,c.deleteEndpoint(q))};c.on(q.canvas,"mouseup",u),c.on(a.el,"mouseup",u);var v={};if(l.def.extract)for(var w in l.def.extract){var x=h.srcElement.getAttribute(w);x&&(v[l.def.extract[w]]=x)}c.trigger(q.canvas,"mousedown",h,v),f.consume(h)}}}.bind(this);this.on(a.el,"mousedown",s),h.trigger=s,e.filter&&(f.isString(e.filter)||f.isFunction(e.filter))&&c.setDragFilter(a.el,e.filter);var u=t.extend({},e.dropOptions||{});ta(a,e,u,!0,e.isTarget===!0)}.bind(this),n=a.length&&a.constructor!=String?a:[a],o=0,p=n.length;o<p;o++)m(l(n[o]));return this},this.unmakeSource=function(a,b,d){var e=l(a),f=this.sourceEndpointDefinitions[e.id];if(f)for(var g in f)if(null==b||b===g){var h=f[g].trigger;h&&c.off(e.el,"mousedown",h),d||delete this.sourceEndpointDefinitions[e.id][g]}return this},this.unmakeEverySource=function(){for(var a in this.sourceEndpointDefinitions)c.unmakeSource(a,null,!0);return this.sourceEndpointDefinitions={},this};var ua=function(a,b,c){b=f.isArray(b)?b:[b];var d=Y(a);c=c||"default";for(var e=0;e<b.length;e++){var g=this[b[e]][d];if(g&&g[c])return g[c].def.scope||this.Defaults.Scope}}.bind(this),va=function(a,b,c,d){c=f.isArray(c)?c:[c];var e=Y(a);d=d||"default";for(var g=0;g<c.length;g++){var h=this[c[g]][e];h&&h[d]&&(h[d].def.scope=b)}}.bind(this);this.getScope=function(a,b){return ua(a,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(a){return ua(a,"sourceEndpointDefinitions")},this.getTargetScope=function(a){return ua(a,"targetEndpointDefinitions")},this.setScope=function(a,b,c){this.setSourceScope(a,b,c),this.setTargetScope(a,b,c)},this.setSourceScope=function(a,b,c){va(a,b,"sourceEndpointDefinitions",c),this.setDragScope(a,b)},this.setTargetScope=function(a,b,c){va(a,b,"targetEndpointDefinitions",c),this.setDropScope(a,b)},this.unmakeEveryTarget=function(){for(var a in this.targetEndpointDefinitions)c.unmakeTarget(a,!0);return this.targetEndpointDefinitions={},this};var wa=function(a,b,c,d,e){var g="source"==a?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(e=e||"default",f.isString(b)&&g[b]&&g[b][e])g[b][e].enabled=d?!g[b][e].enabled:c;else if(b.length)for(var h=0,i=b.length;h<i;h++){var j=l(b[h]);g[j.id]&&g[j.id][e]&&(g[j.id][e].enabled=d?!g[j.id][e].enabled:c)}else{var k=l(b).id;g[k]&&g[k][e]&&(g[k][e].enabled=d?!g[k][e].enabled:c)}return this}.bind(this),xa=function(a,b){return f.isString(a)||!a.length?b.apply(this,[a]):a.length?b.apply(this,[a[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(a,b){return wa("source",a,null,!0,b),this.isSourceEnabled(a,b)},this.setSourceEnabled=function(a,b,c){return wa("source",a,b,null,c)},this.isSource=function(a,b){return b=b||"default",xa(a,function(a){var c=this.sourceEndpointDefinitions[l(a).id];return null!=c&&null!=c[b]}.bind(this))},this.isSourceEnabled=function(a,b){return b=b||"default",xa(a,function(a){var c=this.sourceEndpointDefinitions[l(a).id];return c&&c[b]&&c[b].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(a,b){return wa("target",a,null,!0,b),this.isTargetEnabled(a,b)},this.isTarget=function(a,b){return b=b||"default",xa(a,function(a){var c=this.targetEndpointDefinitions[l(a).id];return null!=c&&null!=c[b]}.bind(this))},this.isTargetEnabled=function(a,b){return b=b||"default",xa(a,function(a){var c=this.targetEndpointDefinitions[l(a).id];return c&&c[b]&&c[b].enabled===!0}.bind(this))},this.setTargetEnabled=function(a,b,c){return wa("target",a,b,null,c)},this.ready=function(a){c.bind("ready",a)};var ya=function(a,b){if("object"==typeof a&&a.length)for(var d=0,e=a.length;d<e;d++)b(a[d]);else b(a);return c};this.repaint=function(a,b,c){return ya(a,function(a){K(a,b,c)})},this.revalidate=function(a,b,d){return ya(a,function(a){var e=d?a:c.getId(a);c.updateOffset({elId:e,recalc:!0,timestamp:b}),c.repaint(a)})},this.repaintEverything=function(){var a,b=g();for(a in w)c.updateOffset({elId:a,recalc:!0,timestamp:b});for(a in w)K(a,null,b);return this},this.removeAllEndpoints=function(a,b,d){d=d||[];var e=function(a){var f,g,h=l(a),i=w[h.id];if(i)for(d.push(h),f=0,g=i.length;f<g;f++)c.deleteEndpoint(i[f],!1);if(delete w[h.id],b&&h.el&&3!=h.el.nodeType&&8!=h.el.nodeType)for(f=0,g=h.el.childNodes.length;f<g;f++)e(h.el.childNodes[f])};return e(a),this};var za=function(a,b){c.removeAllEndpoints(a.id,!0,b);for(var d=function(a){c.getDragManager().elementRemoved(a.id),c.anchorManager.clearFor(a.id),c.anchorManager.removeFloatingConnection(a.id),delete c.floatingConnections[a.id],delete y[a.id],delete z[a.id],a.el&&(c.removeElement(a.el),a.el._jsPlumb=null)},e=1;e<b.length;e++)d(b[e]);d(a)};this.remove=function(a,b){var d=l(a),e=[];return d.text?d.el.parentNode.removeChild(d.el):d.id&&c.batch(function(){za(d,e)},b===!1),c},this.empty=function(a,b){var d=[],e=function(a,b){var c=l(a);if(c.text)c.el.parentNode.removeChild(c.el);else if(c.el){for(;c.el.childNodes.length>0;)e(c.el.childNodes[0]);b||za(c,d)}};return c.batch(function(){e(a,!0)},b===!1),c},this.reset=function(){c.silently(function(){c.deleteEveryEndpoint(),c.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},v.length=0,this.doReset&&this.doReset()}.bind(this))};var Aa=function(a){a.canvas&&a.canvas.parentNode&&a.canvas.parentNode.removeChild(a.canvas),a.cleanup(),a.destroy()};this.clear=function(){c.select().each(Aa),c.selectEndpoints().each(Aa),w={},x={}},this.setDefaultScope=function(a){return G=a,c},this.setDraggable=T,this.deriveEndpointAndAnchorSpec=function(a,b){for(var d=((b?"":"default ")+a).split(/[\s]/),e=null,f=null,g=null,h=null,i=0;i<d.length;i++){var j=c.getType(d[i],"connection");j&&(j.endpoints&&(e=j.endpoints),j.endpoint&&(f=j.endpoint),j.anchors&&(h=j.anchors),j.anchor&&(g=j.anchor))}return{endpoints:e?e:[f,f],anchors:h?h:[g,g]}},this.setId=function(a,b,c){var d;f.isString(a)?d=a:(a=this.getElement(a),d=this.getId(a));var e=this.getConnections({source:d,scope:"*"},!0),g=this.getConnections({target:d,scope:"*"},!0);b=""+b,c?a=this.getElement(b):(a=this.getElement(d),this.setAttribute(a,"id",b)),w[b]=w[d]||[];for(var h=0,i=w[b].length;h<i;h++)w[b][h].setElementId(b),w[b][h].setReferenceElement(a);delete w[d],this.sourceEndpointDefinitions[b]=this.sourceEndpointDefinitions[d],delete this.sourceEndpointDefinitions[d],this.targetEndpointDefinitions[b]=this.targetEndpointDefinitions[d],delete this.targetEndpointDefinitions[d],this.anchorManager.changeId(d,b),this.getDragManager().changeId(d,b),y[b]=y[d],delete y[d];var j=function(c,d,e){for(var f=0,g=c.length;f<g;f++)c[f].endpoints[d].setElementId(b),c[f].endpoints[d].setReferenceElement(a),c[f][e+"Id"]=b,c[f][e]=a};j(e,0,"source"),j(g,1,"target"),this.repaint(b)},this.setDebugLog=function(a){s=a},this.setSuspendDrawing=function(a,b){var c=E;return E=a,F=a?(new Date).getTime():null,b&&this.repaintEverything(),c},this.isSuspendDrawing=function(){return E},this.getSuspendedAt=function(){return F},this.batch=function(a,b){var c=this.isSuspendDrawing();c||this.setSuspendDrawing(!0);try{a()}catch(a){f.log("Function run while suspended failed",a)}c||this.setSuspendDrawing(!1,!b)},this.doWhileSuspended=this.batch,this.getCachedData=X,this.timestamp=g,this.show=function(a,b){return U(a,"block",b),c},this.toggleVisible=W,this.toggleDraggable=V,this.addListener=this.bind};f.extend(s,f.EventGenerator,{setAttribute:function(a,b,c){this.setAttribute(a,b,c)},getAttribute:function(a,b){return this.getAttribute(t.getElement(a),b)},convertToFullOverlaySpec:function(a){return f.isString(a)&&(a=[a,{}]),a[1].id=a[1].id||f.uuid(),a},registerConnectionType:function(a,b){if(this._connectionTypes[a]=t.extend({},b),b.overlays){for(var c={},d=0;d<b.overlays.length;d++){var e=this.convertToFullOverlaySpec(b.overlays[d]);c[e[1].id]=e}this._connectionTypes[a].overlays=c}},registerConnectionTypes:function(a){for(var b in a)this.registerConnectionType(b,a[b])},registerEndpointType:function(a,b){if(this._endpointTypes[a]=t.extend({},b),b.overlays){for(var c={},d=0;d<b.overlays.length;d++){var e=this.convertToFullOverlaySpec(b.overlays[d]);c[e[1].id]=e}this._endpointTypes[a].overlays=c}},registerEndpointTypes:function(a){for(var b in a)this.registerEndpointType(b,a[b])},getType:function(a,b){return"connection"===b?this._connectionTypes[a]:this._endpointTypes[a]},setIdChanged:function(a,b){this.setId(a,b,!0)},setParent:function(a,b){var c=this.getElement(a),d=this.getId(c),e=this.getElement(b),f=this.getId(e);c.parentNode.removeChild(c),e.appendChild(c),this.getDragManager().setParent(c,d,e,f)},extend:function(a,b,c){var d;if(c)for(d=0;d<c.length;d++)a[c[d]]=b[c[d]];else for(d in b)a[d]=b[d];return a},floatingConnections:{},getFloatingAnchorIndex:function(a){return a.endpoints[0].isFloating()?0:a.endpoints[1].isFloating()?1:-1}});var t=new s;c.jsPlumb=t,t.getInstance=function(a){var b=new s(a);return b.init(),b},t.each=function(a,b){if(null!=a)if("string"==typeof a)b(t.getElement(a));else if(null!=a.length)for(var c=0;c<a.length;c++)b(t.getElement(a[c]));else b(a)},"function"==typeof d&&(d("jsplumb",[],function(){return t}),d("jsplumbinstance",[],function(){return t.getInstance()})),"undefined"!=typeof b&&(b.jsPlumb=t)}.call(this),function(){var a=this,b=(a.jsPlumbUtil,!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),function(a,b){if(null==a)return[0,0];var c=g(a),d=f(c,0);return[d[b+"X"],d[b+"Y"]]}),c=function(a){return null==a?[0,0]:b(a,"page")},d=function(a){return b(a,"screen")},e=function(a){return b(a,"client")},f=function(a,b){return a.item?a.item(b):a[b]},g=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},h=function(a){var b={},c=[],d={},e={},f={};this.register=function(g){var h=a.getId(g),i=a.getOffset(g);b[h]||(b[h]=g,c.push(g),d[h]={});var j=function(b){if(b)for(var c=0;c<b.childNodes.length;c++)if(3!=b.childNodes[c].nodeType&&8!=b.childNodes[c].nodeType){var g=jsPlumb.getElement(b.childNodes[c]),k=a.getId(b.childNodes[c],null,!0);if(k&&e[k]&&e[k]>0){var l=a.getOffset(g);d[h][k]={id:k,offset:{left:l.left-i.left,top:l.top-i.top}},f[k]=h}j(b.childNodes[c])}};j(g)},this.updateOffsets=function(b){if(null!=b){var c=jsPlumb.getElement(b),e=a.getId(c),g=d[e],h=a.getOffset(c);if(g)for(var i in g)if(g.hasOwnProperty(i)){var j=jsPlumb.getElement(i),k=a.getOffset(j);d[e][i]={id:i,offset:{left:k.left-h.left,top:k.top-h.top}},f[i]=e}}},this.endpointAdded=function(c,g){g=g||a.getId(c);var h=document.body,i=c.parentNode;for(e[g]=e[g]?e[g]+1:1;null!=i&&i!=h;){var j=a.getId(i,null,!0);if(j&&b[j]){var k=a.getOffset(i);if(null==d[j][g]){var l=a.getOffset(c);d[j][g]={id:g,offset:{left:l.left-k.left,top:l.top-k.top}},f[g]=j}break}i=i.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&&(e[a.elementId]--,e[a.elementId]<=0))for(var b in d)d.hasOwnProperty(b)&&d[b]&&(delete d[b][a.elementId],delete f[a.elementId])},this.changeId=function(a,b){d[b]=d[a],d[a]={},f[b]=f[a],f[a]=null},this.getElementsForDraggable=function(a){return d[a]},this.elementRemoved=function(a){var b=f[a];b&&(delete d[b][a],delete f[a])},this.reset=function(){b={},c=[],d={},e={}},this.dragEnded=function(b){var c=a.getId(b),d=f[c];d&&this.updateOffsets(d)},this.setParent=function(b,c,e,g){var h=f[c];if(h){d[g]||(d[g]={}),d[g][c]=d[h][c],delete d[h][c];var i=a.getOffset(e),j=a.getOffset(b);d[g][c].offset={left:j.left-i.left,top:j.top-i.top},f[c]=g}},this.getDragAncestor=function(b){var c=jsPlumb.getElement(b),d=a.getId(c),e=f[d];return e?jsPlumb.getElement(e):null}},i=function(a){return null==a?null:a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},j=function(a,b){b=i(b),"undefined"!=typeof a.className.baseVal?a.className.baseVal=b:a.className=b},k=function(a){return"undefined"==typeof a.className.baseVal?a.className:a.className.baseVal},l=function(a,b,c){b=null==b?[]:jsPlumbUtil.isArray(b)?b:b.split(/\s+/),c=null==c?[]:jsPlumbUtil.isArray(c)?c:c.split(/\s+/);var d=k(a),e=d.split(/\s+/),f=function(a,b){for(var c=0;c<b.length;c++)if(a)e.indexOf(b[c])==-1&&e.push(b[c]);else{var d=e.indexOf(b[c]);
d!=-1&&e.splice(d,1)}};f(!0,b),f(!1,c),j(a,e.join(" "))};jsPlumb.extend(jsPlumbInstance.prototype,{headless:!1,pageLocation:c,screenLocation:d,clientLocation:e,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new h(this)),this.dragManager},recalculateOffsets:function(a){this.getDragManager().updateOffsets(a)},createElement:function(a,b,c,d){return this.createElementNS(null,a,b,c,d)},createElementNS:function(a,b,c,d,e){var f,g=null==a?document.createElement(b):document.createElementNS(a,b);c=c||{};for(f in c)g.style[f]=c[f];d&&(g.className=d),e=e||{};for(f in e)g.setAttribute(f,""+e[f]);return g},getAttribute:function(a,b){return null!=a.getAttribute?a.getAttribute(b):null},setAttribute:function(a,b,c){null!=a.setAttribute&&a.setAttribute(b,c)},setAttributes:function(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setAttribute(c,b[c])},appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return["svg"]},getClass:k,addClass:function(a,b){jsPlumb.each(a,function(a){l(a,b)})},hasClass:function(a,b){return a=jsPlumb.getElement(a),a.classList?a.classList.contains(b):k(a).indexOf(b)!=-1},removeClass:function(a,b){jsPlumb.each(a,function(a){l(a,null,b)})},updateClasses:function(a,b,c){jsPlumb.each(a,function(a){l(a,b,c)})},setClass:function(a,b){jsPlumb.each(a,function(a){j(a,b)})},setPosition:function(a,b){a.style.left=b.left+"px",a.style.top=b.top+"px"},getPosition:function(a){var b=function(b){var c=a.style[b];return c?c.substring(0,c.length-2):0};return{left:b("left"),top:b("top")}},getStyle:function(a,b){return"undefined"!=typeof window.getComputedStyle?getComputedStyle(a,null).getPropertyValue(b):a.currentStyle[b]},getSelector:function(a,b){var c=null;return c=1==arguments.length?null!=a.nodeType?a:document.querySelectorAll(a):a.querySelectorAll(b)},getOffset:function(a,b,c){a=jsPlumb.getElement(a),c=c||this.getContainer();for(var d={left:a.offsetLeft,top:a.offsetTop},e=b||null!=c&&a!=c&&a.offsetParent!=c?a.offsetParent:null,f=function(a){null!=a&&a!==document.body&&(a.scrollTop>0||a.scrollLeft>0)&&(d.left-=a.scrollLeft,d.top-=a.scrollTop)}.bind(this);null!=e;)d.left+=e.offsetLeft,d.top+=e.offsetTop,f(e),e=b?e.offsetParent:e.offsetParent==c?null:e.offsetParent;if(null!=c&&!b&&(c.scrollTop>0||c.scrollLeft>0)){var g=null!=a.offsetParent?this.getStyle(a.offsetParent,"position"):"static",h=this.getStyle(a,"position");"absolute"!==h&&"fixed"!==h&&"absolute"!==g&&"fixed"!=g&&(d.left-=c.scrollLeft,d.top-=c.scrollTop)}return d},getPositionOnElement:function(a,b,c){var d="undefined"!=typeof b.getBoundingClientRect?b.getBoundingClientRect():{left:0,top:0,width:0,height:0},e=document.body,f=document.documentElement,g=window.pageYOffset||f.scrollTop||e.scrollTop,h=window.pageXOffset||f.scrollLeft||e.scrollLeft,i=f.clientTop||e.clientTop||0,j=f.clientLeft||e.clientLeft||0,k=0,l=0,m=d.top+g-i+k*c,n=d.left+h-j+l*c,o=jsPlumb.pageLocation(a),p=d.width||b.offsetWidth*c,q=d.height||b.offsetHeight*c,r=(o[0]-n)/p,s=(o[1]-m)/q;return[r,s]},getAbsolutePosition:function(a){var b=function(b){var c=a.style[b];if(c)return parseFloat(c.substring(0,c.length-2))};return[b("left"),b("top")]},setAbsolutePosition:function(a,b,c,d){c?this.animate(a,{left:"+="+(b[0]-c[0]),top:"+="+(b[1]-c[1])},d):(a.style.left=b[0]+"px",a.style.top=b[1]+"px")},getSize:function(a){return[a.offsetWidth,a.offsetHeight]},getWidth:function(a){return a.offsetWidth},getHeight:function(a){return a.offsetHeight}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d="__label",e=function(a,c){var e={cssClass:c.cssClass,labelStyle:a.labelStyle,id:d,component:a,_jsPlumb:a._jsPlumb.instance},f=jsPlumb.extend(e,c);return new(b.Overlays[a._jsPlumb.instance.getRenderMode()].Label)(f)},f=function(a,d){var e=null;if(c.isArray(d)){var f=d[0],g=b.extend({component:a,_jsPlumb:a._jsPlumb.instance},d[1]);3==d.length&&b.extend(g,d[2]),e=new(b.Overlays[a._jsPlumb.instance.getRenderMode()][f])(g)}else e=d.constructor==String?new(b.Overlays[a._jsPlumb.instance.getRenderMode()][d])({component:a,_jsPlumb:a._jsPlumb.instance}):d;return e.id=e.id||c.uuid(),a.cacheTypeItem("overlay",e,e.id),a._jsPlumb.overlays[e.id]=e,e};b.OverlayCapableJsPlumbUIComponent=function(a){jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},a.label&&(this.getDefaultType().overlays[d]=["Label",{label:a.label,location:a.labelLocation||this.defaultLabelLocation||.5,labelStyle:a.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:d}]),this.setListenerComponent=function(a){if(this._jsPlumb)for(var b in this._jsPlumb.overlays)this._jsPlumb.overlays[b].setListenerComponent(a)}},b.OverlayCapableJsPlumbUIComponent.applyType=function(a,b){if(b.overlays){var c,d={};for(c in b.overlays){var e=a._jsPlumb.overlays[b.overlays[c][1].id];if(e)e.updateFrom(b.overlays[c][1]),d[b.overlays[c][1].id]=!0;else{var f=a.getCachedTypeItem("overlay",b.overlays[c][1].id);null!=f?(f.reattach(a._jsPlumb.instance),f.updateFrom(b.overlays[c][1]),a._jsPlumb.overlays[f.id]=f):f=a.addOverlay(b.overlays[c],!0),d[f.id]=!0}}for(c in a._jsPlumb.overlays)null==d[a._jsPlumb.overlays[c].id]&&a.removeOverlay(a._jsPlumb.overlays[c].id,!0)}},c.extend(b.OverlayCapableJsPlumbUIComponent,a.jsPlumbUIComponent,{setHover:function(a,b){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var c in this._jsPlumb.overlays)this._jsPlumb.overlays[c][a?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(a,b){var c=f(this,a);return b||this.repaint(),c},getOverlay:function(a){return this._jsPlumb.overlays[a]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(a){var b=this.getOverlay(a);b&&b.hide()},hideOverlays:function(){for(var a in this._jsPlumb.overlays)this._jsPlumb.overlays[a].hide()},showOverlay:function(a){var b=this.getOverlay(a);b&&b.show()},showOverlays:function(){for(var a in this._jsPlumb.overlays)this._jsPlumb.overlays[a].show()},removeAllOverlays:function(a){for(var b in this._jsPlumb.overlays)this._jsPlumb.overlays[b].cleanup&&this._jsPlumb.overlays[b].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,a||this.repaint()},removeOverlay:function(a,b){var c=this._jsPlumb.overlays[a];c&&(!b&&c.cleanup&&c.cleanup(),delete this._jsPlumb.overlays[a],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[a])},removeOverlays:function(){for(var a=0,b=arguments.length;a<b;a++)this.removeOverlay(arguments[a])},moveParent:function(a){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),a.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),a.appendChild(this.canvas);for(var b in this._jsPlumb.overlays)if(this._jsPlumb.overlays[b].isAppendedAtTopLevel){var c=this._jsPlumb.overlays[b].getElement();c.parentNode.removeChild(c),a.appendChild(c)}}},getLabel:function(){var a=this.getOverlay(d);return null!=a?a.getLabel():null},getLabelOverlay:function(){return this.getOverlay(d)},setLabel:function(a){var b=this.getOverlay(d);if(b)a.constructor==String||a.constructor==Function?b.setLabel(a):(a.label&&b.setLabel(a.label),a.location&&b.setLocation(a.location));else{var c=a.constructor==String||a.constructor==Function?{label:a}:a;b=e(this,c),this._jsPlumb.overlays[d]=b}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(a){for(var b in this._jsPlumb.overlays)this._jsPlumb.overlays[b].cleanup(a),this._jsPlumb.overlays[b].destroy(a);a&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(a){this[a?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(a,b){this._jsPlumb.overlayPositions[a.id]=b},getAbsoluteOverlayPosition:function(a){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[a.id]:null},_clazzManip:function(a,b,c){if(!c)for(var d in this._jsPlumb.overlays)this._jsPlumb.overlays[d][a+"Class"](b)},addClass:function(a,b){this._clazzManip("add",a,b)},removeClass:function(a,b){this._clazzManip("remove",a,b)}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=function(a,b,c){var d=!1;return{drag:function(){if(d)return d=!1,!0;if(b.element){var e=c.getUIPosition(arguments,c.getZoom());jsPlumb.setPosition(b.element,e),c.repaint(b.element,e),a.paint({anchorPoint:a.anchor.getCurrentLocation({element:a.element})})}},stopDrag:function(){d=!0}}},e=function(a,b,c,d){var e=jsPlumb.createElement("div",{position:"absolute"});b.appendElement(e);var f=b.getId(e);jsPlumb.setPosition(e,c),e.style.width=d[0]+"px",e.style.height=d[1]+"px",b.manage(f,e,!0),a.id=f,a.element=e},f=function(a,c,d,e,f,g,h,i){var j=new b.FloatingAnchor({reference:c,referenceCanvas:e,jsPlumbInstance:g});return h({paintStyle:a,endpoint:d,anchor:j,source:f,scope:i})},g=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],h=function(a,b){var c=0;if(null!=b)for(var d=0;d<a.connections.length;d++)if(a.connections[d].sourceId==b||a.connections[d].targetId==b){c=d;break}return a.connections[c]};b.Endpoint=function(a){var i=a._jsPlumb,j=a.newConnection,k=a.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],b.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:a.connectionType,maxConnections:null==a.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:a.maxConnections,paintStyle:a.endpointStyle||a.paintStyle||a.style||this._jsPlumb.instance.Defaults.EndpointStyle||b.Defaults.EndpointStyle,hoverPaintStyle:a.endpointHoverStyle||a.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||b.Defaults.EndpointHoverStyle,connectorStyle:a.connectorStyle,connectorHoverStyle:a.connectorHoverStyle,connectorClass:a.connectorClass,connectorHoverClass:a.connectorHoverClass,connectorOverlays:a.connectorOverlays,connector:a.connector,connectorTooltip:a.connectorTooltip}),this._jsPlumb.enabled=!(a.enabled===!1),this._jsPlumb.visible=!0,this.element=b.getElement(a.source),this._jsPlumb.uuid=a.uuid,this._jsPlumb.floatingEndpoint=null;var l=null;this._jsPlumb.uuid&&(a.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=a.elementId,this.dragProxy=a.dragProxy,this._jsPlumb.connectionCost=a.connectionCost,this._jsPlumb.connectionsDirected=a.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var m=function(){var a=i.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var b=i.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(a),this.addClass(b),jsPlumb.updateClasses(this.element,b,a)}.bind(this);this.prepareAnchor=function(a){var b=this._jsPlumb.instance.makeAnchor(a,this.elementId,i);return b.bind("anchorChanged",function(a){this.fire("anchorChanged",{endpoint:this,anchor:a}),m()}.bind(this)),b},this.setPreparedAnchor=function(a,b){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=a,m(),b||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(a,b){var c=this.prepareAnchor(a);return this.setPreparedAnchor(c,b),this};var n=function(a){if(this.connections.length>0)for(var b=0;b<this.connections.length;b++)this.connections[b].setHover(a,!1);else this.setHover(a)}.bind(this);this.bind("mouseover",function(){n(!0)}),this.bind("mouseout",function(){n(!1)}),a._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(d,e){var f,g=function(a,c){var d=i.getRenderMode();if(b.Endpoints[d][a])return new b.Endpoints[d][a](c);if(!i.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+a+"'"}},h={_jsPlumb:this._jsPlumb.instance,cssClass:a.cssClass,container:a.container,tooltip:a.tooltip,connectorTooltip:a.connectorTooltip,endpoint:this};return c.isString(d)?f=g(d,h):c.isArray(d)?(h=c.merge(d[1],h),f=g(d[0],h)):f=d.clone(),f.clone=function(){return c.isString(d)?g(d,h):c.isArray(d)?(h=c.merge(d[1],h),g(d[0],h)):void 0}.bind(this),f.typeId=e,f},this.setEndpoint=function(a,b){var c=this.prepareEndpoint(a);this.setPreparedEndpoint(c,!0)},this.setPreparedEndpoint=function(a,b){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=a,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},b.extend(this,a,g),this.isSource=a.isSource||!1,this.isTemporarySource=a.isTemporarySource||!1,this.isTarget=a.isTarget||!1,this.connections=a.connections||[],this.connectorPointerEvents=a["connector-pointer-events"],this.scope=a.scope||i.getDefaultScope(),this.timestamp=null,this.reattachConnections=a.reattach||i.Defaults.ReattachConnections,this.connectionsDetachable=i.Defaults.ConnectionsDetachable,a.connectionsDetachable!==!1&&a.detachable!==!1||(this.connectionsDetachable=!1),this.dragAllowedWhenFull=a.dragAllowedWhenFull!==!1,a.onMaxConnections&&this.bind("maxConnections",a.onMaxConnections),this.addConnection=function(a){this.connections.push(a),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)},this.detachFromConnection=function(a,b,c){b=null==b?this.connections.indexOf(a):b,b>=0&&(this.connections.splice(b,1),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)),!c&&this._deleteOnDetach&&0===this.connections.length&&i.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!1})},this.detach=function(a,b,c,d,e,f,g){var h=null==g?this.connections.indexOf(a):g,j=!1;return d=d!==!1,h>=0&&(c||a._forceDetach||a.isDetachable()&&a.isDetachAllowed(a)&&this.isDetachAllowed(a)&&i.checkCondition("beforeDetach",a,f))&&(i.deleteObject({connection:a,fireEvent:!b&&d,originalEvent:e,deleteAttachedObjects:!1}),j=!0),j},this.detachAll=function(a,b){for(var c=[];this.connections.length>0;){var d=this.detach(this.connections[0],!1,b===!0,a!==!1,null,this,0);d||(c.push(this.connections[0]),this.connections.splice(0,1))}return this.connections=c,this},this.detachFrom=function(a,b,c){for(var d=[],e=0;e<this.connections.length;e++)this.connections[e].endpoints[1]!=a&&this.connections[e].endpoints[0]!=a||d.push(this.connections[e]);for(var f=0;f<d.length;f++)this.detach(d[f],!1,!0,b,c);return this},this.getElement=function(){return this.element},this.setElement=function(b){var d=this._jsPlumb.instance.getId(b),e=this.elementId;return c.removeWithFunction(a.endpointsByElement[this.elementId],function(a){return a.id==this.id}.bind(this)),this.element=jsPlumb.getElement(b),this.elementId=i.getId(this.element),i.anchorManager.rehomeEndpoint(this,e,this.element),i.dragManager.endpointAdded(this.element),c.addToList(a.endpointsByElement,d,this),this},this.makeInPlaceCopy=function(){var b=this.anchor.getCurrentLocation({element:this}),c=this.anchor.getOrientation(this),d=this.anchor.getCssClass(),e={bind:function(){},compute:function(){return[b[0],b[1]]},getCurrentLocation:function(){return[b[0],b[1]]},getOrientation:function(){return c},getCssClass:function(){return d}};return k({dropOptions:a.dropOptions,anchor:e,source:this.element,paintStyle:this.getPaintStyle(),endpoint:a.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){var a=this.connections[0];return a?a:this.connections.length<this._jsPlumb.maxConnections||this._jsPlumb.maxConnections==-1?null:a},this.setStyle=this.setPaintStyle,this.paint=function(a){a=a||{};var b=a.timestamp,c=!(a.recalc===!1);if(!b||this.timestamp!==b){var d=i.updateOffset({elId:this.elementId,timestamp:b}),e=a.offset?a.offset.o:d.o;if(null!=e){var f=a.anchorPoint,g=a.connectorPaintStyle;if(null==f){var j=a.dimensions||d.s,k={xy:[e.left,e.top],wh:j,element:this,timestamp:b};if(c&&this.anchor.isDynamic&&this.connections.length>0){var l=h(this,a.elementWithPrecedence),m=l.endpoints[0]==this?1:0,n=0===m?l.sourceId:l.targetId,o=i.getCachedData(n),p=o.o,q=o.s;k.txy=[p.left,p.top],k.twh=q,k.tElement=l.endpoints[m]}f=this.anchor.compute(k)}this.endpoint.compute(f,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,g||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=b;for(var r in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(r)){var s=this._jsPlumb.overlays[r];s.isVisible()&&(this._jsPlumb.overlayPlacements[r]=s.draw(this.endpoint,this._jsPlumb.paintStyleInUse),s.paint(this._jsPlumb.overlayPlacements[r]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var o=!1;this.initDraggable=function(){if(!o&&b.isDragSupported(this.element)){var g,h={id:null,element:null},m=null,n=!1,p=null,q=d(this,h,i),r=a.dragOptions||{},s={},t=b.dragEvents.start,u=b.dragEvents.stop,v=b.dragEvents.drag,w=b.dragEvents.beforeStart,x=function(a){g=a.e.payload||{}},y=function(b){m=this.connectorSelector();var d=!0;this.isEnabled()||(d=!1),null!=m||this.isSource||this.isTemporarySource||(d=!1),!this.isSource||!this.isFull()||null!=m&&this.dragAllowedWhenFull||(d=!1),null==m||m.isDetachable(this)||(d=!1);var l=i.checkCondition(null==m?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:m});if(l===!1?d=!1:"object"==typeof l?jsPlumb.extend(l,g||{}):l=g||{},d===!1)return i.stopDrag&&i.stopDrag(this.canvas),q.stopDrag(),!1;for(var o=0;o<this.connections.length;o++)this.connections[o].setHover(!1);this.addClass("endpointDrag"),i.setConnectionBeingDragged(!0),m&&!this.isFull()&&this.isSource&&(m=null),i.updateOffset({elId:this.elementId});var r=this._jsPlumb.instance.getOffset(this.canvas),s=this.canvas,t=this._jsPlumb.instance.getSize(this.canvas);e(h,i,r,t),i.setAttributes(this.canvas,{dragId:h.id,elId:this.elementId});var u=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var v=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);v.endpoints[1]&&(u=v.endpoints[1])}var w=this._jsPlumb.instance.makeAnchor("Center");w.isFloating=!0,this._jsPlumb.floatingEndpoint=f(this.getPaintStyle(),w,u,this.canvas,h.element,i,k,this.scope);var x=this._jsPlumb.floatingEndpoint.anchor;if(null==m)this.setHover(!1,!1),m=j({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:h.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:a.connectorStyle,hoverPaintStyle:a.connectorHoverStyle,connector:a.connector,overlays:a.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:a.scope,data:l}),m.pending=!0,m.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.anchor=x,i.fire("connectionDrag",m),i.anchorManager.newConnection(m);else{n=!0,m.setHover(!1);var y=m.endpoints[0].id==this.id?0:1;this.detachFromConnection(m,null,!0);var z=i.getDragScope(s);i.setAttribute(this.canvas,"originalScope",z),i.fire("connectionDrag",m),0===y?(p=[m.source,m.sourceId,s,z],m.source=h.element,m.sourceId=h.id,i.anchorManager.sourceChanged(m.endpoints[y].elementId,m.sourceId,m)):(p=[m.target,m.targetId,s,z],m.target=h.element,m.targetId=h.id,i.anchorManager.updateOtherEndpoint(m.sourceId,m.endpoints[y].elementId,m.targetId,m)),m.suspendedEndpoint=m.endpoints[y],m.suspendedElement=m.endpoints[y].getElement(),m.suspendedElementId=m.endpoints[y].elementId,m.suspendedElementType=0===y?"source":"target",m.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=m.suspendedEndpoint,m.endpoints[y]=this._jsPlumb.floatingEndpoint,m.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass)}i.floatingConnections[h.id]=m,c.addToList(a.endpointsByElement,h.id,this._jsPlumb.floatingEndpoint),i.currentlyDragging=!0}.bind(this),z=function(){if(i.setConnectionBeingDragged(!1),m&&null!=m.endpoints){var a=i.getDropEvent(arguments),b=i.getFloatingAnchorIndex(m);if(m.endpoints[0===b?1:0].anchor.locked=!1,m.removeClass(i.draggingClass),this._jsPlumb&&(m.deleteConnectionNow||m.endpoints[b]==this._jsPlumb.floatingEndpoint)&&n&&m.suspendedEndpoint){0===b?(m.floatingElement=m.source,m.floatingId=m.sourceId,m.floatingEndpoint=m.endpoints[0],m.floatingIndex=0,m.source=p[0],m.sourceId=p[1]):(m.floatingElement=m.target,m.floatingId=m.targetId,m.floatingEndpoint=m.endpoints[1],m.floatingIndex=1,m.target=p[0],m.targetId=p[1]);var c=this._jsPlumb.floatingEndpoint;i.setDragScope(p[2],p[3]),m.endpoints[b]=m.suspendedEndpoint,m.isReattach()||m._forceReattach||m._forceDetach||!m.endpoints[0===b?1:0].detach(m,!1,!1,!0,a,!0)?(m.setHover(!1),m._forceDetach=null,m._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(m),m.suspendedEndpoint.addConnection(m),1==b?i.anchorManager.updateOtherEndpoint(m.sourceId,m.floatingId,m.targetId,m):i.anchorManager.sourceChanged(m.floatingId,m.sourceId,m),i.repaint(p[1])):i.deleteObject({endpoint:c})}this.deleteAfterDragStop?i.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),i.fire("connectionDragStop",m,a),m.pending&&i.fire("connectionAborted",m,a),i.currentlyDragging=!1,m=null}h&&h.element&&i.remove(h.element,!1,!1),l&&i.deleteObject({endpoint:l}),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);r=b.extend(s,r),r.scope=this.scope||r.scope,r[w]=c.wrap(r[w],x,!1),r[t]=c.wrap(r[t],y,!1),r[v]=c.wrap(r[v],q.drag),r[u]=c.wrap(r[u],z),r.multipleDrop=!1,r.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0}.bind(this),i.initDraggable(this.canvas,r,"internal"),this.canvas._jsPlumbRelatedElement=this.element,o=!0}};var p=a.endpoint||this._jsPlumb.instance.Defaults.Endpoint||b.Defaults.Endpoint;this.setEndpoint(p,!0);var q=a.anchor?a.anchor:a.anchors?a.anchors:i.Defaults.Anchor||"Top";this.setAnchor(q,!0);var r=["default",a.type||""].join(" ");this.addType(r,a.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var s=function(d,e,f,g){if(b.isDropSupported(this.element)){var h=a.dropOptions||i.Defaults.DropOptions||b.Defaults.DropOptions;h=b.extend({},h),h.scope=h.scope||this.scope;var j=b.dragEvents.drop,k=b.dragEvents.over,l=b.dragEvents.out,m=this,n=i.EndpointDropHandler({getEndpoint:function(){return m},jsPlumb:i,enabled:function(){return null==f||f.isEnabled()},isFull:function(){return f.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(a){m.addClass(a)},removeClass:function(a){m.removeClass(a)},isDropAllowed:function(){return m.isDropAllowed.apply(m,arguments)},reference:g,isRedrop:function(a,b){return a.suspendedEndpoint&&b.reference&&a.suspendedEndpoint.id===b.reference.id}});h[j]=c.wrap(h[j],n,!0),h[k]=c.wrap(h[k],function(){var a=b.getDragObject(arguments),c=i.getAttribute(b.getElement(a),"dragId"),d=i.floatingConnections[c];if(null!=d){var e=i.getFloatingAnchorIndex(d),f=this.isTarget&&0!==e||d.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==d.suspendedEndpoint.id;if(f){var g=i.checkCondition("checkDropAllowed",{sourceEndpoint:d.endpoints[e],targetEndpoint:this,connection:d});this[(g?"add":"remove")+"Class"](i.endpointDropAllowedClass),this[(g?"remove":"add")+"Class"](i.endpointDropForbiddenClass),d.endpoints[e].anchor.over(this.anchor,this)}}}.bind(this)),h[l]=c.wrap(h[l],function(){var a=b.getDragObject(arguments),c=null==a?null:i.getAttribute(b.getElement(a),"dragId"),d=c?i.floatingConnections[c]:null;if(null!=d){var e=i.getFloatingAnchorIndex(d),f=this.isTarget&&0!==e||d.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==d.suspendedEndpoint.id;f&&(this.removeClass(i.endpointDropAllowedClass),this.removeClass(i.endpointDropForbiddenClass),d.endpoints[e].anchor.out())}}.bind(this)),i.initDroppable(d,h,"internal",e)}}.bind(this);return this.anchor.isFloating||s(this.canvas,!(a._transient||this.anchor.isFloating),this,a.reference),this},c.extend(b.Endpoint,b.OverlayCapableJsPlumbUIComponent,{setVisible:function(a,b,c){if(this._jsPlumb.visible=a,this.canvas&&(this.canvas.style.display=a?"block":"none"),this[a?"showOverlays":"hideOverlays"](),!b)for(var d=0;d<this.connections.length;d++)if(this.connections[d].setVisible(a),!c){var e=this===this.connections[d].endpoints[0]?1:0;1==this.connections[d].endpoints[e].connections.length&&this.connections[d].endpoints[e].setVisible(a,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(a,c){this.setPaintStyle(a.endpointStyle||a.paintStyle,c),this.setHoverPaintStyle(a.endpointHoverStyle||a.hoverPaintStyle,c),null!=a.maxConnections&&(this._jsPlumb.maxConnections=a.maxConnections),a.scope&&(this.scope=a.scope),b.extend(this,a,g),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass),b.OverlayCapableJsPlumbUIComponent.applyType(this,a)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){var a=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");jsPlumb.removeClass(this.element,a),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(a){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(a)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(a){var b=!1;if(a)for(var c=0;c<this.connections.length;c++)if(this.connections[c].endpoints[1]==a||this.connections[c].endpoints[0]==a){b=!0;break}return b},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=b.getElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}}),a.jsPlumbInstance.prototype.EndpointDropHandler=function(a){return function(b){var c=a.jsPlumb;a.removeClass(c.endpointDropAllowedClass),a.removeClass(c.endpointDropForbiddenClass);var d=c.getDropEvent(arguments),e=c.getDragObject(arguments),f=c.getAttribute(e,"dragId"),g=(c.getAttribute(e,"elId"),c.getAttribute(e,"originalScope")),h=c.floatingConnections[f];if(null!=h){var i=null!=h.suspendedEndpoint;if(!i||null!=h.suspendedEndpoint._jsPlumb){var j=a.getEndpoint(h);if(null!=j){if(a.isRedrop(h,a))return h._forceReattach=!0,h.setHover(!1),void(a.maybeCleanup&&a.maybeCleanup(j));var k=c.getFloatingAnchorIndex(h);if(0===k&&!a.isSource||1===k&&!a.isTarget)return void(a.maybeCleanup&&a.maybeCleanup(j));a.onDrop&&a.onDrop(h),g&&c.setDragScope(e,g);var l=a.isFull(b);if(l&&j.fire("maxConnections",{endpoint:this,connection:h,maxConnections:j._jsPlumb.maxConnections},d),!l&&a.enabled()){var m=!0;0===k?(h.floatingElement=h.source,h.floatingId=h.sourceId,h.floatingEndpoint=h.endpoints[0],h.floatingIndex=0,h.source=a.element,h.sourceId=a.elementId):(h.floatingElement=h.target,h.floatingId=h.targetId,h.floatingEndpoint=h.endpoints[1],h.floatingIndex=1,h.target=a.element,h.targetId=a.elementId),i&&h.suspendedEndpoint.id!=j.id&&(h.isDetachAllowed(h)&&h.endpoints[k].isDetachAllowed(h)&&h.suspendedEndpoint.isDetachAllowed(h)&&c.checkCondition("beforeDetach",h)||(m=!1));var n=function(a){h.endpoints[k].detachFromConnection(h),h.suspendedEndpoint&&h.suspendedEndpoint.detachFromConnection(h),h.endpoints[k]=j,j.addConnection(h);var b=j.getParameters();for(var e in b)h.setParameter(e,b[e]);if(i){var f=h.suspendedEndpoint.elementId;c.fireMoveEvent({index:k,originalSourceId:0===k?f:h.sourceId,newSourceId:0===k?j.elementId:h.sourceId,originalTargetId:1==k?f:h.targetId,newTargetId:1==k?j.elementId:h.targetId,originalSourceEndpoint:0===k?h.suspendedEndpoint:h.endpoints[0],newSourceEndpoint:0===k?j:h.endpoints[0],originalTargetEndpoint:1==k?h.suspendedEndpoint:h.endpoints[1],newTargetEndpoint:1==k?j:h.endpoints[1],connection:h},d)}else b.draggable&&c.initDraggable(this.element,dragOptions,"internal",c);if(1==k?c.anchorManager.updateOtherEndpoint(h.sourceId,h.floatingId,h.targetId,h):c.anchorManager.sourceChanged(h.floatingId,h.sourceId,h),h.endpoints[0].finalEndpoint){var g=h.endpoints[0];g.detachFromConnection(h),h.endpoints[0]=h.endpoints[0].finalEndpoint,h.endpoints[0].addConnection(h)}jsPlumbUtil.isObject(a)&&h.mergeData(a),c.finaliseConnection(h,null,d,!1),h.setHover(!1)}.bind(this),o=function(){h.suspendedEndpoint&&(h.endpoints[k]=h.suspendedEndpoint,h.setHover(!1),h._forceDetach=!0,0===k?(h.source=h.suspendedEndpoint.element,h.sourceId=h.suspendedEndpoint.elementId):(h.target=h.suspendedEndpoint.element,h.targetId=h.suspendedEndpoint.elementId),h.suspendedEndpoint.addConnection(h),1==k?c.anchorManager.updateOtherEndpoint(h.sourceId,h.floatingId,h.targetId,h):c.anchorManager.sourceChanged(h.floatingId,h.sourceId,h),c.repaint(h.sourceId),h._forceDetach=!1)};if(m=m&&a.isDropAllowed(h.sourceId,h.targetId,h.scope,h,j))return n(m),!0;o()}a.maybeCleanup&&a.maybeCleanup(j),c.currentlyDragging=!1}}}}}}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=function(a,c,d,e,f){if(!a.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[c][d])throw{msg:"jsPlumb: unknown connector type '"+d+"'"};return new b.Connectors[c][d](e,f)},e=function(a,b,c){return a?c.makeAnchor(a,b,c):null},f=function(a,b,d,e){null!=b&&(b._jsPlumbConnections=b._jsPlumbConnections||{},e?delete b._jsPlumbConnections[a.id]:b._jsPlumbConnections[a.id]=!0,c.isEmpty(b._jsPlumbConnections)?d.removeClass(b,d.connectedClass):d.addClass(b,d.connectedClass))};b.Connection=function(a){var d=a.newEndpoint;this.id=a.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=a.previousConnection,this.source=b.getElement(a.source),this.target=b.getElement(a.target),a.sourceEndpoint&&(this.source=a.sourceEndpoint.getElement()),a.targetEndpoint&&(this.target=a.targetEndpoint.getElement()),b.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[];var e=this._jsPlumb.instance;e.manage(this.sourceId,this.source),e.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.editable=a.editable===!0,this._jsPlumb.params={cssClass:a.cssClass,container:a.container,"pointer-events":a["pointer-events"],editorParams:a.editorParams,overlays:a.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.editableRequested=a.editable!==!1,this.setEditable=function(a){return!!this.connector&&this.connector.setEditable(a)},this.isEditable=function(){return!!this.connector&&this.connector.isEditable()},this.isEditing=function(){return!!this.connector&&this.connector.isEditing();
},this.makeEndpoint=function(b,c,f,g){return f=f||this._jsPlumb.instance.getId(c),this.prepareEndpoint(e,d,this,g,b?0:1,a,c,f)},a.type&&(a.endpoints=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(a.type).endpoints);var f=this.makeEndpoint(!0,this.source,this.sourceId,a.sourceEndpoint),g=this.makeEndpoint(!1,this.target,this.targetId,a.targetEndpoint);f&&c.addToList(a.endpointsByElement,this.sourceId,f),g&&c.addToList(a.endpointsByElement,this.targetId,g),this.scope||(this.scope=this.endpoints[0].scope),null!=a.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=a.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=a.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0));var h=e.Defaults.ConnectionsDetachable;a.detachable===!1&&(h=!1),this.endpoints[0].connectionsDetachable===!1&&(h=!1),this.endpoints[1].connectionsDetachable===!1&&(h=!1);var i=a.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||e.Defaults.ReattachConnections;this.appendToDefaultType({detachable:h,reattach:i,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||e.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||e.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle});var j=e.getSuspendedAt();if(!e.isSuspendDrawing()){var k=e.getCachedData(this.sourceId),l=k.o,m=k.s,n=e.getCachedData(this.targetId),o=n.o,p=n.s,q=j||e.timestamp(),r=this.endpoints[0].anchor.compute({xy:[l.left,l.top],wh:m,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[o.left,o.top],twh:p,tElement:this.endpoints[1],timestamp:q});this.endpoints[0].paint({anchorLoc:r,timestamp:q}),r=this.endpoints[1].anchor.compute({xy:[o.left,o.top],wh:p,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[l.left,l.top],twh:m,tElement:this.endpoints[0],timestamp:q}),this.endpoints[1].paint({anchorLoc:r,timestamp:q})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(){return this._jsPlumb.detachable===!0},this.setDetachable=function(a){this._jsPlumb.detachable=a===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(a){this._jsPlumb.reattach=a===!0},this._jsPlumb.cost=a.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=a.directed,null==a.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var s=jsPlumb.extend({},this.endpoints[1].getParameters());b.extend(s,this.endpoints[0].getParameters()),b.extend(s,this.getParameters()),this.setParameters(s),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||e.Defaults.Connector||b.Defaults.Connector,!0),a.geometry&&this.connector.setGeometry(a.geometry);var t=null!=a.data&&jsPlumbUtil.isObject(a.data)?a.data:{};this.getData=function(){return t},this.setData=function(a){t=a||{}},this.mergeData=function(a){t=jsPlumb.extend(t,a)};var u=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,a.type].join(" ");/[^\s]/.test(u)&&this.addType(u,a.data,!0),this.updateConnectedClass()},c.extend(b.Connection,b.OverlayCapableJsPlumbUIComponent,{applyType:function(a,c,d){null!=a.detachable&&this.setDetachable(a.detachable),null!=a.reattach&&this.setReattach(a.reattach),a.scope&&(this.scope=a.scope),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass);var e=null;a.anchor?(e=this.getCachedTypeItem("anchors",d.anchor),null==e&&(e=[this._jsPlumb.instance.makeAnchor(a.anchor),this._jsPlumb.instance.makeAnchor(a.anchor)],this.cacheTypeItem("anchors",e,d.anchor))):a.anchors&&(e=this.getCachedTypeItem("anchors",d.anchors),null==e&&(e=[this._jsPlumb.instance.makeAnchor(a.anchors[0]),this._jsPlumb.instance.makeAnchor(a.anchors[1])],this.cacheTypeItem("anchors",e,d.anchors))),null!=e&&(this.endpoints[0].anchor=e[0],this.endpoints[1].anchor=e[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),b.OverlayCapableJsPlumbUIComponent.applyType(this,a)},addClass:function(a,b){b&&(this.endpoints[0].addClass(a),this.endpoints[1].addClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(a)),this.connector&&this.connector.addClass(a)},removeClass:function(a,b){b&&(this.endpoints[0].removeClass(a),this.endpoints[1].removeClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(a)),this.connector&&this.connector.removeClass(a)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a){this._jsPlumb.visible=a,this.connector&&this.connector.setVisible(a),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(a){this._jsPlumb&&(f(this,this.source,this._jsPlumb.instance,a),f(this,this.target,this._jsPlumb.instance,a))},setHover:function(b){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(b),a.jsPlumb[b?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),a.jsPlumb[b?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-(1/0)},setCost:function(a){this._jsPlumb.cost=a},isDirected:function(){return this._jsPlumb.directed===!0},getConnector:function(){return this.connector},getGeometry:function(){return this.connector?this.connector.getGeometry():null},setGeometry:function(a){this.connector&&this.connector.setGeometry(a)},prepareConnector:function(a,b){var e,f={_jsPlumb:this._jsPlumb.instance,cssClass:(this._jsPlumb.params.cssClass||"")+(this.isEditable()?this._jsPlumb.instance.editableConnectorClass:""),container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"],editable:this.editableRequested},g=this._jsPlumb.instance.getRenderMode();return c.isString(a)?e=d(this._jsPlumb.instance,g,a,f,this):c.isArray(a)&&(e=1==a.length?d(this._jsPlumb.instance,g,a[0],f,this):d(this._jsPlumb.instance,g,a[0],c.merge(a[1],f),this)),null!=b&&(e.typeId=b),e},setPreparedConnector:function(a,b,c,d){var e,f="";if(null!=this.connector&&(e=this.connector,f=e.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=a,d&&this.cacheTypeItem("connector",a,d),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.addClass(f),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=e)for(var g=this.getOverlays(),h=0;h<g.length;h++)g[h].transfer&&g[h].transfer(this.connector);c||this.setListenerComponent(this.connector),b||this.repaint()},setConnector:function(a,b,c,d){var e=this.prepareConnector(a,d);this.setPreparedConnector(e,b,c,d)},paint:function(a){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){a=a||{};var b=a.timestamp,c=!1,d=c?this.sourceId:this.targetId,e=c?this.targetId:this.sourceId,f=c?0:1,g=c?1:0;if(null==b||b!=this._jsPlumb.lastPaintedAt){var h=this._jsPlumb.instance.updateOffset({elId:e}).o,i=this._jsPlumb.instance.updateOffset({elId:d}).o,j=this.endpoints[g],k=this.endpoints[f],l=j.anchor.getCurrentLocation({xy:[h.left,h.top],wh:[h.width,h.height],element:j,timestamp:b}),m=k.anchor.getCurrentLocation({xy:[i.left,i.top],wh:[i.width,i.height],element:k,timestamp:b});this.connector.resetBounds(),this.connector.compute({sourcePos:l,targetPos:m,sourceEndpoint:this.endpoints[g],targetEndpoint:this.endpoints[f],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:h,targetInfo:i});var n={minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)};for(var o in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(o)){var p=this._jsPlumb.overlays[o];p.isVisible()&&(this._jsPlumb.overlayPlacements[o]=p.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(p)),n.minX=Math.min(n.minX,this._jsPlumb.overlayPlacements[o].minX),n.maxX=Math.max(n.maxX,this._jsPlumb.overlayPlacements[o].maxX),n.minY=Math.min(n.minY,this._jsPlumb.overlayPlacements[o].minY),n.maxY=Math.max(n.maxY,this._jsPlumb.overlayPlacements[o].maxY))}var q=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,r=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),s={xmin:Math.min(this.connector.bounds.minX-(q+r),n.minX),ymin:Math.min(this.connector.bounds.minY-(q+r),n.minY),xmax:Math.max(this.connector.bounds.maxX+(q+r),n.maxX),ymax:Math.max(this.connector.bounds.maxY+(q+r),n.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,s);for(var t in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(t)){var u=this._jsPlumb.overlays[t];u.isVisible()&&u.paint(this._jsPlumb.overlayPlacements[t],s)}}this._jsPlumb.lastPaintedAt=b}},repaint:function(a){a=a||{},this.paint({elId:this.sourceId,recalc:!(a.recalc===!1),timestamp:a.timestamp})},prepareEndpoint:function(a,c,d,f,g,h,i,j){var k;if(f)d.endpoints[g]=f,f.addConnection(d);else{h.endpoints||(h.endpoints=[null,null]);var l=h.endpoints[g]||h.endpoint||a.Defaults.Endpoints[g]||jsPlumb.Defaults.Endpoints[g]||a.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;h.endpointStyles||(h.endpointStyles=[null,null]),h.endpointHoverStyles||(h.endpointHoverStyles=[null,null]);var m=h.endpointStyles[g]||h.endpointStyle||a.Defaults.EndpointStyles[g]||jsPlumb.Defaults.EndpointStyles[g]||a.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==m.fillStyle&&null!=h.paintStyle&&(m.fillStyle=h.paintStyle.strokeStyle),null==m.outlineColor&&null!=h.paintStyle&&(m.outlineColor=h.paintStyle.outlineColor),null==m.outlineWidth&&null!=h.paintStyle&&(m.outlineWidth=h.paintStyle.outlineWidth);var n=h.endpointHoverStyles[g]||h.endpointHoverStyle||a.Defaults.EndpointHoverStyles[g]||jsPlumb.Defaults.EndpointHoverStyles[g]||a.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=h.hoverPaintStyle&&(null==n&&(n={}),null==n.fillStyle&&(n.fillStyle=h.hoverPaintStyle.strokeStyle));var o=h.anchors?h.anchors[g]:h.anchor?h.anchor:e(a.Defaults.Anchors[g],j,a)||e(b.Defaults.Anchors[g],j,a)||e(a.Defaults.Anchor,j,a)||e(b.Defaults.Anchor,j,a),p=h.uuids?h.uuids[g]:null;k=c({paintStyle:m,hoverPaintStyle:n,endpoint:l,connections:[d],uuid:p,anchor:o,source:i,scope:h.scope,reattach:h.reattach||a.Defaults.ReattachConnections,detachable:h.detachable||a.Defaults.ConnectionsDetachable}),d.endpoints[g]=k,h.drawEndpoints===!1&&k.setVisible(!1,!0,!0)}return k}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumbUtil,c=a.jsPlumb;c.AnchorManager=function(a){var d={},e={},f={},g={},h={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},i=["left","top","right","bottom"],j={},k=this,l={},m=a.jsPlumbInstance,n={},o=function(a,b,c,d,e,f){if(a===b)return{orientation:h.IDENTITY,a:["top","top"]};var g=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),j=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),k=[],l={};!function(a,b){for(var c=0;c<a.length;c++)l[a[c]]={left:[b[c].left,b[c].centery],right:[b[c].right,b[c].centery],top:[b[c].centerx,b[c].top],bottom:[b[c].centerx,b[c].bottom]}}(["source","target"],[c,d]);for(var m=0;m<i.length;m++)for(var n=0;n<i.length;n++)k.push({source:i[m],target:i[n],dist:Biltong.lineLength(l.source[i[m]],l.target[i[n]])});k.sort(function(a,b){return a.dist<b.dist?-1:a.dist>b.dist?1:0});for(var o=k[0].source,p=k[0].target,q=0;q<k.length&&(o=!e.isContinuous||e.isEdgeSupported(k[q].source)?k[q].source:null,p=!f.isContinuous||f.isEdgeSupported(k[q].target)?k[q].target:null,null==o||null==p);q++);return{a:[o,p],theta:g,theta2:j}},p=function(a,b,c,d,e,f,g){for(var h=[],i=b[e?0:1]/(d.length+1),j=0;j<d.length;j++){var k=(j+1)*i,l=f*b[e?1:0];g&&(k=b[e?0:1]-k);var m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1];h.push([n,q,o,r,d[j][1],d[j][2]])}return h},q=function(a){return function(b,c){var d=!0;return d=a?b[0][0]<c[0][0]:b[0][0]>c[0][0],d===!1?-1:1}},r=function(a,b){var c=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],d=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return c>d?1:a[0][1]>b[0][1]?1:-1},s={top:function(a,b){return a[0]>b[0]?1:-1},right:q(!0),bottom:q(!0),left:r},t=function(a,b){return a.sort(b)},u=function(a,b){var c=m.getCachedData(a),d=c.s,f=c.o,h=function(b,c,d,f,h,i,j){if(f.length>0)for(var k=t(f,s[b]),l="right"===b||"top"===b,m=p(b,c,d,k,h,i,l),n=function(a,b){e[a.id]=[b[0],b[1],b[2],b[3]],g[a.id]=j},o=0;o<m.length;o++){var q=m[o][4],r=q.endpoints[0].elementId===a,u=q.endpoints[1].elementId===a;r&&n(q.endpoints[0],m[o]),u&&n(q.endpoints[1],m[o])}};h("bottom",d,[f.left,f.top],b.bottom,!0,1,[0,1]),h("top",d,[f.left,f.top],b.top,!0,0,[0,-1]),h("left",d,[f.left,f.top],b.left,!1,0,[-1,0]),h("right",d,[f.left,f.top],b.right,!1,1,[1,0])};this.reset=function(){d={},j={},l={}},this.addFloatingConnection=function(a,b){n[a]=b},this.removeFloatingConnection=function(a){delete n[a]},this.newConnection=function(a){var d=a.sourceId,e=a.targetId,f=a.endpoints,g=!0,h=function(h,i,k,l,m){d==e&&k.isContinuous&&(a._jsPlumb.instance.removeElement(f[1].canvas),g=!1),b.addToList(j,l,[m,i,k.constructor==c.DynamicAnchor])};h(0,f[0],f[0].anchor,e,a),g&&h(1,f[1],f[1].anchor,d,a)};var v=function(a){!function(a,c){if(a){var d=function(a){return a[4]==c};b.removeWithFunction(a.top,d),b.removeWithFunction(a.left,d),b.removeWithFunction(a.bottom,d),b.removeWithFunction(a.right,d)}}(l[a.elementId],a.id)};this.connectionDetached=function(a,c){var d=a.connection||a,e=a.sourceId,f=a.targetId,g=d.endpoints,h=function(a,c,d,e,f){b.removeWithFunction(j[e],function(a){return a[0].id==f.id})};h(1,g[1],g[1].anchor,e,d),h(0,g[0],g[0].anchor,f,d),d.floatingId&&(h(d.floatingIndex,d.floatingEndpoint,d.floatingEndpoint.anchor,d.floatingId,d),v(d.floatingEndpoint)),v(d.endpoints[0]),v(d.endpoints[1]),c||(k.redraw(d.sourceId),d.targetId!==d.sourceId&&k.redraw(d.targetId))},this.add=function(a,c){b.addToList(d,c,a)},this.changeId=function(a,b){j[b]=j[a],d[b]=d[a],delete j[a],delete d[a]},this.getConnectionsFor=function(a){return j[a]||[]},this.getEndpointsFor=function(a){return d[a]||[]},this.deleteEndpoint=function(a){b.removeWithFunction(d[a.elementId],function(b){return b.id==a.id}),v(a)},this.clearFor=function(a){delete d[a],d[a]=[]};var w=function(c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q=-1,r=-1,s=f.endpoints[i],t=s.id,u=[1,0][i],v=[[d,e],f,g,h,t],w=c[k],x=s._continuousAnchorEdge?c[s._continuousAnchorEdge]:null;if(x){var y=b.findWithFunction(x,function(a){return a[4]==t});if(y!=-1)for(x.splice(y,1),o=0;o<x.length;o++)p=x[o][1],b.addWithFunction(m,p,function(a){return a.id==p.id}),b.addWithFunction(n,x[o][1].endpoints[i],function(a){return a.id==p.endpoints[i].id}),b.addWithFunction(n,x[o][1].endpoints[u],function(a){return a.id==p.endpoints[u].id})}for(o=0;o<w.length;o++)p=w[o][1],1==a.idx&&w[o][3]===h&&r==-1&&(r=o),b.addWithFunction(m,p,function(a){return a.id==p.id}),b.addWithFunction(n,w[o][1].endpoints[i],function(a){return a.id==p.endpoints[i].id}),b.addWithFunction(n,w[o][1].endpoints[u],function(a){return a.id==p.endpoints[u].id});if(q!=-1)w[q]=v;else{var z=j?r!=-1?r:0:w.length;w.splice(z,0,v)}s._continuousAnchorEdge=k};this.updateOtherEndpoint=function(a,d,e,f){var g=b.findWithFunction(j[a],function(a){return a[0].id===f.id}),h=b.findWithFunction(j[d],function(a){return a[0].id===f.id});g!=-1&&(j[a][g][0]=f,j[a][g][1]=f.endpoints[1],j[a][g][2]=f.endpoints[1].anchor.constructor==c.DynamicAnchor),h>-1&&(j[d].splice(h,1),b.addToList(j,e,[f,f.endpoints[0],f.endpoints[0].anchor.constructor==c.DynamicAnchor])),f.updateConnectedClass()},this.sourceChanged=function(a,d,e){if(a!==d){b.removeWithFunction(j[a],function(a){return a[0].id===e.id});var f=b.findWithFunction(j[e.targetId],function(a){return a[0].id===e.id});f>-1&&(j[e.targetId][f][0]=e,j[e.targetId][f][1]=e.endpoints[0],j[e.targetId][f][2]=e.endpoints[0].anchor.constructor==c.DynamicAnchor),b.addToList(j,d,[e,e.endpoints[1],e.endpoints[1].anchor.constructor==c.DynamicAnchor]),e.endpoints[1].anchor.isContinuous&&(e.source===e.target?e._jsPlumb.instance.removeElement(e.endpoints[1].canvas):null==e.endpoints[1].canvas.parentNode&&e._jsPlumb.instance.appendElement(e.endpoints[1].canvas)),e.updateConnectedClass()}},this.rehomeEndpoint=function(a,b,c){var e=d[b]||[],f=m.getId(c);if(f!==b){var g=e.indexOf(a);if(g>-1){var h=e.splice(g,1)[0];k.add(h,f)}}for(var i=0;i<a.connections.length;i++)a.connections[i].sourceId==b?(a.connections[i].sourceId=a.elementId,a.connections[i].source=a.element,k.sourceChanged(b,a.elementId,a.connections[i])):a.connections[i].targetId==b&&(a.connections[i].targetId=a.elementId,a.connections[i].target=a.element,k.updateOtherEndpoint(a.connections[i].sourceId,b,a.elementId,a.connections[i]))},this.redraw=function(a,e,f,g,h,i){if(!m.isSuspendDrawing()){var k=d[a]||[],p=j[a]||[],q=[],r=[],s=[];f=f||m.timestamp(),g=g||{left:0,top:0},e&&(e={left:e.left+g.left,top:e.top+g.top});for(var t=m.updateOffset({elId:a,offset:e,recalc:!1,timestamp:f}),v={},x=0;x<p.length;x++){var y=p[x][0],z=y.sourceId,A=y.targetId,B=y.endpoints[0].anchor.isContinuous,C=y.endpoints[1].anchor.isContinuous;if(B||C){var D=z+"_"+A,E=v[D],F=y.sourceId==a?1:0;B&&!l[z]&&(l[z]={top:[],right:[],bottom:[],left:[]}),C&&!l[A]&&(l[A]={top:[],right:[],bottom:[],left:[]}),a!=A&&m.updateOffset({elId:A,timestamp:f}),a!=z&&m.updateOffset({elId:z,timestamp:f});var G=m.getCachedData(A),H=m.getCachedData(z);A==z&&(B||C)?(w(l[z],-Math.PI/2,0,y,!1,A,0,!1,"top",z,q,r),w(l[A],-Math.PI/2,0,y,!1,z,1,!1,"top",A,q,r)):(E||(E=o(z,A,H.o,G.o,y.endpoints[0].anchor,y.endpoints[1].anchor),v[D]=E),B&&w(l[z],E.theta,0,y,!1,A,0,!1,E.a[0],z,q,r),C&&w(l[A],E.theta2,-1,y,!0,z,1,!0,E.a[1],A,q,r)),B&&b.addWithFunction(s,z,function(a){return a===z}),C&&b.addWithFunction(s,A,function(a){return a===A}),b.addWithFunction(q,y,function(a){return a.id==y.id}),(B&&0===F||C&&1===F)&&b.addWithFunction(r,y.endpoints[F],function(a){return a.id==y.endpoints[F].id})}}for(x=0;x<k.length;x++)0===k[x].connections.length&&k[x].anchor.isContinuous&&(l[a]||(l[a]={top:[],right:[],bottom:[],left:[]}),w(l[a],-Math.PI/2,0,{endpoints:[k[x],k[x]],paint:function(){}},!1,a,0,!1,k[x].anchor.getDefaultFace(),a,q,r),b.addWithFunction(s,a,function(b){return b===a}));for(x=0;x<s.length;x++)u(s[x],l[s[x]]);for(x=0;x<k.length;x++)k[x].paint({timestamp:f,offset:t,dimensions:t.s,recalc:i!==!0});for(x=0;x<r.length;x++){var I=m.getCachedData(r[x].elementId);r[x].paint({timestamp:f,offset:I,dimensions:I.s})}for(x=0;x<p.length;x++){var J=p[x][1];if(J.anchor.constructor==c.DynamicAnchor){J.paint({elementWithPrecedence:a,timestamp:f}),b.addWithFunction(q,p[x][0],function(a){return a.id==p[x][0].id});for(var K=0;K<J.connections.length;K++)J.connections[K]!==p[x][0]&&b.addWithFunction(q,J.connections[K],function(a){return a.id==J.connections[K].id})}else J.anchor.constructor==c.Anchor&&b.addWithFunction(q,p[x][0],function(a){return a.id==p[x][0].id})}var L=n[a];for(L&&L.paint({timestamp:f,recalc:!1,elId:a}),x=0;x<q.length;x++)q[x].paint({elId:a,timestamp:f,recalc:!1,clearEdits:h})}};var x=function(a){b.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var c=a.faces||["top","right","bottom","left"],d=!(a.clockwise===!1),h={},i={top:"bottom",right:"left",left:"right",bottom:"top"},j={top:"right",right:"bottom",left:"top",bottom:"left"},k={top:"left",right:"top",left:"bottom",bottom:"right"},l=d?j:k,m=d?k:j,n=a.cssClass||"",o=0;o<c.length;o++)h[c[o]]=!0;this.getDefaultFace=function(){return 0===c.length?"top":c[0]},this.verifyEdge=function(a){return h[a]?a:h[i[a]]?i[a]:h[l[a]]?l[a]:h[m[a]]?m[a]:a},this.isEdgeSupported=function(a){return h[a]===!0},this.compute=function(a){return f[a.element.id]||e[a.element.id]||[0,0]},this.getCurrentLocation=function(a){return f[a.element.id]||e[a.element.id]||[0,0]},this.getOrientation=function(a){return g[a.id]||[0,0]},this.clearUserDefinedLocation=function(){delete f[a.elementId]},this.setUserDefinedLocation=function(b){f[a.elementId]=b},this.getCssClass=function(){return n}};m.continuousAnchorFactory={get:function(a){return new x(a)},clear:function(a){delete f[a],delete e[a]}}},c.Anchor=function(a){this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId,this.cssClass=a.cssClass||"",this.userDefinedLocation=null,this.orientation=a.orientation||[0,0],this.lastReturnValue=null,this.offsets=a.offsets||[0,0],this.timestamp=null,b.EventGenerator.apply(this),this.compute=function(a){var b=a.xy,c=a.wh,d=a.timestamp;return a.clearUserDefinedLocation&&(this.userDefinedLocation=null),d&&d===self.timestamp?this.lastReturnValue:(null!=this.userDefinedLocation?this.lastReturnValue=this.userDefinedLocation:this.lastReturnValue=[b[0]+this.x*c[0]+this.offsets[0],b[1]+this.y*c[1]+this.offsets[1]],this.timestamp=d,this.lastReturnValue)},this.getCurrentLocation=function(a){return a=a||{},null==this.lastReturnValue||null!=a.timestamp&&this.timestamp!=a.timestamp?this.compute(a):this.lastReturnValue}},b.extend(c.Anchor,b.EventGenerator,{equals:function(a){if(!a)return!1;var b=a.getOrientation(),c=this.getOrientation();return this.x==a.x&&this.y==a.y&&this.offsets[0]==a.offsets[0]&&this.offsets[1]==a.offsets[1]&&c[0]==b[0]&&c[1]==b[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(a){this.userDefinedLocation=a},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),c.FloatingAnchor=function(a){c.Anchor.apply(this,arguments);var b=a.reference,d=a.referenceCanvas,e=c.getSize(d),f=0,g=0,h=null,i=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=[b[0]+e[0]/2,b[1]+e[1]/2];return i=c,c},this.getOrientation=function(a){if(h)return h;var c=b.getOrientation(a);return[Math.abs(c[0])*f*-1,Math.abs(c[1])*g*-1]},this.over=function(a,b){h=a.getOrientation(b)},this.out=function(){h=null},this.getCurrentLocation=function(a){return null==i?this.compute(a):i}},b.extend(c.FloatingAnchor,c.Anchor);var d=function(a,b,d){return a.constructor==c.Anchor?a:b.makeAnchor(a,d,b)};c.DynamicAnchor=function(a){c.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=a.elementId,this.jsPlumbInstance=a.jsPlumbInstance;for(var b=0;b<a.anchors.length;b++)this.anchors[b]=d(a.anchors[b],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors},this.locked=!1;var e=this.anchors.length>0?this.anchors[0]:null,f=e,g=this,h=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},i=a.selector||function(a,b,c,d,e){for(var f=c[0]+d[0]/2,g=c[1]+d[1]/2,i=-1,j=1/0,k=0;k<e.length;k++){var l=h(e[k],f,g,a,b);l<j&&(i=k+0,j=l)}return e[i]};this.compute=function(a){var b=a.xy,c=a.wh,d=a.txy,h=a.twh;this.timestamp=a.timestamp;var j=g.getUserDefinedLocation();return null!=j?j:this.locked||null==d||null==h?e.compute(a):(a.timestamp=null,e=i(b,c,d,h,this.anchors),this.x=e.x,this.y=e.y,e!=f&&this.fire("anchorChanged",e),f=e,e.compute(a))},this.getCurrentLocation=function(a){return this.getUserDefinedLocation()||(null!=e?e.getCurrentLocation(a):null)},this.getOrientation=function(a){return null!=e?e.getOrientation(a):[0,0]},this.over=function(a,b){null!=e&&e.over(a,b)},this.out=function(){null!=e&&e.out()},this.getCssClass=function(){return e&&e.getCssClass()||""}},b.extend(c.DynamicAnchor,c.Anchor);var e=function(a,b,d,e,f,g){c.Anchors[f]=function(c){var h=c.jsPlumbInstance.makeAnchor([a,b,d,e,0,0],c.elementId,c.jsPlumbInstance);return h.type=f,g&&g(h,c),h}};e(.5,0,0,-1,"TopCenter"),e(.5,1,0,1,"BottomCenter"),e(0,.5,-1,0,"LeftMiddle"),e(1,.5,1,0,"RightMiddle"),e(.5,0,0,-1,"Top"),e(.5,1,0,1,"Bottom"),e(0,.5,-1,0,"Left"),e(1,.5,1,0,"Right"),e(.5,.5,0,0,"Center"),e(1,0,0,-1,"TopRight"),e(1,1,0,1,"BottomRight"),e(0,0,0,-1,"TopLeft"),e(0,1,0,1,"BottomLeft"),c.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],a.elementId,a.jsPlumbInstance)},c.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(c.Defaults.DynamicAnchors(a));return b.type="AutoDefault",b};var f=function(a,b){c.Anchors[a]=function(c){var d=c.jsPlumbInstance.makeAnchor(["Continuous",{faces:b}],c.elementId,c.jsPlumbInstance);return d.type=a,d}};c.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},f("ContinuousLeft",["left"]),f("ContinuousTop",["top"]),f("ContinuousBottom",["bottom"]),f("ContinuousRight",["right"]),e(0,0,0,0,"Assign",function(a,b){var c=b.position||"Fixed";a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(a,b,c){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},c.Anchors.Perimeter=function(a){a=a||{};var b=a.anchorCount||60,c=a.shape;if(!c)throw new Error("no shape supplied to Perimeter Anchor type");var d=function(){for(var a=.5,c=2*Math.PI/b,d=0,e=[],f=0;f<b;f++){var g=a+a*Math.sin(d),h=a+a*Math.cos(d);e.push([g,h,0,0]),d+=c}return e},e=function(a){for(var c=b/a.length,d=[],e=function(a,e,f,g,h){c=b*h;for(var i=(f-a)/c,j=(g-e)/c,k=0;k<c;k++)d.push([a+i*k,e+j*k,0,0])},f=0;f<a.length;f++)e.apply(null,a[f]);return d},f=function(a){for(var b=[],c=0;c<a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={Circle:d,Ellipse:d,Diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:g,Square:g,Triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(a){for(var b=a.points,c=[],d=0,f=0;f<b.length-1;f++){var g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1]));d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g])}for(var h=0;h<c.length;h++)c[h][4]=c[h][4]/d;return e(c)}},i=function(a,b){for(var c=[],d=b/180*Math.PI,e=0;e<a.length;e++){var f=a[e][0]-.5,g=a[e][1]-.5;c.push([.5+(f*Math.cos(d)-g*Math.sin(d)),.5+(f*Math.sin(d)+g*Math.cos(d)),a[e][2],a[e][3]])}return c};if(!h[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");var j=h[c](a);a.rotation&&(j=i(j,a.rotation));var k=a.jsPlumbInstance.makeDynamicAnchor(j);return k.type="Perimeter",k}}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=a.Biltong;b.Segments={AbstractSegment:function(a){this.params=a,this.findClosestPointOnPath=function(a,b){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(a.x1,a.x2),minY:Math.min(a.y1,a.y2),maxX:Math.max(a.x1,a.x2),maxY:Math.max(a.y1,a.y2)}}},Straight:function(a){var c,e,f,g,h,i,j,k=(b.Segments.AbstractSegment.apply(this,arguments),function(){c=Math.sqrt(Math.pow(h-g,2)+Math.pow(j-i,2)),e=d.gradient({x:g,y:i},{x:h,y:j}),f=-1/e});this.type="Straight",this.getLength=function(){return c},this.getGradient=function(){return e},this.getCoordinates=function(){return{x1:g,y1:i,x2:h,y2:j}},this.setCoordinates=function(a){g=a.x1,i=a.y1,h=a.x2,j=a.y2,k()},this.setCoordinates({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}),this.getBounds=function(){return{minX:Math.min(g,h),minY:Math.min(i,j),maxX:Math.max(g,h),maxY:Math.max(i,j)}},this.pointOnPath=function(a,b){if(0!==a||b){if(1!=a||b){var e=b?a>0?a:c+a:a*c;return d.pointOnLine({x:g,y:i},{x:h,y:j},e)}return{x:h,y:j}}return{x:g,y:i}},this.gradientAtPoint=function(a){return e},this.pointAlongPathFrom=function(a,b,c){var e=this.pointOnPath(a,c),f=b<=0?{x:g,y:i}:{x:h,y:j};return b<=0&&Math.abs(b)>1&&(b*=-1),d.pointOnLine(e,f,b)};var l=function(a,b,c){return c>=Math.min(a,b)&&c<=Math.max(a,b)},m=function(a,b,c){return Math.abs(c-a)<Math.abs(c-b)?a:b};this.findClosestPointOnPath=function(a,b){var k={d:1/0,x:null,y:null,l:null,x1:g,x2:h,y1:i,y2:j};if(0===e)k.y=i,k.x=l(g,h,a)?a:m(g,h,a);else if(e==1/0||e==-(1/0))k.x=g,k.y=l(i,j,b)?b:m(i,j,b);else{var n=i-e*g,o=b-f*a,p=(o-n)/(e-f),q=e*p+n;k.x=l(g,h,p)?p:m(g,h,p),k.y=l(i,j,q)?q:m(i,j,q)}var r=d.lineLength([k.x,k.y],[g,i]);return k.d=d.lineLength([a,b],[k.x,k.y]),k.l=r/c,k}},Arc:function(a){var c=(b.Segments.AbstractSegment.apply(this,arguments),function(b,c){return d.theta([a.cx,a.cy],[b,c])}),e=function(a,b){if(a.anticlockwise){var c=a.startAngle<a.endAngle?a.startAngle+f:a.startAngle,d=Math.abs(c-a.endAngle);return c-d*b}var e=a.endAngle<a.startAngle?a.endAngle+f:a.endAngle,g=Math.abs(e-a.startAngle);return a.startAngle+g*b},f=2*Math.PI;this.radius=a.r,this.anticlockwise=a.ac,this.type="Arc",a.startAngle&&a.endAngle?(this.startAngle=a.startAngle,this.endAngle=a.endAngle,this.x1=a.cx+this.radius*Math.cos(a.startAngle),this.y1=a.cy+this.radius*Math.sin(a.startAngle),this.x2=a.cx+this.radius*Math.cos(a.endAngle),this.y2=a.cy+this.radius*Math.sin(a.endAngle)):(this.startAngle=c(a.x1,a.y1),this.endAngle=c(a.x2,a.y2),this.x1=a.x1,this.y1=a.y1,this.x2=a.x2,this.y2=a.y2),this.endAngle<0&&(this.endAngle+=f),this.startAngle<0&&(this.startAngle+=f);var g=this.endAngle<this.startAngle?this.endAngle+f:this.endAngle;this.sweep=Math.abs(g-this.startAngle),this.anticlockwise&&(this.sweep=f-this.sweep);var h=2*Math.PI*this.radius,i=this.sweep/f,j=h*i;this.getLength=function(){return j},this.getBounds=function(){return{minX:a.cx-a.r,maxX:a.cx+a.r,minY:a.cy-a.r,maxY:a.cy+a.r}};var k=1e-10,l=function(a){var b=Math.floor(a),c=Math.ceil(a);return a-b<k?b:c-a<k?c:a};this.pointOnPath=function(b,c){if(0===b)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==b)return{x:this.x2,y:this.y2,theta:this.endAngle};c&&(b/=j);var d=e(this,b),f=a.cx+a.r*Math.cos(d),g=a.cy+a.r*Math.sin(d);return{x:l(f),y:l(g),theta:d}},this.gradientAtPoint=function(b,c){var e=this.pointOnPath(b,c),f=d.normal([a.cx,a.cy],[e.x,e.y]);return this.anticlockwise||f!=1/0&&f!=-(1/0)||(f*=-1),f},this.pointAlongPathFrom=function(b,c,d){var e=this.pointOnPath(b,d),f=c/h*2*Math.PI,g=this.anticlockwise?-1:1,i=e.theta+g*f,j=a.cx+this.radius*Math.cos(i),k=a.cy+this.radius*Math.sin(i);return{x:j,y:k}}},Bezier:function(c){this.curve=[{x:c.x1,y:c.y1},{x:c.cp1x,y:c.cp1y},{x:c.cp2x,y:c.cp2y},{x:c.x2,y:c.y2}];b.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(c.x1,c.x2,c.cp1x,c.cp2x),minY:Math.min(c.y1,c.y2,c.cp1y,c.cp2y),maxX:Math.max(c.x1,c.x2,c.cp1x,c.cp2x),maxY:Math.max(c.y1,c.y2,c.cp1y,c.cp2y)},this.type="Bezier";var d=function(b,c,d){return d&&(c=a.jsBezier.locationAlongCurveFrom(b,c>0?0:1,c)),c};this.pointOnPath=function(b,c){return b=d(this.curve,b,c),a.jsBezier.pointOnCurve(this.curve,b)},this.gradientAtPoint=function(b,c){return b=d(this.curve,b,c),a.jsBezier.gradientAtPoint(this.curve,b)},this.pointAlongPathFrom=function(b,c,e){return b=d(this.curve,b,e),a.jsBezier.pointAlongCurveFrom(this.curve,b,c)},this.getLength=function(){return a.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds}}};var e=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}},this.resetBounds()};b.Connectors.AbstractConnector=function(a){e.apply(this,arguments);var f=[],g=0,h=[],i=[],j=a.stub||0,k=c.isArray(j)?j[0]:j,l=c.isArray(j)?j[1]:j,m=a.gap||0,n=c.isArray(m)?m[0]:m,o=c.isArray(m)?m[1]:m,p=null,q=!1,r=null,s=null,t=a.editable!==!1&&null!=jsPlumb.ConnectorEditors&&null!=jsPlumb.ConnectorEditors[this.type],u=this.setGeometry=function(a,b){
q=!b,s=a},v=this.getGeometry=function(){return s};this.hasBeenEdited=function(){return q},this.isEditing=function(){return null!=this.editor&&this.editor.isActive()},this.setEditable=function(a){return t=!(!a||null==jsPlumb.ConnectorEditors||null==jsPlumb.ConnectorEditors[this.type]||null!=this.overrideSetEditable&&!this.overrideSetEditable())&&a},this.isEditable=function(){return t},this.findSegmentForPoint=function(a,b){for(var c={d:1/0,s:null,x:null,y:null,l:null},d=0;d<f.length;d++){var e=f[d].findClosestPointOnPath(a,b);e.d<c.d&&(c.d=e.d,c.l=e.l,c.x=e.x,c.y=e.y,c.s=f[d],c.x1=e.x1,c.x2=e.x2,c.y1=e.y1,c.y2=e.y2,c.index=d)}return c};var w=function(){for(var a=0,b=0;b<f.length;b++){var c=f[b].getLength();i[b]=c/g,h[b]=[a,a+=c/g]}},x=function(a,b){b&&(a=a>0?a/g:(g+a)/g);for(var c=h.length-1,d=1,e=0;e<h.length;e++)if(h[e][1]>=a){c=e,d=1==a?1:0===a?0:(a-h[e][0])/i[e];break}return{segment:f[c],proportion:d,index:c}},y=function(a,c,d){if(d.x1!=d.x2||d.y1!=d.y2){var e=new b.Segments[c](d);f.push(e),g+=e.getLength(),a.updateBounds(e)}},z=function(){g=f.length=h.length=i.length=0};this.setSegments=function(a){p=[],g=0;for(var b=0;b<a.length;b++)p.push(a[b]),g+=a[b].getLength()},this.getLength=function(){return g};var A=function(a){this.lineWidth=a.lineWidth;var b=d.quadrant(a.sourcePos,a.targetPos),c=a.targetPos[0]<a.sourcePos[0],e=a.targetPos[1]<a.sourcePos[1],f=a.lineWidth||1,g=a.sourceEndpoint.anchor.getOrientation(a.sourceEndpoint),h=a.targetEndpoint.anchor.getOrientation(a.targetEndpoint),i=c?a.targetPos[0]:a.sourcePos[0],j=e?a.targetPos[1]:a.sourcePos[1],m=Math.abs(a.targetPos[0]-a.sourcePos[0]),p=Math.abs(a.targetPos[1]-a.sourcePos[1]);if(0===g[0]&&0===g[1]||0===h[0]&&0===h[1]){var q=m>p?0:1,r=[1,0][q];g=[],h=[],g[q]=a.sourcePos[q]>a.targetPos[q]?-1:1,h[q]=a.sourcePos[q]>a.targetPos[q]?1:-1,g[r]=0,h[r]=0}var s=c?m+n*g[0]:n*g[0],t=e?p+n*g[1]:n*g[1],u=c?o*h[0]:m+o*h[0],v=e?o*h[1]:p+o*h[1],w=g[0]*h[0]+g[1]*h[1],x={sx:s,sy:t,tx:u,ty:v,lw:f,xSpan:Math.abs(u-s),ySpan:Math.abs(v-t),mx:(s+u)/2,my:(t+v)/2,so:g,to:h,x:i,y:j,w:m,h:p,segment:b,startStubX:s+g[0]*k,startStubY:t+g[1]*k,endStubX:u+h[0]*l,endStubY:v+h[1]*l,isXGreaterThanStubTimes2:Math.abs(s-u)>k+l,isYGreaterThanStubTimes2:Math.abs(t-v)>k+l,opposite:w==-1,perpendicular:0===w,orthogonal:1==w,sourceAxis:0===g[0]?"y":"x",points:[i,j,m,p,s,t,u,v]};return x.anchorOrientation=x.opposite?"opposite":x.orthogonal?"orthogonal":"perpendicular",x};this.getSegments=function(){return f},this.updateBounds=function(a){var b=a.getBounds();this.bounds.minX=Math.min(this.bounds.minX,b.minX),this.bounds.maxX=Math.max(this.bounds.maxX,b.maxX),this.bounds.minY=Math.min(this.bounds.minY,b.minY),this.bounds.maxY=Math.max(this.bounds.maxY,b.maxY)};return this.pointOnPath=function(a,b){var c=x(a,b);return c.segment&&c.segment.pointOnPath(c.proportion,!1)||[0,0]},this.gradientAtPoint=function(a,b){var c=x(a,b);return c.segment&&c.segment.gradientAtPoint(c.proportion,!1)||0},this.pointAlongPathFrom=function(a,b,c){var d=x(a,c);return d.segment&&d.segment.pointAlongPathFrom(d.proportion,b,!1)||[0,0]},this.compute=function(a){r=A.call(this,a),z(),this._compute(r,a),this.x=r.points[0],this.y=r.points[1],this.w=r.points[2],this.h=r.points[3],this.segment=r.segment,w()},{addSegment:y,prepareCompute:A,sourceStub:k,targetStub:l,maxStub:Math.max(k,l),sourceGap:n,targetGap:o,maxGap:Math.max(n,o),setGeometry:u,getGeometry:v}},c.extend(b.Connectors.AbstractConnector,e);var f=b.Connectors.Straight=function(){this.type="Straight";var a=b.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(b,c){a.addSegment(this,"Straight",{x1:b.sx,y1:b.sy,x2:b.startStubX,y2:b.startStubY}),a.addSegment(this,"Straight",{x1:b.startStubX,y1:b.startStubY,x2:b.endStubX,y2:b.endStubY}),a.addSegment(this,"Straight",{x1:b.endStubX,y1:b.endStubY,x2:b.tx,y2:b.ty})}};c.extend(b.Connectors.Straight,b.Connectors.AbstractConnector),b.registerConnectorType(f,"Straight"),b.Endpoints.AbstractEndpoint=function(a){e.apply(this,arguments);var b=this.compute=function(a,b,c,d){var e=this._compute.apply(this,arguments);return this.x=e[0],this.y=e[1],this.w=e[2],this.h=e[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,e};return{compute:b,cssClass:a.cssClass}},c.extend(b.Endpoints.AbstractEndpoint,e),b.Endpoints.Dot=function(a){this.type="Dot";b.Endpoints.AbstractEndpoint.apply(this,arguments);a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(a,b,c,d){this.radius=c.radius||this.radius;var e=a[0]-this.radius,f=a[1]-this.radius,g=2*this.radius,h=2*this.radius;if(c.strokeStyle){var i=c.lineWidth||1;e-=i,f-=i,g+=2*i,h+=2*i}return[e,f,g,h,this.radius]}},c.extend(b.Endpoints.Dot,b.Endpoints.AbstractEndpoint),b.Endpoints.Rectangle=function(a){this.type="Rectangle";b.Endpoints.AbstractEndpoint.apply(this,arguments);a=a||{},this.width=a.width||20,this.height=a.height||20,this._compute=function(a,b,c,d){var e=c.width||this.width,f=c.height||this.height,g=a[0]-e/2,h=a[1]-f/2;return[g,h,e,f]}},c.extend(b.Endpoints.Rectangle,b.Endpoints.AbstractEndpoint);var g=function(a){b.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};c.extend(g,b.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(a){this._jsPlumb.displayElements.push(a)}}),b.Endpoints.Image=function(d){this.type="Image",g.apply(this,arguments),b.Endpoints.AbstractEndpoint.apply(this,arguments);var e=d.onload,f=d.src||d.url,h=d.cssClass?" "+d.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=d.width,this._jsPlumb.heightToUse=d.height,this._jsPlumb.endpoint=d.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,e&&e(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(a,b){var c=a.constructor==String?a:a.src;e=b,this._jsPlumb.img.src=c,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(f,e),this._compute=function(a,b,c,d){return this.anchorPoint=a,this._jsPlumb.ready?[a[0]-this._jsPlumb.widthToUse/2,a[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=jsPlumb.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+h),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(a,b,d){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var e=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,f=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;c.sizeElement(this.canvas,e,f,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(b,c){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(b,c):a.setTimeout(function(){this.paint(b,c)}.bind(this),200))}},c.extend(b.Endpoints.Image,[g,b.Endpoints.AbstractEndpoint],{cleanup:function(a){a&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),b.Endpoints.Blank=function(a){b.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank",g.apply(this,arguments),this._compute=function(a,b,c,d){return[a[0],a[1],10,0]};var d=a.cssClass?" "+a.cssClass:"";this.canvas=jsPlumb.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+d),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(a,b){c.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},c.extend(b.Endpoints.Blank,[b.Endpoints.AbstractEndpoint,g],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),b.Endpoints.Triangle=function(a){this.type="Triangle",b.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this._compute=function(a,b,c,d){var e=c.width||self.width,f=c.height||self.height,g=a[0]-e/2,h=a[1]-f/2;return[g,h,e,f]}};var h=b.Overlays.AbstractOverlay=function(a){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation,this.visible=a.visible!==!1};h.prototype={cleanup:function(a){a&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(a){},setVisible:function(a){this.visible=a,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(a){this.loc+=a,this.component.repaint()},setLocation:function(a){this.loc=a,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},b.Overlays.Arrow=function(a){this.type="Arrow",h.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{},this.length=a.length||20,this.width=a.width||20,this.id=a.id;var b=(a.direction||1)<0?-1:1,e=a.paintStyle||{lineWidth:1},f=a.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.elementCreated=function(b,c){if(this.path=b,a.events)for(var d in a.events)jsPlumb.on(b,d,a.events[d])},this.draw=function(a,g){var h,i,j,k,l;if(a.pointAlongPathFrom){if(c.isString(this.loc)||this.loc>1||this.loc<0){var m=parseInt(this.loc,10),n=this.loc<0?1:0;h=a.pointAlongPathFrom(n,m,!1),i=a.pointAlongPathFrom(n,m-b*this.length/2,!1),j=d.pointOnLine(h,i,this.length)}else if(1==this.loc){if(h=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,-this.length),j=d.pointOnLine(h,i,this.length),b==-1){var o=j;j=h,h=o}}else if(0===this.loc){if(j=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,this.length),h=d.pointOnLine(j,i,this.length),b==-1){var p=j;j=h,h=p}}else h=a.pointAlongPathFrom(this.loc,b*this.length/2),i=a.pointOnPath(this.loc),j=d.pointOnLine(h,i,this.length);k=d.perpendicularLineTo(h,j,this.width),l=d.pointOnLine(h,j,f*this.length);var q={hxy:h,tail:k,cxy:l},r=e.strokeStyle||g.strokeStyle,s=e.fillStyle||g.strokeStyle,t=e.lineWidth||g.lineWidth;return{component:a,d:q,lineWidth:t,strokeStyle:r,fillStyle:s,minX:Math.min(h.x,k[0].x,k[1].x),maxX:Math.max(h.x,k[0].x,k[1].x),minY:Math.min(h.y,k[0].y,k[1].y),maxY:Math.max(h.y,k[0].y,k[1].y)}}return{component:a,minX:0,maxX:0,minY:0,maxY:0}}},c.extend(b.Overlays.Arrow,h,{updateFrom:function(a){this.length=a.length||this.length,this.width=a.width||this.width,this.direction=null!=a.direction?a.direction:this.direction,this.foldback=a.foldback||this.foldback}}),b.Overlays.PlainArrow=function(a){a=a||{};var c=b.extend(a,{foldback:1});b.Overlays.Arrow.call(this,c),this.type="PlainArrow"},c.extend(b.Overlays.PlainArrow,b.Overlays.Arrow),b.Overlays.Diamond=function(a){a=a||{};var c=a.length||40,d=jsPlumb.extend(a,{length:c/2,foldback:2});b.Overlays.Arrow.call(this,d),this.type="Diamond"},c.extend(b.Overlays.Diamond,b.Overlays.Arrow);var i=function(a,b){return(null==a._jsPlumb.cachedDimensions||b)&&(a._jsPlumb.cachedDimensions=a.getDimensions()),a._jsPlumb.cachedDimensions},j=function(a){b.jsPlumbUIComponent.apply(this,arguments),h.apply(this,arguments);var d=this.fire;this.fire=function(){d.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=a.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=a.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=a.create,this._jsPlumb.initiallyInvisible=a.visible===!1,this.getElement=function(){if(null==this._jsPlumb.div){var b=this._jsPlumb.div=jsPlumb.getElement(this._jsPlumb.create(this._jsPlumb.component));b.style.position="absolute",b.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:a.cssClass?a.cssClass:""),this._jsPlumb.instance.appendElement(b),this._jsPlumb.instance.getId(b),this.canvas=b;var c="translate(-50%, -50%)";b.style.webkitTransform=c,b.style.mozTransform=c,b.style.msTransform=c,b.style.oTransform=c,b.style.transform=c,b._jsPlumb=this,a.visible===!1&&(b.style.display="none")}return this._jsPlumb.div},this.draw=function(a,b,d){var e=i(this);if(null!=e&&2==e.length){var f={x:0,y:0};if(d)f={x:d[0],y:d[1]};else if(a.pointOnPath){var g=this.loc,h=!1;(c.isString(this.loc)||this.loc<0||this.loc>1)&&(g=parseInt(this.loc,10),h=!0),f=a.pointOnPath(g,h)}else{var j=this.loc.constructor==Array?this.loc:this.endpointLoc;f={x:j[0]*a.w,y:j[1]*a.h}}var k=f.x-e[0]/2,l=f.y-e[1]/2;return{component:a,d:{minx:k,miny:l,td:e,cxy:f},minX:k,maxX:k+e[0],minY:l,maxY:l+e[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};c.extend(j,[b.jsPlumbUIComponent,h],{getDimensions:function(){return[1,1]},setVisible:function(a){this._jsPlumb.div&&(this._jsPlumb.div.style.display=a?"block":"none",a&&this._jsPlumb.initiallyInvisible&&(i(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(a){a?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(a){null!=this._jsPlumb.div&&a.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var a=i(this);return Math.max(a[0],a[1])},paint:function(a,b){this._jsPlumb.initialised||(this.getElement(),a.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=a.component.x+a.d.minx+"px",this._jsPlumb.div.style.top=a.component.y+a.d.miny+"px"}}),b.Overlays.Custom=function(a){this.type="Custom",j.apply(this,arguments)},c.extend(b.Overlays.Custom,j),b.Overlays.GuideLines=function(){var a=this;a.length=50,a.lineWidth=5,this.type="GuideLines",h.apply(this,arguments),b.jsPlumbUIComponent.apply(this,arguments),this.draw=function(b,c){var e=b.pointAlongPathFrom(a.loc,a.length/2),f=b.pointOnPath(a.loc),g=d.pointOnLine(e,f,a.length),h=d.perpendicularLineTo(e,g,40),i=d.perpendicularLineTo(g,e,20);return{connector:b,head:e,tail:g,headLine:i,tailLine:h,minX:Math.min(e.x,g.x,i[0].x,i[1].x),minY:Math.min(e.y,g.y,i[0].y,i[1].y),maxX:Math.max(e.x,g.x,i[0].x,i[1].x),maxY:Math.max(e.y,g.y,i[0].y,i[1].y)}}},b.Overlays.Label=function(a){this.labelStyle=a.labelStyle;this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var c=b.extend({create:function(){return jsPlumb.createElement("div")}},a);if(b.Overlays.Custom.call(this,c),this.type="Label",this.label=a.label||"",this.labelText=null,this.labelStyle){var d=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",d.style.font=this.labelStyle.font,d.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(d.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var e=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";d.style.border=this.labelStyle.borderWidth+"px solid "+e}this.labelStyle.padding&&(d.style.padding=this.labelStyle.padding)}},c.extend(b.Overlays.Label,b.Overlays.Custom,{cleanup:function(a){a&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(a){this.label=a,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),j.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var a=this.label(this);this.getElement().innerHTML=a.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(a){a.label&&this.setLabel(a.label)}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=function(b){var c=b._mottle;return c||(c=b._mottle=new a.Mottle),c};b.extend(a.jsPlumbInstance.prototype,{getEventManager:function(){return c(this)},on:function(a,b,c){return this.getEventManager().on.apply(this,arguments),this},off:function(a,b,c){return this.getEventManager().off.apply(this,arguments),this}})}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=function(a){this.type="Flowchart",a=a||{},a.stub=null==a.stub?30:a.stub;var c,d,e=b.Connectors.AbstractConnector.apply(this,arguments),f=null==a.midpoint?.5:a.midpoint,g=a.alwaysRespectStubs===!0,h=null,i=null,j=null!=a.cornerRadius?a.cornerRadius:0,k=(a.loopbackRadius||25,function(a){return a<0?-1:0===a?0:1}),l=function(a,b,c,d){if(h!=b||i!=c){var e=null==h?d.sx:h,f=null==i?d.sy:i,g=e==b?"v":"h",j=k(b-e),l=k(c-f);h=b,i=c,a.push([e,f,b,c,g,j,l])}},m=function(a){return Math.sqrt(Math.pow(a[0]-a[2],2)+Math.pow(a[1]-a[3],2))},n=function(a){var b=[];return b.push.apply(b,a),b},o=function(a,b,c){for(var d,f=null,g=0;g<b.length-1;g++){if(f=f||n(b[g]),d=n(b[g+1]),j>0&&f[4]!=d[4]){var h=Math.min(j,m(f),m(d));f[2]-=f[5]*h,f[3]-=f[6]*h,d[0]+=d[5]*h,d[1]+=d[6]*h;var i=f[6]==d[5]&&1==d[5]||f[6]==d[5]&&0===d[5]&&f[5]!=d[6]||f[6]==d[5]&&d[5]==-1,k=d[1]>f[3]?1:-1,l=d[0]>f[2]?1:-1,o=k==l,p=o&&i||!o&&!i?d[0]:f[2],q=o&&i||!o&&!i?f[3]:d[1];e.addSegment(a,"Straight",{x1:f[0],y1:f[1],x2:f[2],y2:f[3]}),e.addSegment(a,"Arc",{r:h,x1:f[2],y1:f[3],x2:d[0],y2:d[1],cx:p,cy:q,ac:i})}else{var r=f[2]==f[0]?0:f[2]>f[0]?c.lw/2:-(c.lw/2),s=f[3]==f[1]?0:f[3]>f[1]?c.lw/2:-(c.lw/2);e.addSegment(a,"Straight",{x1:f[0]-r,y1:f[1]-s,x2:f[2]+r,y2:f[3]+s})}f=d}null!=d&&e.addSegment(a,"Straight",{x1:d[0],y1:d[1],x2:d[2],y2:d[3]})};this._compute=function(a,b){c=[],h=null,i=null,d=null;var j=function(){return[a.startStubX,a.startStubY,a.endStubX,a.endStubY]},k={perpendicular:j,orthogonal:j,opposite:function(b){var c=a,d="x"==b?0:1,e={x:function(){return 1==c.so[d]&&(c.startStubX>c.endStubX&&c.tx>c.startStubX||c.sx>c.endStubX&&c.tx>c.sx)||c.so[d]==-1&&(c.startStubX<c.endStubX&&c.tx<c.startStubX||c.sx<c.endStubX&&c.tx<c.sx)},y:function(){return 1==c.so[d]&&(c.startStubY>c.endStubY&&c.ty>c.startStubY||c.sy>c.endStubY&&c.ty>c.sy)||c.so[d]==-1&&(c.startStubY<c.endStubY&&c.ty<c.startStubY||c.sy<c.endStubY&&c.ty<c.sy)}};return!g&&e[b]()?{x:[(a.sx+a.tx)/2,a.startStubY,(a.sx+a.tx)/2,a.endStubY],y:[a.startStubX,(a.sy+a.ty)/2,a.endStubX,(a.sy+a.ty)/2]}[b]:[a.startStubX,a.startStubY,a.endStubX,a.endStubY]}},m=k[a.anchorOrientation](a.sourceAxis),n="x"==a.sourceAxis?0:1,p="x"==a.sourceAxis?1:0,q=m[n],r=m[p],s=m[n+2],t=m[p+2];l(c,m[0],m[1],a);var u=a.startStubX+(a.endStubX-a.startStubX)*f,v=a.startStubY+(a.endStubY-a.startStubY)*f,w={x:[0,1],y:[1,0]},x={perpendicular:function(b){var c=a,d={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},e={x:[[c.startStubX,c.endStubX],null,[c.endStubX,c.startStubX]],y:[[c.startStubY,c.endStubY],null,[c.endStubY,c.startStubY]]},f={x:[[u,c.startStubY],[u,c.endStubY]],y:[[c.startStubX,v],[c.endStubX,v]]},g={x:[[c.endStubX,c.startStubY]],y:[[c.startStubX,c.endStubY]]},h={x:[[c.startStubX,c.endStubY],[c.endStubX,c.endStubY]],y:[[c.endStubX,c.startStubY],[c.endStubX,c.endStubY]]},i={x:[[c.startStubX,v],[c.endStubX,v],[c.endStubX,c.endStubY]],y:[[u,c.startStubY],[u,c.endStubY],[c.endStubX,c.endStubY]]},j={x:[c.startStubY,c.endStubY],y:[c.startStubX,c.endStubX]},k=w[b][0],l=w[b][1],m=c.so[k]+1,n=c.to[l]+1,o=c.to[l]==-1&&j[b][1]<j[b][0]||1==c.to[l]&&j[b][1]>j[b][0],p=e[b][m][0],q=e[b][m][1],r=d[b][m][n];return c.segment==r[3]||c.segment==r[2]&&o?f[b]:c.segment==r[2]&&q<p?g[b]:c.segment==r[2]&&q>=p||c.segment==r[1]&&!o?i[b]:c.segment==r[0]||c.segment==r[1]&&o?h[b]:void 0},orthogonal:function(b,c,d,e,f){var g=a,h={x:g.so[0]==-1?Math.min(c,e):Math.max(c,e),y:g.so[1]==-1?Math.min(c,e):Math.max(c,e)}[b];return{x:[[h,d],[h,f],[e,f]],y:[[d,h],[f,h],[f,e]]}[b]},opposite:function(c,d,f,g){var h=a,i={x:"y",y:"x"}[c],j={x:"height",y:"width"}[c],k=h["is"+c.toUpperCase()+"GreaterThanStubTimes2"];if(b.sourceEndpoint.elementId==b.targetEndpoint.elementId){var l=f+(1-b.sourceEndpoint.anchor[i])*b.sourceInfo[j]+e.maxStub;return{x:[[d,l],[g,l]],y:[[l,d],[l,g]]}[c]}return!k||1==h.so[n]&&d>g||h.so[n]==-1&&d<g?{x:[[d,v],[g,v]],y:[[u,d],[u,g]]}[c]:1==h.so[n]&&d<g||h.so[n]==-1&&d>g?{x:[[u,h.sy],[u,h.ty]],y:[[h.sx,v],[h.tx,v]]}[c]:void 0}},y=x[a.anchorOrientation](a.sourceAxis,q,r,s,t);if(y)for(var z=0;z<y.length;z++)l(c,y[z][0],y[z][1],a);l(c,m[2],m[3],a),l(c,a.tx,a.ty,a),o(this,c,a)}};c.extend(d,b.Connectors.AbstractConnector),b.registerConnectorType(d,"Flowchart")}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil;b.Connectors.AbstractBezierConnector=function(a){a=a||{};var c,d=a.showLoopback!==!1,e=(a.curviness||10,a.margin||5),f=(a.proximityLimit||80,a.orientation&&"clockwise"===a.orientation),g=a.loopbackRadius||25,h=!1;return this.overrideSetEditable=function(){return!h},this._compute=function(a,b){var i=b.sourcePos,j=b.targetPos,k=Math.abs(i[0]-j[0]),l=Math.abs(i[1]-j[1]);if(d&&b.sourceEndpoint.elementId===b.targetEndpoint.elementId){h=!0;var m=b.sourcePos[0],n=b.sourcePos[1]-e,o=m,p=n-g,q=o-g,r=p-g;k=2*g,l=2*g,a.points[0]=q,a.points[1]=r,a.points[2]=k,a.points[3]=l,c.addSegment(this,"Arc",{loopback:!0,x1:m-q+4,y1:n-r,startAngle:0,endAngle:2*Math.PI,r:g,ac:!f,x2:m-q-4,y2:n-r,cx:o-q,cy:p-r})}else h=!1,this._computeBezier(a,b,i,j,k,l)},c=b.Connectors.AbstractConnector.apply(this,arguments)},c.extend(b.Connectors.AbstractBezierConnector,b.Connectors.AbstractConnector);var d=function(a){a=a||{},this.type="Bezier";var c=b.Connectors.AbstractBezierConnector.apply(this,arguments),d=a.curviness||150,e=10;this.getCurviness=function(){return d},this._findControlPoint=function(a,b,c,f,g,h,i){var j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(0===i[0]?k.push(c[0]<b[0]?a[0]+e:a[0]-e):k.push(a[0]+d*i[0]),0===i[1]?k.push(c[1]<b[1]?a[1]+e:a[1]-e):k.push(a[1]+d*h[1])):(0===h[0]?k.push(b[0]<c[0]?a[0]+e:a[0]-e):k.push(a[0]-d*h[0]),0===h[1]?k.push(b[1]<c[1]?a[1]+e:a[1]-e):k.push(a[1]+d*i[1])),k},this._computeBezier=function(a,b,d,e,f,g){var h,i,j=this.getGeometry(),k=d[0]<e[0]?f:0,l=d[1]<e[1]?g:0,m=d[0]<e[0]?0:f,n=d[1]<e[1]?0:g;(this.hasBeenEdited()||this.isEditing())&&null!=j&&null!=j.controlPoints&&null!=j.controlPoints[0]&&null!=j.controlPoints[1]?(h=j.controlPoints[0],i=j.controlPoints[1]):(h=this._findControlPoint([k,l],d,e,b.sourceEndpoint,b.targetEndpoint,a.so,a.to),i=this._findControlPoint([m,n],e,d,b.targetEndpoint,b.sourceEndpoint,a.to,a.so)),c.setGeometry({controlPoints:[h,i]},!0),c.addSegment(this,"Bezier",{x1:k,y1:l,x2:m,y2:n,cp1x:h[0],cp1y:h[1],cp2x:i[0],cp2y:i[1]})}};c.extend(d,b.Connectors.AbstractBezierConnector),b.registerConnectorType(d,"Bezier")}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=function(a,b,c,d){return a<=c&&d<=b?1:a<=c&&b<=d?2:c<=a&&d>=b?3:4},e=function(a,b,c,d,e,f,g,h,i){return h<=i?[a,b]:1===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:2===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+f,b+-1*g]:3===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:4===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+f,b+-1*g]:void 0},f=function(a){a=a||{},this.type="StateMachine";var c,f=b.Connectors.AbstractBezierConnector.apply(this,arguments),g=a.curviness||10,h=a.margin||5,i=a.proximityLimit||80;a.orientation&&"clockwise"===a.orientation;this._computeBezier=function(a,b,j,k,l,m){var n=b.sourcePos[0]<b.targetPos[0]?0:l,o=b.sourcePos[1]<b.targetPos[1]?0:m,p=b.sourcePos[0]<b.targetPos[0]?l:0,q=b.sourcePos[1]<b.targetPos[1]?m:0;0===b.sourcePos[2]&&(n-=h),1===b.sourcePos[2]&&(n+=h),0===b.sourcePos[3]&&(o-=h),1===b.sourcePos[3]&&(o+=h),0===b.targetPos[2]&&(p-=h),1===b.targetPos[2]&&(p+=h),0===b.targetPos[3]&&(q-=h),1===b.targetPos[3]&&(q+=h);var r,s,t,u,v=(n+p)/2,w=(o+q)/2,x=d(n,o,p,q),y=Math.sqrt(Math.pow(p-n,2)+Math.pow(q-o,2)),z=f.getGeometry();(this.hasBeenEdited()||this.isEditing())&&null!=z?(r=z.controlPoints[0][0],t=z.controlPoints[0][1],s=z.controlPoints[1][0],u=z.controlPoints[1][1]):(c=e(v,w,x,b.sourcePos,b.targetPos,g,g,y,i),r=c[0],s=c[0],t=c[1],u=c[1],f.setGeometry({controlPoints:[c,c]},!0)),f.addSegment(this,"Bezier",{x1:p,y1:q,x2:n,y2:o,cp1x:r,cp1y:t,cp2x:s,cp2y:u})}};c.extend(f,b.Connectors.AbstractBezierConnector),b.registerConnectorType(f,"StateMachine")}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},e="stroke-dasharray",f="dashstyle",g="linearGradient",h="radialGradient",i="defs",j="fill",k="stop",l="stroke",m="stroke-width",n="style",o="none",p="jsplumb_gradient_",q="lineWidth",r={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},s=function(a,b){for(var c in b)a.setAttribute(c,""+b[c])},t=function(a,b){return b=b||{},b.version="1.1",b.xmlns=r.xhtml,jsPlumb.createElementNS(r.svg,a,null,null,b)},u=function(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"},v=function(a){for(var b=a.querySelectorAll(" defs,linearGradient,radialGradient"),c=0;c<b.length;c++)b[c].parentNode.removeChild(b[c])},w=function(a,b,c,d,e){var f=p+e._jsPlumb.instance.idstamp();v(a);var m;m=c.gradient.offset?t(h,{id:f}):t(g,{id:f,gradientUnits:"userSpaceOnUse"});var n=t(i);a.appendChild(n),n.appendChild(m);for(var o=0;o<c.gradient.stops.length;o++){var q=1==e.segment||2==e.segment?o:c.gradient.stops.length-1-o,r=c.gradient.stops[q][1],s=t(k,{offset:Math.floor(100*c.gradient.stops[o][0])+"%","stop-color":r});m.appendChild(s)}var u=c.strokeStyle?l:j;b.setAttribute(u,"url(#"+f+")")},x=function(a,b,c,g,h){if(b.setAttribute(j,c.fillStyle?c.fillStyle:o),b.setAttribute(l,c.strokeStyle?c.strokeStyle:o),c.gradient?w(a,b,c,g,h):(v(a),b.setAttribute(n,"")),c.lineWidth&&b.setAttribute(m,c.lineWidth),c[f]&&c[q]&&!c[e]){var i=c[f].indexOf(",")==-1?" ":",",k=c[f].split(i),p="";k.forEach(function(a){p+=Math.floor(a*c.lineWidth)+i}),b.setAttribute(e,p)}else c[e]&&b.setAttribute(e,c[e]);for(var r in d)c[r]&&b.setAttribute(d[r],c[r])},y=function(a,b,c){a.childNodes.length>c?a.insertBefore(b,a.childNodes[c]):a.appendChild(b)};c.svg={node:t,attr:s,pos:u};var z=function(a){var d=a.pointerEventsSpec||"all",e={};b.jsPlumbUIComponent.apply(this,a.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var f=a.cssClass+" "+(a.originalArgs[0].cssClass||""),g={style:"",width:0,height:0,"pointer-events":d,position:"absolute"};this.svg=t("svg",g),a.useDivWrapper?(this.canvas=jsPlumb.createElement("div",{position:"absolute"}),c.sizeElement(this.canvas,0,0,1,1),this.canvas.className=f):(s(this.svg,{class:f}),this.canvas=this.svg),a._jsPlumb.appendElement(this.canvas,a.originalArgs[0].parent),a.useDivWrapper&&this.canvas.appendChild(this.svg);var h=[this.canvas];return this.getDisplayElements=function(){return h},this.appendDisplayElement=function(a){h.push(a)},this.paint=function(b,d,f){if(null!=b){var g,h=[this.x,this.y],i=[this.w,this.h];null!=f&&(f.xmin<0&&(h[0]+=f.xmin),f.ymin<0&&(h[1]+=f.ymin),i[0]=f.xmax+(f.xmin<0?-f.xmin:0),i[1]=f.ymax+(f.ymin<0?-f.ymin:0)),a.useDivWrapper?(c.sizeElement(this.canvas,h[0],h[1],i[0],i[1]),h[0]=0,h[1]=0,g=u([0,0])):g=u([h[0],h[1]]),e.paint.apply(this,arguments),s(this.svg,{style:g,width:i[0]||0,height:i[1]||0})}},{renderer:e}};c.extend(z,b.jsPlumbUIComponent,{cleanup:function(a){a||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(a){var b=a.getContainer();this.canvas&&null==this.canvas.parentNode&&b.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&b.appendChild(this.bgCanvas)},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none")}}),b.ConnectorRenderers.svg=function(a){var c=this,d=z.apply(this,[{cssClass:a._jsPlumb.connectorClass+(this.isEditable()?" "+a._jsPlumb.editableConnectorClass:""),originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:a._jsPlumb}]),e=this.setEditable;this.setEditable=function(a){var b=e.apply(this,[a]);jsPlumb[b?"addClass":"removeClass"](this.canvas,this._jsPlumb.instance.editableConnectorClass)},d.renderer.paint=function(d,e,f){var g=c.getSegments(),h="",i=[0,0];if(f.xmin<0&&(i[0]=-f.xmin),f.ymin<0&&(i[1]=-f.ymin),g.length>0){for(var j=0;j<g.length;j++)h+=b.Segments.svg.SegmentRenderer.getPath(g[j]),h+=" ";var k={d:h,transform:"translate("+i[0]+","+i[1]+")","pointer-events":a["pointer-events"]||"visibleStroke"},l=null,m=[c.x,c.y,c.w,c.h];if(d.outlineColor){var n=d.outlineWidth||1,o=d.lineWidth+2*n;l=b.extend({},d),delete l.gradient,l.strokeStyle=d.outlineColor,l.lineWidth=o,null==c.bgPath?(c.bgPath=t("path",k),b.addClass(c.bgPath,b.connectorOutlineClass),y(c.svg,c.bgPath,0)):s(c.bgPath,k),x(c.svg,c.bgPath,l,m,c)}null==c.path?(c.path=t("path",k),y(c.svg,c.path,d.outlineColor?1:0)):s(c.path,k),x(c.svg,c.path,d,m,c)}}},c.extend(b.ConnectorRenderers.svg,z),b.Segments.svg={SegmentRenderer:{getPath:function(a){return{Straight:function(){var b=a.getCoordinates();return"M "+b.x1+" "+b.y1+" L "+b.x2+" "+b.y2},Bezier:function(){var b=a.params;return"M "+b.x1+" "+b.y1+" C "+b.cp1x+" "+b.cp1y+" "+b.cp2x+" "+b.cp2y+" "+b.x2+" "+b.y2},Arc:function(){var b=a.params,c=a.sweep>Math.PI?1:0,d=a.anticlockwise?0:1;return"M"+a.x1+" "+a.y1+" A "+a.radius+" "+b.r+" 0 "+c+","+d+" "+a.x2+" "+a.y2}}[a.type]()}}};var A=b.SvgEndpoint=function(a){var c=z.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:a._jsPlumb}]);c.renderer.paint=function(a){var c=b.extend({},a);c.outlineColor&&(c.strokeWidth=c.outlineWidth,c.strokeStyle=c.outlineColor),null==this.node?(this.node=this.makeNode(c),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),x(this.svg,this.node,c,[this.x,this.y,this.w,this.h],this),u(this.node,[this.x,this.y])}.bind(this)};c.extend(A,z),b.Endpoints.svg.Dot=function(){b.Endpoints.Dot.apply(this,arguments),A.apply(this,arguments),this.makeNode=function(a){return t("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(a){s(a,{cx:this.w/2,cy:this.h/2,r:this.radius})}},c.extend(b.Endpoints.svg.Dot,[b.Endpoints.Dot,A]),b.Endpoints.svg.Rectangle=function(){b.Endpoints.Rectangle.apply(this,arguments),A.apply(this,arguments),this.makeNode=function(a){return t("rect",{width:this.w,height:this.h})},this.updateNode=function(a){s(a,{width:this.w,height:this.h})}},c.extend(b.Endpoints.svg.Rectangle,[b.Endpoints.Rectangle,A]),b.Endpoints.svg.Image=b.Endpoints.Image,b.Endpoints.svg.Blank=b.Endpoints.Blank,b.Overlays.svg.Label=b.Overlays.Label,b.Overlays.svg.Custom=b.Overlays.Custom;var B=function(a,c){a.apply(this,c),b.jsPlumbUIComponent.apply(this,c),this.isAppendedAtTopLevel=!1;
this.path=null,this.paint=function(a,b){if(a.component.svg&&b){null==this.path&&(this.path=t("path",{"pointer-events":"all"}),a.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,a.component),this.canvas=a.component.svg);var e=c&&1==c.length?c[0].cssClass||"":"",f=[0,0];b.xmin<0&&(f[0]=-b.xmin),b.ymin<0&&(f[1]=-b.ymin),s(this.path,{d:d(a.d),class:e,stroke:a.strokeStyle?a.strokeStyle:null,fill:a.fillStyle?a.fillStyle:null,transform:"translate("+f[0]+","+f[1]+")"})}};var d=function(a){return isNaN(a.cxy.x)||isNaN(a.cxy.y)?"":"M"+a.hxy.x+","+a.hxy.y+" L"+a.tail[0].x+","+a.tail[0].y+" L"+a.cxy.x+","+a.cxy.y+" L"+a.tail[1].x+","+a.tail[1].y+" L"+a.hxy.x+","+a.hxy.y};this.transfer=function(a){a.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),a.canvas.appendChild(this.path))}};c.extend(B,[b.jsPlumbUIComponent,b.Overlays.AbstractOverlay],{cleanup:function(a){null!=this.path&&(a?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(a){this.path&&this.canvas&&null==this.path.parentNode&&this.canvas.appendChild(this.path)},setVisible:function(a){null!=this.path&&(this.path.style.display=a?"block":"none")}}),b.Overlays.svg.Arrow=function(){B.apply(this,[b.Overlays.Arrow,arguments])},c.extend(b.Overlays.svg.Arrow,[b.Overlays.Arrow,B]),b.Overlays.svg.PlainArrow=function(){B.apply(this,[b.Overlays.PlainArrow,arguments])},c.extend(b.Overlays.svg.PlainArrow,[b.Overlays.PlainArrow,B]),b.Overlays.svg.Diamond=function(){B.apply(this,[b.Overlays.Diamond,arguments])},c.extend(b.Overlays.svg.Diamond,[b.Overlays.Diamond,B]),b.Overlays.svg.GuideLines=function(){var a,c,d=null,e=this;b.Overlays.GuideLines.apply(this,arguments),this.paint=function(b,g){null==d&&(d=t("path"),b.connector.svg.appendChild(d),e.attachListeners(d,b.connector),e.attachListeners(d,e),a=t("path"),b.connector.svg.appendChild(a),e.attachListeners(a,b.connector),e.attachListeners(a,e),c=t("path"),b.connector.svg.appendChild(c),e.attachListeners(c,b.connector),e.attachListeners(c,e));var h=[0,0];g.xmin<0&&(h[0]=-g.xmin),g.ymin<0&&(h[1]=-g.ymin),s(d,{d:f(b.head,b.tail),stroke:"red",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),s(a,{d:f(b.tailLine[0],b.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),s(c,{d:f(b.headLine[0],b.headLine[1]),stroke:"green",fill:null,transform:"translate("+h[0]+","+h[1]+")"})};var f=function(a,b){return"M "+a.x+","+a.y+" L"+b.x+","+b.y}},c.extend(b.Overlays.svg.GuideLines,b.Overlays.GuideLines)}.call(this),function(){"use strict";var a=this,b=a.jsPlumb,c=a.jsPlumbUtil,d=a.Katavorio,e=a.Biltong,f=function(a,b){b=b||"main";var c="_katavorio_"+b,f=a[c],g=a.getEventManager();return f||(f=new d({bind:g.on,unbind:g.off,getSize:jsPlumb.getSize,getPosition:function(b){var c=a.getOffset(b,!1,b._katavorioDrag?b.offsetParent:null);return[c.left,c.top]},setPosition:function(a,b){a.style.left=b[0]+"px",a.style.top=b[1]+"px"},addClass:jsPlumb.addClass,removeClass:jsPlumb.removeClass,intersects:e.intersects,indexOf:function(a,b){return a.indexOf(b)},css:{noSelect:a.dragSelectClass,droppable:"jsplumb-droppable",draggable:"jsplumb-draggable",drag:"jsplumb-drag",selected:"jsplumb-drag-selected",active:"jsplumb-drag-active",hover:"jsplumb-drag-hover"}}),a[c]=f,a.bind("zoom",f.setZoom)),f},g=function(a,b){var d=function(d){if(null!=b[d]){if(c.isString(b[d])){var e=b[d].match(/-=/)?-1:1,f=b[d].substring(2);return a[d]+e*f}return b[d]}return a[d]};return[d("left"),d("top")]};b.extend(a.jsPlumbInstance.prototype,{animationSupported:!0,getElement:function(a){return null==a?null:(a="string"==typeof a?a:null!=a.length&&null==a.enctype?a[0]:a,"string"==typeof a?document.getElementById(a):a)},removeElement:function(a){f(this).elementRemoved(a),this.getEventManager().remove(a)},doAnimate:function(a,b,c){c=c||{};var d=this.getOffset(a),e=g(d,b),f=e[0]-d.left,h=e[1]-d.top,i=c.duration||250,j=15,k=i/j,l=j/i*f,m=j/i*h,n=0,o=setInterval(function(){jsPlumb.setPosition(a,{left:d.left+l*(n+1),top:d.top+m*(n+1)}),null!=c.step&&c.step(n,Math.ceil(k)),n++,n>=k&&(window.clearInterval(o),null!=c.complete&&c.complete())},j)},destroyDraggable:function(a,b){f(this,b).destroyDraggable(a)},destroyDroppable:function(a,b){f(this,b).destroyDroppable(a)},initDraggable:function(a,b,c){f(this,c).draggable(a,b)},initDroppable:function(a,b,c){f(this,c).droppable(a,b)},isAlreadyDraggable:function(a){return null!=a._katavorioDrag},isDragSupported:function(a,b){return!0},isDropSupported:function(a,b){return!0},isElementDraggable:function(a){return a=jsPlumb.getElement(a),a._katavorioDrag&&a._katavorioDrag.isEnabled()},getDragObject:function(a){return a[0].drag.getDragElement()},getDragScope:function(a){return a._katavorioDrag&&a._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(a){return a[0].e},getUIPosition:function(a,b){var c=a[0].el,d={left:a[0].pos[0],top:a[0].pos[1]};if(c._katavorioDrag&&c.offsetParent!==this.getContainer()){var e=this.getOffset(c.offsetParent);d.left+=e.left,d.top+=e.top}return d},setDragFilter:function(a,b,c){a._katavorioDrag&&a._katavorioDrag.setFilter(b,c)},setElementDraggable:function(a,b){a=jsPlumb.getElement(a),a._katavorioDrag&&a._katavorioDrag.setEnabled(b)},setDragScope:function(a,b){a._katavorioDrag&&a._katavorioDrag.k.setDragScope(a,b)},setDropScope:function(a,b){a._katavorioDrop&&a._katavorioDrop.length>0&&a._katavorioDrop[0].k.setDropScope(a,b)},addToPosse:function(a,b){var c=Array.prototype.slice.call(arguments,1),d=f(this);jsPlumb.each(a,function(a){a=[jsPlumb.getElement(a)],a.push.apply(a,c),d.addToPosse.apply(d,a)})},setPosse:function(a,b){var c=Array.prototype.slice.call(arguments,1),d=f(this);jsPlumb.each(a,function(a){a=[jsPlumb.getElement(a)],a.push.apply(a,c),d.setPosse.apply(d,a)})},removeFromPosse:function(a,b){var c=Array.prototype.slice.call(arguments,1),d=f(this);jsPlumb.each(a,function(a){a=[jsPlumb.getElement(a)],a.push.apply(a,c),d.removeFromPosse.apply(d,a)})},removeFromAllPosses:function(a){var b=f(this);jsPlumb.each(a,function(a){b.removeFromAllPosses(jsPlumb.getElement(a))})},setPosseState:function(a,b,c){var d=f(this);jsPlumb.each(a,function(a){d.setPosseState(jsPlumb.getElement(a),b,c)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(a){a._katavorioDrag&&a._katavorioDrag.abort()},addToDragSelection:function(a){f(this).select(a)},removeFromDragSelection:function(a){f(this).deselect(a)},clearDragSelection:function(){f(this).deselectAll()},trigger:function(a,b,c,d){this.getEventManager().trigger(a,b,c,d)},doReset:function(){for(var a in this)0===a.indexOf("_katavorio_")&&this[a].reset()}});var h=function(a){var b=function(){/complete|loaded|interactive/.test(document.readyState)&&"undefined"!=typeof document.body&&null!=document.body?a():setTimeout(b,9)};b()};h(b.init)}.call(this)}(a("3b")),c.exports}),a.registerDynamic("76",["75"],!0,function(a,b,c){this||self;return c.exports=a("75"),c.exports}),a.registerDynamic("77",["76"],!0,function(a,b,c){"format cjs";var d;this||self;return function(b,e){"function"==typeof d&&d.amd?d(["jsplumb"],e):"object"==typeof c&&c.exports?c.exports=e(a("76").jsPlumb):b.Remapper=e(b.jsPlumb)}(this,function(a){function b(a,c){return"string"==typeof c&&(c=b(c)),c=c||document,c.querySelector(a)}function c(a,b){b||(b="Apply mapping"),this.id=a,this._init(b),this.listeners=new Map}return c.prototype.on=function(a,b){this.listeners.has(a)||this.listeners.set(a,new Set),this.listeners.get(a).add(b)},c.prototype.off=function(a,b){this.listeners.get(a).delete(b)},c.prototype.fire=function(a,b){this.listeners.has(a)&&this.listeners.get(a).forEach(function(a){a(b)})},c.prototype._init=function(c){this.jsPlumb=a.getInstance();var d=this;b("#"+d.id).innerHTML||(b("#"+d.id).innerHTML='<div class="remap-froms"></div><div class="remap-tos"></div><div class="centrecontent"></div><div class="buttonholder"><button class="remap-button">'+c+'</button><button class="cancel-remap-button">Cancel</button></div>',b("#"+d.id).style.display="none",b("#"+d.id).classList.add("main-remapper"),b(".remap-button","#"+d.id).addEventListener("click",function(){var a=new Map,c=d.jsPlumb.select();c.each(function(b){var c=b.endpoints[0].element.dataset.categoryId,d=b.endpoints[1].element.dataset.categoryId;a.set(c,d)}),b("#"+d.id).style.display="none",d.fire("apply",{mapping:a})}),b(".cancel-remap-button","#"+d.id).addEventListener("click",function(){b("#"+d.id).style.display="none",d.fire("cancel")})),this._resize=function(){d.jsPlumb.repaintEverything()},window.addEventListener("resize",this._resize)},c.prototype.remove=function(){this.jsPlumb.cleanupListeners(),window.removeEventListener("resize",this._resize),b("#"+this.id).classList.remove("main-remapper"),b("#"+this.id).innerHTML=""},c.prototype.show=function(){b("#"+this.id).style.display="block",this.jsPlumb.repaintEverything()},c.prototype.populateFroms=function(a){var c,d,e=this;for(b("#"+e.id).style.display="block",b(".remap-froms","#"+e.id).innerHTML="",c=0;c<a.length;c++)d="from:"+a[c].id,b(".remap-froms","#"+e.id).innerHTML+='<div id="'+d+'" class="map-from" data-category-id="'+a[c].id+'" >'+a[c].label+"</div>";for(c=0;c<a.length;c++)d="from:"+a[c].id,e.jsPlumb.addEndpoint(d,{container:b("#"+e.id),uuid:d,isSource:!0,isTarget:!1,endpoint:"Rectangle",paintStyle:{fillStyle:a[c].color,outlineColor:"black",outlineWidth:1},anchor:"Right",maxConnections:1,connectorOverlays:[["PlainArrow",{location:.2,paintStyle:{fillStyle:a[c].color,outlineColor:"black",outlineWidth:1},width:15,length:15}]]});b("#"+e.id).style.display="none",e.jsPlumb.bind("click",function(a){e.jsPlumb.detach(a)})},c.prototype.populateTos=function(a){var c,d;for(b(".remap-tos","#"+this.id).innerHTML="",c=0;c<a.length;c++)d="to:"+a[c].id,b(".remap-tos","#"+this.id).innerHTML+='<div id="'+d+'" class="map-to" data-category-id="'+a[c].id+'" > '+a[c].label+" </div>";for(c=0;c<a.length;c++)d="to:"+a[c].id,this.jsPlumb.addEndpoint(d,{uuid:d,isSource:!1,isTarget:!0,endpoint:"Dot",paintStyle:{fillStyle:a[c].color,outlineColor:"black",outlineWidth:1},anchor:"Left",maxConnections:-1})},c.prototype.linkCategories=function(a){var b=this;a.forEach(function(a,c){b.jsPlumb.connect({uuids:["from:"+c,"to:"+a]})})},c}),c.exports}),a.registerDynamic("78",["77"],!0,function(a,b,c){this||self;return c.exports=a("77"),c.exports}),a.registerDynamic("79",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),a.register("7a",["55","6e"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.loadJSON}],execute:function(){d=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.label="Category Remapping Definition in JSON-LD",this.shortLabel="CatRemap",this.mediaTypes=['application/ld+json;profile="http://purl.org/voc/cpm_catremap"']}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"doLoad",value:function(a){return c(a,this.mediaTypes)}},{key:"getMetadata",value:function(a){return{format:this.label,content:"1 Mapping"}}}]),b}(b),a("default",d)}}}),a.register("7b",["54","73","78","79","5d","6f","6e","6d","6b","7a"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){b=a.$,c=a.$$,d=a.HTML},function(a){e=a.default},function(a){f=a.default},function(a){},function(a){g=a.withCategories},function(a){h=a.COVJSON_GRID},function(a){i=a.i18n},function(a){j=a.default,k=a.VIEW,l=a.PROCESS},function(a){m=a.default},function(a){n=a.default}],execute:function(){o='\n<div class="modal fade" id="parameterSelectModal" tabindex="-1" role="dialog" aria-labelledby="paramSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="paramSelectModalLabel">Select a categorical parameter</h4>\n      </div>\n      <div class="modal-body">\n        <span class="remap-is-remapping"></span>\n      \n        <div class="panel panel-primary parameter-select">\n          <div class="panel-body">\n            <p>\n              Which of the following categorical parameters do you like to remap?\n            </p>\n          </div>\n          <ul class="list-group parameter-list"></ul>\n        </div>\n       \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="remapModal" tabindex="-1" role="dialog" aria-labelledby="remapModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="remapModalLabel">Remap <strong class="parameter-label"></strong> Categories</h4>\n      </div>\n      <div class="modal-body">\n        <span class="remap-is-remapping"></span>\n        \n        <div class="panel panel-primary remap-remapping-distributions">\n          <div class="panel-heading">\n            <h4>Option A: Apply ready-made remapping definitions</h4>\n          </div>\n          <div class="panel-body">\n            <p>\n              Using a ready-made remapping definition is the fastest way to apply a remapping.\n              The remapping definition defines both the target categories and their mapping\n              from the source categories.\n            </p>\n            <div class="alert alert-info remapping-distribution-list-empty" role="alert"><strong>None found.</strong></div>\n          </div>\n          <ul class="list-group remapping-distribution-list"></ul>\n        </div>\n        \n        <div class="panel panel-primary remap-categorical-distributions">\n          <div class="panel-heading">\n            <h4>Option B: Remap manually with categories from existing datasets</h4>\n          </div>\n          <div class="panel-body">\n            <p>\n              A manual remapping can be done more quickly by loading the desired\n              target categories from an existing dataset. The connections then have\n              to be created manually via drag and drop.\n            </p>\n            <div class="alert alert-info categorical-distribution-list-empty" role="alert"><strong>None found.</strong></div>\n          </div>\n          \n          <ul class="list-group categorical-distribution-list"></ul>\n        </div>\n        \n        <div class="panel panel-default remap-manual">\n          <div class="panel-heading">\n            <h4>Option C: Fully manual remapping</h4>\n          </div>\n          <div class="panel-body">\n            <p>\n              When the above methods cannot be used then the only option left is\n              to manually create the target categories and connect\n              them to the source categories. NOTE: This is currently not supported.\n            </p>\n          </div>\n        </div>\n       \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="remapper"></div>\n<style>\n/* above sidebar */\n.modal, #remapper {\n  z-index: 3000; \n}\n.modal-backdrop {\n  z-index: 2500;\n}\n.categorical-distribution-list-empty, .remapping-distribution-list-empty {\n  margin-bottom: 0;\n}\n.workspace-dataset-distribution-action .btn {\n  margin-bottom: 5px;\n}\n</style>\n',b("body").add(d(o)),p={"is-remapping":'\n  <div class="panel panel-primary">\n    <div class="panel-body">\n      <p>This coverage data is the result of a category remapping operation.</p>\n      <button type="button" class="btn btn-primary btn-modify-remapping" data-dismiss="modal">Modify Remapping</button>\n    </div>\n  </div>\n  ',"parameter-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading parameter-label"></h4>\n    <p>Categories: <span class="parameter-categories"></span></p>\n\n    <button type="button" class="btn btn-primary parameter-select-button" data-dismiss="modal">\n      Select\n    </button>\n  </li>\n  ',"categorical-distribution-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p>Distribution: <span class="distribution-title"></span></p>\n    <span class="distribution-parameters"></span>\n  </li>\n  ',"categorical-parameter-item":'\n  <span>\n    <p>Target: <span class="parameter-label"></span></p>\n    <p>Categories: <span class="parameter-categories"></span></p>\n  \n    <button type="button" class="btn btn-primary remapping-button" data-dismiss="modal">\n      Use Categories\n    </button>\n  </span>\n  ',"remapping-distribution-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p>Distribution: <span class="distribution-title"></span></p>\n    <p>Target: <span class="target-observedProperty-label"></span></p>\n    <p>Categories: <span class="target-categories"></span></p>\n    \n    <button type="button" class="btn btn-primary remapping-button" data-dismiss="modal">\n      Apply\n    </button>\n  </li>\n  '},q=function(a){function j(a,b){babelHelpers.classCallCheck(this,j),babelHelpers.get(Object.getPrototypeOf(j.prototype),"constructor",this).call(this,b),this._isSingleCoverage(a)?this.cov=this._getSingleCoverage(a):this.cov=a,this.label="Remap Categories",this.icon='<span class="glyphicon glyphicon-random"></span>'}return babelHelpers.inherits(j,a),babelHelpers.createClass(j,[{key:"_isSingleCoverage",value:function(a){try{return this._getSingleCoverage(a),!0}catch(a){return!1}}},{key:"_getSingleCoverage",value:function(a){if(a.coverages){if(1===a.coverages.length)return a.coverages[0];throw new Error("not a single coverage")}return a}},{key:"_getCategoricalParams",value:function(){var a=[].concat(babelHelpers.toConsumableArray(this.cov.parameters.values()));return a.filter(function(a){return a.observedProperty.categories})}},{key:"run",value:function(){var a=this._getCategoricalParams();a.length>1?this._selectParameterModal():this._remapModal(a[0])}},{key:"_selectParameterModal",value:function(){var a=this,c=b("#parameterSelectModal");this._showModifyRemappingSection(c),b(".parameter-list",c).fill();var f=!0,g=!1,h=void 0;try{for(var j,k=function(){var e=j.value,f=b(d(p["parameter-item"]));b(".parameter-label",f).fill(i(e.observedProperty.label));var g=e.observedProperty.categories,h=g.map(function(a){return i(a.label)}).join(", ");b(".parameter-categories",f).fill(h),b(".parameter-select-button",f).on("|click",function(){setTimeout(function(){return a._remapModal(e,200)})}),b(".parameter-list",c).add(f)},l=this._getCategoricalParams()[Symbol.iterator]();!(f=(j=l.next()).done);f=!0)k()}catch(a){g=!0,h=a}finally{try{!f&&l.return&&l.return()}finally{if(g)throw h}}new e(c[0]).open()}},{key:"_modifyRemappingUI",value:function(){var a=this,b=this.cov.transformations[this.cov.transformations.length-1],c=b.source,d=b.operation.parameter,e=b.operation.categoryRemappingDefinition,f=!1;this._createVirtualRemappedDataset(c,d,e,f,function(){a.context.workspace.removeDataset(a.context.dataset)})}},{key:"_showModifyRemappingSection",value:function(a){var c=this;this._isRemapped()?(b(".remap-is-remapping",a).fill(d(p["is-remapping"])),b(".btn-modify-remapping",a).on("click|",function(){return c._modifyRemappingUI()})):b(".remap-is-remapping",a).fill()}},{key:"_getCategoryMappingDefinition",value:function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=function(){var a=g.value,d=b.categories.some(function(b){return b.id===a.id});d&&c.push({sourceCategory:a.id,destinationCategory:a.id})},j=a.categories[Symbol.iterator]();!(d=(g=j.next()).done);d=!0)h()}catch(a){e=!0,f=a}finally{try{!d&&j.return&&j.return()}finally{if(e)throw f}}var k={type:"CategoryRemappingDefinition",label:{en:i(a.label)+" / "+i(b.label)+" Mapping"},sourceObservedProperty:a,destinationObservedProperty:b,categoryMappings:c};return k}},{key:"_remapModal",value:function(a){var f=this,g=b("#remapModal");b(".parameter-label",g).fill(i(a.observedProperty.label)),this._showModifyRemappingSection(g);var h=this._findCategoryDistributions(),j=this._findRemappingDistributions(a);b(".categorical-distribution-list",g).fill();var k=!0,l=!1,m=void 0;try{for(var n,o=h[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var q=n.value,r=q.distribution,s=q.dataset,t=b(d(p["categorical-distribution-item"]));b(".dataset-title",t).fill(i(s.title)),b(".distribution-title",t).fill(i(r.title));var u=r.data,v=void 0,w=!0,x=!1,y=void 0;try{for(var z,A=function(){var c=z.value;if(c.observedProperty.categories){var e=b(d(p["categorical-parameter-item"]));v=c.observedProperty.categories;var g=v.map(function(a){return i(a.label)}).join(", ");b(".parameter-categories",e).fill(g),b(".parameter-label",e).fill(i(c.observedProperty.label)),b(".distribution-parameters",t).add(e),b(".remapping-button",e).on("|click",function(){var b=f._getCategoryMappingDefinition(a.observedProperty,c.observedProperty);f._createVirtualRemappedDataset(f.cov,a,b,!0)})}},B=u.parameters.values()[Symbol.iterator]();!(w=(z=B.next()).done);w=!0)A()}catch(a){x=!0,y=a}finally{try{!w&&B.return&&B.return()}finally{if(x)throw y}}b(".categorical-distribution-list",g).add(t)}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}b(".remapping-distribution-list",g).fill();var C=!0,D=!1,E=void 0;try{for(var F,G=function(){var c=F.value,e=c.distribution,h=c.dataset,j=b(d(p["remapping-distribution-item"])),k=e.data;b(".dataset-title",j).fill(i(h.title)),b(".distribution-title",j).fill(i(e.title)),b(".target-observedProperty-label",j).fill(i(k.destinationObservedProperty.label));var l=k.destinationObservedProperty.categories,m=l.map(function(a){return i(a.label)}).join(", ");b(".target-categories",j).fill(m),b(".remapping-button",j).on("|click",function(){f._createVirtualRemappedDataset(f.cov,a,k,!0)}),b(".remapping-distribution-list",g).add(j)},H=j[Symbol.iterator]();!(C=(F=H.next()).done);C=!0)G()}catch(a){D=!0,E=a}finally{try{!C&&H.return&&H.return()}finally{if(D)throw E}}c(".categorical-distribution-list-empty",g).style.display=h.length>0?"none":"block",c(".remapping-distribution-list-empty",g).style.display=j.length>0?"none":"block",new e(g[0]).open()}},{key:"_createVirtualRemappedDataset",value:function(a,b,c,d,e){var f=this,h=b,j=c.destinationObservedProperty,l=new Map(c.categoryMappings.map(function(a){return[a.sourceCategory,a.destinationCategory]})),m=d?" [remapped to: "+i(j.label)+"]":"";this._showRemapper(h.observedProperty,j,l,function(b){var d=b.mapping,l=g(a,h.key,j,d),n=JSON.parse(JSON.stringify(c));n.categoryMappings=[];var o=!0,p=!1,q=void 0;try{for(var r,s=d[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var t=babelHelpers.slicedToArray(r.value,2),u=t[0],v=t[1];n.categoryMappings.push({sourceCategory:u,destinationCategory:v})}}catch(a){p=!0,q=a}finally{try{!o&&s.return&&s.return()}finally{if(p)throw q}}l.transformations||(l.transformations=[]),l.transformations.push({source:a,operation:{type:"CategoryRemappingOperation",parameter:h,categoryRemappingDefinition:n}});var w={title:{en:i(f.context.dataset.title)+m},virtual:!0,distributions:[{title:{en:i(f.context.distribution.title)+m},mediaType:"coveragedata",data:l}]},x=f.context.workspace,y=function a(b){var c=b.dataset;c===w&&(c.distributions[0].actions.find(function(a){return a.type===k}).run(),x.off("distributionsLoad",a))};x.on("distributionsLoad",y),x.addDataset(w,f.context.dataset),x.requestFocus(w),e&&e()})}},{key:"_showRemapper",value:function(a,b,c,d){var e=new f("remapper"),g=a.categories.map(function(a){var b=a.preferredColor||"grey";return{id:a.id,label:i(a.label),color:b}}),h=b.categories.map(function(a){var b=a.preferredColor||"grey";return{id:a.id,label:i(a.label),color:b}});e.populateFroms(g),e.populateTos(h),c&&setTimeout(function(){return e.linkCategories(c)},100),e.on("apply",function(a){e.remove(),d(a)}),e.show()}},{key:"_findCategoryDistributions",value:function(){return this.context.workspace.filterDistributions(function(a){if(a.formatImpl instanceof m){var b=a.data;if(b.parameters){var c=!0,d=!1,e=void 0;try{for(var f,g=b.parameters.values()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(h.observedProperty.categories)return!0}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}}})}},{key:"_findRemappingDistributions",value:function(a){var b=new Set(a.observedProperty.categories.map(function(a){return a.id}));return this.context.workspace.filterDistributions(function(a){return a.formatImpl instanceof n&&a.data.categoryMappings.some(function(a){return b.has(a.sourceCategory)})})}},{key:"_isRemapped",value:function(){if(!this.cov.transformations)return!1;var a=this.cov.transformations[this.cov.transformations.length-1];return"CategoryRemappingOperation"===a.operation.type}},{key:"isSupported",get:function(){return!!(this._isSingleCoverage(this.cov)&&this.cov.domainType===h&&this._getCategoricalParams().length>0)}}]),j}(j),a("default",q),q.type=l}}}),a.register("7c",["54","73","6e","5d","6f","6d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){b=a.$,c=a.$$,d=a.HTML},function(a){e=a.default},function(a){f=a.i18n},function(a){g=a.iterateRange,h=a.getReferenceObject},function(a){i=a.COVJSON_GRID},function(a){j=a.default,k=a.PROCESS}],execute:function(){l='\n<div class="modal fade" id="statisticsOptionsModal" tabindex="-1" role="dialog" aria-labelledby="statisticsOptionsModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="statisticsOptionsModalLabel">Select reference periods</h4>\n      </div>\n      <div class="modal-body">\n        \n        <div class="panel panel-primary">\n          <div class="panel-body">\n            <p>\n              Select the reference periods for which the summary statistics shall be calculated.\n              The more periods you select, the longer the processing time will be.\n            </p>\n              \n            <select multiple class="form-control ref-periods-select">\n            </select>\n            \n            <div class="calculate-button-container"></div>\n          </div>\n          \n       \n        </div>\n       \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="statisticsProgressModal" tabindex="-1" role="dialog" aria-labelledby="statisticsProgressModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title" id="statisticsProgressModalLabel">Progress</h4>\n      </div>\n      <div class="modal-body">\n        \n        <div class="panel panel-primary">\n          <div class="panel-body">\n            <p>\n              Please wait until the operation is finished.\n            </p>\n            <progress max="1" value="0"></progress>\n          </div>\n        </div>\n       \n      </div>\n    </div>\n  </div>\n</div>\n\n<style>\n.calculate-button-container {\n  margin-top: 20px;\n}\n#statisticsProgressModal progress {\n  width: 100%;\n}\n</style>\n',b("body").add(d(l)),m={"calculate-button":'<button type="button" class="btn btn-primary calculate-button" data-dismiss="modal">Calculate</button>'},n=function(a){function j(a,b){babelHelpers.classCallCheck(this,j),babelHelpers.get(Object.getPrototypeOf(j.prototype),"constructor",this).call(this,b),this._isSingleCoverage(a)?this.cov=this._getSingleCoverage(a):this.cov=a,this.label="Statistics",this.icon='<span class="glyphicon glyphicon-stats"></span>'}return babelHelpers.inherits(j,a),babelHelpers.createClass(j,[{key:"_getCategoricalParams",value:function(){var a=[].concat(babelHelpers.toConsumableArray(this.cov.parameters.values()));return a.filter(function(a){return a.observedProperty.categories})}},{key:"_isSingleCoverage",value:function(a){try{return this._getSingleCoverage(a),!0}catch(a){return!1}}},{key:"_getSingleCoverage",value:function(a){if(a.coverages){if(1===a.coverages.length)return a.coverages[0];throw new Error("not a single coverage")}return a}},{key:"run",value:function(){var a=this,b=this._getCategoricalParams()[0];this.cov.loadDomain().then(function(c){c.axes.has("t")?1===c.axes.get("t").values.length?a._createStats(a.cov,b,c,[0]):a._refPeriodsModal(a.cov,b,c):a._createStats(a.cov,b,c)})}},{key:"_refPeriodsModal",value:function(a,f,g){var h=this,i=b("#statisticsOptionsModal");b(".calculate-button-container",i).fill(d(m["calculate-button"])),b(".ref-periods-select",i).fill();for(var j=g.axes.get("t"),k=0;k<j.values.length;k++){var l=void 0;l=j.bounds?j.bounds[k][0]+" - "+j.bounds[k][1]:j.values[k],b(".ref-periods-select",i).add(d('<option value="'+k+'">'+l+"</option>"))}b(".calculate-button",i).on("|click",function(){for(var b=[],d=c(".ref-periods-select",i).options,e=0;e<d.length;e++)d[e].selected&&b.push(parseInt(d[e].value));return 0===b.length?(alert("Please select at least one reference period"),!1):void h._createStats(a,f,g,b)}),new e(i[0]).open()}},{key:"_createStats",value:function(a,d,i,j){var k=this,l=b("#statisticsProgressModal");c("progress",l).value=0;var m=new e(l[0]);m.open(),j||(j=[null]);var n=j.length,o=0,p=function(){o++,c("progress",l).value=o/n},q=function(a){var b=new Map,c=!0,e=!1,f=void 0;try{for(var h,i=d.categoryEncoding.values()[Symbol.iterator]();!(c=(h=i.next()).done);c=!0){var j=h.value,k=!0,l=!1,m=void 0;try{for(var n,o=j[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=n.value;b.set(p,0)}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}}}catch(a){e=!0,f=a}finally{try{!c&&i.return&&i.return()}finally{if(e)throw f}}g(a,function(a){null!==a&&b.set(a,b.get(a)+1)});var q=[],r=!0,s=!1,t=void 0;try{for(var u,v=d.observedProperty.categories[Symbol.iterator]();!(r=(u=v.next()).done);r=!0){var w=u.value;if(d.categoryEncoding.has(w.id)){var x=d.categoryEncoding.get(w.id).map(function(a){return b.get(a)}).reduce(function(a,b){return a+b});q.push([w,x])}else q.push([w,0])}}catch(a){s=!0,t=a}finally{try{!r&&v.return&&v.return()}finally{if(s)throw t}}var y=q.map(function(a){return a[1]}).reduce(function(a,b){return a+b}),z=q.map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return[c,d/y]});return z},r=function b(c,e){return a.subsetByIndex({t:j[e]}).then(function(a){return a.loadDomain().then(function(f){return a.loadRange(d.key).then(function(a){p();var d=q(a);return c.push({t:f.axes.get("t"),ratios:d}),e+1<n?b(c,e+1):c})})})},s=function(a){var b={values:a.map(function(a){return a.t.values[0]})};a[0].t.bounds&&(b.bounds=a.map(function(a){return a.t.bounds[0]}));var c={},e={},g=function(a){return f(a.label).replace(/ /g,"_")},j=!0,k=!1,l=void 0;try{for(var m,n=d.observedProperty.categories[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value,p=g(o);c[p]={type:"Parameter",observedProperty:{label:{en:f(o.label)+" Ratio"},statisticalMeasure:"http://www.uncertml.org/statistics/discrete-probability",statisticalCategories:[o]}},e[p]={type:"Range",dataType:"float",values:[]}}
}catch(a){k=!0,l=a}finally{try{!j&&n.return&&n.return()}finally{if(k)throw l}}var q=!0,r=!1,s=void 0;try{for(var t,u=a[Symbol.iterator]();!(q=(t=u.next()).done);q=!0){var v=t.value.ratios,w=!0,x=!1,y=void 0;try{for(var z,A=v[Symbol.iterator]();!(w=(z=A.next()).done);w=!0){var B=babelHelpers.slicedToArray(z.value,2),o=B[0],C=B[1];e[g(o)].values.push(C)}}catch(a){x=!0,y=a}finally{try{!w&&A.return&&A.return()}finally{if(x)throw y}}}}catch(a){r=!0,s=a}finally{try{!q&&u.return&&u.return()}finally{if(r)throw s}}return{type:"Coverage",domain:{type:"Domain",axes:{t:b},referencing:[h(i,"t")]},parameters:c,ranges:e}};r([],0).then(function(a){var b=JSON.stringify(s(a),null,2),c=URL.createObjectURL(new Blob([b],{type:"application/prs.coverage+json"})),d="Statistics of ",e={title:{en:d+f(k.context.dataset.title)},virtual:!0,distributions:[{title:{en:d+f(k.context.dataset.title)},mediaType:"application/prs.coverage+json",url:c}]},g=k.context.workspace;g.addDataset(e,k.context.dataset),g.requestFocus(e),m.close()})}},{key:"isSupported",get:function(){return!!(this._isSingleCoverage(this.cov)&&this.cov.domainType===i&&this._getCategoricalParams().length>0)}}]),j}(j),a("default",n),n.type=k}}}),a.register("7d",["55","6e"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.loadJSON}],execute:function(){d=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.label="GeoJSON",this.shortLabel=this.label,this.mediaTypes=["application/vnd.geo+json"]}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"doLoad",value:function(a){return c(a,this.mediaTypes)}},{key:"getMetadata",value:function(a){return{format:this.label,content:a.type}}}]),b}(b),a("default",d)}}}),a.register("7e",["54","73","4a","5d","6f","6e","7d","6d"],function(a){"use strict";function b(a){var b=[];switch(a.type){case"Polygon":case"MultiPolygon":b.push({type:"Feature",geometry:a});break;case"Feature":switch(a.geometry.type){case"Polygon":case"MultiPolygon":b.push(a)}break;case"FeatureCollection":var c=!0,d=!1,e=void 0;try{for(var f,g=a.features[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;switch(h.geometry.type){case"Polygon":case"MultiPolygon":b.push(h)}}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}return b}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){c=a.$,d=a.$$,e=a.HTML},function(a){f=a.default},function(a){g=a.default},function(a){h=a.maskByPolygon,i=a.subsetByBbox},function(a){j=a.COVJSON_GRID},function(a){k=a.i18n},function(a){l=a.default},function(a){m=a.default,n=a.PROCESS}],execute:function(){o='\n<div class="modal fade" id="geojsonSelectModal" tabindex="-1" role="dialog" aria-labelledby="geojsonSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="geojsonSelectModalLabel">Select a GeoJSON resource</h4>\n      </div>\n      <div class="modal-body">\n        <div class="panel panel-primary remap-remapping-distributions">\n          <div class="panel-heading">\n            <h4>Select the GeoJSON resource containing the subsetting polygon</h4>\n          </div>\n          <div class="panel-body">\n            <p>\n              Only those GeoJSON resources are shown which contain at least one (multi)polygon.\n              After selecting a GeoJSON resource, all polygons will be displayed on the map\n              and you can pick the one that should be used for subsetting.\n            </p>\n            <div class="alert alert-info geojson-distribution-list-empty" role="alert"><strong>None found.</strong></div>\n          </div>\n          <ul class="list-group geojson-distribution-list"></ul>\n        </div>\n               \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n',c("body").add(e(o)),p={"geojson-distribution-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p>Distribution: <span class="distribution-title"></span></p>\n    <p>Polygons: <span class="polygon-count"></span></p>\n    \n    <button type="button" class="btn btn-primary select-button" data-dismiss="modal">\n      Select\n    </button>\n  </li>\n  '},q=function(a){function m(a,b){babelHelpers.classCallCheck(this,m),babelHelpers.get(Object.getPrototypeOf(m.prototype),"constructor",this).call(this,b),this._isSingleCoverage(a)?this.cov=this._getSingleCoverage(a):this.cov=a,this.label="Polygon Subset",this.icon='<span class="glyphicon glyphicon-scissors"></span>'}return babelHelpers.inherits(m,a),babelHelpers.createClass(m,[{key:"_isSingleCoverage",value:function(a){try{return this._getSingleCoverage(a),!0}catch(a){return!1}}},{key:"_getSingleCoverage",value:function(a){if(a.coverages){if(1===a.coverages.length)return a.coverages[0];throw new Error("not a single coverage")}return a}},{key:"run",value:function(){var a=this,g=c("#geojsonSelectModal"),h=this._findGeoJSONDistributions();c(".geojson-distribution-list",g).fill();var i=!0,j=!1,l=void 0;try{for(var m,n=function(){var d=m.value,f=d.distribution,h=d.dataset,i=c(e(p["geojson-distribution-item"]));c(".dataset-title",i).fill(k(h.title)),c(".distribution-title",i).fill(k(f.title));var j=b(f.data).length;c(".polygon-count",i).fill(j),c(".select-button",i).on("|click",function(){a._displayPolygons(f)}),c(".geojson-distribution-list",g).add(i)},o=h[Symbol.iterator]();!(i=(m=o.next()).done);i=!0)n()}catch(a){j=!0,l=a}finally{try{!i&&o.return&&o.return()}finally{if(j)throw l}}d(".geojson-distribution-list-empty",g).style.display=h.length>0?"none":"block",new f(g[0]).open()}},{key:"_displayPolygons",value:function(a){var c=this,d={type:"FeatureCollection",features:b(a.data)},e=this.context.map,f="#CC2222",h={color:f,weight:2,opacity:.6,fillOpacity:0,fillColor:f},i={color:f,weight:3,opacity:.6,fillOpacity:.65,fillColor:f},j=function(a){a.target.setStyle(i)},k=function(a){a.target.setStyle(h)},l=g.geoJson(d,{onEachFeature:function(a,b){b.setStyle(h),b.on("mouseover",j),b.on("mouseout",k),b.on("click",function(){c._applySubsetAndCreateVirtualDataset(a),e.removeLayer(l)})}}).addTo(e);e.fitBounds(l.getBounds())}},{key:"_applySubsetAndCreateVirtualDataset",value:function(a){var b=this,c=" [subsetted by polygon]";this.fire("loading");var d=g.geoJson(a).getBounds();i(this.cov,[d.getWest(),d.getSouth(),d.getEast(),d.getNorth()]).then(function(d){h(d,a.geometry).then(function(a){var d={title:{en:k(b.context.dataset.title)+c},virtual:!0,distributions:[{title:{en:k(b.context.distribution.title)+c},mediaType:"coveragedata",data:a}]},e=b.context.workspace;e.addDataset(d,b.context.dataset),e.requestFocus(d),b.fire("load")})})}},{key:"_findGeoJSONDistributions",value:function(){return this.context.workspace.filterDistributions(function(a){return a.formatImpl instanceof l&&b(a.data).length>0})}},{key:"isSupported",get:function(){return!(!this._isSingleCoverage(this.cov)||this.cov.domainType!==j)}}]),m}(m),a("default",q),q.type=n}}}),a.register("7f",["80","4a","5d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.inject,c=a.fromTemplate,d=a.$$,e=a.$},function(a){f=a.default},function(a){g=a.getLanguageTag,h=a.getLanguageString,i=a.stringifyUnit}],execute:function(){j="template-coverage-parameter-continuous-legend",k='<template id="'+j+'">\n  <div class="leaflet-coverage-control legend continuous-legend">\n    <div style="margin-bottom:3px" class="legend-title-container">\n      <strong class="legend-title"></strong>\n    </div>\n    <div style="display: inline-block; height: 144px; float:left">\n      <span style="height: 136px; width: 18px; display: block; margin-top: 9px;" class="legend-palette"></span>\n    </div>\n    <div style="display: inline-block; float:left; height:153px">\n      <table style="height: 100%;">\n        <tr><td style="vertical-align:top"><span class="legend-max"></span> <span class="legend-uom"></span></td></tr>\n        <tr><td><span class="legend-current"></span></td></tr>\n        <tr><td style="vertical-align:bottom"><span class="legend-min"></span> <span class="legend-uom"></span></td></tr>\n      </table>\n    </div>\n  </div>\n</template>',l=function(a){function f(a){var c=this,d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,f),babelHelpers.get(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,{position:d.position||"bottomright"}),this._covLayer=a,this._id=d.id||j,this._language=d.language,d.id||null!==document.getElementById(j)||b(k),a.on&&(this._remove=function(){return c.remove()},this._update=function(){return c._doUpdate(!1)},a.on("remove",this._remove))}return babelHelpers.inherits(f,a),babelHelpers.createClass(f,[{key:"update",value:function(){this._doUpdate(!0)}},{key:"_doUpdate",value:function(a){var b=this,c=this._el;a&&!function(){var a=b._covLayer.parameter,f=g(a.observedProperty.label,b._language),j=h(a.observedProperty.label,f),k=i(a.unit,f);d(".legend-title",c).innerHTML=j,e(".legend-uom",c).forEach(function(a){return a.innerHTML=k})}();var f=this._covLayer.palette,j=babelHelpers.slicedToArray(this._covLayer.paletteExtent,2),k=j[0],l=j[1];d(".legend-min",c).innerHTML=k.toFixed(2),d(".legend-max",c).innerHTML=l.toFixed(2);for(var m="",n=0;n<f.steps;n++)n>0&&(m+=","),m+="rgb("+f.red[n]+","+f.green[n]+","+f.blue[n]+")";d(".legend-palette",c).style.background="transparent linear-gradient(to top, "+m+") repeat scroll 0% 0%"}},{key:"onAdd",value:function(a){return this._map=a,this._covLayer.on&&(this._covLayer.on("paletteChange",this._update),this._covLayer.on("paletteExtentChange",this._update)),this._el=c(this._id),this.update(),this._el}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update),this._covLayer.off("paletteExtentChange",this._update))}}]),f}(f.Control),a("default",l)}}}),a.register("81",["82","7f"],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return b.position=b.position||"bottomright",a.parameter.observedProperty.categories?new c(a,b):new d(a,b)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),a.register("82",["80","4a","5d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.inject,c=a.fromTemplate,d=a.$$},function(a){e=a.default},function(a){f=a.getLanguageTag,g=a.getLanguageString}],execute:function(){h="template-coverage-parameter-discrete-legend",i='<template id="'+h+'">\n  <div class="leaflet-coverage-control legend discrete-legend">\n    <div class="legend-title-container"><strong class="legend-title"></strong></div>\n    <div class="legend-palette discrete-legend-palette"></div>\n  </div>\n</template>',j=function(a){function e(a){var c=this,d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,{position:d.position||"bottomright"}),this._covLayer=a,this._id=d.id||h,this._language=d.language,d.id||null!==document.getElementById(h)||b(i),a.on&&(this._remove=function(){return c.remove()},this._update=function(){return c._doUpdate(!1)},a.on("remove",this._remove))}return babelHelpers.inherits(e,a),babelHelpers.createClass(e,[{key:"update",value:function(){this._doUpdate(!0)}},{key:"_doUpdate",value:function(a){var b=this._el;if(a){var c=this._covLayer.parameter;this._language=f(c.observedProperty.label,this._language);var e=g(c.observedProperty.label,this._language);d(".legend-title",b).innerHTML=e}for(var h=this._covLayer.palette,i=this._covLayer.parameter,j="",k=0;k<h.steps;k++){var l=g(i.observedProperty.categories[k].label,this._language);j+='\n        <i style="background:rgb('+h.red[k]+", "+h.green[k]+", "+h.blue[k]+')"></i>\n        '+l+"\n        <br>"}d(".legend-palette",b).innerHTML=j}},{key:"onAdd",value:function(a){return this._map=a,this._covLayer.on&&this._covLayer.on("paletteChange",this._update),this._el=c(this._id),this.update(),this._el}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update))}}]),e}(e.Control),a("default",j)}}}),a.register("83",["80","84","4a"],function(a){"use strict";function b(a){var b=parseInt(a.substr(0,4)),c=parseInt(a.substr(5,2)),d=parseInt(a.substr(8,2));return Date.UTC(b,c-1,d)}function c(a){var b=new Date(a).toISOString(),c=b.substr(0,10);return c}var d,e,f,g,h,i;return{setters:[function(a){d=a.$$,e=a.HTML},function(a){f=a.default},function(a){g=a.default}],execute:function(){h='<div class="leaflet-coverage-control form-inline" style="clear:none">\n  <strong class="title">Time</strong><br>\n  <div class="form-group">\n    <select name="date" class="date form-control"></select>\n  </div>\n  <div class="form-group">\n    <select name="time" class="time form-control"></select>\n  </div>\n</div>',i=function(a){function f(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,f),babelHelpers.get(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,{position:c.position||"topleft"}),this._title=c.title||"Time",this._covLayer=a,a.on&&(this._remove=function(){return b.remove()},a.on("remove",this._remove),this._axisListener=function(a){"time"===a.axis&&b.update()});var d=this._covLayer.timeSlices,e=new Map,g=!0,h=!1,i=void 0;try{for(var j,k=d[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate())).getTime();e.has(m)||e.set(m,[]),e.get(m).push(l)}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}this._dateMap=e}return babelHelpers.inherits(f,a),babelHelpers.createClass(f,[{key:"onAdd",value:function(a){var f=this;this._map=a,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);var i=e(h);this._el=i,g.DomEvent.disableClickPropagation(i),this._title&&(d(".title",i).innerHTML=this._title);var j=!0,k=!1,l=void 0;try{for(var m,n=this._dateMap.keys()[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value,p=c(o);d(".date",i).appendChild(e('<option value="'+p+'">'+p+"</option>"))}}catch(a){k=!0,l=a}finally{try{!j&&n.return&&n.return()}finally{if(k)throw l}}return d(".date",i).disabled=1===this._dateMap.size,d(".date",i).addEventListener("change",function(a){var c=b(a.target.value),d=f._dateMap.get(c)[0];f._covLayer.time=d,f._initTimeSelect(c),f.fire("change",{time:d})}),d(".time",i).addEventListener("change",function(a){var b=d(".date",i).value,c=a.target.value,e=new Date(b+"T"+c);f._covLayer.time=e,f.fire("change",{time:e})}),this.update(),i}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}},{key:"update",value:function(){var a=this._covLayer.time;if(a){var e=this._el,f=b(a.toISOString()),g=c(f);d(".date",e).value=g,this._initTimeSelect(f);var h=a.toISOString().substr(11);d(".time",e).value=h}}},{key:"_initTimeSelect",value:function(a){var b=this._el,c=d(".time",b);c.innerHTML="";var f=this._dateMap.get(a),g=!0,h=!1,i=void 0;try{for(var j,k=f[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=l.toISOString().substr(11);c.appendChild(e('<option value="'+m+'">'+m+"</option>"))}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}c.disabled=1===f.length}}]),f}(f(g.Control)),a("default",i)}}}),a.register("80",[],function(a){"use strict";function b(a,c){return"string"==typeof c&&(c=b(c)),c=c||document,c.querySelector(a)}function c(a,c){return"string"==typeof c&&(c=b(c)),c=c||document,[].concat(babelHelpers.toConsumableArray(c.querySelectorAll(a)))}function d(a){var b=document.createElement("div");b.innerHTML=a;var c=b.firstChild;return c}function e(a,b){if(a&&document.body.appendChild(d(a)),b){var c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=b:c.appendChild(document.createTextNode(b)),document.head.appendChild(c)}}function f(a){var c=b("#"+a);return"content"in c&&(c=c.content),document.importNode(c,!0).children[0]}return a("$$",b),a("$",c),a("HTML",d),a("inject",e),a("fromTemplate",f),{setters:[],execute:function(){}}}),a.register("85",["80","84","4a"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a.$$,c=a.HTML},function(a){d=a.default},function(a){e=a.default}],execute:function(){f='<div class="leaflet-coverage-control" style="clear:none">\n  <strong class="select-title"></strong><br>\n  <select class="form-control"></select>\n</div>',g=function(a){function d(a,b){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,b.position?{position:b.position}:{position:"topleft"}),this._title=b.title||"",this._choices=a,this._value=b.value||a[0].value}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"onAdd",value:function(a){var d=this,g=c(f);this._el=g,e.DomEvent.disableClickPropagation(g),b(".select-title",g).innerHTML=this._title;var h=!0,i=!1,j=void 0;try{for(var k,l=this._choices[Symbol.iterator]();!(h=(k=l.next()).done);h=!0){var m=k.value,n=m.value,o=m.label;b("select",g).appendChild(c('<option value="'+n+'">'+o+"</option>"))}}catch(a){i=!0,j=a}finally{try{!h&&l.return&&l.return()}finally{if(i)throw j}}return b("select",g).disabled=this._choices.length<=1,this.value=this._value,b("select",g).addEventListener("change",function(a){d._value=a.target.value,d.fire("change",{value:a.target.value})}),g}},{key:"value",get:function(){return this._value},set:function(a){b("select",this._el).value=a}}]),d}(d(e.Control)),a("default",g)}}}),a.register("86",["84","85","4a","5d"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.getLanguageString,f=a.stringifyUnit}],execute:function(){g=function(a){function b(a){var c=this,d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this._covLayer=a,this._title=d.title||"Vertical",this._position=d.position||"topleft",a.on&&(this._remove=function(){return c.remove()},a.on("remove",this._remove),this._axisListener=function(a){"vertical"===a.axis&&c.update()})}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){var b=this;this._map=a,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);var d=this._covLayer.crsVerticalAxis||{},g=d.name?e(d.name):this._title,h=f(d.unit);h&&(h=" "+h);for(var i=[],j=this._covLayer.verticalSlices,k=0;k<j.length;k++)i.push({value:k.toString(),label:j[k]+h});this._dropdown=new c(i,{position:this._position,title:g,value:this._getVerticalIndex().toString()}).on("change",function(a){var c=parseInt(a.value),d=b._covLayer.verticalSlices[c];b._covLayer.vertical=d,b.fire("change",{vertical:d})}).addTo(a)}},{key:"onRemove",value:function(a){this._dropdown.remove(),this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}},{key:"_getVerticalIndex",value:function(){var a=this._covLayer.verticalSlices,b=a.indexOf(this._covLayer.vertical);return b}},{key:"update",value:function(){var a=this._getVerticalIndex();this._dropdown.value=a.toString()}}]),b}(d.Layer),a("default",g)}}}),a.register("87",["88","89","90","91","8a","8b","8c","8d","8e","8f"],function(a){"use strict";function b(a,b){var d=c(a);if(!d){var e=a.type===o?"collection ":"";throw new Error("No "+e+"layer class found for domainType="+a.domainType)}return new d(a,b)}function c(a){return(a.type===n||a.type===p)&&a.domainType in w?w[a.domainType]:a.type===o&&a.domainType in x?x[a.domainType]:void 0}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return a("dataLayer",b),a("dataLayerClass",c),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.COVJSON_POINT,h=a.COVJSON_POINTSERIES,i=a.COVJSON_VERTICALPROFILE,j=a.COVJSON_GRID,k=a.COVJSON_TRAJECTORY,l=a.COVJSON_MULTIPOLYGON,m=a.COVJSON_POLYGONSERIES,n=a.COVERAGE,o=a.COVERAGECOLLECTION,p=a.DOMAIN},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default},function(a){t=a.default},function(a){u=a.default},function(a){v=a.default}],execute:function(){y={},babelHelpers.defineProperty(y,j,d),babelHelpers.defineProperty(y,g,q),babelHelpers.defineProperty(y,h,r),babelHelpers.defineProperty(y,i,t),babelHelpers.defineProperty(y,k,e),babelHelpers.defineProperty(y,l,v),babelHelpers.defineProperty(y,m,f),w=y,z={},babelHelpers.defineProperty(z,g,s),babelHelpers.defineProperty(z,i,u),x=z}}}),a.register("88",["92","93","94","4a","5b","5d"],function(a){"use strict";function b(a,b){return f.Util.wrapNum(a,b,!0)}var c,d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){c=a.enlargeExtentIfEqual},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.indexOfNearest,i=a.isDomain,j=a.fromDomain,k=a.minMaxOfRange,l=a.getReferenceObject,m=a.isEllipsoidalCRS}],execute:function(){n=function(a){function d(a,b){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this),i(a)&&(a=j(a),b.keys=[a.parameters.keys().next().value]),b.paletteExtent||(b.paletteExtent="subset"),f.Util.setOptions(this,b),this.cov=a,this.param=a.parameters.get(b.keys[0]),this._axesSubset={t:{coordPref:b.time?b.time.toISOString():void 0},z:{coordPref:b.vertical}}}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){var a=l(b.domain,"z");if(a&&1===a.coordinates.length){var c=a.system;c.cs&&(c.cs.csAxes||c.cs.axes)&&(b.crsVerticalAxis=c.cs.csAxes?c.cs.csAxes[0]:c.cs.axes[0])}}).then(function(){b.errored=!1,babelHelpers.get(Object.getPrototypeOf(d.prototype),"onAdd",b).call(b,a),b.fire("afterAdd")}).catch(function(c){b.errored=!0,console.log(c),babelHelpers.get(Object.getPrototypeOf(d.prototype),"onAdd",b).call(b,a)})}},{key:"onRemove",value:function(a){delete this._map,babelHelpers.get(Object.getPrototypeOf(d.prototype),"onRemove",this).call(this,a)}},{key:"getBounds",value:function(){var a=void 0;if(!this.cov.bbox){a=this._getDomainBbox();var b=this.projection,c=b.unproject({x:a[0],y:a[1]}),d=b.unproject({x:a[0],y:a[3]}),e=b.unproject({x:a[2],y:a[1]}),g=b.unproject({x:a[2],y:a[3]});return f.latLngBounds([c,d,e,g])}a=this.cov.bbox;var h=f.latLng(a[1],a[0]),i=f.latLng(a[3],a[2]),j=f.latLngBounds(h,i);return j}},{key:"_loadCoverageSubset",value:function(){var a=this,b={},c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(this._axesSubset)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=this._axesSubset[h];this.domain.axes.has(h)&&(void 0==i.coordPref?b[h]={target:this.domain.axes.get(h).values[0]}:b[h]={target:i.coordPref})}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return this.fire("dataLoading"),this.cov.subsetByValue(b).then(function(b){return a.subsetCov=b,b.cacheRanges=!0,Promise.all([b.loadDomain(),b.loadRange(a.param.key)])}).then(function(b){var c=babelHelpers.slicedToArray(b,2),d=c[0],e=c[1];a.subsetDomain=d,a.subsetRange=e,a.fire("dataLoad")}).catch(function(b){throw a.fire("dataLoad"),b})}},{key:"computePaletteExtent",value:function(a){var b=this;if("subset"===a){var d=this.subsetRange.shape.get(this._projX),e=this.subsetRange.shape.get(this._projY);if(d*e<1e6)return a=k(this.subsetRange),a=c(a),Promise.resolve(a);var f,g={start:0,stop:d,step:Math.max(Math.round(d/1e3),1)},h={start:0,stop:e,step:Math.max(Math.round(e/1e3),1)};return this.subsetCov.subsetByIndex((f={},babelHelpers.defineProperty(f,this._projX,g),babelHelpers.defineProperty(f,this._projY,h),f)).then(function(c){return c.loadRange(b.param.key).then(function(b){var c=k(b),d=babelHelpers.slicedToArray(c,2),e=d[0],f=d[1],g=.1*(f-e);return a=[e-g,f+g]})})}if("fov"===a){this._map.getBounds();throw new Error("NOT IMPLEMENTED YET")}throw new Error("Unknown extent specification: "+a)}},{key:"getValueAt",value:function(a){var b,c=this.domain.axes.get(this._projX).values,d=this.domain.axes.get(this._projY).values,e=this._getDomainBbox(),f=a.lat,g=a.lng,i=this.projection.project({lat:f,lon:g}),j=i.x,k=i.y;if(!(j<e[0]||j>e[2]||k<e[1]||k>e[3])){var l=h(d,k),m=h(c,j);return this.subsetRange.get((b={},babelHelpers.defineProperty(b,this._projY,l),babelHelpers.defineProperty(b,this._projX,m),b))}}},{key:"createTile",value:function(a){var b=f.DomUtil.create("canvas","leaflet-tile"),c=this.getTileSize();return b.width=c.x,b.height=c.y,this.drawTile(b,a),b}},{key:"drawTile",value:function(a,b){if(!this.errored){var c=a.getContext("2d"),d=this.getTileSize(),e=c.getImageData(0,0,d.x,d.y),f=g(e.data,[d.y,d.x,4]),h=this.palette,i=h.red,j=h.green,k=h.blue,l=this.getPaletteIndex,m=function(a,b,c){var d=l(c);void 0!==d&&(f.set(a,b,0,i[d]),f.set(a,b,1,j[d]),f.set(a,b,2,k[d]),f.set(a,b,3,255))},n=this.subsetRange.get;this._isDomainUsingEllipsoidalCRS()?this._isRectilinearGeodeticMap()?this._drawGeodeticCRSWithRectilinearMapProjection(m,b,n):this._drawGeodeticCRSWithAnyMapProjection(m,b,n):this._isRectilinearGeodeticMap()?this._drawProjectedCRSWithRectilinearMapProjection(m,b,n):this._drawProjectedCRSWithAnyMapProjection(m,b,n),c.putImageData(e,0,0)}}},{key:"_getDomainBbox",value:function(){var a=function(a,b){var c=a.length-1,d=void 0,e=void 0;b?(d=b.get(0)[0],e=b.get(c)[1]):(d=a[0],e=a[c]);var f=d>e;if(f){var g=[e,d];d=g[0],e=g[1]}return!b&&a.length>1&&(f?(d-=(a[c-1]-a[c])/2,e+=(a[0]-a[1])/2):(d-=(a[1]-a[0])/2,e+=(a[c]-a[c-1])/2)),[d,e]},b=this.domain.axes.get(this._projX),c=this.domain.axes.get(this._projY),d=a(b.values,b.bounds),e=babelHelpers.slicedToArray(d,2),f=e[0],g=e[1],h=a(c.values,c.bounds),i=babelHelpers.slicedToArray(h,2),j=i[0],k=i[1];return[f,j,g,k]}},{key:"_drawGeodeticCRSWithAnyMapProjection",value:function(a,c,d){var e=this.getTileSize(),g=c.x*e.x,i=c.y*e.y,j=c.z,k=this._map,l=this.domain.axes.get("x").values,m=this.domain.axes.get("y").values,n=this._getDomainBbox();"y"===this._projX&&(n=[n[1],n[0],n[3],n[2]]);for(var o=[n[0],n[0]+360],p=0;p<e.x;p++)for(var q=0;q<e.y;q++){var r=k.unproject(f.point(g+p,i+q),j),s=r.lat,t=r.lng;if(!(s<n[1]||s>n[3]||(t=b(t,o),t<n[0]||t>n[2]))){var u=h(m,s),v=h(l,t);a(q,p,d({y:u,x:v}))}}}},{key:"_drawProjectedCRSWithAnyMapProjection",value:function(a,b,c){for(var d=this._map,e=this.domain.axes.get(this._projX).values,g=this.domain.axes.get(this._projY).values,i=this._getDomainBbox(),j=this.projection,k=this.getTileSize(),l=b.x*k.x,m=b.y*k.y,n=b.z,o=0;o<k.x;o++)for(var p=0;p<k.y;p++){var q=d.unproject(f.point(l+o,m+p),n),r=q.lat,s=q.lng,t=j.project({lat:r,lon:s}),u=t.x,v=t.y;if(!(u<i[0]||u>i[2]||v<i[1]||v>i[3])){var w=h(g,v),x=h(e,u);a(p,o,c({y:w,x:x}))}}}},{key:"_drawProjectedCRSWithRectilinearMapProjection",value:function(a,b,c){for(var d=this._map,e=this.domain.axes.get(this._projX).values,g=this.domain.axes.get(this._projY).values,i=this._getDomainBbox(),j=this.projection,k=this.getTileSize(),l=b.x*k.x,m=b.y*k.y,n=b.z,o=new Float64Array(k.x),p=0;p<k.x;p++){var q=d.unproject(f.point(l+p,m),n),r=q.lng;o[p]=r}for(var s=new Float64Array(k.y),t=0;t<k.y;t++){var u=d.unproject(f.point(l,m+t),n),v=u.lat;s[t]=v}for(var p=0;p<k.x;p++)for(var t=0;t<k.y;t++){var v=s[t],w=o[p],x=j.project({lat:v,lon:w}),y=x.x,z=x.y;if(!(y<i[0]||y>i[2]||z<i[1]||z>i[3])){var A=h(g,z),B=h(e,y);a(t,p,c({y:A,x:B}))}}}},{key:"_drawGeodeticCRSWithRectilinearMapProjection",value:function(a,c,d){var e=this._map,g=this.domain.axes.get("x").values,i=this.domain.axes.get("y").values,j=this._getDomainBbox();"y"===this._projX&&(j=[j[1],j[0],j[3],j[2]]);for(var k=[j[0],j[0]+360],l=this.getTileSize(),m=c.x*l.x,n=c.y*l.y,o=c.z,p=new Float64Array(l.y),q=new Uint32Array(l.y),r=0;r<l.y;r++){var s=e.unproject(f.point(m,n+r),o).lat;p[r]=s,q[r]=h(i,s)}for(var t=0;t<l.x;t++){var u=e.unproject(f.point(m+t,n),o).lng;if(u=b(u,k),!(u<j[0]||u>j[2]))for(var v=h(g,u),r=0;r<l.y;r++){var w=p[r];if(!(w<j[1]||w>j[3])){var x=q[r];a(r,t,d({y:x,x:v}))}}}}},{key:"_isRectilinearGeodeticMap",value:function(){var a=this._map.options.crs,b=[f.CRS.EPSG3857,f.CRS.EPSG4326,f.CRS.EPSG3395,f.CRS.Simple],c=b.indexOf(a)!==-1;return c}},{key:"_isDomainUsingEllipsoidalCRS",value:function(){return this.domain.referencing.some(function(a){return m(a.system)})}},{key:"redraw",value:function(){this.getContainer()&&f.GridLayer.prototype.redraw.call(this)}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}},{key:"time",set:function(a){var b=this;if(!this.domain.axes.has("t"))throw new Error("No time axis found");var c=this.time;this._axesSubset.t.coordPref=a.toISOString(),this._loadCoverageSubset().then(function(){c!==b.time&&(b.redraw(),b.fire("axisChange",{axis:"time"}))})},get:function(){if(this.domain.axes.has("t")){var a=this.subsetDomain.axes.get("t").values[0];return new Date(a)}}},{key:"timeSlices",get:function(){if(this.domain.axes.has("t"))return this.domain.axes.get("t").values.map(function(a){return new Date(a)})}},{key:"vertical",set:function(a){var b=this;if(!this.domain.axes.has("z"))throw new Error("No vertical axis found");var c=this.vertical;this._axesSubset.z.coordPref=a,this._loadCoverageSubset().then(function(){c!==b.vertical&&(b.redraw(),b.fire("axisChange",{axis:"vertical"}))})},get:function(){if(this.domain.axes.has("z")){var a=this.subsetDomain.axes.get("z").values[0];return a}}},{key:"verticalSlices",get:function(){if(this.domain.axes.has("z")){var a=this.domain.axes.get("z").values;return ArrayBuffer.isView(a)&&(a=[].concat(babelHelpers.toConsumableArray(a))),a}}}]),d}(d(e(f.GridLayer))),a("default",n)}}}),a.register("89",["92","93","94","4a","5d","8a"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.enlargeExtentIfEqual},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.isDomain,g=a.fromDomain,h=a.minMaxOfRange},function(a){i=a.DEFAULT_COLOR}],execute:function(){j=function(a){function c(a,b){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),f(a)&&(a=g(a),b.keys=[a.parameters.keys().next().value]),b.paletteExtent||(b.paletteExtent="full"),e.Util.setOptions(this,b),this.cov=a,this.param=b.keys?a.parameters.get(b.keys[0]):null,this.defaultColor=b.color||i}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addTrajectoryLayers(),b.fire("afterAdd")})}},{key:"computePaletteExtent",value:function(a){var c=this.range;if("full"!==a){if("fov"===a){this._map.getBounds();throw new Error("NOT IMPLEMENTED YET")}throw new Error("Unknown extent specification: "+a)}return a=h(c),a=b(a),Promise.resolve(a)}},{key:"_addTrajectoryLayers",value:function(){for(var a=this.getLatLngs(),b=0;b<a.length;b++){var c=new e.CircleMarker(a[b],{color:this._getColor(this._getValue(b)),opacity:1,fillOpacity:1});this.addLayer(c)}var d=e.polyline(a,{color:"black",weight:3});this.addLayer(d)}},{key:"getLatLngs",value:function(){for(var a=this.domain.axes.get("composite"),b=a.coordinates.indexOf(this._projX),c=a.coordinates.indexOf(this._projY),d=[],f=0;f<a.values.length;f++){var g=a.values[f][b],h=a.values[f][c],i=this.projection.unproject({
x:g,y:h}),j=e.latLng(i);d.push(j)}return d}},{key:"getValueAt",value:function(a,b){for(var c=this.getLatLngs(),d=c.map(function(b){return b.distanceTo(a)}),e=1/0,f=void 0,g=0;g<c.length;g++){var h=d[g];h<=b&&h<e&&(e=h,f=g)}if(void 0!==f)return this._getValue(f)}},{key:"_getValue",value:function(a){if(this.param)return this.range.get({composite:a})}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return"rgb("+d[b]+", "+e[b]+", "+f[b]+")"}},{key:"redraw",value:function(){this.clearLayers(),this._addTrajectoryLayers()}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}}]),c}(c(d(e.FeatureGroup))),a("default",j)}}}),a.register("8b",["84","92","93","94","95","4a","5d","8a"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.enlargeExtentIfEqual},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.isDomain,i=a.fromDomain,j=a.indexOfNearest,k=a.minMaxOfRange},function(a){l=a.DEFAULT_COLOR}],execute:function(){m=function(a){function b(a,c){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),h(a)&&(a=i(a),delete c.keys),c.paletteExtent||(c.paletteExtent="full"),g.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this._axesSubset={t:{coordPref:c.time}},this.defaultColor=c.color?c.color:l,this.showNoData=c.showNoData}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addMarker(),b.fire("afterAdd")})}},{key:"_loadCoverageSubset",value:function(){var a=this._axesSubset.t;if(void 0==a.coordPref)a.idx=a.coord=void 0;else{var b=this.domain.axes.get("t").values.map(function(a){return a.getTime()});a.idx=j(b,a.coordPref.getTime()),a.coord=b[a.idx]}}},{key:"onRemove",value:function(){this._removeMarker()}},{key:"getBounds",value:function(){return g.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var a=this.domain.axes.get(this._projX).values[0],b=this.domain.axes.get(this._projY).values[0],c=this.projection.unproject({x:a,y:b});return g.latLng(c)}},{key:"canUsePalette",value:function(){return void 0!==this.time}},{key:"computePaletteExtent",value:function(a){if("full"===a){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return a=k(this.range),a=c(a),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"getValue",value:function(){if(this.param&&void 0!==this._axesSubset.t.coord){var a=this.range.get({t:this._axesSubset.t.idx});return a}}},{key:"getValueAt",value:function(a,b){var c=this.getLatLng();if(c.distanceTo(a)<=b)return this.getValue()}},{key:"_getColor",value:function(){var a=this.getValue();if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return{r:d[b],g:e[b],b:f[b]}}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}},{key:"time",set:function(a){var b=this,c=this.time;this._axesSubset.t.coordPref=a.toISOString(),this._loadCoverageSubset().then(function(){c!==b.time&&(b.redraw(),b.fire("axisChange",{axis:"time"}))})},get:function(){if(this._axesSubset.t.coord){var a=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(a)}}},{key:"timeSlices",get:function(){return this.domain.axes.get("t").values.map(function(a){return new Date(a)})}}]),b}(d(f(e(g.Layer)))),a("default",m)}}}),a.register("8f",["84","92","93","94","4a","5d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.enlargeExtentIfEqual},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.isDomain,h=a.fromDomain,i=a.minMaxOfRange,j=a.ensureClockwisePolygon,k=a.getPointInPolygonsFn}],execute:function(){l="black",a("DEFAULT_COLOR",l),m=function(a){function b(a,c){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),g(a)&&(a=h(a),c.keys=[a.parameters.keys().next().value]),c.paletteExtent||(c.paletteExtent="full"),f.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this.defaultColor=c.color||l}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._unproject(),b._addPolygons(),b._pointInPolygonPreprocess(),b.fire("afterAdd")})}},{key:"_unproject",value:function(){var a=this.projection.unproject,b=this.domain.axes.get("composite"),c=b.coordinates.indexOf(this._projX),d=b.coordinates.indexOf(this._projY);this._polygonsLonLat=b.values.map(function(b){return b.map(function(b){return b.map(function(b){var e=a({x:b[c],y:b[d]}),f=e.lat,g=e.lon;return[g,f]})})})}},{key:"onRemove",value:function(a){this._removePolygons()}},{key:"getBounds",value:function(){return this._geojson.getBounds()}},{key:"getLatLng",value:function(){return this.getBounds().getCenter()}},{key:"computePaletteExtent",value:function(a){if("full"===a){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return a=i(this.range),a=c(a),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"_pointInPolygonPreprocess",value:function(){var a=this._polygonsLonLat,b=!1;a.forEach(function(a){return j(a,b)}),this._pointInPolygons=k(a)}},{key:"_addPolygons",value:function(){for(var a=this,b=this._polygonsLonLat,c=[],d=0;d<b.length;d++)c.push({type:"Feature",properties:{index:d,color:this._getColor(this._getValue(d))},geometry:{type:"Polygon",coordinates:b[d]}});this._geojson=f.geoJson(c,{style:function(a){return{color:a.properties.color,fillOpacity:1,stroke:!1}},onEachFeature:function(b,c){c.on("click",function(c){c.index=b.properties.index,a.fire("click",c)})}}),this._geojson.addTo(this._map)}},{key:"_removePolygons",value:function(){this._map.removeLayer(this._geojson),delete this._geojson}},{key:"_getValue",value:function(a){if(this.param)return this.range.get({composite:a})}},{key:"getValueAt",value:function(a){var b=this._pointInPolygons([a.lng,a.lat]);if(b>=0)return this._getValue(b)}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return"rgb("+d[b]+", "+e[b]+", "+f[b]+")"}},{key:"_updatePolygons",value:function(){this._removePolygons(),this._addPolygons()}},{key:"redraw",value:function(){this._updatePolygons(),this._geojson.redraw()}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}}]),b}(d(e(f.Layer))),a("default",m)}}}),a.register("90",["84","92","93","94","4a","5d","8a"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){b=a.default},function(a){c=a.enlargeExtentIfEqual},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.indexOfNearest,h=a.minMaxOfRange,i=a.isDomain,j=a.fromDomain,k=a.ensureClockwisePolygon,l=a.getPointInPolygonsFn},function(a){m=a.DEFAULT_COLOR}],execute:function(){n=function(a){function b(a,c){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),i(a)&&(a=j(a),delete c.keys),c.paletteExtent||(c.paletteExtent="full"),f.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this._axesSubset={t:{coordPref:c.time}},this.defaultColor=c.color?c.color:m}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._unproject(),b._addPolygon(),b._pointInPolygonPreprocess(),b.fire("afterAdd")})}},{key:"_unproject",value:function(){var a=this.projection.unproject,b=this.domain.axes.get("composite"),c=b.coordinates.indexOf(this._projX),d=b.coordinates.indexOf(this._projY);this._polygonLonLat=b.values[0].map(function(b){return b.map(function(b){var e=a({x:b[c],y:b[d]}),f=e.lat,g=e.lon;return[g,f]})})}},{key:"_loadCoverageSubset",value:function(){var a=this._axesSubset.t;if(void 0==a.coordPref)a.idx=a.coord=void 0;else{var b=this.domain.axes.get("t").values.map(function(a){return a.getTime()});a.idx=g(b,a.coordPref.getTime()),a.coord=b[a.idx]}}},{key:"onRemove",value:function(){this._removePolygon()}},{key:"getBounds",value:function(){return this._geojson.getBounds()}},{key:"getLatLng",value:function(){return this.getBounds().getCenter()}},{key:"bindPopup",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(this._popup=b,this._geojson){var d;(d=this._geojson).bindPopup.apply(d,b)}return this}},{key:"openPopup",value:function(){return this._geojson.openPopup(),this}},{key:"closePopup",value:function(){return this._geojson.closePopup(),this}},{key:"canUsePalette",value:function(){return void 0!==this.time}},{key:"computePaletteExtent",value:function(a){if("full"===a){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return a=h(this.range),a=c(a),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"_pointInPolygonPreprocess",value:function(){var a=this._polygonLonLat,b=!1;k(a,b);var c=l([a]);this._pointInPolygon=function(a){return c(a)!==-1}}},{key:"_addPolygon",value:function(){var a=this,b=this._polygonLonLat,c={type:"Feature",properties:{color:this._getColor(this.getValue())},geometry:{type:"Polygon",coordinates:b}};if(this._geojson=f.geoJson(c,{style:function(a){return{color:a.properties.color,fillOpacity:1,stroke:!1}},onEachFeature:function(b,c){c.on("click",function(b){return a.fire("click",b)})}}),this._popup){var d;(d=this._geojson).bindPopup.apply(d,babelHelpers.toConsumableArray(this._popup))}this._geojson.addTo(this._map)}},{key:"_removePolygon",value:function(){this._map.removeLayer(this._geojson),delete this._geojson}},{key:"getValue",value:function(){if(this.param&&void 0!==this._axesSubset.t.coord){var a=this.range.get({t:this._axesSubset.t.idx});return a}}},{key:"getValueAt",value:function(a){if(!a)throw new Error("latlng parameter missing");if(this._pointInPolygon([a.lng,a.lat]))return this.getValue()}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return"rgb("+d[b]+", "+e[b]+", "+f[b]+")"}},{key:"_updatePolygon",value:function(){this._removePolygon(),this._addPolygon()}},{key:"redraw",value:function(){this._updatePolygon(),this._geojson.redraw()}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}},{key:"time",set:function(a){var b=this,c=this.time;this._axesSubset.t.coordPref=a.toISOString(),this._loadCoverageSubset().then(function(){c!==b.time&&(b.redraw(),b.fire("axisChange",{axis:"time"}))})},get:function(){if(this._axesSubset.t.coord){var a=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(a)}}},{key:"timeSlices",get:function(){return this.domain.axes.get("t").values.map(function(a){return new Date(a)})}}]),b}(d(e(f.Layer))),a("default",n)}}}),a.register("96",[],function(a){"use strict";function b(a,b,c){this.obj=a,this.left=null,this.right=null,this.parent=c,this.dimension=b}function c(a,c,e){function f(a,c,d){var g,h,i=c%e.length;return 0===a.length?null:1===a.length?new b(a[0],i,d):(a.sort(function(a,b){return a[e[i]]-b[e[i]]}),g=Math.floor(a.length/2),h=new b(a[g],i,d),h.left=f(a.slice(0,g),c+1,h),h.right=f(a.slice(g+1),c+1,h),h)}function g(a){function b(a){a.left&&(a.left.parent=a,b(a.left)),a.right&&(a.right.parent=a,b(a.right))}h.root=a,b(h.root)}var h=this;Array.isArray(a)?this.root=f(a,0,null):g(a,c,e),this.toJSON=function(a){a||(a=this.root);var c=new b(a.obj,a.dimension,null);return a.left&&(c.left=h.toJSON(a.left)),a.right&&(c.right=h.toJSON(a.right)),c},this.insert=function(a){function c(b,c){for(var d=!0;d;){var f=b,g=c;if(d=!1,null===f)return g;var h=e[f.dimension];a[h]<f.obj[h]?(b=f.left,c=f,d=!0,h=void 0):(b=f.right,c=f,d=!0,h=void 0)}}var d,f,g=c(this.root,null);return null===g?void(this.root=new b(a,0,null)):(d=new b(a,(g.dimension+1)%e.length,g),f=e[g.dimension],void(a[f]<g.obj[f]?g.left=d:g.right=d))},this.remove=function(a){function b(b){for(var c=!0;c;){var d=b;if(c=!1,null===d)return null;if(d.obj===a)return d;var f=e[d.dimension];a[f]<d.obj[f]?(b=d.left,c=!0,f=void 0):(b=d.right,c=!0,f=void 0)}}function c(a){function b(a,c){var d=!0;a:for(;d;){var f=a,g=c;d=!1;var h,i,j,k,l;if(null===f)return null;if(h=e[g],f.dimension===g){if(null!==f.left){a=f.left,c=g,d=!0,h=i=j=k=l=void 0;continue a}return f}return i=f.obj[h],j=b(f.left,g),k=b(f.right,g),l=f,null!==j&&j.obj[h]<i&&(l=j),null!==k&&k.obj[h]<l.obj[h]&&(l=k),l}}var d,f,g;return null===a.left&&null===a.right?null===a.parent?void(h.root=null):(g=e[a.parent.dimension],void(a.obj[g]<a.parent.obj[g]?a.parent.left=null:a.parent.right=null)):void(null!==a.right?(d=b(a.right,a.dimension),f=d.obj,c(d),a.obj=f):(d=b(a.left,a.dimension),f=d.obj,c(d),a.right=a.left,a.left=null,a.obj=f))}var d;d=b(h.root),null!==d&&c(d)},this.nearest=function(a,b,f){function g(d){function f(a,c){k.push([a,c]),k.size()>b&&k.pop()}var h,i,j,l,m=e[d.dimension],n=c(a,d.obj),o={};for(l=0;l<e.length;l+=1)l===d.dimension?o[e[l]]=a[e[l]]:o[e[l]]=d.obj[e[l]];return i=c(o,d.obj),null===d.right&&null===d.left?void((k.size()<b||n<k.peek()[1])&&f(d,n)):(h=null===d.right?d.left:null===d.left?d.right:a[m]<d.obj[m]?d.left:d.right,g(h),(k.size()<b||n<k.peek()[1])&&f(d,n),void((k.size()<b||Math.abs(i)<k.peek()[1])&&(j=h===d.left?d.right:d.left,null!==j&&g(j))))}var i,j,k;if(k=new d(function(a){return-a[1]}),f)for(i=0;i<b;i+=1)k.push([null,f]);for(h.root&&g(h.root),j=[],i=0;i<Math.min(b,k.content.length);i+=1)k.content[i][0]&&j.push([k.content[i][0].obj,k.content[i][1]]);return j},this.balanceFactor=function(){function a(b){return null===b?0:Math.max(a(b.left),a(b.right))+1}function b(a){return null===a?0:b(a.left)+b(a.right)+1}return a(h.root)/(Math.log(b(h.root))/Math.log(2))}}function d(a){this.content=[],this.scoreFunction=a}return{setters:[],execute:function(){d.prototype={push:function(a){this.content.push(a),this.bubbleUp(this.content.length-1)},pop:function(){var a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.sinkDown(0)),a},peek:function(){return this.content[0]},remove:function(a){for(var b=this.content.length,c=0;c<b;c++)if(this.content[c]==a){var d=this.content.pop();return void(c!=b-1&&(this.content[c]=d,this.scoreFunction(d)<this.scoreFunction(a)?this.bubbleUp(c):this.sinkDown(c)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(a){for(var b=this.content[a];a>0;){var c=Math.floor((a+1)/2)-1,d=this.content[c];if(!(this.scoreFunction(b)<this.scoreFunction(d)))break;this.content[c]=b,this.content[a]=d,a=c}},sinkDown:function(a){for(var b=this.content.length,c=this.content[a],d=this.scoreFunction(c);;){var e=2*(a+1),f=e-1,g=null;if(f<b){var h=this.content[f],i=this.scoreFunction(h);i<d&&(g=f)}if(e<b){var j=this.content[e],k=this.scoreFunction(j);k<(null==g?d:i)&&(g=e)}if(null==g)break;this.content[a]=this.content[g],this.content[g]=c,a=g}}},a("kdTree",c),a("BinaryHeap",d)}}}),a.register("8c",["84","92","93","96","4a","8a"],function(a){"use strict";var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a.default},function(a){c=a.enlargeExtentIfEqual},function(a){d=a.default},function(a){e=a.kdTree},function(a){f=a.default},function(a){g=a.default,h=a.DEFAULT_COLOR}],execute:function(){i=function(a){function b(a,c){var d=this;babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),c.paletteExtent||(c.paletteExtent="full"),f.Util.setOptions(this,c),this.covcoll=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this.defaultColor=c.color||h,this.pointClass=c.pointClass||g,this.pointOptionsFn=c.pointOptionsFn,this._layerGroup=f.layerGroup(),this._layers=[],this._kdtree=void 0,this.on("paletteChange",function(){var a=!0,b=!1,c=void 0;try{for(var e,f=d._layers[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){var g=e.value;g.palette=d.palette}}catch(a){b=!0,c=a}finally{try{!a&&f.return&&f.return()}finally{if(b)throw c}}}),this.on("paletteExtentChange",function(){var a=!0,b=!1,c=void 0;try{for(var e,f=d._layers[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){var g=e.value;g.paletteExtent=d.paletteExtent}}catch(a){b=!0,c=a}finally{try{!a&&f.return&&f.return()}finally{if(b)throw c}}})}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){this._map=a,this._layerLoadCount=0,this._layerErrors=[];var b={keys:this.param?[this.param.key]:void 0,color:this.defaultColor,palette:this.palette,paletteExtent:this.paletteExtent};if(this.pointOptionsFn){var c=this.pointOptionsFn();for(var d in c)b[d]=c[d]}var e=!0,f=!1,g=void 0;try{for(var h,i=this.covcoll.coverages[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,k=new this.pointClass(j,b);if(this._attachListeners(k,j),this._layerGroup.addLayer(k),this._layers.push(k),k.load(),this._popupFn){var l=this._popupFn(k.coverage);k.bindPopup(l)}}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}}},{key:"onRemove",value:function(a){a.removeLayer(this._layerGroup),this._layerGroup=f.layerGroup(),this._layers=[]}},{key:"bindPopupEach",value:function(a){this._popupFn=a}},{key:"_attachListeners",value:function(a,b){var c=this;a.once("dataLoad",function(){++c._layerLoadCount,c._fireIfOnAddDone()}).once("error",function(a){c._layerErrors.push(a)}).on("click",function(a){a.coverage=b,c.fire("click",a)})}},{key:"_fireIfOnAddDone",value:function(){var a=this;this._layerLoadCount===this._layers.length&&(this._layerErrors.length>0?this.fire("error",{errors:this._layerErrors}):(this._initKdtree(),this.initializePalette().then(function(){a._layerGroup.addTo(a._map),a.fire("afterAdd")})))}},{key:"_initKdtree",value:function(){var a=this._layers.map(function(a){var b=a.getLatLng();return b.layer=a,b}),b=function(a,b){return f.LatLng.prototype.distanceTo.call(a,b)},c=["lat","lng"];this._kdtree=new e(a,b,c)}},{key:"getBounds",value:function(){return f.latLngBounds(this._layers.map(function(a){return a.getLatLng()}))}},{key:"getValueAt",value:function(a,b){var c=this._kdtree.nearest(a,1,b);if(c.length>0){var d=c[0][0],e=d.layer.getValue();return e}}},{key:"computePaletteExtent",value:function(a){var b=this;if(!this.param)throw new Error("palette extent cannot be set when no parameter has been chosen");var d=void 0;if("full"===a)d=this._layers;else{if("fov"!==a)throw new Error("Unsupported: "+a);!function(){var a=b._map.getBounds();d=b._layers.filter(function(b){return a.contains(b.getLatLng())})}()}var e=1/0,f=-(1/0),g=!0,h=!1,i=void 0;try{for(var j,k=d[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=l.getValue();null!=m&&(e=Math.min(e,m),f=Math.max(f,m))}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}return a=c([e,f]),Promise.resolve(a)}},{key:"redraw",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this._layers[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.redraw()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}}},{key:"parameter",get:function(){return this.param}}]),b}(d(f.Layer)),a("default",i)}}}),a.register("94",["5d"],function(a){"use strict";function b(a){return function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"load",value:function(){var a=this;this.fire("dataLoading");var b=this.coverage.loadDomain().then(function(b){a.domain=b;var e=d(b),f=babelHelpers.slicedToArray(e,2);return a._projX=f[0],a._projY=f[1],c(b)}).then(function(b){a.projection=b});return this._loadCoverageSubset?b=b.then(function(){return a._loadCoverageSubset()}):this.parameter&&(b=b.then(function(){return a.coverage.loadRange(a.parameter.key)}).then(function(b){a.range=b})),b=b.then(function(){a.fire("dataLoad")}).catch(function(b){console.error(b),a.fire("error",b),a.fire("dataLoad")})}}]),b}(a)}var c,d;return a("default",b),{setters:[function(a){c=a.loadProjection,d=a.getHorizontalCRSComponents}],execute:function(){}}}),a.register("95",["4a"],function(a){"use strict";function b(a){return function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"_addMarker",value:function(){var a=this,b=this.getValue();if(null!==b||this.showNoData){var d=this._getColor(b),e=d.r,f=d.g,g=d.b,h=this.getLatLng(),i=.7;if(this._marker=c.circleMarker(h,{fillColor:"rgb("+e+","+f+","+g+")",fillOpacity:1,radius:5,stroke:!0,opacity:1,weight:1,color:"rgb("+Math.round(e*i)+","+Math.round(f*i)+","+Math.round(g*i)+")"}).on("click",function(b){b.coverage=a.coverage,a.fire("click",b)}).addTo(this._map),this._popup){var j;(j=this._marker).bindPopup.apply(j,babelHelpers.toConsumableArray(this._popup))}}}},{key:"_removeMarker",value:function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)}},{key:"__updateMarker",value:function(){this._marker.options.color=this._getColor()}},{key:"bindPopup",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(this._popup=b,this._marker){var d;(d=this._marker).bindPopup.apply(d,b)}}},{key:"openPopup",value:function(){return this._marker.openPopup(),this}},{key:"closePopup",value:function(){return this._marker.closePopup(),this}},{key:"redraw",value:function(){this._marker&&(this.__updateMarker(),this._marker.redraw())}}]),b}(a)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),a.register("93",["92"],function(a){"use strict";function b(a){return function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"initializePalette",value:function(){var a=this,b=this.options,c=this.parameter;if(!c)return Promise.resolve();var f=c.observedProperty.categories;if(f&&this._initCategoryIdxMap(),this._palette||(b.palette?this._palette=b.palette:c.preferredPalette?this._palette=e(c.preferredPalette):f?f.every(function(a){return a.preferredColor})?this._palette=d(f.map(function(a){return a.preferredColor})):this._palette=h(f.length):this._palette=g()),f&&f.length!==this._palette.steps)throw new Error("Categorical palettes must match the number of categories of the parameter");return this._paletteExtent=this._paletteExtent||b.paletteExtent,this.parameter.categoryEncoding&&!function(){var b=a._categoryIdxMap,c=b.length-1;a.getPaletteIndex=function(a){if(!(null===a||a<0||a>c)){var d=b[a];if(255!==d)return d}}}(),!this.canUsePalette||this.canUsePalette()?this.setPaletteExtent(this._paletteExtent,!0).then(function(){return a._updatePaletteIndexFn()}):Promise.resolve()}},{key:"_updatePaletteIndexFn",value:function(){var a=this;this.parameter.categoryEncoding||!function(){var b=a.palette,c=a.paletteExtent;a.getPaletteIndex=function(a){if(null!==a){var d=f(a,b,c);return d}}}()}},{key:"setPaletteExtent",value:function(a,b){var c=this;if(this.parameter.observedProperty.categories)return Promise.resolve();var d=this.paletteExtent,e=function(a){return!Array.isArray(d)||(d[0]!==a[0]||d[1]!==a[1])},f=Array.isArray(a)?Promise.resolve(a):this.computePaletteExtent(a);return f.then(function(a){Array.isArray(a)&&isNaN(a[0])||e(a)&&(c._paletteExtent=a,c._updatePaletteIndexFn(),b||c.redraw(),c.fire("paletteExtentChange"))})}},{key:"_initCategoryIdxMap",value:function(){var a=this.parameter;if(a.categoryEncoding){var b=-(1/0),c=1/0,d=a.observedProperty.categories,e=a.categoryEncoding,f=!0,g=!1,h=void 0;try{for(var i,j=d[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value;if(e.has(k.id)){var l=!0,m=!1,n=void 0;try{for(var o,p=e.get(k.id)[Symbol.iterator]();!(l=(o=p.next()).done);l=!0){var q=o.value;b=Math.max(b,q),c=Math.min(c,q)}}catch(a){m=!0,n=a}finally{try{!l&&p.return&&p.return()}finally{if(m)throw n}}}}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}var r=void 0;if(!(d.length<256))throw new Error("Too many categories: "+d.length);if(b>1e4||c<0)throw new Error("category values too high (>10000) or low (<0)");r=new Uint8Array(b+1);for(var s=0;s<=b;s++)r[s]=255;for(var t=0;t<d.length;t++){var k=d[t];if(e.has(k.id)){var u=!0,v=!1,w=void 0;try{for(var x,y=a.categoryEncoding.get(k.id)[Symbol.iterator]();!(u=(x=y.next()).done);u=!0){var q=x.value;r[q]=t}}catch(a){v=!0,w=a}finally{try{!u&&y.return&&y.return()}finally{if(v)throw w}}}}this._categoryIdxMap=r}}},{key:"palette",get:function(){if(this.parameter&&(!this.canUsePalette||this.canUsePalette()))return this._palette},set:function(a){this._palette=a,this._updatePaletteIndexFn(),this.redraw(),this.fire("paletteChange")}},{key:"paletteExtent",set:function(a){this.setPaletteExtent(a)},get:function(){return this._paletteExtent}}]),b}(a)}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.linearPalette,d=a.directPalette,e=a.paletteFromObject,f=a.scale}],execute:function(){g=function(){return c(["#deebf7","#3182bd"])},h=function(a){if(a>12)throw new Error("not enough built-in categorical colors, must supply custom colors");return d(["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"].slice(0,a))}}}}),a.register("8a",["84","92","93","94","95","4a","5d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k;return{setters:[function(a){b=a.default},function(a){c=a.enlargeExtentIfEqual},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.isDomain,i=a.fromDomain}],execute:function(){j="black",a("DEFAULT_COLOR",j),k=function(a){function b(a,c){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),h(a)&&(a=i(a),delete c.keys),c.paletteExtent||(c.paletteExtent="full"),g.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this.defaultColor=c.color||j,this.showNoData=c.showNoData}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addMarker(),b.fire("afterAdd")})}},{key:"onRemove",value:function(){this._removeMarker()}},{key:"getBounds",value:function(){return g.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var a=this.domain.axes.get(this._projX).values[0],b=this.domain.axes.get(this._projY).values[0],c=this.projection.unproject({x:a,y:b});return g.latLng(c)}},{key:"computePaletteExtent",value:function(a){if("full"===a){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");var b=this.getValue();return a=c([b,b]),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"getValue",value:function(){if(this.param)return this.range.get({})}},{key:"getValueAt",value:function(a,b){var c=this.getLatLng();if(c.distanceTo(a)<=b)return this.getValue()}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return{r:d[b],g:e[b],b:f[b]}}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}}]),b}(d(f(e(g.Layer)))),a("default",k)}}}),a.register("8d",["84","92","93","94","95","4a","5d","8a"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.enlargeExtentIfEqual},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.isDomain,i=a.fromDomain,j=a.indexOfNearest,k=a.minMaxOfRange},function(a){l=a.DEFAULT_COLOR}],execute:function(){m=function(a){function b(a,c){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),h(a)&&(a=i(a),delete c.keys),c.paletteExtent||(c.paletteExtent="full"),g.Util.setOptions(this,c),this.cov=a,this.param=c.keys?a.parameters.get(c.keys[0]):null,this._axesSubset={z:{coordPref:c.vertical}},this.defaultColor=c.color?c.color:l,this.showNoData=c.showNoData}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){var b=this;this._map=a,this.load().then(function(){return b.initializePalette()}).then(function(){b._addMarker(),b.fire("afterAdd")})}},{key:"_loadCoverageSubset",value:function(){var a=this._axesSubset.z;if(void 0==a.coordPref)a.idx=a.coord=void 0;else{var b=this.domain.axes.get("z").values;a.idx=j(b,a.coordPref),a.coord=b[a.idx]}}},{key:"onRemove",value:function(){this._removeMarker()}},{key:"getBounds",value:function(){return g.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var a=this.domain.axes.get(this._projX).values[0],b=this.domain.axes.get(this._projY).values[0],c=this.projection.unproject({x:a,y:b});return g.latLng(c)}},{key:"canUsePalette",value:function(){return void 0!==this.vertical}},{key:"computePaletteExtent",value:function(a){if("full"===a){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return a=k(this.range),a=c(a),Promise.resolve(a)}throw new Error("Unknown extent specification: "+a)}},{key:"getValue",value:function(){if(this.param&&void 0!==this._axesSubset.z.coord){var a=this.range.get({z:this._axesSubset.z.idx});return a}}},{key:"getValueAt",value:function(a,b){var c=this.getLatLng();if(c.distanceTo(a)<=b)return this.getValue()}},{key:"_getColor",value:function(a){if(null===a)return this.defaultColor;if(void 0===a)return this.defaultColor;var b=this.getPaletteIndex(a),c=this.palette,d=c.red,e=c.green,f=c.blue;return{r:d[b],g:e[b],b:f[b]}}},{key:"coverage",get:function(){return this.cov}},{key:"parameter",get:function(){return this.param}},{key:"vertical",get:function(){return this._axesSubset.z.coord},set:function(a){this._axesSubset.z.coordPref=a,this._loadCoverageSubset(),this.redraw(),this.fire("axisChange",{axis:"vertical"})}},{key:"verticalSlices",get:function(){var a=this.domain.axes.get("z").values;return ArrayBuffer.isView(a)&&(a=[].concat(babelHelpers.toConsumableArray(a))),a}}]),b}(d(f(e(g.Layer)))),a("default",m)}}}),a.register("8e",["8c","8d"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){d=function(a){function b(a,d){var e=this;babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,d),this.pointClass=c,this.pointOptionsFn=function(){return{vertical:e._vertical}},this._vertical=d.vertical}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"canUsePalette",value:function(){return void 0!==this._vertical}},{key:"vertical",set:function(a){this._vertical=a;var b=!0,c=!1,d=void 0;try{for(var e,f=this._layers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){
var g=e.value;g.vertical=a}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}}]),b}(b),a("default",d)}}}),a.register("92",[],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]?256:arguments[1];if(1===b)return c([a[0]]);var d=document.createElement("canvas");d.width=b,d.height=1;for(var e=d.getContext("2d"),f=e.createLinearGradient(0,0,b-1,0),g=a.length,h=0;h<g;h++)f.addColorStop(h/(g-1),a[h]);e.fillStyle=f,e.fillRect(0,0,b,1);for(var i=new Uint8Array(b),j=new Uint8Array(b),k=new Uint8Array(b),l=e.getImageData(0,0,b,1).data,m=0,n=0;m<l.length;m+=4,n++)i[n]=l[m],j[n]=l[m+1],k[n]=l[m+2];return{steps:i.length,red:i,green:j,blue:k}}function c(a){var b=document.createElement("canvas");b.width=1,b.height=1;for(var c=b.getContext("2d"),d=a.length,e=new Uint8Array(d),f=new Uint8Array(d),g=new Uint8Array(d),h=0;h<a.length;h++){c.fillStyle=a[h],c.fillRect(0,0,1,1);var i=c.getImageData(0,0,1,1).data;e[h]=i[0],f[h]=i[1],g[h]=i[2]}return{steps:e.length,red:e,green:f,blue:g}}function d(a){if(a){var d=a.colors,e=void 0;return e="linear"===a.interpolation?b(d,a.steps):c(d)}}function e(a,b,c){var d=Math.trunc((b.steps-1+.9999)*(a-c[0])/(c[1]-c[0]));return d}function f(a){var b=arguments.length<=1||void 0===arguments[1]?.1:arguments[1];if(a[0]===a[1]){var c=a[0]*b;return[a[0]-c,a[1]+c]}return a}function g(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a[c];if(d<0||d>255)throw new Error("Array value must be within [0,255], but is: "+d);b[c]=d}return b}var h;return a("linearPalette",b),a("directPalette",c),a("paletteFromObject",d),a("scale",e),a("enlargeExtentIfEqual",f),{setters:[],execute:function(){h=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=b.defaultSteps,d=void 0===c?256:c;babelHelpers.classCallCheck(this,a),this._defaultSteps=d,this._palettes=new Map}return babelHelpers.createClass(a,[{key:"add",value:function(a,b){if(Array.isArray(b)&&(b=c(b)),![b.red,b.green,b.blue].every(function(a){return a.length===b.red.length}))throw new Error("The red, green, blue arrays of the palette must be of equal lengths");b.red instanceof Uint8Array||(b.red=g(b.red),b.green=g(b.green),b.blue=g(b.blue)),b.steps=b.red.length,this._palettes.set(a,b)}},{key:"addLinear",value:function(a,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=d.steps;this.add(a,b(c,e?e:this._defaultSteps))}},{key:"get",value:function(a){var b=this._palettes.get(a);if(void 0===b)throw new Error('Palette "'+a+'" not found');return b}},{key:Symbol.iterator,get:function(){return this._palettes[Symbol.iterator]}}]),a}(),a("PaletteManager",h)}}}),a.register("84",["4a"],function(a){"use strict";function b(a){var b=function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),b}(a);for(var c in d)b.prototype[c]=d[c];return b}var c,d;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){d=c.Evented.prototype}}}),a.register("97",["84","4a"],function(a){"use strict";function b(a,b){if(a.id&&b.id&&a.id===b.id)return!0;if(!a.observedProperty.id||!b.observedProperty.id)return!1;if(a.observedProperty.id!==b.observedProperty.id)return!1;if(a.unit&&b.unit){if(a.unit.id&&b.unit.id&&a.unit.id!==b.unit.id)return!1;if(a.unit.symbol&&b.unit.symbol&&a.unit.symbol!==b.unit.symbol)return!1}else if(a.unit||b.unit)return!1;if(a.categories&&b.categories){if(a.categories.length!==b.categories.length)return!1;var c=function(a){return!a.id};if(a.categories.some(c)||b.categories.some(c))return!1;var d=!0,e=!1,f=void 0;try{for(var g,h=function(){var a=g.value;if(!b.categories.some(function(b){return a.id===b.id}))return{v:!1}},i=a.categories[Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j=h();if("object"==typeof j)return j.v}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}}else if(a.categories||b.categories)return!1;return!0}var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){e=function(a){function c(a){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),this._syncProps=a.syncProperties||{},this._match=a.match||b,this._paramLayers=new Map,this._layerListeners=new Map,this._propSyncing=new Set}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"addLayer",value:function(a){var b=this;if(!a.parameter)return void console.log("layer has no parameter, skipping parameter sync");var c=Array.from(this._paramLayers.keys()),d=c.find(function(c){return b._match(c,a.parameter)}),e=void 0;d?(e=d,this._paramLayers.get(e).add(a),this._syncProperties(e)):(e=a.parameter,this._paramLayers.set(e,new Set([a]))),this._registerLayerListeners(a,e),d||this.fire("parameterAdd",{syncLayer:new f(e,this)})}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(a){if(this.paused=!1,a){var b=!0,c=!1,d=void 0;try{for(var e,f=this._paramLayers.keys()[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._syncProperties(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}}},{key:"_removeLayer",value:function(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=this._layerListeners.get(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=babelHelpers.slicedToArray(f.value,2),i=h[0],j=h[1];a.off(i,j)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}this._layerListeners.delete(a),this._paramLayers.get(b).delete(a),0===this._paramLayers.get(b).size&&(this._paramLayers.delete(b),this.fire("_parameterRemove",{param:b}))}},{key:"_registerLayerListeners",value:function(a,b){var c=this,d=new Map([["remove",function(){return c._removeLayer(a,b)}]]),e=!0,f=!1,g=void 0;try{for(var h,i=function(){var a=h.value,e=a+"Change";d.set(e,function(){return c._syncProperty(b,a)})},j=Object.keys(this._syncProps)[Symbol.iterator]();!(e=(h=j.next()).done);e=!0)i()}catch(a){f=!0,g=a}finally{try{!e&&j.return&&j.return()}finally{if(f)throw g}}var k=!0,l=!1,m=void 0;try{for(var n,o=d[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=babelHelpers.slicedToArray(n.value,2),q=p[0],r=p[1];a.on(q,r)}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}this._layerListeners.set(a,d)}},{key:"_syncProperties",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=Object.keys(this._syncProps)[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this._syncProperty(a,g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"_syncProperty",value:function(a,b){if(!this.paused&&!this._propSyncing.has(b)){var c=this._syncProps[b],d=[].concat(babelHelpers.toConsumableArray(this._paramLayers.get(a))).map(function(a){return a[b]}).reduce(c);this._propSyncing.add(b);var e=!0,f=!1,g=void 0;try{for(var h,i=this._paramLayers.get(a)[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;j[b]=d}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}this._propSyncing.delete(b),this.fire("_syncPropChange",{param:a,prop:b})}}}]),c}(c(d.Class)),a("default",e),f=function(a){function b(a,c){var d=this;babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this._param=a,c.on("_parameterRemove",function(b){b.param===a&&d.fire("remove")}),c.on("_syncPropChange",function(b){b.param===a&&d.fire(b.prop+"Change")});var e=function(){return c._paramLayers.get(a)},f=!0,g=!1,h=void 0;try{for(var i,j=function(){var a=i.value;Object.defineProperty(d,a,{get:function(){return e().values().next().value[a]},set:function(b){c._propSyncing.add(a);var f=!0,g=!1,h=void 0;try{for(var i,j=e()[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=i.value;k[a]=b}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}c._propSyncing.delete(a),d.fire(a+"Change")},enumerable:!0})},k=Object.keys(c._syncProps)[Symbol.iterator]();!(f=(i=k.next()).done);f=!0)j()}catch(a){g=!0,h=a}finally{try{!f&&k.return&&k.return()}finally{if(g)throw h}}}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"parameter",get:function(){return this._param}}]),b}(c(d.Class))}}}),a.register("98",["72","4a","5d"],function(a){"use strict";function b(a,b){return a.map(function(c,d){return[a[d],b[d]]})}var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.getLanguageString,f=a.stringifyUnit,g=a.getReferenceObject}],execute:function(){h=function(a){function d(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,d),c.maxWidth=c.maxWidth||350,babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,c),this._covs=Array.isArray(a)?a:[a],this._language=c.language,this._precision=c.precision||4,this._labels=c.labels?c.labels:new Array(this._covs.length);var e=[];if(c.keys)e=Array.isArray(c.keys[0])?c.keys:c.keys.map(function(a){return[a]});else for(var f=0;f<this._covs.length;f++){var g=!0,h=!1,i=void 0;try{for(var j,k=this._covs[f].parameters.keys()[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=new Array(this._covs.length);m[f]=l,e.push(m)}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}}if(e=e.filter(function(a){return!a.every(function(a){return!a})}),e.some(function(a){return a.length!==b._covs.length}))throw new Error("Length of each parameter group must match number of coverages");this._paramKeyGroups=e,this._paramKeys=new Map;for(var n=function(a){var c=b._paramKeyGroups.map(function(b){return b[a]}).filter(function(a){return a});b._paramKeys.set(b._covs[a],c)},f=0;f<this._covs.length;f++)n(f)}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"onAdd",value:function(a){var b=this;babelHelpers.get(Object.getPrototypeOf(d.prototype),"onAdd",this).call(this,a),a.fire("dataloading");var c=Promise.all(this._covs.map(function(a){return a.loadDomain()})),e=Promise.all(this._covs.map(function(a){return a.loadRanges(b._paramKeys.get(a))}));Promise.all([c,e]).then(function(c){var d=babelHelpers.slicedToArray(c,2),e=d[0],f=d[1];b._domains=e,b._ranges=f,b._addPlotToPopup(),b.fire("dataLoad"),b.fire("afterAdd"),a.fire("dataload")}).catch(function(c){console.error(c),b.fire("error",c),a.fire("dataload")})}},{key:"_addPlotToPopup",value:function(){var a=this,b=this._paramKeyGroups[0],c=this._getPlotElement(b),d=document.createElement("div");if(this._paramKeyGroups.length>1){var f,g,h,i,j;!function(){var b=document.createElement("select");f=!0,g=!1,h=void 0;try{for(i=a._paramKeyGroups.map(function(a,b){return[a,b]})[Symbol.iterator]();!(f=(j=i.next()).done);f=!0){var k=babelHelpers.slicedToArray(j.value,2),l=k[0],m=k[1],n=a._getRefParam(l),o=document.createElement("option");o.value=m,o.text=e(n.observedProperty.label,a._language),b.appendChild(o)}}catch(a){g=!0,h=a}finally{try{!f&&i.return&&i.return()}finally{if(g)throw h}}b.addEventListener("change",function(){d.removeChild(c);var e=a._paramKeyGroups[parseInt(b.value)];c=a._getPlotElement(e),d.appendChild(c)}),d.appendChild(b)}()}d.appendChild(c),this.setContent(d)}},{key:"_getRefParam",value:function(a){var c=b(this._covs,a),d=babelHelpers.slicedToArray(c.filter(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[1];return c})[0],2),e=d[0],f=d[1],g=e.parameters.get(f);return g}},{key:"_getPlotElement",value:function(a){var d=this,h=this._domains[0],i=b(this._covs,a),j=this._getRefParam(a),k="Vertical",l="",m=g(h,"z");if(m&&1===m.coordinates.length){var n=m.system;if(n.cs&&(n.cs.axes||n.cs.csAxes)){var o=n.cs.axes?n.cs.axes[0]:n.cs.csAxes[0];l=f(o.unit,this._language),o.name&&(k=e(o.name,this._language))}}var p=k;l&&(p+=" ("+l+")");for(var q=f(j.unit,this._language),r=e(j.observedProperty.label,this._language),s={},t=[],u={},v=0;v<this._covs.length;v++){var w=i[v][1];if(w){var x="x"+v,y=j.key+v;u[y]=this._labels[v]?this._labels[v]:r,s[y]=x;for(var z=this._domains[v].axes.get("z").values,A=this._ranges[v].get(w),B=[x],C=[y],D=0;D<z.length;D++){var E=A.get({z:D});if(null!==E){var F=z[D];B.push(F),C.push(E)}}t.push(B),t.push(C)}}var G=350,H=300,I=document.createElement("div");return I.style.width=G+"px",I.style.height=H+"px",c.generate({bindto:I,data:{xs:s,columns:t,names:u},axis:{rotated:!0,x:{tick:{count:10,format:function(a){return a.toPrecision(d._precision)}},label:{text:p,position:"outer-center"}},y:{tick:{count:7,format:function(a){return a.toPrecision(d._precision)}},label:{text:r+(q?" ("+q+")":""),position:"outer-middle"}}},grid:{x:{show:!0},y:{show:!0}},legend:{show:this._covs.length>1},tooltip:{format:{title:function(a){return k+": "+a.toPrecision(d._precision)+" "+l},value:function(a,b,c){return a.toPrecision(d._precision)+" "+q}}},zoom:{enabled:!0,rescale:!0},size:{height:H,width:G}}),I}}]),d}(d.Popup),a("default",h)}}}),a.registerDynamic("99",[],!1,function(b,c,e){var f=a.get("@@global-helpers").prepareGlobal(e.id,"d3",null);return function(a){"exports d3";!function(){function a(a){return a&&(a.ownerDocument||a.document||a).documentElement}function b(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function c(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function e(a){return null===a?NaN:+a}function f(a){return!isNaN(a)}function g(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function h(a){return a.length}function i(a){for(var b=1;a*b%1;)b*=10;return b}function j(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function k(){this._=Object.create(null)}function l(a){return(a+="")===tg||a[0]===ug?ug+a:a}function m(a){return(a+="")[0]===ug?a.slice(1):a}function n(a){return l(a)in this._}function o(a){return(a=l(a))in this._&&delete this._[a]}function p(){var a=[];for(var b in this._)a.push(m(b));return a}function q(){var a=0;for(var b in this._)++a;return a}function r(){for(var a in this._)return!1;return!0}function s(){this._=Object.create(null)}function t(a){return a}function u(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function v(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=vg.length;c<d;++c){var e=vg[c]+b;if(e in a)return e}}function w(){}function x(){}function y(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new k;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function z(){ig.event.preventDefault()}function A(){for(var a,b=ig.event;a=b.sourceEvent;)b=a;return b}function B(a){for(var b=new x,c=0,d=arguments.length;++c<d;)b[arguments[c]]=y(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=ig.event;e.target=a,ig.event=e,b[e.type].apply(c,d)}finally{ig.event=f}}},b}function C(a){return xg(a,Bg),a}function D(a){return"function"==typeof a?a:function(){return yg(a,this)}}function E(a){return"function"==typeof a?a:function(){return zg(a,this)}}function F(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=ig.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function G(a){return a.trim().replace(/\s+/g," ")}function H(a){return new RegExp("(?:^|\\s+)"+ig.requote(a)+"(?:\\s+|$)","g")}function I(a){return(a+"").trim().split(/^|\s+/)}function J(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=I(a).map(K);var e=a.length;return"function"==typeof b?d:c}function K(a){var b=H(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",G(e+" "+a))):c.setAttribute("class",G(e.replace(b," ")))}}function L(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function M(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function N(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c===Cg&&b.documentElement.namespaceURI===Cg?b.createElement(a):b.createElementNS(c,a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=ig.ns.qualify(a)).local?c:b}function O(){var a=this.parentNode;a&&a.removeChild(this)}function P(a){return{__data__:a}}function Q(a){return function(){return Ag(this,a)}}function R(a){return arguments.length||(a=c),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function S(a,b){for(var c=0,d=a.length;c<d;c++)for(var e,f=a[c],g=0,h=f.length;g<h;g++)(e=f[g])&&b(e,g,c);return a}function T(a){return xg(a,Eg),a}function U(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function V(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,kg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+ig.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=W;h>0&&(a=a.slice(0,h));var j=Fg.get(a);return j&&(a=j,i=X),h?b?e:d:b?w:f}function W(a,b){return function(c){var d=ig.event;ig.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{ig.event=d}}}function X(a,b){var c=W(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function Y(c){var d=".dragsuppress-"+ ++Hg,e="click"+d,f=ig.select(b(c)).on("touchmove"+d,z).on("dragstart"+d,z).on("selectstart"+d,z);if(null==Gg&&(Gg=!("onselectstart"in c)&&v(c.style,"userSelect")),Gg){var g=a(c).style,h=g[Gg];g[Gg]="none"}return function(a){if(f.on(d,null),Gg&&(g[Gg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){z(),b()},!0),setTimeout(b,0)}}}function Z(a,c){c.changedTouches&&(c=c.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var e=d.createSVGPoint();if(Ig<0){var f=b(a);if(f.scrollX||f.scrollY){d=ig.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=d[0][0].getScreenCTM();Ig=!(g.f||g.e),d.remove()}}return Ig?(e.x=c.pageX,e.y=c.pageY):(e.x=c.clientX,e.y=c.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[c.clientX-h.left-a.clientLeft,c.clientY-h.top-a.clientTop]}function $(){return ig.event.changedTouches[0].identifier}function _(a){return a>0?1:a<0?-1:0}function aa(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ba(a){return a>1?0:a<-1?Lg:Math.acos(a)}function ca(a){return a>1?Og:a<-1?-Og:Math.asin(a)}function da(a){return((a=Math.exp(a))-1/a)/2}function ea(a){return((a=Math.exp(a))+1/a)/2}function fa(a){return((a=Math.exp(2*a))-1)/(a+1)}function ga(a){return(a=Math.sin(a/2))*a}function ha(){}function ia(a,b,c){return this instanceof ia?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ia?new ia(a.h,a.s,a.l):wa(""+a,xa,ia):new ia(a,b,c)}function ja(a,b,c){function d(a){return a>360?a-=360:a<0&&(a+=360),a<60?f+(g-f)*a/60:a<180?g:a<240?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,g=c<=.5?c*(1+b):c+b-c*b,f=2*c-g,new sa(e(a+120),e(a),e(a-120))}function ka(a,b,c){return this instanceof ka?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ka?new ka(a.h,a.c,a.l):a instanceof ma?oa(a.l,a.a,a.b):oa((a=ya((a=ig.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ka(a,b,c)}function la(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new ma(c,Math.cos(a*=Pg)*b,Math.sin(a)*b)}function ma(a,b,c){return this instanceof ma?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof ma?new ma(a.l,a.a,a.b):a instanceof ka?la(a.h,a.c,a.l):ya((a=sa(a)).r,a.g,a.b):new ma(a,b,c)}function na(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=pa(e)*$g,d=pa(d)*_g,f=pa(f)*ah,new sa(ra(3.2404542*e-1.5371385*d-.4985314*f),ra(-.969266*e+1.8760108*d+.041556*f),ra(.0556434*e-.2040259*d+1.0572252*f))}function oa(a,b,c){return a>0?new ka(Math.atan2(c,b)*Qg,Math.sqrt(b*b+c*c),a):new ka(NaN,NaN,a)}function pa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function qa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function ra(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function sa(a,b,c){return this instanceof sa?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof sa?new sa(a.r,a.g,a.b):wa(""+a,sa,ja):new sa(a,b,c)}function ta(a){return new sa(a>>16,a>>8&255,255&a)}function ua(a){return ta(a)+""}function va(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function wa(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(Aa(e[0]),Aa(e[1]),Aa(e[2]))}return(f=dh.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function xa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=i<.5?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(b<c?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&i<1?0:d),new ia(d,e,i)}function ya(a,b,c){a=za(a),b=za(b),c=za(c);var d=qa((.4124564*a+.3575761*b+.1804375*c)/$g),e=qa((.2126729*a+.7151522*b+.072175*c)/_g),f=qa((.0193339*a+.119192*b+.9503041*c)/ah);return ma(116*e-16,500*(d-e),200*(e-f))}function za(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Aa(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ba(a){return"function"==typeof a?a:function(){return a}}function Ca(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Da(b,c,a,d)}}function Da(a,b,c,d){function e(){var a,b=i.status;if(!b&&Fa(i)||b>=200&&b<300||304===b){try{a=c.call(f,i)}catch(a){return void g.error.call(f,a)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=ig.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=ig.event;ig.event=a;try{g.progress.call(f,i)}finally{ig.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(kg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},ig.rebind(f,g,"on"),null==d?f:f.get(Ea(d))}function Ea(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Fa(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Ga(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={c:a,t:e,n:null};return fh?fh.n=f:eh=f,fh=f,gh||(hh=clearTimeout(hh),gh=1,ih(Ha)),f}function Ha(){var a=Ia(),b=Ja()-a;b>24?(isFinite(b)&&(clearTimeout(hh),hh=setTimeout(Ha,b)),gh=0):(gh=1,ih(Ha))}function Ia(){for(var a=Date.now(),b=eh;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function Ja(){for(var a,b=eh,c=1/0;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:eh=b.n;return fh=a,c}function Ka(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function La(a,b){var c=Math.pow(10,3*sg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Ma(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:t;return function(a){var c=kh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):"e"!=n&&"f"!=n||(m=Math.max(0,Math.min(20,m)))),n=lh.get(n)||Na;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=a<0||0===a&&1/a<0?(a=-a,"-"):"-"===h?"":h;if(o<0){var i=ig.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(w<0){var x=s?a.lastIndexOf("e"):-1;x<0?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=y<k?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Na(a){return a+""}function Oa(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Pa(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new nh(c-1)),1),c}function f(a,c){return b(a=new nh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;g<d;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{nh=Oa;var d=new Oa;return d._=a,g(d,b,c)}finally{nh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Qa(a);return i.floor=i,i.round=Qa(d),i.ceil=Qa(e),i.offset=Qa(f),i.range=h,a}function Qa(a){return function(b,c){try{nh=Oa;var d=new Oa;return d._=b,a(d,c)._}finally{nh=Date}}}function Ra(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=ph[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&nh!==Oa,g=new(f?Oa:nh);return"j"in d?g.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;h<i;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in ph?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{nh=Oa;var b=new nh;return b._=a,d(b)}finally{nh=Date}}var d=b(a);return c.parse=function(a){try{nh=Oa;var b=d.parse(a);return b&&b._}finally{nh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=jb;var t=ig.map(),u=Ta(p),v=Ua(p),w=Ta(q),x=Ua(q),y=Ta(r),z=Ua(r),A=Ta(s),B=Ua(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Sa(a.getDate(),b,2)},e:function(a,b){return Sa(a.getDate(),b,2)},H:function(a,b){return Sa(a.getHours(),b,2)},I:function(a,b){return Sa(a.getHours()%12||12,b,2)},j:function(a,b){return Sa(1+mh.dayOfYear(a),b,3)},L:function(a,b){return Sa(a.getMilliseconds(),b,3)},m:function(a,b){return Sa(a.getMonth()+1,b,2)},M:function(a,b){return Sa(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Sa(a.getSeconds(),b,2)},U:function(a,b){return Sa(mh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Sa(mh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Sa(a.getFullYear()%100,b,2)},Y:function(a,b){return Sa(a.getFullYear()%1e4,b,4)},Z:hb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:bb,e:bb,H:db,I:db,j:cb,L:gb,m:ab,M:eb,p:k,S:fb,U:Wa,w:Va,W:Xa,x:i,X:j,y:Za,Y:Ya,Z:$a,"%":ib};return b}function Sa(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Ta(a){return new RegExp("^(?:"+a.map(ig.requote).join("|")+")","i")}function Ua(a){for(var b=new k,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Va(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Wa(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Xa(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Ya(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Za(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.y=_a(+d[0]),c+d[0].length):-1}function $a(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function _a(a){return a+(a>68?1900:2e3)}function ab(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function bb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function cb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function db(a,b,c){
qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function eb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function fb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function gb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function hb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=sg(b)/60|0,e=sg(b)%60;return c+Sa(d,"0",2)+Sa(e,"0",2)}function ib(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function jb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function kb(){}function lb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function mb(a,b){a&&vh.hasOwnProperty(a.type)&&vh[a.type](a,b)}function nb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function ob(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)nb(a[c],b,1);b.polygonEnd()}function pb(){function a(a,b){a*=Pg,b=b*Pg/2+Lg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);xh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;yh.point=function(g,h){yh.point=a,d=(b=g)*Pg,e=Math.cos(h=(c=h)*Pg/2+Lg/4),f=Math.sin(h)},yh.lineEnd=function(){a(b,c)}}function qb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function rb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function sb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function tb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function ub(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function vb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function wb(a){return[Math.atan2(a[1],a[0]),ca(a[2])]}function xb(a,b){return sg(a[0]-b[0])<Jg&&sg(a[1]-b[1])<Jg}function yb(a,b){a*=Pg;var c=Math.cos(b*=Pg);zb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function zb(a,b,c){++zh,Bh+=(a-Bh)/zh,Ch+=(b-Ch)/zh,Dh+=(c-Dh)/zh}function Ab(){function a(a,e){a*=Pg;var f=Math.cos(e*=Pg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);Ah+=j,Eh+=j*(b+(b=g)),Fh+=j*(c+(c=h)),Gh+=j*(d+(d=i)),zb(b,c,d)}var b,c,d;Kh.point=function(e,f){e*=Pg;var g=Math.cos(f*=Pg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Kh.point=a,zb(b,c,d)}}function Bb(){Kh.point=yb}function Cb(){function a(a,b){a*=Pg;var c=Math.cos(b*=Pg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ba(n)/m,p=Math.atan2(m,n);Hh+=o*j,Ih+=o*k,Jh+=o*l,Ah+=p,Eh+=p*(d+(d=g)),Fh+=p*(e+(e=h)),Gh+=p*(f+(f=i)),zb(d,e,f)}var b,c,d,e,f;Kh.point=function(g,h){b=g,c=h,Kh.point=a,g*=Pg;var i=Math.cos(h*=Pg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),zb(d,e,f)},Kh.lineEnd=function(){a(b,c),Kh.lineEnd=Bb,Kh.point=yb}}function Db(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Eb(){return!0}function Fb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(xb(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Hb(c,a,null,!0),j=new Hb(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Hb(d,a,null,!1),j=new Hb(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Gb(f),Gb(g),f.length){for(var h=0,i=c,j=g.length;h<j;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;h<j;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Gb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Hb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Ib(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Jb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=ig.merge(n);var a=Pb(r,o);n.length?(v||(f.polygonStart(),v=!0),Fb(n,Lb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Kb(),u=b(t),v=!1;return s}}function Jb(a){return a.length>1}function Kb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:w,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Lb(a,b){return((a=a.x)[0]<0?a[1]-Og-Jg:Og-a[1])-((b=b.x)[0]<0?b[1]-Og-Jg:Og-b[1])}function Mb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Lg:-Lg,i=sg(f-c);sg(i-Lg)<Jg?(a.point(c,d=(d+g)/2>0?Og:-Og),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Lg&&(sg(c-e)<Jg&&(c-=e*Jg),sg(f-h)<Jg&&(f-=h*Jg),d=Nb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Nb(a,b,c,d){var e,f,g=Math.sin(a-c);return sg(g)>Jg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Ob(a,b,c,d){var e;if(null==a)e=c*Og,d.point(-Lg,e),d.point(0,e),d.point(Lg,e),d.point(Lg,0),d.point(Lg,-e),d.point(0,-e),d.point(-Lg,-e),d.point(-Lg,0),d.point(-Lg,e);else if(sg(a[0]-b[0])>Jg){var f=a[0]<b[0]?Lg:-Lg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Pb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;xh.reset();for(var h=0,i=b.length;h<i;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Lg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Lg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Lg,z=o*t;if(xh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Mg:v,y^m>=c^r>=c){var A=sb(qb(l),qb(a));vb(A);var B=sb(e,A);vb(B);var C=(y^v>=0?-1:1)*ca(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(f<-Jg||f<Jg&&xh<-Jg)^1&g}function Qb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(l<0?Lg:-Lg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(xb(c,n)||xb(o,n))&&(o[0]+=Jg,o[1]+=Jg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&xb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=qb(a),e=qb(b),g=[1,0,0],h=sb(d,e),i=rb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=sb(g,h),o=ub(g,l),p=ub(h,m);tb(o,p);var q=n,r=rb(o,q),s=rb(q,q),t=r*r-s*(rb(o,o)-1);if(!(t<0)){var u=Math.sqrt(t),v=ub(q,(-r-u)/s);if(tb(v,o),v=wb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];y<x&&(w=x,x=y,y=w);var B=y-x,C=sg(B-Lg)<Jg,D=C||B<Jg;if(!C&&A<z&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(sg(v[0]-x)<Jg?z:A):z<=v[1]&&v[1]<=A:B>Lg^(x<=v[0]&&v[0]<=y)){var E=ub(q,(-r+u)/s);return tb(E,o),[v,wb(E)]}}}function e(b,c){var d=g?a:Lg-a,e=0;return b<-d?e|=1:b>d&&(e|=2),c<-d?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=sg(f)>Jg,i=pc(a,6*Pg);return Ib(b,c,i,g?[0,-a]:[-Lg,a-Lg])}function Rb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,o<0){if(f<m)return;f<n&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(f<0)){if(f/=o,o<0){if(f>n)return;f>m&&(m=f)}else if(o>0){if(f<m)return;f<n&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,p<0){if(f<m)return;f<n&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(f<0)){if(f/=p,p<0){if(f>n)return;f>m&&(m=f)}else if(p>0){if(f<m)return;f<n&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),n<1&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Sb(a,b,c,d){function e(d,e){return sg(d[0]-a)<Jg?e>0?0:3:sg(d[0]-c)<Jg?e>0?2:1:sg(d[1]-b)<Jg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;e<c;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];g<i;++g)f=h[g],j[1]<=d?f[1]>d&&aa(j,f,a)>0&&++b:f[1]<=d&&aa(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return a<=e&&e<=c&&b<=f&&f<=d}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Mh,Math.min(Mh,a)),b=Math.max(-Mh,Math.min(Mh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Kb(),C=Rb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=ig.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Fb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Tb(a){var b=0,c=Lg/3,d=hc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Lg/180,c=a[1]*Lg/180):[b/Lg*180,c/Lg*180]},e}function Ub(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ca((f-(a*a+c*c)*e*e)/(2*e))]},c}function Vb(){function a(a,b){Oh+=e*a-d*b,d=a,e=b}var b,c,d,e;Th.point=function(f,g){Th.point=a,b=d=f,c=e=g},Th.lineEnd=function(){a(b,c)}}function Wb(a,b){a<Ph&&(Ph=a),a>Rh&&(Rh=a),b<Qh&&(Qh=b),b>Sh&&(Sh=b)}function Xb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Yb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Yb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Yb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Zb(a,b){Bh+=a,Ch+=b,++Dh}function $b(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Eh+=g*(b+a)/2,Fh+=g*(c+d)/2,Gh+=g,Zb(b=a,c=d)}var b,c;Vh.point=function(d,e){Vh.point=a,Zb(b=d,c=e)}}function _b(){Vh.point=Zb}function ac(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Eh+=g*(d+a)/2,Fh+=g*(e+b)/2,Gh+=g,g=e*a-d*b,Hh+=g*(d+a),Ih+=g*(e+b),Jh+=3*g,Zb(d=a,e=b)}var b,c,d,e;Vh.point=function(f,g){Vh.point=a,Zb(b=d=f,c=e=g)},Vh.lineEnd=function(){a(b,c)}}function bc(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Mg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:w};return h}function cc(a){function b(a){return(h?d:c)(a)}function c(b){return fc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=qb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=sg(sg(x)-1)<Jg||sg(d-m)<Jg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||sg((s*E+t*F)/u-.5)>.3||h*n+i*o+j*p<g)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Pg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function dc(a){var b=cc(function(b,c){return a([b*Qg,c*Qg])});return function(a){return ic(b(a))}}function ec(a){this.stream=a}function fc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function gc(a){return hc(function(){return a})()}function hc(a){function b(a){return a=h(a[0]*Pg,a[1]*Pg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Qg,a[1]*Qg]}function d(){h=Db(g=lc(r,s,u),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=cc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,u=0,v=Lh,w=t,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=ic(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Lh):Qb((x=+a)*Pg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Sb(a[0][0],a[0][1],a[1][0],a[1][1]):t,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Pg,q=a[1]%360*Pg,d()):[p*Qg,q*Qg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Pg,s=a[1]%360*Pg,u=a.length>2?a[2]%360*Pg:0,d()):[r*Qg,s*Qg,u*Qg]},ig.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function ic(a){return fc(a,function(b,c){a.point(b*Pg,c*Pg)})}function jc(a,b){return[a,b]}function kc(a,b){return[a>Lg?a-Mg:a<-Lg?a+Mg:a,b]}function lc(a,b,c){return a?b||c?Db(nc(a),oc(b,c)):nc(a):b||c?oc(b,c):kc}function mc(a){return function(b,c){return b+=a,[b>Lg?b-Mg:b<-Lg?b+Mg:b,c]}}function nc(a){var b=mc(a);return b.invert=mc(-a),b}function oc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),ca(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),ca(k*d-h*e)]},c}function pc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=qc(c,e),f=qc(c,f),(g>0?e<f:e>f)&&(e+=g*Mg)):(e=a+g*Mg,f=a-.5*i);for(var j,k=e;g>0?k>f:k<f;k-=i)h.point((j=wb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function qc(a,b){var c=qb(b);c[0]-=a,vb(c);var d=ba(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Jg)%(2*Math.PI)}function rc(a,b,c){var d=ig.range(a,b-Jg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function sc(a,b,c){var d=ig.range(a,b-Jg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function tc(a){return a.source}function uc(a){return a.target}function vc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ga(d-b)+e*g*ga(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Qg,Math.atan2(g,Math.sqrt(d*d+e*e))*Qg]}:function(){return[a*Qg,b*Qg]};return o.distance=m,o}function wc(){function a(a,e){var f=Math.sin(e*=Pg),g=Math.cos(e),h=sg((a*=Pg)-b),i=Math.cos(h);Wh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Xh.point=function(e,f){b=e*Pg,c=Math.sin(f*=Pg),d=Math.cos(f),Xh.point=a},Xh.lineEnd=function(){Xh.point=Xh.lineEnd=w}}function xc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function yc(a,b){function c(a,b){g>0?b<-Og+Jg&&(b=-Og+Jg):b>Og-Jg&&(b=Og-Jg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Lg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=_(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Og]},c):Ac}function zc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return sg(e)<Jg?jc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-_(e)*Math.sqrt(a*a+c*c)]},c)}function Ac(a,b){return[a,Math.log(Math.tan(Lg/4+b/2))]}function Bc(a){var b,c=gc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Lg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Cc(a,b){return[Math.log(Math.tan(Lg/4+b/2)),-a]}function Dc(a){return a[0]}function Ec(a){return a[1]}function Fc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;d>1&&aa(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Gc(a,b){return a[0]-b[0]||a[1]-b[1]}function Hc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ic(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Jc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Kc(){dd(this),this.edge=this.site=this.circle=null}function Lc(a){var b=hi.pop()||new Kc;return b.site=a,b}function Mc(a){Wc(a),ei.remove(a),hi.push(a),dd(a)}function Nc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Mc(a);for(var i=f;i.circle&&sg(c-i.circle.x)<Jg&&sg(d-i.circle.cy)<Jg;)f=i.P,h.unshift(i),Mc(i),i=f;h.unshift(i),Wc(i);for(var j=g;j.circle&&sg(c-j.circle.x)<Jg&&sg(d-j.circle.cy)<Jg;)g=j.N,h.push(j),Mc(j),j=g;h.push(j),Wc(j);var k,l=h.length;for(k=1;k<l;++k)j=h[k],i=h[k-1],ad(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=$c(i.site,j.site,null,e),Vc(i),Vc(j)}function Oc(a){for(var b,c,d,e,f=a.x,g=a.y,h=ei._;h;)if(d=Pc(h,g)-f,d>Jg)h=h.L;else{if(e=f-Qc(h,g),!(e>Jg)){d>-Jg?(b=h.P,c=h):e>-Jg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Lc(a);if(ei.insert(b,i),b||c){if(b===c)return Wc(b),c=Lc(b.site),ei.insert(i,c),i.edge=c.edge=$c(b.site,i.site),Vc(b),void Vc(c);if(!c)return void(i.edge=$c(b.site,i.site));Wc(b),Wc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};ad(c.edge,j,o,u),i.edge=$c(j,a,null,u),c.edge=$c(a,o,null,u),Vc(b),Vc(c)}}function Pc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Qc(a,b){var c=a.N;if(c)return Pc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Rc(a){this.site=a,this.edges=[]}function Sc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=di,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;g<i;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(sg(d-b)>Jg||sg(e-c)>Jg)&&(h.splice(g,0,new bd(_c(f.site,k,sg(d-l)<Jg&&o-e>Jg?{x:l,y:sg(b-l)<Jg?c:o}:sg(e-o)<Jg&&m-d>Jg?{x:sg(c-o)<Jg?b:m,y:o}:sg(d-m)<Jg&&e-n>Jg?{x:m,y:sg(b-m)<Jg?c:n}:sg(e-n)<Jg&&d-l>Jg?{x:sg(c-n)<Jg?b:l,y:n}:null),f.site,null)),++i)}function Tc(a,b){return b.angle-a.angle}function Uc(){dd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Kg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=ii.pop()||new Uc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=gi._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}gi.insert(s,r),s||(fi=r)}}}}function Wc(a){var b=a.circle;b&&(b.P||(fi=b.N),gi.remove(b),ii.push(b),dd(b),a.circle=null)}function Xc(a){for(var b,c=ci,d=Rb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Yc(b,a)||!d(b)||sg(b.a.x-b.b.x)<Jg&&sg(b.a.y-b.b.y)<Jg)&&(b.a=b.b=null,c.splice(e,1))}function Yc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(q<g||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,d<-1||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(n<p){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Zc(a,b){this.l=a,this.r=b,this.a=this.b=null}function $c(a,b,c,d){var e=new Zc(a,b);return ci.push(e),c&&ad(e,a,b,c),d&&ad(e,b,a,d),di[a.i].edges.push(new bd(e,a,b)),di[b.i].edges.push(new bd(e,b,a)),e}function _c(a,b,c){var d=new Zc(a,null);return d.a=b,d.b=c,ci.push(d),d}function ad(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function bd(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function cd(){this._=null}function dd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function ed(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function fd(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function gd(a){for(;a.L;)a=a.L;return a}function hd(a,b){var c,d,e,f=a.sort(id).pop();for(ci=[],di=new Array(a.length),ei=new cd,gi=new cd;;)if(e=fi,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))f.x===c&&f.y===d||(di[f.i]=new Rc(f),Oc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Nc(e.arc)}b&&(Xc(b),Sc(b));var g={cells:di,edges:ci};return ei=gi=ci=di=null,g}function id(a,b){return b.y-a.y||b.x-a.x}function jd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function kd(a){return a.x}function ld(a){return a.y}function md(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function nd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&nd(a,i[0],c,d,g,h),i[1]&&nd(a,i[1],g,d,e,h),i[2]&&nd(a,i[2],c,h,g,f),i[3]&&nd(a,i[3],g,h,e,f)}}function od(a,b,c,d,e,f,g){var h,i=1/0;return function a(j,k,l,m,n){if(!(k>f||l>g||m<d||n<e)){if(o=j.point){var o,p=b-j.x,q=c-j.y,r=p*p+q*q;if(r<i){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=j.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;y<z;++y)if(j=t[3&y])switch(3&y){case 0:a(j,k,l,u,v);break;case 1:a(j,u,l,m,v);break;case 2:a(j,k,v,u,n);break;case 3:a(j,u,v,m,n)}}}(a,d,e,f,g),h}function pd(a,b){a=ig.rgb(a),b=ig.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+va(Math.round(c+f*a))+va(Math.round(d+g*a))+va(Math.round(e+h*a))}}function qd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=td(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function rd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function sd(a,b){var c,d,e,f=ki.lastIndex=li.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=ki.exec(a))&&(d=li.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:rd(c,d)})),f=li.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function td(a,b){for(var c,d=ig.interpolators.length;--d>=0&&!(c=ig.interpolators[d](a,b)););return c}function ud(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;c<h;++c)d.push(td(a[c],b[c]));for(;c<f;++c)e[c]=a[c];for(;c<g;++c)e[c]=b[c];return function(a){for(c=0;c<h;++c)e[c]=d[c](a);return e}}function vd(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function wd(a){return function(b){return 1-a(1-b)}}function xd(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function yd(a){return a*a}function zd(a){return a*a*a}function Ad(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function Bd(a){return function(b){return Math.pow(b,a)}}function Cd(a){return 1-Math.cos(a*Og)}function Dd(a){return Math.pow(2,10*(a-1))}function Ed(a){return 1-Math.sqrt(1-a*a)}function Fd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Mg*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Mg/b)}}function Gd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Hd(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Id(a,b){a=ig.hcl(a),b=ig.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return la(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){a=ig.hsl(a),b=ig.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ja(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){a=ig.lab(a),b=ig.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return na(c+f*a,d+g*a,e+h*a)+""}}function Ld(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Md(a){var b=[a.a,a.b],c=[a.c,a.d],d=Od(b),e=Nd(b,c),f=Od(Pd(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Qg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Qg:0}function Nd(a,b){return a[0]*b[0]+a[1]*b[1]}function Od(a){var b=Math.sqrt(Nd(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Pd(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Qd(a){return a.length?a.pop()+",":""}function Rd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push("translate(",null,",",null,")");d.push({i:e-4,x:rd(a[0],b[0])},{i:e-2,x:rd(a[1],b[1])})}else(b[0]||b[1])&&c.push("translate("+b+")")}function Sd(a,b,c,d){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),d.push({i:c.push(Qd(c)+"rotate(",null,")")-2,x:rd(a,b)})):b&&c.push(Qd(c)+"rotate("+b+")")}function Td(a,b,c,d){a!==b?d.push({i:c.push(Qd(c)+"skewX(",null,")")-2,x:rd(a,b)}):b&&c.push(Qd(c)+"skewX("+b+")")}function Ud(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push(Qd(c)+"scale(",null,",",null,")");d.push({i:e-4,x:rd(a[0],b[0])},{i:e-2,x:rd(a[1],b[1])})}else 1===b[0]&&1===b[1]||c.push(Qd(c)+"scale("+b+")")}function Vd(a,b){var c=[],d=[];return a=ig.transform(a),b=ig.transform(b),Rd(a.translate,b.translate,c,d),Sd(a.rotate,b.rotate,c,d),Td(a.skew,b.skew,c,d),Ud(a.scale,b.scale,c,d),a=b=null,function(a){for(var b,e=-1,f=d.length;++e<f;)c[(b=d[e]).i]=b.x(a);return c.join("")}}function Wd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Xd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Yd(a){for(var b=a.source,c=a.target,d=$d(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Zd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function $d(a,b){if(a===b)return a;for(var c=Zd(a),d=Zd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function _d(a){a.fixed|=2}function ae(a){a.fixed&=-7}function be(a){a.fixed|=4,a.px=a.x,a.py=a.y}function ce(a){a.fixed&=-5}function de(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(de(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function ee(a,b){return ig.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=ke,a}function fe(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function ge(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function he(a){return a.children}function ie(a){return a.value}function je(a,b){return b.value-a.value}function ke(a){return ig.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function le(a){return a.x}function me(a){return a.y}function ne(a,b,c){a.y0=b,a.y=c}function oe(a){return ig.range(a.length)}function pe(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function qe(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;c<f;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function re(a){return a.reduce(se,0)}function se(a,b){return a+b[1]}function te(a,b){return ue(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ue(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function ve(a){return[ig.min(a),ig.max(a)]}function we(a,b){return a.value-b.value}function xe(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function ye(a,b){a._pack_next=b,b._pack_prev=a}function ze(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Ae(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(Be),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],Ee(d,e,f),b(f),xe(d,f),d._pack_prev=f,
xe(f,e),e=d._pack_next,g=3;g<j;g++){Ee(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(ze(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!ze(i,f);i=i._pack_prev,q++);o?(p<q||p==q&&e.r<d.r?ye(d,e=h):ye(d=i,e),g--):(xe(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;g<j;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(Ce)}}function Be(a){a._pack_next=a._pack_prev=a}function Ce(a){delete a._pack_next,delete a._pack_prev}function De(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)De(e[f],b,c,d)}function Ee(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Fe(a,b){return a.parent==b.parent?1:2}function Ge(a){var b=a.children;return b.length?b[0]:a.t}function He(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Ie(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Je(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Ke(a,b,c){return a.a.parent===b.parent?a.a:c}function Le(a){return 1+ig.max(a,function(a){return a.y})}function Me(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Ne(a){var b=a.children;return b&&b.length?Ne(b[0]):a}function Oe(a){var b,c=a.children;return c&&(b=c.length)?Oe(c[b-1]):a}function Pe(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Qe(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Re(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function Se(a){return a.rangeExtent?a.rangeExtent():Re(a.range())}function Te(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ue(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Ve(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:wi}function We(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=ig.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Xe(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?We:Te,i=d?Xd:Wd;return g=e(a,b,i,c),h=e(b,a,i,td),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ld)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return _e(a,b)},f.tickFormat=function(b,c){return af(a,b,c)},f.nice=function(b){return Ze(a,b),e()},f.copy=function(){return Xe(a,b,c,d)},e()}function Ye(a,b){return ig.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ze(a,b){return Ue(a,Ve($e(a,b)[2])),Ue(a,Ve($e(a,b)[2])),a}function $e(a,b){null==b&&(b=10);var c=Re(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function _e(a,b){return ig.range.apply(ig,$e(a,b))}function af(a,b,c){var d=$e(a,b);if(c){var e=kh.exec(c);if(e.shift(),"s"===e[8]){var f=ig.formatPrefix(Math.max(sg(d[0]),sg(d[1])));return e[7]||(e[7]="."+bf(f.scale(d[2]))),e[8]="f",c=ig.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+cf(e[8],d)),c=e.join("")}else c=",."+bf(d[2])+"f";return ig.format(c)}function bf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function cf(a,b){var c=bf(b[2]);return a in xi?Math.abs(c-bf(Math.max(sg(b[0]),sg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function df(a,b,c,d){function e(a){return(c?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ue(d.map(e),c?Math:zi);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Re(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;j<k;j++)for(var m=1;m<l;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,c){if(!arguments.length)return yi;arguments.length<2?c=yi:"function"!=typeof c&&(c=ig.format(c));var d=Math.max(1,b*a/g.ticks().length);return function(a){var g=a/f(Math.round(e(a)));return g*b<b-.5&&(g*=b),g<=d?c(a):""}},g.copy=function(){return df(a.copy(),b,c,d)},Ye(g,a)}function ef(a,b,c){function d(b){return a(e(b))}var e=ff(b),f=ff(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return _e(c,a)},d.tickFormat=function(a,b){return af(c,a,b)},d.nice=function(a){return d.domain(Ze(c,a))},d.exponent=function(g){return arguments.length?(e=ff(b=g),f=ff(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return ef(a.copy(),b,c)},Ye(d,a)}function ff(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function gf(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return ig.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new k;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Re(b.a[0])},c.copy=function(){return gf(a,b)},c.domain(a)}function hf(a,b){function d(){var c=0,d=b.length;for(h=[];++c<d;)h[c-1]=ig.quantile(a,c/d);return g}function g(a){if(!isNaN(a=+a))return b[ig.bisect(h,a)]}var h;return g.domain=function(b){return arguments.length?(a=b.map(e).filter(f).sort(c),d()):a},g.range=function(a){return arguments.length?(b=a,d()):b},g.quantiles=function(){return h},g.invertExtent=function(c){return c=b.indexOf(c),c<0?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},g.copy=function(){return hf(a,b)},d()}function jf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return jf(a,b,c)},e()}function kf(a,b){function c(c){if(c<=c)return b[ig.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return kf(a,b)},c}function lf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return _e(a,b)},b.tickFormat=function(b,c){return af(a,b,c)},b.copy=function(){return lf(a)},b}function mf(){return 0}function nf(a){return a.innerRadius}function of(a){return a.outerRadius}function pf(a){return a.startAngle}function qf(a){return a.endAngle}function rf(a){return a&&a.padAngle}function sf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function tf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(r<0?-1:1)*Math.sqrt(Math.max(0,t*t*s-u*u)),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function uf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ba(c),o=Ba(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Dc,d=Ec,e=Eb,f=vf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Fi.get(a)||vf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function vf(a){return a.length>1?a.join("L"):a+"Z"}function wf(a){return a.join("L")+"Z"}function xf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function zf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Af(a,b){return a.length<4?vf(a):a[1]+Df(a.slice(1,-1),Ef(a,b))}function Bf(a,b){return a.length<3?wf(a):a[0]+Df((a.push(a[0]),a),Ef([a[a.length-2]].concat(a,[a[1]]),b))}function Cf(a,b){return a.length<3?vf(a):a[0]+Df(a,Ef(a,b))}function Df(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return vf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Ef(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Ff(a){if(a.length<3)return vf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Jf(Ii,g),",",Jf(Ii,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Kf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Gf(a){if(a.length<4)return vf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Jf(Ii,f)+","+Jf(Ii,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Kf(c,f,g);return c.join("")}function Hf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Jf(Ii,g),",",Jf(Ii,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Kf(b,g,h);return b.join("")}function If(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Ff(a)}function Jf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Kf(a,b,c){a.push("C",Jf(Gi,b),",",Jf(Gi,c),",",Jf(Hi,b),",",Jf(Hi,c),",",Jf(Ii,b),",",Jf(Ii,c))}function Lf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Mf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Lf(e,f);++b<c;)d[b]=(g+(g=Lf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Nf(a){for(var b,c,d,e,f=[],g=Mf(a),h=-1,i=a.length-1;++h<i;)b=Lf(a[h],a[h+1]),sg(b)<Jg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Of(a){return a.length<3?vf(a):a[0]+Df(a,Nf(a))}function Pf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Og,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Qf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ba(c),v=Ba(e),w=c===d?function(){return n}:Ba(d),x=e===f?function(){return o}:Ba(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Dc,d=Dc,e=0,f=Ec,g=Eb,h=vf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Fi.get(a)||vf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Rf(a){return a.radius}function Sf(a){return[a.x,a.y]}function Tf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Og;return[c*Math.cos(d),c*Math.sin(d)]}}function Uf(){return 64}function Vf(){return"circle"}function Wf(a){var b=Math.sqrt(a/Lg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Xf(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Yf(a,b,c){return xg(a,Pi),a.namespace=b,a.id=c,a}function Zf(a,b,c,d){var e=a.id,f=a.namespace;return S(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function $f(a){return null==a&&(a=""),function(){this.textContent=a}}function _f(a){return null==a?"__transition__":"__transition_"+a+"__"}function ag(a,b,c,d,e){function f(a){var b=p.delay;return j.t=b+i,b<=a?g(a-b):void(j.c=g)}function g(c){var e=o.active,f=o[e];f&&(f.timer.c=null,f.timer.t=NaN,--o.count,delete o[e],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var g in o)if(+g<d){var k=o[g];k.timer.c=null,k.timer.t=NaN,--o.count,delete o[g]}j.c=h,Ga(function(){return j.c&&h(c||1)&&(j.c=null,j.t=NaN),1},0,i),o.active=d,p.event&&p.event.start.call(a,a.__data__,b),n=[],p.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&n.push(d)}),m=p.ease,l=p.duration}function h(e){for(var f=e/l,g=m(f),h=n.length;h>0;)n[--h].call(a,g);if(f>=1)return p.event&&p.event.end.call(a,a.__data__,b),--o.count?delete o[d]:delete a[c],1}var i,j,l,m,n,o=a[c]||(a[c]={active:0,count:0}),p=o[d];p||(i=e.time,j=Ga(f,0,i),p=o[d]={tween:new k,time:i,timer:j,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++o.count)}function bg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function cg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function dg(a){return a.toISOString()}function eg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=ig.bisect(Yi,e);return f==Yi.length?[b.year,$e(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Yi[f-1]<Yi[f]/e?f-1:f]:[_i,$e(a,c)[2]]}return d.invert=function(b){return fg(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(fg)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,fg(+c+1),b).length}var f=d.domain(),g=Re(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ue(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=fg(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=fg(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Re(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],fg(+c[1]+1),b<1?1:b)},d.tickFormat=function(){return c},d.copy=function(){return eg(a.copy(),b,c)},Ye(d,a)}function fg(a){return new Date(a)}function gg(a){return JSON.parse(a.responseText)}function hg(a){var b=lg.createRange();return b.selectNode(lg.body),b.createContextualFragment(a.responseText)}var ig={version:"3.5.17"},jg=[].slice,kg=function(a){return jg.call(a)},lg=this.document;if(lg)try{kg(lg.documentElement.childNodes)[0].nodeType}catch(a){kg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),lg)try{lg.createElement("DIV").style.setProperty("opacity",0,"")}catch(a){var mg=this.Element.prototype,ng=mg.setAttribute,og=mg.setAttributeNS,pg=this.CSSStyleDeclaration.prototype,qg=pg.setProperty;mg.setAttribute=function(a,b){ng.call(this,a,b+"")},mg.setAttributeNS=function(a,b,c){og.call(this,a,b,c+"")},pg.setProperty=function(a,b,c){qg.call(this,a,b+"",c)}}ig.ascending=c,ig.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},ig.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},ig.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},ig.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),e<d&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),e<d&&(e=d))}return[c,e]},ig.sum=function(a,b){var c,d=0,e=a.length,g=-1;if(1===arguments.length)for(;++g<e;)f(c=+a[g])&&(d+=c);else for(;++g<e;)f(c=+b.call(a,a[g],g))&&(d+=c);return d},ig.mean=function(a,b){var c,d=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)f(c=e(a[h]))?d+=c:--i;else for(;++h<g;)f(c=e(b.call(a,a[h],h)))?d+=c:--i;if(i)return d/i},ig.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},ig.median=function(a,b){var d,g=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)f(d=e(a[i]))&&g.push(d);else for(;++i<h;)f(d=e(b.call(a,a[i],i)))&&g.push(d);if(g.length)return ig.quantile(g.sort(c),.5)},ig.variance=function(a,b){var c,d,g=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<g;)f(c=e(a[j]))&&(d=c-h,h+=d/++k,i+=d*(c-h));else for(;++j<g;)f(c=e(b.call(a,a[j],j)))&&(d=c-h,h+=d/++k,i+=d*(c-h));if(k>1)return i/(k-1)},ig.deviation=function(){var a=ig.variance.apply(this,arguments);return a?Math.sqrt(a):a};var rg=g(c);ig.bisectLeft=rg.left,ig.bisect=ig.bisectRight=rg.right,ig.bisector=function(a){return g(1===a.length?function(b,d){return c(a(b),d)}:a)},ig.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,f<2&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},ig.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},ig.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(d<0?0:d);c<d;)f[c]=[b=e,e=a[++c]];return f},ig.transpose=function(a){if(!(e=a.length))return[];for(var b=-1,c=ig.min(a,h),d=new Array(c);++b<c;)for(var e,f=-1,g=d[b]=new Array(e);++f<e;)g[f]=a[f][b];return d},ig.zip=function(){return ig.transpose(arguments)},ig.keys=function(a){var b=[];for(var c in a)b.push(c);return b},ig.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},ig.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},ig.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var sg=Math.abs;ig.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=i(sg(c)),g=-1;if(a*=f,b*=f,c*=f,c<0)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},ig.map=function(a,b){var c=new k;if(a instanceof k)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var tg="__proto__",ug="\0";j(k,{has:n,get:function(a){return this._[l(a)]},set:function(a,b){return this._[l(a)]=b},remove:o,keys:p,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:m(b),value:this._[b]});return a},size:q,empty:r,forEach:function(a){for(var b in this._)a.call(this,m(b),this._[b])}}),ig.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,j,l,m,n=-1,o=g.length,p=f[h++],q=new k;++n<o;)(m=q.get(i=p(j=g[n])))?m.push(j):q.set(i,[j]);return b?(j=b(),l=function(c,d){j.set(c,a(b,d,h))}):(j={},l=function(c,d){j[c]=a(b,d,h)}),q.forEach(l),j}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(ig.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},ig.set=function(a){var b=new s;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},j(s,{has:n,add:function(a){return this._[l(a+="")]=!0,a},remove:o,values:p,size:q,empty:r,forEach:function(a){for(var b in this._)a.call(this,m(b))}}),ig.behavior={},ig.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=u(a,b,b[c]);return a};var vg=["webkit","ms","moz","Moz","o","O"];ig.dispatch=function(){for(var a=new x,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=y(a);return a},x.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},ig.event=null,ig.requote=function(a){return a.replace(wg,"\\$&")};var wg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},yg=function(a,b){return b.querySelector(a)},zg=function(a,b){return b.querySelectorAll(a)},Ag=function(a,b){var c=a.matches||a[v(a,"matchesSelector")];return(Ag=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(yg=function(a,b){return Sizzle(a,b)[0]||null},zg=Sizzle,Ag=Sizzle.matchesSelector),ig.selection=function(){return ig.select(lg.documentElement)};var Bg=ig.selection.prototype=[];Bg.select=function(a){var b,c,d,e,f=[];a=D(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return C(f)},Bg.selectAll=function(a){var b,c,d=[];a=E(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=kg(a.call(c,c.__data__,h,e))),b.parentNode=c);return C(d)};var Cg="http://www.w3.org/1999/xhtml",Dg={svg:"http://www.w3.org/2000/svg",xhtml:Cg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ig.ns={prefix:Dg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1)),Dg.hasOwnProperty(c)?{space:Dg[c],local:a}:a}},Bg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=ig.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(F(b,a[b]));return this}return this.each(F(a,b))},Bg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=I(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!H(a[e]).test(b))return!1;return!0}for(b in a)this.each(J(b,a[b]));return this}return this.each(J(a,b))},Bg.style=function(a,c,d){var e=arguments.length;if(e<3){if("string"!=typeof a){e<2&&(c="");for(d in a)this.each(L(d,a[d],c));return this}if(e<2){var f=this.node();return b(f).getComputedStyle(f,null).getPropertyValue(a)}d=""}return this.each(L(a,c,d))},Bg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(M(b,a[b]));return this}return this.each(M(a,b))},Bg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Bg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Bg.append=function(a){return a=N(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},Bg.insert=function(a,b){return a=N(a),b=D(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},Bg.remove=function(){return this.each(O)},Bg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new k,s=new Array(g);for(d=-1;++d<g;)(e=a[d])&&(r.has(q=b.call(e,e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q);for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=P(f),r.set(q,!0);for(d=-1;++d<g;)d in s&&r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=P(f);for(;d<l;++d)o[d]=P(c[d]);for(;d<g;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),j.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=T([]),i=C([]),j=C([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return j},i},Bg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Bg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Q(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return C(e)},Bg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Bg.sort=function(a){a=R.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Bg.each=function(a){return S(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Bg.call=function(a){var b=kg(arguments);return a.apply(b[0]=this,b),this},Bg.empty=function(){return!this.node()},Bg.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},Bg.size=function(){var a=0;return S(this,function(){++a}),a};var Eg=[];ig.selection.enter=T,ig.selection.enter.prototype=Eg,Eg.append=Bg.append,Eg.empty=Bg.empty,Eg.node=Bg.node,Eg.call=Bg.call,Eg.size=Bg.size,Eg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return C(g)},Eg.insert=function(a,b){return arguments.length<2&&(b=U(this)),Bg.insert.call(this,a,b)},ig.select=function(b){var c;return"string"==typeof b?(c=[yg(b,lg)],c.parentNode=lg.documentElement):(c=[b],c.parentNode=a(b)),C([c])},ig.selectAll=function(a){var b;return"string"==typeof a?(b=kg(zg(a,lg)),b.parentNode=lg.documentElement):(b=kg(a),b.parentNode=null),C([b])},Bg.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(V(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(V(a,b,c))};var Fg=ig.map({mouseenter:"mouseover",mouseleave:"mouseout"});lg&&Fg.forEach(function(a){"on"+a in lg&&Fg.remove(a)});var Gg,Hg=0;ig.mouse=function(a){return Z(a,A())};var Ig=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ig.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=A().changedTouches),b)for(var d,e=0,f=b.length;e<f;++e)if((d=b[e]).identifier===c)return Z(a,d)},ig.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function c(a,b,c,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o),n({type:"dragend"}))}var j,k=this,l=ig.event.target.correspondingElement||ig.event.target,m=k.parentNode,n=d.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=ig.select(c(l)).on(f+q,h).on(g+q,i),s=Y(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var d=B(a,"drag","dragstart","dragend"),e=null,f=c(w,ig.mouse,b,"mousemove","mouseup"),g=c($,ig.touch,t,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},ig.rebind(a,d,"on")},ig.touches=function(a,b){return arguments.length<2&&(b=A().touches),b?kg(b).map(function(b){var c=Z(a,b);return c.identifier=b.identifier,c}):[]};var Jg=1e-6,Kg=Jg*Jg,Lg=Math.PI,Mg=2*Lg,Ng=Mg-Jg,Og=Lg/2,Pg=Lg/180,Qg=180/Lg,Rg=Math.SQRT2,Sg=2,Tg=4;ig.interpolateZoom=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(m<Kg)d=Math.log(j/g)/Rg,c=function(a){return[e+a*k,f+a*l,g*Math.exp(Rg*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+Tg*m)/(2*g*Sg*n),p=(j*j-g*g-Tg*m)/(2*j*Sg*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/Rg,c=function(a){var b=a*d,c=ea(q),h=g/(Sg*n)*(c*fa(Rg*b+q)-da(q));return[e+h*k,f+h*l,g*c/ea(Rg*b+q)]}}return c.duration=1e3*d,c},ig.behavior.zoom=function(){function a(a){a.on(F,l).on(Vg+".zoom",n).on("dblclick.zoom",o).on(I,m)}function c(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function d(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function e(a){y.k=Math.max(C[0],Math.min(C[1],a))}function f(a,b){b=d(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:y.x,y:y.y,k:y.k},e(Math.pow(2,g)),f(q=c,d),b=ig.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){
return(a-y.x)/y.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function k(a){--E||(a({type:"zoomend"}),q=null)}function l(){function a(){h=1,f(ig.mouse(e),m),j(g)}function d(){l.on(G,null).on(H,null),n(h),k(g)}var e=this,g=J.of(e,arguments),h=0,l=ig.select(b(e)).on(G,a).on(H,d),m=c(ig.mouse(e)),n=Y(e);Oi.call(e),i(g)}function m(){function a(){var a=ig.touches(o);return n=y.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=c(a))}),a}function b(){var b=ig.event.target;ig.select(b).on(u,d).on(v,h),w.push(b);for(var c=ig.event.changedTouches,e=0,f=c.length;e<f;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(j-t<500){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),z()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=ig.touches(o);Oi.call(o);for(var h=0,i=g.length;h<i;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(ig.event.touches.length){for(var b=ig.event.changedTouches,c=0,d=b.length;c<d;++c)delete q[b[c].identifier];for(var e in q)return void a()}ig.selectAll(w).on(s,null),x.on(F,l).on(I,m),A(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+ig.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=ig.select(o),A=Y(o);b(),i(p),x.on(F,null).on(I,b)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(Oi.call(this),p=c(q=r||ig.mouse(this)),i(a)),s=setTimeout(function(){s=null,k(a)},50),z(),e(Math.pow(2,.002*Ug())*y.k),f(q,p),j(a)}function o(){var a=ig.mouse(this),b=Math.log(y.k)/Math.LN2;g(this,a,c(a),ig.event.shiftKey?Math.ceil(b)-1:Math.floor(b)+1)}var p,q,r,s,t,u,v,w,x,y={x:0,y:0,k:1},A=[960,500],C=Wg,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=B(a,"zoomstart","zoom","zoomend");return Vg||(Vg="onwheel"in lg?(Ug=function(){return-ig.event.deltaY*(ig.event.deltaMode?120:1)},"wheel"):"onmousewheel"in lg?(Ug=function(){return ig.event.wheelDelta},"mousewheel"):(Ug=function(){return-ig.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=y;Mi?ig.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=A[0],d=A[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=ig.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=y={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=y,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},h(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:null},e(+b),h(),a):y.k},a.scaleExtent=function(b){return arguments.length?(C=null==b?Wg:[+b[0],+b[1]],a):C},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(A=b&&[+b[0],+b[1]],a):A},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},ig.rebind(a,J,"on")};var Ug,Vg,Wg=[0,1/0];ig.color=ha,ha.prototype.toString=function(){return this.rgb()+""},ig.hsl=ia;var Xg=ia.prototype=new ha;Xg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ia(this.h,this.s,this.l/a)},Xg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ia(this.h,this.s,a*this.l)},Xg.rgb=function(){return ja(this.h,this.s,this.l)},ig.hcl=ka;var Yg=ka.prototype=new ha;Yg.brighter=function(a){return new ka(this.h,this.c,Math.min(100,this.l+Zg*(arguments.length?a:1)))},Yg.darker=function(a){return new ka(this.h,this.c,Math.max(0,this.l-Zg*(arguments.length?a:1)))},Yg.rgb=function(){return la(this.h,this.c,this.l).rgb()},ig.lab=ma;var Zg=18,$g=.95047,_g=1,ah=1.08883,bh=ma.prototype=new ha;bh.brighter=function(a){return new ma(Math.min(100,this.l+Zg*(arguments.length?a:1)),this.a,this.b)},bh.darker=function(a){return new ma(Math.max(0,this.l-Zg*(arguments.length?a:1)),this.a,this.b)},bh.rgb=function(){return na(this.l,this.a,this.b)},ig.rgb=sa;var ch=sa.prototype=new ha;ch.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),new sa(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new sa(e,e,e)},ch.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(a*this.r,a*this.g,a*this.b)},ch.hsl=function(){return xa(this.r,this.g,this.b)},ch.toString=function(){return"#"+va(this.r)+va(this.g)+va(this.b)};var dh=ig.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});dh.forEach(function(a,b){dh.set(a,ta(b))}),ig.functor=Ba,ig.xhr=Ca(t),ig.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Da(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;k<j;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new s,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},ig.csv=ig.dsv(",","text/csv"),ig.tsv=ig.dsv("\t","text/tab-separated-values");var eh,fh,gh,hh,ih=this[v(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};ig.timer=function(){Ga.apply(this,arguments)},ig.timer.flush=function(){Ia(),Ja()},ig.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var jh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(La);ig.formatPrefix=function(a,b){var c=0;return(a=+a)&&(a<0&&(a*=-1),b&&(a=ig.round(a,Ka(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),jh[8+c/3]};var kh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,lh=ig.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=ig.round(a,Ka(a,b))).toFixed(Math.max(0,Math.min(20,Ka(a*(1+1e-15),b))))}}),mh=ig.time={},nh=Date;Oa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){oh.setUTCDate.apply(this._,arguments)},setDay:function(){oh.setUTCDay.apply(this._,arguments)},setFullYear:function(){oh.setUTCFullYear.apply(this._,arguments)},setHours:function(){oh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){oh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){oh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){oh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){oh.setUTCSeconds.apply(this._,arguments)},setTime:function(){oh.setTime.apply(this._,arguments)}};var oh=Date.prototype;mh.year=Pa(function(a){return a=mh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),mh.years=mh.year.range,mh.years.utc=mh.year.utc.range,mh.day=Pa(function(a){var b=new nh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),mh.days=mh.day.range,mh.days.utc=mh.day.utc.range,mh.dayOfYear=function(a){var b=mh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=mh[a]=Pa(function(a){return(a=mh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=mh.year(a).getDay();return Math.floor((mh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});mh[a+"s"]=c.range,mh[a+"s"].utc=c.utc.range,mh[a+"OfYear"]=function(a){var c=mh.year(a).getDay();return Math.floor((mh.dayOfYear(a)+(c+b)%7)/7)}}),mh.week=mh.sunday,mh.weeks=mh.sunday.range,mh.weeks.utc=mh.sunday.utc.range,mh.weekOfYear=mh.sundayOfYear;var ph={"-":"",_:" ",0:"0"},qh=/^\s*\d+/,rh=/^%/;ig.locale=function(a){return{numberFormat:Ma(a),timeFormat:Ra(a)}};var sh=ig.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ig.format=sh.numberFormat,ig.geo={},kb.prototype={s:0,t:0,add:function(a){lb(a,this.t,th),lb(th.s,this.s,this),this.s?this.t+=th.t:this.s=th.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var th=new kb;ig.geo.stream=function(a,b){a&&uh.hasOwnProperty(a.type)?uh[a.type](a,b):mb(a,b)};var uh={Feature:function(a,b){mb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)mb(c[d].geometry,b)}},vh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){nb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nb(c[d],b,0)},Polygon:function(a,b){ob(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ob(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)mb(c[d],b)}};ig.geo.area=function(a){return wh=0,ig.geo.stream(a,yh),wh};var wh,xh=new kb,yh={sphere:function(){wh+=4*Lg},point:w,lineStart:w,lineEnd:w,polygonStart:function(){xh.reset(),yh.lineStart=pb},polygonEnd:function(){var a=2*xh;wh+=a<0?4*Lg+a:a,yh.lineStart=yh.lineEnd=yh.point=w}};ig.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),b<l&&(l=b),b>n&&(n=b)}function b(b,c){var d=qb([b*Pg,c*Pg]);if(r){var e=sb(r,d),f=[e[1],-e[0],0],g=sb(f,e);vb(g),g=wb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Qg*j,q=sg(i)>180;if(q^(j*o<p&&p<j*b)){var s=g[1]*Qg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(j*o<p&&p<j*b)){var s=-g[1]*Qg;s<l&&(l=s)}else c<l&&(l=c),c>n&&(n=c);q?b<o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(b<k&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=sg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;yh.point(a,c),b(a,c)}function f(){yh.lineStart()}function g(){e(p,q),yh.lineEnd(),sg(s)>Jg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,yh.polygonStart()},polygonEnd:function(){yh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,xh<0?(k=-(m=180),l=-(n=90)):s>Jg?n=90:s<-Jg&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],ig.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];d<b;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];d<=b;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),ig.geo.centroid=function(a){zh=Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=0,ig.geo.stream(a,Kh);var b=Hh,c=Ih,d=Jh,e=b*b+c*c+d*d;return e<Kg&&(b=Eh,c=Fh,d=Gh,Ah<Jg&&(b=Bh,c=Ch,d=Dh),e=b*b+c*c+d*d,e<Kg)?[NaN,NaN]:[Math.atan2(c,b)*Qg,ca(d/Math.sqrt(e))*Qg]};var zh,Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh,Kh={sphere:w,point:yb,lineStart:Ab,lineEnd:Bb,polygonStart:function(){Kh.lineStart=Cb},polygonEnd:function(){Kh.lineStart=Ab}},Lh=Ib(Eb,Mb,Ob,[-Lg,-Lg/2]),Mh=1e9;ig.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Sb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(ig.geo.conicEqualArea=function(){return Tb(Ub)}).raw=Ub,ig.geo.albers=function(){return ig.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ig.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=ig.geo.albers(),g=ig.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=ig.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?g:e>=.166&&e<.234&&d>=-.214&&d<-.115?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Jg,l+.12*j+Jg],[k-.214*j-Jg,l+.234*j-Jg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Jg,l+.166*j+Jg],[k-.115*j-Jg,l+.234*j-Jg]]).stream(i).point,a},a.scale(1070)};var Nh,Oh,Ph,Qh,Rh,Sh,Th={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Oh=0,Th.lineStart=Vb},polygonEnd:function(){Th.lineStart=Th.lineEnd=Th.point=w,Nh+=sg(Oh/2)}},Uh={point:Wb,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Vh={point:Zb,lineStart:$b,lineEnd:_b,polygonStart:function(){Vh.lineStart=ac},polygonEnd:function(){Vh.point=Zb,Vh.lineStart=$b,Vh.lineEnd=_b}};ig.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),ig.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Nh=0,ig.geo.stream(a,e(Th)),Nh},a.centroid=function(a){return Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=0,ig.geo.stream(a,e(Vh)),Jh?[Hh/Jh,Ih/Jh]:Gh?[Eh/Gh,Fh/Gh]:Dh?[Bh/Dh,Ch/Dh]:[NaN,NaN]},a.bounds=function(a){return Rh=Sh=-(Ph=Qh=1/0),ig.geo.stream(a,e(Uh)),[[Ph,Qh],[Rh,Sh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||dc(a):t,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Xb:new bc(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(ig.geo.albersUsa()).context(null)},ig.geo.transform=function(a){return{stream:function(b){var c=new ec(b);for(var d in a)c[d]=a[d];return c}}},ec.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ig.geo.projection=gc,ig.geo.projectionMutator=hc,(ig.geo.equirectangular=function(){return gc(jc)}).raw=jc.invert=jc,ig.geo.rotation=function(a){function b(b){return b=a(b[0]*Pg,b[1]*Pg),b[0]*=Qg,b[1]*=Qg,b}return a=lc(a[0]%360*Pg,a[1]*Pg,a.length>2?a[2]*Pg:0),b.invert=function(b){return b=a.invert(b[0]*Pg,b[1]*Pg),b[0]*=Qg,b[1]*=Qg,b},b},kc.invert=jc,ig.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=lc(-a[0]*Pg,-a[1]*Pg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Qg,a[1]*=Qg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=pc((b=+d)*Pg,e*Pg),a):b},a.precision=function(d){return arguments.length?(c=pc(b*Pg,(e=+d)*Pg),a):e},a.angle(90)},ig.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Pg,e=a[1]*Pg,f=b[1]*Pg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},ig.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return ig.range(Math.ceil(f/q)*q,e,q).map(m).concat(ig.range(Math.ceil(j/r)*r,i,r).map(n)).concat(ig.range(Math.ceil(d/o)*o,c,o).filter(function(a){return sg(a%q)>Jg}).map(k)).concat(ig.range(Math.ceil(h/p)*p,g,p).filter(function(a){return sg(a%r)>Jg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=rc(h,g,90),l=sc(d,c,s),m=rc(j,i,90),n=sc(f,e,s),a):s},a.majorExtent([[-180,-90+Jg],[180,90-Jg]]).minorExtent([[-180,-80-Jg],[180,80+Jg]])},ig.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=tc,e=uc;return a.distance=function(){return ig.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},ig.geo.interpolate=function(a,b){return vc(a[0]*Pg,a[1]*Pg,b[0]*Pg,b[1]*Pg)},ig.geo.length=function(a){return Wh=0,ig.geo.stream(a,Xh),Wh};var Wh,Xh={sphere:w,point:w,lineStart:wc,lineEnd:w,polygonStart:w,polygonEnd:w},Yh=xc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(ig.geo.azimuthalEqualArea=function(){return gc(Yh)}).raw=Yh;var Zh=xc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},t);(ig.geo.azimuthalEquidistant=function(){return gc(Zh)}).raw=Zh,(ig.geo.conicConformal=function(){return Tb(yc)}).raw=yc,(ig.geo.conicEquidistant=function(){return Tb(zc)}).raw=zc;var $h=xc(function(a){return 1/a},Math.atan);(ig.geo.gnomonic=function(){return gc($h)}).raw=$h,Ac.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Og]},(ig.geo.mercator=function(){return Bc(Ac)}).raw=Ac;var _h=xc(function(){return 1},Math.asin);(ig.geo.orthographic=function(){return gc(_h)}).raw=_h;var ai=xc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(ig.geo.stereographic=function(){return gc(ai)}).raw=ai,Cc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Og]},(ig.geo.transverseMercator=function(){var a=Bc(Cc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Cc,ig.geom={},ig.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ba(c),f=Ba(d),g=a.length,h=[],i=[];for(b=0;b<g;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Gc),b=0;b<g;b++)i.push([h[b][0],-h[b][1]]);var j=Fc(h),k=Fc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Dc,d=Ec;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},ig.geom.polygon=function(a){return xg(a,bi),a};var bi=ig.geom.polygon.prototype=[];bi.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},bi.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},bi.clip=function(a){for(var b,c,d,e,f,g,h=Jc(a),i=-1,j=this.length-Jc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Hc(g,k,e)?(Hc(f,k,e)||a.push(Ic(f,g,k,e)),a.push(g)):Hc(f,k,e)&&a.push(Ic(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var ci,di,ei,fi,gi,hi=[],ii=[];Rc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Tc),b.length},bd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},cd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=gd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(ed(this,c),a=c,c=a.U),c.C=!1,d.C=!0,fd(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(fd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ed(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?gd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,ed(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,fd(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,ed(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,fd(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,ed(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,fd(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},ig.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return hd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Jg)*Jg,y:Math.round(g(a,b)/Jg)*Jg,i:b}})}var d=Dc,e=Ec,f=d,g=e,h=ji;return a?b(a):(b.links=function(a){return hd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return hd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Tc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&jd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Ba(d=a),b):d},b.y=function(a){return arguments.length?(g=Ba(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ji:a,b):h===ji?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ji?null:h&&h[1]},b)};var ji=[[-1e6,-1e6],[1e6,1e6]];ig.geom.delaunay=function(a){return ig.geom.voronoi().triangles(a)},ig.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(sg(i-c)+sg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=md()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ba(h),u=Ba(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;n<o;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;n<o;++n){var v=+t(k=a[n],n),w=+u(k,n);v<p&&(p=v),w<q&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=md();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){nd(a,z,p,q,r,s)},z.find=function(a){return od(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Dc,i=Ec;return(g=arguments.length)?(h=kd,i=ld,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},ig.interpolateRgb=pd,ig.interpolateObject=qd,ig.interpolateNumber=rd,ig.interpolateString=sd;var ki=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,li=new RegExp(ki.source,"g");ig.interpolate=td,ig.interpolators=[function(a,b){var c=typeof b;return("string"===c?dh.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?pd:sd:b instanceof ha?pd:Array.isArray(b)?ud:"object"===c&&isNaN(b)?qd:rd)(a,b)}],ig.interpolateArray=ud;var mi=function(){return t},ni=ig.map({linear:mi,poly:Bd,quad:function(){return yd},cubic:function(){return zd},sin:function(){return Cd},exp:function(){return Dd},circle:function(){return Ed},elastic:Fd,back:Gd,bounce:function(){return Hd}}),oi=ig.map({in:t,out:wd,"in-out":xd,"out-in":function(a){return xd(wd(a))}});ig.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=ni.get(c)||mi,d=oi.get(d)||t,vd(d(c.apply(null,jg.call(arguments,1))))},ig.interpolateHcl=Id,ig.interpolateHsl=Jd,ig.interpolateLab=Kd,ig.interpolateRound=Ld,ig.transform=function(a){var b=lg.createElementNS(ig.ns.prefix.svg,"g");return(ig.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Md(c?c.matrix:pi)})(a)},Md.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pi={
a:1,b:0,c:0,d:1,e:0,f:0};ig.interpolateTransform=Vd,ig.layout={},ig.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Yd(a[c]));return b}},ig.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=ig.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(ig.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Mg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:p[s]},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},ig.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(h*h/r<i){if(i<p){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&i<p){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=ig.event.x,a.py=ig.event.y,i.resume()}var c,d,e,f,g,h,i={},j=ig.dispatch("start","tick","end"),k=[1,1],l=.9,m=qi,n=ri,o=-30,p=si,q=.1,r=.64,s=[],u=[];return i.tick=function(){if((e*=.99)<.005)return c=null,j.end({type:"end",alpha:e=0}),!0;var b,d,i,m,n,p,r,t,v,w=s.length,x=u.length;for(d=0;d<x;++d)i=u[d],m=i.source,n=i.target,t=n.x-m.x,v=n.y-m.y,(p=t*t+v*v)&&(p=e*g[d]*((p=Math.sqrt(p))-f[d])/p,t*=p,v*=p,n.x-=t*(r=m.weight+n.weight?m.weight/(m.weight+n.weight):.5),n.y-=v*r,m.x+=t*(r=1-r),m.y+=v*r);if((r=e*q)&&(t=k[0]/2,v=k[1]/2,d=-1,r))for(;++d<w;)i=s[d],i.x+=(t-i.x)*r,i.y+=(v-i.y)*r;if(o)for(de(b=ig.geom.quadtree(s),e,h),d=-1;++d<w;)(i=s[d]).fixed||b.visit(a(i));for(d=-1;++d<w;)i=s[d],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*l,i.y-=(i.py-(i.py=i.y))*l);j.tick({type:"tick",alpha:e})},i.nodes=function(a){return arguments.length?(s=a,i):s},i.links=function(a){return arguments.length?(u=a,i):u},i.size=function(a){return arguments.length?(k=a,i):k},i.linkDistance=function(a){return arguments.length?(m="function"==typeof a?a:+a,i):m},i.distance=i.linkDistance,i.linkStrength=function(a){return arguments.length?(n="function"==typeof a?a:+a,i):n},i.friction=function(a){return arguments.length?(l=+a,i):l},i.charge=function(a){return arguments.length?(o="function"==typeof a?a:+a,i):o},i.chargeDistance=function(a){return arguments.length?(p=a*a,i):Math.sqrt(p)},i.gravity=function(a){return arguments.length?(q=+a,i):q},i.theta=function(a){return arguments.length?(r=a*a,i):Math.sqrt(r)},i.alpha=function(a){return arguments.length?(a=+a,e?a>0?e=a:(c.c=null,c.t=NaN,c=null,j.end({type:"end",alpha:e=0})):a>0&&(j.start({type:"start",alpha:e=a}),c=Ga(i.tick)),i):e},i.start=function(){function a(a,d){if(!c){for(c=new Array(e),i=0;i<e;++i)c[i]=[];for(i=0;i<j;++i){var f=u[i];c[f.source.index].push(f.target),c[f.target.index].push(f.source)}}for(var g,h=c[b],i=-1,k=h.length;++i<k;)if(!isNaN(g=h[i][a]))return g;return Math.random()*d}var b,c,d,e=s.length,j=u.length,l=k[0],p=k[1];for(b=0;b<e;++b)(d=s[b]).index=b,d.weight=0;for(b=0;b<j;++b)d=u[b],"number"==typeof d.source&&(d.source=s[d.source]),"number"==typeof d.target&&(d.target=s[d.target]),++d.source.weight,++d.target.weight;for(b=0;b<e;++b)d=s[b],isNaN(d.x)&&(d.x=a("x",l)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(f=[],"function"==typeof m)for(b=0;b<j;++b)f[b]=+m.call(this,u[b],b);else for(b=0;b<j;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;b<j;++b)g[b]=+n.call(this,u[b],b);else for(b=0;b<j;++b)g[b]=n;if(h=[],"function"==typeof o)for(b=0;b<e;++b)h[b]=+o.call(this,s[b],b);else for(b=0;b<e;++b)h[b]=o;return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){return d||(d=ig.behavior.drag().origin(t).on("dragstart.force",_d).on("drag.force",b).on("dragend.force",ae)),arguments.length?void this.on("mouseover.force",be).on("mouseout.force",ce).call(d):d},ig.rebind(i,j,"on")};var qi=20,ri=1,si=1/0;ig.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return ge(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=je,c=he,d=ie;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(fe(b,function(a){a.children&&(a.value=0)}),ge(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},ig.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=ig.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},ee(c,d)},ig.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(l<0?-1:1),o=ig.sum(j),p=o?(l-i*n)/o:0,q=ig.range(i),r=[];return null!=c&&q.sort(c===ti?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),q.forEach(function(a){r[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*p+n,padAngle:m}}),r}var b=Number,c=ti,d=0,e=Mg,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var ti={};ig.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=ig.permute(j,l),k=ig.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;o<r;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;n<m;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=t,c=oe,d=pe,e=ne,f=le,g=me;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:ui.get(b)||oe,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:vi.get(b)||pe,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var ui=ig.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(qe),f=a.map(re),g=ig.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;b<d;++b)c=g[b],h<i?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return ig.range(a.length).reverse()},default:oe}),vi=ig.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;c<f;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;c<m;++c){for(b=0,e=0;b<k;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];b<k;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);d<b;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,i<j&&(j=i)}for(c=0;c<m;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];if(d)for(b=0;b<e;b++)a[b][c][1]/=d;else for(b=0;b<e;b++)a[b][c][1]=g}for(c=0;c<f;++c)h[c]=0;return h},zero:pe});ig.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[ig.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=ve,e=te;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ba(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ue(a,b)}:Ba(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},ig.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,ge(h,function(a){a.r=+k(a.value)}),ge(h,Ae),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;ge(h,function(a){a.r+=l}),ge(h,Ae),ge(h,function(a){a.r-=l})}return De(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=ig.layout.hierarchy().sort(we),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},ee(a,c)},ig.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(ge(m,c),m.parent.m=-m.z,fe(m,d),j)fe(l,f);else{var n=l,o=l,p=l;fe(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);fe(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;g<h;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Je(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=He(g),e=Ge(e),g&&e;)i=Ge(i),f=He(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Ie(Ke(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!He(f)&&(f.t=g,f.m+=l-k),e&&!Ge(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=ig.layout.hierarchy().sort(null).value(null),h=Fe,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},ee(a,g)},ig.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;ge(i,function(a){var b=a.children;b&&b.length?(a.x=Me(b),a.y=Le(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Ne(i),l=Oe(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return ge(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=ig.layout.hierarchy().sort(null).value(null),c=Fe,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},ee(a,b)},ig.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(b<0?0:b),c.area=isNaN(d)||d<=0?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(c<f&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=f.y=0,f.value?(f.dx=j[0],f.dy=j[1]):f.dx=f.dy=0,g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=ig.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Pe,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Pe(b):Qe(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Qe(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Pe:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},ee(f,h)},ig.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=ig.random.normal.apply(ig,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=ig.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}},ig.scale={};var wi={floor:t,ceil:t};ig.scale.linear=function(){return Xe([0,1],[0,1],td,!1)};var xi={s:1,g:1,p:1,r:1,e:1};ig.scale.log=function(){return df(ig.scale.linear().domain([0,1]),10,!0,[1,10])};var yi=ig.format(".0e"),zi={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};ig.scale.pow=function(){return ef(ig.scale.linear(),1,[0,1])},ig.scale.sqrt=function(){return ig.scale.pow().exponent(.5)},ig.scale.ordinal=function(){return gf([],{t:"range",a:[[]]})},ig.scale.category10=function(){return ig.scale.ordinal().range(Ai)},ig.scale.category20=function(){return ig.scale.ordinal().range(Bi)},ig.scale.category20b=function(){return ig.scale.ordinal().range(Ci)},ig.scale.category20c=function(){return ig.scale.ordinal().range(Di)};var Ai=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ua),Bi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ua),Ci=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ua),Di=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ua);ig.scale.quantile=function(){return hf([],[])},ig.scale.quantize=function(){return jf(0,1,[0,1])},ig.scale.threshold=function(){return kf([.5],[0,1])},ig.scale.identity=function(){return lf([0,1])},ig.svg={},ig.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Og,l=h.apply(this,arguments)-Og,m=Math.abs(l-k),n=k>l?0:1;if(j<a&&(o=j,j=a,a=o),m>=Ng)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Ei?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=ca(q/j*Math.sin(r))),a&&(A=ca(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Lg?0:1;if(B&&sf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Lg?0:1;if(A&&sf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if(m>Jg&&(o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=a<j^n?0:1;var H=o,I=o;if(m<Lg){var J=null==y?[w,x]:null==u?[s,t]:Ic([s,t],[y,z],[u,v],[w,x]),K=s-J[0],L=t-J[1],M=u-J[0],N=v-J[1],O=1/Math.sin(Math.acos((K*M+L*N)/(Math.sqrt(K*K+L*L)*Math.sqrt(M*M+N*N)))/2),P=Math.sqrt(J[0]*J[0]+J[1]*J[1]);I=Math.min(o,(a-P)/(O-1)),H=Math.min(o,(j-P)/(O+1))}if(null!=u){var Q=tf(null==y?[w,x]:[y,z],[s,t],j,H,n),R=tf([u,v],[w,x],j,H,n);o===H?C.push("M",Q[0],"A",H,",",H," 0 0,",p," ",Q[1],"A",j,",",j," 0 ",1-n^sf(Q[1][0],Q[1][1],R[1][0],R[1][1]),",",n," ",R[1],"A",H,",",H," 0 0,",p," ",R[0]):C.push("M",Q[0],"A",H,",",H," 0 1,",p," ",R[0])}else C.push("M",s,",",t);if(null!=y){var S=tf([s,t],[y,z],a,-I,n),T=tf([w,x],null==u?[s,t]:[u,v],a,-I,n);o===I?C.push("L",T[0],"A",I,",",I," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^sf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",I,",",I," 0 0,",p," ",S[0]):C.push("L",T[0],"A",I,",",I," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=nf,d=of,e=mf,f=Ei,g=pf,h=qf,i=rf;return a.innerRadius=function(b){return arguments.length?(c=Ba(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Ba(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Ba(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Ei?Ei:Ba(b),a):f},a.startAngle=function(b){return arguments.length?(g=Ba(b),a):g},a.endAngle=function(b){return arguments.length?(h=Ba(b),a):h},a.padAngle=function(b){return arguments.length?(i=Ba(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Og;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Ei="auto";ig.svg.line=function(){return uf(t)};var Fi=ig.map({linear:vf,"linear-closed":wf,step:xf,"step-before":yf,"step-after":zf,basis:Ff,"basis-open":Gf,"basis-closed":Hf,bundle:If,cardinal:Cf,"cardinal-open":Af,"cardinal-closed":Bf,monotone:Of});Fi.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Gi=[0,2/3,1/3,0],Hi=[0,1/3,2/3,0],Ii=[0,1/6,2/3,1/6];ig.svg.line.radial=function(){var a=uf(Pf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},yf.reverse=zf,zf.reverse=yf,ig.svg.area=function(){return Qf(t)},ig.svg.area.radial=function(){var a=Qf(Pf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},ig.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Og,k=j.call(a,e,d)-Og;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Lg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=tc,g=uc,h=Rf,i=pf,j=qf;return a.radius=function(b){return arguments.length?(h=Ba(b),a):h},a.source=function(b){return arguments.length?(f=Ba(b),a):f},a.target=function(b){return arguments.length?(g=Ba(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ba(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ba(b),a):j},a},ig.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=tc,c=uc,d=Sf;return a.source=function(c){return arguments.length?(b=Ba(c),a):b},a.target=function(b){return arguments.length?(c=Ba(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},ig.svg.diagonal.radial=function(){var a=ig.svg.diagonal(),b=Sf,c=a.projection;return a.projection=function(a){return arguments.length?c(Tf(b=a)):b},a},ig.svg.symbol=function(){function a(a,d){return(Ji.get(b.call(this,a,d))||Wf)(c.call(this,a,d))}var b=Vf,c=Uf;return a.type=function(c){return arguments.length?(b=Ba(c),a):b},a.size=function(b){return arguments.length?(c=Ba(b),a):c},a};var Ji=ig.map({circle:Wf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Li)),c=b*Li;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Ki),c=b*Ki/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Ki),c=b*Ki/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});ig.svg.symbolTypes=Ji.keys();var Ki=Math.sqrt(3),Li=Math.tan(30*Pg);Bg.transition=function(a){for(var b,c,d=Mi||++Qi,e=_f(a),f=[],g=Ni||{time:Date.now(),ease:Ad,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&ag(c,k,e,d,g),b.push(c)}return Yf(f,e,d)},Bg.interrupt=function(a){return this.each(null==a?Oi:Xf(_f(a)))};var Mi,Ni,Oi=Xf(_f()),Pi=[],Qi=0;Pi.call=Bg.call,Pi.empty=Bg.empty,Pi.node=Bg.node,Pi.size=Bg.size,ig.transition=function(a,b){return a&&a.transition?Mi?a.transition(b):a:ig.selection().transition(a)},ig.transition.prototype=Pi,Pi.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=D(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),ag(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Yf(g,f,e)},Pi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=E(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&ag(e,o,h,g,f),b.push(e)}return Yf(i,h,g)},Pi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Q(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Yf(e,this.namespace,this.id)},Pi.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):S(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Pi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Vd:td,h=ig.ns.qualify(a);return Zf(this,"attr."+a,b,h.local?f:e)},Pi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=ig.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Pi.style=function(a,c,d){function e(){this.style.removeProperty(a)}function f(c){return null==c?e:(c+="",function(){var e,f=b(this).getComputedStyle(this,null).getPropertyValue(a);return f!==c&&(e=td(f,c),function(b){this.style.setProperty(a,e(b),d)})})}var g=arguments.length;if(g<3){if("string"!=typeof a){g<2&&(c="");for(d in a)this.style(d,a[d],c);return this}d=""}return Zf(this,"style."+a,c,f)},Pi.styleTween=function(a,c,d){function e(e,f){var g=c.call(this,e,f,b(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),d)}}return arguments.length<3&&(d=""),this.tween("style."+a,e)},Pi.text=function(a){return Zf(this,"text",a,$f)},Pi.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Pi.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=ig.ease.apply(ig,arguments)),S(this,function(d){d[c][b].ease=a}))},Pi.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:S(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Pi.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:S(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Pi.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Ni,f=Mi;try{Mi=c,S(this,function(b,e,f){Ni=b[d][c],a.call(b,b.__data__,e,f)})}finally{Ni=e,Mi=f}}else S(this,function(e){var f=e[d][c];(f.event||(f.event=ig.dispatch("start","end","interrupt"))).on(a,b)});return this},Pi.transition=function(){for(var a,b,c,d,e=this.id,f=++Qi,g=this.namespace,h=[],i=0,j=this.length;i<j;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;k<l;k++)(c=b[k])&&(d=c[g][e],ag(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Yf(h,g,f)},ig.svg.axis=function(){function a(a){a.each(function(){var a,j=ig.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):t:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Jg),q=ig.transition(o.exit()).style("opacity",Jg).remove(),r=ig.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,u=Se(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),ig.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=bg,x="x",z="y",y="x2",A="y2",D.attr("dy",G<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+u[0]+","+G*f+"V0H"+u[1]+"V"+G*f)):(a=cg,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",G<0?"end":"start"),w.attr("d","M"+G*f+","+u[0]+"H0V"+u[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*s),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*s),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=ig.scale.linear(),d=Ri,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Si?b+"":Ri,a):d},a.ticks=function(){return arguments.length?(h=kg(arguments),a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Ri="bottom",Si={top:1,right:1,bottom:1,left:1};ig.svg.brush=function(){function a(b){b.each(function(){var b=ig.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=b.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),b.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=b.selectAll(".resize").data(p,t);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ti[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=ig.transition(b),m=ig.transition(g);j&&(i=Se(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),d(l)),k&&(i=Se(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),c(l)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==ig.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),z())}function p(){32==ig.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,z())}function q(){var a=ig.mouse(v),b=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(ig.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(d(y),b=!0),C&&r(a,k,1)&&(e(y),b=!0),b&&(c(y),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Se(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];if(D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),k<d?(e=d,d=k):e=k),p[0]!=d||p[1]!=e)return c?h=null:g=null,p[0]=d,p[1]=e,!0}function s(){q(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),ig.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=ig.select(ig.event.target),x=i.of(v,arguments),y=ig.select(v),A=w.datum(),B=!/^(n|s)$/.test(A)&&j,C=!/^(e|w)$/.test(A)&&k,D=w.classed("extent"),E=Y(v),F=ig.mouse(v),G=ig.select(b(v)).on("keydown.brush",f).on("keyup.brush",p);if(ig.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),y.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(A){var H=+/w$/.test(A),I=+/^n/.test(A);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],
F[1]=m[I]}else ig.event.altKey&&(t=F.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),ig.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=B(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Ui[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Mi?ig.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=ud(l,b.x),d=ud(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Ui[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Ui[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),d<c&&(i=c,c=d,d=i),c==l[0]&&d==l[1]||(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),f<e&&(i=e,e=f,f=i),e==m[0]&&f==m[1]||(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),d<c&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),f<e&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},ig.rebind(a,i,"on")};var Ti={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ui=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Vi=mh.format=sh.timeFormat,Wi=Vi.utc,Xi=Wi("%Y-%m-%dT%H:%M:%S.%LZ");Vi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dg:Xi,dg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},dg.toString=Xi.toString,mh.second=Pa(function(a){return new nh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),mh.seconds=mh.second.range,mh.seconds.utc=mh.second.utc.range,mh.minute=Pa(function(a){return new nh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),mh.minutes=mh.minute.range,mh.minutes.utc=mh.minute.utc.range,mh.hour=Pa(function(a){var b=a.getTimezoneOffset()/60;return new nh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),mh.hours=mh.hour.range,mh.hours.utc=mh.hour.utc.range,mh.month=Pa(function(a){return a=mh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),mh.months=mh.month.range,mh.months.utc=mh.month.utc.range;var Yi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Zi=[[mh.second,1],[mh.second,5],[mh.second,15],[mh.second,30],[mh.minute,1],[mh.minute,5],[mh.minute,15],[mh.minute,30],[mh.hour,1],[mh.hour,3],[mh.hour,6],[mh.hour,12],[mh.day,1],[mh.day,2],[mh.week,1],[mh.month,1],[mh.month,3],[mh.year,1]],$i=Vi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Eb]]),_i={range:function(a,b,c){return ig.range(Math.ceil(a/c)*c,+b,c).map(fg)},floor:t,ceil:t};Zi.year=mh.year,mh.scale=function(){return eg(ig.scale.linear(),Zi,$i)};var aj=Zi.map(function(a){return[a[0].utc,a[1]]}),bj=Wi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Eb]]);aj.year=mh.year.utc,mh.scale.utc=function(){return eg(ig.scale.linear(),aj,bj)},ig.text=Ca(function(a){return a.responseText}),ig.json=function(a,b){return Da(a,"application/json",gg,b)},ig.html=function(a,b){return Da(a,"text/html",hg,b)},ig.xml=Ca(function(a){return a.responseXML}),"function"==typeof define&&define.amd?(this.d3=ig,define(ig)):"object"==typeof d&&d.exports?d.exports=ig:this.d3=ig}()}(this),f()}),a.registerDynamic("9a",["99"],!0,function(a,b,c){this||self;return c.exports=a("99"),c.exports}),a.registerDynamic("70",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),a.registerDynamic("9b",["9a","70"],!1,function(e,f,g){var h=a.get("@@global-helpers").prepareGlobal(g.id,"c3",null);return function(a){"deps d3";"deps ./c3.css!";"exports c3";!function(a){"use strict";function e(a){this.owner=a}function f(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype,b.prototype=new c}return b.prototype.constructor=b,b}function g(a){var b=this.internal=new h(this);b.loadConfig(a),b.beforeInit(a),b.init(),b.afterInit(a),function a(b,c,d){Object.keys(b).forEach(function(e){c[e]=b[e].bind(d),Object.keys(b[e]).length>0&&a(b[e],c[e],d)})}(k,this,this)}function h(c){var d=this;d.d3=a.d3?a.d3:"undefined"!=typeof b?b("d3"):void 0,d.api=c,d.config=d.getDefaultConfig(),d.data={},d.cache={},d.axes={}}function i(a){e.call(this,a)}function j(a,b){function c(a,b){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+u)+", 0)"})}function d(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function e(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function f(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,n);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return d.length>0&&d[0]>0&&d.unshift(d[0]-(d[1]-d[0])),d}function g(){var a,c=p.copy();return b.isCategory&&(a=p.domain(),c.domain([a[0],a[1]-1])),c}function h(a){var b=m?m(a):a;return"undefined"!=typeof b?b:""}function i(a){if(D)return D;var b={h:11.5,w:5.5};return a.select("text").text(h).each(function(a){var c=this.getBoundingClientRect(),d=h(a),e=c.height,f=d?c.width/d.length:void 0;e&&f&&(b.h=e,b.w=f)}).text(""),D=b,b}function j(c){return b.withoutTransition?c:a.transition(c)}function k(m){m.each(function(){function m(a,c){function d(a,b){f=void 0;for(var h=1;h<b.length;h++)if(" "===b.charAt(h)&&(f=h),e=b.substr(0,h+1),g=U.w*e.length,c<g)return d(a.concat(b.substr(0,f?f:h)),b.slice(f?f+1:h));return a.concat(b)}var e,f,g,i=h(a),j=[];return"[object Array]"===Object.prototype.toString.call(i)?i:((!c||c<=0)&&(c=X?95:b.isCategory?Math.ceil(F(G[1])-F(G[0]))-12:110),d(j,i+""))}function n(a,b){var c=U.h;return 0===b&&(c="left"===q||"right"===q?-((V[a.index]-1)*(U.h/2)-3):".71em"),c}function v(a){var b=p(a)+(o?0:u);return L[0]<b&&b<L[1]?r:0}function w(a){return a?a>0?"start":"end":"middle"}function x(a){return a?"rotate("+a+")":""}function y(a){return a?8*Math.sin(Math.PI*(a/180)):0}function z(a){return a?11.5-2.5*(a/15)*(a>0?1:-1):W}var A,B,C,D=k.g=a.select(this),E=this.__chart__||p,F=this.__chart__=g(),G=t?t:f(F),H=D.selectAll(".tick").data(G,F),I=H.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),J=H.exit().remove(),K=j(H).style("opacity",1),L=p.rangeExtent?p.rangeExtent():e(p.range()),M=D.selectAll(".domain").data([0]),N=(M.enter().append("path").attr("class","domain"),j(M));I.append("line"),I.append("text");var O=I.select("line"),P=K.select("line"),Q=I.select("text"),R=K.select("text");b.isCategory?(u=Math.ceil((F(1)-F(0))/2),B=o?0:u,C=o?u:0):u=B=0;var S,T,U=i(D.select(".tick")),V=[],W=Math.max(r,0)+s,X="left"===q||"right"===q;S=H.select("text"),T=S.selectAll("tspan").data(function(a,c){var d=b.tickMultiline?m(a,b.tickWidth):[].concat(h(a));return V[c]=d.length,d.map(function(a){return{index:c,splitted:a}})}),T.enter().append("tspan"),T.exit().remove(),T.text(function(a){return a.splitted});var Y=b.tickTextRotate;switch(q){case"bottom":A=c,O.attr("y2",r),Q.attr("y",W),P.attr("x1",B).attr("x2",B).attr("y2",v),R.attr("x",0).attr("y",z(Y)).style("text-anchor",w(Y)).attr("transform",x(Y)),T.attr("x",0).attr("dy",n).attr("dx",y(Y)),N.attr("d","M"+L[0]+","+l+"V0H"+L[1]+"V"+l);break;case"top":A=c,O.attr("y2",-r),Q.attr("y",-W),P.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-W),S.style("text-anchor","middle"),T.attr("x",0).attr("dy","0em"),N.attr("d","M"+L[0]+","+-l+"V0H"+L[1]+"V"+-l);break;case"left":A=d,O.attr("x2",-r),Q.attr("x",-W),P.attr("x2",-r).attr("y1",C).attr("y2",C),R.attr("x",-W).attr("y",u),S.style("text-anchor","end"),T.attr("x",-W).attr("dy",n),N.attr("d","M"+-l+","+L[0]+"H0V"+L[1]+"H"+-l);break;case"right":A=d,O.attr("x2",r),Q.attr("x",W),P.attr("x2",r).attr("y2",0),R.attr("x",W).attr("y",0),S.style("text-anchor","start"),T.attr("x",W).attr("dy",n),N.attr("d","M"+l+","+L[0]+"H0V"+L[1]+"H"+l)}if(F.rangeBand){var Z=F,$=Z.rangeBand()/2;E=F=function(a){return Z(a)+$}}else E.rangeBand?E=F:J.call(A,F);I.call(A,E),K.call(A,F)})}var l,m,n,o,p=a.scale.linear(),q="bottom",r=6,s=3,t=null,u=0,v=!0;return b=b||{},l=b.withOuterTick?6:0,k.scale=function(a){return arguments.length?(p=a,k):p},k.orient=function(a){return arguments.length?(q=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom",k):q},k.tickFormat=function(a){return arguments.length?(m=a,k):m},k.tickCentered=function(a){return arguments.length?(o=a,k):o},k.tickOffset=function(){return u},k.tickInterval=function(){var a,c;return b.isCategory?a=2*u:(c=k.g.select("path.domain").node().getTotalLength()-2*l,a=c/k.g.selectAll("line").size()),a===1/0?0:a},k.ticks=function(){return arguments.length?(n=arguments,k):n},k.tickCulling=function(a){return arguments.length?(v=a,k):v},k.tickValues=function(a){if("function"==typeof a)t=function(){return a(p.domain())};else{if(!arguments.length)return t;t=a}return k},k}var k,l,m,n={version:"0.4.11"};n.generate=function(a){return new g(a)},n.chart={fn:g.prototype,internal:{fn:h.prototype,axis:{fn:i.prototype}}},k=n.chart.fn,l=n.chart.internal.fn,m=n.chart.internal.axis.fn,l.beforeInit=function(){},l.afterInit=function(){},l.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_headers,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},l.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeFormat=c.data_xLocaltime?b.time.format:b.time.format.utc,a.axisTimeFormat=c.axis_x_localtime?b.time.format:b.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=c.axis_rotated?"left":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},l.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},l.initWithData=function(a){var b,c,d=this,e=d.d3,f=d.config,g=!0;d.axis=new i(d),d.initPie&&d.initPie(),d.initBrush&&d.initBrush(),d.initZoom&&d.initZoom(),f.bindto?"function"==typeof f.bindto.node?d.selectChart=f.bindto:d.selectChart=e.select(f.bindto):d.selectChart=e.selectAll([]),d.selectChart.empty()&&(d.selectChart=e.select(document.createElement("div")).style("opacity",0),d.observeInserted(d.selectChart),g=!1),d.selectChart.html("").classed("c3",!0),d.data.xs={},d.data.targets=d.convertDataToTargets(a),f.data_filter&&(d.data.targets=d.data.targets.filter(f.data_filter)),f.data_hide&&d.addHiddenTargetIds(f.data_hide===!0?d.mapToIds(d.data.targets):f.data_hide),f.legend_hide&&d.addHiddenLegendIds(f.legend_hide===!0?d.mapToIds(d.data.targets):f.legend_hide),d.hasType("gauge")&&(f.legend_show=!1),d.updateSizes(),d.updateScales(),d.x.domain(e.extent(d.getXDomain(d.data.targets))),d.y.domain(d.getYDomain(d.data.targets,"y")),d.y2.domain(d.getYDomain(d.data.targets,"y2")),d.subX.domain(d.x.domain()),d.subY.domain(d.y.domain()),d.subY2.domain(d.y2.domain()),d.orgXDomain=d.x.domain(),d.brush&&d.brush.scale(d.subX),f.zoom_enabled&&d.zoom.scale(d.x),d.svg=d.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return f.onmouseover.call(d)}).on("mouseleave",function(){return f.onmouseout.call(d)}),d.config.svg_classname&&d.svg.attr("class",d.config.svg_classname),b=d.svg.append("defs"),d.clipChart=d.appendClip(b,d.clipId),d.clipXAxis=d.appendClip(b,d.clipIdForXAxis),d.clipYAxis=d.appendClip(b,d.clipIdForYAxis),d.clipGrid=d.appendClip(b,d.clipIdForGrid),d.clipSubchart=d.appendClip(b,d.clipIdForSubchart),d.updateSvgSize(),c=d.main=d.svg.append("g").attr("transform",d.getTranslate("main")),d.initSubchart&&d.initSubchart(),d.initTooltip&&d.initTooltip(),d.initLegend&&d.initLegend(),d.initTitle&&d.initTitle(),c.append("text").attr("class",o.text+" "+o.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),d.initRegion(),d.initGrid(),c.append("g").attr("clip-path",d.clipPath).attr("class",o.chart),f.grid_lines_front&&d.initGridLines(),d.initEventRect(),d.initChartElements(),c.insert("rect",f.zoom_privileged?null:"g."+o.regions).attr("class",o.zoomRect).attr("width",d.width).attr("height",d.height).style("opacity",0).on("dblclick.zoom",null),f.axis_x_extent&&d.brush.extent(d.getDefaultExtent()),d.axis.init(),d.updateTargets(d.data.targets),g&&(d.updateDimension(),d.config.oninit.call(d),d.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),d.bindResize(),d.api.element=d.selectChart.node()},l.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},l.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{top:a.margin.top,right:NaN,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:NaN,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:NaN,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&!b.gauge_fullCircle&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},l.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},l.showTargets=function(){var a=this;a.svg.selectAll("."+o.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},l.redraw=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,A,B,C,D,E,F,G,H=this,I=H.main,J=H.d3,K=H.config,L=H.getShapeIndices(H.isAreaType),M=H.getShapeIndices(H.isBarType),N=H.getShapeIndices(H.isLineType),O=H.hasArcType(),P=H.filterTargetsToShow(H.data.targets),Q=H.xv.bind(H);if(a=a||{},c=z(a,"withY",!0),d=z(a,"withSubchart",!0),e=z(a,"withTransition",!0),h=z(a,"withTransform",!1),i=z(a,"withUpdateXDomain",!1),j=z(a,"withUpdateOrgXDomain",!1),k=z(a,"withTrimXDomain",!0),p=z(a,"withUpdateXAxis",i),l=z(a,"withLegend",!1),m=z(a,"withEventRect",!0),n=z(a,"withDimension",!0),f=z(a,"withTransitionForExit",e),g=z(a,"withTransitionForAxis",e),v=e?K.transition_duration:0,w=f?v:0,x=g?v:0,b=b||H.axis.generateTransitions(x),l&&K.legend_show?H.updateLegend(H.mapToIds(H.data.targets),a,b):n&&H.updateDimension(!0),H.isCategorized()&&0===P.length&&H.x.domain([0,H.axes.x.selectAll(".tick").size()]),P.length?(H.updateXDomain(P,i,j,k),K.axis_x_tick_values||(B=H.axis.updateXAxisTickValues(P))):(H.xAxis.tickValues([]),H.subXAxis.tickValues([])),K.zoom_rescale&&!a.flow&&(E=H.x.orgDomain()),H.y.domain(H.getYDomain(P,"y",E)),H.y2.domain(H.getYDomain(P,"y2",E)),!K.axis_y_tick_values&&K.axis_y_tick_count&&H.yAxis.tickValues(H.axis.generateTickValues(H.y.domain(),K.axis_y_tick_count)),!K.axis_y2_tick_values&&K.axis_y2_tick_count&&H.y2Axis.tickValues(H.axis.generateTickValues(H.y2.domain(),K.axis_y2_tick_count)),H.axis.redraw(b,O),H.axis.updateLabels(e),(i||p)&&P.length)if(K.axis_x_tick_culling&&B){for(C=1;C<B.length;C++)if(B.length/C<K.axis_x_tick_culling_max){D=C;break}H.svg.selectAll("."+o.axisX+" .tick text").each(function(a){var b=B.indexOf(a);b>=0&&J.select(this).style("display",b%D?"none":"block")})}else H.svg.selectAll("."+o.axisX+" .tick text").style("display","block");q=H.generateDrawArea?H.generateDrawArea(L,!1):void 0,r=H.generateDrawBar?H.generateDrawBar(M):void 0,s=H.generateDrawLine?H.generateDrawLine(N,!1):void 0,t=H.generateXYForText(L,M,N,!0),u=H.generateXYForText(L,M,N,!1),c&&(H.subY.domain(H.getYDomain(P,"y")),H.subY2.domain(H.getYDomain(P,"y2"))),H.updateXgridFocus(),I.select("text."+o.text+"."+o.empty).attr("x",H.width/2).attr("y",H.height/2).text(K.data_empty_label_text).transition().style("opacity",P.length?0:1),H.updateGrid(v),H.updateRegion(v),H.updateBar(w),H.updateLine(w),H.updateArea(w),H.updateCircle(),H.hasDataLabel()&&H.updateText(w),H.redrawTitle&&H.redrawTitle(),H.redrawArc&&H.redrawArc(v,w,h),H.redrawSubchart&&H.redrawSubchart(d,b,v,w,L,M,N),I.selectAll("."+o.selectedCircles).filter(H.isBarType.bind(H)).selectAll("circle").remove(),K.interaction_enabled&&!a.flow&&m&&(H.redrawEventRect(),H.updateZoom&&H.updateZoom()),H.updateCircleY(),F=(H.config.axis_rotated?H.circleY:H.circleX).bind(H),G=(H.config.axis_rotated?H.circleX:H.circleY).bind(H),a.flow&&(A=H.generateFlow({targets:P,flow:a.flow,duration:a.flow.duration,drawBar:r,drawLine:s,drawArea:q,cx:F,cy:G,xv:Q,xForText:t,yForText:u})),(v||A)&&H.isTabVisible()?J.transition().duration(v).each(function(){var b=[];[H.redrawBar(r,!0),H.redrawLine(s,!0),H.redrawArea(q,!0),H.redrawCircle(F,G,!0),H.redrawText(t,u,a.flow,!0),H.redrawRegion(!0),H.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})}),y=H.generateWait(),b.forEach(function(a){y.add(a)})}).call(y,function(){A&&A(),K.onrendered&&K.onrendered.call(H)}):(H.redrawBar(r),H.redrawLine(s),H.redrawArea(q),H.redrawCircle(F,G),H.redrawText(t,u,a.flow),H.redrawRegion(),H.redrawGrid(),K.onrendered&&K.onrendered.call(H)),H.mapToIds(H.data.targets).forEach(function(a){H.withoutFadeIn[a]=!0})},l.updateAndRedraw=function(a){var b,c=this,d=c.config;a=a||{},a.withTransition=z(a,"withTransition",!0),a.withTransform=z(a,"withTransform",!1),a.withLegend=z(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=z(a,"withTransitionForTransform",a.withTransition),c.updateSizes(),a.withLegend&&d.legend_show||(b=c.axis.generateTransitions(a.withTransitionForAxis?d.transition_duration:0),c.updateScales(),c.updateSvgSize(),c.transformAll(a.withTransitionForTransform,b)),c.redraw(a,b)},l.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},l.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},l.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},l.isCustomX=function(){var a=this,b=a.config;return!a.isTimeSeries()&&(b.data_x||y(b.data_xs))},l.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},l.getTranslate=function(a){var b,c,d=this,e=d.config;return"main"===a?(b=v(d.margin.left),c=v(d.margin.top)):"context"===a?(b=v(d.margin2.left),c=v(d.margin2.top)):"legend"===a?(b=d.margin3.left,c=d.margin3.top):"x"===a?(b=0,c=e.axis_rotated?0:d.height):"y"===a?(b=0,c=e.axis_rotated?d.height:0):"y2"===a?(b=e.axis_rotated?0:d.width,c=e.axis_rotated?1:0):"subx"===a?(b=0,c=e.axis_rotated?0:d.height2):"arc"===a&&(b=d.arcWidth/2,c=d.arcHeight/2),"translate("+b+","+c+")"},l.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},l.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0},l.opacityForCircle=function(a){var b=this.config.point_show?1:0;return p(a.value)?this.isScatterType(a)?.5:b:0},l.opacityForText=function(){return this.hasDataLabel()?1:0},l.xx=function(a){return a?this.x(a.x):null},l.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},l.yv=function(a){var b=this,c=a.axis&&"y2"===a.axis?b.y2:b.y;return Math.ceil(c(a.value))},l.subxx=function(a){return a?this.subX(a.x):null},l.transformMain=function(a,b){var c,d,e,f=this;b&&b.axisX?c=b.axisX:(c=f.main.select("."+o.axisX),a&&(c=c.transition())),b&&b.axisY?d=b.axisY:(d=f.main.select("."+o.axisY),a&&(d=d.transition())),b&&b.axisY2?e=b.axisY2:(e=f.main.select("."+o.axisY2),a&&(e=e.transition())),(a?f.main.transition():f.main).attr("transform",f.getTranslate("main")),c.attr("transform",f.getTranslate("x")),d.attr("transform",f.getTranslate("y")),e.attr("transform",f.getTranslate("y2")),f.main.select("."+o.chartArcs).attr("transform",f.getTranslate("arc"))},l.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},l.updateSvgSize=function(){var a=this,b=a.svg.select(".c3-brush .background");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",b.size()?b.attr("height"):0),a.svg.select("."+o.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},l.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},l.observeInserted=function(b){var c,d=this;return"undefined"==typeof MutationObserver?void a.console.error("MutationObserver not defined."):(c=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(c.disconnect(),d.intervalForObserveInserted=a.setInterval(function(){b.node().parentNode&&(a.clearInterval(d.intervalForObserveInserted),d.updateDimension(),d.brush&&d.brush.update(),d.config.oninit.call(d),d.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),b.transition().style("opacity",1))},10))})}),void c.observe(b.node(),{attributes:!0,childList:!0,characterData:!0}))},l.bindResize=function(){var b=this,c=b.config;if(b.resizeFunction=b.generateResize(),b.resizeFunction.add(function(){c.onresize.call(b)}),c.resize_auto&&b.resizeFunction.add(function(){void 0!==b.resizeTimeout&&a.clearTimeout(b.resizeTimeout),b.resizeTimeout=a.setTimeout(function(){delete b.resizeTimeout,b.api.flush()},100)}),b.resizeFunction.add(function(){c.onresized.call(b)}),a.attachEvent)a.attachEvent("onresize",b.resizeFunction);else if(a.addEventListener)a.addEventListener("resize",b.resizeFunction,!1);else{var d=a.onresize;d?d.add&&d.remove||(d=b.generateResize(),d.add(a.onresize)):d=b.generateResize(),d.add(b.resizeFunction),a.onresize=d}},l.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];return a.add=function(a){b.push(a)},a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}},a},l.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},l.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())return void(b+=1);try{a.transition()}catch(a){b+=1}}),b===a.length&&(clearInterval(d),c&&c())},10)};return b.add=function(b){a.push(b)},b},l.parseDate=function(b){var c,d=this;return b instanceof Date?c=b:"string"==typeof b?c=d.dataTimeFormat(d.config.data_xFormat).parse(b):"number"!=typeof b||isNaN(b)||(c=new Date(+b)),c&&!isNaN(+c)||a.console.error("Failed to parse x '"+b+"' to Date object"),c},l.isTabVisible=function(){var a;return"undefined"!=typeof document.hidden?a="hidden":"undefined"!=typeof document.mozHidden?a="mozHidden":"undefined"!=typeof document.msHidden?a="msHidden":"undefined"!=typeof document.webkitHidden&&(a="webkitHidden"),!document[a]},l.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,
donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},l.additionalConfig={},l.loadConfig=function(a){function b(){var a=d.shift();return a&&c&&"object"==typeof c&&a in c?(c=c[a],b()):a?void 0:c}var c,d,e,f=this.config;Object.keys(f).forEach(function(g){c=a,d=g.split("_"),e=b(),t(e)&&(f[g]=e)})},l.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])},l.getX=function(a,b,c,d){var e,f=this,g=f.getScale(a,b,f.isTimeSeries()),h=c?g.domain(c):g;f.isCategorized()?(d=d||function(){return 0},g=function(a,b){var c=h(a)+d(a);return b?c:Math.ceil(c)}):g=function(a,b){var c=h(a);return b?c:Math.ceil(c)};for(e in h)g[e]=h[e];return g.orgDomain=function(){return h.domain()},f.isCategorized()&&(g.domain=function(a){return arguments.length?(h.domain(a),g):(a=this.orgDomain(),[a[0],a[1]+1])}),g},l.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},l.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y},l.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},l.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},l.getYDomainMin=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasNegativeValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a<0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a>0||(k[d][b]+=+a)});return h.d3.min(Object.keys(k).map(function(a){return h.d3.min(k[a])}))},l.getYDomainMax=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasPositiveValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a>0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a<0||(k[d][b]+=+a)});return h.d3.max(Object.keys(k).map(function(a){return h.d3.max(k[a])}))},l.getYDomain=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o=this,q=o.config,r=a.filter(function(a){return o.axis.getId(a.id)===b}),s=c?o.filterByXDomain(r,c):r,t="y2"===b?q.axis_y2_min:q.axis_y_min,u="y2"===b?q.axis_y2_max:q.axis_y_max,v=o.getYDomainMin(s),x=o.getYDomainMax(s),z="y2"===b?q.axis_y2_center:q.axis_y_center,A=o.hasType("bar",s)&&q.bar_zerobased||o.hasType("area",s)&&q.area_zerobased,B="y2"===b?q.axis_y2_inverted:q.axis_y_inverted,C=o.hasDataLabel()&&q.axis_rotated,D=o.hasDataLabel()&&!q.axis_rotated;return v=p(t)?t:p(u)?v<u?v:u-10:v,x=p(u)?u:p(t)?t<x?x:t+10:x,0===s.length?"y2"===b?o.y2.domain():o.y.domain():(isNaN(v)&&(v=0),isNaN(x)&&(x=v),v===x&&(v<0?x=0:v=0),m=v>=0&&x>=0,n=v<=0&&x<=0,(p(t)&&m||p(u)&&n)&&(A=!1),A&&(m&&(v=0),n&&(x=0)),e=Math.abs(x-v),f=g=h=.1*e,"undefined"!=typeof z&&(i=Math.max(Math.abs(v),Math.abs(x)),x=z+i,v=z-i),C?(j=o.getDataLabelLength(v,x,"width"),k=w(o.y.range()),l=[j[0]/k,j[1]/k],g+=e*(l[1]/(1-l[0]-l[1])),h+=e*(l[0]/(1-l[0]-l[1]))):D&&(j=o.getDataLabelLength(v,x,"height"),g+=o.axis.convertPixelsToAxisPadding(j[1],e),h+=o.axis.convertPixelsToAxisPadding(j[0],e)),"y"===b&&y(q.axis_y_padding)&&(g=o.axis.getPadding(q.axis_y_padding,"top",g,e),h=o.axis.getPadding(q.axis_y_padding,"bottom",h,e)),"y2"===b&&y(q.axis_y2_padding)&&(g=o.axis.getPadding(q.axis_y2_padding,"top",g,e),h=o.axis.getPadding(q.axis_y2_padding,"bottom",h,e)),A&&(m&&(h=v),n&&(g=-x)),d=[v-h,x+g],B?d.reverse():d)},l.getXDomainMin=function(a){var b=this,c=b.config;return t(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},l.getXDomainMax=function(a){var b=this,c=b.config;return t(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})},l.getXDomainPadding=function(a){var b,c,d,e,f=this,g=f.config,h=a[1]-a[0];return f.isCategorized()?c=0:f.hasType("bar")?(b=f.getMaxDataCount(),c=b>1?h/(b-1)/2:.5):c=.01*h,"object"==typeof g.axis_x_padding&&y(g.axis_x_padding)?(d=p(g.axis_x_padding.left)?g.axis_x_padding.left:c,e=p(g.axis_x_padding.right)?g.axis_x_padding.right:c):d=e="number"==typeof g.axis_x_padding?g.axis_x_padding:c,{left:d,right:e}},l.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],e=c[1],f=b.getXDomainPadding(c),g=0,h=0;return d-e!==0||b.isCategorized()||(b.isTimeSeries()?(d=new Date(.5*d.getTime()),e=new Date(1.5*e.getTime())):(d=0===d?1:.5*d,e=0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},l.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e?e:f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),b&&(f.x.domain(e?e:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},l.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0],d=b[1];return a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c),d<=a[1]&&(a[0]=+a[0]-(a[1]-d),a[1]=d),a},l.isX=function(a){var b=this,c=b.config;return c.data_x&&a===c.data_x||y(c.data_xs)&&A(c.data_xs,a)},l.isNotX=function(a){return!this.isX(a)},l.getXKey=function(a){var b=this,c=b.config;return c.data_x?c.data_x:y(c.data_xs)?c.data_xs[a]:null},l.getXValuesOfXKey=function(a,b){var c,d=this,e=b&&y(b)?d.mapToIds(b):[];return e.forEach(function(b){d.getXKey(b)===a&&(c=d.data.xs[b])}),c},l.getIndexByX=function(a){var b=this,c=b.filterByX(b.data.targets,a);return c.length?c[0].index:null},l.getXValue=function(a,b){var c=this;return a in c.data.xs&&c.data.xs[a]&&p(c.data.xs[a][b])?c.data.xs[a][b]:b},l.getOtherTargetXs=function(){var a=this,b=Object.keys(a.data.xs);return b.length?a.data.xs[b[0]]:null},l.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},l.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},l.hasMultipleX=function(a){return this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()>1},l.isMultipleX=function(){return y(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},l.addName=function(a){var b,c=this;return a&&(b=c.config.data_names[a.id],a.name=void 0!==b?b:a.id),a},l.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},l.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},l.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},l.generateTargetX=function(a,b,c){var d,e=this;return d=e.isTimeSeries()?a?e.parseDate(a):e.parseDate(e.getXValue(b,c)):e.isCustomX()&&!e.isCategorized()?p(a)?+a:e.getXValue(b,c):c},l.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},l.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))},l.getPrevX=function(a){var b=this.xs[a-1];return"undefined"!=typeof b?b:null},l.getNextX=function(a){var b=this.xs[a+1];return"undefined"!=typeof b?b:null},l.getMaxDataCount=function(){var a=this;return a.d3.max(a.data.targets,function(a){return a.values.length})},l.getMaxDataCountTarget=function(a){var b,c=a.length,d=0;return c>1?a.forEach(function(a){a.values.length>d&&(b=a,d=a.values.length)}):b=c?a[0]:null,b},l.getEdgeX=function(a){var b=this;return a.length?[b.d3.min(a,function(a){return a.values[0].x}),b.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]},l.mapToIds=function(a){return a.map(function(a){return a.id})},l.mapToTargetIds=function(a){var b=this;return a?[].concat(a):b.mapToIds(b.data.targets)},l.hasTarget=function(a,b){var c,d=this.mapToIds(a);for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},l.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},l.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},l.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})},l.mapTargetsToUniqueXs=function(a){var b=this,c=b.d3.set(b.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return c=b.isTimeSeries()?c.map(function(a){return new Date(+a)}):c.map(function(a){return+a}),c.sort(function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN})},l.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)},l.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},l.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)},l.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},l.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},l.checkValueInTargets=function(a,b){var c,d,e,f=Object.keys(a);for(c=0;c<f.length;c++)for(e=a[f[c]].values,d=0;d<e.length;d++)if(b(e[d].value))return!0;return!1},l.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a<0})},l.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a>0})},l.isOrderDesc=function(){var a=this.config;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},l.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},l.orderTargets=function(a){var b=this,c=b.config,d=b.isOrderAsc(),e=b.isOrderDesc();return d||e?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)},e=a.values.reduce(c,0),f=b.values.reduce(c,0);return d?f-e:e-f}):q(c.data_order)&&a.sort(c.data_order),a},l.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b===0})},l.filterRemoveNull=function(a){return a.filter(function(a){return p(a.value)})},l.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},l.hasDataLabel=function(){var a=this.config;return!("boolean"!=typeof a.data_labels||!a.data_labels)||!("object"!=typeof a.data_labels||!y(a.data_labels))},l.getDataLabelLength=function(a,b,c){var d=this,e=[0,0],f=1.3;return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=this.getBoundingClientRect()[c]*f}).remove(),e},l.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},l.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},l.findSameXOfValues=function(a,b){var c,d=a[b].x,e=[];for(c=b-1;c>=0&&d===a[c].x;c--)e.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)e.push(a[c]);return e},l.findClosestFromTargets=function(a,b){var c,d=this;return c=a.map(function(a){return d.findClosest(a.values,b)}),d.findClosest(c,b)},l.findClosest=function(a,b){var c,d=this,e=d.config.point_sensitivity;return a.filter(function(a){return a&&d.isBarType(a.id)}).forEach(function(a){var b=d.main.select("."+o.bars+d.getTargetSelectorSuffix(a.id)+" ."+o.bar+"-"+a.index).node();!c&&d.isWithinBar(b)&&(c=a)}),a.filter(function(a){return a&&!d.isBarType(a.id)}).forEach(function(a){var f=d.dist(a,b);f<e&&(e=f,c=a)}),c},l.dist=function(a,b){var c=this,d=c.config,e=d.axis_rotated?1:0,f=d.axis_rotated?0:1,g=c.circleY(a,a.index),h=c.x(a.x);return Math.sqrt(Math.pow(h-b[e],2)+Math.pow(g-b[f],2))},l.convertValuesToStep=function(a){var b,c=[].concat(a);if(!this.isCategorized())return a;for(b=a.length+1;0<b;b--)c[b]=c[b-1];return c[0]={x:c[0].x-1,value:c[0].value,id:c[0].id},c[a.length+1]={x:c[a.length].x+1,value:c[a.length].value,id:c[a.length].id},c},l.updateDataAttributes=function(a,b){var c=this,d=c.config,e=d["data_"+a];return"undefined"==typeof b?e:(Object.keys(b).forEach(function(a){e[a]=b[a]}),c.redraw({withLegend:!0}),e)},l.convertUrlToData=function(a,b,c,d,e){var f=this,g=b?b:"csv",h=f.d3.xhr(a);c&&Object.keys(c).forEach(function(a){h.header(a,c[a])}),h.get(function(a,b){var c;if(!b)throw new Error(a.responseURL+" "+a.status+" ("+a.statusText+")");c="json"===g?f.convertJsonToData(JSON.parse(b.response),d):"tsv"===g?f.convertTsvToData(b.response):f.convertCsvToData(b.response),e.call(f,c)})},l.convertXsvToData=function(a,b){var c,d=b.parseRows(a);return 1===d.length?(c=[{}],d[0].forEach(function(a){c[0][a]=null})):c=b.parse(a),c},l.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)},l.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)},l.convertJsonToData=function(a,b){var c,d,e=this,f=[];return b?(b.x?(c=b.value.concat(b.x),e.config.data_x=b.x):c=b.value,f.push(c),a.forEach(function(a){var b=[];c.forEach(function(c){var d=e.findValueInJson(a,c);s(d)&&(d=null),b.push(d)}),f.push(b)}),d=e.convertRowsToData(f)):(Object.keys(a).forEach(function(b){f.push([b].concat(a[b]))}),d=e.convertColumnsToData(f)),d},l.findValueInJson=function(a,b){b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,"");for(var c=b.split("."),d=0;d<c.length;++d){var e=c[d];if(!(e in a))return;a=a[e]}return a},l.convertRowsToData=function(a){var b,c,d=a[0],e={},f=[];for(b=1;b<a.length;b++){for(e={},c=0;c<a[b].length;c++){if(s(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[d[c]]=a[b][c]}f.push(e)}return f},l.convertColumnsToData=function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)for(d=a[b][0],c=1;c<a[b].length;c++){if(s(e[c-1])&&(e[c-1]={}),s(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[c-1][d]=a[b][c]}return e},l.convertDataToTargets=function(a,b){var c,d=this,e=d.config,f=d.d3.keys(a[0]).filter(d.isNotX,d),g=d.d3.keys(a[0]).filter(d.isX,d);return f.forEach(function(c){var f=d.getXKey(c);d.isCustomX()||d.isTimeSeries()?g.indexOf(f)>=0?d.data.xs[c]=(b&&d.data.xs[c]?d.data.xs[c]:[]).concat(a.map(function(a){return a[f]}).filter(p).map(function(a,b){return d.generateTargetX(a,c,b)})):e.data_x?d.data.xs[c]=d.getOtherTargetXs():y(e.data_xs)&&(d.data.xs[c]=d.getXValuesOfXKey(f,d.data.targets)):d.data.xs[c]=a.map(function(a,b){return b})}),f.forEach(function(a){if(!d.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),c=f.map(function(b,c){var f=e.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var h,i=d.getXKey(b),j=a[i],k=null===a[b]||isNaN(a[b])?null:+a[b];return d.isCustomX()&&d.isCategorized()&&0===c&&!s(j)?(0===c&&0===g&&(e.axis_x_categories=[]),h=e.axis_x_categories.indexOf(j),h===-1&&(h=e.axis_x_categories.length,e.axis_x_categories.push(j))):h=d.generateTargetX(j,b,g),(s(a[b])||d.data.xs[b].length<=g)&&(h=void 0),{x:h,value:k,id:f}}).filter(function(a){return t(a.x)})}}),c.forEach(function(a){var b;e.data_xSort&&(a.values=a.values.sort(function(a,b){var c=a.x||0===a.x?a.x:1/0,d=b.x||0===b.x?b.x:1/0;return c-d})),b=0,a.values.forEach(function(a){a.index=b++}),d.data.xs[a.id].sort(function(a,b){return a-b})}),d.hasNegativeValue=d.hasNegativeValueInTargets(c),d.hasPositiveValue=d.hasPositiveValueInTargets(c),e.data_type&&d.setTargetType(d.mapToIds(c).filter(function(a){return!(a in e.data_types)}),e.data_type),c.forEach(function(a){d.addCache(a.id_org,a)}),c},l.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},l.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.headers,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},l.unload=function(a,b){var c=this;return b||(b=function(){}),a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}),a&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),void a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll("."+o.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):void b()},l.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},l.initEventRect=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.eventRects).style("fill-opacity",0)},l.redrawEventRect=function(){var a,b,c=this,d=c.config,e=c.isMultipleX(),f=c.main.select("."+o.eventRects).style("cursor",d.zoom_enabled?d.axis_rotated?"ns-resize":"ew-resize":null).classed(o.eventRectsMultiple,e).classed(o.eventRectsSingle,!e);f.selectAll("."+o.eventRect).remove(),c.eventRect=f.selectAll("."+o.eventRect),e?(a=c.eventRect.data([0]),c.generateEventRectsForMultipleXs(a.enter()),c.updateEventRect(a)):(b=c.getMaxDataCountTarget(c.data.targets),f.datum(b?b.values:[]),c.eventRect=f.selectAll("."+o.eventRect),a=c.eventRect.data(function(a){return a}),c.generateEventRectsForSingleX(a.enter()),c.updateEventRect(a),a.exit().remove())},l.updateEventRect=function(a){var b,c,d,e,f,g,h=this,i=h.config;a=a||h.eventRect.data(function(a){return a}),h.isMultipleX()?(b=0,c=0,d=h.width,e=h.height):(!h.isCustomX()&&!h.isTimeSeries()||h.isCategorized()?(f=h.getEventRectWidth(),g=function(a){return h.x(a.x)-f/2}):(h.updateXs(),f=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index);return null===b&&null===c?i.axis_rotated?h.height:h.width:(null===b&&(b=h.x.domain()[0]),null===c&&(c=h.x.domain()[1]),Math.max(0,(h.x(c)-h.x(b))/2))},g=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index),d=h.data.xs[a.id][a.index];return null===b&&null===c?0:(null===b&&(b=h.x.domain()[0]),(h.x(d)+h.x(b))/2)}),b=i.axis_rotated?0:g,c=i.axis_rotated?g:0,d=i.axis_rotated?h.width:f,e=i.axis_rotated?f:h.height),a.attr("class",h.classEvent.bind(h)).attr("x",b).attr("y",c).attr("width",d).attr("height",e)},l.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){var c=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(c,null,!0),b.expandBars(c,null,!0),b.main.selectAll("."+o.shape+"-"+c).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){var c=a.index;b.config&&(b.hasArcType()||(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+o.shape+"-"+c).each(function(a){d.data_onmouseout.call(b.api,a)})))}).on("mousemove",function(a){var e,f=a.index,g=b.svg.select("."+o.eventRect+"-"+f);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,f))&&(f-=1),e=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,f))}),d.tooltip_grouped&&(b.showTooltip(e,this),b.showXGridFocus(e)),(!d.tooltip_grouped||d.data_selection_enabled&&!d.data_selection_grouped)&&b.main.selectAll("."+o.shape+"-"+f).each(function(){c.select(this).classed(o.EXPANDED,!0),d.data_selection_enabled&&g.style("cursor",d.data_selection_grouped?"pointer":null),d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),d.data_selection_grouped||(b.unexpandCircles(f),b.unexpandBars(f)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&g.style("cursor","pointer"),d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(f,a.id,!0),b.expandBars(f,a.id,!0))}))}).on("click",function(a){var e=a.index;if(!b.hasArcType()&&b.toggleShape){if(b.cancelClick)return void(b.cancelClick=!1);b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,e))&&(e-=1),b.main.selectAll("."+o.shape+"-"+e).each(function(a){(d.data_selection_grouped||b.isWithinShape(this,a))&&(b.toggleShape(this,a,e),b.config.data_onclick.call(b.api,a,this))})}}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},l.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+o.eventRect).style("cursor",null),c.hideXGridFocus(),c.hideTooltip(),c.unexpandCircles(),c.unexpandBars()}var c=this,d=c.d3,e=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height).attr("class",o.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a,f,g,h,i=c.filterTargetsToShow(c.data.targets);if(!c.dragging&&!c.hasArcType(i)){if(a=d.mouse(this),f=c.findClosestFromTargets(i,a),!c.mouseover||f&&f.id===c.mouseover.id||(e.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),!f)return void b();g=c.isScatterType(f)||!e.tooltip_grouped?[f]:c.filterByX(i,f.x),h=g.map(function(a){return c.addName(a)}),c.showTooltip(h,this),e.point_focus_expand_enabled&&c.expandCircles(f.index,f.id,!0),c.expandBars(f.index,f.id,!0),c.showXGridFocus(h),(c.isBarType(f.id)||c.dist(f,a)<e.point_sensitivity)&&(c.svg.select("."+o.eventRect).style("cursor","pointer"),c.mouseover||(e.data_onmouseover.call(c.api,f),c.mouseover=f))}}).on("click",function(){var a,b,f=c.filterTargetsToShow(c.data.targets);c.hasArcType(f)||(a=d.mouse(this),b=c.findClosestFromTargets(f,a),b&&(c.isBarType(b.id)||c.dist(b,a)<e.point_sensitivity)&&c.main.selectAll("."+o.shapes+c.getTargetSelectorSuffix(b.id)).selectAll("."+o.shape+"-"+b.index).each(function(){(e.data_selection_grouped||c.isWithinShape(this,b))&&(c.toggleShape(this,b,b.index),c.config.data_onclick.call(c.api,b,this))}))}).call(e.data_selection_draggable&&c.drag?d.behavior.drag().origin(Object).on("drag",function(){c.drag(d.mouse(this))}).on("dragstart",function(){c.dragstart(d.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})},l.dispatchEvent=function(b,c,d){var e=this,f="."+o.eventRect+(e.isMultipleX()?"":"-"+c),g=e.main.select(f).node(),h=g.getBoundingClientRect(),i=h.left+(d?d[0]:0),j=h.top+(d?d[1]:0),k=document.createEvent("MouseEvents");k.initMouseEvent(b,!0,!0,a,0,i,j,i,j,!1,!1,!1,!1,0,null),g.dispatchEvent(k)},l.getCurrentWidth=function(){var a=this,b=a.config;return b.size_width?b.size_width:a.getParentWidth()},l.getCurrentHeight=function(){var a=this,b=a.config,c=b.size_height?b.size_height:a.getParentHeight();return c>0?c:320/(a.hasType("gauge")&&!b.gauge_fullCircle?2:1)},l.getCurrentPaddingTop=function(){var a=this,b=a.config,c=p(b.padding_top)?b.padding_top:0;return a.title&&a.title.node()&&(c+=a.getTitlePadding()),c},l.getCurrentPaddingBottom=function(){var a=this.config;return p(a.padding_bottom)?a.padding_bottom:0},l.getCurrentPaddingLeft=function(a){var b=this,c=b.config;return p(c.padding_left)?c.padding_left:c.axis_rotated?c.axis_x_show?Math.max(u(b.getAxisWidthByAxisId("x",a)),40):1:!c.axis_y_show||c.axis_y_inner?b.axis.getYAxisLabelPosition().isOuter?30:1:u(b.getAxisWidthByAxisId("y",a))},l.getCurrentPaddingRight=function(){var a=this,b=a.config,c=10,d=a.isLegendRight?a.getLegendWidth()+20:0;return p(b.padding_right)?b.padding_right+1:b.axis_rotated?c+d:!b.axis_y2_show||b.axis_y2_inner?2+d+(a.axis.getY2AxisLabelPosition().isOuter?20:0):u(a.getAxisWidthByAxisId("y2"))+d},l.getParentRectValue=function(a){for(var b,c=this.selectChart.node();c&&"BODY"!==c.tagName;){try{b=c.getBoundingClientRect()[a]}catch(d){"width"===a&&(b=c.offsetWidth)}if(b)break;c=c.parentNode}return b},l.getParentWidth=function(){return this.getParentRectValue("width")},l.getParentHeight=function(){var a=this.selectChart.style("height");return a.indexOf("px")>0?+a.replace("px",""):0},l.getSvgLeft=function(a){var b=this,c=b.config,d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,e=c.axis_rotated?o.axisX:o.axisY,f=b.main.select("."+e).node(),g=f&&d?f.getBoundingClientRect():{right:0},h=b.selectChart.node().getBoundingClientRect(),i=b.hasArcType(),j=g.right-h.left-(i?0:b.getCurrentPaddingLeft(a));return j>0?j:0},l.getAxisWidthByAxisId=function(a,b){var c=this,d=c.axis.getLabelPositionById(a);return c.axis.getMaxTickWidth(a,b)+(d.isInner?20:40)},l.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_x_tick_rotate)/180)),"y"===a&&c.axis_rotated&&c.axis_y_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_y_tick_rotate)/180)),d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},l.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},l.getShapeIndices=function(a){var b,c,d=this,e=d.config,f={},g=0;return d.filterTargetsToShow(d.data.targets.filter(a,d)).forEach(function(a){for(b=0;b<e.data_groups.length;b++)if(!(e.data_groups[b].indexOf(a.id)<0))for(c=0;c<e.data_groups[b].length;c++)if(e.data_groups[b][c]in f){f[a.id]=f[e.data_groups[b][c]];break}s(f[a.id])&&(f[a.id]=g++)}),f.__max__=g-1,f},l.getShapeX=function(a,b,c,d){var e=this,f=d?e.subX:e.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?f(d.x)-a*(b/2-e):0}},l.getShapeY=function(a){var b=this;return function(c){var d=a?b.getSubYScale(c.id):b.getYScale(c.id);return d(c.value)}},l.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&("undefined"!=typeof e[g]&&+e[g].x===+a.x||(g=-1,e.forEach(function(b,c){b.x===a.x&&(g=c)})),g in e&&e[g].value*a.value>=0&&(j+=h(e[g].value)-i))}),j}},l.isWithinShape=function(a,b){var c,d=this,e=d.d3.select(a);return d.isTargetToShow(b.id)?"circle"===a.nodeName?c=d.isStepType(b)?d.isWithinStep(a,d.getYScale(b.id)(b.value)):d.isWithinCircle(a,1.5*d.pointSelectR(b)):"path"===a.nodeName&&(c=!e.classed(o.bar)||d.isWithinBar(a)):c=!1,c},l.getInterpolate=function(a){var b=this,c=b.isInterpolationType(b.config.spline_interpolation_type)?b.config.spline_interpolation_type:"cardinal";return b.isSplineType(a)?c:b.isStepType(a)?b.config.line_step_type:"linear"},l.initLine=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.chartLines)},l.updateTargetsForLine=function(a){var b,c,d=this,e=d.config,f=d.classChartLine.bind(d),g=d.classLines.bind(d),h=d.classAreas.bind(d),i=d.classCircles.bind(d),j=d.classFocus.bind(d);b=d.main.select("."+o.chartLines).selectAll("."+o.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g),c.append("g").attr("class",h),c.append("g").attr("class",function(a){return d.generateClass(o.selectedCircles,a.id)}),c.append("g").attr("class",i).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){d.main.selectAll("."+o.selectedCircles+d.getTargetSelectorSuffix(a.id)).selectAll("."+o.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},l.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+o.lines).selectAll("."+o.line).data(b.lineData.bind(b)),b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),b.mainLine.exit().transition().duration(a).style("opacity",0).remove()},l.redrawLine=function(a,b){return[(b?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},l.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(function(a){return null!=a.value})),function(a){var f,h=d.line_connectNull?c.filterRemoveNull(a.values):a.values,i=b?c.x:c.subX,j=g.call(c,a.id),k=0,l=0;return c.isLineType(a)?d.data_regions[a.id]?f=c.lineWithRegions(h,i,j,d.data_regions[a.id]):(c.isStepType(a)&&(h=c.convertValuesToStep(h)),f=e.interpolate(c.getInterpolate(a))(h)):(h[0]&&(k=i(h[0].x),
l=j(h[0].value)),f=d.axis_rotated?"M "+l+" "+k:"M "+k+" "+l),f?f:"M 0 0"}},l.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&l<e||a.value<0&&e<l)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},l.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g,h,i,j,k,l,m,n,o,p,q,r,u=this,v=u.config,w=-1,x="M",y=u.isCategorized()?.5:0,z=[];if(t(d))for(g=0;g<d.length;g++)z[g]={},s(d[g].start)?z[g].start=a[0].x:z[g].start=u.isTimeSeries()?u.parseDate(d[g].start):d[g].start,s(d[g].end)?z[g].end=a[a.length-1].x:z[g].end=u.isTimeSeries()?u.parseDate(d[g].end):d[g].end;for(q=v.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)},r=v.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},i=u.isTimeSeries()?function(a,d,e,g){var h,i=a.x.getTime(),j=d.x-a.x,l=new Date(i+j*e),m=new Date(i+j*(e+g));return h=v.axis_rotated?[[c(k(e)),b(l)],[c(k(e+g)),b(m)]]:[[b(l),c(k(e))],[b(m),c(k(e+g))]],f(h)}:function(a,d,e,g){var h;return h=v.axis_rotated?[[c(k(e),!0),b(j(e))],[c(k(e+g),!0),b(j(e+g))]]:[[b(j(e),!0),c(k(e))],[b(j(e+g),!0),c(k(e+g))]],f(h)},g=0;g<a.length;g++){if(s(z)||!e(a[g].x,z))x+=" "+q(a[g])+" "+r(a[g]);else for(j=u.getScale(a[g-1].x+y,a[g].x+y,u.isTimeSeries()),k=u.getScale(a[g-1].value,a[g].value),l=b(a[g].x)-b(a[g-1].x),m=c(a[g].value)-c(a[g-1].value),n=Math.sqrt(Math.pow(l,2)+Math.pow(m,2)),o=2/n,p=2*o,h=o;h<=1;h+=p)x+=i(a[g-1],a[g],h,o);w=a[g].x}return x},l.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+o.areas).selectAll("."+o.area).data(b.lineData.bind(b)),b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.mainArea.style("opacity",b.orgAreaOpacity),b.mainArea.exit().transition().duration(a).style("opacity",0).remove()},l.redrawArea=function(a,b){return[(b?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},l.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},j=function(a,b){return d.data_groups.length>0?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(d.area_above?0:i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var b,f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,g=0,h=0;return c.isAreaType(a)?(c.isStepType(a)&&(f=c.convertValuesToStep(f)),b=e.interpolate(c.getInterpolate(a))(f)):(f[0]&&(g=c.x(f[0].x),h=c.getYScale(a.id)(f[0].value)),b=d.axis_rotated?"M "+h+" "+g:"M "+g+" "+h),b?b:"M 0 0"}},l.getAreaBaseValue=function(){return 0},l.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&l<e||a.value<0&&e<l)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},l.updateCircle=function(){var a=this;a.mainCircle=a.main.selectAll("."+o.circles).selectAll("."+o.circle).data(a.lineOrScatterData.bind(a)),a.mainCircle.enter().append("circle").attr("class",a.classCircle.bind(a)).attr("r",a.pointR.bind(a)).style("fill",a.color),a.mainCircle.style("opacity",a.initialOpacityForCircle.bind(a)),a.mainCircle.exit().remove()},l.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+o.selectedCircle);return[(c?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition(Math.random().toString()):d).attr("cx",a).attr("cy",b)]},l.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},l.updateCircleY=function(){var a,b,c=this;c.config.data_groups.length>0?(a=c.getShapeIndices(c.isLineType),b=c.generateGetLinePoints(a),c.circleY=function(a,c){return b(a,c)[0][1]}):c.circleY=function(a){return c.getYScale(a.id)(a.value)}},l.getCircles=function(a,b){var c=this;return(b?c.main.selectAll("."+o.circles+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+o.circle+(p(a)?"-"+a:""))},l.expandCircles=function(a,b,c){var d=this,e=d.pointExpandedR.bind(d);c&&d.unexpandCircles(),d.getCircles(a,b).classed(o.EXPANDED,!0).attr("r",e)},l.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(o.EXPANDED)}).classed(o.EXPANDED,!1).attr("r",c)},l.pointR=function(a){var b=this,c=b.config;return b.isStepType(a)?0:q(c.point_r)?c.point_r(a):c.point_r},l.pointExpandedR=function(a){var b=this,c=b.config;return c.point_focus_expand_enabled?c.point_focus_expand_r?c.point_focus_expand_r:1.75*b.pointR(a):b.pointR(a)},l.pointSelectR=function(a){var b=this,c=b.config;return q(c.point_select_r)?c.point_select_r(a):c.point_select_r?c.point_select_r:4*b.pointR(a)},l.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],2)+Math.pow(g-d[1],2))<b},l.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},l.initBar=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.chartBars)},l.updateTargetsForBar=function(a){var b,c,d=this,e=d.config,f=d.classChartBar.bind(d),g=d.classBars.bind(d),h=d.classFocus.bind(d);b=d.main.select("."+o.chartBars).selectAll("."+o.chartBar).data(a).attr("class",function(a){return f(a)+h(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null})},l.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+o.bars).selectAll("."+o.bar).data(c),b.mainBar.enter().append("path").attr("class",d).style("stroke",f).style("fill",f),b.mainBar.style("opacity",e),b.mainBar.exit().transition().duration(a).style("opacity",0).remove()},l.redrawBar=function(a,b){return[(b?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]},l.getBarW=function(a,b){var c=this,d=c.config,e="number"==typeof d.bar_width?d.bar_width:b?a.tickInterval()*d.bar_width_ratio/b:0;return d.bar_width_max&&e>d.bar_width_max?d.bar_width_max:e},l.getBars=function(a,b){var c=this;return(b?c.main.selectAll("."+o.bars+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+o.bar+(p(a)?"-"+a:""))},l.expandBars=function(a,b,c){var d=this;c&&d.unexpandBars(),d.getBars(a,b).classed(o.EXPANDED,!0)},l.unexpandBars=function(a){var b=this;b.getBars(a).classed(o.EXPANDED,!1)},l.generateDrawBar=function(a,b){var c=this,d=c.config,e=c.generateGetBarPoints(a,b);return function(a,b){var c=e(a,b),f=d.axis_rotated?1:0,g=d.axis_rotated?0:1,h="M "+c[0][f]+","+c[0][g]+" L"+c[1][f]+","+c[1][g]+" L"+c[2][f]+","+c[2][g]+" L"+c[3][f]+","+c[3][g]+" z";return h}},l.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=b?c.getSubYScale:c.getYScale;return function(a,b){var d=j.call(c,a.id)(0),e=i(a,b)||d,k=g(a),l=h(a);return c.config.axis_rotated&&(0<a.value&&l<d||a.value<0&&d<l)&&(l=d),[[k,e],[k,l-(d-e)],[k+f,l-(d-e)],[k+f,e]]}},l.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),e=a.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),h=c.width,i=c.height,j=2,k=f-j,l=f+h+j,m=g+i+j,n=g-j;return k<b[0]&&b[0]<l&&n<b[1]&&b[1]<m},l.initText=function(){var a=this;a.main.select("."+o.chart).append("g").attr("class",o.chartTexts),a.mainText=a.d3.selectAll([])},l.updateTargetsForText=function(a){var b,c,d=this,e=d.classChartText.bind(d),f=d.classTexts.bind(d),g=d.classFocus.bind(d);b=d.main.select("."+o.chartTexts).selectAll("."+o.chartText).data(a).attr("class",function(a){return e(a)+g(a)}),c=b.enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",f)},l.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),e=b.classText.bind(b);b.mainText=b.main.selectAll("."+o.texts).selectAll("."+o.text).data(d),b.mainText.enter().append("text").attr("class",e).attr("text-anchor",function(a){return c.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0),b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)}),b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()},l.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},l.getTextRect=function(a,b,c){var d,e=this.d3.select("body").append("div").classed("c3",!0),f=e.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g=this.d3.select(c).style("font");return f.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).style("font",g).text(a).each(function(){d=this.getBoundingClientRect()}),e.remove(),d},l.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},l.getXForText=function(a,b,c){var d,e,f=this,g=c.getBoundingClientRect();return f.config.axis_rotated?(e=f.isBarType(b)?4:6,d=a[2][1]+e*(b.value<0?-1:1)):d=f.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(d>f.width?d=f.width-g.width:d<0&&(d=4)),d},l.getYForText=function(a,b,c){var d,e=this,f=c.getBoundingClientRect();return e.config.axis_rotated?d=(a[0][0]+a[2][0]+.6*f.height)/2:(d=a[2][1],b.value<0||0===b.value&&!e.hasPositiveValue?(d+=f.height,e.isBarType(b)&&e.isSafari()?d-=3:!e.isBarType(b)&&e.isChrome()&&(d+=3)):d+=e.isBarType(b)?-3:-6),null!==b.value||e.config.axis_rotated||(d<f.height?d=f.height:d>this.height&&(d=this.height-4)),d},l.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},l.hasType=function(a,b){var c=this,d=c.config.data_types,e=!1;return b=b||c.data.targets,b&&b.length?b.forEach(function(b){var c=d[b.id];(c&&c.indexOf(a)>=0||!c&&"line"===a)&&(e=!0)}):Object.keys(d).length?Object.keys(d).forEach(function(b){d[b]===a&&(e=!0)}):e=c.config.data_type===a,e},l.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},l.isLineType=function(a){var b=this.config,c=r(a)?a:a.id;return!b.data_types[c]||["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])>=0},l.isStepType=function(a){var b=r(a)?a:a.id;return["step","area-step"].indexOf(this.config.data_types[b])>=0},l.isSplineType=function(a){var b=r(a)?a:a.id;return["spline","area-spline"].indexOf(this.config.data_types[b])>=0},l.isAreaType=function(a){var b=r(a)?a:a.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[b])>=0},l.isBarType=function(a){var b=r(a)?a:a.id;return"bar"===this.config.data_types[b]},l.isScatterType=function(a){var b=r(a)?a:a.id;return"scatter"===this.config.data_types[b]},l.isPieType=function(a){var b=r(a)?a:a.id;return"pie"===this.config.data_types[b]},l.isGaugeType=function(a){var b=r(a)?a:a.id;return"gauge"===this.config.data_types[b]},l.isDonutType=function(a){var b=r(a)?a:a.id;return"donut"===this.config.data_types[b]},l.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},l.lineData=function(a){return this.isLineType(a)?[a]:[]},l.arcData=function(a){return this.isArcType(a.data)?[a]:[]},l.barData=function(a){return this.isBarType(a)?a.values:[]},l.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},l.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},l.isInterpolationType=function(a){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(a)>=0},l.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",o.grid),b.grid_x_show&&a.grid.append("g").attr("class",o.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",o.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",o.xgridFocus).append("line").attr("class",o.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},l.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",o.grid+" "+o.gridLines),a.gridLines.append("g").attr("class",o.xgridLines),a.gridLines.append("g").attr("class",o.ygridLines),a.xgridLines=b.selectAll([])},l.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height},b.xgrid=b.main.select("."+o.xgrids).selectAll("."+o.xgrid).data(e),b.xgrid.enter().append("line").attr("class",o.xgrid),a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1}),b.xgrid.exit().remove()},l.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks);a.ygrid=a.main.select("."+o.ygrids).selectAll("."+o.ygrid).data(c),a.ygrid.enter().append("line").attr("class",o.ygrid),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},l.gridTextAnchor=function(a){return a.position?a.position:"end"},l.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4},l.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},l.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},l.updateGrid=function(a){var b,c,d,e=this,f=e.main,g=e.config;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),f.select("line."+o.xgridFocus).style("visibility","hidden"),g.grid_x_show&&e.updateXGrid(),e.xgridLines=f.select("."+o.xgridLines).selectAll("."+o.xgridLine).data(g.grid_x_lines),b=e.xgridLines.enter().append("g").attr("class",function(a){return o.xgridLine+(a.class?" "+a.class:"")}),b.append("line").style("opacity",0),b.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"":"rotate(-90)").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),e.xgridLines.exit().transition().duration(a).style("opacity",0).remove(),g.grid_y_show&&e.updateYGrid(),e.ygridLines=f.select("."+o.ygridLines).selectAll("."+o.ygridLine).data(g.grid_y_lines),c=e.ygridLines.enter().append("g").attr("class",function(a){return o.ygridLine+(a.class?" "+a.class:"")}),c.append("line").style("opacity",0),c.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"rotate(-90)":"").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),d=e.yv.bind(e),e.ygridLines.select("line").transition().duration(a).attr("x1",g.axis_rotated?d:0).attr("x2",g.axis_rotated?d:e.width).attr("y1",g.axis_rotated?0:d).attr("y2",g.axis_rotated?e.height:d).style("opacity",1),e.ygridLines.select("text").transition().duration(a).attr("x",g.axis_rotated?e.xGridTextX.bind(e):e.yGridTextX.bind(e)).attr("y",d).text(function(a){return a.text}).style("opacity",1),e.ygridLines.exit().transition().duration(a).style("opacity",0).remove()},l.redrawGrid=function(a){var b=this,c=b.config,d=b.xv.bind(b),e=b.xgridLines.select("line"),f=b.xgridLines.select("text");return[(a?e.transition():e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?b.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:b.height).style("opacity",1),(a?f.transition():f).attr("x",c.axis_rotated?b.yGridTextX.bind(b):b.xGridTextX.bind(b)).attr("y",d).text(function(a){return a.text}).style("opacity",1)]},l.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&p(a.value)}),e=b.main.selectAll("line."+o.xgridFocus),f=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(e.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",f).attr(c.axis_rotated?"y2":"x2",f),b.smoothLines(e,"grid")))},l.hideXGridFocus=function(){this.main.select("line."+o.xgridFocus).style("visibility","hidden")},l.updateXgridFocus=function(){var a=this,b=a.config;a.main.select("line."+o.xgridFocus).attr("x1",b.axis_rotated?0:-10).attr("x2",b.axis_rotated?a.width:-10).attr("y1",b.axis_rotated?-10:0).attr("y2",b.axis_rotated?-10:a.height)},l.generateGridData=function(a,b){var c,d,e,f,g=this,h=[],i=g.main.select("."+o.axisX).selectAll(".tick").size();if("year"===a)for(c=g.getXDomain(),d=c[0].getFullYear(),e=c[1].getFullYear(),f=d;f<=e;f++)h.push(new Date(f+"-01-01 00:00:00"));else h=b.ticks(10),h.length>i&&(h=h.filter(function(a){return(""+a).indexOf(".")<0}));return h},l.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b.class===a.class)&&(c=!0)}),c}:function(){return!0}},l.removeGridLines=function(a,b){var c=this,d=c.config,e=c.getGridFilterToRemove(a),f=function(a){return!e(a)},g=b?o.xgridLines:o.ygridLines,h=b?o.xgridLine:o.ygridLine;c.main.select("."+g).selectAll("."+h).filter(e).transition().duration(d.transition_duration).style("opacity",0).remove(),b?d.grid_x_lines=d.grid_x_lines.filter(f):d.grid_y_lines=d.grid_y_lines.filter(f)},l.initTooltip=function(){var a,b=this,c=b.config;if(b.tooltip=b.selectChart.style("position","relative").append("div").attr("class",o.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),c.tooltip_init_show){if(b.isTimeSeries()&&r(c.tooltip_init_x)){for(c.tooltip_init_x=b.parseDate(c.tooltip_init_x),a=0;a<b.data.targets[0].values.length&&b.data.targets[0].values[a].x-c.tooltip_init_x!==0;a++);c.tooltip_init_x=a}b.tooltip.html(c.tooltip_contents.call(b,b.data.targets.map(function(a){return b.addName(a.values[c.tooltip_init_x])}),b.axis.getXAxisTickFormat(),b.getYFormat(b.hasArcType()),b.color)),b.tooltip.style("top",c.tooltip_init_position.top).style("left",c.tooltip_init_position.left).style("display","block")}},l.getTooltipContent=function(a,b,c,d){var e,f,g,h,i,j,k=this,l=k.config,m=l.tooltip_format_title||b,n=l.tooltip_format_name||function(a){return a},o=l.tooltip_format_value||c,p=k.isOrderAsc();if(0===l.data_groups.length)a.sort(function(a,b){var c=a?a.value:null,d=b?b.value:null;return p?c-d:d-c});else{var q=k.orderTargets(k.data.targets).map(function(a){return a.id});a.sort(function(a,b){var c=a?a.value:null,d=b?b.value:null;return c>0&&d>0&&(c=a?q.indexOf(a.id):null,d=b?q.indexOf(b.id):null),p?c-d:d-c})}for(f=0;f<a.length;f++)if(a[f]&&(a[f].value||0===a[f].value)&&(e||(g=B(m?m(a[f].x):a[f].x),e="<table class='"+k.CLASS.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),h=B(o(a[f].value,a[f].ratio,a[f].id,a[f].index,a)),void 0!==h)){if(null===a[f].name)continue;i=B(n(a[f].name,a[f].ratio,a[f].id,a[f].index)),j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+k.CLASS.tooltipName+"-"+k.getTargetSelectorSuffix(a[f].id)+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"}return e+"</table>"},l.tooltipPosition=function(a,b,c,d){var e,f,g,h,i,j=this,k=j.config,l=j.d3,m=j.hasArcType(),n=l.mouse(d);return m?(f=(j.width-(j.isLegendRight?j.getLegendWidth():0))/2+n[0],h=j.height/2+n[1]+20):(e=j.getSvgLeft(!0),k.axis_rotated?(f=e+n[0]+100,g=f+b,i=j.currentWidth-j.getCurrentPaddingRight(),h=j.x(a[0].x)+20):(f=e+j.getCurrentPaddingLeft(!0)+j.x(a[0].x)+20,g=f+b,i=e+j.currentWidth-j.getCurrentPaddingRight(),h=n[1]+15),g>i&&(f-=g-i+20),h+c>j.currentHeight&&(h-=c+30)),h<0&&(h=0),{top:h,left:f}},l.showTooltip=function(a,b){var c,d,e,f=this,g=f.config,h=f.hasArcType(),i=a.filter(function(a){return a&&p(a.value)}),j=g.tooltip_position||l.tooltipPosition;0!==i.length&&g.tooltip_show&&(f.tooltip.html(g.tooltip_contents.call(f,a,f.axis.getXAxisTickFormat(),f.getYFormat(h),f.color)).style("display","block"),c=f.tooltip.property("offsetWidth"),d=f.tooltip.property("offsetHeight"),e=j.call(this,i,c,d,b),f.tooltip.style("top",e.top+"px").style("left",e.left+"px"))},l.hideTooltip=function(){this.tooltip.style("display","none")},l.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},l.updateLegendWithDefaults=function(){var a=this;a.updateLegend(a.mapToIds(a.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},l.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:NaN,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},l.transformLegend=function(a){var b=this;(a?b.legend.transition():b.legend).attr("transform",b.getTranslate("legend"))},l.updateLegendStep=function(a){this.legendStep=a},l.updateLegendItemWidth=function(a){this.legendItemWidth=a},l.updateLegendItemHeight=function(a){this.legendItemHeight=a},l.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},l.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},l.opacityForLegend=function(a){return a.classed(o.legendItemHidden)?null:1},l.opacityForUnfocusedLegend=function(a){return a.classed(o.legendItemHidden)?null:.3},l.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+o.legendItem).filter(function(b){return a.indexOf(b)>=0}).classed(o.legendItemFocused,b).transition().duration(100).style("opacity",function(){var a=b?c.opacityForLegend:c.opacityForUnfocusedLegend;return a.call(c,c.d3.select(this))})},l.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+o.legendItem).classed(o.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},l.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},l.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&x(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},l.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},l.updateLegend=function(a,b,c){function d(a,b){return x.legendItemTextBox[b]||(x.legendItemTextBox[b]=x.getTextRect(a.textContent,o.legendItem,a)),x.legendItemTextBox[b]}function e(b,c,e){function f(a,b){b||(g=(o-G-n)/2,g<E&&(g=(o-n)/2,G=0,M++)),L[a]=M,K[M]=x.isLegendInset?10:g,H[a]=G,G+=n}var g,h,i=0===e,j=e===a.length-1,k=d(b,c),l=k.width+F+(!j||x.isLegendRight||x.isLegendInset?B:0)+y.legend_padding,m=k.height+A,n=x.isLegendRight||x.isLegendInset?m:l,o=x.isLegendRight||x.isLegendInset?x.getLegendHeight():x.getLegendWidth();return i&&(G=0,M=0,C=0,D=0),y.legend_show&&!x.isLegendToShow(c)?void(I[c]=J[c]=L[c]=H[c]=0):(I[c]=l,J[c]=m,(!C||l>=C)&&(C=l),(!D||m>=D)&&(D=m),h=x.isLegendRight||x.isLegendInset?D:C,void(y.legend_equally?(Object.keys(I).forEach(function(a){I[a]=C}),Object.keys(J).forEach(function(a){J[a]=D}),g=(o-h*a.length)/2,g<E?(G=0,M=0,a.forEach(function(a){f(a)})):f(c,!0)):f(c)))}var f,g,h,i,j,k,l,m,n,p,q,r,s,u,v,w,x=this,y=x.config,A=4,B=10,C=0,D=0,E=10,F=y.legend_item_tile_width+5,G=0,H={},I={},J={},K=[0],L={},M=0;a=a.filter(function(a){return!t(y.data_names[a])||null!==y.data_names[a]}),b=b||{},q=z(b,"withTransition",!0),r=z(b,"withTransitionForTransform",!0),x.isLegendInset&&(M=y.legend_inset_step?y.legend_inset_step:a.length,x.updateLegendStep(M)),x.isLegendRight?(f=function(a){return C*L[a]},i=function(a){return K[L[a]]+H[a]}):x.isLegendInset?(f=function(a){return C*L[a]+10},i=function(a){return K[L[a]]+H[a]}):(f=function(a){return K[L[a]]+H[a]},i=function(a){return D*L[a]}),g=function(a,b){return f(a,b)+4+y.legend_item_tile_width},j=function(a,b){return i(a,b)+9},h=function(a,b){return f(a,b)},k=function(a,b){return i(a,b)-5},l=function(a,b){return f(a,b)-2},m=function(a,b){return f(a,b)-2+y.legend_item_tile_width},n=function(a,b){return i(a,b)+4},p=x.legend.selectAll("."+o.legendItem).data(a).enter().append("g").attr("class",function(a){return x.generateClass(o.legendItem,a)}).style("visibility",function(a){return x.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){y.legend_item_onclick?y.legend_item_onclick.call(x,a):x.d3.event.altKey?(x.api.hide(),x.api.show(a)):(x.api.toggle(a),x.isTargetToShow(a)?x.api.focus(a):x.api.revert())}).on("mouseover",function(a){y.legend_item_onmouseover?y.legend_item_onmouseover.call(x,a):(x.d3.select(this).classed(o.legendItemFocused,!0),!x.transiting&&x.isTargetToShow(a)&&x.api.focus(a))}).on("mouseout",function(a){y.legend_item_onmouseout?y.legend_item_onmouseout.call(x,a):(x.d3.select(this).classed(o.legendItemFocused,!1),x.api.revert())}),p.append("text").text(function(a){return t(y.data_names[a])?y.data_names[a]:a}).each(function(a,b){e(this,a,b)}).style("pointer-events","none").attr("x",x.isLegendRight||x.isLegendInset?g:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:j),p.append("rect").attr("class",o.legendItemEvent).style("fill-opacity",0).attr("x",x.isLegendRight||x.isLegendInset?h:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:k),p.append("line").attr("class",o.legendItemTile).style("stroke",x.color).style("pointer-events","none").attr("x1",x.isLegendRight||x.isLegendInset?l:-200).attr("y1",x.isLegendRight||x.isLegendInset?-200:n).attr("x2",x.isLegendRight||x.isLegendInset?m:-200).attr("y2",x.isLegendRight||x.isLegendInset?-200:n).attr("stroke-width",y.legend_item_tile_height),w=x.legend.select("."+o.legendBackground+" rect"),x.isLegendInset&&C>0&&0===w.size()&&(w=x.legend.insert("g","."+o.legendItem).attr("class",o.legendBackground).append("rect")),s=x.legend.selectAll("text").data(a).text(function(a){return t(y.data_names[a])?y.data_names[a]:a}).each(function(a,b){e(this,a,b)}),(q?s.transition():s).attr("x",g).attr("y",j),u=x.legend.selectAll("rect."+o.legendItemEvent).data(a),(q?u.transition():u).attr("width",function(a){return I[a]}).attr("height",function(a){return J[a]}).attr("x",h).attr("y",k),v=x.legend.selectAll("line."+o.legendItemTile).data(a),(q?v.transition():v).style("stroke",x.color).attr("x1",l).attr("y1",n).attr("x2",m).attr("y2",n),w&&(q?w.transition():w).attr("height",x.getLegendHeight()-12).attr("width",C*(M+1)+10),x.legend.selectAll("."+o.legendItem).classed(o.legendItemHidden,function(a){return!x.isTargetToShow(a)}),x.updateLegendItemWidth(C),x.updateLegendItemHeight(D),x.updateLegendStep(M),x.updateSizes(),x.updateScales(),x.updateSvgSize(),x.transformAll(r,c),x.legendHasRendered=!0},l.initTitle=function(){var a=this;a.title=a.svg.append("text").text(a.config.title_text).attr("class",a.CLASS.title)},l.redrawTitle=function(){var a=this;a.title.attr("x",a.xForTitle.bind(a)).attr("y",a.yForTitle.bind(a))},l.xForTitle=function(){var a,b=this,c=b.config,d=c.title_position||"left";return a=d.indexOf("right")>=0?b.currentWidth-b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).width-c.title_padding.right:d.indexOf("center")>=0?(b.currentWidth-b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).width)/2:c.title_padding.left},l.yForTitle=function(){var a=this;return a.config.title_padding.top+a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).height},l.getTitlePadding=function(){var a=this;return a.yForTitle()+a.config.title_padding.bottom},f(e,i),i.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",o.axis+" "+o.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",o.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),a.axes.y=c.append("g").attr("class",o.axis+" "+o.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",o.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=c.append("g").attr("class",o.axis+" "+o.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",o.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},i.prototype.getXAxis=function(a,b,c,d,e,f,g){var h=this.owner,i=h.config,k={isCategory:h.isCategorized(),withOuterTick:e,tickMultiline:i.axis_x_tick_multiline,tickWidth:i.axis_x_tick_width,tickTextRotate:g?0:i.axis_x_tick_rotate,withoutTransition:f},l=j(h.d3,k).scale(a).orient(b);return h.isTimeSeries()&&d&&"function"!=typeof d&&(d=d.map(function(a){return h.parseDate(a)})),l.tickFormat(c).tickValues(d),h.isCategorized()&&(l.tickCentered(i.axis_x_tick_centered),x(i.axis_x_tick_culling)&&(i.axis_x_tick_culling=!1)),l},i.prototype.updateXAxisTickValues=function(a,b){var c,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(c=this.generateTickValues(d.mapTargetsToUniqueXs(a),e.axis_x_tick_count,d.isTimeSeries())),b?b.tickValues(c):(d.xAxis.tickValues(c),d.subXAxis.tickValues(c)),c},i.prototype.getYAxis=function(a,b,c,d,e,f,g){var h=this.owner,i=h.config,k={withOuterTick:e,withoutTransition:f,tickTextRotate:g?0:i.axis_y_tick_rotate},l=j(h.d3,k).scale(a).orient(b).tickFormat(c);return h.isTimeSeriesY()?l.ticks(h.d3.time[i.axis_y_tick_time_value],i.axis_y_tick_time_interval):l.tickValues(d),l},i.prototype.getId=function(a){
var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"},i.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return a<0?a.toFixed(0):a};return b.axis_x_tick_format&&(q(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""})),q(c)?function(b){return c.call(a,b)}:c},i.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0},i.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},i.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},i.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},i.prototype.getLabelOptionByAxisId=function(a){var b,c=this.owner,d=c.config;return"y"===a?b=d.axis_y_label:"y2"===a?b=d.axis_y2_label:"x"===a&&(b=d.axis_x_label),b},i.prototype.getLabelText=function(a){var b=this.getLabelOptionByAxisId(a);return r(b)?b:b?b.text:null},i.prototype.setLabelText=function(a,b){var c=this.owner,d=c.config,e=this.getLabelOptionByAxisId(a);r(e)?"y"===a?d.axis_y_label=b:"y2"===a?d.axis_y2_label=b:"x"===a&&(d.axis_x_label=b):e&&(e.text=b)},i.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),d=c&&"object"==typeof c&&c.position?c.position:b;return{isInner:d.indexOf("inner")>=0,isOuter:d.indexOf("outer")>=0,isLeft:d.indexOf("left")>=0,isCenter:d.indexOf("center")>=0,isRight:d.indexOf("right")>=0,isTop:d.indexOf("top")>=0,isMiddle:d.indexOf("middle")>=0,isBottom:d.indexOf("bottom")>=0}},i.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},i.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},i.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},i.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},i.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},i.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},i.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},i.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0},i.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"},i.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"},i.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},i.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},i.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},i.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},i.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},i.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},i.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-this.getMaxTickWidth("x"):c.isInner?"-0.5em":b.axis_x_height?b.axis_x_height-10:"3em"},i.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},i.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},i.prototype.textAnchorForXAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(!a.config.axis_rotated,this.getXAxisLabelPosition())},i.prototype.textAnchorForYAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getYAxisLabelPosition())},i.prototype.textAnchorForY2AxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getY2AxisLabelPosition())},i.prototype.getMaxTickWidth=function(a,b){var c,d,e,f,g,h=this.owner,i=h.config,j=0;return b&&h.currentMaxTickWidths[a]?h.currentMaxTickWidths[a]:(h.svg&&(c=h.filterTargetsToShow(h.data.targets),"y"===a?(d=h.y.copy().domain(h.getYDomain(c,"y")),e=this.getYAxis(d,h.yOrient,i.axis_y_tick_format,h.yAxisTickValues,!1,!0,!0)):"y2"===a?(d=h.y2.copy().domain(h.getYDomain(c,"y2")),e=this.getYAxis(d,h.y2Orient,i.axis_y2_tick_format,h.y2AxisTickValues,!1,!0,!0)):(d=h.x.copy().domain(h.getXDomain(c)),e=this.getXAxis(d,h.xOrient,h.xAxisTickFormat,h.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(c,e)),f=h.d3.select("body").append("div").classed("c3",!0),g=f.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g.append("g").call(e).each(function(){h.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();j<a.width&&(j=a.width)}),f.remove()})),h.currentMaxTickWidths[a]=j<=0?h.currentMaxTickWidths[a]:j,h.currentMaxTickWidths[a])},i.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+o.axisX+" ."+o.axisXLabel),d=b.main.select("."+o.axisY+" ."+o.axisYLabel),e=b.main.select("."+o.axisY2+" ."+o.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(a?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},i.prototype.getPadding=function(a,b,c,d){var e="number"==typeof a?a:a[b];return p(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,d):c},i.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner,d=c.config.axis_rotated?c.width:c.height;return b*(a/d)},i.prototype.generateTickValues=function(a,b,c){var d,e,f,g,h,i,j,k=a;if(b)if(d=q(b)?b():b,1===d)k=[a[0]];else if(2===d)k=[a[0],a[a.length-1]];else if(d>2){for(g=d-2,e=a[0],f=a[a.length-1],h=(f-e)/(g+1),k=[e],i=0;i<g;i++)j=+e+h*(i+1),k.push(c?new Date(j):j);k.push(f)}return c||(k=k.sort(function(a,b){return a-b})),k},i.prototype.generateTransitions=function(a){var b=this.owner,c=b.axes;return{axisX:a?c.x.transition().duration(a):c.x,axisY:a?c.y.transition().duration(a):c.y,axisY2:a?c.y2.transition().duration(a):c.y2,axisSubX:a?c.subx.transition().duration(a):c.subx}},i.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1),c.axes.y.style("opacity",b?0:1),c.axes.y2.style("opacity",b?0:1),c.axes.subx.style("opacity",b?0:1),a.axisX.call(c.xAxis),a.axisY.call(c.yAxis),a.axisY2.call(c.y2Axis),a.axisSubX.call(c.subXAxis)},l.getClipPath=function(b){var c=a.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(c?"":document.URL.split("#")[0])+"#"+b+")"},l.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},l.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},l.getAxisClipY=function(a){return a?-20:-this.margin.top},l.getXAxisClipX=function(){var a=this;return a.getAxisClipX(!a.config.axis_rotated)},l.getXAxisClipY=function(){var a=this;return a.getAxisClipY(!a.config.axis_rotated)},l.getYAxisClipX=function(){var a=this;return a.config.axis_y_inner?-1:a.getAxisClipX(a.config.axis_rotated)},l.getYAxisClipY=function(){var a=this;return a.getAxisClipY(a.config.axis_rotated)},l.getAxisClipWidth=function(a){var b=this,c=Math.max(30,b.margin.left),d=Math.max(30,b.margin.right);return a?b.width+2+c+d:b.margin.left+20},l.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},l.getXAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(!a.config.axis_rotated)},l.getXAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(!a.config.axis_rotated)},l.getYAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(a.config.axis_rotated)+(a.config.axis_y_inner?20:0)},l.getYAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(a.config.axis_rotated)},l.initPie=function(){var a=this,b=a.d3,c=a.config;a.pie=b.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)}),c.data_order||a.pie.sort(null)},l.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2,a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0},l.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},l.updateAngle=function(a){var b,c,d,e,f=this,g=f.config,h=!1,i=0;return g?(f.pie(f.filterTargetsToShow(f.data.targets)).forEach(function(b){h||b.data.id!==a.data.id||(h=!0,a=b,a.index=i),i++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),f.isGaugeType(a.data)&&(b=g.gauge_min,c=g.gauge_max,d=Math.PI*(g.gauge_fullCircle?2:1)/(c-b),e=a.value<b?0:a.value<c?a.value-b:c-b,a.startAngle=g.gauge_startingAngle,a.endAngle=a.startAngle+d*e),h?a:null):null},l.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c),e?b(e):"M 0 0")};return c.centroid=b.centroid,c},l.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){var d=b.updateAngle(a);return d?c(d):"M 0 0"}},l.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},l.transformForArcLabel=function(a){var b,c,d,e,f,g=this,h=g.config,i=g.updateAngle(a),j="";return i&&!g.hasType("gauge")&&(b=this.svgArc.centroid(i),c=isNaN(b[0])?0:b[0],d=isNaN(b[1])?0:b[1],e=Math.sqrt(c*c+d*d),f=g.hasType("donut")&&h.donut_label_ratio?q(h.donut_label_ratio)?h.donut_label_ratio(a,g.radius,e):h.donut_label_ratio:g.hasType("pie")&&h.pie_label_ratio?q(h.pie_label_ratio)?h.pie_label_ratio(a,g.radius,e):h.pie_label_ratio:g.radius&&e?(36/g.radius>.375?1.175-36/g.radius:.8)*g.radius/e:0,j="translate("+c*f+","+d*f+")"),j},l.getArcRatio=function(a){var b=this,c=b.config,d=Math.PI*(b.hasType("gauge")&&!c.gauge_fullCircle?1:2);return a?(a.endAngle-a.startAngle)/d:null},l.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},l.textForArcLabel=function(a){var b,c,d,e,f,g=this;return g.shouldShowArcLabel()?(b=g.updateAngle(a),c=b?b.value:null,d=g.getArcRatio(b),e=a.data.id,g.hasType("gauge")||g.meetsArcLabelThreshold(d)?(f=g.getArcLabelFormat(),f?f(c,d,e):g.defaultArcValueFormat(c,d)):""):""},l.expandArc=function(b){var c,d=this;return d.transiting?void(c=a.setInterval(function(){d.transiting||(a.clearInterval(c),d.legend.selectAll(".c3-legend-item-focused").size()>0&&d.expandArc(b))},10)):(b=d.mapToTargetIds(b),void d.svg.selectAll(d.selectorTargets(b,"."+o.chartArc)).each(function(a){d.shouldExpand(a.data.id)&&d.d3.select(this).selectAll("path").transition().duration(d.expandDuration(a.data.id)).attr("d",d.svgArcExpanded).transition().duration(2*d.expandDuration(a.data.id)).attr("d",d.svgArcExpandedSub).each(function(a){d.isDonutType(a.data)})}))},l.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+o.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+o.arc).style("opacity",1))},l.expandDuration=function(a){var b=this,c=b.config;return b.isDonutType(a)?c.donut_expand_duration:b.isGaugeType(a)?c.gauge_expand_duration:b.isPieType(a)?c.pie_expand_duration:50},l.shouldExpand=function(a){var b=this,c=b.config;return b.isDonutType(a)&&c.donut_expand||b.isGaugeType(a)&&c.gauge_expand||b.isPieType(a)&&c.pie_expand},l.shouldShowArcLabel=function(){var a=this,b=a.config,c=!0;return a.hasType("donut")?c=b.donut_label_show:a.hasType("pie")&&(c=b.pie_label_show),c},l.meetsArcLabelThreshold=function(a){var b=this,c=b.config,d=b.hasType("donut")?c.donut_label_threshold:c.pie_label_threshold;return a>=d},l.getArcLabelFormat=function(){var a=this,b=a.config,c=b.pie_label_format;return a.hasType("gauge")?c=b.gauge_label_format:a.hasType("donut")&&(c=b.donut_label_format),c},l.getArcTitle=function(){var a=this;return a.hasType("donut")?a.config.donut_title:""},l.updateTargetsForArc=function(a){var b,c,d=this,e=d.main,f=d.classChartArc.bind(d),g=d.classArcs.bind(d),h=d.classFocus.bind(d);b=e.select("."+o.chartArcs).selectAll("."+o.chartArc).data(d.pie(a)).attr("class",function(a){return f(a)+h(a.data)}),c=b.enter().append("g").attr("class",f),c.append("g").attr("class",g),c.append("text").attr("dy",d.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},l.initArc=function(){var a=this;a.arcs=a.main.select("."+o.chart).append("g").attr("class",o.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",o.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},l.redrawArc=function(a,b,c){var d,e=this,f=e.d3,g=e.config,h=e.main;d=h.selectAll("."+o.arcs).selectAll("."+o.arc).data(e.arcData.bind(e)),d.enter().append("path").attr("class",e.classArc.bind(e)).style("fill",function(a){return e.color(a.data)}).style("cursor",function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){e.isGaugeType(a.data)&&(a.startAngle=a.endAngle=g.gauge_startingAngle),this._current=a}),d.attr("transform",function(a){return!e.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),b&&(c=e.convertToArcData(b),e.expandArc(b.data.id),e.api.focus(b.data.id),e.toggleFocusLegend(b.data.id,!0),e.config.data_onmouseover(c,this)))}:null).on("mousemove",g.interaction_enabled?function(a){var b,c,d=e.updateAngle(a);d&&(b=e.convertToArcData(d),c=[b],e.showTooltip(c,this))}:null).on("mouseout",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),b&&(c=e.convertToArcData(b),e.unexpandArc(b.data.id),e.api.revert(),e.revertLegend(),e.hideTooltip(),e.config.data_onmouseout(c,this)))}:null).on("click",g.interaction_enabled?function(a,b){var c,d=e.updateAngle(a);d&&(c=e.convertToArcData(d),e.toggleShape&&e.toggleShape(this,c,b),e.config.data_onclick.call(e.api,c,this))}:null).each(function(){e.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b,c=e.updateAngle(a);return c?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),b=f.interpolate(this._current,c),this._current=b(0),function(c){var d=b(c);return d.data=a.data,e.getArc(d,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return e.levelColor?e.levelColor(a.data.values[0].value):e.color(a.data.id)}).style("opacity",1).call(e.endall,function(){e.transiting=!1}),d.exit().transition().duration(b).style("opacity",0).remove(),h.selectAll("."+o.chartArc).select("text").style("opacity",0).attr("class",function(a){return e.isGaugeType(a.data)?o.gaugeValue:""}).text(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(a){return e.isGaugeType(a.data)?Math.round(e.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return e.isTargetToShow(a.data.id)&&e.isArcType(a.data)?1:0}),h.select("."+o.chartArcsTitle).style("opacity",e.hasType("donut")||e.hasType("gauge")?1:0),e.hasType("gauge")&&(e.arcs.select("."+o.chartArcsBackground).attr("d",function(){var a={data:[{value:g.gauge_max}],startAngle:g.gauge_startingAngle,endAngle:-1*g.gauge_startingAngle};return e.getArc(a,!0,!0)}),e.arcs.select("."+o.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?g.gauge_units:""),e.arcs.select("."+o.chartArcsGaugeMin).attr("dx",-1*(e.innerRadius+(e.radius-e.innerRadius)/(g.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),e.arcs.select("."+o.chartArcsGaugeMax).attr("dx",e.innerRadius+(e.radius-e.innerRadius)/(g.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_max:""))},l.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",o.chartArcsBackground),a.append("text").attr("class",o.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",o.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",o.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},l.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},l.initRegion=function(){var a=this;a.region=a.main.append("g").attr("clip-path",a.clipPath).attr("class",o.regions)},l.updateRegion=function(a){var b=this,c=b.config;b.region.style("visibility",b.hasArcType()?"hidden":"visible"),b.mainRegion=b.main.select("."+o.regions).selectAll("."+o.region).data(c.regions),b.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),b.mainRegion.attr("class",b.classRegion.bind(b)),b.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},l.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect").each(function(){var a=b.d3.select(this.parentNode).datum();b.d3.select(this).datum(a)}),d=b.regionX.bind(b),e=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",f).attr("height",g).style("fill-opacity",function(a){return p(a.opacity)?a.opacity:.1})]},l.regionX=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"start"in a?e(a.start):0:d.axis_rotated?0:"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},l.regionY=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?0:"end"in a?e(a.end):0:d.axis_rotated&&"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},l.regionWidth=function(a){var b,c=this,d=c.config,e=c.regionX(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"end"in a?f(a.end):c.width:d.axis_rotated?c.width:"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.width,b<e?0:b-e},l.regionHeight=function(a){var b,c=this,d=c.config,e=this.regionY(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?c.height:"start"in a?f(a.start):c.height:d.axis_rotated&&"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.height,b<e?0:b-e},l.isRegionOnX=function(a){return!a.axis||"x"===a.axis},l.drag=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.config,l=j.main,m=j.d3;j.hasArcType()||k.data_selection_enabled&&(k.zoom_enabled&&!j.zoom.altDomain||k.data_selection_multiple&&(b=j.dragStart[0],c=j.dragStart[1],d=a[0],e=a[1],f=Math.min(b,d),g=Math.max(b,d),h=k.data_selection_grouped?j.margin.top:Math.min(c,e),i=k.data_selection_grouped?j.height:Math.max(c,e),l.select("."+o.dragarea).attr("x",f).attr("y",h).attr("width",g-f).attr("height",i-h),l.selectAll("."+o.shapes).selectAll("."+o.shape).filter(function(a){return k.data_selection_isselectable(a)}).each(function(a,b){var c,d,e,k,l,n,p=m.select(this),q=p.classed(o.SELECTED),r=p.classed(o.INCLUDED),s=!1;if(p.classed(o.circle))c=1*p.attr("cx"),d=1*p.attr("cy"),l=j.togglePoint,s=f<c&&c<g&&h<d&&d<i;else{if(!p.classed(o.bar))return;n=C(this),c=n.x,d=n.y,e=n.width,k=n.height,l=j.togglePath,s=!(g<c||c+e<f||i<d||d+k<h)}s^r&&(p.classed(o.INCLUDED,!r),p.classed(o.SELECTED,!q),l.call(j,!q,p,a,b))})))},l.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+o.chart).append("rect").attr("class",o.dragarea).style("opacity",.1),b.dragging=!0)},l.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+o.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+o.shape).classed(o.INCLUDED,!1),a.dragging=!1)},l.selectPoint=function(a,b,c){var d=this,e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node()),d.main.select("."+o.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+o.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(o.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)},l.unselectPoint=function(a,b,c){var d=this;d.config.data_onunselected.call(d.api,b,a.node()),d.main.select("."+o.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+o.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},l.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},l.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},l.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.color(b)})},l.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},l.getToggle=function(a,b){var c,d=this;return"circle"===a.nodeName?c=d.isStepType(b)?function(){}:d.togglePoint:"path"===a.nodeName&&(c=d.togglePath),c},l.toggleShape=function(a,b,c){var d=this,e=d.d3,f=d.config,g=e.select(a),h=g.classed(o.SELECTED),i=d.getToggle(a,b).bind(d);f.data_selection_enabled&&f.data_selection_isselectable(b)&&(f.data_selection_multiple||d.main.selectAll("."+o.shapes+(f.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+o.shape).each(function(a,b){var c=e.select(this);c.classed(o.SELECTED)&&i(!1,c.classed(o.SELECTED,!1),a,b)}),g.classed(o.SELECTED,!h),i(!h,g,b,c))},l.initBrush=function(){var a=this,b=a.d3;a.brush=b.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+o.brush).call(this),this},a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}},l.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context")),d=b.subchart_show?"visible":"hidden";c.style("visibility",d),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",o.chart),c.select("."+o.chart).append("g").attr("class",o.chartBars),c.select("."+o.chart).append("g").attr("class",o.chartLines),c.append("g").attr("clip-path",a.clipPath).attr("class",o.brush).call(a.brush),a.axes.subx=c.append("g").attr("class",o.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis).style("visibility",b.subchart_axis_x_show?d:"hidden")},l.updateTargetsForSubchart=function(a){var b,c,d,e,f=this,g=f.context,h=f.config,i=f.classChartBar.bind(f),j=f.classBars.bind(f),k=f.classChartLine.bind(f),l=f.classLines.bind(f),m=f.classAreas.bind(f);h.subchart_show&&(e=g.select("."+o.chartBars).selectAll("."+o.chartBar).data(a).attr("class",i),d=e.enter().append("g").style("opacity",0).attr("class",i),d.append("g").attr("class",j),c=g.select("."+o.chartLines).selectAll("."+o.chartLine).data(a).attr("class",k),b=c.enter().append("g").style("opacity",0).attr("class",k),b.append("g").attr("class",l),b.append("g").attr("class",m),g.selectAll("."+o.brush+" rect").attr(h.axis_rotated?"width":"height",h.axis_rotated?f.width2:f.height2))},l.updateBarForSubchart=function(a){var b=this;b.contextBar=b.context.selectAll("."+o.bars).selectAll("."+o.bar).data(b.barData.bind(b)),b.contextBar.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color),b.contextBar.style("opacity",b.initialOpacity.bind(b)),b.contextBar.exit().transition().duration(a).style("opacity",0).remove()},l.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)},l.updateLineForSubchart=function(a){var b=this;b.contextLine=b.context.selectAll("."+o.lines).selectAll("."+o.line).data(b.lineData.bind(b)),b.contextLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.contextLine.style("opacity",b.initialOpacity.bind(b)),b.contextLine.exit().transition().duration(a).style("opacity",0).remove()},l.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a).style("opacity",1)},l.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+o.areas).selectAll("."+o.area).data(b.lineData.bind(b)),b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.contextArea.style("opacity",0),b.contextArea.exit().transition().duration(a).style("opacity",0).remove()},l.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},l.redrawSubchart=function(a,b,c,d,e,f,g){var h,i,j,k=this,l=k.d3,m=k.config;k.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(l.event&&"zoom"===l.event.type&&k.brush.extent(k.x.orgDomain()).update(),a&&(k.brush.empty()||k.brush.extent(k.x.orgDomain()).update(),h=k.generateDrawArea(e,!0),i=k.generateDrawBar(f,!0),j=k.generateDrawLine(g,!0),k.updateBarForSubchart(c),k.updateLineForSubchart(c),k.updateAreaForSubchart(c),k.redrawBarForSubchart(i,c,c),k.redrawLineForSubchart(j,c,c),k.redrawAreaForSubchart(h,c,c)))},l.redrawForBrush=function(){var a=this,b=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,b.orgDomain())},l.transformContext=function(a,b){var c,d=this;b&&b.axisSubX?c=b.axisSubX:(c=d.context.select("."+o.axisX),a&&(c=c.transition())),d.context.attr("transform",d.getTranslate("context")),c.attr("transform",d.getTranslate("subx"))},l.getDefaultExtent=function(){var a=this,b=a.config,c=q(b.axis_x_extent)?b.axis_x_extent(a.getXDomain(a.data.targets)):b.axis_x_extent;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},l.initZoom=function(){var a,b=this,c=b.d3,d=b.config;b.zoom=c.behavior.zoom().on("zoomstart",function(){a=c.event.sourceEvent,b.zoom.altDomain=c.event.sourceEvent.altKey?b.x.orgDomain():null,d.zoom_onzoomstart.call(b.api,c.event.sourceEvent)}).on("zoom",function(){b.redrawForZoom.call(b)}).on("zoomend",function(){var e=c.event.sourceEvent;e&&a.clientX===e.clientX&&a.clientY===e.clientY||(b.redrawEventRect(),b.updateZoom(),d.zoom_onzoomend.call(b.api,b.x.orgDomain()))}),b.zoom.scale=function(a){return d.axis_rotated?this.y(a):this.x(a)},b.zoom.orgScaleExtent=function(){var a=d.zoom_extent?d.zoom_extent:[1,10];return[a[0],Math.max(b.getMaxDataCount()/a[1],a[1])]},b.zoom.updateScaleExtent=function(){var a=w(b.x.orgDomain())/w(b.getZoomDomain()),c=this.orgScaleExtent();return this.scaleExtent([c[0]*a,c[1]*a]),this}},l.getZoomDomain=function(){var a=this,b=a.config,c=a.d3,d=c.min([a.orgXDomain[0],b.zoom_x_min]),e=c.max([a.orgXDomain[1],b.zoom_x_max]);return[d,e]},l.updateZoom=function(){var a=this,b=a.config.zoom_enabled?a.zoom:function(){};a.main.select("."+o.zoomRect).call(b).on("dblclick.zoom",null),a.main.selectAll("."+o.eventRect).call(b).on("dblclick.zoom",null)},l.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;if(c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length){if("mousemove"===b.event.sourceEvent.type&&d.altDomain)return e.domain(d.altDomain),void d.scale(e).updateScaleExtent();a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0),c.zoom_onzoom.call(a.api,e.orgDomain())}},l.generateColor=function(){var a=this,b=a.config,c=a.d3,d=b.data_colors,e=y(b.color_pattern)?b.color_pattern:c.scale.category10().range(),f=b.data_color,g=[];return function(a){var b,c=a.id||a.data&&a.data.id||a;return d[c]instanceof Function?b=d[c](a):d[c]?b=d[c]:(g.indexOf(c)<0&&g.push(c),b=e[g.indexOf(c)%e.length],d[c]=b),f instanceof Function?f(b,a):b}},l.generateLevelColor=function(){var a=this,b=a.config,c=b.color_pattern,d=b.color_threshold,e="value"===d.unit,f=d.values&&d.values.length?d.values:[],g=d.max||100;return y(b.color_threshold)?function(a){var b,d,h=c[c.length-1];for(b=0;b<f.length;b++)if(d=e?a:100*a/g,d<f[b]){h=c[b];break}return h}:null},l.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){var g="y2"===b.axis.getId(f)?d:c;return g.call(b,a,e)}},l.yFormat=function(a){var b=this,c=b.config,d=c.axis_y_tick_format?c.axis_y_tick_format:b.defaultValueFormat;return d(a)},l.y2Format=function(a){var b=this,c=b.config,d=c.axis_y2_tick_format?c.axis_y2_tick_format:b.defaultValueFormat;return d(a)},l.defaultValueFormat=function(a){return p(a)?+a:""},l.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},l.dataLabelFormat=function(a){var b,c=this,d=c.config.data_labels,e=function(a){return p(a)?+a:""};return b="function"==typeof d.format?d.format:"object"==typeof d.format?d.format[a]?d.format[a]===!0?e:d.format[a]:function(){return""}:e},l.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},l.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},l.getCaches=function(a){var b,c=[];for(b=0;b<a.length;b++)a[b]in this.cache&&c.push(this.cloneTarget(this.cache[a[b]]));return c};var o=l.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",
selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};l.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)},l.classText=function(a){return this.generateClass(o.text,a.index)},l.classTexts=function(a){return this.generateClass(o.texts,a.id)},l.classShape=function(a){return this.generateClass(o.shape,a.index)},l.classShapes=function(a){return this.generateClass(o.shapes,a.id)},l.classLine=function(a){return this.classShape(a)+this.generateClass(o.line,a.id)},l.classLines=function(a){return this.classShapes(a)+this.generateClass(o.lines,a.id)},l.classCircle=function(a){return this.classShape(a)+this.generateClass(o.circle,a.index)},l.classCircles=function(a){return this.classShapes(a)+this.generateClass(o.circles,a.id)},l.classBar=function(a){return this.classShape(a)+this.generateClass(o.bar,a.index)},l.classBars=function(a){return this.classShapes(a)+this.generateClass(o.bars,a.id)},l.classArc=function(a){return this.classShape(a.data)+this.generateClass(o.arc,a.data.id)},l.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(o.arcs,a.data.id)},l.classArea=function(a){return this.classShape(a)+this.generateClass(o.area,a.id)},l.classAreas=function(a){return this.classShapes(a)+this.generateClass(o.areas,a.id)},l.classRegion=function(a,b){return this.generateClass(o.region,b)+" "+("class"in a?a.class:"")},l.classEvent=function(a){return this.generateClass(o.eventRect,a.index)},l.classTarget=function(a){var b=this,c=b.config.data_classes[a],d="";return c&&(d=" "+o.target+"-"+c),b.generateClass(o.target,a)+d},l.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},l.classFocused=function(a){return" "+(this.focusedTargetIds.indexOf(a.id)>=0?o.focused:"")},l.classDefocused=function(a){return" "+(this.defocusedTargetIds.indexOf(a.id)>=0?o.defocused:"")},l.classChartText=function(a){return o.chartText+this.classTarget(a.id)},l.classChartLine=function(a){return o.chartLine+this.classTarget(a.id)},l.classChartBar=function(a){return o.chartBar+this.classTarget(a.id)},l.classChartArc=function(a){return o.chartArc+this.classTarget(a.data.id)},l.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},l.selectorTarget=function(a,b){return(b||"")+"."+o.target+this.getTargetSelectorSuffix(a)},l.selectorTargets=function(a,b){var c=this;return a=a||[],a.length?a.map(function(a){return c.selectorTarget(a,b)}):null},l.selectorLegend=function(a){return"."+o.legendItem+this.getTargetSelectorSuffix(a)},l.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var p=l.isValue=function(a){return a||0===a},q=l.isFunction=function(a){return"function"==typeof a},r=l.isString=function(a){return"string"==typeof a},s=l.isUndefined=function(a){return"undefined"==typeof a},t=l.isDefined=function(a){return"undefined"!=typeof a},u=l.ceil10=function(a){return 10*Math.ceil(a/10)},v=l.asHalfPixel=function(a){return Math.ceil(a)+.5},w=l.diffDomain=function(a){return a[1]-a[0]},x=l.isEmpty=function(a){return"undefined"==typeof a||null===a||r(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length},y=l.notEmpty=function(a){return!l.isEmpty(a)},z=l.getOption=function(a,b,c){return t(a[b])?a[b]:c},A=l.hasValue=function(a,b){var c=!1;return Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)}),c},B=l.sanitise=function(a){return"string"==typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},C=l.getPathBox=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)],d=c[0].x,e=Math.min(c[0].y,c[1].y);return{x:d,y:e,width:b.width,height:b.height}};k.focus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),this.revert(),this.defocus(),b.classed(o.focused,!0).classed(o.defocused,!1),c.hasArcType()&&c.expandArc(a),c.toggleFocusLegend(a,!0),c.focusedTargetIds=a,c.defocusedTargetIds=c.defocusedTargetIds.filter(function(b){return a.indexOf(b)<0})},k.defocus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),b.classed(o.focused,!1).classed(o.defocused,!0),c.hasArcType()&&c.unexpandArc(a),c.toggleFocusLegend(a,!1),c.focusedTargetIds=c.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),c.defocusedTargetIds=a},k.revert=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a)),b.classed(o.focused,!1).classed(o.defocused,!1),c.hasArcType()&&c.unexpandArc(a),c.config.legend_show&&(c.showLegend(a.filter(c.isLegendToShow.bind(c))),c.legend.selectAll(c.selectorLegends(a)).filter(function(){return c.d3.select(this).classed(o.legendItemFocused)}).classed(o.legendItemFocused,!1)),c.focusedTargetIds=[],c.defocusedTargetIds=[]},k.show=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.removeHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",1,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",1)}),b.withLegend&&d.showLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},k.hide=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.addHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",0,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",0)}),b.withLegend&&d.hideLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},k.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},k.zoom=function(a){var b=this.internal;return a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain())),b.brush.extent()},k.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a,b.updateAndRedraw()},k.unzoom=function(){var a=this.internal;a.brush.clear().update(),a.redraw({withUpdateXDomain:!0})},k.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_max=d.max([b.orgXDomain[1],a])):c.zoom_x_max},k.zoom.min=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_min=d.min([b.orgXDomain[0],a])):c.zoom_x_min},k.zoom.range=function(a){return arguments.length?(t(a.max)&&this.domain.max(a.max),void(t(a.min)&&this.domain.min(a.min))):{max:this.domain.max(),min:this.domain.min()}},k.load=function(a){var b=this.internal,c=b.config;return a.xs&&b.addXs(a.xs),"names"in a&&k.data.names.bind(this)(a.names),"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?void b.load(b.getCaches(a.cacheIds),a.done):void("unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a))},k.unload=function(a){var b=this.internal;a=a||{},a instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},k.flow=function(a){var b,c,d,e,f,g,h,i,j=this.internal,k=[],l=j.getMaxDataCount(),m=0,n=0;if(a.json)c=j.convertJsonToData(a.json,a.keys);else if(a.rows)c=j.convertRowsToData(a.rows);else{if(!a.columns)return;c=j.convertColumnsToData(a.columns)}b=j.convertDataToTargets(c,!0),j.data.targets.forEach(function(a){var c,d,e=!1;for(c=0;c<b.length;c++)if(a.id===b[c].id){for(e=!0,a.values[a.values.length-1]&&(n=a.values[a.values.length-1].index+1),m=b[c].values.length,d=0;d<m;d++)b[c].values[d].index=n+d,j.isTimeSeries()||(b[c].values[d].x=n+d);a.values=a.values.concat(b[c].values),b.splice(c,1);break}e||k.push(a.id)}),j.data.targets.forEach(function(a){var b,c;for(b=0;b<k.length;b++)if(a.id===k[b])for(n=a.values[a.values.length-1].index+1,c=0;c<m;c++)a.values.push({id:a.id,index:n+c,x:j.isTimeSeries()?j.getOtherTargetX(n+c):n+c,value:null})}),j.data.targets.length&&b.forEach(function(a){var b,c=[];for(b=j.data.targets[0].values[0].index;b<n;b++)c.push({id:a.id,index:b,x:j.isTimeSeries()?j.getOtherTargetX(b):b,value:null});a.values.forEach(function(a){a.index+=n,j.isTimeSeries()||(a.x+=n)}),a.values=c.concat(a.values)}),j.data.targets=j.data.targets.concat(b),d=j.getMaxDataCount(),f=j.data.targets[0],g=f.values[0],t(a.to)?(m=0,i=j.isTimeSeries()?j.parseDate(a.to):a.to,f.values.forEach(function(a){a.x<i&&m++})):t(a.length)&&(m=a.length),l?1===l&&j.isTimeSeries()&&(h=(f.values[f.values.length-1].x-g.x)/2,e=[new Date(+g.x-h),new Date(+g.x+h)],j.updateXDomain(null,!0,!0,!1,e)):(h=j.isTimeSeries()?f.values.length>1?f.values[f.values.length-1].x-g.x:g.x-j.getXDomain(j.data.targets)[0]:1,e=[g.x-h,g.x],j.updateXDomain(null,!0,!0,!1,e)),j.updateTargets(j.data.targets),j.redraw({flow:{index:g.index,length:m,duration:p(a.duration)?a.duration:j.config.transition_duration,done:a.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})},l.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e,f,g,h=a.targets,i=a.flow,j=a.drawBar,k=a.drawLine,l=a.drawArea,m=a.cx,n=a.cy,p=a.xv,q=a.xForText,r=a.yForText,s=a.duration,t=1,u=i.index,v=i.length,x=b.getValueOnIndex(b.data.targets[0].values,u),y=b.getValueOnIndex(b.data.targets[0].values,u+v),z=b.x.domain(),A=i.duration||s,B=i.done||function(){},C=b.generateWait(),D=b.xgrid||d.selectAll([]),E=b.xgridLines||d.selectAll([]),F=b.mainRegion||d.selectAll([]),G=b.mainText||d.selectAll([]),H=b.mainBar||d.selectAll([]),I=b.mainLine||d.selectAll([]),J=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,v)}),g=b.updateXDomain(h,!0,!0),b.updateXGrid&&b.updateXGrid(!0),i.orgDataCount?e=1===i.orgDataCount||(x&&x.x)===(y&&y.x)?b.x(z[0])-b.x(g[0]):b.isTimeSeries()?b.x(z[0])-b.x(g[0]):b.x(x.x)-b.x(y.x):1!==b.data.targets[0].values.length?e=b.x(z[0])-b.x(g[0]):b.isTimeSeries()?(x=b.getValueOnIndex(b.data.targets[0].values,0),y=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),e=b.x(x.x)-b.x(y.x)):e=w(g)/2,t=w(z)/w(g),f="translate("+e+",0) scale("+t+",1)",b.hideXGridFocus(),d.transition().ease("linear").duration(A).each(function(){C.add(b.axes.x.transition().call(b.xAxis)),C.add(H.transition().attr("transform",f)),C.add(I.transition().attr("transform",f)),C.add(J.transition().attr("transform",f)),C.add(K.transition().attr("transform",f)),C.add(G.transition().attr("transform",f)),C.add(F.filter(b.isRegionOnX).transition().attr("transform",f)),C.add(D.transition().attr("transform",f)),C.add(E.transition().attr("transform",f))}).call(C,function(){var a,d=[],e=[],f=[];if(v){for(a=0;a<v;a++)d.push("."+o.shape+"-"+(u+a)),e.push("."+o.text+"-"+(u+a)),f.push("."+o.eventRect+"-"+(u+a));b.svg.selectAll("."+o.shapes).selectAll(d).remove(),b.svg.selectAll("."+o.texts).selectAll(e).remove(),b.svg.selectAll("."+o.eventRects).selectAll(f).remove(),b.svg.select("."+o.xgrid).remove()}D.attr("transform",null).attr(b.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",c.axis_rotated?0:p).attr("x2",c.axis_rotated?b.width:p),E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",p),H.attr("transform",null).attr("d",j),I.attr("transform",null).attr("d",k),J.attr("transform",null).attr("d",l),K.attr("transform",null).attr("cx",m).attr("cy",n),G.attr("transform",null).attr("x",q).attr("y",r).style("fill-opacity",b.opacityForText.bind(b)),F.attr("transform",null),F.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b)),c.interaction_enabled&&b.redrawEventRect(),B(),b.flowing=!1})}},k.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+o.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+o.shape).filter(function(){return c.select(this).classed(o.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},k.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+o.shapes).selectAll("."+o.shape).each(function(g,h){var i=e.select(this),j=g.data?g.data.id:g.id,k=d.getToggle(this,g).bind(d),l=f.data_selection_grouped||!a||a.indexOf(j)>=0,m=!b||b.indexOf(h)>=0,n=i.classed(o.SELECTED);i.classed(o.line)||i.classed(o.area)||(l&&m?f.data_selection_isselectable(g)&&!n&&k(!0,i.classed(o.SELECTED,!0),g,h):t(c)&&c&&n&&k(!1,i.classed(o.SELECTED,!1),g,h))})},k.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+o.shapes).selectAll("."+o.shape).each(function(f,g){var h=d.select(this),i=f.data?f.data.id:f.id,j=c.getToggle(this,f).bind(c),k=e.data_selection_grouped||!a||a.indexOf(i)>=0,l=!b||b.indexOf(g)>=0,m=h.classed(o.SELECTED);h.classed(o.line)||h.classed(o.area)||k&&l&&e.data_selection_isselectable(f)&&m&&j(!1,h.classed(o.SELECTED,!1),f,g)})},k.transform=function(a,b){var c=this.internal,d=["pie","donut"].indexOf(a)>=0?{withTransform:!0}:null;c.transformTo(b,a,d)},l.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},k.groups=function(a){var b=this.internal,c=b.config;return s(a)?c.data_groups:(c.data_groups=a,b.redraw(),c.data_groups)},k.xgrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_x_lines=a,b.redrawWithoutRescale(),c.grid_x_lines):c.grid_x_lines},k.xgrids.add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a?a:[]))},k.xgrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!0)},k.ygrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_y_lines=a,b.redrawWithoutRescale(),c.grid_y_lines):c.grid_y_lines},k.ygrids.add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a?a:[]))},k.ygrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!1)},k.regions=function(a){var b=this.internal,c=b.config;return a?(c.regions=a,b.redrawWithoutRescale(),c.regions):c.regions},k.regions.add=function(a){var b=this.internal,c=b.config;return a?(c.regions=c.regions.concat(a),b.redrawWithoutRescale(),c.regions):c.regions},k.regions.remove=function(a){var b,c,d,e=this.internal,f=e.config;return a=a||{},b=e.getOption(a,"duration",f.transition_duration),c=e.getOption(a,"classes",[o.region]),d=e.main.select("."+o.regions).selectAll(c.map(function(a){return"."+a})),(b?d.transition().duration(b):d).style("opacity",0).remove(),f.regions=f.regions.filter(function(a){var b=!1;return!a.class||(a.class.split(" ").forEach(function(a){c.indexOf(a)>=0&&(b=!0)}),!b)}),f.regions},k.data=function(a){var b=this.internal.data.targets;return"undefined"==typeof a?b:b.filter(function(b){return[].concat(a).indexOf(b.id)>=0})},k.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))},k.data.values=function(a){var b,c=null;return a&&(b=this.data(a),c=b[0]?b[0].values.map(function(a){return a.value}):null),c},k.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},k.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},k.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},k.category=function(a,b){var c=this.internal,d=c.config;return arguments.length>1&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},k.categories=function(a){var b=this.internal,c=b.config;return arguments.length?(c.axis_x_categories=a,b.redraw(),c.axis_x_categories):c.axis_x_categories},k.color=function(a){var b=this.internal;return b.color(a)},k.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},k.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},k.axis=function(){},k.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},k.axis.max=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(p(a.x)&&(c.axis_x_max=a.x),p(a.y)&&(c.axis_y_max=a.y),p(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}},k.axis.min=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(p(a.x)&&(c.axis_x_min=a.x),p(a.y)&&(c.axis_y_min=a.y),p(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}},k.axis.range=function(a){return arguments.length?(t(a.max)&&this.axis.max(a.max),void(t(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},k.legend=function(){},k.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},k.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},k.resize=function(a){var b=this.internal,c=b.config;c.size_width=a?a.width:null,c.size_height=a?a.height:null,this.flush()},k.flush=function(){var a=this.internal;a.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},k.destroy=function(){var b=this.internal;if(a.clearInterval(b.intervalForObserveInserted),void 0!==b.resizeTimeout&&a.clearTimeout(b.resizeTimeout),a.detachEvent)a.detachEvent("onresize",b.resizeFunction);else if(a.removeEventListener)a.removeEventListener("resize",b.resizeFunction);else{var c=a.onresize;c&&c.add&&c.remove&&c.remove(b.resizeFunction)}return b.selectChart.classed("c3",!1).html(""),Object.keys(b).forEach(function(a){b[a]=null}),null},k.tooltip=function(){},k.tooltip.show=function(a){var b,c,d=this.internal;a.mouse&&(c=a.mouse),a.data?d.isMultipleX()?(c=[d.x(a.data.x),d.getYScale(a.data.id)(a.data.value)],b=null):b=p(a.data.index)?a.data.index:d.getIndexByX(a.data.x):"undefined"!=typeof a.x?b=d.getIndexByX(a.x):"undefined"!=typeof a.index&&(b=a.index),d.dispatchEvent("mouseover",b,c),d.dispatchEvent("mousemove",b,c),d.config.tooltip_onshow.call(d,a.data)},k.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var D;l.isSafari=function(){var b=a.navigator.userAgent;return b.indexOf("Safari")>=0&&b.indexOf("Chrome")<0},l.isChrome=function(){var b=a.navigator.userAgent;return b.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),function(){"SVGPathSeg"in a||(a.SVGPathSeg=function(a,b,c){this.pathSegType=a,this.pathSegTypeAsLetter=b,this._owningPathSegList=c},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},a.SVGPathSegClosePath=function(a){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CLOSEPATH,"z",a)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},a.SVGPathSegMovetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a),this._x=b,this._y=c},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegMovetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",a),this._x=b,this._y=c},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",a),this._x=b,this._y=c},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",a),this._x=b,this._y=c},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegArcAbs=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){
return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegArcRel=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoHorizontalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a),this._x=b},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoHorizontalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",a),this._x=b},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoVerticalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a),this._y=b},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoVerticalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a),this._y=b},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticSmoothRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(a,b){return new SVGPathSegMovetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(a,b){return new SVGPathSegMovetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,b){return new SVGPathSegLinetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,b){return new SVGPathSegLinetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicAbs(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicRel(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(a,b,c,d,e,f,g){return new SVGPathSegArcAbs(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegArcRel=function(a,b,c,d,e,f,g){return new SVGPathSegArcRel(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(a){return new SVGPathSegLinetoHorizontalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(a){return new SVGPathSegLinetoHorizontalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(a){return new SVGPathSegLinetoVerticalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(a){return new SVGPathSegLinetoVerticalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,b)}),"SVGPathSegList"in a||(a.SVGPathSegList=function(a){this._pathElement=a,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var b=!1;a.forEach(function(a){"d"==a.attributeName&&(b=!0)}),b&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(a){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(a){a._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(a){return this._checkPathSynchronizedToList(),this._list=[a],a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype._checkValidIndex=function(a){if(isNaN(a)||a<0||a>=this.numberOfItems)throw"INDEX_SIZE_ERR"},SVGPathSegList.prototype.getItem=function(a){return this._checkPathSynchronizedToList(),this._checkValidIndex(a),this._list[a]},SVGPathSegList.prototype.insertItemBefore=function(a,b){return this._checkPathSynchronizedToList(),b>this.numberOfItems&&(b=this.numberOfItems),a._owningPathSegList&&(a=a.clone()),this._list.splice(b,0,a),a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype.replaceItem=function(a,b){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._checkValidIndex(b),this._list[b]=a,a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList(),this._checkValidIndex(a);var b=this._list[a];return this._list.splice(a,1),this._writeListToPath(),b},SVGPathSegList.prototype.appendItem=function(a){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._list.push(a),a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList._pathSegArrayAsString=function(a){var b="",c=!0;return a.forEach(function(a){c?(c=!1,b+=a._asPathString()):b+=" "+a._asPathString()}),b},SVGPathSegList.prototype._parsePath=function(a){if(!a||0==a.length)return[];var b=this,c=function(){this.pathSegList=[]};c.prototype.appendSegment=function(a){this.pathSegList.push(a)};var d=function(a){this._string=a,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};d.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return a<=" "&&(" "==a||"\n"==a||"\t"==a||"\r"==a||"\f"==a)},d.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},d.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},d.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},d.prototype.peekSegmentType=function(){var a=this._string[this._currentIndex];return this._pathSegTypeFromChar(a)},d.prototype._pathSegTypeFromChar=function(a){switch(a){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},d.prototype._nextCommandHelper=function(a,b){return("+"==a||"-"==a||"."==a||a>="0"&&a<="9")&&b!=SVGPathSeg.PATHSEG_CLOSEPATH?b==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:b==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:b:SVGPathSeg.PATHSEG_UNKNOWN},d.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==SVGPathSeg.PATHSEG_MOVETO_ABS||a==SVGPathSeg.PATHSEG_MOVETO_REL},d.prototype._parseNumber=function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,e=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var h=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=h)for(var i=this._currentIndex-1,j=1;i>=h;)b+=j*(this._string.charAt(i--)-"0"),j*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)d+=(this._string.charAt(this._currentIndex++)-"0")*(c*=.1)}if(this._currentIndex!=g&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,f=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)a*=10,a+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var k=b+d;if(k*=e,a&&(k*=Math.pow(10,f*a)),g!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),k}},d.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=!1,b=this._string.charAt(this._currentIndex++);if("0"==b)a=!1;else{if("1"!=b)return;a=!0}return this._skipOptionalSpacesOrDelimiter(),a}},d.prototype.parseSegment=function(){var a=this._string[this._currentIndex],c=this._pathSegTypeFromChar(a);if(c==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;if(c=this._nextCommandHelper(a,this._previousCommand),c==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=c,c){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(b);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicAbs(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothRel(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothAbs(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticRel(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticAbs(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcRel(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcAbs(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);default:throw"Unknown path seg type."}};var e=new c,f=new d(a);if(!f.initialCommandIsMoveTo())return[];for(;f.hasMoreData();){var g=f.parseSegment();if(!g)return[];e.appendSegment(g)}return e.pathSegList})}(),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return n}):"undefined"!=typeof c&&"undefined"!=typeof d?d.exports=n:a.c3=n}(window)}(this),h()}),a.registerDynamic("72",["9b"],!0,function(a,b,c){this||self;return c.exports=a("9b"),c.exports}),a.register("9c",["72","4a","5d"],function(a){"use strict";function b(a,b){return a.map(function(c,d){return[a[d],b[d]]})}var c,d,e,f,g;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.getLanguageString,f=a.stringifyUnit}],execute:function(){g=function(a){function d(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,d),c.maxWidth=c.maxWidth||350,babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,c),this._covs=Array.isArray(a)?a:[a],this._language=c.language,this._precision=c.precision||4,this._labels=c.labels?c.labels:new Array(this._covs.length);var e=[];if(c.keys)e=Array.isArray(c.keys[0])?c.keys:c.keys.map(function(a){return[a]});else for(var f=0;f<this._covs.length;f++){var g=!0,h=!1,i=void 0;try{for(var j,k=this._covs[f].parameters.keys()[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=new Array(this._covs.length);m[f]=l,e.push(m)}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}}if(e=e.filter(function(a){return!a.every(function(a){return!a})}),e.some(function(a){return a.length!==b._covs.length}))throw new Error("Length of each parameter group must match number of coverages");this._paramKeyGroups=e,this._paramKeys=new Map;for(var n=function(a){var c=b._paramKeyGroups.map(function(b){return b[a]}).filter(function(a){return a});b._paramKeys.set(b._covs[a],c)},f=0;f<this._covs.length;f++)n(f)}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"onAdd",value:function(a){var b=this;babelHelpers.get(Object.getPrototypeOf(d.prototype),"onAdd",this).call(this,a),a.fire("dataloading");var c=Promise.all(this._covs.map(function(a){return a.loadDomain()})),e=Promise.all(this._covs.map(function(a){return a.loadRanges(b._paramKeys.get(a))}));Promise.all([c,e]).then(function(c){var d=babelHelpers.slicedToArray(c,2),e=d[0],f=d[1];b._domains=e,b._ranges=f,b._addPlotToPopup(),b.fire("dataLoad"),b.fire("afterAdd"),a.fire("dataload")}).catch(function(c){console.error(c),b.fire("error",c),a.fire("dataload")})}},{key:"_addPlotToPopup",value:function(){var a=this,b=this._paramKeyGroups[0],c=this._getPlotElement(b),d=document.createElement("div");if(this._paramKeyGroups.length>1){var f,g,h,i,j;!function(){var b=document.createElement("select");f=!0,g=!1,h=void 0;try{for(i=a._paramKeyGroups.map(function(a,b){return[a,b]})[Symbol.iterator]();!(f=(j=i.next()).done);f=!0){var k=babelHelpers.slicedToArray(j.value,2),l=k[0],m=k[1],n=a._getRefParam(l),o=document.createElement("option");o.value=m,o.text=e(n.observedProperty.label,a._language),b.appendChild(o)}}catch(a){g=!0,h=a}finally{try{!f&&i.return&&i.return()}finally{if(g)throw h}}b.addEventListener("change",function(){d.removeChild(c);var e=a._paramKeyGroups[parseInt(b.value)];c=a._getPlotElement(e),d.appendChild(c)}),d.appendChild(b)}()}d.appendChild(c),this.setContent(d)}},{key:"_getRefParam",value:function(a){var c=b(this._covs,a),d=babelHelpers.slicedToArray(c.filter(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[1];return c})[0],2),e=d[0],f=d[1],g=e.parameters.get(f);return g}},{key:"_getPlotElement",value:function(a){for(var d=this,g=(this._domains[0],b(this._covs,a)),h=this._getRefParam(a),i="Time",j=f(h.unit,this._language),k=e(h.observedProperty.label,this._language),l={},m=[],n={},o=0;o<this._covs.length;o++){var p=g[o][1];if(p){var q="x"+o,r=h.key+o;n[r]=this._labels[o]?this._labels[o]:k,l[r]=q;for(var s=this._domains[o].axes.get("t").values,t=this._ranges[o].get(p),u=[q],v=[r],w=0;w<s.length;w++){var x=t.get({t:w});if(null!==x){var y=new Date(s[w]);u.push(y),v.push(x)}}m.push(u),m.push(v)}}var z=300,A=document.createElement("div");return A.style.width=this.options.maxWidth+"px",A.style.height=z+"px",c.generate({bindto:A,data:{xs:l,columns:m,names:n},axis:{x:{type:"timeseries",tick:{format:this.options.timeFormat},label:{text:i,position:"outer-center"}},y:{tick:{count:7,format:function(a){return a.toPrecision(d._precision)}},label:{text:k+(j?" ("+j+")":""),position:"outer-middle"}}},grid:{x:{show:!0},y:{show:!0}},legend:{show:this._covs.length>1},tooltip:{format:{value:function(a,b,c){return a.toPrecision(d._precision)+" "+j}}},zoom:{enabled:!0,rescale:!0},size:{height:z,width:this.options.maxWidth}}),A}}]),d}(d.Popup),a("default",g)}}}),a.register("9d",["4a"],function(a){"use strict";function b(a){return function(a){function b(a,c){void 0===a&&(a={}),babelHelpers.classCallCheck(this,b),a.className=a.className||"leaflet-popup-draggable",babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"onAdd",value:function(a){var d=this;babelHelpers.get(Object.getPrototypeOf(b.prototype),"onAdd",this).call(this,a),this._draggable=new c.Draggable(this._container,this._wrapper),this._draggable.enable(),this._draggable.on("drag",function(b){var e=c.DomUtil.getPosition(d._wrapper.parentNode),f=a.layerPointToLatLng(e);d.setLatLng(f),d.fire("drag",b)}),this._draggable.on("dragstart predrag dragend",function(a){return d.fire(a.type,a)})}},{key:"onRemove",value:function(a){this._draggable.disable(),babelHelpers.get(Object.getPrototypeOf(b.prototype),"onRemove",this).call(this,a)}}]),b}(a)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),a.register("9e",["9d","9f"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){d=function(a){function b(){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(b,a),b}(b(c)),a("default",d)}}}),a.register("9f",["4a","5d"],function(a){"use strict";function b(a){var b=a.getBounds(),c=b.getCenter().lat,d=6378137*Math.PI*Math.cos(c*Math.PI/180),e=d*(b.getNorthEast().lng-b.getSouthWest().lng)/180,f=a.getSize(),g=e/f.x;return g}var c,d,e,f,g;return{setters:[function(a){c=a.default},function(a){d=a.getLanguageString,e=a.stringifyUnit,f=a.getCategory}],execute:function(){g=function(a){function c(a,b){babelHelpers.classCallCheck(this,c),babelHelpers.get(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,a,b);var d=this.options.layers||[];this._maxDistanceForPointsInPx=this.options.maxDistanceForPointsInPx||20,this.coverageLayers=new Set(d.filter(function(a){return a.getValueAt}))}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:"addCoverageLayer",value:function(a){if(a.getValueAt)return this.coverageLayers.add(a),this.updateData(),this}},{key:"removeCoverageLayer",
value:function(a){return this.coverageLayers.delete(a),this.updateData(),this}},{key:"onAdd",value:function(a){this._map=a,babelHelpers.get(Object.getPrototypeOf(c.prototype),"onAdd",this).call(this,a),this.updateData()}},{key:"onRemove",value:function(a){babelHelpers.get(Object.getPrototypeOf(c.prototype),"onRemove",this).call(this,a),this._map=null}},{key:"setLatLng",value:function(a){return babelHelpers.get(Object.getPrototypeOf(c.prototype),"setLatLng",this).call(this,a),this.updateData(),this}},{key:"hasData",value:function(){return this._hasData}},{key:"updateData",value:function(){if(this._map){var a="",c=this.getLatLng(),g=!0,h=!1,i=void 0;try{for(var j,k=this.coverageLayers[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=b(this._map)*this._maxDistanceForPointsInPx,n=l.getValueAt(c,m);if(null!=n){var o=l.parameter,p=o.observedProperty.categories?"":e(o.unit);if(o.categoryEncoding){var q=f(o,n);n=d(q.label)}a+="<div><strong>"+d(o.observedProperty.label)+"</strong>: "+n+" "+p+"</div>"}}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}return a||(this._hasData=!1,a="No data."),this._hasData=!0,this.setContent(a),this}}}]),c}(c.Popup),a("default",g)}}}),a.register("91",["5d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(b){var c={};c.COVERAGE=b.COVERAGE,c.COVERAGECOLLECTION=b.COVERAGECOLLECTION,c.DOMAIN=b.DOMAIN,a(c)}],execute:function(){b="https://covjson.org/def/",c=b+"core#",d=b+"domainTypes#",e=d+"Point",a("COVJSON_POINT",e),f=d+"PointSeries",a("COVJSON_POINTSERIES",f),g=d+"VerticalProfile",a("COVJSON_VERTICALPROFILE",g),h=d+"Grid",a("COVJSON_GRID",h),i=d+"Trajectory",a("COVJSON_TRAJECTORY",i),j=d+"PolygonSeries",a("COVJSON_POLYGONSERIES",j),k=d+"MultiPolygon",a("COVJSON_MULTIPOLYGON",k),l=c+"tuple",a("COVJSON_DATATYPE_TUPLE",l),m=c+"polygon",a("COVJSON_DATATYPE_POLYGON",m)}}}),a.register("a0",["81","82","83","86","87","88","89","90","91","92","97","98","8d","8a","8b","8f","8c","8e","9c","9e","9f"],function(a){"use strict";return{setters:[function(b){var c={};c.legend=b.default,a(c)},function(b){var c={};c.DiscreteLegend=b.default,a(c)},function(b){var c={};c.TimeAxis=b.default,a(c)},function(b){var c={};c.VerticalAxis=b.default,a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};c.Grid=b.default,a(c)},function(b){var c={};c.Trajectory=b.default,a(c)},function(b){var c={};c.PolygonSeries=b.default,a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};c.ParameterSync=b.default,a(c)},function(b){var c={};c.VerticalProfilePlot=b.default,a(c)},function(b){var c={};c.VerticalProfile=b.default,a(c)},function(b){var c={};c.Point=b.default,a(c)},function(b){var c={};c.PointSeries=b.default,a(c)},function(b){var c={};c.MultiPolygon=b.default,a(c)},function(b){var c={};c.PointCollection=b.default,a(c)},function(b){var c={};c.VerticalProfileCollection=b.default,a(c)},function(b){var c={};c.TimeSeriesPlot=b.default,a(c)},function(b){var c={};c.DraggableValuePopup=b.default,a(c)},function(b){var c={};c.ValuePopup=b.default,a(c)}],execute:function(){}}}),a.register("6f",["a0"],function(a){"use strict";return{setters:[function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);c.default=b.default,a(c)}],execute:function(){}}}),a.register("a1",["54","4a"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.$,c=a.HTML},function(a){d=a.default}],execute:function(){e='<div class="info" style="clear:none">\n  <button></button>\n</div>',f=function(a){function f(a){babelHelpers.classCallCheck(this,f),babelHelpers.get(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,a.position?{position:a.position}:{position:"topleft"}),this._title=a.title}return babelHelpers.inherits(f,a),babelHelpers.createClass(f,[{key:"onAdd",value:function(a){var f=this,g=c(e)[0];return d.DomEvent.disableClickPropagation(g),b("button",g).fill(this._title).on("click",function(){return f.fire("click")}),g}}]),f}(d.Control),f.include(d.Mixin.Events),a("default",f)}}}),a.register("55",["51"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default}],execute:function(){c=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.actionClasses=a||[],this.label=void 0,this.shortLabel=void 0,this.mediaTypes=void 0}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"supports",value:function(a){return a&&this.mediaTypes.some(function(b){return a.toLowerCase().startsWith(b)})}},{key:"getActions",value:function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=this.actionClasses[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=new i(a,b);j.isSupported&&(c.push(j),this.fire("actionCreate",{action:j}))}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}},{key:"load",value:function(a,b){var c=this;return this.fire("loading"),this.doLoad(a,b).then(function(a){return c.fire("load"),a}).catch(function(a){throw c.fire("loadError",{error:a}),a})}}]),b}(b),a("default",c)}}}),a.register("6b",["55"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default}],execute:function(){c=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.label="Coverage data",this.shortLabel="Coverage data",this.mediaTypes=["coveragedata"]}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"doLoad",value:function(a){return Promise.resolve(a)}},{key:"getMetadata",value:function(a){var b=void 0;return b=a.coverages?a.paging?a.paging.total:a.coverages.length:1,{format:this.label,content:1===b?"1 coverage":b+" coverages"}}}]),b}(b),a("default",c)}}}),a.register("a2",["54","73","5d","6f","a1","6e","6b","6d"],function(a){"use strict";function b(a){var b=void 0;return a.coverages?(a.domainType!==x&&a.domainType!==y||(b={type:F.OBSERVATIONS,data:a}),1===a.coverages.length&&a.coverages[0].domainType===w&&(b={type:F.MODEL,data:a.coverages[0]})):a.domainType===w&&(b={type:F.MODEL,data:a}),b&&0===c(b.data).length&&(b=void 0),b}function c(a){var b=[].concat(babelHelpers.toConsumableArray(a.parameters.values()));return b.filter(function(a){return!a.observedProperty.categories})}function d(a,b,c,d){var e=babelHelpers.slicedToArray(c,2),f=e[0],g=e[1],h=babelHelpers.slicedToArray(d,2),i=h[0],j=h[1];f=a[p(a,f)],g=a[p(a,g)],i=b[p(b,i)],j=b[p(b,j)];var k=Math.abs(a[0]-a[1]),l=Math.abs(b[0]-b[1]),m=Math.round((g-f)/k+1),n=Math.round((j-i)/l+1),o=new Uint8Array(m*n),q=function(a,b){return m*b+a},r=function(a){return Math.round((a-f)/k)},s=function(a){return Math.round((a-i)/l)},t=function(a,b){return q(r(a),s(b))};return{nx:m,ny:n,dx:k,dy:l,get:function(a,b){return o[q(a,b)]},set:function(a,b,c){return o[q(a,b)]=c},vset:function(a,b,c){return o[t(a,b)]=c},ix2v:function(a){return f+a*k},iy2v:function(a){return i+a*l}}}function e(a,b){if(0===b.length)return Promise.resolve([]);var c="x",e="y",g=b.map(function(a){var b=babelHelpers.slicedToArray(a,1),c=b[0];return c}),h=b.map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[1];return c}),i=[Math.min.apply(Math,babelHelpers.toConsumableArray(g)),Math.max.apply(Math,babelHelpers.toConsumableArray(g))],j=[Math.min.apply(Math,babelHelpers.toConsumableArray(h)),Math.max.apply(Math,babelHelpers.toConsumableArray(h))];return a.loadDomain().then(function(g){var h=d(g.axes.get(c).values,g.axes.get(e).values,i,j),k=!0,l=!1,m=void 0;try{for(var n,o=b[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=babelHelpers.slicedToArray(n.value,2),q=p[0],r=p[1];h.vset(q,r,1)}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}var s=f(h),t=s.map(function(a){var b=babelHelpers.slicedToArray(a,4),c=b[0],d=b[1],e=b[2],f=b[3];return(e-c+1)*(f-d+1)}),u=t.filter(function(a){return a>1}).length;console.log("grid subset queries total: "+s.length+", connected: "+u);var v=s.map(function(a){var b=babelHelpers.slicedToArray(a,4),c=b[0],d=b[1],e=b[2],f=b[3];return[h.ix2v(c),h.iy2v(d),h.ix2v(e),h.iy2v(f)]}),w=h.dx,x=h.dy,y=v.map(function(a){var b=babelHelpers.slicedToArray(a,4),c=b[0],d=b[1],e=b[2],f=b[3];return[c-w/2,d-x/2,e+w/2,f+x/2]}),z=v.map(function(b){var c=babelHelpers.slicedToArray(b,4),d=c[0],e=c[1],f=c[2],g=c[3];return a.subsetByValue({x:{start:d,stop:f},y:{start:e,stop:g}},{eagerload:!0})});return Promise.all(z).then(function(a){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=b[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){for(var i=babelHelpers.slicedToArray(g.value,2),j=i[0],k=i[1],l=void 0,m=0;m<s.length;m++){var n=babelHelpers.slicedToArray(y[m],4),o=n[0],p=n[1],q=n[2],r=n[3];if(o<=j&&j<=q&&p<=k&&k<=r){l=a[m];break}}if(!l)throw new Error("bug");c.push(l.subsetByValue({x:{start:j,stop:j},y:{start:k,stop:k}}))}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return Promise.all(c)})})}function f(a){for(var b=a.nx,c=a.ny,d=c-2;d>=0;d--)for(var e=0;e<b;e++){var f=a.get(e,d);f>0&&a.set(e,d,f+a.get(e,d+1))}for(var g=[],d=0;d<c;d++)for(var e=0;e<b;e++){var h=a.get(e,d);if(0!==h){for(var i=e+1;i<b&&a.get(i,d)>=h;)i++;i-=1;var j=d+h-1;g.push([e,d,i,j]);for(var k=d+1;k<=j;k++)for(var l=e;l<=i;l++)a.set(l,k,0);e=i}}return g}function g(a,b){var c=a.paging&&a.paging.next,d=c?a.paging.next.load(b):Promise.resolve(),e=a.coverages;return d.then(function(a){return a?g(a,b).then(function(a){return e.concat(a)}):e})}function h(a,b,c){function d(e){var f=babelHelpers.slicedToArray(b[e],4),h=f[0],i=f[1],j=f[2],k=f[3],l={x:{start:h,stop:j},y:{start:i,stop:k}};return a.query().filter(l).execute(c).then(function(a){return g(a,c)}).then(function(c){var f={id:a.id,domainType:a.domainType,parameters:a.parameters,coverages:c};return e<b.length-1&&(f.paging={next:{load:function(a){return d(e+1)}}}),f})}return d(0)}function i(a,b,c,d){function e(a,b,c){var d=(b-a)/(c-1);return function(b){return a+b*d}}for(var f=e(a[0],a[1],c),g=e(b[0],b[1],d),h=[],i=0;i<c-1;i++)for(var j=0;j<d-1;j++){var k=f(i),l=f(i+1),m=g(j),n=g(j+1);h.push([k,m,l,n])}return h}function j(a,b,c,d){function f(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!a)return[void 0,void 0];var c=a.values,d=Math.min(c[0],c[c.length-1]),e=Math.max(c[0],c[c.length-1]);if(b&&c.length>1){var f=Math.abs(c[0]-c[1])/2;d-=f,e+=f}return[d,e]}var g="z",j="x",l="y",m=a,n=m.parameters.get(c);return m.loadDomain().then(function(o){function t(b){var f=b.paging&&b.paging.next,h=f?b.paging.next.load({eagerload:!0}):void 0,i=b.coverages,n=[Promise.all(i.map(function(a){return a.loadDomain()})),Promise.all(i.map(function(a){return a.loadRange(d)}))];return Promise.all(n).then(function(b){var f=babelHelpers.slicedToArray(b,2),n=f[0],s=f[1],u=i.map(function(a,b){return{cov:a,domain:n[b],range:s[b]}}),v=u.map(function(a){return{x:a.domain.axes.get(j).values[0],y:a.domain.axes.get(l).values[0]}});v.length>0&&!function(){var a=getProjection(n[0]),b=getProjection(o);v=v.map(function(c){return r(c,a,b)}).map(function(a){var b=a.x,c=a.y;return[b,c]})}();var w=e(m,v);return w.then(function(b){var e=[],f=!0,i=!1,m=void 0;try{for(var n,o=function(){var b=babelHelpers.slicedToArray(n.value,2),f=b[0],h=b[1];s=!0,v=!1,w=void 0;try{for(x=f.domain.axes[Symbol.iterator]();!(s=(y=x.next()).done);s=!0){var i=babelHelpers.slicedToArray(y.value,2),m=i[0],o=i[1];if(m!==g&&o.values.length>1)throw new Error("Only "+g+" can be a varying axis in in-situ coverages, not: "+m)}}catch(a){v=!0,w=a}finally{try{!s&&x.return&&x.return()}finally{if(v)throw w}}var r=f.domain.axes.get(j).values[0],t=f.domain.axes.get(l).values[0],u=f.domain.axes.has(g),z=u?f.domain.axes.get(g).values:null,A=z&&z.length>1;if(A&&!D)throw new Error("Model grid must have a "+g+" axis if insitu data has a varying "+g+" axis");if(!u&&F)throw new Error("Model grid must not have a varying "+g+" axis if insitu data has no "+g+" axis");var B=h.loadRange(c).then(function(b){var e=[],h=[];if(F)for(var i=function(a,b,c,d,e){return c+(e-c)*(a-b)/(d-b)},j=0;j<z.length;j++){var l=z[j];if(!(l<I||l>J)){var m=f.range.get(babelHelpers.defineProperty({},g,j));if(null!==m){var n=q(E,l),o=babelHelpers.slicedToArray(n,2),s=o[0],u=o[1],v=E[s],w=E[u],x=b.get(babelHelpers.defineProperty({},g,s)),y=b.get(babelHelpers.defineProperty({},g,u));if(null!==x&&null!==y){var B=void 0;B=s===u?x:i(l,v,x,w,y),e.push(B),h.push(m)}}}}else{var C=b.get({}),m=void 0;if(A){var D=p(z,E[0]);m=f.range.get(babelHelpers.defineProperty({},g,D))}else m=f.range.get({});null!==C&&null!==m&&(e=[C],h=[m])}if(0!==e.length){var G=e.length,H=k(e,h).map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return Math.pow(c-d,2)}).reduce(function(a,b){return a+b}),K=Math.sqrt(H/G),L={type:"Coverage",wasGeneratedBy:{type:"ModelObservationComparisonActivity",qualifiedUsage:{model:{entity:a.id,hadRole:"modelToCompareAgainst",parameterKey:c},observation:{entity:f.cov.id,hadRole:"observationToCompareAgainst",parameterKey:d}}},domain:{type:"Domain",domainType:"Point",axes:{x:{values:[r]},y:{values:[t]}}},ranges:{rmse:{type:"NdArray",values:[K],dataType:"float"}}};return L}});e.push(B)},r=u.map(function(a,c){return[a,b[c]]})[Symbol.iterator]();!(f=(n=r.next()).done);f=!0){var s,v,w,x,y;o()}}catch(a){i=!0,m=a}finally{try{!f&&r.return&&r.return()}finally{if(i)throw m}}return Promise.all([Promise.all(e),h]).then(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return d?t(d).then(function(a){return c.concat(a)}):c})})})}var u=!0,v=!1,w=void 0;try{for(var x,y=o.axes[Symbol.iterator]();!(u=(x=y.next()).done);u=!0){var z=babelHelpers.slicedToArray(x.value,2),B=z[0],C=z[1];if([j,l,g].indexOf(B)===-1&&C.values.length>1)throw new Error("Only x,y,"+g+" can be varying axes in the model grid, not: "+B)}}catch(a){v=!0,w=a}finally{try{!u&&y.return&&y.return()}finally{if(v)throw w}}var D=o.axes.has(g),E=D?o.axes.get(g).values:null,F=E&&E.length>1,G=f(o.axes.get(g)),H=babelHelpers.slicedToArray(G,2),I=H[0],J=H[1],K=f(o.axes.get(j),!0),L=f(o.axes.get(l),!0),M=6,N=M,O=i(K,L,M,N);return h(b,O,{eagerload:!0}).then(t).then(function(e){e=e.filter(function(a){return a});var f={"@context":{prov:"http://www.w3.org/ns/prov#",wasGeneratedBy:"prov:wasGeneratedBy",qualifiedUsage:{"@id":"prov:qualifiedUsage","@container":"@index"},entity:{"@id":"prov:entity","@type":"@id"},hadRole:{"@id":"prov:hadRole","@type":"@vocab"},covstats:"http://covstats#",ModelObservationComparisonActivity:"covstats:ModelObservationComparisonActivity",modelToCompareAgainst:"covstats:modelToCompareAgainst",observationsToCompareAgainst:"covstats:observationsToCompareAgainst",observationToCompareAgainst:"covstats:observationToCompareAgainst",parameterKey:"covstats:parameterKey"},type:"CoverageCollection",domainType:"Point",wasGeneratedBy:{type:"ModelObservationComparisonActivity",qualifiedUsage:{model:{entity:a.id,hadRole:"modelToCompareAgainst",parameterKey:c},observations:{entity:b.id,hadRole:"observationsToCompareAgainst",parameterKey:d}}},parameters:{rmse:{type:"Parameter",unit:n.unit,observedProperty:{label:{en:"RMSE of "+A(n.observedProperty.label)},statisticalMeasure:"http://www.uncertml.org/statistics/standard-deviation"},preferredPalette:{interpolation:"linear",colors:["green","orange","red"]}}},referencing:[{components:["x","y"],system:s(o,j).system}],coverages:e};return f})})}function k(a,b){return a.map(function(c,d){return[a[d],b[d]]})}var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;return{setters:[function(a){l=a.$,m=a.$$,n=a.HTML},function(a){o=a.default},function(a){p=a.indexOfNearest,q=a.indicesOfNearest,r=a.reprojectCoords,s=a.getReferenceObject,t=a.stringifyUnit},function(a){u=a.TimeAxis,v=a.Dropdown,w=a.COVJSON_GRID,x=a.COVJSON_POINT,y=a.COVJSON_VERTICALPROFILE},function(a){z=a.default},function(a){A=a.i18n},function(a){B=a.default},function(a){C=a.default,D=a.VIEW,E=a.PROCESS}],execute:function(){F={MODEL:1,OBSERVATIONS:2},G='\n<div class="modal fade" id="comparisonDatasetSelectModal" tabindex="-1" role="dialog" aria-labelledby="comparisonDatasetSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="comparisonDatasetSelectModalLabel">Select a dataset to compare against</h4>\n      </div>\n      <div class="modal-body">\n        \n        <div class="panel panel-primary">\n          <div class="panel-heading">\n            <h4>Model-Observation comparison</h4>\n          </div>\n          <div class="panel-body">\n            <p class="help-text-model">\n              The gridded input dataset that you selected is assumed to be the model dataset that is compared\n              against an observation collection dataset (point or vertical profile observations).\n              Please select the observation dataset below.\n            </p>\n            <p class="help-text-observations">\n              The collection-type input dataset that you selected is assumed to be the observation set that is\n              compared against a model grid dataset.\n              Please select the model dataset below.\n            </p>\n            <div class="alert alert-info comparison-distribution-list-empty" role="alert"><strong>None found.</strong></div>\n          </div>\n          \n          <ul class="list-group comparison-distribution-list"></ul>\n        </div>\n       \n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="comparisonParametersSelectModal" tabindex="-1" role="dialog" aria-labelledby="comparisonParametersSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="comparisonParametersSelectModalLabel">Select parameters</h4>\n      </div>\n      <div class="modal-body">\n        \n        <div class="panel panel-primary">\n          <div class="panel-body">\n            <p>\n              Select the parameters you wish to compare.\n              Note that currently no unit conversion is done.\n            </p>\n              \n            <div class="form-horizontal">\n              <div class="form-group">\n                <label for="modelComparisonParameter" class="col-sm-3 control-label">Model</label>\n                <div class="col-sm-9">\n                  <select id="modelComparisonParameter" class="form-control model-parameter-select"></select>\n                </div>\n              </div>\n              \n              <div class="form-group">\n                <label for="observationComparisonParameter" class="col-sm-3 control-label">Observations</label>\n                <div class="col-sm-9">\n                  <select id="observationComparisonParameter" class="form-control observation-parameter-select"></select>\n                </div>\n              </div>\n            </div>\n                          \n            <div class="parameter-select-button-container"></div>\n          </div>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n',l("body").add(n(G)),H={"comparison-distribution-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p>Distribution: <span class="distribution-title"></span></p>\n    <button type="button" class="btn btn-primary select-button" data-dismiss="modal">\n      Select\n    </button>\n  </li>\n  ',"params-select-button":'<button type="button" class="btn btn-primary params-select-button" data-dismiss="modal">Select</button>'},I=function(a){function d(a,b){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,b),this.data=a,this.label="Intercompare",this.icon='<span class="glyphicon glyphicon-stats"></span>'}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"run",value:function(){this._displayDistributionSelectModal()}},{key:"_displayDistributionSelectModal",value:function(){var a=this,c=b(this.data),d=c.data,e=c.type,f=l("#comparisonDatasetSelectModal"),g=void 0;e===F.MODEL?(l(".help-text-model",f).show(),l(".help-text-observations",f).hide(),g=this.context.workspace.filterDistributions(function(a){if(a.formatImpl instanceof B){var c=b(a.data);return c&&c.type===F.OBSERVATIONS}})):(l(".help-text-model",f).hide(),l(".help-text-observations",f).show(),g=this.context.workspace.filterDistributions(function(a){if(a.formatImpl instanceof B){var c=b(a.data);return c&&c.type===F.MODEL}})),l(".comparison-distribution-list",f).fill();var h=!0,i=!1,j=void 0;try{for(var k,p=function(){var c=k.value,g=c.distribution,h=c.dataset,i=l(n(H["comparison-distribution-item"]));l(".dataset-title",i).fill(A(h.title)),l(".distribution-title",i).fill(A(g.title)),l(".select-button",i).on("|click",function(){if(e===F.MODEL)a._displayParameterSelectModal(d,g.data);else{var c=b(g.data).data;a._displayParameterSelectModal(c,d)}}),l(".comparison-distribution-list",f).add(i)},q=g[Symbol.iterator]();!(h=(k=q.next()).done);h=!0)p()}catch(a){i=!0,j=a}finally{try{!h&&q.return&&q.return()}finally{if(i)throw j}}m(".comparison-distribution-list-empty",f).style.display=g.length>0?"none":"block",new o(f[0]).open()}},{key:"_displayParameterSelectModal",value:function(a,b){var d=this,e=c(a),f=c(b),g=l("#comparisonParametersSelectModal"),h=function(a,b){a.fill();var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=t(h.unit)||"unknown unit",j=A(h.observedProperty.label)+" ("+i+")";a.add(n('<option value="'+h.key+'">'+j+"</option>"))}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}};h(l(".model-parameter-select",g),e),h(l(".observation-parameter-select",g),f),l(".parameter-select-button-container",g).fill(n(H["params-select-button"])),l(".params-select-button",g).on("|click",function(){var c=m(".model-parameter-select",g).value,e=m(".observation-parameter-select",g).value;d._displayIntercomparisonUI(a,b,c,e)}),new o(g[0]).open()}},{key:"_displayIntercomparisonUI",value:function(a,b,c,d){var e=this,f=this.context.map;this._intercomparisonActive=!0;var g=function(f,g){e.fire("loading");var h=void 0;if(f){var i=new Date(f.getTime()-1e3*g),k=new Date(f.getTime()+1e3*g);h=[a.subsetByValue({t:f.toISOString()}),b.query().filter({t:{start:i.toISOString(),stop:k.toISOString()}}).execute({eagerload:!0})]}else h=[a,b];Promise.all(h).then(function(a){var b=babelHelpers.slicedToArray(a,2),h=b[0],i=b[1];j(h,i,c,d).then(function(a){e.fire("load");var b=e.context.workspace;e._intercomparisonResultDataset&&b.removeDataset(e._intercomparisonResultDataset);var c=JSON.stringify(a,null,2),d=URL.createObjectURL(new Blob([c],{type:"application/prs.coverage+json"})),h="Intercomparison";if(f){var i=f.toISOString(),j=" "+Math.round(g/60)+" min";h+=" [Model: "+i+", Observations: "+j+"]"}var k={title:{en:h},virtual:!0,distributions:[{title:{en:h},mediaType:"application/prs.coverage+json",url:d}]};e._intercomparisonResultDataset=k;var l=function a(c){var d=c.dataset;d===k&&(d.distributions[0].actions.find(function(a){return a.type===D}).run(),b.off("distributionsLoad",a))};b.on("distributionsLoad",l),b.addDataset(k,e.context.dataset)})})};a.loadDomain().then(function(a){a.axes.has("t")?!function(){var b=a.axes.get("t").values.map(function(a){return new Date(a)}),c={timeSlices:b,time:b[0]};e._modelTimeControl=new u(c,{title:"Model time"}).on("change",function(a){var b=a.time,c=parseInt(e._obsTimeDeltaControl.value);g(b,c)}).addTo(f);var d=[{value:60,label:" 1 min"},{value:600,label:" 10 min"},{value:1800,label:" 30 min"},{value:3600,label:" 1 hour"},{value:86400,label:" 1 day"},{value:2592e3,label:" 30 days"}];e._obsTimeDeltaControl=new v(d,{title:"Observation time delta"}).on("change",function(a){var b=parseInt(a.value),d=c.time;g(d,b)}).addTo(f),g(c.time,d[0].value);var h=new z({title:"Exit Intercomparison"}).addTo(f);h.on("click",function(){f.removeControl(e._modelTimeControl),f.removeControl(e._obsTimeDeltaControl),f.removeControl(h);var a=e._intercomparisonResultDataset.distributions[0].actions.find(function(a){return a.type===D});a.visible&&a.run(),e._intercomparisonActive=!1})}():g()})}},{key:"isSupported",get:function(){return b(this.data)}}]),d}(C),a("default",I),I.type=E}}}),a.register("a3",["4a","6e","6d"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.i18n},function(a){d=a.default,e=a.VIEW}],execute:function(){f=function(a){function d(a,b){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,b),this.data=a,this._setHidden(),this.layers=[]}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"_setVisible",value:function(){this.visible=!0,this.label="Hide",this.icon='<span class="glyphicon glyphicon-eye-close"></span>',this.fire("labelChange")}},{key:"_setHidden",value:function(){this.visible=!1,this.label="View",this.icon='<span class="glyphicon glyphicon-eye-open"></span>',this.fire("labelChange")}},{key:"run",value:function(){if(this.visible)return this.remove(),void this._setHidden();this._setVisible();var a=this.context.map,d="#CC2222",e={color:d,weight:2,opacity:.6,fillOpacity:0,fillColor:d},f={color:d,weight:3,opacity:.6,fillOpacity:.65,fillColor:d},g=function(a){a.target.setStyle(f)},h=function(a){a.target.setStyle(e)},i=b.geoJson(this.data,{pointToLayer:function(a,c){return b.circleMarker(c)},onEachFeature:function(a,b){b.setStyle(e),b.on("mouseover",g),b.on("mouseout",h),b.bindPopup('<pre><code class="code-nowrap">'+JSON.stringify(a.properties,null,4)+"</code></pre>",{maxWidth:400,maxHeight:300})}}).addTo(a),j=c(this.context.dataset.title),k=c(this.context.distribution.title),l='<span class="label label-success">GeoJSON</span> '+k;a.layerControl.addOverlay(i,l,{groupName:j,expanded:!0}),this.layers.push(i)}},{key:"remove",value:function(){var a=this.context.map,b=!0,c=!1,d=void 0;try{for(var e,f=this.layers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;a.hasLayer(g)&&a.removeLayer(g),a.layerControl.removeLayer(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}this.layers=[]}},{key:"isSupported",get:function(){return!0}}]),d}(d),a("default",f),f.type=e}}}),a.register("a4",["54","4a"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a.$,c=a.HTML},function(a){d=a.default}],execute:function(){e="template-image-legend",f='\n<template id="'+e+'">\n  <div class="info legend image-legend">\n    <div class="legend-title">\n      <strong class="legend-title-text"></strong>\n      <a href="#"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span></a>\n    </div>\n    <img alt="Legend" />\n  </div>\n</template>\n<style>\n.legend {\n  color: #555;\n}\n.legend-title {\n  margin-bottom:3px;\n}\n</style>\n',g=function(a){function d(a,g){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,g.position?{position:g.position}:{}),this.url=a,this.title=g.title,this.layer=g.layer,this.id=g.id||e,g.id||null!==document.getElementById(e)||b("body").add(c(f))}return babelHelpers.inherits(d,a),babelHelpers.createClass(d,[{key:"onRemove",value:function(a){this.layer&&a.off("layerremove",this._remove)}},{key:"onAdd",value:function(a){var c=this;this.layer&&(this._remove=function(b){b.layer===c.layer&&c.removeFrom(a)},a.on("layerremove",this._remove));var d=document.importNode(b("#"+this.id)[0].content,!0).children[0];return b("img",d).set("@src",this.url),this.title?b(".legend-title-text",d).fill(this.title):b(".legend-title",d).hide(),b("a",d).on("click",function(){var a=b("img",d);a.get("$$show")?(a.hide(),b(".glyphicon",d).set("+glyphicon-menu-down -glyphicon-menu-up")):(a.show(),b(".glyphicon",d).set("-glyphicon-menu-down +glyphicon-menu-up"))}),d}}]),d}(d.Control),a("default",g)}}}),a.register("a5",["4a","6e","a4","6d"],function(a){"use strict";function b(a,b){return a+"?service=wms&version=1.1.1&request=GetLegendGraphic&format=image/png&transparent=true&layer="+b}var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.i18n},function(a){e=a.default},function(a){f=a.default,g=a.VIEW}],execute:function(){h=function(a){function f(a,b){babelHelpers.classCallCheck(this,f),babelHelpers.get(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,b),this.data=a,this._setHidden(),this.layers=[]}return babelHelpers.inherits(f,a),babelHelpers.createClass(f,[{key:"_setVisible",value:function(){this.visible=!0,this.label="Hide",this.icon='<span class="glyphicon glyphicon-eye-close"></span>',this.fire("labelChange")}},{key:"_setHidden",value:function(){this.visible=!1,this.label="View",this.icon='<span class="glyphicon glyphicon-eye-open"></span>',this.fire("labelChange")}},{key:"run",value:function(){var a=this;if(this.visible)return this.remove(),void this._setHidden();this._setVisible();var f=this.context.map,g=this.data.layers,h=this.data.url,i=d(this.context.dataset.title),j=!1,k=!0,l=!1,m=void 0;try{for(var n,o=function(){var d=n.value,g=c.tileLayer.wms(h,{layers:d.name,format:"image/png",transparent:!0}).on("loading",function(){return a.fire("loading")}).on("load",function(){return a.fire("load")});f.on("layeradd",function(a){if(a.layer===g){var c=b(h,d.name);new e(c,{layer:a.layer,title:d.title}).addTo(f)}}),j||(j=!0,g.addTo(f)),f.layerControl.addOverlay(g,'<span class="label label-success">WMS</span> '+d.title,{groupName:i,expanded:!0}),a.layers.push(g)},p=g[Symbol.iterator]();!(k=(n=p.next()).done);k=!0)o()}catch(a){l=!0,m=a}finally{try{!k&&p.return&&p.return()}finally{if(l)throw m}}}},{key:"remove",value:function(){var a=this.context.map,b=!0,c=!1,d=void 0;try{for(var e,f=this.layers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;a.hasLayer(g)&&a.removeLayer(g),a.layerControl.removeLayer(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}this.layers=[]}},{key:"isSupported",get:function(){return!0}}]),f}(f),a("default",h),h.type=g}}}),a.register("a6",["6d"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default,c=a.EXTERNAL_LINK}],execute:function(){d=function(a){function b(a,c){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,c),this.icon='<span class="glyphicon glyphicon-link"></span>',this.label="Source"}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"run",value:function(){return this.context.distribution.url}},{key:"isSupported",get:function(){return this.context.distribution.url}}]),b}(b),a("default",d),d.type=c}}}),a.register("a7",["51","52","53","71","74","4f","6b","6a","7d","7a","6c","7b","7c","7e","a2","a3","a5","a6"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){
s=a.default}],execute:function(){t=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.map=a,this.catalogue=new g,this.formats=[new i([l,e,f,m,n,o,p,s]),new h([l,e,f,m,n,o,p]),new j([q,s]),new d([r,s]),new k([s])],this.workspace=new c(this.formats),this.workspace.addStaticActionContext({map:a}),this._registerLoadingListeners()}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"_registerLoadingListeners",value:function(){var a=this,b=function(){return a.fire("dataLoading")},c=function(){return a.fire("dataLoad")};this.catalogue.on("loading",b).on(["load","loadError"],c),this.workspace.on("distributionsLoading",b).on("distributionsLoad",c);var d=!0,e=!1,f=void 0;try{for(var g,h=this.formats[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;i.on("loading",b).on(["load","loadError"],c).on("actionCreate",function(a){var d=a.action;d.on("loading",b).on(["load","loadError"],c)})}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}}}]),b}(b),a("default",t)}}}),a.register("a8",["4a"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){b.Control.Sidebar=b.Control.extend({includes:b.Mixin.Events,options:{position:"left"},initialize:function(a,c){var d,e;for(b.setOptions(this,c),this._sidebar=b.DomUtil.get(a),b.DomUtil.addClass(this._sidebar,"sidebar-"+this.options.position),b.Browser.touch&&b.DomUtil.addClass(this._sidebar,"leaflet-touch"),d=this._sidebar.children.length-1;d>=0;d--)e=this._sidebar.children[d],"DIV"==e.tagName&&b.DomUtil.hasClass(e,"sidebar-content")&&(this._container=e);for(this._tabitems=this._sidebar.querySelectorAll("ul.sidebar-tabs > li, .sidebar-tabs > ul > li"),d=this._tabitems.length-1;d>=0;d--)this._tabitems[d]._sidebar=this;for(this._panes=[],this._closeButtons=[],d=this._container.children.length-1;d>=0;d--)if(e=this._container.children[d],"DIV"==e.tagName&&b.DomUtil.hasClass(e,"sidebar-pane")){this._panes.push(e);for(var f=e.querySelectorAll(".sidebar-close"),g=0,h=f.length;g<h;g++)this._closeButtons.push(f[g])}},addTo:function(a){var c,d;for(this._map=a,c=this._tabitems.length-1;c>=0;c--)d=this._tabitems[c],b.DomEvent.on(d.querySelector("a"),"click",b.DomEvent.preventDefault).on(d.querySelector("a"),"click",this._onClick,d);for(c=this._closeButtons.length-1;c>=0;c--)d=this._closeButtons[c],b.DomEvent.on(d,"click",this._onCloseClick,this);return this},removeFrom:function(a){var c,d;for(this._map=null,c=this._tabitems.length-1;c>=0;c--)d=this._tabitems[c],b.DomEvent.off(d.querySelector("a"),"click",this._onClick);for(c=this._closeButtons.length-1;c>=0;c--)d=this._closeButtons[c],b.DomEvent.off(d,"click",this._onCloseClick,this);return this},open:function(a){var c,d;for(c=this._panes.length-1;c>=0;c--)d=this._panes[c],d.id==a?b.DomUtil.addClass(d,"active"):b.DomUtil.hasClass(d,"active")&&b.DomUtil.removeClass(d,"active");for(c=this._tabitems.length-1;c>=0;c--)d=this._tabitems[c],d.querySelector("a").hash=="#"+a?b.DomUtil.addClass(d,"active"):b.DomUtil.hasClass(d,"active")&&b.DomUtil.removeClass(d,"active");return this.fire("content",{id:a}),b.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),b.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var a=this._tabitems.length-1;a>=0;a--){var c=this._tabitems[a];b.DomUtil.hasClass(c,"active")&&b.DomUtil.removeClass(c,"active")}return b.DomUtil.hasClass(this._sidebar,"collapsed")||(this.fire("closing"),b.DomUtil.addClass(this._sidebar,"collapsed")),this},_onClick:function(){b.DomUtil.hasClass(this,"active")?this._sidebar.close():b.DomUtil.hasClass(this,"disabled")||this._sidebar.open(this.querySelector("a").hash.slice(1))},_onCloseClick:function(){this.close()}}),b.control.sidebar=function(a,c){return new b.Control.Sidebar(a,c)}}}}),a.registerDynamic("a9",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),a.registerDynamic("aa",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),a.registerDynamic("ab",[],!0,function(a,b,c){function d(a){function b(a){var b=q.substring(s).match(a);return b?(s+=b[0].length,b[0]):null}function c(a){return a&&r.match(/\d+/)&&(a.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+r}}),a}function d(){b(/^\s*/)}function e(){d();for(var a,c=0,e=[],f=[e],h=e;a=b(/^(\()/)||b(/^(\))/)||b(/^(,)/)||b(g);){if("("===a)f.push(h),h=[],f[f.length-1].push(h),c++;else if(")"===a){if(0===h.length)return null;if(h=f.pop(),!h)return null;if(c--,0===c)break}else if(","===a)h=[],f[f.length-1].push(h);else{if(a.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(h,a.split(/\s/g).map(parseFloat))}d()}return 0!==c?null:e}function f(){for(var a,c,e=[];c=b(g)||b(/^(,)/);)","===c?(e.push(a),a=[]):c.split(/\s/g).some(isNaN)||(a||(a=[]),Array.prototype.push.apply(a,c.split(/\s/g).map(parseFloat))),d();return a?(e.push(a),e.length?e:null):null}function h(){if(!b(/^(point(\sz)?)/i))return null;if(d(),!b(/^(\()/))return null;var a=f();return a?(d(),b(/^(\))/)?{type:"Point",coordinates:a[0]}:null):null}function i(){if(!b(/^(multipoint)/i))return null;d();var a=q.substring(q.indexOf("(")+1,q.length-1).replace(/\(/g,"").replace(/\)/g,"");q="MULTIPOINT ("+a+")";var c=e();return c?(d(),{type:"MultiPoint",coordinates:c}):null}function j(){if(!b(/^(multilinestring)/i))return null;d();var a=e();return a?(d(),{type:"MultiLineString",coordinates:a}):null}function k(){if(!b(/^(linestring(\sz)?)/i))return null;if(d(),!b(/^(\()/))return null;var a=f();return a&&b(/^(\))/)?{type:"LineString",coordinates:a}:null}function l(){if(!b(/^(polygon(\sz)?)/i))return null;d();var a=e();return a?{type:"Polygon",coordinates:a}:null}function m(){if(!b(/^(multipolygon)/i))return null;d();var a=e();return a?{type:"MultiPolygon",coordinates:a}:null}function n(){var a,c=[];if(!b(/^(geometrycollection)/i))return null;if(d(),!b(/^(\()/))return null;for(;a=o();)c.push(a),d(),b(/^(,)/),d();return b(/^(\))/)?{type:"GeometryCollection",geometries:c}:null}function o(){return h()||k()||l()||i()||j()||m()||n()}var p=a.split(";"),q=p.pop(),r=(p.shift()||"").split("=").pop(),s=0;return c(o())}function e(a){function b(a){return a.join(" ")}function c(a){return a.map(b).join(", ")}function d(a){return a.map(c).map(g).join(", ")}function f(a){return a.map(d).map(g).join(", ")}function g(a){return"("+a+")"}switch("Feature"===a.type&&(a=a.geometry),a.type){case"Point":return"POINT ("+b(a.coordinates)+")";case"LineString":return"LINESTRING ("+c(a.coordinates)+")";case"Polygon":return"POLYGON ("+d(a.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+c(a.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+f(a.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+d(a.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+a.geometries.map(e).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}this||self;c.exports=d,c.exports.parse=d,c.exports.stringify=e;var f=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,g=new RegExp("^"+f.source+"(\\s"+f.source+"){1,}");return c.exports}),a.registerDynamic("ac",["ab"],!0,function(a,b,c){this||self;return c.exports=a("ab"),c.exports}),a.registerDynamic("ad",[],!0,function(a,b,c){this||self;return function(a){"undefined"!=typeof c&&"object"==typeof b?"undefined"!=typeof window?c.exports=a():c.exports=a:window.Tab=a()}(function(){var a=function(a,b){b=b||{},this.isIE=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&parseFloat(RegExp.$1),this.tab="object"==typeof a?a:document.querySelector(a),this.tabs=this.tab.parentNode.parentNode,this.dropdown=this.tabs.querySelector(".dropdown"),/dropdown-menu/.test(this.tabs.className)&&(this.dropdown=this.tabs.parentNode,this.tabs=this.tabs.parentNode.parentNode),this.options=b,this.duration=150,this.options.duration=this.isIE&&this.isIE<10?0:b.duration||this.duration,this.init()};a.prototype={init:function(){this.actions(),this.tab.addEventListener("click",this.action,!1)},actions:function(){var a=this;this.action=function(b){b=b||window.e,b.preventDefault();var c=b.target,d=document.getElementById(c.getAttribute("href").replace("#","")),e=new RegExp("(?:^|\\s)dropdown-menu(?!\\S)"),f=a.getActiveTab(),g=a.getActiveContent();/active/.test(c.parentNode.className)||(a.removeClass(f,"active"),a.addClass(c.parentNode,"active"),a.dropdown&&(e.test(a.tab.parentNode.parentNode.className)?/active/.test(a.dropdown.className)||a.addClass(a.dropdown,"active"):/active/.test(a.dropdown.className)&&a.removeClass(a.dropdown,"active")),a.removeClass(g,"in"),setTimeout(function(){a.removeClass(g,"active"),a.addClass(d,"active")},a.options.duration),setTimeout(function(){a.addClass(d,"in")},2*a.options.duration))},this.addClass=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},this.removeClass=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(b,"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},this.getActiveTab=function(){var a=this.tabs.querySelectorAll(".active");return 1!==a.length||/dropdown/.test(a[0].className)?a.length>1?a[a.length-1]:void 0:a[0]},this.getActiveContent=function(){var a=this.getActiveTab().getElementsByTagName("A")[0].getAttribute("href").replace("#","");return a&&document.getElementById(a)}}};var b=document.querySelectorAll("[data-toggle='tab'], [data-toggle='pill']"),c=b.length,d=0;for(d;d<c;d++){var e=b[d],f={};f.duration=e.getAttribute("data-duration")&&e.getAttribute("data-duration")||!1,new a(e,f)}return a}),c.exports}),a.registerDynamic("ae",["3b"],!0,function(a,b,c){"format cjs";var d,e=this||self;return function(a){(function(){"use strict";function b(a){return"function"==typeof a||"object"==typeof a&&null!==a}function f(a){return"function"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(){}function i(){return function(){a.nextTick(m)}}function j(){var a=0,b=new P(m),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function k(){var a=new MessageChannel;return a.port1.onmessage=m,function(){a.port2.postMessage(0)}}function l(){return function(){setTimeout(m,1)}}function m(){for(var a=0;a<M;a+=2){var b=R[a],c=R[a+1];b(c),R[a]=void 0,R[a+1]=void 0}M=0}function n(){}function o(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function q(a){try{return a.then}catch(a){return V.error=a,V}}function r(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function s(a,b,c){N(function(a){var d=!1,e=r(c,b,function(c){d||(d=!0,b!==c?v(a,c):x(a,c))},function(b){d||(d=!0,y(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,y(a,e))},a)}function t(a,b){b._state===T?x(a,b._result):a._state===U?y(a,b._result):z(b,void 0,function(b){v(a,b)},function(b){y(a,b)})}function u(a,b){if(b.constructor===a.constructor)t(a,b);else{var c=q(b);c===V?y(a,V.error):void 0===c?x(a,b):f(c)?s(a,b,c):x(a,b)}}function v(a,c){a===c?y(a,o()):b(c)?u(a,c):x(a,c)}function w(a){a._onerror&&a._onerror(a._result),A(a)}function x(a,b){a._state===S&&(a._result=b,a._state=T,0===a._subscribers.length||N(A,a))}function y(a,b){a._state===S&&(a._state=U,a._result=b,N(w,a))}function z(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+T]=c,e[f+U]=d,0===f&&a._state&&N(A,a)}function A(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?D(c,d,e,f):e(f);a._subscribers.length=0}}function B(){this.error=null}function C(a,b){try{return a(b)}catch(a){return W.error=a,W}}function D(a,b,c,d){var e,g,h,i,j=f(c);if(j){if(e=C(c,d),e===W?(i=!0,g=e.error,e=null):h=!0,b===e)return void y(b,p())}else e=d,h=!0;b._state!==S||(j&&h?v(b,e):i?y(b,g):a===T?x(b,e):a===U&&y(b,e))}function E(a,b){try{b(function(b){v(a,b)},function(b){y(a,b)})}catch(b){y(a,b)}}function F(a,b,c,d){this._instanceConstructor=a,this.promise=new a(n,d),this._abortOnReject=c,this._validateInput(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._init(),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&x(this.promise,this._result))):y(this.promise,this._validationError())}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(a){this._id=aa++,this._state=void 0,this._result=void 0,this._subscribers=[],n!==a&&(f(a)||G(),this instanceof I||H(),E(this,a))}var J;J=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var K,L=J,M=(Date.now||function(){return(new Date).getTime()},Object.create||function(a){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof a)throw new TypeError("Argument must be an object");return h.prototype=a,new h},0),N=function(a,b){R[M]=a,R[M+1]=b,M+=2,2===M&&K()},O="undefined"!=typeof window?window:{},P=O.MutationObserver||O.WebKitMutationObserver,Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,R=new Array(1e3);K="undefined"!=typeof a&&"[object process]"==={}.toString.call(a)?i():P?j():Q?k():l();var S=void 0,T=1,U=2,V=new B,W=new B;F.prototype._validateInput=function(a){return L(a)},F.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},F.prototype._init=function(){this._result=new Array(this.length)};var X=F;F.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;b._state===S&&d<a;d++)this._eachEntry(c[d],d)},F.prototype._eachEntry=function(a,b){var c=this._instanceConstructor;g(a)?a.constructor===c&&a._state!==S?(a._onerror=null,this._settledAt(a._state,b,a._result)):this._willSettleAt(c.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(T,b,a))},F.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===S&&(this._remaining--,this._abortOnReject&&a===U?y(d,c):this._result[b]=this._makeResult(a,b,c)),0===this._remaining&&x(d,this._result)},F.prototype._makeResult=function(a,b,c){return c},F.prototype._willSettleAt=function(a,b){var c=this;z(a,void 0,function(a){c._settledAt(T,b,a)},function(a){c._settledAt(U,b,a)})};var Y=function(a,b){return new X(this,a,!0,b).promise},Z=function(a,b){function c(a){v(f,a)}function d(a){y(f,a)}var e=this,f=new e(n,b);if(!L(a))return y(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;f._state===S&&h<g;h++)z(e.resolve(a[h]),void 0,c,d);return f},$=function(a,b){var c=this;if(a&&"object"==typeof a&&a.constructor===c)return a;var d=new c(n,b);return v(d,a),d},_=function(a,b){var c=this,d=new c(n,b);return y(d,a),d},aa=0,ba=I;I.all=Y,I.race=Z,I.resolve=$,I.reject=_,I.prototype={constructor:I,then:function(a,b){var c=this,d=c._state;if(d===T&&!a||d===U&&!b)return this;var e=new this.constructor(n),f=c._result;if(d){var g=arguments[d-1];N(function(){D(d,e,g,f)})}else z(c,e,a,b);return e},catch:function(a){return this.then(null,a)}};var ca=function(){var a;a="undefined"!=typeof e?e:"undefined"!=typeof window&&window.document?window:self;var b="Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),f(b)}();b||(a.Promise=ba)},da={Promise:ba,polyfill:ca};"function"==typeof d&&d.amd?d(function(){return da}):"undefined"!=typeof c&&c.exports?c.exports=da:"undefined"!=typeof this&&(this.ES6Promise=da)}).call(this)}(a("3b")),c.exports}),a.registerDynamic("af",["ae"],!0,function(a,b,c){this||self;return c.exports=a("ae"),c.exports}),a.registerDynamic("b0",[],!0,function(a,b,c){"format cjs";this||self;return c.exports}),a.registerDynamic("b1",["af","b0","3b"],!0,function(a,b,c){"format cjs";var d,e=this||self,f="";return function(b){!function(){var g="undefined"!=typeof b&&b.versions&&b.versions.node,h=!g&&("undefined"!=typeof window||"undefined"!=typeof self);h&&"undefined"==typeof e&&("undefined"!=typeof window?e=window:"undefined"!=typeof self?e=self:"undefined"!=typeof $&&(e=$));var i=function(c){function d(){}function i(a){for(var b=[],c=Object.keys(a).sort(),d=0;d<c.length;++d){var e=c[d],f=a[e];O(f)||(f=[f]);for(var g=0;g<f.length;++g){var h=f[g];if(null!==h){if(!Q(h))throw new Fa("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:a});b.push({"@value":h,"@language":e.toLowerCase()})}}}return b}function j(a,b){if(O(b))for(var c=0;c<b.length;++c)b[c]=j(a,b[c]);else if(Z(b))b["@list"]=j(a,b["@list"]);else if(M(b)){$(b)&&(b["@id"]=a.getId(b["@id"]));for(var d=Object.keys(b).sort(),e=0;e<d.length;++e){var f=d[e];"@id"!==f&&(b[f]=j(a,b[f]))}}return b}function k(a,b,d){if(null===d||void 0===d)return null;var e=H(a,b,{vocab:!0});if("@id"===e)return H(a,d,{base:!0});if("@type"===e)return H(a,d,{vocab:!0,base:!0});var f=c.getContextValue(a,b,"@type");if("@id"===f||"@graph"===e&&Q(d))return{"@id":H(a,d,{base:!0})};if("@vocab"===f)return{"@id":H(a,d,{vocab:!0,base:!0})};if(L(e))return d;var g={};if(null!==f)g["@type"]=f;else if(Q(d)){var h=c.getContextValue(a,b,"@language");null!==h&&(g["@language"]=h)}return["boolean","number","string"].indexOf(typeof d)===-1&&(d=d.toString()),g["@value"]=d,g}function l(a,b,c){for(var d=[],e=Object.keys(a).sort(),f=0;f<e.length;++f)for(var g=e[f],h=a[g],i=Object.keys(h).sort(),j=0;j<i.length;++j){var k=i[j],l=h[k];if("@type"===k)k=ya;else if(L(k))continue;for(var o=0;o<l.length;++o){var p=l[o],q={};if(q.type=0===g.indexOf("_:")?"blank node":"IRI",q.value=g,_(g)){var r={};if(r.type=0===k.indexOf("_:")?"blank node":"IRI",r.value=k,_(k)&&("blank node"!==r.type||c.produceGeneralizedRdf))if(Z(p))m(p["@list"],b,q,r,d);else{var s=n(p);s&&d.push({subject:q,predicate:r,object:s})}}}}return d}function m(a,b,c,d,e){for(var f={type:"IRI",value:va},g={type:"IRI",value:wa},h={type:"IRI",value:xa},i=0;i<a.length;++i){var j=a[i],k={type:"blank node",value:b.getId()};e.push({subject:c,predicate:d,object:k}),c=k,d=f;var l=n(j);l&&e.push({subject:c,predicate:d,object:l}),d=g}e.push({subject:c,predicate:d,object:h})}function n(a){var b={};if(Y(a)){b.type="literal";var c=a["@value"],d=a["@type"]||null;U(c)?(b.value=c.toString(),b.datatype=d||pa):S(c)||d===qa?(S(c)||(c=parseFloat(c)),b.value=c.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),b.datatype=d||qa):R(c)?(b.value=c.toFixed(0),b.datatype=d||ra):"@language"in a?(b.value=c,b.datatype=d||Ca,b.language=a["@language"]):(b.value=c,b.datatype=d||sa)}else{var e=M(a)?a["@id"]:a;b.type=0===e.indexOf("_:")?"blank node":"IRI",b.value=e}return"IRI"!==b.type||_(b.value)?b:null}function o(a,b){if("IRI"===a.type||"blank node"===a.type)return{"@id":a.value};var c={"@value":a.value};if(a.language)c["@language"]=a.language;else{var d=a.datatype;if(d||(d=sa),b){if(d===pa)"true"===c["@value"]?c["@value"]=!0:"false"===c["@value"]&&(c["@value"]=!1);else if(T(c["@value"]))if(d===ra){var e=parseInt(c["@value"],10);e.toFixed(0)===c["@value"]&&(c["@value"]=e)}else d===qa&&(c["@value"]=parseFloat(c["@value"]));[pa,ra,qa,sa].indexOf(d)===-1&&(c["@type"]=d)}else d!==sa&&(c["@type"]=d)}return c}function p(a,b){for(var c=["subject","predicate","object"],d=0;d<c.length;++d){var e=c[d];if(a[e].type!==b[e].type||a[e].value!==b[e].value)return!1}return a.object.language===b.object.language&&a.object.datatype===b.object.datatype}function q(a,b,d,e,f,g){if(O(a))for(var h=0;h<a.length;++h)q(a[h],b,d,e,void 0,g);else{if(!M(a))return void(g&&g.push(a));if(Y(a)){if("@type"in a){var i=a["@type"];0===i.indexOf("_:")&&(a["@type"]=i=e.getId(i))}return void(g&&g.push(a))}if("@type"in a)for(var j=a["@type"],h=0;h<j.length;++h){var i=j[h];0===i.indexOf("_:")&&e.getId(i)}V(f)&&(f=$(a)?e.getId(a["@id"]):a["@id"]),g&&g.push({"@id":f});var k=b[d],l=k[f]=k[f]||{};l["@id"]=f;for(var m=Object.keys(a).sort(),n=0;n<m.length;++n){var o=m[n];if("@id"!==o)if("@reverse"!==o)if("@graph"!==o)if("@type"!==o&&L(o)){if("@index"===o&&o in l&&(a[o]!==l[o]||a[o]["@id"]!==l[o]["@id"]))throw new Fa("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:l});l[o]=a[o]}else{var p=a[o];if(0===o.indexOf("_:")&&(o=e.getId(o)),0!==p.length)for(var r=0;r<p.length;++r){var s=p[r];if("@type"===o&&(s=0===s.indexOf("_:")?e.getId(s):s),W(s)||X(s)){var t=$(s)?e.getId(s["@id"]):s["@id"];c.addValue(l,o,{"@id":t},{propertyIsArray:!0,allowDuplicate:!1}),q(s,b,d,e,t)}else if(Z(s)){var u=[];q(s["@list"],b,d,e,f,u),s={"@list":u},c.addValue(l,o,s,{propertyIsArray:!0,allowDuplicate:!1})}else q(s,b,d,e,f),c.addValue(l,o,s,{propertyIsArray:!0,allowDuplicate:!1})}else c.addValue(l,o,[],{propertyIsArray:!0})}else{f in b||(b[f]={});var v="@merged"===d?d:f;q(a[o],b,v,e)}else{var w={"@id":f},x=a["@reverse"];for(var y in x)for(var z=x[y],A=0;A<z.length;++A){var B=z[A],C=B["@id"];$(B)&&(C=e.getId(C)),q(B,b,d,e,C),c.addValue(k[C],y,w,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function r(a){for(var b=a["@default"],c=Object.keys(a).sort(),d=0;d<c.length;++d){var e=c[d];if("@default"!==e){var f=a[e],g=b[e];g?"@graph"in g||(g["@graph"]=[]):b[e]=g={"@id":e,"@graph":[]};for(var h=g["@graph"],i=Object.keys(f).sort(),j=0;j<i.length;++j){var k=f[i[j]];X(k)||h.push(k)}}}return b}function s(a,b,c,d,e){w(c),c=c[0];for(var f=a.options,g={embed:v(c,f,"embed"),explicit:v(c,f,"explicit"),requireAll:v(c,f,"requireAll")},h=x(a,b,c,g),i=Object.keys(h).sort(),j=0;j<i.length;++j){var k=i[j],l=h[k];if("@link"===g.embed&&k in a.link)A(d,e,a.link[k]);else{null===e&&(a.uniqueEmbeds={});var m={};if(m["@id"]=k,a.link[k]=m,"@never"===g.embed||u(l,a.subjectStack))A(d,e,m);else{"@last"===g.embed&&(k in a.uniqueEmbeds&&z(a,k),a.uniqueEmbeds[k]={parent:d,property:e}),a.subjectStack.push(l);for(var n=Object.keys(l).sort(),o=0;o<n.length;o++){var p=n[o];if(L(p))m[p]=aa(l[p]);else if(!g.explicit||p in c)for(var q=l[p],r=0;r<q.length;++r){var y=q[r];if(Z(y)){var B={"@list":[]};A(m,p,B);var C=y["@list"];for(var D in C)if(y=C[D],X(y)){var E=p in c?c[p][0]["@list"]:t(g);s(a,[y["@id"]],E,B,"@list")}else A(B,"@list",aa(y))}else if(X(y)){var E=p in c?c[p]:t(g);s(a,[y["@id"]],E,m,p)}else A(m,p,aa(y))}}for(var n=Object.keys(c).sort(),o=0;o<n.length;++o){var p=n[o];if(!L(p)){var F=c[p][0],G=v(F,f,"omitDefault");if(!(G||p in m)){var H="@null";"@default"in F&&(H=aa(F["@default"])),O(H)||(H=[H]),m[p]=[{"@preserve":H}]}}}A(d,e,m),a.subjectStack.pop()}}}}function t(a){var b={};for(var c in a)void 0!==a[c]&&(b["@"+c]=[a[c]]);return[b]}function u(a,b){for(var c=b.length-1;c>=0;--c)if(b[c]["@id"]===a["@id"])return!0;return!1}function v(a,b,c){var d="@"+c,e=d in a?a[d][0]:b[c];return"embed"===c&&(e===!0?e="@last":e===!1?e="@never":"@always"!==e&&"@never"!==e&&"@link"!==e&&(e="@last")),e}function w(a){if(!O(a)||1!==a.length||!M(a[0]))throw new Fa("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:a})}function x(a,b,c,d){for(var e={},f=0;f<b.length;++f){var g=b[f],h=a.subjects[g];y(h,c,d)&&(e[g]=h)}return e}function y(a,b,d){if("@type"in b&&(1!==b["@type"].length||!M(b["@type"][0]))){for(var e=b["@type"],f=0;f<e.length;++f)if(c.hasValue(a,"@type",e[f]))return!0;return!1}var g=!0,h=!1;for(var i in b){if(L(i)){if("@id"!==i&&"@type"!==i)continue;if(g=!1,"@id"===i&&Q(b[i])){if(a[i]!==b[i])return!1;h=!0;continue}}if(g=!1,i in a){if(O(b[i])&&0===b[i].length&&void 0!==a[i])return!1;h=!0}else{var j=O(b[i])&&M(b[i][0])&&"@default"in b[i][0];if(d.requireAll&&!j)return!1}}return g||h}function z(a,b){var d=a.uniqueEmbeds,e=d[b],f=e.parent,g=e.property,h={"@id":b};if(O(f)){for(var i=0;i<f.length;++i)if(c.compareValues(f[i],h)){f[i]=h;break}}else{var j=O(f[g]);c.removeValue(f,g,h,{propertyIsArray:j}),c.addValue(f,g,h,{propertyIsArray:j})}var k=function(a){for(var b=Object.keys(d),c=0;c<b.length;++c){var e=b[c];e in d&&M(d[e].parent)&&d[e].parent["@id"]===a&&(delete d[e],k(e))}};k(b)}function A(a,b,d){M(a)?c.addValue(a,b,d,{propertyIsArray:!0}):a.push(d)}function B(a,b,d){if(O(b)){for(var e=[],f=0;f<b.length;++f){var g=B(a,b[f],d);null!==g&&e.push(g)}b=e}else if(M(b)){if("@preserve"in b)return"@null"===b["@preserve"]?null:b["@preserve"];if(Y(b))return b;if(Z(b))return b["@list"]=B(a,b["@list"],d),b;var h=E(a,"@id");if(h in b){var i=b[h];if(i in d.link){var j=d.link[i].indexOf(b);if(j!==-1)return d.link[i][j];d.link[i].push(b)}else d.link[i]=[b]}for(var k in b){var g=B(a,b[k],d),l=c.getContextValue(a,k,"@container");d.compactArrays&&O(g)&&1===g.length&&null===l&&(g=g[0]),b[k]=g}}return b}function C(a,b){return a.length<b.length?-1:b.length<a.length?1:a===b?0:a<b?-1:1}function D(a,b,c,d,e,f){null===f&&(f="@null");var g=[];if("@id"!==f&&"@reverse"!==f||!X(c))g.push(f);else{"@reverse"===f&&g.push("@reverse");var h=E(a,c["@id"],null,{vocab:!0});h in a.mappings&&a.mappings[h]&&a.mappings[h]["@id"]===c["@id"]?g.push.apply(g,["@vocab","@id"]):g.push.apply(g,["@id","@vocab"])}g.push("@none");for(var i=a.inverse[b],j=0;j<d.length;++j){var k=d[j];if(k in i)for(var l=i[k][e],m=0;m<g.length;++m){var n=g[m];if(n in l)return l[n]}}return null}function E(a,b,c,d,e){if(null===b)return b;if(V(c)&&(c=null),V(e)&&(e=!1),d=d||{},L(b)&&(d.vocab=!0),d.vocab&&b in a.getInverse()){var f=a["@language"]||"@none",g=[];M(c)&&"@index"in c&&g.push("@index");var h="@language",i="@null";if(e)h="@type",i="@reverse",g.push("@set");else if(Z(c)){"@index"in c||g.push("@list");for(var j=c["@list"],k=0===j.length?f:null,l=null,m=0;m<j.length;++m){var n=j[m],o="@none",p="@none";if(Y(n)?"@language"in n?o=n["@language"]:"@type"in n?p=n["@type"]:o="@null":p="@id",null===k?k=o:o!==k&&Y(n)&&(k="@none"),null===l?l=p:p!==l&&(l="@none"),"@none"===k&&"@none"===l)break}k=k||"@none",l=l||"@none","@none"!==l?(h="@type",i=l):i=k}else Y(c)?"@language"in c&&!("@index"in c)?(g.push("@language"),i=c["@language"]):"@type"in c&&(h="@type",i=c["@type"]):(h="@type",i="@id"),g.push("@set");g.push("@none");var q=D(a,b,c,g,h,i);if(null!==q)return q}if(d.vocab&&"@vocab"in a){var r=a["@vocab"];if(0===b.indexOf(r)&&b!==r){var s=b.substr(r.length);if(!(s in a.mappings))return s}}var t=null;for(var q in a.mappings)if(q.indexOf(":")===-1){var u=a.mappings[q];if(u&&u["@id"]!==b&&0===b.indexOf(u["@id"])){var v=q+":"+b.substr(u["@id"].length),w=!(v in a.mappings)||null===c&&a.mappings[v]&&a.mappings[v]["@id"]===b;w&&(null===t||C(v,t)<0)&&(t=v)}}return null!==t?t:d.vocab?b:J(a["@base"],b)}function F(a,b,d){if(Y(d)){var e=c.getContextValue(a,b,"@type"),f=c.getContextValue(a,b,"@language"),g=c.getContextValue(a,b,"@container"),h="@index"in d&&"@index"!==g;if(!h&&(d["@type"]===e||d["@language"]===f))return d["@value"];var i=Object.keys(d).length,j=1===i||2===i&&"@index"in d&&!h,k="@language"in a,l=Q(d["@value"]),m=a.mappings[b]&&null===a.mappings[b]["@language"];if(j&&(!k||!l||m))return d["@value"];var n={};return h&&(n[E(a,"@index")]=d["@index"]),"@type"in d?n[E(a,"@type")]=E(a,d["@type"],null,{vocab:!0}):"@language"in d&&(n[E(a,"@language")]=d["@language"]),n[E(a,"@value")]=d["@value"],n}var o=H(a,b,{vocab:!0}),e=c.getContextValue(a,b,"@type"),p=E(a,d["@id"],null,{vocab:"@vocab"===e});if("@id"===e||"@vocab"===e||"@graph"===o)return p;var n={};return n[E(a,"@id")]=p,n}function G(a,b,c,d){if(c in d){if(d[c])return;throw new Fa("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:b,term:c})}if(d[c]=!1,L(c))throw new Fa("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:b,term:c});if(""===c)throw new Fa("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:b});a.mappings[c]&&delete a.mappings[c];var e=b[c];if(null===e||M(e)&&null===e["@id"])return a.mappings[c]=null,void(d[c]=!0);if(Q(e)&&(e={"@id":e}),!M(e))throw new Fa("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:b});var f=a.mappings[c]={};if(f.reverse=!1,"@reverse"in e){if("@id"in e)throw new Fa("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});var g=e["@reverse"];if(!Q(g))throw new Fa("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});var h=H(a,g,{vocab:!0,base:!1},b,d);if(!_(h))throw new Fa("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h,f.reverse=!0}else if("@id"in e){var h=e["@id"];if(!Q(h))throw new Fa("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});if(h!==c){if(h=H(a,h,{vocab:!0,base:!1},b,d),!_(h)&&!L(h))throw new Fa("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h}}if(!("@id"in f)){var i=c.indexOf(":");if(i!==-1){var j=c.substr(0,i);if(j in b&&G(a,b,j,d),a.mappings[j]){var k=c.substr(i+1);f["@id"]=a.mappings[j]["@id"]+k}else f["@id"]=c}else{if(!("@vocab"in a))throw new Fa("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b,term:c});f["@id"]=a["@vocab"]+c}}if(d[c]=!0,"@type"in e){var l=e["@type"];if(!Q(l))throw new Fa("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if("@id"!==l&&"@vocab"!==l){if(l=H(a,l,{vocab:!0,base:!1},b,d),!_(l))throw new Fa("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if(0===l.indexOf("_:"))throw new Fa("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:b})}f["@type"]=l}if("@container"in e){var m=e["@container"];if("@list"!==m&&"@set"!==m&&"@index"!==m&&"@language"!==m)throw new Fa("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:b});if(f.reverse&&"@index"!==m&&"@set"!==m&&null!==m)throw new Fa("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});f["@container"]=m}if("@language"in e&&!("@type"in e)){var n=e["@language"];if(null!==n&&!Q(n))throw new Fa("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:b});null!==n&&(n=n.toLowerCase()),f["@language"]=n}var h=f["@id"];if("@context"===h||"@preserve"===h)throw new Fa("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:b})}function H(a,b,d,e,f){if(null===b||L(b))return b;if(b=String(b),e&&b in e&&f[b]!==!0&&G(a,e,b,f),d=d||{},d.vocab){var g=a.mappings[b];if(null===g)return null;if(g)return g["@id"]}var h=b.indexOf(":");if(h!==-1){var i=b.substr(0,h),j=b.substr(h+1);if("_"===i||0===j.indexOf("//"))return b;e&&i in e&&G(a,e,i,f);var g=a.mappings[i];return g?g["@id"]+j:b}if(d.vocab&&"@vocab"in a)return a["@vocab"]+b;var k=b;return d.base&&(k=c.prependBase(a["@base"],k)),k}function I(a,b){if(null===a)return b;if(b.indexOf(":")!==-1)return b;
Q(a)&&(a=c.url.parse(a||""));var d=c.url.parse(b),e={protocol:a.protocol||""};if(null!==d.authority)e.authority=d.authority,e.path=d.path,e.query=d.query;else if(e.authority=a.authority,""===d.path)e.path=a.path,null!==d.query?e.query=d.query:e.query=a.query;else{if(0===d.path.indexOf("/"))e.path=d.path;else{var f=a.path;""!==d.path&&(f=f.substr(0,f.lastIndexOf("/")+1),f.length>0&&"/"!==f.substr(-1)&&(f+="/"),f+=d.path),e.path=f}e.query=d.query}e.path=ia(e.path,!!e.authority);var g=e.protocol;return null!==e.authority&&(g+="//"+e.authority),g+=e.path,null!==e.query&&(g+="?"+e.query),null!==d.fragment&&(g+="#"+d.fragment),""===g&&(g="./"),g}function J(a,b){if(null===a)return b;Q(a)&&(a=c.url.parse(a||""));var d="";if(""!==a.href?d+=(a.protocol||"")+"//"+(a.authority||""):b.indexOf("//")&&(d+="//"),0!==b.indexOf(d))return b;for(var e=c.url.parse(b.substr(d.length)),f=a.normalizedPath.split("/"),g=e.normalizedPath.split("/"),h=e.fragment||e.query?0:1;f.length>0&&g.length>h&&f[0]===g[0];)f.shift(),g.shift();var i="";if(f.length>0){f.pop();for(var j=0;j<f.length;++j)i+="../"}return i+=g.join("/"),null!==e.query&&(i+="?"+e.query),null!==e.fragment&&(i+="#"+e.fragment),""===i&&(i="./"),i}function K(a){function b(){var a=this;if(a.inverse)return a.inverse;for(var b=a.inverse={},c=a["@language"]||"@none",e=a.mappings,f=Object.keys(e).sort(C),g=0;g<f.length;++g){var h=f[g],i=e[h];if(null!==i){var j=i["@container"]||"@none",k=i["@id"];O(k)||(k=[k]);for(var l=0;l<k.length;++l){var m=k[l],n=b[m];if(n||(b[m]=n={}),n[j]||(n[j]={"@language":{},"@type":{}}),n=n[j],i.reverse)d(i,h,n["@type"],"@reverse");else if("@type"in i)d(i,h,n["@type"],i["@type"]);else if("@language"in i){var o=i["@language"]||"@null";d(i,h,n["@language"],o)}else d(i,h,n["@language"],c),d(i,h,n["@type"],"@none"),d(i,h,n["@language"],"@none")}}}return b}function d(a,b,c,d){d in c||(c[d]=b)}function e(){var a={};return a["@base"]=this["@base"],a.mappings=aa(this.mappings),a.clone=this.clone,a.inverse=null,a.getInverse=this.getInverse,"@language"in this&&(a["@language"]=this["@language"]),"@vocab"in this&&(a["@vocab"]=this["@vocab"]),a}var f=c.url.parse(a.base||"");return{"@base":f,mappings:{},inverse:null,getInverse:b,clone:e}}function L(a){if(!Q(a))return!1;switch(a){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function M(a){return"[object Object]"===Object.prototype.toString.call(a)}function N(a){return M(a)&&0===Object.keys(a).length}function O(a){return Array.isArray(a)}function P(a){if(!Q(a)&&!N(a)){var b=!1;if(O(a)){b=!0;for(var c=0;c<a.length;++c)if(!Q(a[c])){b=!1;break}}if(!b)throw new Fa('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:a})}}function Q(a){return"string"==typeof a||"[object String]"===Object.prototype.toString.call(a)}function R(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function S(a){return R(a)&&String(a).indexOf(".")!==-1}function T(a){return!isNaN(parseFloat(a))&&isFinite(a)}function U(a){return"boolean"==typeof a||"[object Boolean]"===Object.prototype.toString.call(a)}function V(a){return"undefined"==typeof a}function W(a){var b=!1;if(M(a)&&!("@value"in a||"@set"in a||"@list"in a)){var c=Object.keys(a).length;b=c>1||!("@id"in a)}return b}function X(a){return M(a)&&1===Object.keys(a).length&&"@id"in a}function Y(a){return M(a)&&"@value"in a}function Z(a){return M(a)&&"@list"in a}function $(a){var b=!1;return M(a)&&(b="@id"in a?0===a["@id"].indexOf("_:"):0===Object.keys(a).length||!("@value"in a||"@set"in a||"@list"in a)),b}function _(a){return Q(a)&&a.indexOf(":")!==-1}function aa(a){if(a&&"object"==typeof a){var b;if(O(a)){b=[];for(var c=0;c<a.length;++c)b[c]=aa(a[c])}else if(M(a)){b={};for(var d in a)b[d]=aa(a[d])}else b=a.toString();return b}return a}function ba(a,b,d,e){var f=Object.keys(b).length;if(O(a)){for(var g=0;g<a.length;++g)ba(a[g],b,d,e);return f<Object.keys(b).length}if(M(a)){for(var h in a)if("@context"===h){var i=a[h];if(O(i))for(var j=i.length,g=0;g<j;++g){var k=i[g];Q(k)&&(k=c.prependBase(e,k),d?(k=b[k],O(k)?(Array.prototype.splice.apply(i,[g,1].concat(k)),g+=k.length-1,j=i.length):i[g]=k):k in b||(b[k]=!1))}else Q(i)&&(i=c.prependBase(e,i),d?a[h]=b[i]:i in b||(b[i]=!1))}else ba(a[h],b,d,e);return f<Object.keys(b).length}return!1}function ca(a,b,c){var d=null,e=b.documentLoader,f=function(a,b,c,e,g){if(Object.keys(b).length>Ea)return d=new Fa("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Ea}),g(d);var h={},i=function(){ba(a,h,!0,e),g(null,a)};ba(a,h,!1,e)||i();var j=[];for(var k in h)h[k]===!1&&j.push(k);for(var l=j.length,m=0;m<j.length;++m)!function(a){if(a in b)return d=new Fa("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:a}),g(d);var e=aa(b);e[a]=!0;var j=function(b,j){if(!d){var k=j?j.document:null;if(!b&&Q(k))try{k=JSON.parse(k)}catch(a){b=a}if(b?b=new Fa("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:a,cause:b}):M(k)||(b=new Fa("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:a,cause:b})),b)return d=b,g(d);k="@context"in k?{"@context":k["@context"]}:{"@context":{}},j.contextUrl&&(O(k["@context"])||(k["@context"]=[k["@context"]]),k["@context"].push(j.contextUrl)),f(k,e,c,a,function(b,c){return b?g(b):(h[a]=c["@context"],l-=1,void(0===l&&i()))})}},k=c(a,j);k&&"then"in k&&k.then(j.bind(null,null),j)}(j[m])};f(a,{},e,b.base,c)}function da(a){for(var b="(?:<([^:]+:[^>]*)>)",c="(_:(?:[A-Za-z0-9]+))",d='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',e="(?:\\^\\^"+b+")",f="(?:@([a-z]+(?:-[a-z0-9]+)*))",g="(?:"+d+"(?:"+e+"|"+f+")?)",h="(?:#.*)?",i="[ \\t]+",j="[ \\t]*",k=/(?:\r\n)|(?:\n)|(?:\r)/g,l=new RegExp("^"+j+h+"$"),m="(?:"+b+"|"+c+")"+i,n=b+i,o="(?:"+b+"|"+c+"|"+g+")"+j,q="(?:\\.|(?:(?:"+b+"|"+c+")"+j+"\\.))",r=new RegExp("^"+j+m+n+o+q+j+h+"$"),s={},t=a.split(k),u=0,v=0;v<t.length;++v){var w=t[v];if(u++,!l.test(w)){var x=w.match(r);if(null===x)throw new Fa("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:u});var y={};if(V(x[1])?y.subject={type:"blank node",value:x[2]}:y.subject={type:"IRI",value:x[1]},y.predicate={type:"IRI",value:x[3]},V(x[4]))if(V(x[5])){y.object={type:"literal"},V(x[7])?V(x[8])?y.object.datatype=sa:(y.object.datatype=Ca,y.object.language=x[8]):y.object.datatype=x[7];var z=x[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");y.object.value=z}else y.object={type:"blank node",value:x[5]};else y.object={type:"IRI",value:x[4]};var A="@default";if(V(x[9])?V(x[10])||(A=x[10]):A=x[9],A in s){for(var B=!0,C=s[A],D=0;B&&D<C.length;++D)p(C[D],y)&&(B=!1);B&&C.push(y)}else s[A]=[y]}}return s}function ea(a){var b=[];for(var c in a)for(var d=a[c],e=0;e<d.length;++e){var f=d[e];"@default"===c&&(c=null),b.push(fa(f,c))}return b.sort().join("")}function fa(a,b){var c=a.subject,d=a.predicate,e=a.object,f=b||null;"name"in a&&a.name&&(f=a.name.value);var g="";if(g+="IRI"===c.type?"<"+c.value+">":c.value,g+=" ",g+="IRI"===d.type?"<"+d.value+">":d.value,g+=" ","IRI"===e.type)g+="<"+e.value+">";else if("blank node"===e.type)g+=e.value;else{var h=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');g+='"'+h+'"',e.datatype===Ca?e.language&&(g+="@"+e.language):e.datatype!==sa&&(g+="^^<"+e.datatype+">")}return null!==f&&void 0!==f&&(g+=0!==f.indexOf("_:")?" <"+f+">":" "+f),g+=" .\n"}function ga(a){var b={};b["@default"]=[];for(var c=a.getSubjects(),d=0;d<c.length;++d){var e=c[d];if(null!==e){var f=a.getSubjectTriples(e);if(null!==f){var g=f.predicates;for(var h in g)for(var i=g[h].objects,j=0;j<i.length;++j){var k=i[j],l={};0===e.indexOf("_:")?l.subject={type:"blank node",value:e}:l.subject={type:"IRI",value:e},0===h.indexOf("_:")?l.predicate={type:"blank node",value:h}:l.predicate={type:"IRI",value:h};var m=k.value;if(k.type===Aa){na||La();var n=new na;m="";for(var o=0;o<k.value.length;o++)k.value[o].nodeType===oa.ELEMENT_NODE?m+=n.serializeToString(k.value[o]):k.value[o].nodeType===oa.TEXT_NODE&&(m+=k.value[o].nodeValue)}l.object={},k.type===Ba?0===k.value.indexOf("_:")?l.object.type="blank node":l.object.type="IRI":(l.object.type="literal",k.type===za?k.language?(l.object.datatype=Ca,l.object.language=k.language):l.object.datatype=sa:l.object.datatype=k.type),l.object.value=m,b["@default"].push(l)}}}}return b}function ha(a){this.prefix=a,this.counter=0,this.existing={}}function ia(a,b){var c="";0===a.indexOf("/")&&(c="/");for(var d=a.split("/"),e=[];d.length>0;)"."===d[0]||""===d[0]&&d.length>1?d.shift():".."!==d[0]?e.push(d.shift()):(d.shift(),b||e.length>0&&".."!==e[e.length-1]?e.pop():e.push(".."));return c+e.join("/")}c.compact=function(a,b,d,e){function f(a,c,d,f){if(a)return e(a);f.compactArrays&&!f.graph&&O(c)?1===c.length?c=c[0]:0===c.length&&(c={}):f.graph&&M(c)&&(c=[c]),M(b)&&"@context"in b&&(b=b["@context"]),b=aa(b),O(b)||(b=[b]);var g=b;b=[];for(var h=0;h<g.length;++h)(!M(g[h])||Object.keys(g[h]).length>0)&&b.push(g[h]);var i=b.length>0;if(1===b.length&&(b=b[0]),O(c)){var j=E(d,"@graph"),k=c;c={},i&&(c["@context"]=b),c[j]=k}else if(M(c)&&i){var k=c;c={"@context":b};for(var l in k)c[l]=k[l]}e(null,c,d)}if(arguments.length<2)return c.nextTick(function(){e(new TypeError("Could not compact, too few arguments."))});if("function"==typeof d&&(e=d,d={}),d=d||{},null===b)return c.nextTick(function(){e(new Fa("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===a)return c.nextTick(function(){e(null,null)});"base"in d||(d.base="string"==typeof a?a:""),"compactArrays"in d||(d.compactArrays=!0),"graph"in d||(d.graph=!1),"skipExpansion"in d||(d.skipExpansion=!1),"documentLoader"in d||(d.documentLoader=c.loadDocument),"link"in d||(d.link=!1),d.link&&(d.skipExpansion=!0);var g=function(a,b,d){c.nextTick(function(){return b.skipExpansion?d(null,a):void c.expand(a,b,d)})};g(a,d,function(a,g){if(a)return e(new Fa("Could not expand input before compaction.","jsonld.CompactError",{cause:a}));var h=K(d);c.processContext(h,b,d,function(a,b){if(a)return e(new Fa("Could not process context before compaction.","jsonld.CompactError",{cause:a}));var c;try{c=(new Ga).compact(b,null,g,d)}catch(a){return e(a)}f(null,c,b,d)})})},c.expand=function(a,b,d){function e(a){"base"in b||(b.base=a.documentUrl||"");var c={document:aa(a.document),remoteContext:{"@context":a.contextUrl}};if("expandContext"in b){var e=aa(b.expandContext);"object"==typeof e&&"@context"in e?c.expandContext=e:c.expandContext={"@context":e}}ca(c,b,function(a,c){if(a)return d(a);var e;try{var f=new Ga,g=K(b),h=c.document,i=c.remoteContext["@context"];c.expandContext&&(g=f.processContext(g,c.expandContext["@context"],b)),i&&(g=f.processContext(g,i,b)),e=f.expand(g,null,h,b,!1),M(e)&&"@graph"in e&&1===Object.keys(e).length?e=e["@graph"]:null===e&&(e=[]),O(e)||(e=[e])}catch(a){return d(a)}d(null,e)})}return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not expand, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"documentLoader"in b||(b.documentLoader=c.loadDocument),"keepFreeFloatingNodes"in b||(b.keepFreeFloatingNodes=!1),void c.nextTick(function(){if("string"==typeof a){var c=function(a,b){if(a)return d(a);try{if(!b.document)throw new Fa("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(a){return d(new Fa("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:a,remoteDoc:b}))}e(b)},f=b.documentLoader(a,c);return void(f&&"then"in f&&f.then(c.bind(null,null),c))}e({contextUrl:null,documentUrl:null,document:a})}))},c.flatten=function(a,b,d,e){return arguments.length<1?c.nextTick(function(){e(new TypeError("Could not flatten, too few arguments."))}):("function"==typeof d?(e=d,d={}):"function"==typeof b&&(e=b,b=null,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=c.loadDocument),void c.expand(a,d,function(a,f){if(a)return e(new Fa("Could not expand input before flattening.","jsonld.FlattenError",{cause:a}));var g;try{g=(new Ga).flatten(f)}catch(a){return e(a)}return null===b?e(null,g):(d.graph=!0,d.skipExpansion=!0,void c.compact(g,b,d,function(a,b){return a?e(new Fa("Could not compact flattened output.","jsonld.FlattenError",{cause:a})):void e(null,b)}))}))},c.frame=function(a,b,d,e){function f(b){var f,g=b.document;g?(f=g["@context"],b.contextUrl?(f?O(f)?f.push(b.contextUrl):f=[f,b.contextUrl]:f=b.contextUrl,g["@context"]=f):f=f||{}):f={},c.expand(a,d,function(a,b){if(a)return e(new Fa("Could not expand input before framing.","jsonld.FrameError",{cause:a}));var h=aa(d);h.isFrame=!0,h.keepFreeFloatingNodes=!0,c.expand(g,h,function(a,d){if(a)return e(new Fa("Could not expand frame before framing.","jsonld.FrameError",{cause:a}));var g;try{g=(new Ga).frame(b,d,h)}catch(a){return e(a)}h.graph=!0,h.skipExpansion=!0,h.link={},c.compact(g,f,h,function(a,b,c){if(a)return e(new Fa("Could not compact framed output.","jsonld.FrameError",{cause:a}));var d=E(c,"@graph");h.link={},b[d]=B(c,b[d],h),e(null,b)})})})}return arguments.length<2?c.nextTick(function(){e(new TypeError("Could not frame, too few arguments."))}):("function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=c.loadDocument),"embed"in d||(d.embed="@last"),d.explicit=d.explicit||!1,"requireAll"in d||(d.requireAll=!0),d.omitDefault=d.omitDefault||!1,void c.nextTick(function(){if("string"==typeof b){var a=function(a,b){if(a)return e(a);try{if(!b.document)throw new Fa("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(a){return e(new Fa("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:a,remoteDoc:b}))}f(b)},c=d.documentLoader(b,a);return void(c&&"then"in c&&c.then(a.bind(null,null),a))}f({contextUrl:null,documentUrl:null,document:b})}))},c.link=function(a,b,d,e){var f={};b&&(f["@context"]=b),f["@embed"]="@link",c.frame(a,f,d,e)},c.objectify=function(a,b,d,e){"function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=c.loadDocument),c.expand(a,d,function(a,f){if(a)return e(new Fa("Could not expand input before linking.","jsonld.LinkError",{cause:a}));var g;try{g=(new Ga).flatten(f)}catch(a){return e(a)}d.graph=!0,d.skipExpansion=!0,c.compact(g,b,d,function(a,b,d){if(a)return e(new Fa("Could not compact flattened output before linking.","jsonld.LinkError",{cause:a}));var f=E(d,"@graph"),g=b[f][0],h=function(a){if(M(a)||O(a)){if(M(a)){if(h.visited[a["@id"]])return;h.visited[a["@id"]]=!0}for(var b in a){var e=a[b],f="@id"===c.getContextValue(d,b,"@type");if(O(e)||M(e)||f)if(Q(e)&&f)a[b]=e=g[e],h(e);else if(O(e))for(var i=0;i<e.length;++i)Q(e[i])&&f?e[i]=g[e[i]]:M(e[i])&&"@id"in e[i]&&(e[i]=g[e[i]["@id"]]),h(e[i]);else if(M(e)){var j=e["@id"];a[b]=e=g[j],h(e)}}}};h.visited={},h(g),b.of_type={};for(var i in g)if("@type"in g[i]){var j=g[i]["@type"];O(j)||(j=[j]);for(var k=0;k<j.length;++k)j[k]in b.of_type||(b.of_type[j[k]]=[]),b.of_type[j[k]].push(g[i])}e(null,b)})})},c.normalize=function(a,b,d){if(arguments.length<1)return c.nextTick(function(){d(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof b&&(d=b,b={}),b=b||{},"algorithm"in b||(b.algorithm="URGNA2012"),"base"in b||(b.base="string"==typeof a?a:""),"documentLoader"in b||(b.documentLoader=c.loadDocument),"inputFormat"in b){if("application/nquads"!==b.inputFormat)return d(new Fa("Unknown normalization input format.","jsonld.NormalizeError"));var e=da(a);(new Ga).normalize(e,b,d)}else{var f=aa(b);delete f.format,f.produceGeneralizedRdf=!1,c.toRDF(a,f,function(a,c){return a?d(new Fa("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:a})):void(new Ga).normalize(c,b,d)})}},c.fromRDF=function(a,b,d){return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not convert from RDF, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"useRdfType"in b||(b.useRdfType=!1),"useNativeTypes"in b||(b.useNativeTypes=!1),"format"in b||!Q(a)||"format"in b||(b.format="application/nquads"),void c.nextTick(function(){function c(a,b,c){(new Ga).fromRDF(a,b,c)}var e;if(b.format){if(e=b.rdfParser||ma[b.format],!e)return d(new Fa("Unknown input format.","jsonld.UnknownFormat",{format:b.format}))}else e=function(){return a};var f=!1;try{a=e(a,function(a,e){return f=!0,a?d(a):void c(e,b,d)})}catch(a){if(!f)return d(a);throw a}if(a){if("then"in a)return a.then(function(a){c(a,b,d)},d);c(a,b,d)}}))},c.toRDF=function(a,b,d){return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not convert to RDF, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"base"in b||(b.base="string"==typeof a?a:""),"documentLoader"in b||(b.documentLoader=c.loadDocument),void c.expand(a,b,function(a,c){if(a)return d(new Fa("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:a}));var e;try{if(e=Ga.prototype.toRDF(c,b),b.format){if("application/nquads"===b.format)return d(null,ea(e));throw new Fa("Unknown output format.","jsonld.UnknownFormat",{format:b.format})}}catch(a){return d(a)}d(null,e)}))},c.createNodeMap=function(a,b,d){return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not create node map, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"base"in b||(b.base="string"==typeof a?a:""),"documentLoader"in b||(b.documentLoader=c.loadDocument),void c.expand(a,b,function(a,c){if(a)return d(new Fa("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:a}));var e;try{e=(new Ga).createNodeMap(c,b)}catch(a){return d(a)}d(null,e)}))},c.merge=function(a,b,d,e){function f(a,b){if(!i){if(a)return i=a,e(new Fa("Could not expand input before flattening.","jsonld.FlattenError",{cause:a}));h.push(b),0===--j&&g(h)}}function g(a){var f=!0;"mergeNodes"in d&&(f=d.mergeNodes);var g,h=d.namer||d.issuer||new ha("_:b"),i={"@default":{}};try{for(var j=0;j<a.length;++j){var k=a[j];k=c.relabelBlankNodes(k,{issuer:new ha("_:b"+j+"-")});var l=f||0===j?i:{"@default":{}};if(q(k,l,"@default",h),l!==i)for(var m in l){var n=l[m];if(m in i){var o=i[m];for(var p in n)p in o||(o[p]=n[p])}else i[m]=n}}g=r(i)}catch(a){return e(a)}for(var s=[],t=Object.keys(g).sort(),u=0;u<t.length;++u){var v=g[t[u]];X(v)||s.push(v)}return null===b?e(null,s):(d.graph=!0,d.skipExpansion=!0,void c.compact(s,b,d,function(a,b){return a?e(new Fa("Could not compact merged output.","jsonld.MergeError",{cause:a})):void e(null,b)}))}if(arguments.length<1)return c.nextTick(function(){e(new TypeError("Could not merge, too few arguments."))});if(!O(a))return c.nextTick(function(){e(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof d?(e=d,d={}):"function"==typeof b&&(e=b,b=null,d={}),d=d||{};for(var h=[],i=null,j=a.length,k=0;k<a.length;++k){var l={};for(var m in d)l[m]=d[m];c.expand(a[k],l,f)}},c.relabelBlankNodes=function(a,b){b=b||{};var c=b.namer||b.issuer||new ha("_:b");return j(c,a)},c.prependBase=function(a,b){return I(a,b)},c.documentLoader=function(a,b){var d=new Fa("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return g?b(d,{contextUrl:null,documentUrl:a,document:null}):c.promisify(function(a){a(d)})},c.loadDocument=function(a,b){var d=c.documentLoader(a,b);d&&"then"in d&&d.then(b.bind(null,null),b)},c.promises=function(b){b=b||{};var d=Array.prototype.slice,f=c.promisify,g=b.api||{},h=b.version||"jsonld.js";"string"==typeof b.api&&(b.version||(h=b.api),g={}),g.expand=function(a){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return f.apply(null,[c.expand].concat(d.call(arguments)))},g.compact=function(a,b){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var e=function(a,b,d,e){c.compact(a,b,d,function(a,b){e(a,b)})};return f.apply(null,[e].concat(d.call(arguments)))},g.flatten=function(a){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return f.apply(null,[c.flatten].concat(d.call(arguments)))},g.frame=function(a,b){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return f.apply(null,[c.frame].concat(d.call(arguments)))},g.fromRDF=function(a){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return f.apply(null,[c.fromRDF].concat(d.call(arguments)))},g.toRDF=function(a){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return f.apply(null,[c.toRDF].concat(d.call(arguments)))},g.normalize=function(a){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return f.apply(null,[c.normalize].concat(d.call(arguments)))},"jsonld.js"===h&&(g.link=function(a,b){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return f.apply(null,[c.link].concat(d.call(arguments)))},g.objectify=function(a){return f.apply(null,[c.objectify].concat(d.call(arguments)))},g.createNodeMap=function(a){return f.apply(null,[c.createNodeMap].concat(d.call(arguments)))},g.merge=function(a){return f.apply(null,[c.merge].concat(d.call(arguments)))});try{c.Promise=e.Promise||a("af").Promise}catch(a){var i=function(){throw new Error("Unable to find a Promise implementation.")};for(var j in g)g[j]=i}return g},c.promisify=function(b){if(!c.Promise)try{c.Promise=e.Promise||a("af").Promise}catch(a){throw new Error("Unable to find a Promise implementation.")}var d=Array.prototype.slice.call(arguments,1);return new c.Promise(function(a,c){b.apply(null,d.concat(function(b,d){b?c(b):a(d)}))})},c.promises({api:c.promises}),d.prototype=c.promises({version:"json-ld-1.0"}),d.prototype.toString=function(){return this instanceof d?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},c.JsonLdProcessor=d;var ja=!!Object.defineProperty;if(ja)try{Object.defineProperty({},"x",{})}catch(a){ja=!1}ja&&(Object.defineProperty(d,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(d.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:d})),h&&"undefined"==typeof e.JsonLdProcessor&&(ja?Object.defineProperty(e,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:d}):e.JsonLdProcessor=d);var ka="function"==typeof setImmediate&&setImmediate,la=ka?function(a){ka(a)}:function(a){setTimeout(a,0)};"object"==typeof b&&"function"==typeof b.nextTick?c.nextTick=b.nextTick:c.nextTick=la,c.setImmediate=ka?la:c.nextTick,c.parseLinkHeader=function(a){for(var b={},c=a.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),d=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,e=0;e<c.length;++e){var f=c[e].match(d);if(f){for(var g={target:f[1]},h=f[2],i=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;f=i.exec(h);)g[f[1]]=void 0===f[2]?f[3]:f[2];var j=g.rel||"";O(b[j])?b[j].push(g):j in b?b[j]=[b[j],g]:b[j]=g}}return b},c.RequestQueue=function(){this._requests={}},c.RequestQueue.prototype.wrapLoader=function(a){return this._loader=a,this._usePromise=1===a.length,this.add.bind(this)},c.RequestQueue.prototype.add=function(a,b){var d=this;if(!b&&!d._usePromise)throw new Error("callback must be specified.");return d._usePromise?new c.Promise(function(b,c){var e=d._requests[a];e||(e=d._requests[a]=d._loader(a).then(function(b){return delete d._requests[a],b}).catch(function(b){throw delete d._requests[a],b})),e.then(function(a){b(a)}).catch(function(a){c(a)})}):void(a in d._requests?d._requests[a].push(b):(d._requests[a]=[b],d._loader(a,function(b,c){var e=d._requests[a];delete d._requests[a];for(var f=0;f<e.length;++f)e[f](b,c)})))},c.DocumentCache=function(a){this.order=[],this.cache={},this.size=a||50,this.expires=3e4},c.DocumentCache.prototype.get=function(a){if(a in this.cache){var b=this.cache[a];if(b.expires>=+new Date)return b.ctx;delete this.cache[a],this.order.splice(this.order.indexOf(a),1)}return null},c.DocumentCache.prototype.set=function(a,b){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(a),this.cache[a]={ctx:b,expires:+new Date+this.expires}},c.ActiveContextCache=function(a){this.order=[],this.cache={},this.size=a||100},c.ActiveContextCache.prototype.get=function(a,b){var c=JSON.stringify(a),d=JSON.stringify(b),e=this.cache[c];return e&&d in e?e[d]:null},c.ActiveContextCache.prototype.set=function(a,b,c){if(this.order.length===this.size){var d=this.order.shift();delete this.cache[d.activeCtx][d.localCtx]}var e=JSON.stringify(a),f=JSON.stringify(b);this.order.push({activeCtx:e,localCtx:f}),e in this.cache||(this.cache[e]={}),this.cache[e][f]=aa(c)},c.cache={activeCtx:new c.ActiveContextCache},c.documentLoaders={},c.documentLoaders.jquery=function(a,b){function d(d,e){return 0!==d.indexOf("http:")&&0!==d.indexOf("https:")?e(new Fa('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):b.secure&&0!==d.indexOf("https")?e(new Fa('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):void a.ajax({url:d,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(a,b,f){var g={contextUrl:null,documentUrl:d,document:a},h=f.getResponseHeader("Content-Type"),i=f.getResponseHeader("Link");if(i&&"application/ld+json"!==h){if(i=c.parseLinkHeader(i)[Da],O(i))return e(new Fa("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d}),g);i&&(g.contextUrl=i.target)}e(null,g)},error:function(a,b,c){e(new Fa("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d,cause:c}),{contextUrl:null,documentUrl:d,document:null})}})}b=b||{};var e=new c.RequestQueue,f="usePromise"in b?b.usePromise:"undefined"!=typeof Promise;return f?e.wrapLoader(function(a){return c.promisify(d,a)}):e.wrapLoader(d)},c.documentLoaders.node=function(b){function d(a,j,k){function l(b,e,g){if(m={contextUrl:null,documentUrl:a,document:g||null},b)return k(new Fa("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:b}),m);var h=i.STATUS_CODES[e.statusCode];if(e.statusCode>=400)return k(new Fa("URL could not be dereferenced: "+h,"jsonld.InvalidUrl",{code:"loading document failed",url:a,httpStatusCode:e.statusCode}),m);if(e.headers.link&&"application/ld+json"!==e.headers["content-type"]){var l=c.parseLinkHeader(e.headers.link)[Da];if(O(l))return k(new Fa("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a}),m);l&&(m.contextUrl=l.target)}return e.statusCode>=300&&e.statusCode<400&&e.headers.location?j.length===f?k(new Fa("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:a,httpStatusCode:e.statusCode,redirects:j}),m):j.indexOf(a)!==-1?k(new Fa("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:a,httpStatusCode:e.statusCode,redirects:j}),m):(j.push(a),d(e.headers.location,j,k)):(j.push(a),void k(b,m))}if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))return k(new Fa('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null});if(b.secure&&0!==a.indexOf("https"))return k(new Fa('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null});var m=null;if(null!==m)return k(null,m);var n={Accept:h};for(var o in b.headers)n[o]=b.headers[o];g({url:a,headers:n,strictSSL:e,followRedirect:!1},l)}b=b||{};var e=!("strictSSL"in b)||b.strictSSL,f="maxRedirects"in b?b.maxRedirects:-1,g="request"in b?b.request:a("b0"),h="application/ld+json, application/json",i=a("b0"),j=new c.RequestQueue;if(b.usePromise)return j.wrapLoader(function(a){return c.promisify(d,a,[])});var k=b.headers||{};if("Accept"in k||"accept"in k)throw new RangeError('Accept header may not be specified as an option; only "'+h+'" is supported.');return j.wrapLoader(function(a,b){d(a,[],b)})},c.documentLoaders.xhr=function(a){function b(b,e){if(0!==b.indexOf("http:")&&0!==b.indexOf("https:"))return e(new Fa('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:b}),{contextUrl:null,documentUrl:b,document:null});if(a.secure&&0!==b.indexOf("https"))return e(new Fa('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:b}),{contextUrl:null,documentUrl:b,document:null});var f=a.xhr||XMLHttpRequest,g=new f;g.onload=function(){if(g.status>=400)return e(new Fa("URL could not be dereferenced: "+g.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:b,httpStatusCode:g.status}),{contextUrl:null,documentUrl:b,document:null});var a,f={contextUrl:null,documentUrl:b,document:g.response},h=g.getResponseHeader("Content-Type");if(d.test(g.getAllResponseHeaders())&&(a=g.getResponseHeader("Link")),a&&"application/ld+json"!==h){if(a=c.parseLinkHeader(a)[Da],O(a))return e(new Fa("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:b}),f);a&&(f.contextUrl=a.target)}e(null,f)},g.onerror=function(){e(new Fa("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:b}),{contextUrl:null,documentUrl:b,document:null})},g.open("GET",b,!0),g.setRequestHeader("Accept","application/ld+json, application/json"),g.send()}a=a||{};var d=/(^|(\r\n))link:/i,e=new c.RequestQueue,f="usePromise"in a?a.usePromise:"undefined"!=typeof Promise;return f?e.wrapLoader(function(a){return c.promisify(b,a)}):e.wrapLoader(b)},c.useDocumentLoader=function(a){if(!(a in c.documentLoaders))throw new Fa('Unknown document loader type: "'+a+'"',"jsonld.UnknownDocumentLoader",{type:a});c.documentLoader=c.documentLoaders[a].apply(c,Array.prototype.slice.call(arguments,1))},c.processContext=function(a,b){var d={},e=2;arguments.length>3&&(d=arguments[2]||{},e+=1);var f=arguments[e];return"base"in d||(d.base=""),"documentLoader"in d||(d.documentLoader=c.loadDocument),
null===b?f(null,K(d)):(b=aa(b),M(b)&&"@context"in b||(b={"@context":b}),void ca(b,d,function(b,c){if(b)return f(b);try{c=(new Ga).processContext(a,c,d)}catch(a){return f(a)}f(null,c)}))},c.hasProperty=function(a,b){var c=!1;if(b in a){var d=a[b];c=!O(d)||d.length>0}return c},c.hasValue=function(a,b,d){var e=!1;if(c.hasProperty(a,b)){var f=a[b],g=Z(f);if(O(f)||g){g&&(f=f["@list"]);for(var h=0;h<f.length;++h)if(c.compareValues(d,f[h])){e=!0;break}}else O(d)||(e=c.compareValues(d,f))}return e},c.addValue=function(a,b,d,e){if(e=e||{},"propertyIsArray"in e||(e.propertyIsArray=!1),"allowDuplicate"in e||(e.allowDuplicate=!0),O(d)){0!==d.length||!e.propertyIsArray||b in a||(a[b]=[]);for(var f=0;f<d.length;++f)c.addValue(a,b,d[f],e)}else if(b in a){var g=!e.allowDuplicate&&c.hasValue(a,b,d);O(a[b])||g&&!e.propertyIsArray||(a[b]=[a[b]]),g||a[b].push(d)}else a[b]=e.propertyIsArray?[d]:d},c.getValues=function(a,b){var c=a[b]||[];return O(c)||(c=[c]),c},c.removeProperty=function(a,b){delete a[b]},c.removeValue=function(a,b,d,e){e=e||{},"propertyIsArray"in e||(e.propertyIsArray=!1);var f=c.getValues(a,b).filter(function(a){return!c.compareValues(a,d)});0===f.length?c.removeProperty(a,b):1!==f.length||e.propertyIsArray?a[b]=f:a[b]=f[0]},c.compareValues=function(a,b){return a===b||(!(!Y(a)||!Y(b)||a["@value"]!==b["@value"]||a["@type"]!==b["@type"]||a["@language"]!==b["@language"]||a["@index"]!==b["@index"])||!!(M(a)&&"@id"in a&&M(b)&&"@id"in b)&&a["@id"]===b["@id"])},c.getContextValue=function(a,b,c){var d=null;if(null===b)return d;if("@language"===c&&c in a&&(d=a[c]),a.mappings[b]){var e=a.mappings[b];V(c)?d=e:c in e&&(d=e[c])}return d};var ma={};if(c.registerRDFParser=function(a,b){ma[a]=b},c.unregisterRDFParser=function(a){delete ma[a]},g){if("undefined"==typeof na)var na=null;if("undefined"==typeof oa)var oa={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var pa="http://www.w3.org/2001/XMLSchema#boolean",qa="http://www.w3.org/2001/XMLSchema#double",ra="http://www.w3.org/2001/XMLSchema#integer",sa="http://www.w3.org/2001/XMLSchema#string",ta="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ua=ta+"List",va=ta+"first",wa=ta+"rest",xa=ta+"nil",ya=ta+"type",za=ta+"PlainLiteral",Aa=ta+"XMLLiteral",Ba=ta+"object",Ca=ta+"langString",Da="http://www.w3.org/ns/json-ld#context",Ea=10,Fa=function(a,b,c){g?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=b||"jsonld.Error",this.message=a||"An unspecified JSON-LD error occurred.",this.details=c||{}};g?a("b0").inherits(Fa,Error):"undefined"!=typeof Error&&(Fa.prototype=new Error);var Ga=function(){};Ga.prototype.compact=function(a,b,d,e){if(O(d)){for(var f=[],g=0;g<d.length;++g){var h=this.compact(a,b,d[g],e);null!==h&&f.push(h)}if(e.compactArrays&&1===f.length){var i=c.getContextValue(a,b,"@container");null===i&&(f=f[0])}return f}if(M(d)){if(e.link&&"@id"in d&&d["@id"]in e.link)for(var j=e.link[d["@id"]],g=0;g<j.length;++g)if(j[g].expanded===d)return j[g].compacted;if(Y(d)||X(d)){var f=F(a,b,d);return e.link&&X(d)&&(d["@id"]in e.link||(e.link[d["@id"]]=[]),e.link[d["@id"]].push({expanded:d,compacted:f})),f}var k="@reverse"===b,f={};e.link&&"@id"in d&&(d["@id"]in e.link||(e.link[d["@id"]]=[]),e.link[d["@id"]].push({expanded:d,compacted:f}));for(var l=Object.keys(d).sort(),m=0;m<l.length;++m){var n=l[m],o=d[n];if("@id"!==n&&"@type"!==n)if("@reverse"!==n)if("@index"!==n)if("@graph"!==n&&"@list"!==n&&L(n)){var p=E(a,n);c.addValue(f,p,o)}else{if(0===o.length){var q=E(a,n,o,{vocab:!0},k);c.addValue(f,q,o,{propertyIsArray:!0})}for(var r=0;r<o.length;++r){var s=o[r],q=E(a,n,s,{vocab:!0},k),i=c.getContextValue(a,q,"@container"),t=Z(s),u=null;t&&(u=s["@list"]);var v=this.compact(a,q,t?u:s,e);if(t)if(O(v)||(v=[v]),"@list"!==i){var w={};w[E(a,"@list")]=v,v=w,"@index"in s&&(v[E(a,"@index")]=s["@index"])}else if(q in f)throw new Fa('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===i||"@index"===i){var x;q in f?x=f[q]:f[q]=x={},"@language"===i&&Y(v)&&(v=v["@value"]),c.addValue(x,s[i],v)}else{var y=!e.compactArrays||"@set"===i||"@list"===i||O(v)&&0===v.length||"@list"===n||"@graph"===n;c.addValue(f,q,v,{propertyIsArray:y})}}}else{var i=c.getContextValue(a,b,"@container");if("@index"===i)continue;var p=E(a,n);c.addValue(f,p,o)}else{var z=this.compact(a,"@reverse",o,e);for(var A in z)if(a.mappings[A]&&a.mappings[A].reverse){var B=z[A],i=c.getContextValue(a,A,"@container"),C="@set"===i||!e.compactArrays;c.addValue(f,A,B,{propertyIsArray:C}),delete z[A]}if(Object.keys(z).length>0){var p=E(a,n);c.addValue(f,p,z)}}else{var z;if(Q(o))z=E(a,o,null,{vocab:"@type"===n});else{z=[];for(var r=0;r<o.length;++r)z.push(E(a,o[r],null,{vocab:!0}))}var p=E(a,n),y=O(z)&&0===o.length;c.addValue(f,p,z,{propertyIsArray:y})}}return f}return d},Ga.prototype.expand=function(a,b,d,e,f){var g=this;if(null===d||void 0===d)return null;if(!O(d)&&!M(d))return f||null!==b&&"@graph"!==H(a,b,{vocab:!0})?k(a,b,d):null;if(O(d)){var h=[],j=c.getContextValue(a,b,"@container");f=f||"@list"===j;for(var l=0;l<d.length;++l){var m=g.expand(a,b,d[l],e);if(f&&(O(m)||Z(m)))throw new Fa("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==m&&(O(m)?h=h.concat(m):h.push(m))}return h}"@context"in d&&(a=g.processContext(a,d["@context"],e));for(var n=H(a,b,{vocab:!0}),h={},o=Object.keys(d).sort(),p=0;p<o.length;++p){var q,r=o[p],s=d[r];if("@context"!==r){var t=H(a,r,{vocab:!0});if(null!==t&&(_(t)||L(t))){if(L(t)){if("@reverse"===n)throw new Fa("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:s});if(t in h)throw new Fa("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:t})}if("@id"===t&&!Q(s)){if(!e.isFrame)throw new Fa('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:s});if(!M(s))throw new Fa('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:s})}if("@type"===t&&P(s),"@graph"===t&&!M(s)&&!O(s))throw new Fa('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:s});if("@value"===t&&(M(s)||O(s)))throw new Fa('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:s});if("@language"===t){if(null===s)continue;if(!Q(s))throw new Fa('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:s});s=s.toLowerCase()}if("@index"===t&&!Q(s))throw new Fa('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:s});if("@reverse"!==t){var j=c.getContextValue(a,r,"@container");if("@language"===j&&M(s))q=i(s);else if("@index"===j&&M(s))q=function(b){for(var c=[],d=Object.keys(s).sort(),f=0;f<d.length;++f){var h=d[f],i=s[h];O(i)||(i=[i]),i=g.expand(a,b,i,e,!1);for(var j=0;j<i.length;++j){var k=i[j];"@index"in k||(k["@index"]=h),c.push(k)}}return c}(r);else{var u="@list"===t;if(u||"@set"===t){var v=b;if(u&&"@graph"===n&&(v=null),q=g.expand(a,v,s,e,u),u&&Z(q))throw new Fa("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else q=g.expand(a,r,s,e,!1)}if(null!==q||"@value"===t)if("@list"===t||Z(q)||"@list"!==j||(q=O(q)?q:[q],q={"@list":q}),a.mappings[r]&&a.mappings[r].reverse){var w=h["@reverse"]=h["@reverse"]||{};O(q)||(q=[q]);for(var x=0;x<q.length;++x){var y=q[x];if(Y(y)||Z(y))throw new Fa('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});c.addValue(w,t,y,{propertyIsArray:!0})}}else{var z=["@index","@id","@type","@value","@language"].indexOf(t)===-1;c.addValue(h,t,q,{propertyIsArray:z})}}else{if(!M(s))throw new Fa('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:s});if(q=g.expand(a,"@reverse",s,e),"@reverse"in q)for(var A in q["@reverse"])c.addValue(h,A,q["@reverse"][A],{propertyIsArray:!0});var w=h["@reverse"]||null;for(var A in q)if("@reverse"!==A){null===w&&(w=h["@reverse"]={}),c.addValue(w,A,[],{propertyIsArray:!0});for(var B=q[A],x=0;x<B.length;++x){var y=B[x];if(Y(y)||Z(y))throw new Fa('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});c.addValue(w,A,y,{propertyIsArray:!0})}}}}}}o=Object.keys(h);var C=o.length;if("@value"in h){if("@type"in h&&"@language"in h)throw new Fa('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});var D=C-1;if("@type"in h&&(D-=1),"@index"in h&&(D-=1),"@language"in h&&(D-=1),0!==D)throw new Fa('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});if(null===h["@value"])h=null;else{if("@language"in h&&!Q(h["@value"]))throw new Fa("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:h});if("@type"in h&&(!_(h["@type"])||0===h["@type"].indexOf("_:")))throw new Fa('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:h})}}else if("@type"in h&&!O(h["@type"]))h["@type"]=[h["@type"]];else if("@set"in h||"@list"in h){if(C>1&&!(2===C&&"@index"in h))throw new Fa('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:h});"@set"in h&&(h=h["@set"],o=Object.keys(h),C=o.length)}else 1===C&&"@language"in h&&(h=null);return!M(h)||e.keepFreeFloatingNodes||f||null!==b&&"@graph"!==n||(0===C||"@value"in h||"@list"in h||1===C&&"@id"in h)&&(h=null),h},Ga.prototype.createNodeMap=function(a,b){b=b||{};var c=b.namer||b.issuer||new ha("_:b"),d={"@default":{}};return q(a,d,"@default",c),r(d)},Ga.prototype.flatten=function(a){for(var b=this.createNodeMap(a),c=[],d=Object.keys(b).sort(),e=0;e<d.length;++e){var f=b[d[e]];X(f)||c.push(f)}return c},Ga.prototype.frame=function(a,b,c){var d={options:c,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},e=new ha("_:b");q(a,d.graphs,"@merged",e),d.subjects=d.graphs["@merged"];var f=[];return s(d,Object.keys(d.subjects).sort(),b,f,null),f},Ga.prototype.normalize=function(a,b,c){return"URDNA2015"===b.algorithm?new Ha(b).main(a,c):"URGNA2012"===b.algorithm?new Ia(b).main(a,c):void c(new Error("Invalid RDF Dataset Normalization algorithm: "+b.algorithm))},Ga.prototype.fromRDF=function(a,b,d){var e={},f={"@default":e},g={};for(var h in a){var i=a[h];h in f||(f[h]={}),"@default"===h||h in e||(e[h]={"@id":h});for(var j=f[h],k=0;k<i.length;++k){var l=i[k],m=l.subject.value,n=l.predicate.value,p=l.object;m in j||(j[m]={"@id":m});var q=j[m],r="IRI"===p.type||"blank node"===p.type;if(!r||p.value in j||(j[p.value]={"@id":p.value}),n!==ya||b.useRdfType||!r){var s=o(p,b.useNativeTypes);if(c.addValue(q,n,s,{propertyIsArray:!0}),r)if(p.value===xa){var t=j[p.value];"usages"in t||(t.usages=[]),t.usages.push({node:q,property:n,value:s})}else p.value in g?g[p.value]=!1:g[p.value]={node:q,property:n,value:s}}else c.addValue(q,"@type",p.value,{propertyIsArray:!0})}}for(var h in f){var u=f[h];if(xa in u){for(var v=u[xa],w=0;w<v.usages.length;++w){for(var x=v.usages[w],q=x.node,y=x.property,z=x.value,A=[],B=[],C=Object.keys(q).length;y===wa&&M(g[q["@id"]])&&O(q[va])&&1===q[va].length&&O(q[wa])&&1===q[wa].length&&(3===C||4===C&&O(q["@type"])&&1===q["@type"].length&&q["@type"][0]===ua)&&(A.push(q[va][0]),B.push(q["@id"]),x=g[q["@id"]],q=x.node,y=x.property,z=x.value,C=Object.keys(q).length,0===q["@id"].indexOf("_:")););if(y===va){if(q["@id"]===xa)continue;z=u[z["@id"]][wa][0],A.pop(),B.pop()}delete z["@id"],z["@list"]=A.reverse();for(var D=0;D<B.length;++D)delete u[B[D]]}delete v.usages}}for(var E=[],F=Object.keys(e).sort(),w=0;w<F.length;++w){var G=F[w],q=e[G];if(G in f)for(var i=q["@graph"]=[],u=f[G],H=Object.keys(u).sort(),I=0;I<H.length;++I){var J=u[H[I]];X(J)||i.push(J)}X(q)||E.push(q)}d(null,E)},Ga.prototype.toRDF=function(a,b){var c=new ha("_:b"),d={"@default":{}};q(a,d,"@default",c);for(var e={},f=Object.keys(d).sort(),g=0;g<f.length;++g){var h=f[g];("@default"===h||_(h))&&(e[h]=l(d[h],c,b))}return e},Ga.prototype.processContext=function(a,b,d){M(b)&&"@context"in b&&O(b["@context"])&&(b=b["@context"]);var e=O(b)?b:[b];if(0===e.length)return a.clone();for(var f=a,g=0;g<e.length;++g){var h=e[g];if(null!==h){if(M(h)&&"@context"in h&&(h=h["@context"]),!M(h))throw new Fa("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:h});if(c.cache.activeCtx){var i=c.cache.activeCtx.get(a,h);if(i){f=a=i;continue}}a=f,f=f.clone();var j={};if("@base"in h){var k=h["@base"];if(null===k)k=null;else{if(!Q(k))throw new Fa('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h});if(""!==k&&!_(k))throw new Fa('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h})}null!==k&&(k=c.url.parse(k||"")),f["@base"]=k,j["@base"]=!0}if("@vocab"in h){var l=h["@vocab"];if(null===l)delete f["@vocab"];else{if(!Q(l))throw new Fa('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});if(!_(l))throw new Fa('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});f["@vocab"]=l}j["@vocab"]=!0}if("@language"in h){var l=h["@language"];if(null===l)delete f["@language"];else{if(!Q(l))throw new Fa('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:h});f["@language"]=l.toLowerCase()}j["@language"]=!0}for(var m in h)G(f,h,m,j);c.cache.activeCtx&&c.cache.activeCtx.set(a,h,f)}else f=a=K(d)}return f};var Ha=function(){var a={subject:"s",object:"o",name:"g"},b=function(a){a=a||{},this.name="URDNA2015",this.options=a,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new ha("_:c14n"),this.quads=[],this.schedule={},"maxCallStackDepth"in a?this.schedule.MAX_DEPTH=a.maxCallStackDepth:this.schedule.MAX_DEPTH=500,"maxTotalCallStackDepth"in a?this.schedule.MAX_TOTAL_DEPTH=a.maxCallStackDepth:this.schedule.MAX_TOTAL_DEPTH=4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,"timeSlice"in a?this.schedule.timeSlice=a.timeSlice:this.schedule.timeSlice=10};return b.prototype.doWork=function(a,b){var d=this.schedule;return d.totalDepth>=d.MAX_TOTAL_DEPTH?b(new Error("Maximum total call stack depth exceeded; normalization aborting.")):void function e(){if(d.depth===d.MAX_DEPTH)return d.depth=0,d.running=!1,c.nextTick(e);var f=(new Date).getTime();return d.running||(d.start=(new Date).getTime(),d.deadline=d.start+d.timeSlice),f<d.deadline?(d.running=!0,d.depth++,d.totalDepth++,a(function(a,c){d.depth--,d.totalDepth--,b(a,c)})):(d.depth=0,d.running=!1,void c.setImmediate(e))}()},b.prototype.forEach=function(a,b,c){var d,e,f=this,g=0;if(O(a))e=a.length,d=function(){return g!==e&&(d.value=a[g++],d.key=g,!0)};else{var h=Object.keys(a);e=h.length,d=function(){return g!==e&&(d.key=h[g++],d.value=a[d.key],!0)}}!function a(e,g){return e?c(e):d()?f.doWork(function(){b(d.value,d.key,a)}):void c()}()},b.prototype.waterfall=function(a,b){var c=this;c.forEach(a,function(a,b,d){c.doWork(a,d)},b)},b.prototype.whilst=function(a,b,c){var d=this;!function e(f){return f?c(f):a()?void d.doWork(b,e):c()}()},b.prototype.main=function(a,b){var c=this;c.schedule.start=(new Date).getTime();var d;if(c.options.format&&"application/nquads"!==c.options.format)return b(new Fa("Unknown output format.","jsonld.UnknownFormat",{format:c.options.format}));var e={};c.waterfall([function(b){c.forEach(a,function(a,b,d){"@default"===b&&(b=null),c.forEach(a,function(a,d,f){null!==b&&(0===b.indexOf("_:")?a.name={type:"blank node",value:b}:a.name={type:"IRI",value:b}),c.quads.push(a),c.forEachComponent(a,function(b){if("blank node"===b.type){var d=b.value;d in c.blankNodeInfo?c.blankNodeInfo[d].quads.push(a):(e[d]=!0,c.blankNodeInfo[d]={quads:[a]})}}),f()},d)},b)},function(a){var b=!0;c.whilst(function(){return b},function(a){b=!1,c.hashToBlankNodes={},c.waterfall([function(a){c.forEach(e,function(a,b,d){c.hashFirstDegreeQuads(b,function(a,e){return a?d(a):(e in c.hashToBlankNodes?c.hashToBlankNodes[e].push(b):c.hashToBlankNodes[e]=[b],void d())})},a)},function(a){var d=Object.keys(c.hashToBlankNodes).sort();c.forEach(d,function(a,d,f){var g=c.hashToBlankNodes[a];if(g.length>1)return f();var h=g[0];c.canonicalIssuer.getId(h),delete e[h],delete c.hashToBlankNodes[a],b=!0,f()},a)}],a)},a)},function(a){var b=Object.keys(c.hashToBlankNodes).sort();c.forEach(b,function(a,b,d){var e=[],f=c.hashToBlankNodes[a];c.waterfall([function(a){c.forEach(f,function(a,b,d){if(c.canonicalIssuer.hasId(a))return d();var f=new ha("_:b");f.getId(a),c.hashNDegreeQuads(a,f,function(a,b){return a?d(a):(e.push(b),void d())})},a)},function(a){e.sort(function(a,b){return a.hash<b.hash?-1:a.hash>b.hash?1:0}),c.forEach(e,function(a,b,d){for(var e in a.issuer.existing)c.canonicalIssuer.getId(e);d()},a)}],d)},a)},function(a){var b=[];c.waterfall([function(a){c.forEach(c.quads,function(a,d,e){c.forEachComponent(a,function(a){"blank node"===a.type&&0!==a.value.indexOf(c.canonicalIssuer.prefix)&&(a.value=c.canonicalIssuer.getId(a.value))}),b.push(fa(a)),e()},a)},function(a){return b.sort(),"application/nquads"===c.options.format?(d=b.join(""),a()):(d=da(b.join("")),void a())}],a)}],function(a){b(a,d)})},b.prototype.hashFirstDegreeQuads=function(a,b){var c=this,d=c.blankNodeInfo[a];if("hash"in d)return b(null,d.hash);var e=[],f=d.quads;c.forEach(f,function(b,d,f){var g={predicate:b.predicate};c.forEachComponent(b,function(b,d){g[d]=c.modifyFirstDegreeComponent(a,b,d)}),e.push(fa(g)),f()},function(a){return a?b(a):(e.sort(),d.hash=Ka.hashNQuads(c.name,e),void b(null,d.hash))})},b.prototype.modifyFirstDegreeComponent=function(a,b){return"blank node"!==b.type?b:(b=aa(b),b.value=b.value===a?"_:a":"_:z",b)},b.prototype.hashRelatedBlankNode=function(a,b,c,d,e){var f,g=this;g.waterfall([function(b){return g.canonicalIssuer.hasId(a)?(f=g.canonicalIssuer.getId(a),b()):c.hasId(a)?(f=c.getId(a),b()):void g.hashFirstDegreeQuads(a,function(a,c){return a?b(a):(f=c,void b())})}],function(a){if(a)return e(a);var c=new Ka(g.name);return c.update(d),"g"!==d&&c.update(g.getRelatedPredicate(b)),c.update(f),e(null,c.digest())})},b.prototype.getRelatedPredicate=function(a){return"<"+a.predicate.value+">"},b.prototype.hashNDegreeQuads=function(a,b,c){var d,e=this,f=new Ka(e.name);e.waterfall([function(c){e.createHashToRelated(a,b,function(a,b){return a?c(a):(d=b,void c())})},function(a){var c=Object.keys(d).sort();e.forEach(c,function(a,c,g){f.update(a);var h,i="",j=new Ja(d[a]);e.whilst(function(){return j.hasNext()},function(a){var c=j.next(),d=b.clone(),f="",g=[];e.waterfall([function(b){e.forEach(c,function(b,c,h){return e.canonicalIssuer.hasId(b)?f+=e.canonicalIssuer.getId(b):(d.hasId(b)||g.push(b),f+=d.getId(b)),0!==i.length&&f.length>=i.length&&f>i?a():void h()},b)},function(b){e.forEach(g,function(b,c,g){e.hashNDegreeQuads(b,d,function(c,e){return c?g(c):(f+=d.getId(b),f+="<"+e.hash+">",d=e.issuer,0!==i.length&&f.length>=i.length&&f>i?a():void g())})},b)},function(a){(0===i.length||f<i)&&(i=f,h=d),a()}],a)},function(a){return a?g(a):(f.update(i),b=h,void g())})},a)}],function(a){c(a,{hash:f.digest(),issuer:b})})},b.prototype.createHashToRelated=function(b,c,d){var e=this,f={},g=e.blankNodeInfo[b].quads;e.forEach(g,function(d,g,h){e.forEach(d,function(g,h,i){if("predicate"===h||"blank node"!==g.type||g.value===b)return i();var j=g.value,k=a[h];e.hashRelatedBlankNode(j,d,c,k,function(a,b){return a?i(a):(b in f?f[b].push(j):f[b]=[j],void i())})},h)},function(a){d(a,f)})},b.prototype.forEachComponent=function(a,b){for(var c in a)"predicate"!==c&&b(a[c],c,a)},b}(),Ia=function(){var a=function(a){Ha.call(this,a),this.name="URGNA2012"};return a.prototype=new Ha,a.prototype.modifyFirstDegreeComponent=function(a,b,c){return"blank node"!==b.type?b:(b=aa(b),"name"===c?b.value="_:g":b.value=b.value===a?"_:a":"_:z",b)},a.prototype.getRelatedPredicate=function(a){return a.predicate.value},a.prototype.createHashToRelated=function(a,b,c){var d=this,e={},f=d.blankNodeInfo[a].quads;d.forEach(f,function(c,f,g){var h,i;if("blank node"===c.subject.type&&c.subject.value!==a)i=c.subject.value,h="p";else{if("blank node"!==c.object.type||c.object.value===a)return g();i=c.object.value,h="r"}d.hashRelatedBlankNode(i,c,b,h,function(a,b){b in e?e[b].push(i):e[b]=[i],g()})},function(a){c(a,e)})},a}();Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}),c.registerRDFParser("application/nquads",da),c.registerRDFParser("rdfa-api",ga),c.IdentifierIssuer=ha,c.UniqueNamer=ha,ha.prototype.clone=function(){var a=new ha(this.prefix);return a.counter=this.counter,a.existing=aa(this.existing),a},ha.prototype.getId=function(a){if(a&&a in this.existing)return this.existing[a];var b=this.prefix+this.counter;return this.counter+=1,a&&(this.existing[a]=b),b},ha.prototype.getName=ha.prototype.getName,ha.prototype.hasId=function(a){return a in this.existing},ha.prototype.isNamed=ha.prototype.hasId;var Ja=function(a){this.list=a.sort(),this.done=!1,this.left={};for(var b=0;b<a.length;++b)this.left[a[b]]=!0};Ja.prototype.hasNext=function(){return!this.done},Ja.prototype.next=function(){for(var a=this.list.slice(),b=null,c=0,d=this.list.length,e=0;e<d;++e){var f=this.list[e],g=this.left[f];(null===b||f>b)&&(g&&e>0&&f>this.list[e-1]||!g&&e<d-1&&f>this.list[e+1])&&(b=f,c=e)}if(null===b)this.done=!0;else{var h=this.left[b]?c-1:c+1;this.list[c]=this.list[h],this.list[h]=b;for(var e=0;e<d;++e)this.list[e]>b&&(this.left[this.list[e]]=!this.left[this.list[e]])}return a};var Ka=function(a){if(!(this instanceof Ka))return new Ka(a);if(["URDNA2015","URGNA2012"].indexOf(a)===-1)throw new Error("Invalid RDF Dataset Normalization algorithm: "+a);Ka._init.call(this,a)};if(Ka.hashNQuads=function(a,b){for(var c=new Ka(a),d=0;d<b.length;++d)c.update(b[d]);return c.digest()},function(b){if(b){var c=a("b0");return Ka._init=function(a){a="URDNA2015"===a?"sha256":"sha1",this.md=c.createHash(a)},Ka.prototype.update=function(a){return this.md.update(a,"utf8")},void(Ka.prototype.digest=function(){return this.md.digest("hex")})}Ka._init=function(a){a="URDNA2015"===a?new f.Algorithm:new e.Algorithm,this.md=new d(a)},Ka.prototype.update=function(a){return this.md.update(a)},Ka.prototype.digest=function(){return this.md.digest().toHex()};var d=function(a){if(!(this instanceof d))return new d(a);if(this._algorithm=a,!d._padding||d._padding.length<this._algorithm.blockSize){d._padding=String.fromCharCode(128);for(var b=String.fromCharCode(0),c=64;c>0;)1&c&&(d._padding+=b),c>>>=1,c>0&&(b+=b)}this.start()};d.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var a=this._algorithm.messageLengthSize/4,b=0;b<a;++b)this.fullMessageLength.push(0);return this._input=new d.ByteBuffer,this.state=this._algorithm.start(),this},d.prototype.update=function(a){a=new d.ByteBuffer(unescape(encodeURIComponent(a))),this.messageLength+=a.length();var b=a.length();b=[b/4294967296>>>0,b>>>0];for(var c=this.fullMessageLength.length-1;c>=0;--c)this.fullMessageLength[c]+=b[1],b[1]=b[0]+(this.fullMessageLength[c]/4294967296>>>0),this.fullMessageLength[c]=this.fullMessageLength[c]>>>0,b[0]=b[1]/4294967296>>>0;for(this._input.putBytes(a.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},d.prototype.digest=function(){var a=new d.ByteBuffer;a.putBytes(this._input.bytes());var b=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,c=b&this._algorithm.blockSize-1;a.putBytes(d._padding.substr(0,this._algorithm.blockSize-c));for(var e=new d.ByteBuffer,f=0;f<this.fullMessageLength.length;++f)e.putInt32(this.fullMessageLength[f]<<3|this.fullMessageLength[f+1]>>>28);this._algorithm.writeMessageLength(a,e);var g=this._algorithm.digest(this.state.copy(),a),h=new d.ByteBuffer;return g.write(h),h},d.ByteBuffer=function(a){"string"==typeof a?this.data=a:this.data="",this.read=0},d.ByteBuffer.prototype.putInt32=function(a){this.data+=String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a)},d.ByteBuffer.prototype.getInt32=function(){var a=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,a},d.ByteBuffer.prototype.putBytes=function(a){this.data+=a},d.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},d.ByteBuffer.prototype.length=function(){return this.data.length-this.read},d.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},d.ByteBuffer.prototype.toHex=function(){for(var a="",b=this.read;b<this.data.length;++b){var c=this.data.charCodeAt(b);c<16&&(a+="0"),a+=c.toString(16)}return a};var e={_w:null};e.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},e.Algorithm.prototype.start=function(){return e._w||(e._w=new Array(80)),e._createState()},e.Algorithm.prototype.writeMessageLength=function(a,b){a.putBytes(b.bytes())},e.Algorithm.prototype.digest=function(a,b){for(var c,d,f,g,h,i,j,k,l=b.length(),m=e._w;l>=64;){for(d=a.h0,f=a.h1,g=a.h2,h=a.h3,i=a.h4,k=0;k<16;++k)c=b.getInt32(),m[k]=c,j=h^f&(g^h),c=(d<<5|d>>>27)+j+i+1518500249+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<20;++k)c=m[k-3]^m[k-8]^m[k-14]^m[k-16],c=c<<1|c>>>31,m[k]=c,j=h^f&(g^h),c=(d<<5|d>>>27)+j+i+1518500249+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<32;++k)c=m[k-3]^m[k-8]^m[k-14]^m[k-16],c=c<<1|c>>>31,m[k]=c,j=f^g^h,c=(d<<5|d>>>27)+j+i+1859775393+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<40;++k)c=m[k-6]^m[k-16]^m[k-28]^m[k-32],c=c<<2|c>>>30,m[k]=c,j=f^g^h,c=(d<<5|d>>>27)+j+i+1859775393+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<60;++k)c=m[k-6]^m[k-16]^m[k-28]^m[k-32],c=c<<2|c>>>30,m[k]=c,j=f&g|h&(f^g),c=(d<<5|d>>>27)+j+i+2400959708+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<80;++k)c=m[k-6]^m[k-16]^m[k-28]^m[k-32],c=c<<2|c>>>30,m[k]=c,j=f^g^h,c=(d<<5|d>>>27)+j+i+3395469782+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;a.h0=a.h0+d|0,a.h1=a.h1+f|0,a.h2=a.h2+g|0,a.h3=a.h3+h|0,a.h4=a.h4+i|0,l-=64}return a},e._createState=function(){var a={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return a.copy=function(){var b=e._createState();return b.h0=a.h0,b.h1=a.h1,b.h2=a.h2,b.h3=a.h3,b.h4=a.h4,b},a.write=function(b){b.putInt32(a.h0),b.putInt32(a.h1),b.putInt32(a.h2),b.putInt32(a.h3),b.putInt32(a.h4)},a};var f={_k:null,_w:null};f.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},f.Algorithm.prototype.start=function(){return f._k||f._init(),f._createState()},f.Algorithm.prototype.writeMessageLength=function(a,b){a.putBytes(b.bytes())},f.Algorithm.prototype.digest=function(a,b){for(var c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s=b.length(),t=f._k,u=f._w;s>=64;){for(j=0;j<16;++j)u[j]=b.getInt32();for(;j<64;++j)c=u[j-2],c=(c>>>17|c<<15)^(c>>>19|c<<13)^c>>>10,d=u[j-15],d=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,u[j]=c+u[j-7]+d+u[j-16]|0;for(k=a.h0,l=a.h1,m=a.h2,n=a.h3,o=a.h4,p=a.h5,q=a.h6,r=a.h7,j=0;j<64;++j)g=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),h=q^o&(p^q),e=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),i=k&l|m&(k^l),c=r+g+h+t[j]+u[j],d=e+i,r=q,q=p,p=o,o=n+c|0,n=m,m=l,l=k,k=c+d|0;a.h0=a.h0+k|0,a.h1=a.h1+l|0,a.h2=a.h2+m|0,a.h3=a.h3+n|0,a.h4=a.h4+o|0,a.h5=a.h5+p|0,a.h6=a.h6+q|0,a.h7=a.h7+r|0,s-=64}return a},f._createState=function(){var a={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return a.copy=function(){var b=f._createState();return b.h0=a.h0,b.h1=a.h1,b.h2=a.h2,b.h3=a.h3,b.h4=a.h4,b.h5=a.h5,b.h6=a.h6,b.h7=a.h7,b},a.write=function(b){b.putInt32(a.h0),b.putInt32(a.h1),b.putInt32(a.h2),b.putInt32(a.h3),b.putInt32(a.h4),b.putInt32(a.h5),b.putInt32(a.h6),b.putInt32(a.h7)},a},f._init=function(){f._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f._w=new Array(64)}}(g),!na)var La=function(){na=a("b0").XMLSerializer};if(c.url={},c.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},c.url.parse=function(a,b){for(var d={},e=c.url.parsers[b||"full"],f=e.regex.exec(a),g=e.keys.length;g--;)d[e.keys[g]]=void 0===f[g]?null:f[g];return d.normalizedPath=ia(d.path,!!d.authority),d},g?c.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&c.useDocumentLoader("xhr"),g){c.use=function(b){switch(b){case"request":c.request=a("b0");break;default:throw new Fa("Unknown extension.","jsonld.UnknownExtension",{extension:b})}};var Ma={exports:{},filename:f};a("b0")(Ma,"version"),c.version=Ma.exports.version}return c},j=function(){return i(function(){return j()})};return!g&&"function"==typeof d&&d.amd?d([],function(){return i(j),j}):(i(j),"function"==typeof a&&"undefined"!=typeof c&&c.exports&&(c.exports=j),h&&("undefined"==typeof jsonld?jsonld=jsonldjs=j:jsonldjs=j)),j}()}(a("3b")),c.exports}),a.registerDynamic("64",["b1"],!0,function(a,b,c){this||self;return c.exports=a("b1"),c.exports}),a.register("50",["64","6e"],function(a){"use strict";function b(a){return f(a,["application/ld+json"]).then(function(b){return e.frame(b,h).then(function(a){return e.compact(a,a["@context"])}).then(function(c){return"Catalog"===c["@type"]?{compacted:c,
raw:b,frame:h}:e.frame(a,i).then(function(a){return e.compact(a,a["@context"])}).then(function(a){if("Dataset"!==a["@type"])throw new Error("No DCAT data found");return{compacted:a,raw:b,frame:i}})})})}function c(a){return b(a).then(function(a){var b=a.compacted,c=void 0;c="Catalog"===b["@type"]?b:{datasets:[b]};var e=!0,f=!1,g=void 0;try{for(var h,i=c.datasets[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){for(var j=h.value,k=["title","description"],l=0;l<k.length;l++){var m=k[l];d(j,m)}var n=!0,o=!1,p=void 0;try{for(var q,r=j.distributions[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){for(var s=q.value,t=["title","description"],u=0;u<t.length;u++){var m=t[u];d(s,m)}s.mediaType||("geojson"===s.format.toLowerCase()&&(s.mediaType="application/vnd.geo+json"),"wms"===s.format.toLowerCase()&&(s.mediaType="application/wms+xml")),s["dcat:downloadURL"]&&(s.downloadURL=s["dcat:downloadURL"]),s["dcat:accessURL"]&&(s.accessURL=s["dcat:accessURL"]),s.url=s.downloadURL||s.accessURL}}catch(a){o=!0,p=a}finally{try{!n&&r.return&&r.return()}finally{if(o)throw p}}}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}return delete c["@context"],c})}function d(a,b){if(a[b]&&(a[b+k]||(a[b+k]={}),a[b+k][j]=a[b]),a[b+k]){var c={};for(var d in a[b+k])c[d]=a[b+k][d];a[b]=c,delete a[b+k]}}var e,f,g,h,i,j,k;return a("loadDCATCatalog",b),a("loadCatalog",c),{setters:[function(a){e=a.promises},function(a){f=a.loadJSON}],execute:function(){g=[{"@language":"en",xsd:"http://www.w3.org/2001/XMLSchema#",dcat:"http://www.w3.org/ns/dcat#",dct:"http://purl.org/dc/terms/",locn:"http://www.w3.org/ns/locn#",foaf:"http://xmlns.com/foaf/0.1/",schema:"http://schema.org/",label:"http://www.w3.org/2000/01/rdf-schema#label",Catalog:"dcat:Catalog",datasets:{"@id":"dcat:dataset","@container":"@set"},Dataset:"dcat:Dataset",Location:"dct:Location",geometry:{"@id":"locn:geometry","@type":"gsp:wktLiteral"},gsp:"http://www.opengis.net/ont/geosparql#",PeriodOfTime:"dct:PeriodOfTime",startDate:{"@id":"schema:startDate","@type":"xsd:dateTime"},endDate:{"@id":"schema:endDate","@type":"xsd:dateTime"},title:{"@id":"dct:title","@container":"@language"},description:{"@id":"dct:description","@container":"@language"},theme:{"@id":"dcat:theme","@type":"@id"},issued:{"@id":"dct:issued","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},modified:{"@id":"dct:modified","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},landingPage:{"@id":"dcat:landingPage","@type":"@id"},homepage:{"@id":"foaf:homepage","@type":"@id"},spatial:"dct:spatial",temporal:"dct:temporal",keywords:{"@id":"dcat:keyword","@container":"@set"},ssn:"http://purl.oclc.org/NET/ssnx/ssn#",observedProperties:{"@id":"ssn:observedProperty","@type":"@id","@container":"@set"},publisher:"dct:publisher",Organization:"foaf:Organization",Group:"foaf:Group",name:{"@id":"foaf:name","@language":null},Distribution:"dcat:Distribution",distributions:{"@id":"dcat:distribution","@container":"@set"},accessURL:{"@id":"dcat:accessURL","@type":"@id"},downloadURL:{"@id":"dcat:downloadURL","@type":"@id"},mediaType:{"@id":"dcat:mediaType","@language":null},format:{"@id":"dct:format","@language":null},isPartOf:{"@id":"dct:isPartOf","@type":"@id"},parts:{"@id":"dct:hasPart","@type":"@id","@container":"@set"}},{"@language":null,title:{"@id":"dct:title"},description:{"@id":"dct:description"},title_i18n:{"@id":"dct:title","@container":"@language"},description_i18n:{"@id":"dct:description","@container":"@language"},"@base":null,id:"@id"}],h={"@context":g,"@type":"Catalog",datasets:{"@type":"Dataset",isPartOf:{"@embed":"@never","@omitDefault":!0},parts:{"@embed":"@never","@omitDefault":!0},distributions:{}}},i={"@context":g,"@type":"Dataset",isPartOf:{"@embed":"@never","@omitDefault":!0},parts:{"@embed":"@never","@omitDefault":!0},distributions:{}},j="unknown",k="_i18n"}}}),a.register("b2",["50","54","73","4a","ac","ad","6d","6e"],function(a){"use strict";function b(a){var b=a.format;return!b&&a.mediaType in r&&(b=r[a.mediaType]),b||(b=a.mediaType||"unknown"),b}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){c=a.loadDCATCatalog},function(a){d=a.$,e=a.HTML},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.PROCESS},function(a){k=a.i18n,l=a.sortByKey,m=a.MELODIES_DCAT_CATALOG_URL}],execute:function(){n={"dataset-list-item":'\n  <li class="list-group-item">\n    <h4 class="list-group-item-heading dataset-title"></h4>\n    <p class="dataset-publisher"></p>\n    <p class="dataset-distribution-labels"></p>\n    <p class="dataset-description"></p>\n    <p class="dataset-temporal"><i class="glyphicon glyphicon-time"></i> <span class="dataset-temporal-text"></span></p>\n    <p class="dataset-spatial-geometry"><i class="glyphicon glyphicon-globe"></i> <span class="dataset-spatial-geometry-text"></span></p>\n    <div class="dataset-spatial-minimap"></div>\n    <button type="button" class="btn btn-success dataset-analyse-button" style="display:none">\n      <span class="glyphicon glyphicon-flash" aria-hidden="true"></span> Add to Workspace\n    </button>\n  </li>\n  ',"dataset-error":'\n  <li class="list-group-item list-group-item-danger error-item">\n    <h4 class="list-group-item-heading dataset-title">Problem while loading catalogue</h4>\n    <p>Error: <em class="error-message"></em></p>\n    <p>Details:</p>\n    <small><pre class="error-details"></pre></small>\n  </li>\n  '},o='\n<div class="modal fade" id="dcatSourceModal" tabindex="-1" role="dialog" aria-labelledby="dcatSourceModalLabel">\n  <div class="modal-dialog modal-lg" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="dcatSourceModalLabel">DCAT Source View</h4>\n      </div>\n      <div class="modal-body">\n        <!-- Nav tabs -->\n        <ul class="nav nav-tabs" role="tablist">\n          <li role="presentation" class="active"><a href="#dcat-original" role="tab" data-toggle="tab">Original</a></li>\n          <li role="presentation"><a href="#dcat-framed" role="tab" data-toggle="tab">Framed</a></li>\n          <li role="presentation"><a href="#dcat-frame" role="tab" data-toggle="tab">Frame</a></li>\n        </ul>\n  \n        <!-- Tab panes -->\n        <div class="tab-content">\n          <div role="tabpanel" class="tab-pane active" id="dcat-original">\n            <pre><code class="dcat-original"></code></pre>\n          </div>\n          <div role="tabpanel" class="tab-pane" id="dcat-framed">\n            <pre><code class="dcat-framed"></code></pre>\n          </div>\n          <div role="tabpanel" class="tab-pane" id="dcat-frame">\n            <pre><code class="dcat-frame"></code></pre>\n          </div>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<style>\n.catalog-url-panel {\n  margin-top: 20px;\n}\n.dataset-spatial-minimap {\n  margin-bottom: 10px;\n}\n.catalog-load-default {\n  padding-top: 0;\n}\n</style>\n',d("body").add(e(o)),p=function(){return'\n<h1 class="sidebar-header">Search<div class="sidebar-close"><i class="glyphicon glyphicon-menu-left"></i></div></h1>\n\n<div class="panel panel-default catalog-url-panel">\n  <div class="panel-heading">\n    <h3 class="panel-title">\n      <a href="http://json-ld.org/" title="JSON-LD Data"><img width="32" src="http://json-ld.org/images/json-ld-data-32.png" alt="JSON-LD-logo-32"></a>\n      <span style="vertical-align:middle">\n        <a href="http://www.w3.org/TR/vocab-dcat/">DCAT</a> Catalogue\n      </span>\n      <button type="button" class="btn btn-primary pull-right jsonld-view-button"><i class="glyphicon glyphicon-eye-open"></i> JSON-LD</button>\n    </h3>\n  </div>\n  <div class="panel-body catalog-url-info">\n    <a href="#" class="catalog-url-edit"><i class="glyphicon glyphicon-pencil"></i></a>\n    <a class="catalog-url"></a>\n  </div>\n  <div class="panel-body catalog-load-default" style="display:none">\n    <button type="button" name="load-default" class="btn btn-primary">Load MELODIES Catalogue</button>\n  </div>\n  <div class="panel-body catalog-url-form" style="display:none">\n    <form>\n      <div class="form-group">\n        <input type="text" class="form-control" placeholder="http://">\n      </div>\n      <button type="submit" class="btn btn-default">Load</button>\n      <button type="button" name="cancel" class="btn btn-default">Cancel</button>\n    </form>\n  </div>\n</div>\n\n<ul class="list-group dataset-list"></ul>\n'},q=function(){function a(b,c){babelHelpers.classCallCheck(this,a),this.sidebar=b,this.id=c,this.map=this.sidebar.map,this.layerControl=this.sidebar.layerControl,d("#"+c).fill(e(p())),this.catalogue=b.catalogue,this.workspace=b.workspace,this._registerUIListeners(),this._registerModelListeners()}return babelHelpers.createClass(a,[{key:"_registerUIListeners",value:function(){var a=this,b=d("#"+this.id),c=d("input",d(".catalog-url-form",b));d(".catalog-url-edit",b).on("click",function(){d(".catalog-url-info",b).hide(),d(".catalog-url-form",b).show(),c.set("value",a.url)}),d("form",d(".catalog-url-form",b)).on("submit",function(){a.catalogue.loadFromDCAT(c.get("value")).then(function(){d(".catalog-url-info",b).show(),d(".catalog-url-form",b).hide()})}),d("button",d(".catalog-url-form",b)).filter(function(a){return"cancel"===a.name}).on("click",function(){d(".catalog-url-info",b).show(),d(".catalog-url-form",b).hide()}),d("button",d(".catalog-load-default",b)).on("click",function(){a.catalogue.loadFromDCAT(m)}),d(".jsonld-view-button",b).on("click",function(){a._showDCATInfoModal()});var e=document.querySelectorAll("#dcatSourceModal [data-toggle='tab']"),f=!0,g=!1,h=void 0;try{for(var j,k=e[Symbol.iterator]();!(f=(j=k.next()).done);f=!0){var l=j.value;new i(l)}}catch(a){g=!0,h=a}finally{try{!f&&k.return&&k.return()}finally{if(g)throw h}}}},{key:"_showDCATInfoModal",value:function(){var a=d("#dcatSourceModal");new f(a[0]).open();var b=function(a){return JSON.stringify(a,null,2)};c(this.catalogue.url).then(function(c){var e=c.raw,f=c.compacted,g=c.frame;d(".dcat-original",a).fill(b(e)),d(".dcat-framed",a).fill(b(f)),d(".dcat-frame",a).fill(b(g))})}},{key:"_registerModelListeners",value:function(){var a=this;this.catalogue.on("load",function(b){var c=b.url;a._clearList(),a._addDatasets(a.catalogue.datasets),a._setCatalogueUrl(c);var e=d(".catalog-load-default",d("#"+a.id));c!==m?e.show():e.hide()}),this.catalogue.on("loadError",function(b){var c=b.url,f=b.error;a._clearList(),a._setCatalogueUrl(c);var g=e(n["dataset-error"]);d(".error-message",g).fill(f.message);var h=JSON.stringify(f,null,1);d(".error-details",g).fill(h),d(".dataset-list","#"+a.id).fill(g),console.log(f)})}},{key:"_clearList",value:function(){d(".dataset-list","#"+this.id).fill()}},{key:"_setCatalogueUrl",value:function(a){this.url=a,d(".catalog-url","#"+this.id).set("@href",a).fill(a)}},{key:"_addDatasets",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"title":arguments[1];a=l(a,function(a){return k(a[b])});var c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this._addDataset(h)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}},{key:"_addDataset",value:function(a){var c=this,f=e(n["dataset-list-item"]);d(".dataset-list","#"+this.id).add(f);var i=k(a.title),l=a.description?k(a.description):"",m=a["dcat:landingPage"]||a.landingPage;if(m?d(".dataset-title",f).fill(e('<a href="'+m+'" target="_new" class="external dataset-title">'+i+"</a>")):d(".dataset-title",f).fill(i),d(".dataset-description",f).fill(l),a.publisher){var o=a.publisher["foaf:homepage"]||a.publisher.homepage;o?d(".dataset-publisher",f).fill(e('<a class="external" href="'+o+'"><em>'+a.publisher.name+"</em></a>")):d(".dataset-publisher",f).fill(e("<em>"+a.publisher.name+"</em>"))}else d(".dataset-publisher",f).hide();if(a.temporal){var p=a.temporal.startDate.substr(0,10)+" to "+a.temporal.endDate.substr(0,10);d(".dataset-temporal-text",f).fill(p)}else d(".dataset-temporal",f).hide();var q=void 0,r=a.spatial&&a.spatial.geometry?h(a.spatial.geometry):null;if(r){var s=g.geoJson(r);q=s.getBounds().equals([[-90,-180],[90,180]])}if(r&&!q?!function(){d(".dataset-spatial-geometry",f).hide();var a=g.map(d(".dataset-spatial-minimap",f)[0],{touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,zoomControl:!1,attributionControl:!1}).on("load",function(){g.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(a)});setTimeout(function(){var b=g.geoJson(r,{style:function(){return{color:"#ff7800",weight:1,clickable:!1}}});a.fitBounds(b.getBounds(),{reset:!0}),b.addTo(a)},1e3)}():(d(".dataset-spatial-minimap",f).hide(),q?d(".dataset-spatial-geometry-text",f).fill("global"):d(".dataset-spatial-geometry",f).hide()),a.distributions){var t=a.distributions.map(function(a){return{label:b(a),mediaType:a.mediaType}});t.sort(function(a,b){return a.label.toLowerCase().localeCompare(b.label.toLowerCase())});var u=new Set,v=!1,w=!0,x=!1,y=void 0;try{for(var z,A=t[Symbol.iterator]();!(w=(z=A.next()).done);w=!0){var B=z.value;if(!u.has(B.label)){u.add(B.label);var C=this._findFormatImpl(B.mediaType);C&&(v=!0);var D=C?C.shortLabel:B.label,E=C?"success":"default",F=C&&C.actionClasses.some(function(a){return a.type===j})?'<span class="glyphicon glyphicon-flash"></span> ':"",G=void 0;G=e(C?'<span class="label label-success">'+F+D+"</span> ":'<span class="label label-'+E+'">'+D+"</span> "),d(".dataset-distribution-labels",f).add(G)}}}catch(a){x=!0,y=a}finally{try{!w&&A.return&&A.return()}finally{if(x)throw y}}v&&(d(".dataset-analyse-button",f).show(),d(".dataset-analyse-button",f).on("click",function(){c.workspace.addDataset(a)}))}}},{key:"_findFormatImpl",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=this.sidebar.app.formats[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;if(g.supports(a))return g}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}}]),a}(),a("default",q),r={"application/x-netcdf":"netCDF"}}}}),a.registerDynamic("73",[],!0,function(a,b,c){this||self;return function(a){"undefined"!=typeof c&&"object"==typeof b?"undefined"!=typeof window?c.exports=a():c.exports=a:window.Modal=a()}(function(){var a=function(a,b){b=b||{},this.isIE=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&parseFloat(RegExp.$1),this.opened=!1,this.modal="object"==typeof a?a:document.querySelector(a),this.options={},this.options.backdrop="false"!==b.backdrop,this.options.keyboard="false"!==b.keyboard,this.options.content=b.content,this.duration=b.duration||300,this.options.duration=this.isIE&&this.isIE<10?0:this.duration,this.scrollbarWidth=0,this.dialog=this.modal.querySelector(".modal-dialog"),this.timer=0,this.init()},b=function(){var a=document.documentElement.getBoundingClientRect(),b=window.innerWidth||a.right-Math.abs(a.left);return b};a.prototype={init:function(){this.actions(),this.trigger(),this.options.content&&void 0!==this.options.content&&this.content(this.options.content)},actions:function(){var a=this;this.open=function(){this._open()},this.close=function(){this._close()},this._open=function(){this.options.backdrop?this.createOverlay():this.overlay=null,this.overlay&&setTimeout(function(){a.addClass(a.overlay,"in")},0),clearTimeout(a.modal.getAttribute("data-timer")),this.timer=setTimeout(function(){a.modal.style.display="block",a.opened=!0,a.checkScrollbar(),a.adjustDialog(),a.setScrollbar(),a.resize(),a.dismiss(),a.keydown(),a.addClass(document.body,"modal-open"),a.addClass(a.modal,"in"),a.modal.setAttribute("aria-hidden",!1)},a.options.duration/2),this.modal.setAttribute("data-timer",a.timer)},this._close=function(){this.overlay&&this.removeClass(this.overlay,"in"),this.removeClass(this.modal,"in"),this.modal.setAttribute("aria-hidden",!0),clearTimeout(a.modal.getAttribute("data-timer")),this.timer=setTimeout(function(){a.opened=!1,a.removeClass(document.body,"modal-open"),a.resize(),a.resetAdjustments(),a.resetScrollbar(),a.dismiss(),a.keydown(),a.modal.style.display=""},a.options.duration/2),this.modal.setAttribute("data-timer",a.timer),setTimeout(function(){document.querySelector(".modal.in")||a.removeOverlay()},a.options.duration)},this.content=function(a){return this.modal.querySelector(".modal-content").innerHTML=a},this.createOverlay=function(){var a=document.createElement("div"),b=document.querySelector(".modal-backdrop");a.setAttribute("class","modal-backdrop fade"),b?this.overlay=b:(this.overlay=a,document.body.appendChild(a))},this.removeOverlay=function(){var a=document.querySelector(".modal-backdrop");null!==a&&void 0!==a&&document.body.removeChild(a)},this.keydown=function(){function b(b){a.options.keyboard&&27==b.which&&a.close()}this.opened?document.addEventListener("keydown",b,!1):document.removeEventListener("keydown",b,!1)},this.trigger=function(){var b=document.querySelectorAll('[data-toggle="modal"]'),c=b.length,d=0;for(d;d<c;d++)b[d].addEventListener("click",function(b){var c=b.target,d=c.getAttribute("data-target")&&c.getAttribute("data-target").replace("#","")||c.getAttribute("href")&&c.getAttribute("href").replace("#","");document.getElementById(d)===a.modal&&a.open()})},this._resize=function(){var a=this.overlay||document.querySelector(".modal-backdrop"),b={w:document.documentElement.clientWidth+"px",h:document.documentElement.clientHeight+"px"};null!==a&&/in/.test(a.className)&&(a.style.height=b.h,a.style.width=b.w)},this.oneResize=function(){function b(){a._resize(),a.handleUpdate(),window.removeEventListener("resize",b,!1)}window.addEventListener("resize",b,!1)},this.resize=function(){this.opened?window.addEventListener("resize",this.oneResize,!1):window.removeEventListener("resize",this.oneResize,!1)},this.dismiss=function(){function b(b){"modal"!==b.target.parentNode.getAttribute("data-dismiss")&&"modal"!==b.target.getAttribute("data-dismiss")&&b.target!==a.modal||(b.preventDefault(),a.close())}this.opened?this.modal.addEventListener("click",b,!1):this.modal.removeEventListener("click",b,!1)},this.handleUpdate=function(){this.adjustDialog()},this.adjustDialog=function(){this.modal.style.paddingLeft=!this.bodyIsOverflowing&&this.modalIsOverflowing?this.scrollbarWidth+"px":"",this.modal.style.paddingRight=this.bodyIsOverflowing&&!this.modalIsOverflowing?this.scrollbarWidth+"px":""},this.resetAdjustments=function(){this.modal.style.paddingLeft="",this.modal.style.paddingRight=""},this.checkScrollbar=function(){this.bodyIsOverflowing=document.body.clientWidth<b(),this.modalIsOverflowing=this.modal.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},this.setScrollbar=function(){var a=window.getComputedStyle(document.body),b=parseInt(a.paddingRight,10);this.bodyIsOverflowing&&(document.body.style.paddingRight=b+this.scrollbarWidth+"px")},this.resetScrollbar=function(){document.body.style.paddingRight=""},this.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),b},this.addClass=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},this.removeClass=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(b,"").replace(/^\s+|\s+$/g,"")}}};var c=document.querySelectorAll(".modal"),d=c.length,e=0;for(e;e<d;e++){var f=c[e],g={};g.keyboard=f.getAttribute("data-keyboard"),g.backdrop=f.getAttribute("data-backdrop"),g.duration=f.getAttribute("data-duration"),new a(f,g)}return a}),c.exports}),a.registerDynamic("b3",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(){"use strict";function a(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function b(a){return"string"!=typeof a&&(a=String(a)),a}function c(a){this.map={},a instanceof c?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function d(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function e(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function f(a){var b=new FileReader;return b.readAsArrayBuffer(a),e(b)}function g(a){var b=new FileReader;return b.readAsText(a),e(b)}function h(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,"string"==typeof a)this._bodyText=a;else if(n.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(n.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(a){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n.blob?(this.blob=function(){var a=d(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(f)},this.text=function(){var a=d(this);if(a)return a;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=d(this);return a?a:Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function i(a){var b=a.toUpperCase();return o.indexOf(b)>-1?b:a}function j(a,b){b=b||{};var d=b.body;if(j.prototype.isPrototypeOf(a)){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new c(a.headers)),this.method=a.method,this.mode=a.mode,d||(d=a._bodyInit,a.bodyUsed=!0)}else this.url=a;if(this.credentials=b.credentials||this.credentials||"omit",!b.headers&&this.headers||(this.headers=new c(b.headers)),this.method=i(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&d)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(d)}function k(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function l(a){var b=new c,d=a.getAllResponseHeaders().trim().split("\n");return d.forEach(function(a){var c=a.trim().split(":"),d=c.shift().trim(),e=c.join(":").trim();b.append(d,e)}),b}function m(a,b){b||(b={}),this._initBody(a),this.type="default",this.status=b.status,this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText,this.headers=b.headers instanceof c?b.headers:new c(b.headers),this.url=b.url||""}if(!self.fetch){c.prototype.append=function(c,d){c=a(c),d=b(d);var e=this.map[c];e||(e=[],this.map[c]=e),e.push(d)},c.prototype.delete=function(b){delete this.map[a(b)]},c.prototype.get=function(b){var c=this.map[a(b)];return c?c[0]:null},c.prototype.getAll=function(b){return this.map[a(b)]||[]},c.prototype.has=function(b){return this.map.hasOwnProperty(a(b))},c.prototype.set=function(c,d){this.map[a(c)]=[b(d)]},c.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,d,c,this)},this)},this)};var n={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self},o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];j.prototype.clone=function(){return new j(this)},h.call(j.prototype),h.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var a=new m(null,{status:0,statusText:""});return a.type="error",a};var p=[301,302,303,307,308];m.redirect=function(a,b){if(p.indexOf(b)===-1)throw new RangeError("Invalid status code");return new m(null,{status:b,headers:{location:a}})},self.Headers=c,self.Request=j,self.Response=m,self.fetch=function(a,b){return new Promise(function(c,d){function e(){return"responseURL"in g?g.responseURL:/^X-Request-URL:/m.test(g.getAllResponseHeaders())?g.getResponseHeader("X-Request-URL"):void 0}var f;f=j.prototype.isPrototypeOf(a)&&!b?a:new j(a,b);var g=new XMLHttpRequest;g.onload=function(){var a=1223===g.status?204:g.status;if(a<100||a>599)return void d(new TypeError("Network request failed"));var b={status:a,statusText:g.statusText,headers:l(g),url:e()},f="response"in g?g.response:g.responseText;c(new m(f,b))},g.onerror=function(){d(new TypeError("Network request failed"))},g.open(f.method,f.url,!0),"include"===f.credentials&&(g.withCredentials=!0),"responseType"in g&&n.blob&&(g.responseType="blob"),f.headers.forEach(function(a,b){g.setRequestHeader(b,a)}),g.send("undefined"==typeof f._bodyInit?null:f._bodyInit)})},self.fetch.polyfill=!0}}()}(this),e()}),a.registerDynamic("b4",["b3"],!0,function(a,b,c){this||self;return c.exports=a("b3"),c.exports}),a.register("b5",[],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]?d:arguments[1];if(b in a)return b;var c=b.split("-")[0],e=Object.keys(a).filter(function(a){return c===a.split("-")[0]});return e.length?e[0]:Object.keys(a)[0]}function c(a){var c=arguments.length<=1||void 0===arguments[1]?d:arguments[1],e=b(a,c);return a[e]}var d;return a("getLanguageTag",b),a("getLanguageString",c),{setters:[],execute:function(){d="en"}}}),a.register("b6",["b5"],function(a){"use strict";function b(a,b){if(!a)return"";if(a.symbol){var d=a.symbol.value||a.symbol,e=a.symbol.type;return"http://www.opengis.net/def/uom/UCUM/"===e&&("Cel"===d?d="C":"1"===d&&(d="")),d}return c(a.label,b)}var c;return a("stringifyUnit",b),{setters:[function(a){c=a.getLanguageString}],execute:function(){}}}),a.register("b7",[],function(a){"use strict";function b(a){var b=1/0,c=-(1/0),e=function(a){null!==a&&(a<b&&(b=a),a>c&&(c=a))};return d(a,e),b===1/0?[void 0,void 0]:[b,c]}function c(a,b,c){var e=c,f=function(a){e=b(e,a)};return d(a,f),e}function d(a,b){var c=[].concat(babelHelpers.toConsumableArray(a.shape));c.sort(function(a,b){var c=babelHelpers.slicedToArray(a,2),d=c[1],e=babelHelpers.slicedToArray(b,2),f=e[1];return d-f});var d="var obj = {}",e="",f=!0,g=!1,h=void 0;try{for(var i,j=c[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){var k=babelHelpers.slicedToArray(i.value,2),l=k[0],m=k[1];d+="\n      for (var i"+l+"=0; i"+l+" < "+m+"; ++i"+l+") {\n        obj['"+l+"'] = i"+l+"\n    ",e+="}"}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}d+="\n    fn(get(obj))\n  ";var n=new Function("return function iterRange (get, fn) { "+d+" "+e+" }")();n(a.get,b)}return a("minMaxOfRange",b),a("reduceRange",c),a("iterateRange",d),{setters:[],execute:function(){}}}),a.register("b8",[],function(a){"use strict";function b(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=function(){var c=babelHelpers.slicedToArray(f.value,2),d=c[0],e=c[1];if(e.indexOf(b)!==-1){var g=a.observedProperty.categories.filter(function(a){return a.id===d})[0];return{v:g}}},h=a.categoryEncoding[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var i=g();if("object"==typeof i)return i.v}}catch(a){d=!0,e=a}finally{try{!c&&h.return&&h.return()}finally{if(d)throw e}}}return a("getCategory",b),{setters:[],execute:function(){}}}),a.register("b9",["ba","bb","bc"],function(a){"use strict";function b(a,i){return a.loadDomain().then(function(j){var k=g(j);if(k.coordinates.length>2)throw new Error("Reprojection not supported for >2D CRSs");if(k.coordinates.some(j.axes.has))throw new Error("Grid reprojection not supported yet");var l=babelHelpers.slicedToArray(k.coordinates,2),m=l[0],n=l[1],o=[].concat(babelHelpers.toConsumableArray(j.axes.values())),p=o.find(function(a){return k.coordinates.every(function(b){return a.coordinates.indexOf(b)!==-1})}),q=p.coordinates.indexOf(m),r=p.coordinates.indexOf(n),s=h(j),t=h(i),u=void 0;if(p.dataType!==d)throw new Error("Unsupported data type: "+p.dataType);u=p.values.map(function(a){return a.slice()});var v=!0,w=!1,x=void 0;try{for(var y,z=u[Symbol.iterator]();!(v=(y=z.next()).done);v=!0){var A=y.value,B=A[q],C=A[r],D=s.unproject({x:B,y:C}),E=t.project(D),F=E.x,G=E.y;A[q]=F,A[r]=G}}catch(a){w=!0,x=a}finally{try{!v&&z.return&&z.return()}finally{if(w)throw x}}var H=new Map(j.axes),I=c(p);delete I.bounds,I.values=u,H.set(p.key,I);var J=g(i);if(J.coordinates.length>2)throw new Error("Reprojection not supported for >2D CRSs");var K=j.referencing.map(function(a){return a===k?{coordinates:k.coordinates,system:J.system}:a}),L={type:f,domainType:j.domainType,axes:H,referencing:K},M={type:e,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return Promise.resolve(L)},loadRange:function(b){return a.loadRange(b)},loadRanges:function(b){return a.loadRanges(b)},subsetByIndex:function(c){return a.subsetByIndex(c).then(function(a){return b(a,i)})},subsetByValue:function(c){return a.subsetByValue(c).then(function(a){return b(a,i)})}};return M})}var c,d,e,f,g,h;return a("reproject",b),{setters:[function(a){c=a.shallowcopy},function(a){d=a.COVJSON_DATATYPE_TUPLE,e=a.COVERAGE,f=a.DOMAIN},function(a){g=a.getHorizontalCRSReferenceObject,h=a.getProjection}],execute:function(){}}}),a.register("bd",["bb","bc"],function(a){"use strict";function b(a){if(a.paging)throw new Error("Paged collections not supported");a.query=function(){return new j(a)}}function c(a,b){var c=!0,d=!1,e=void 0;try{for(var j,k=Object.keys(b)[Symbol.iterator]();!(c=(j=k.next()).done);c=!0){var l=j.value,m=b[l];if(!a.axes.has(l))throw new Error('Axis "'+l+'" does not exist');var n=a.axes.get(l),o=n.values,p=o[0],q=o[o.length-1];if("number"!=typeof p&&"string"!=typeof p)throw new Error("Can only filter primitive axis values");var r=m.start,s=m.stop;if(g(a,l)){var t=[f(p),f(q)];p=t[0],q=t[1];var u=[f(r),f(s)];r=u[0],s=u[1]}else if(h(a,l)){var v=i(a,l),w=[v(r),v(s)];r=w[0],s=w[1]}if(p>q){var x=[q,p];p=x[0],q=x[1]}if(q<r||s<p)return!1}}catch(a){d=!0,e=a}finally{try{!c&&k.return&&k.return()}finally{if(d)throw e}}return!0}function d(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;b[h]=a[h]}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}var e,f,g,h,i,j;return a("addCollectionQueryFunction",b),{setters:[function(a){e=a.COVERAGECOLLECTION},function(a){f=a.asTime,g=a.isISODateAxis,h=a.isLongitudeAxis,i=a.getLongitudeWrapper}],execute:function(){j=function(){function a(b){babelHelpers.classCallCheck(this,a),this._collection=b,this._filter={},this._subset={}}return babelHelpers.createClass(a,[{key:"filter",value:function(a){return d(a,this._filter),this}},{key:"subset",value:function(a){return d(a,this._subset),this}},{key:"execute",value:function(){var b=this,d=this._collection,f={type:e,coverages:[],parameters:d.parameters,domainType:d.domainType},g=[],h=!0,i=!1,j=void 0;try{for(var k,l=function(){var a=k.value;g.push(a.loadDomain().then(function(d){if(c(d,b._filter))return 0!==Object.keys(b._subset).length?a.subsetByValue(b._subset).then(function(a){f.coverages.push(a)}):void f.coverages.push(a)}))},m=d.coverages[Symbol.iterator]();!(h=(k=m.next()).done);h=!0)l()}catch(a){i=!0,j=a}finally{try{!h&&m.return&&m.return()}finally{if(i)throw j}}return Promise.all(g).then(function(){return f.query=function(){return new a(f)},f})}}]),a}(),a("CollectionQuery",j);
}}}),a.register("be",["bf","bb","b5","b6","b7","b8","c0","bc","c1","c2","b9","c3","c4","bd"],function(a){"use strict";return{setters:[function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)}],execute:function(){}}}),a.registerDynamic("c5",[],!0,function(a,b,c){"use strict";function d(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=c;return b}this||self;return c.exports=d,c.exports}),a.registerDynamic("c6",["c5"],!0,function(a,b,c){this||self;return c.exports=a("c5"),c.exports}),a.registerDynamic("c7",[],!0,function(a,b,c){var d=(this||self,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");return function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:b<i?-1:b<i+10?b-i+26+26:b<k+26?b-k:b<j+26?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;d<g;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;e<g;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof b?this.base64js={}:b),c.exports}),a.registerDynamic("c8",["c7"],!0,function(a,b,c){this||self;return c.exports=a("c7"),c.exports}),a.registerDynamic("c9",[],!0,function(a,b,c){this||self;return b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p},c.exports}),a.registerDynamic("ca",["c9"],!0,function(a,b,c){this||self;return c.exports=a("c9"),c.exports}),a.registerDynamic("cb",[],!0,function(a,b,c){var d=(this||self,{}.toString);return c.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)},c.exports}),a.registerDynamic("cc",["cb"],!0,function(a,b,c){this||self;return c.exports=a("cb"),c.exports}),a.registerDynamic("cd",["c8","ca","cc"],!0,function(a,b,c){"use strict";function d(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(a){return!1}}function e(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a){return this instanceof f?(f.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof a?g(this,a):"string"==typeof a?h(this,a,arguments.length>1?arguments[1]:"utf8"):i(this,a)):arguments.length>1?new f(a,arguments[1]):new f(a)}function g(a,b){if(a=p(a,b<0?0:0|q(b)),!f.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;c++)a[c]=0;return a}function h(a,b,c){"string"==typeof c&&""!==c||(c="utf8");var d=0|s(b,c);return a=p(a,d),a.write(b,c),a}function i(a,b){if(f.isBuffer(b))return j(a,b);if(Z(b))return k(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return l(a,b);if(b instanceof ArrayBuffer)return m(a,b)}return b.length?n(a,b):o(a,b)}function j(a,b){var c=0|q(b.length);return a=p(a,c),b.copy(a,0,0,c),a}function k(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function l(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function m(a,b){return f.TYPED_ARRAY_SUPPORT?(b.byteLength,a=f._augment(new Uint8Array(b))):a=l(a,new Uint8Array(b)),a}function n(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function o(a,b){var c,d=0;"Buffer"===b.type&&Z(b.data)&&(c=b.data,d=0|q(c.length)),a=p(a,d);for(var e=0;e<d;e+=1)a[e]=255&c[e];return a}function p(a,b){f.TYPED_ARRAY_SUPPORT?(a=f._augment(new Uint8Array(b)),a.__proto__=f.prototype):(a.length=b,a._isBuffer=!0);var c=0!==b&&b<=f.poolSize>>>1;return c&&(a.parent=$),a}function q(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function r(a,b){if(!(this instanceof r))return new r(a,b);var c=new f(a,b);return delete c.parent,c}function s(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return R(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return U(a).length;default:if(d)return R(a).length;b=(""+b).toLowerCase(),d=!0}}function t(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),b<0&&(b=0),c>this.length&&(c=this.length),c<=b)return"";for(;;)switch(a){case"hex":return F(this,b,c);case"utf8":case"utf-8":return B(this,b,c);case"ascii":return D(this,b,c);case"binary":return E(this,b,c);case"base64":return A(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function u(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function v(a,b,c,d){return V(R(b,a.length-c),a,c,d)}function w(a,b,c,d){return V(S(b),a,c,d)}function x(a,b,c,d){return w(a,b,c,d)}function y(a,b,c,d){return V(U(b),a,c,d)}function z(a,b,c,d){return V(T(b,a.length-c),a,c,d)}function A(a,b,c){return 0===b&&c===a.length?X.fromByteArray(a):X.fromByteArray(a.slice(b,c))}function B(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return C(d)}function C(a){var b=a.length;if(b<=_)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=_));return c}function D(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(127&a[e]);return d}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(a[e]);return d}function F(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;f++)e+=Q(a[f]);return e}function G(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function H(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function I(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>e||b<g)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function J(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function K(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function L(a,b,c,d,e,f){if(b>e||b<f)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(c<0)throw new RangeError("index out of range")}function M(a,b,c,d,e){return e||L(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),Y.write(a,b,c,d,23,4),c+4}function N(a,b,c,d,e){return e||L(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),Y.write(a,b,c,d,52,8),c+8}function O(a){if(a=P(a).replace(ba,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function P(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Q(a){return a<16?"0"+a.toString(16):a.toString(16)}function R(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;g++){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function S(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function T(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function U(a){return X.toByteArray(O(a))}function V(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}var W=this||self,X=a("c8"),Y=a("ca"),Z=a("cc");b.Buffer=f,b.SlowBuffer=r,b.INSPECT_MAX_BYTES=50,f.poolSize=8192;var $={};f.TYPED_ARRAY_SUPPORT=void 0!==W.TYPED_ARRAY_SUPPORT?W.TYPED_ARRAY_SUPPORT:d(),f.TYPED_ARRAY_SUPPORT?(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array):(f.prototype.length=void 0,f.prototype.parent=void 0),f.isBuffer=function(a){return!(null==a||!a._isBuffer)},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g&&a[e]===b[e];)++e;return e!==g&&(c=a[e],d=b[e]),c<d?-1:d<c?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!Z(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new f(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new f(b),e=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,e),e+=g.length}return d},f.byteLength=s,f.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?B(this,0,a):t.apply(this,arguments)},f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===f.compare(this,a)},f.prototype.inspect=function(){var a="",c=b.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(a+=" ... ")),"<Buffer "+a+">"},f.prototype.compare=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:f.compare(this,a)},f.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[d===-1?0:e-d]){if(d===-1&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(b<0&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(f.isBuffer(a))return c(this,a,b);if("number"==typeof a)return f.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},f.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},f.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return u(this,a,b,c);case"utf8":case"utf-8":return v(this,a,b,c);case"ascii":return w(this,a,b,c);case"binary":return x(this,a,b,c);case"base64":return y(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d;if(f.TYPED_ARRAY_SUPPORT)d=f._augment(this.subarray(a,b));else{var e=b-a;d=new f(e,void 0);for(var g=0;g<e;g++)d[g]=this[g+a]}return d.length&&(d.parent=this.parent||this),d},f.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUInt8=function(a,b){return b||H(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,b){return b||H(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,b){return b||H(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,b){return b||H(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,b){return b||H(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return b||H(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},f.prototype.readInt16LE=function(a,b){b||H(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){b||H(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return b||H(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return b||H(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return b||H(a,4,this.length),Y.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return b||H(a,4,this.length),Y.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return b||H(a,8,this.length),Y.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return b||H(a,8,this.length),Y.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},f.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},f.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,255,0),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):K(this,a,b,!0),b+4},f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=0,g=1,h=a<0?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=a<0?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,127,-128),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),a<0&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):K(this,a,b,!0),b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeFloatLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return N(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return N(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,g=d-c;if(this===a&&c<b&&b<d)for(e=g-1;e>=0;e--)a[e+b]=this[e+c];else if(g<1e3||!f.TYPED_ARRAY_SUPPORT)for(e=0;e<g;e++)a[e+b]=this[e+c];else a._set(this.subarray(c,c+g),b);return g},f.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),c<b)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(b<0||b>=this.length)throw new RangeError("start out of bounds");if(c<0||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;d<c;d++)this[d]=a;else{var e=R(a.toString()),f=e.length;for(d=b;d<c;d++)this[d]=e[d%f]}return this}},f.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(f.TYPED_ARRAY_SUPPORT)return new f(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;b<c;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var aa=f.prototype;f._augment=function(a){return a.constructor=f,a._isBuffer=!0,a._set=a.set,a.get=aa.get,a.set=aa.set,a.write=aa.write,a.toString=aa.toString,a.toLocaleString=aa.toString,a.toJSON=aa.toJSON,a.equals=aa.equals,a.compare=aa.compare,a.indexOf=aa.indexOf,a.copy=aa.copy,a.slice=aa.slice,a.readUIntLE=aa.readUIntLE,a.readUIntBE=aa.readUIntBE,a.readUInt8=aa.readUInt8,a.readUInt16LE=aa.readUInt16LE,a.readUInt16BE=aa.readUInt16BE,a.readUInt32LE=aa.readUInt32LE,a.readUInt32BE=aa.readUInt32BE,a.readIntLE=aa.readIntLE,a.readIntBE=aa.readIntBE,a.readInt8=aa.readInt8,a.readInt16LE=aa.readInt16LE,a.readInt16BE=aa.readInt16BE,a.readInt32LE=aa.readInt32LE,a.readInt32BE=aa.readInt32BE,a.readFloatLE=aa.readFloatLE,a.readFloatBE=aa.readFloatBE,a.readDoubleLE=aa.readDoubleLE,a.readDoubleBE=aa.readDoubleBE,a.writeUInt8=aa.writeUInt8,a.writeUIntLE=aa.writeUIntLE,a.writeUIntBE=aa.writeUIntBE,a.writeUInt16LE=aa.writeUInt16LE,a.writeUInt16BE=aa.writeUInt16BE,a.writeUInt32LE=aa.writeUInt32LE,a.writeUInt32BE=aa.writeUInt32BE,a.writeIntLE=aa.writeIntLE,a.writeIntBE=aa.writeIntBE,a.writeInt8=aa.writeInt8,a.writeInt16LE=aa.writeInt16LE,a.writeInt16BE=aa.writeInt16BE,a.writeInt32LE=aa.writeInt32LE,a.writeInt32BE=aa.writeInt32BE,a.writeFloatLE=aa.writeFloatLE,a.writeFloatBE=aa.writeFloatBE,a.writeDoubleLE=aa.writeDoubleLE,a.writeDoubleBE=aa.writeDoubleBE,a.fill=aa.fill,a.inspect=aa.inspect,a.toArrayBuffer=aa.toArrayBuffer,a};var ba=/[^+\/0-9A-Za-z-_]/g;return c.exports}),a.registerDynamic("ce",["cd"],!0,function(a,b,c){this||self;return c.exports=a("cd"),c.exports}),a.registerDynamic("cf",["ce"],!0,function(b,c,d){this||self;return d.exports=a._nodeRequire?a._nodeRequire("buffer"):b("ce"),d.exports}),a.registerDynamic("d0",["cf"],!0,function(a,b,c){this||self;return c.exports=a("cf"),c.exports}),a.registerDynamic("d1",["d0"],!0,function(a,b,c){this||self;return function(a){function b(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function d(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&b(a.slice(0,0))}c.exports=function(a){return null!=a&&(b(a)||d(a)||!!a._isBuffer)}}(a("d0").Buffer),c.exports}),a.registerDynamic("d2",["d1"],!0,function(a,b,c){this||self;return c.exports=a("d1"),c.exports}),a.registerDynamic("d3",["c6","d2"],!0,function(a,b,c){function d(a,b){return a[0]-b[0]}function e(){var a,b=this.stride,c=new Array(b.length);for(a=0;a<c.length;++a)c[a]=[Math.abs(b[a]),a];c.sort(d);var e=new Array(c.length);for(a=0;a<e.length;++a)e[a]=c[a][1];return e}function f(a,b){var c=["View",b,"d",a].join("");b<0&&(c="View_Nil"+a);var d="generic"===a;if(b===-1){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",g=new Function(f);return g()}if(0===b){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",g=new Function("TrivialArray",f);return g(l[a][0])}var f=["'use strict'"],h=i(b),j=h.map(function(a){return"i"+a}),k="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=h.map(function(a){return"b"+a}).join(","),n=h.map(function(a){return"c"+a}).join(",");f.push("function "+c+"(a,"+m+","+n+",d){this.data=a","this.shape=["+m+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})"),1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),b<4?(f.push("function "+c+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+j.join(",")+",v){"),d?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}"),f.push("proto.get=function "+c+"_get("+j.join(",")+"){"),d?f.push("return this.data.get("+k+")}"):f.push("return this.data["+k+"]}"),f.push("proto.index=function "+c+"_index(",j.join(),"){return "+k+"}"),f.push("proto.hi=function "+c+"_hi("+j.join(",")+"){return new "+c+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");var o=h.map(function(a){return"a"+a+"=this.shape["+a+"]"}),p=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+c+"_lo("+j.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+p.join(","));for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){d=i"+q+"|0;b+=c"+q+"*d;a"+q+"-=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+j.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'){d=i"+q+"|0;if(d<0){c+=b"+q+"*(a"+q+"-1);a"+q+"=ceil(-a"+q+"/d)}else{a"+q+"=ceil(a"+q+"/d)}b"+q+"*=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");for(var r=new Array(b),s=new Array(b),q=0;q<b;++q)r[q]="a[i"+q+"]",s[q]="b[i"+q+"]";f.push("proto.transpose=function "+c+"_transpose("+j+"){"+j.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+r.join(",")+","+s.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+j+"){var a=[],b=[],c=this.offset");for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){c=(c+this.stride["+q+"]*i"+q+")|0}else{a.push(this.shape["+q+"]);b.push(this.stride["+q+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",f.join("\n"));return g(l[a],e)}function g(a){if(j(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function h(a,b,c,d){if(void 0===a){var e=l.array[0];return e([])}"number"==typeof a&&(a=[a]),void 0===b&&(b=[a.length]);var h=b.length;if(void 0===c){c=new Array(h);for(var i=h-1,j=1;i>=0;--i)c[i]=j,j*=b[i]}if(void 0===d){d=0;for(var i=0;i<h;++i)c[i]<0&&(d-=(b[i]-1)*c[i])}for(var k=g(a),m=l[k];m.length<=h+1;)m.push(f(k,m.length-1));var e=m[h+1];return e(a,b,c,d)}var i=(this||self,a("c6")),j=a("d2"),k="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};return c.exports=h,c.exports}),a.registerDynamic("5b",["d3"],!0,function(a,b,c){this||self;return c.exports=a("d3"),c.exports}),a.register("ba",[],function(a){"use strict";function b(a){var b=void 0;if(a instanceof Map)b=new Map(a);else{b=Object.create(Object.getPrototypeOf(a));for(var c in a)b[c]=a[c]}return b}return a("shallowcopy",b),{setters:[],execute:function(){}}}),a.registerDynamic("d4",[],!0,function(a,b,c){"format cjs";this||self;return function(a){"use strict";function b(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function c(a){return"string"!=typeof a&&(a=String(a)),a}function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return p.iterable&&(b[Symbol.iterator]=function(){return b}),b}function e(a){this.map={},a instanceof e?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function g(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function h(a){var b=new FileReader;return b.readAsArrayBuffer(a),g(b)}function i(a){var b=new FileReader;return b.readAsText(a),g(b)}function j(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,"string"==typeof a)this._bodyText=a;else if(p.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(p.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(a){if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"));
},p.blob?(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(h)},this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return i(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=f(this);return a?a:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function k(a){var b=a.toUpperCase();return q.indexOf(b)>-1?b:a}function l(a,b){b=b||{};var c=b.body;if(l.prototype.isPrototypeOf(a)){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new e(a.headers)),this.method=a.method,this.mode=a.mode,c||(c=a._bodyInit,a.bodyUsed=!0)}else this.url=a;if(this.credentials=b.credentials||this.credentials||"omit",!b.headers&&this.headers||(this.headers=new e(b.headers)),this.method=k(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function m(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function n(a){var b=new e,c=(a.getAllResponseHeaders()||"").trim().split("\n");return c.forEach(function(a){var c=a.trim().split(":"),d=c.shift().trim(),e=c.join(":").trim();b.append(d,e)}),b}function o(a,b){b||(b={}),this.type="default",this.status=b.status,this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText,this.headers=b.headers instanceof e?b.headers:new e(b.headers),this.url=b.url||"",this._initBody(a)}if(!a.fetch){var p={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};e.prototype.append=function(a,d){a=b(a),d=c(d);var e=this.map[a];e||(e=[],this.map[a]=e),e.push(d)},e.prototype.delete=function(a){delete this.map[b(a)]},e.prototype.get=function(a){var c=this.map[b(a)];return c?c[0]:null},e.prototype.getAll=function(a){return this.map[b(a)]||[]},e.prototype.has=function(a){return this.map.hasOwnProperty(b(a))},e.prototype.set=function(a,d){this.map[b(a)]=[c(d)]},e.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,d,c,this)},this)},this)},e.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),d(a)},e.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),d(a)},e.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),d(a)},p.iterable&&(e.prototype[Symbol.iterator]=e.prototype.entries);var q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this)},j.call(l.prototype),j.call(o.prototype),o.prototype.clone=function(){return new o(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new e(this.headers),url:this.url})},o.error=function(){var a=new o(null,{status:0,statusText:""});return a.type="error",a};var r=[301,302,303,307,308];o.redirect=function(a,b){if(r.indexOf(b)===-1)throw new RangeError("Invalid status code");return new o(null,{status:b,headers:{location:a}})},a.Headers=e,a.Request=l,a.Response=o,a.fetch=function(a,b){return new Promise(function(c,d){function e(){return"responseURL"in g?g.responseURL:/^X-Request-URL:/m.test(g.getAllResponseHeaders())?g.getResponseHeader("X-Request-URL"):void 0}var f;f=l.prototype.isPrototypeOf(a)&&!b?a:new l(a,b);var g=new XMLHttpRequest;g.onload=function(){var a={status:g.status,statusText:g.statusText,headers:n(g),url:e()},b="response"in g?g.response:g.responseText;c(new o(b,a))},g.onerror=function(){d(new TypeError("Network request failed"))},g.ontimeout=function(){d(new TypeError("Network request failed"))},g.open(f.method,f.url,!0),"include"===f.credentials&&(g.withCredentials=!0),"responseType"in g&&p.blob&&(g.responseType="blob"),f.headers.forEach(function(a,b){g.setRequestHeader(b,a)}),g.send("undefined"==typeof f._bodyInit?null:f._bodyInit)})},a.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),c.exports}),a.registerDynamic("d5",["d4"],!0,function(a,b,c){this||self;return c.exports=a("d4"),c.exports}),a.registerDynamic("d6",["d7","d8"],!0,function(a,b,c){function d(a,b,c){var d;return Array.isArray(c)?(d=h(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):h(a,b,c)}function e(a){return a instanceof g?a:a.oProj?a.oProj:g(a)}function f(a,b,c){a=e(a);var f,g=!1;return"undefined"==typeof b?(b=a,a=i,g=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(c=b,b=a,a=i,g=!0),b=e(b),c?d(a,b,c):(f={forward:function(c){return d(a,b,c)},inverse:function(c){return d(b,a,c)}},g&&(f.oProj=b),f)}var g=(this||self,a("d7")),h=a("d8"),i=g("WGS84");return c.exports=f,c.exports});a.registerDynamic("d9",["da"],!0,function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var e=a.split(",");this.x=parseFloat(e[0],10),this.y=parseFloat(e[1],10),this.z=parseFloat(e[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var e=(this||self,a("da"));return d.fromMGRS=function(a){return new d(e.toPoint(a))},d.prototype.toMGRS=function(a){return e.forward([this.x,this.y],a)},c.exports=d,c.exports});a.registerDynamic("db",[],!0,function(a,b,c){var d=(this||self,1),e=2,f=3,g=5,h=6378137,i=.006694379990141316;return c.exports=function(a,b,c){function j(a){return a===d||a===e}var k,l,m;if(a.compare_datums(b))return c;if(a.datum_type===g||b.datum_type===g)return c;var n=a.a,o=a.es,p=b.a,q=b.es,r=a.datum_type;if(r===f)if(0===this.apply_gridshift(a,0,c))a.a=h,a.es=i;else{if(!a.datum_params)return a.a=n,a.es=a.es,c;for(k=1,l=0,m=a.datum_params.length;l<m;l++)k*=a.datum_params[l];if(0===k)return a.a=n,a.es=a.es,c;r=a.datum_params.length>3?e:d}return b.datum_type===f&&(b.a=h,b.es=i),(a.es!==b.es||a.a!==b.a||j(r)||j(b.datum_type))&&(a.geodetic_to_geocentric(c),j(a.datum_type)&&a.geocentric_to_wgs84(c),j(b.datum_type)&&b.geocentric_from_wgs84(c),b.geocentric_to_geodetic(c)),b.datum_type===f&&this.apply_gridshift(b,1,c),a.a=n,a.es=o,b.a=p,b.es=q,c},c.exports}),a.registerDynamic("dc",[],!0,function(a,b,c){this||self;return c.exports=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0;for(f=0;f<3;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":c[e]=d;break;case"w":c[e]=-d;break;case"n":c[e]=d;break;case"s":c[e]=-d;break;case"u":void 0!==c[e]&&(c.z=d);break;case"d":void 0!==c[e]&&(c.z=-d);break;default:return null}return c},c.exports}),a.registerDynamic("dd",[],!0,function(a,b,c){this||self;return c.exports=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]},c.exports}),a.registerDynamic("de",["dd","df","e0"],!0,function(a,b,c){function d(a){var b=this;if(2===arguments.length){var c=arguments[1];"string"==typeof c?"+"===c.charAt(0)?d[a]=f(arguments[1]):d[a]=g(arguments[1]):d[a]=c}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?d.apply(b,a):d(a)});if("string"==typeof a){if(a in d)return d[a]}else"EPSG"in a?d["EPSG:"+a.EPSG]=a:"ESRI"in a?d["ESRI:"+a.ESRI]=a:"IAU2000"in a?d["IAU2000:"+a.IAU2000]=a:console.log(a);return}}var e=(this||self,a("dd")),f=a("df"),g=a("e0");return e(d),c.exports=d,c.exports}),a.registerDynamic("e0",["e1"],!0,function(a,b,c){function d(a,b,c){a[b]=c.map(function(a){var b={};return e(a,b),b}).reduce(function(a,b){return j(a,b)},{})}function e(a,b){var c;return Array.isArray(a)?(c=a.shift(),"PARAMETER"===c&&(c=a.shift()),1===a.length?Array.isArray(a[0])?(b[c]={},e(a[0],b[c])):b[c]=a[0]:a.length?"TOWGS84"===c?b[c]=a:(b[c]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(c)>-1?(b[c]={name:a[0].toLowerCase(),convert:a[1]},3===a.length&&(b[c].auth=a[2])):"SPHEROID"===c?(b[c]={name:a[0],a:a[1],rf:a[2]},4===a.length&&(b[c].auth=a[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(c)>-1?(a[0]=["name",a[0]],d(b,c,a)):a.every(function(a){return Array.isArray(a)})?d(b,c,a):e(a,b[c])):b[c]=!0,void 0):void(b[a]=!0)}function f(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function g(a){return a*i}function h(a){function b(b){var c=a.to_meter||1;return parseFloat(b,10)*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):"object"==typeof a.PROJECTION?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&("GEOGCS"===a.type?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=parseFloat(a.UNIT.convert,10)*a.DATUM.SPHEROID.a):a.to_meter=parseFloat(a.UNIT.convert,10))),a.GEOGCS&&(a.GEOGCS.DATUM?a.datumCode=a.GEOGCS.DATUM.name.toLowerCase():a.datumCode=a.GEOGCS.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==a.datumCode&&"new_zealand_1949"!==a.datumCode||(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),a.GEOGCS.DATUM&&a.GEOGCS.DATUM.SPHEROID&&(a.ellps=a.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=a.GEOGCS.DATUM.SPHEROID.a,a.rf=parseFloat(a.GEOGCS.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36")),a.b&&!isFinite(a.b)&&(a.b=a.a);var c=function(b){return f(a,b)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",g],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",g],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",g],["lat0","latitude_of_origin",g],["lat0","standard_parallel_1",g],["lat1","standard_parallel_1",g],["lat2","standard_parallel_2",g],["alpha","azimuth",g],["srsCode","name"]];d.forEach(c),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.projName&&"Lambert_Azimuthal_Equal_Area"!==a.projName||(a.long0=a.longc),a.lat_ts||!a.lat1||"Stereographic_South_Pole"!==a.projName&&"Polar Stereographic (variant B)"!==a.projName||(a.lat0=g(a.lat1>0?90:-90),a.lat_ts=a.lat1)}var i=(this||self,.017453292519943295),j=a("e1");return c.exports=function(a,b){var c=JSON.parse((","+a).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),d=c.shift(),f=c.shift();c.unshift(["name",f]),c.unshift(["type",d]),c.unshift("output");var g={};return e(c,g),h(g.output),j(b,g.output)},c.exports}),a.registerDynamic("e2",[],!0,function(a,b,c){this||self;return b.greenwich=0,b.lisbon=-9.131906111111,b.paris=2.337229166667,b.bogota=-74.080916666667,b.madrid=-3.687938888889,b.rome=12.452333333333,b.bern=7.439583333333,b.jakarta=106.807719444444,b.ferro=-17.666666666667,b.brussels=4.367975,b.stockholm=18.058277777778,b.athens=23.7163375,b.oslo=10.722916666667,c.exports}),a.registerDynamic("e3",[],!0,function(a,b,c){this||self;return b.ft={to_meter:.3048},b["us-ft"]={to_meter:1200/3937},c.exports}),a.registerDynamic("df",["e2","e3"],!0,function(a,b,c){var d=(this||self,.017453292519943295),e=a("e2"),f=a("e3");return c.exports=function(a){var b={},c={};a.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).forEach(function(a){var b=a.split("=");b.push(!0),c[b[0].toLowerCase()]=b[1]});var g,h,i,j={proj:"projName",datum:"datumCode",rf:function(a){b.rf=parseFloat(a)},lat_0:function(a){b.lat0=a*d},lat_1:function(a){b.lat1=a*d},lat_2:function(a){b.lat2=a*d},lat_ts:function(a){b.lat_ts=a*d},lon_0:function(a){b.long0=a*d},lon_1:function(a){b.long1=a*d},lon_2:function(a){b.long2=a*d},alpha:function(a){b.alpha=parseFloat(a)*d},lonc:function(a){b.longc=a*d},x_0:function(a){b.x0=parseFloat(a)},y_0:function(a){b.y0=parseFloat(a)},k_0:function(a){b.k0=parseFloat(a)},k:function(a){b.k0=parseFloat(a)},a:function(a){b.a=parseFloat(a)},b:function(a){b.b=parseFloat(a)},r_a:function(){b.R_A=!0},zone:function(a){b.zone=parseInt(a,10)},south:function(){b.utmSouth=!0},towgs84:function(a){b.datum_params=a.split(",").map(function(a){return parseFloat(a)})},to_meter:function(a){b.to_meter=parseFloat(a)},units:function(a){b.units=a,f[a]&&(b.to_meter=f[a].to_meter)},from_greenwich:function(a){b.from_greenwich=a*d},pm:function(a){b.from_greenwich=(e[a]?e[a]:parseFloat(a))*d},nadgrids:function(a){"@null"===a?b.datumCode="none":b.nadgrids=a},axis:function(a){var c="ewnsud";3===a.length&&c.indexOf(a.substr(0,1))!==-1&&c.indexOf(a.substr(1,1))!==-1&&c.indexOf(a.substr(2,1))!==-1&&(b.axis=a)}};for(g in c)h=c[g],g in j?(i=j[g],"function"==typeof i?i(h):b[i]=h):b[g]=h;return"string"==typeof b.datumCode&&"WGS84"!==b.datumCode&&(b.datumCode=b.datumCode.toLowerCase()),b},c.exports}),a.registerDynamic("e4",["de","e0","df"],!0,function(a,b,c){function d(a){return"string"==typeof a}function e(a){return a in i}function f(a){var b=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return b.reduce(function(b,c){return b+1+a.indexOf(c)},0)}function g(a){return"+"===a[0]}function h(a){return d(a)?e(a)?i[a]:f(a)?j(a):g(a)?k(a):void 0:a}var i=(this||self,a("de")),j=a("e0"),k=a("df");return c.exports=h,c.exports}),a.registerDynamic("e5",["e6","e7","e8","e9"],!0,function(a,b,c){var d=(this||self,a("e6")),e=Math.PI/2,f=1e-10,g=57.29577951308232,h=a("e7"),i=Math.PI/4,j=a("e8"),k=a("e9");return b.init=function(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=d(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},b.forward=function(a){var b=a.x,c=a.y;if(c*g>90&&c*g<-90&&b*g>180&&b*g<-180)return null;var d,k;if(Math.abs(Math.abs(c)-e)<=f)return null;if(this.sphere)d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0+this.a*this.k0*Math.log(Math.tan(i+.5*c));else{var l=Math.sin(c),m=j(this.e,c,l);d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0-this.a*this.k0*Math.log(m)}return a.x=d,a.y=k,a},b.inverse=function(a){var b,c,d=a.x-this.x0,f=a.y-this.y0;if(this.sphere)c=e-2*Math.atan(Math.exp(-f/(this.a*this.k0)));else{var g=Math.exp(-f/(this.a*this.k0));if(c=k(this.e,g),c===-9999)return null}return b=h(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a},b.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],c.exports}),a.registerDynamic("ea",[],!0,function(a,b,c){function d(a){return a}this||self;return b.init=function(){},b.forward=d,b.inverse=d,b.names=["longlat","identity"],c.exports}),a.registerDynamic("eb",["e5","ea"],!0,function(a,b,c){function d(a,b){var c=g.length;return a.names?(g[c]=a,a.names.forEach(function(a){f[a.toLowerCase()]=c}),this):(console.log(b),!0)}var e=(this||self,[a("e5"),a("ea")]),f={},g=[];return b.add=d,b.get=function(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof f[b]&&g[f[b]]?g[f[b]]:void 0},b.start=function(){e.forEach(d)},c.exports}),a.registerDynamic("ec",[],!0,function(a,b,c){this||self;return b.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},b.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},b.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},b.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},b.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},b.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},b.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},b.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},b.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},b.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},b.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},b.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},b.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},b.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},b.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},b.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},c.exports}),a.registerDynamic("ed",[],!0,function(a,b,c){this||self;return b.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},b.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},b.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},b.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},b.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},b.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},b.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},b.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},b.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},b.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},b.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},b.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},b.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},b.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},b.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},b.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},b.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},b.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},b.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},b.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},b.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},b.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},b.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},b.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},b.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},b.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},b.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},b.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},b.hough={a:6378270,rf:297,ellipseName:"Hough"},b.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},b.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},b.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},b.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},b.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},b.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},b.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},b.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},b.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},b.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},b.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},b.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},b.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},b.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"},c.exports}),a.registerDynamic("e1",[],!0,function(a,b,c){this||self;return c.exports=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a},c.exports}),a.registerDynamic("ee",[],!0,function(a,b,c){var d=(this||self,Math.PI/2),e=1,f=2,g=3,h=4,i=5,j=484813681109536e-20,k=1.0026,l=.3826834323650898,m=function(a){return this instanceof m?(this.datum_type=h,void(a&&(a.datumCode&&"none"===a.datumCode&&(this.datum_type=i),a.datum_params&&(this.datum_params=a.datum_params.map(parseFloat),0===this.datum_params[0]&&0===this.datum_params[1]&&0===this.datum_params[2]||(this.datum_type=e),this.datum_params.length>3&&(0===this.datum_params[3]&&0===this.datum_params[4]&&0===this.datum_params[5]&&0===this.datum_params[6]||(this.datum_type=f,this.datum_params[3]*=j,this.datum_params[4]*=j,this.datum_params[5]*=j,this.datum_params[6]=this.datum_params[6]/1e6+1))),this.datum_type=a.grids?g:this.datum_type,this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_type===g&&(this.grids=a.grids)))):new m(a)};return m.prototype={compare_datums:function(a){return this.datum_type===a.datum_type&&(!(this.a!==a.a||Math.abs(this.es-a.es)>5e-11)&&(this.datum_type===e?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]:this.datum_type===f?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]&&this.datum_params[3]===a.datum_params[3]&&this.datum_params[4]===a.datum_params[4]&&this.datum_params[5]===a.datum_params[5]&&this.datum_params[6]===a.datum_params[6]:this.datum_type!==g&&a.datum_type!==g||this.nadgrids===a.nadgrids))},geodetic_to_geocentric:function(a){var b,c,e,f,g,h,i,j=a.x,k=a.y,l=a.z?a.z:0,m=0;if(k<-d&&k>-1.001*d)k=-d;else if(k>d&&k<1.001*d)k=d;else if(k<-d||k>d)return null;return j>Math.PI&&(j-=2*Math.PI),g=Math.sin(k),i=Math.cos(k),h=g*g,f=this.a/Math.sqrt(1-this.es*h),b=(f+l)*i*Math.cos(j),c=(f+l)*i*Math.sin(j),e=(f*(1-this.es)+l)*g,a.x=b,a.y=c,a.z=e,m},geocentric_to_geodetic:function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=1e-12,u=t*t,v=30,w=a.x,x=a.y,y=a.z?a.z:0;if(o=!1,b=Math.sqrt(w*w+x*x),c=Math.sqrt(w*w+x*x+y*y),b/this.a<t){if(o=!0,q=0,c/this.a<t)return r=d,void(s=-this.b)}else q=Math.atan2(x,w);e=y/c,f=b/c,g=1/Math.sqrt(1-this.es*(2-this.es)*f*f),j=f*(1-this.es)*g,k=e*g,p=0;do p++,i=this.a/Math.sqrt(1-this.es*k*k),s=b*j+y*k-i*(1-this.es*k*k),h=this.es*i/(i+s),g=1/Math.sqrt(1-h*(2-h)*f*f),l=f*(1-h)*g,m=e*g,n=m*j-l*k,j=l,k=m;while(n*n>u&&p<v);return r=Math.atan(m/Math.abs(l)),a.x=q,a.y=r,a.z=s,a},geocentric_to_geodetic_noniter:function(a){var b,c,e,f,g,h,i,j,m,n,o,p,q,r,s,t,u,v=a.x,w=a.y,x=a.z?a.z:0;if(v=parseFloat(v),w=parseFloat(w),x=parseFloat(x),u=!1,0!==v)b=Math.atan2(w,v);else if(w>0)b=d;else if(w<0)b=-d;else if(u=!0,b=0,x>0)c=d;else{if(!(x<0))return c=d,void(e=-this.b);c=-d}return g=v*v+w*w,f=Math.sqrt(g),h=x*k,j=Math.sqrt(h*h+g),n=h/j,p=f/j,o=n*n*n,i=x+this.b*this.ep2*o,t=f-this.a*this.es*p*p*p,m=Math.sqrt(i*i+t*t),q=i/m,r=t/m,s=this.a/Math.sqrt(1-this.es*q*q),e=r>=l?f/r-s:r<=-l?f/-r-s:x/q+s*(this.es-1),u===!1&&(c=Math.atan(q/r)),a.x=b,a.y=c,a.z=e,a},geocentric_to_wgs84:function(a){if(this.datum_type===e)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type===f){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=j*(a.x-i*a.y+h*a.z)+b,l=j*(i*a.x+a.y-g*a.z)+c,m=j*(-h*a.x+g*a.y+a.z)+d;a.x=k,a.y=l,a.z=m}},geocentric_from_wgs84:function(a){if(this.datum_type===e)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type===f){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=(a.x-b)/j,l=(a.y-c)/j,m=(a.z-d)/j;a.x=k+i*l-h*m,a.y=-i*k+l+g*m,a.z=h*k-g*l+m}}},c.exports=m,c.exports}),a.registerDynamic("ef",["ec","ed","e1","ee"],!0,function(a,b,c){var d=(this||self,a("ec")),e=a("ed"),f=a("e1"),g=a("ee"),h=1e-10,i=.16666666666666666,j=.04722222222222222,k=.022156084656084655;return c.exports=function(a){if(a.datumCode&&"none"!==a.datumCode){var b=d[a.datumCode];b&&(a.datum_params=b.towgs84?b.towgs84.split(","):null,a.ellps=b.ellipse,a.datumName=b.datumName?b.datumName:a.datumCode)}if(!a.a){var c=e[a.ellps]?e[a.ellps]:e.WGS84;f(a,c)}return a.rf&&!a.b&&(a.b=(1-1/a.rf)*a.a),(0===a.rf||Math.abs(a.a-a.b)<h)&&(a.sphere=!0,a.b=a.a),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=(a.a2-a.b2)/a.a2,a.e=Math.sqrt(a.es),a.R_A&&(a.a*=1-a.es*(i+a.es*(j+a.es*k)),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=0),a.ep2=(a.a2-a.b2)/a.b2,a.k0||(a.k0=1),a.axis||(a.axis="enu"),a.datum||(a.datum=g(a)),a},c.exports}),a.registerDynamic("d7",["e4","e1","eb","ef"],!0,function(a,b,c){function d(a,b){if(!(this instanceof d))return new d(a);b=b||function(a){if(a)throw a};var c=e(a);if("object"!=typeof c)return void b(a);var g=h(c),i=d.projections.get(g.projName);i?(f(this,g),f(this,i),this.init(),b(null,this)):b(a)}var e=(this||self,a("e4")),f=a("e1"),g=a("eb"),h=a("ef");return d.projections=g,d.projections.start(),c.exports=d,c.exports}),a.registerDynamic("f0",[],!0,function(a,b,c){this||self;return c.exports=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b},c.exports}),a.registerDynamic("d8",["db","dc","d7","f0"],!0,function(a,b,c){var d=(this||self,.017453292519943295),e=57.29577951308232,f=1,g=2,h=a("db"),i=a("dc"),j=a("d7"),k=a("f0");return c.exports=function a(b,c,l){function m(a,b){return(a.datum.datum_type===f||a.datum.datum_type===g)&&"WGS84"!==b.datumCode}var n;return Array.isArray(l)&&(l=k(l)),b.datum&&c.datum&&(m(b,c)||m(c,b))&&(n=new j("WGS84"),a(b,n,l),b=n),"enu"!==b.axis&&i(b,!1,l),"longlat"===b.projName?(l.x*=d,l.y*=d):(b.to_meter&&(l.x*=b.to_meter,l.y*=b.to_meter),b.inverse(l)),b.from_greenwich&&(l.x+=b.from_greenwich),l=h(b.datum,c.datum,l),c.from_greenwich&&(l.x-=c.from_greenwich),"longlat"===c.projName?(l.x*=e,l.y*=e):(c.forward(l),c.to_meter&&(l.x/=c.to_meter,l.y/=c.to_meter)),"enu"!==c.axis&&i(c,!0,l),l},c.exports}),a.registerDynamic("f1",[],!0,function(a,b,c){function d(a){return a*(Math.PI/180)}function e(a){return 180*(a/Math.PI)}function f(a){var b,c,e,f,g,i,j,k,l,m=a.lat,n=a.lon,o=6378137,p=.00669438,q=.9996,r=d(m),s=d(n);l=Math.floor((n+180)/6)+1,180===n&&(l=60),m>=56&&m<64&&n>=3&&n<12&&(l=32),m>=72&&m<84&&(n>=0&&n<9?l=31:n>=9&&n<21?l=33:n>=21&&n<33?l=35:n>=33&&n<42&&(l=37)),b=6*(l-1)-180+3,k=d(b),c=p/(1-p),e=o/Math.sqrt(1-p*Math.sin(r)*Math.sin(r)),f=Math.tan(r)*Math.tan(r),g=c*Math.cos(r)*Math.cos(r),i=Math.cos(r)*(s-k),j=o*((1-p/4-3*p*p/64-5*p*p*p/256)*r-(3*p/8+3*p*p/32+45*p*p*p/1024)*Math.sin(2*r)+(15*p*p/256+45*p*p*p/1024)*Math.sin(4*r)-35*p*p*p/3072*Math.sin(6*r));var t=q*e*(i+(1-f+g)*i*i*i/6+(5-18*f+f*f+72*g-58*c)*i*i*i*i*i/120)+5e5,u=q*(j+e*Math.tan(r)*(i*i/2+(5-f+9*g+4*g*g)*i*i*i*i/24+(61-58*f+f*f+600*g-330*c)*i*i*i*i*i*i/720));return m<0&&(u+=1e7),{northing:Math.round(u),easting:Math.round(t),zoneNumber:l,zoneLetter:h(m)}}function g(a){var b=a.northing,c=a.easting,d=a.zoneLetter,f=a.zoneNumber;if(f<0||f>60)return null;var h,i,j,k,l,m,n,o,p,q,r=.9996,s=6378137,t=.00669438,u=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t)),v=c-5e5,w=b;d<"N"&&(w-=1e7),o=6*(f-1)-180+3,h=t/(1-t),n=w/r,p=n/(s*(1-t/4-3*t*t/64-5*t*t*t/256)),q=p+(3*u/2-27*u*u*u/32)*Math.sin(2*p)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*p)+151*u*u*u/96*Math.sin(6*p),i=s/Math.sqrt(1-t*Math.sin(q)*Math.sin(q)),j=Math.tan(q)*Math.tan(q),k=h*Math.cos(q)*Math.cos(q),l=s*(1-t)/Math.pow(1-t*Math.sin(q)*Math.sin(q),1.5),m=v/(i*r);var x=q-i*Math.tan(q)/l*(m*m/2-(5+3*j+10*k-4*k*k-9*h)*m*m*m*m/24+(61+90*j+298*k+45*j*j-252*h-3*k*k)*m*m*m*m*m*m/720);x=e(x);var y=(m-(1+2*j+k)*m*m*m/6+(5-2*k+28*j-3*k*k+8*h+24*j*j)*m*m*m*m*m/120)/Math.cos(q);y=o+e(y);var z;if(a.accuracy){var A=g({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});z={top:A.lat,right:A.lon,bottom:x,left:y}}else z={lat:x,lon:y};return z}function h(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function i(a,b){var c="00000"+a.easting,d="00000"+a.northing;return a.zoneNumber+a.zoneLetter+j(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function j(a,b,c){var d=k(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return l(e,f,d)}function k(a){var b=a%q;return 0===b&&(b=q),b}function l(a,b,c){var d=c-1,e=r.charCodeAt(d),f=s.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>x&&(g=g-x+t-1,i=!0),(g===u||e<u&&g>u||(g>u||e<u)&&i)&&g++,(g===v||e<v&&g>v||(g>v||e<v)&&i)&&(g++,g===u&&g++),g>x&&(g=g-x+t-1),h>w?(h=h-w+t-1,i=!0):i=!1,(h===u||f<u&&h>u||(h>u||f<u)&&i)&&h++,(h===v||f<v&&h>v||(h>v||f<v)&&i)&&(h++,h===u&&h++),h>w&&(h=h-w+t-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function m(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if(h<="A"||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=k(g),j=n(d.charAt(0),i),l=o(d.charAt(1),i);l<p(h);)l+=2e6;var m=c-f;if(m%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var q,r,s,t,u,v=m/2,w=0,x=0;return v>0&&(q=1e5/Math.pow(10,v),r=a.substring(f,f+v),w=parseFloat(r)*q,s=a.substring(f+v),x=parseFloat(s)*q),t=w+j,u=x+l,{easting:t,northing:u,zoneLetter:h,zoneNumber:g,accuracy:q}}function n(a,b){for(var c=r.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>x){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function o(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=s.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>w){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function p(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":
b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}var q=(this||self,6),r="AJSAJS",s="AFAFAF",t=65,u=73,v=79,w=86,x=90;return b.forward=function(a,b){return b=b||5,i(f({lat:a[1],lon:a[0]}),b)},b.inverse=function(a){var b=g(m(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat,b.lon,b.lat]:[b.left,b.bottom,b.right,b.top]},b.toPoint=function(a){var b=g(m(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat]:[(b.left+b.right)/2,(b.top+b.bottom)/2]},c.exports}),a.registerDynamic("da",["f1"],!0,function(a,b,c){this||self;return c.exports=a("f1"),c.exports}),a.registerDynamic("f2",[],!0,function(a,b,c){this||self;return c.exports={name:"proj4",version:"2.3.15",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~12.0.1","grunt-browserify":"~4.0.1","grunt-contrib-uglify":"~0.11.1",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"~0.0.2"}},c.exports}),a.registerDynamic("f3",["f4","f5","f6","f7","f8","e7","f9","fa"],!0,function(a,b,c){var d=(this||self,a("f4")),e=a("f5"),f=a("f6"),g=a("f7"),h=a("f8"),i=a("e7"),j=Math.PI/2,k=1e-10,l=a("f9"),m=a("fa");return b.init=function(){this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*h(this.e0,this.e1,this.e2,this.e3,this.lat0)},b.forward=function(a){var b,c,d,e=a.x,f=a.y,g=i(e-this.long0),j=Math.sin(f),k=Math.cos(f);if(this.sphere){var l=k*Math.sin(g);if(Math.abs(Math.abs(l)-1)<1e-10)return 93;c=.5*this.a*this.k0*Math.log((1+l)/(1-l)),b=Math.acos(k*Math.cos(g)/Math.sqrt(1-l*l)),f<0&&(b=-b),d=this.a*this.k0*(b-this.lat0)}else{var m=k*g,n=Math.pow(m,2),o=this.ep2*Math.pow(k,2),p=Math.tan(f),q=Math.pow(p,2);b=1-this.es*Math.pow(j,2);var r=this.a/Math.sqrt(b),s=this.a*h(this.e0,this.e1,this.e2,this.e3,f);c=this.k0*r*m*(1+n/6*(1-q+o+n/20*(5-18*q+Math.pow(q,2)+72*o-58*this.ep2)))+this.x0,d=this.k0*(s-this.ml0+r*p*(n*(.5+n/24*(5-q+9*o+4*Math.pow(o,2)+n/30*(61-58*q+Math.pow(q,2)+600*o-330*this.ep2)))))+this.y0}return a.x=c,a.y=d,a},b.inverse=function(a){var b,c,d,e,f,g,h=6;if(this.sphere){var n=Math.exp(a.x/(this.a*this.k0)),o=.5*(n-1/n),p=this.lat0+a.y/(this.a*this.k0),q=Math.cos(p);b=Math.sqrt((1-q*q)/(1+o*o)),f=m(b),p<0&&(f=-f),g=0===o&&0===q?this.long0:i(Math.atan2(o,q)+this.long0)}else{var r=a.x-this.x0,s=a.y-this.y0;for(b=(this.ml0+s/this.k0)/this.a,c=b,e=0;!0&&(d=(b+this.e1*Math.sin(2*c)-this.e2*Math.sin(4*c)+this.e3*Math.sin(6*c))/this.e0-c,c+=d,!(Math.abs(d)<=k));e++)if(e>=h)return 95;if(Math.abs(c)<j){var t=Math.sin(c),u=Math.cos(c),v=Math.tan(c),w=this.ep2*Math.pow(u,2),x=Math.pow(w,2),y=Math.pow(v,2),z=Math.pow(y,2);b=1-this.es*Math.pow(t,2);var A=this.a/Math.sqrt(b),B=A*(1-this.es)/b,C=r/(A*this.k0),D=Math.pow(C,2);f=c-A*v*D/B*(.5-D/24*(5+3*y+10*w-4*x-9*this.ep2-D/30*(61+90*y+298*w+45*z-252*this.ep2-3*x))),g=i(this.long0+C*(1-D/6*(1+2*y+w-D/20*(5-2*w+28*y-3*x+8*this.ep2+24*z)))/u)}else f=j*l(s),g=this.long0}return a.x=g,a.y=f,a},b.names=["Transverse_Mercator","Transverse Mercator","tmerc"],c.exports}),a.registerDynamic("fb",["f3"],!0,function(a,b,c){var d=(this||self,.017453292519943295),e=a("f3");return b.dependsOn="tmerc",b.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*d,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,e.init.apply(this),this.forward=e.forward,this.inverse=e.inverse)},b.names=["Universal Transverse Mercator System","utm"],c.exports}),a.registerDynamic("fc",[],!0,function(a,b,c){this||self;return c.exports=function(a,b){return Math.pow((1-a)/(1+a),b)},c.exports}),a.registerDynamic("fd",["fc"],!0,function(a,b,c){var d=(this||self,Math.PI/4),e=a("fc"),f=Math.PI/2,g=20;return b.init=function(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+d)/(Math.pow(Math.tan(.5*this.lat0+d),this.C)*e(this.e*a,this.ratexp))},b.forward=function(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+d),this.C)*e(this.e*Math.sin(c),this.ratexp))-f,a.x=this.C*b,a},b.inverse=function(a){for(var b=1e-14,c=a.x/this.C,h=a.y,i=Math.pow(Math.tan(.5*h+d)/this.K,1/this.C),j=g;j>0&&(h=2*Math.atan(i*e(this.e*Math.sin(a.y),-.5*this.e))-f,!(Math.abs(h-a.y)<b));--j)a.y=h;return j?(a.x=c,a.y=h,a):null},b.names=["gauss"],c.exports}),a.registerDynamic("fe",["fd","e7"],!0,function(a,b,c){var d=(this||self,a("fd")),e=a("e7");return b.init=function(){d.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},b.forward=function(a){var b,c,f,g;return a.x=e(a.x-this.long0),d.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),f=Math.cos(a.x),g=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*f),a.x=g*c*Math.sin(a.x),a.y=g*(this.cosc0*b-this.sinc0*c*f),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},b.inverse=function(a){var b,c,f,g,h;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,h=Math.sqrt(a.x*a.x+a.y*a.y)){var i=2*Math.atan2(h,this.R2);b=Math.sin(i),c=Math.cos(i),g=Math.asin(c*this.sinc0+a.y*b*this.cosc0/h),f=Math.atan2(a.x*b,h*this.cosc0*c-a.y*this.sinc0*b)}else g=this.phic0,f=0;return a.x=f,a.y=g,d.inverse.apply(this,[a]),a.x=e(a.x+this.long0),a},b.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],c.exports}),a.registerDynamic("ff",["f9","e6","e8","e9","e7"],!0,function(a,b,c){var d=(this||self,Math.PI/2),e=1e-10,f=a("f9"),g=a("e6"),h=a("e8"),i=a("e9"),j=a("e7");return b.ssfn_=function(a,b,c){return b*=c,Math.tan(.5*(d+a))*Math.pow((1-b)/(1+b),.5*c)},b.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*(1+f(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=e&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*this.cons*g(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/h(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=g(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-d,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},b.forward=function(a){var b,c,f,g,i,k,l=a.x,m=a.y,n=Math.sin(m),o=Math.cos(m),p=j(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=e&&Math.abs(m+this.lat0)<=e?(a.x=NaN,a.y=NaN,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*n+this.coslat0*o*Math.cos(p)),a.x=this.a*b*o*Math.sin(p)+this.x0,a.y=this.a*b*(this.coslat0*n-this.sinlat0*o*Math.cos(p))+this.y0,a):(c=2*Math.atan(this.ssfn_(m,n,this.e))-d,g=Math.cos(c),f=Math.sin(c),Math.abs(this.coslat0)<=e?(i=h(this.e,m*this.con,this.con*n),k=2*this.a*this.k0*i/this.cons,a.x=this.x0+k*Math.sin(l-this.long0),a.y=this.y0-this.con*k*Math.cos(l-this.long0),a):(Math.abs(this.sinlat0)<e?(b=2*this.a*this.k0/(1+g*Math.cos(p)),a.y=b*f):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*g*Math.cos(p))),a.y=b*(this.cosX0*f-this.sinX0*g*Math.cos(p))+this.y0),a.x=b*g*Math.sin(p)+this.x0,a))},b.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,f,g,h,k=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var l=2*Math.atan(k/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,k<=e?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(l)*this.sinlat0+a.y*Math.sin(l)*this.coslat0/k),b=j(Math.abs(this.coslat0)<e?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(l),k*this.coslat0*Math.cos(l)-a.y*this.sinlat0*Math.sin(l))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=e){if(k<=e)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,f=k*this.cons/(2*this.a*this.k0),c=this.con*i(this.e,f),b=this.con*j(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else g=2*Math.atan(k*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,k<=e?h=this.X0:(h=Math.asin(Math.cos(g)*this.sinX0+a.y*Math.sin(g)*this.cosX0/k),b=j(this.long0+Math.atan2(a.x*Math.sin(g),k*this.cosX0*Math.cos(g)-a.y*this.sinX0*Math.sin(g)))),c=-1*i(this.e,Math.tan(.5*(d+h)));return a.x=b,a.y=c,a},b.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],c.exports}),a.registerDynamic("100",[],!0,function(a,b,c){this||self;return b.init=function(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j},b.forward=function(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a},b.inverse=function(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a},b.names=["somerc"],c.exports}),a.registerDynamic("101",["e8","e7","e9"],!0,function(a,b,c){var d=(this||self,a("e8")),e=a("e7"),f=a("e9"),g=Math.PI/2,h=Math.PI/4,i=1e-10;return b.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var f=d(this.e,this.lat0,a),g=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));g*g<1&&(g=1);var h,i;if(isNaN(this.longc)){var j=d(this.e,this.lat1,Math.sin(this.lat1)),k=d(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(g+Math.sqrt(g*g-1))*Math.pow(f,this.bl):this.el=(g-Math.sqrt(g*g-1))*Math.pow(f,this.bl);var l=Math.pow(j,this.bl),m=Math.pow(k,this.bl);h=this.el/l,i=.5*(h-1/h);var n=(this.el*this.el-m*l)/(this.el*this.el+m*l),o=(m-l)/(m+l),p=e(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(n*Math.tan(.5*this.bl*p)/o)/this.bl,this.long0=e(this.long0);var q=e(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*q)/i),this.alpha=Math.asin(g*Math.sin(this.gamma0))}else h=this.lat0>=0?g+Math.sqrt(g*g-1):g-Math.sqrt(g*g-1),this.el=h*Math.pow(f,this.bl),i=.5*(h-1/h),this.gamma0=Math.asin(Math.sin(this.alpha)/g),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha))},b.forward=function(a){var b,c,f,j=a.x,k=a.y,l=e(j-this.long0);if(Math.abs(Math.abs(k)-g)<=i)f=k>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(h+f*this.gamma0*.5)),b=-1*f*g*this.al/this.bl;else{var m=d(this.e,k,Math.sin(k)),n=this.el/Math.pow(m,this.bl),o=.5*(n-1/n),p=.5*(n+1/n),q=Math.sin(this.bl*l),r=(o*Math.sin(this.gamma0)-q*Math.cos(this.gamma0))/p;c=Math.abs(Math.abs(r)-1)<=i?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-r)/(1+r))/this.bl,b=Math.abs(Math.cos(this.bl*l))<=i?this.al*this.bl*l:this.al*Math.atan2(o*Math.cos(this.gamma0)+q*Math.sin(this.gamma0),Math.cos(this.bl*l))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a},b.inverse=function(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),h=.5*(d-1/d),j=.5*(d+1/d),k=Math.sin(this.bl*b/this.al),l=(k*Math.cos(this.gamma0)+h*Math.sin(this.gamma0))/j,m=Math.pow(this.el/Math.sqrt((1+l)/(1-l)),1/this.bl);return Math.abs(l-1)<i?(a.x=this.long0,a.y=g):Math.abs(l+1)<i?(a.x=this.long0,a.y=-1*g):(a.y=f(this.e,m),a.x=e(this.long0-Math.atan2(h*Math.cos(this.gamma0)-k*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a},b.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],c.exports}),a.registerDynamic("e8",[],!0,function(a,b,c){var d=(this||self,Math.PI/2);return c.exports=function(a,b,c){var e=a*c,f=.5*a;return e=Math.pow((1-e)/(1+e),f),Math.tan(.5*(d-b))/e},c.exports}),a.registerDynamic("e9",[],!0,function(a,b,c){var d=(this||self,Math.PI/2);return c.exports=function(a,b){for(var c,e,f=.5*a,g=d-2*Math.atan(b),h=0;h<=15;h++)if(c=a*Math.sin(g),e=d-2*Math.atan(b*Math.pow((1-c)/(1+c),f))-g,g+=e,Math.abs(e)<=1e-10)return g;return-9999},c.exports}),a.registerDynamic("102",["e6","e8","f9","e7","e9"],!0,function(a,b,c){var d=(this||self,1e-10),e=a("e6"),f=a("e8"),g=Math.PI/2,h=a("f9"),i=a("e7"),j=a("e9");return b.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<d)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),g=e(this.e,b,c),h=f(this.e,this.lat1,b),i=Math.sin(this.lat2),j=Math.cos(this.lat2),k=e(this.e,i,j),l=f(this.e,this.lat2,i),m=f(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>d?this.ns=Math.log(g/k)/Math.log(h/l):this.ns=b,isNaN(this.ns)&&(this.ns=b),this.f0=g/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}},b.forward=function(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=d&&(c=h(c)*(g-2*d));var e,j,k=Math.abs(Math.abs(c)-g);if(k>d)e=f(this.e,c,Math.sin(c)),j=this.a*this.f0*Math.pow(e,this.ns);else{if(k=c*this.ns,k<=0)return null;j=0}var l=this.ns*i(b-this.long0);return a.x=this.k0*(j*Math.sin(l))+this.x0,a.y=this.k0*(this.rh-j*Math.cos(l))+this.y0,a},b.inverse=function(a){var b,c,d,e,f,h=(a.x-this.x0)/this.k0,k=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(h*h+k*k),c=1):(b=-Math.sqrt(h*h+k*k),c=-1);var l=0;if(0!==b&&(l=Math.atan2(c*h,c*k)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=j(this.e,d),e===-9999)return null}else e=-g;return f=i(l/this.ns+this.long0),a.x=f,a.y=e,a},b.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],c.exports}),a.registerDynamic("103",["e7"],!0,function(a,b,c){var d=(this||self,a("e7"));return b.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},b.forward=function(a){var b,c,e,f,g,h,i,j=a.x,k=a.y,l=d(j-this.long0);return b=Math.pow((1+this.e*Math.sin(k))/(1-this.e*Math.sin(k)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(k/2+this.s45),this.alfa)/b)-this.s45),e=-l*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(e)),g=Math.asin(Math.cos(c)*Math.sin(e)/Math.cos(f)),h=this.n*g,i=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),a.y=i*Math.cos(h)/1,a.x=i*Math.sin(h)/1,this.czech||(a.y*=-1,a.x*=-1),a},b.inverse=function(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&k<15);return k>=15?null:a},b.names=["Krovak","krovak"],c.exports}),a.registerDynamic("104",["f8","f4","f5","f6","f7","105","e7","106","107"],!0,function(a,b,c){var d=(this||self,a("f8")),e=a("f4"),f=a("f5"),g=a("f6"),h=a("f7"),i=a("105"),j=a("e7"),k=a("106"),l=a("107"),m=Math.PI/2,n=1e-10;return b.init=function(){this.sphere||(this.e0=e(this.es),this.e1=f(this.es),this.e2=g(this.es),this.e3=h(this.es),this.ml0=this.a*d(this.e0,this.e1,this.e2,this.e3,this.lat0))},b.forward=function(a){var b,c,e=a.x,f=a.y;if(e=j(e-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(f)*Math.sin(e)),c=this.a*(Math.atan2(Math.tan(f),Math.cos(e))-this.lat0);else{var g=Math.sin(f),h=Math.cos(f),k=i(this.a,this.e,g),l=Math.tan(f)*Math.tan(f),m=e*Math.cos(f),n=m*m,o=this.es*h*h/(1-this.es),p=this.a*d(this.e0,this.e1,this.e2,this.e3,f);b=k*m*(1-n*l*(1/6-(8-l+8*o)*n/120)),c=p-this.ml0+k*g/h*n*(.5+(5-l+6*o)*n/24)}return a.x=b+this.x0,a.y=c+this.y0,a},b.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=l(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-m)<=n)return a.x=this.long0,a.y=m,e<0&&(a.y*=-1),a;var o=i(this.a,this.e,Math.sin(h)),p=o*o*o/this.a/this.a*(1-this.es),q=Math.pow(Math.tan(h),2),r=d*this.a/o,s=r*r;b=h-o*Math.tan(h)/p*r*r*(.5-(1+3*q)*r*r/24),c=r*(1-s*(q/3+(1+3*q)*q*s/15))/Math.cos(h)}return a.x=j(c+this.long0),a.y=k(b),a},b.names=["Cassini","Cassini_Soldner","cass"],c.exports}),a.registerDynamic("108",["109","e7"],!0,function(a,b,c){var d=(this||self,Math.PI/2),e=Math.PI/4,f=1e-10,g=a("109"),h=a("e7");return b.S_POLE=1,b.N_POLE=2,b.EQUIT=3,b.OBLIQ=4,b.init=function(){var a=Math.abs(this.lat0);if(Math.abs(a-d)<f?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<f?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var b;switch(this.qp=g(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=g(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},b.forward=function(a){var b,c,i,j,k,l,m,n,o,p,q=a.x,r=a.y;if(q=h(q-this.long0),this.sphere){if(k=Math.sin(r),p=Math.cos(r),i=Math.cos(q),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+p*i:1+this.sinph0*k+this.cosph0*p*i,c<=f)return null;c=Math.sqrt(2/c),b=c*p*Math.sin(q),c*=this.mode===this.EQUIT?k:this.cosph0*k-this.sinph0*p*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(r+this.phi0)<f)return null;c=e-.5*r,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(q),c*=i}}else{switch(m=0,n=0,o=0,i=Math.cos(q),j=Math.sin(q),k=Math.sin(r),l=g(this.e,k),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=l/this.qp,n=Math.sqrt(1-m*m)),this.mode){case this.OBLIQ:o=1+this.sinb1*m+this.cosb1*n*i;break;case this.EQUIT:o=1+n*i;break;case this.N_POLE:o=d+r,l=this.qp-l;break;case this.S_POLE:o=r-d,l=this.qp+l}if(Math.abs(o)<f)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:o=Math.sqrt(2/o),c=this.mode===this.OBLIQ?this.ymf*o*(this.cosb1*m-this.sinb1*n*i):(o=Math.sqrt(2/(1+n*i)))*m*this.ymf,b=this.xmf*o*n*j;break;case this.N_POLE:case this.S_POLE:l>=0?(b=(o=Math.sqrt(l))*j,c=i*(this.mode===this.S_POLE?o:-o)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a},b.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,e,g,i,j,k,l=a.x/this.a,m=a.y/this.a;if(this.sphere){var n,o=0,p=0;if(n=Math.sqrt(l*l+m*m),c=.5*n,c>1)return null;switch(c=2*Math.asin(c),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(c),o=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(n)<=f?0:Math.asin(m*p/n),l*=p,m=o*n;break;case this.OBLIQ:c=Math.abs(n)<=f?this.phi0:Math.asin(o*this.sinph0+m*p*this.cosph0/n),l*=p*this.cosph0,m=(o-Math.sin(c)*this.sinph0)*n;break;case this.N_POLE:m=-m,c=d-c;break;case this.S_POLE:c-=d}b=0!==m||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,m):0}else{if(k=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,m*=this.dd,j=Math.sqrt(l*l+m*m),j<f)return a.x=0,a.y=this.phi0,a;g=2*Math.asin(.5*j/this.rq),e=Math.cos(g),l*=g=Math.sin(g),this.mode===this.OBLIQ?(k=e*this.sinb1+m*g*this.cosb1/j,i=this.qp*k,m=j*this.cosb1*e-m*this.sinb1*g):(k=m*g/j,i=this.qp*k,m=j*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),i=l*l+m*m,!i)return a.x=0,a.y=this.phi0,a;k=1-i/this.qp,this.mode===this.S_POLE&&(k=-k)}b=Math.atan2(l,m),c=this.authlat(Math.asin(k),this.apa)}return a.x=h(this.long0+b),a.y=c,a},b.P00=.3333333333333333,b.P01=.17222222222222222,b.P02=.10257936507936508,b.P10=.06388888888888888,b.P11=.0664021164021164,b.P20=.016415012942191543,b.authset=function(a){var b,c=[];return c[0]=a*this.P00,b=a*a,c[0]+=b*this.P01,c[1]=b*this.P10,b*=a,c[0]+=b*this.P02,c[1]+=b*this.P11,c[2]=b*this.P20,c},b.authlat=function(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)},b.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],c.exports}),a.registerDynamic("10a",["e6","109","e7","fa"],!0,function(a,b,c){var d=(this||self,1e-10),e=a("e6"),f=a("109"),g=a("e7"),h=a("fa");return b.init=function(){Math.abs(this.lat1+this.lat2)<d||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=e(this.e3,this.sin_po,this.cos_po),this.qs1=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=e(this.e3,this.sin_po,this.cos_po),this.qs2=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=f(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>d?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},b.forward=function(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=f(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,h=this.ns0*g(b-this.long0),i=e*Math.sin(h)+this.x0,j=this.rh-e*Math.cos(h)+this.y0;return a.x=i,a.y=j,a},b.inverse=function(a){var b,c,d,e,f,h;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?h=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,h=this.phi1z(this.e3,c)),f=g(e/this.ns0+this.long0),a.x=f,a.y=h,a},b.phi1z=function(a,b){var c,e,f,g,i,j=h(.5*b);if(a<d)return j;for(var k=a*a,l=1;l<=25;l++)if(c=Math.sin(j),e=Math.cos(j),f=a*c,g=1-f*f,i=.5*g*g/e*(b/(1-k)-c/g+.5/a*Math.log((1-f)/(1+f))),j+=i,Math.abs(i)<=1e-7)return j;return null},b.names=["Albers_Conic_Equal_Area","Albers","aea"],c.exports}),a.registerDynamic("10b",["e7","fa"],!0,function(a,b,c){var d=(this||self,a("e7")),e=1e-10,f=a("fa");return b.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},b.forward=function(a){var b,c,f,g,h,i,j,k,l=a.x,m=a.y;return f=d(l-this.long0),b=Math.sin(m),c=Math.cos(m),g=Math.cos(f),i=this.sin_p14*b+this.cos_p14*c*g,h=1,i>0||Math.abs(i)<=e?(j=this.x0+this.a*h*c*Math.sin(f)/i,k=this.y0+this.a*h*(this.cos_p14*b-this.sin_p14*c*g)/i):(j=this.x0+this.infinity_dist*c*Math.sin(f),k=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*g)),a.x=j,a.y=k,a},b.inverse=function(a){var b,c,e,g,h,i;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(g=Math.atan2(b,this.rc),c=Math.sin(g),e=Math.cos(g),i=f(e*this.sin_p14+a.y*c*this.cos_p14/b),h=Math.atan2(a.x*c,b*this.cos_p14*e-a.y*this.sin_p14*c),h=d(this.long0+h)):(i=this.phic0,h=0),a.x=h,a.y=i,a},b.names=["gnom"],c.exports}),a.registerDynamic("109",[],!0,function(a,b,c){this||self;return c.exports=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},c.exports}),a.registerDynamic("10c",[],!0,function(a,b,c){var d=(this||self,Math.PI/2);return c.exports=function(a,b){var c=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-c)<1e-6)return b<0?-1*d:d;for(var e,f,g,h,i=Math.asin(.5*b),j=0;j<30;j++)if(f=Math.sin(i),g=Math.cos(i),h=a*f,e=Math.pow(1-h*h,2)/(2*g)*(b/(1-a*a)-f/(1-h*h)+.5/a*Math.log((1-h)/(1+h))),i+=e,Math.abs(e)<=1e-10)return i;return NaN},c.exports}),a.registerDynamic("10d",["e7","109","e6","10c"],!0,function(a,b,c){var d=(this||self,a("e7")),e=a("109"),f=a("e6"),g=a("10c");return b.init=function(){this.sphere||(this.k0=f(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},b.forward=function(a){var b,c,f=a.x,g=a.y,h=d(f-this.long0);if(this.sphere)b=this.x0+this.a*h*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(g)/Math.cos(this.lat_ts);else{var i=e(this.e,Math.sin(g));b=this.x0+this.a*this.k0*h,c=this.y0+this.a*i*.5/this.k0}return a.x=b,a.y=c,a},b.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=d(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=g(this.e,2*a.y*this.k0/this.a),b=d(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a},b.names=["cea"],c.exports}),a.registerDynamic("10e",["e7","106"],!0,function(a,b,c){var d=(this||self,a("e7")),e=a("106");return b.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},b.forward=function(a){var b=a.x,c=a.y,f=d(b-this.long0),g=e(c-this.lat0);return a.x=this.x0+this.a*f*this.rc,a.y=this.y0+this.a*g,a},b.inverse=function(a){var b=a.x,c=a.y;return a.x=d(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=e(this.lat0+(c-this.y0)/this.a),a},b.names=["Equirectangular","Equidistant_Cylindrical","eqc"],c.exports}),a.registerDynamic("10f",["f4","f5","f6","f7","e7","106","f8","105"],!0,function(a,b,c){var d=(this||self,a("f4")),e=a("f5"),f=a("f6"),g=a("f7"),h=a("e7"),i=a("106"),j=a("f8"),k=1e-10,l=a("105"),m=20;return b.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*j(this.e0,this.e1,this.e2,this.e3,this.lat0)},b.forward=function(a){var b,c,d,e=a.x,f=a.y,g=h(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=k?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(i(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=k)b=this.a*g,c=-1*this.ml0;else{var m=l(this.a,this.e,Math.sin(f))/Math.tan(f);b=m*Math.sin(d),c=this.a*j(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+m*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a},b.inverse=function(a){var b,c,d,e,f,g,i,l,n;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=k)b=h(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,i=d*d/this.a/this.a+g*g,l=g;var o;for(f=m;f;--f)if(o=Math.tan(l),n=-1*(g*(l*o+1)-l-.5*(l*l+i)*o)/((l-g)/o-1),l+=n,Math.abs(n)<=k){c=l;break}b=h(this.long0+Math.asin(d*Math.tan(l)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=k)c=0,b=h(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,i=d*d/this.a/this.a+g*g,l=g;var p,q,r,s,t;for(f=m;f;--f)if(t=this.e*Math.sin(l),p=Math.sqrt(1-t*t)*Math.tan(l),q=this.a*j(this.e0,this.e1,this.e2,this.e3,l),r=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),s=q/this.a,n=(g*(p*s+1)-s-.5*p*(s*s+i))/(this.es*Math.sin(2*l)*(s*s+i-2*g*s)/(4*p)+(g-s)*(p*r-2/Math.sin(2*l))-r),l-=n,Math.abs(n)<=k){c=l;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=h(this.long0+Math.asin(d*p/this.a)/Math.sin(c))}return a.x=b,a.y=c,a},b.names=["Polyconic","poly"],c.exports}),a.registerDynamic("110",[],!0,function(a,b,c){var d=(this||self,484813681109536e-20);return b.iterations=1,b.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},b.forward=function(a){var b,c=a.x,e=a.y,f=e-this.lat0,g=c-this.long0,h=f/d*1e-5,i=g,j=1,k=0;for(b=1;b<=10;b++)j*=h,k+=this.A[b]*j;var l,m,n=k,o=i,p=1,q=0,r=0,s=0;
for(b=1;b<=6;b++)l=p*n-q*o,m=q*n+p*o,p=l,q=m,r=r+this.B_re[b]*p-this.B_im[b]*q,s=s+this.B_im[b]*p+this.B_re[b]*q;return a.x=s*this.a+this.x0,a.y=r*this.a+this.y0,a},b.inverse=function(a){var b,c,e,f=a.x,g=a.y,h=f-this.x0,i=g-this.y0,j=i/this.a,k=h/this.a,l=1,m=0,n=0,o=0;for(b=1;b<=6;b++)c=l*j-m*k,e=m*j+l*k,l=c,m=e,n=n+this.C_re[b]*l-this.C_im[b]*m,o=o+this.C_im[b]*l+this.C_re[b]*m;for(var p=0;p<this.iterations;p++){var q,r,s=n,t=o,u=j,v=k;for(b=2;b<=6;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,u+=(b-1)*(this.B_re[b]*s-this.B_im[b]*t),v+=(b-1)*(this.B_im[b]*s+this.B_re[b]*t);s=1,t=0;var w=this.B_re[1],x=this.B_im[1];for(b=2;b<=6;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,w+=b*(this.B_re[b]*s-this.B_im[b]*t),x+=b*(this.B_im[b]*s+this.B_re[b]*t);var y=w*w+x*x;n=(u*w+v*x)/y,o=(v*w-u*x)/y}var z=n,A=o,B=1,C=0;for(b=1;b<=9;b++)B*=z,C+=this.D[b]*B;var D=this.lat0+C*d*1e5,E=this.long0+A;return a.x=E,a.y=D,a},b.names=["New_Zealand_Map_Grid","nzmg"],c.exports}),a.registerDynamic("111",["e7"],!0,function(a,b,c){var d=(this||self,a("e7"));return b.init=function(){},b.forward=function(a){var b=a.x,c=a.y,e=d(b-this.long0),f=this.x0+this.a*e,g=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=f,a.y=g,a},b.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b=d(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a},b.names=["Miller_Cylindrical","mill"],c.exports}),a.registerDynamic("112",[],!0,function(a,b,c){var d=(this||self,1),e=.25,f=.046875,g=.01953125,h=.01068115234375,i=.75,j=.46875,k=.013020833333333334,l=.007120768229166667,m=.3645833333333333,n=.005696614583333333,o=.3076171875;return c.exports=function(a){var b=[];b[0]=d-a*(e+a*(f+a*(g+a*h))),b[1]=a*(i-a*(f+a*(g+a*h)));var c=a*a;return b[2]=c*(j-a*(k+a*l)),c*=a,b[3]=c*(m-a*n),b[4]=c*a*o,b},c.exports}),a.registerDynamic("113",[],!0,function(a,b,c){this||self;return c.exports=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},c.exports}),a.registerDynamic("114",["113"],!0,function(a,b,c){var d=(this||self,a("113")),e=1e-10,f=20;return c.exports=function(a,b,c){for(var g=1/(1-b),h=a,i=f;i;--i){var j=Math.sin(h),k=1-b*j*j;if(k=(d(h,j,Math.cos(h),c)-a)*(k*Math.sqrt(k))*g,h-=k,Math.abs(k)<e)return h}return h},c.exports}),a.registerDynamic("115",["e7","106","112","113","114","fa"],!0,function(a,b,c){var d=(this||self,a("e7")),e=a("106"),f=a("112"),g=20,h=a("113"),i=a("114"),j=Math.PI/2,k=1e-10,l=a("fa");return b.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=f(this.es)},b.forward=function(a){var b,c,e=a.x,f=a.y;if(e=d(e-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(f),j=g;j;--j){var l=(this.m*f+Math.sin(f)-i)/(this.m+Math.cos(f));if(f-=l,Math.abs(l)<k)break}else f=1!==this.n?Math.asin(this.n*Math.sin(f)):f;b=this.a*this.C_x*e*(this.m+Math.cos(f)),c=this.a*this.C_y*f}else{var m=Math.sin(f),n=Math.cos(f);c=this.a*h(f,m,n,this.en),b=this.a*e*n/Math.sqrt(1-this.es*m*m)}return a.x=b,a.y=c,a},b.inverse=function(a){var b,c,f,g;return a.x-=this.x0,f=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,f/=this.C_x*(this.m+Math.cos(b)),this.m?b=l((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=l(Math.sin(b)/this.n)),f=d(f+this.long0),b=e(b)):(b=i(a.y/this.a,this.es,this.en),g=Math.abs(b),g<j?(g=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*g*g)/(this.a*Math.cos(b)),f=d(c)):g-k<j&&(f=this.long0)),a.x=f,a.y=b,a},b.names=["Sinusoidal","sinu"],c.exports}),a.registerDynamic("116",["e7"],!0,function(a,b,c){var d=(this||self,a("e7")),e=1e-10;return b.init=function(){},b.forward=function(a){for(var b=a.x,c=a.y,f=d(b-this.long0),g=c,h=Math.PI*Math.sin(c),i=0;!0;i++){var j=-(g+Math.sin(g)-h)/(1+Math.cos(g));if(g+=j,Math.abs(j)<e)break}g/=2,Math.PI/2-Math.abs(c)<e&&(f=0);var k=.900316316158*this.a*f*Math.cos(g)+this.x0,l=1.4142135623731*this.a*Math.sin(g)+this.y0;return a.x=k,a.y=l,a},b.inverse=function(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var e=d(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));e<-Math.PI&&(e=-Math.PI),e>Math.PI&&(e=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var f=Math.asin(c);return a.x=e,a.y=f,a},b.names=["Mollweide","moll"],c.exports}),a.registerDynamic("e6",[],!0,function(a,b,c){this||self;return c.exports=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},c.exports}),a.registerDynamic("106",["f9"],!0,function(a,b,c){var d=(this||self,Math.PI/2),e=a("f9");return c.exports=function(a){return Math.abs(a)<d?a:a-e(a)*Math.PI},c.exports}),a.registerDynamic("117",["f4","f5","f6","f7","e6","f8","e7","106","107"],!0,function(a,b,c){var d=(this||self,a("f4")),e=a("f5"),f=a("f6"),g=a("f7"),h=a("e6"),i=a("f8"),j=a("e7"),k=a("106"),l=a("107"),m=1e-10;return b.init=function(){Math.abs(this.lat1+this.lat2)<m||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=h(this.e,this.sinphi,this.cosphi),this.ml1=i(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<m?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=h(this.e,this.sinphi,this.cosphi),this.ml2=i(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=i(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},b.forward=function(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=i(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*j(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a},b.inverse=function(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=j(this.long0+f/this.ns),d=k(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=l(g,this.e0,this.e1,this.e2,this.e3),e=j(this.long0+f/this.ns),a.x=e,a.y=d,a},b.names=["Equidistant_Conic","eqdc"],c.exports}),a.registerDynamic("118",["e7","fa"],!0,function(a,b,c){var d=(this||self,a("e7")),e=Math.PI/2,f=1e-10,g=a("fa");return b.init=function(){this.R=this.a},b.forward=function(a){var b,c,h=a.x,i=a.y,j=d(h-this.long0);Math.abs(i)<=f&&(b=this.x0+this.R*j,c=this.y0);var k=g(2*Math.abs(i/Math.PI));(Math.abs(j)<=f||Math.abs(Math.abs(i)-e)<=f)&&(b=this.x0,c=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*k):this.y0+Math.PI*this.R*-Math.tan(.5*k));var l=.5*Math.abs(Math.PI/j-j/Math.PI),m=l*l,n=Math.sin(k),o=Math.cos(k),p=o/(n+o-1),q=p*p,r=p*(2/n-1),s=r*r,t=Math.PI*this.R*(l*(p-s)+Math.sqrt(m*(p-s)*(p-s)-(s+m)*(q-s)))/(s+m);j<0&&(t=-t),b=this.x0+t;var u=m+p;return t=Math.PI*this.R*(r*u-l*Math.sqrt((s+m)*(m+1)-u*u))/(s+m),c=i>=0?this.y0+t:this.y0-t,a.x=b,a.y=c,a},b.inverse=function(a){var b,c,e,g,h,i,j,k,l,m,n,o,p;return a.x-=this.x0,a.y-=this.y0,n=Math.PI*this.R,e=a.x/n,g=a.y/n,h=e*e+g*g,i=-Math.abs(g)*(1+h),j=i-2*g*g+e*e,k=-2*i+1+2*g*g+h*h,p=g*g/k+(2*j*j*j/k/k/k-9*i*j/k/k)/27,l=(i-j*j/3/k)/k,m=2*Math.sqrt(-l/3),n=3*p/l/m,Math.abs(n)>1&&(n=n>=0?1:-1),o=Math.acos(n)/3,c=a.y>=0?(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI:-(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI,b=Math.abs(e)<f?this.long0:d(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(e*e-g*g)+h*h))/2/e),a.x=b,a.y=c,a},b.names=["Van_der_Grinten_I","VanDerGrinten","vandg"],c.exports}),a.registerDynamic("f9",[],!0,function(a,b,c){this||self;return c.exports=function(a){return a<0?-1:1},c.exports}),a.registerDynamic("e7",["f9"],!0,function(a,b,c){var d=(this||self,2*Math.PI),e=3.14159265359,f=a("f9");return c.exports=function(a){return Math.abs(a)<=e?a:a-f(a)*d},c.exports}),a.registerDynamic("f8",[],!0,function(a,b,c){this||self;return c.exports=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},c.exports}),a.registerDynamic("f4",[],!0,function(a,b,c){this||self;return c.exports=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},c.exports}),a.registerDynamic("f5",[],!0,function(a,b,c){this||self;return c.exports=function(a){return.375*a*(1+.25*a*(1+.46875*a))},c.exports}),a.registerDynamic("f6",[],!0,function(a,b,c){this||self;return c.exports=function(a){return.05859375*a*a*(1+.75*a)},c.exports}),a.registerDynamic("f7",[],!0,function(a,b,c){this||self;return c.exports=function(a){return a*a*a*(35/3072)},c.exports}),a.registerDynamic("105",[],!0,function(a,b,c){this||self;return c.exports=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},c.exports}),a.registerDynamic("fa",[],!0,function(a,b,c){this||self;return c.exports=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},c.exports}),a.registerDynamic("107",[],!0,function(a,b,c){this||self;return c.exports=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;h<15;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return NaN},c.exports}),a.registerDynamic("119",["e7","f8","f4","f5","f6","f7","105","fa","107"],!0,function(a,b,c){var d=(this||self,a("e7")),e=Math.PI/2,f=1e-10,g=a("f8"),h=a("f4"),i=a("f5"),j=a("f6"),k=a("f7"),l=a("105"),m=a("fa"),n=a("107");return b.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},b.forward=function(a){var b,c,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=a.x,I=a.y,J=Math.sin(a.y),K=Math.cos(a.y),L=d(H-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=f?(a.x=this.x0+this.a*(e-I)*Math.sin(L),a.y=this.y0-this.a*(e-I)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(a.x=this.x0+this.a*(e+I)*Math.sin(L),a.y=this.y0+this.a*(e+I)*Math.cos(L),a):(B=this.sin_p12*J+this.cos_p12*K*Math.cos(L),z=Math.acos(B),A=z/Math.sin(z),a.x=this.x0+this.a*A*K*Math.sin(L),a.y=this.y0+this.a*A*(this.cos_p12*J-this.sin_p12*K*Math.cos(L)),a):(b=h(this.es),c=i(this.es),m=j(this.es),n=k(this.es),Math.abs(this.sin_p12-1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o-p)*Math.sin(L),a.y=this.y0-(o-p)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o+p)*Math.sin(L),a.y=this.y0+(o+p)*Math.cos(L),a):(q=J/K,r=l(this.a,this.e,this.sin_p12),s=l(this.a,this.e,J),t=Math.atan((1-this.es)*q+this.es*r*this.sin_p12/(s*K)),u=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(t)-this.sin_p12*Math.cos(L)),C=0===u?Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.abs(Math.abs(u)-Math.PI)<=f?-Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.asin(Math.sin(L)*Math.cos(t)/Math.sin(u)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),w=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),x=v*w,y=w*w,D=C*C,E=D*C,F=E*C,G=F*C,z=r*C*(1-D*y*(1-y)/6+E/8*x*(1-2*y)+F/120*(y*(4-7*y)-3*v*v*(1-7*y))-G/48*x),a.x=this.x0+z*Math.sin(u),a.y=this.y0+z*Math.cos(u),a))},b.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*e*this.a)return;return c=b/this.a,o=Math.sin(c),p=Math.cos(c),q=this.long0,Math.abs(b)<=f?r=this.lat0:(r=m(p*this.sin_p12+a.y*o*this.cos_p12/b),s=Math.abs(this.lat0)-e,q=d(Math.abs(s)<=f?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*o,b*this.cos_p12*p-a.y*this.sin_p12*o))),a.x=q,a.y=r,a}return t=h(this.es),u=i(this.es),v=j(this.es),w=k(this.es),Math.abs(this.sin_p12-1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=x-b,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,-1*a.y)),a.x=q,a.y=r,a):Math.abs(this.sin_p12+1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=b-x,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,a.y)),a.x=q,a.y=r,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),B=Math.atan2(a.x,a.y),z=l(this.a,this.e,this.sin_p12),C=Math.cos(B),D=this.e*this.cos_p12*C,E=-D*D/(1-this.es),F=3*this.es*(1-E)*this.sin_p12*this.cos_p12*C/(1-this.es),G=b/z,H=G-E*(1+E)*Math.pow(G,3)/6-F*(1+3*E)*Math.pow(G,4)/24,I=1-E*H*H/2-G*H*H*H/6,A=Math.asin(this.sin_p12*Math.cos(H)+this.cos_p12*Math.sin(H)*C),q=d(this.long0+Math.asin(Math.sin(B)*Math.sin(H)/Math.cos(A))),r=Math.atan((1-this.es*I*this.sin_p12/Math.sin(A))*Math.tan(A)/(1-this.es)),a.x=q,a.y=r,a)},b.names=["Azimuthal_Equidistant","aeqd"],c.exports}),a.registerDynamic("11a",["f3","fb","fe","ff","100","101","102","103","104","108","10a","10b","10d","10e","10f","110","111","115","116","117","118","119"],!0,function(a,b,c){var d=(this||self,[a("f3"),a("fb"),a("fe"),a("ff"),a("100"),a("101"),a("102"),a("103"),a("104"),a("108"),a("10a"),a("10b"),a("10d"),a("10e"),a("10f"),a("110"),a("111"),a("115"),a("116"),a("117"),a("118"),a("119")]);return c.exports=function(a){d.forEach(function(b){a.Proj.projections.add(b)})},c.exports}),a.registerDynamic("11b",["d6","d7","d9","f0","de","d8","da","f2","11a"],!0,function(a,b,c){var d=(this||self,a("d6"));return d.defaultDatum="WGS84",d.Proj=a("d7"),d.WGS84=new d.Proj("WGS84"),d.Point=a("d9"),d.toPoint=a("f0"),d.defs=a("de"),d.transform=a("d8"),d.mgrs=a("da"),d.version=a("f2").version,a("11a")(d),c.exports=d,c.exports}),a.registerDynamic("11c",["11b"],!0,function(a,b,c){this||self;return c.exports=a("11b"),c.exports}),a.register("11d",["d5","11c"],function(a){"use strict";function b(a){return k[a]}function c(a){if(a in k)return Promise.resolve(k[a]);var b=e(a),c="https://epsg.io/"+b+".proj4";return fetch(c).then(function(a){if(!a.ok)throw new Error("HTTP response code: "+a.status);return a.text()}).then(function(b){return d(a,b,{reverseAxes:a in l})})}function d(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!a||!b)throw new Error("crsUri and proj cannot be empty");var d=void 0;if("string"==typeof b){if(d=g(b),!d)throw new Error("Unsupported proj4 string: "+b);c.reverseAxes&&(d=f(d))}else d=b;return k[a]=d,d}function e(a){var b=void 0;if(0!==a.indexOf(j))throw new Error("Unsupported CRS URI: "+a);return b=a.substr(j.length)}function f(a){return{forward:function(b){return a.forward(b).reverse()},inverse:function(b){return a.inverse([b[1],b[0]])}}}var g,h,i,j,k,l,m;return a("get",b),a("load",c),a("set",d),{setters:[function(a){},function(a){g=a.default}],execute:function(){h="http://www.opengis.net/def/crs/",i=h+"OGC/",j=h+"EPSG/0/",k={},l=babelHelpers.defineProperty({},j+4326,!0),m=g("+proj=longlat +datum=WGS84 +no_defs"),d(i+"1.3/CRS84",m),d(j+4979,f(m))}}}),a.register("11e",["11d"],function(a){"use strict";return{setters:[function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);c.default=b.default,a(c)}],execute:function(){}}}),a.register("bc",["11e","bb"],function(a){"use strict";function b(a,b){var c=a.referencing.find(function(a){return a.coordinates.indexOf(b)!==-1});return c}function c(a){var b=function(a){return["GeodeticCRS","GeographicCRS","GeocentricCRS","ProjectedCRS"].indexOf(a.system.type)!==-1},c=a.referencing.find(b);return c}function d(a){return"GeographicCRS"===a.type||w.indexOf(a.id)!==-1}function e(a){var b=a.referencing.some(function(a){return d(a.system)});if(b)return j(a);var e=c(a);if(!e)throw new Error("No horizontal CRS found in coverage domain");var f=e.system.id,g=p.get(f);if(!g)throw new Error("Projection "+f+" not cached in uriproj, use loadProjection() instead");return i(g)}function f(a){try{return e(a)}catch(a){}var b=c(a);if(!b)throw new Error("No horizontal CRS found in coverage domain");var d=b.system.id;return p.load(d).then(function(a){return i(a)})}function g(a){return h(a)}function h(a){var b=c(a);return b.coordinates}function i(a){return{project:function(b){var c=b.lon,d=b.lat,e=a.forward([c,d]),f=babelHelpers.slicedToArray(e,2),g=f[0],h=f[1];return{x:g,y:h}},unproject:function(b){var c=b.x,d=b.y,e=a.inverse([c,d]),f=babelHelpers.slicedToArray(e,2),g=f[0],h=f[1];return{lon:g,lat:h}}}}function j(a){var b=a.referencing.find(function(a){return d(a.system)}),c=x[b.system.id];if(c>1)throw new Error;var e=b.coordinates[c],f=void 0,g=void 0;if(a.axes.has(e)){var h=e,i=a.axes.get(h).values;if(f=i[0],g=i[i.length-1],f>g){var j=[g,f];f=j[0],g=j[1]}}else{var k=[].concat(babelHelpers.toConsumableArray(a.axes.values())),l=k.find(function(a){return a.coordinates.indexOf(e)!==-1}),m=l.coordinates.indexOf(e);if(f=1/0,g=-(1/0),l.dataType===q){var n=!0,o=!1,p=void 0;try{for(var s,t=l.values[Symbol.iterator]();!(n=(s=t.next()).done);n=!0){var u=s.value,v=u[m];f=Math.min(v,f),g=Math.max(v,g)}}catch(a){o=!0,p=a}finally{try{!n&&t.return&&t.return()}finally{if(o)throw p}}}else{if(l.dataType!==r)throw new Error("Unsupported data type: "+l.dataType);var w=!0,y=!1,z=void 0;try{for(var A,B=l.values[Symbol.iterator]();!(w=(A=B.next()).done);w=!0){var C=A.value,D=!0,E=!1,F=void 0;try{for(var G,H=C[Symbol.iterator]();!(D=(G=H.next()).done);D=!0){var I=G.value,J=!0,K=!1,L=void 0;try{for(var M,N=I[Symbol.iterator]();!(J=(M=N.next()).done);J=!0){var O=M.value,v=O[m];f=Math.min(v,f),g=Math.max(v,g)}}catch(a){K=!0,L=a}finally{try{!J&&N.return&&N.return()}finally{if(K)throw L}}}}catch(a){E=!0,F=a}finally{try{!D&&H.return&&H.return()}finally{if(E)throw F}}}}catch(a){y=!0,z=a}finally{try{!w&&B.return&&B.return()}finally{if(y)throw z}}}}var P=(g+f)/2,Q=P-180,R=P+180;return{project:function(a){var b=a.lon,d=a.lat,e=void 0;e=Q<=b&&b<=R?b:((b-Q)%360+360)%360+Q;var f=0===c?[e,d]:[d,e],g=babelHelpers.slicedToArray(f,2),h=g[0],i=g[1];return{x:h,y:i}},unproject:function(a){var b=a.x,d=a.y,e=0===c?[b,d]:[d,b],f=babelHelpers.slicedToArray(e,2),g=f[0],h=f[1];return{lon:g,lat:h}}}}function k(a,b,c){return c.project(b.unproject(a))}function l(a,b){if(!m(a,b))throw new Error("'"+b+"' is not a longitude axis");var c=a.axes.get(b).values,d=c[0],e=c[c.length-1];if(d>e){var f=[e,d];d=f[0],e=f[1]}var g=(e+d)/2,h=g-180,i=g+180;return function(a){return h<=a&&a<=i?a:((a-h)%360+360)%360+h}}function m(a,c){var d=b(a,c);if(!d)return!1;var e=d.system.id;if(w.indexOf(e)===-1)return!1;var f=d.coordinates.indexOf(c),g=x[e]===f;return g}function n(a,b){var c=a.axes.get(b).values[0];return"string"==typeof c&&!isNaN(new Date(c).getTime())}function o(a){var b=void 0,c=!1;if("string"==typeof a?b=new Date(a).getTime():a instanceof Date?b=a.getTime():c=!0,isNaN(b)&&(c=!0),c)throw new Error("Invalid date: "+a);return b}var p,q,r,s,t,u,v,w,x,y;return a("getReferenceObject",b),a("getHorizontalCRSReferenceObject",c),a("isEllipsoidalCRS",d),a("getProjection",e),a("loadProjection",f),a("getHorizontalCRSComponents",g),a("getHorizontalCRSCoordinateIDs",h),a("reprojectCoords",k),a("getLongitudeWrapper",l),a("isLongitudeAxis",m),a("isISODateAxis",n),a("asTime",o),{setters:[function(a){p=a},function(a){q=a.COVJSON_DATATYPE_TUPLE,r=a.COVJSON_DATATYPE_POLYGON}],execute:function(){s="http://www.opengis.net/def/crs/",t=s+"EPSG/0/4979",u=s+"EPSG/0/4326",v=s+"OGC/1.3/CRS84",w=[t,u,v],y={},babelHelpers.defineProperty(y,t,1),babelHelpers.defineProperty(y,u,1),babelHelpers.defineProperty(y,v,0),x=y}}}),a.register("c1",["bb"],function(a){"use strict";function b(a,b){var c={};for(var d in b)if(a.axes.has(d)&&void 0!==b[d]&&null!==b[d]){if("number"==typeof b[d]){var e=b[d];c[d]={start:e,stop:e+1}}else c[d]=b[d];var f=c[d],g=f.start,h=void 0===g?0:g,i=f.stop,j=void 0===i?a.axes.get(d).values.length:i,k=f.step,l=void 0===k?1:k;if(l<=0)throw new Error("Invalid constraint for "+d+": step="+l+" must be > 0");if(h>=j||h<0)throw new Error("Invalid constraint for "+d+": stop="+j+" must be > start="+h+" and both >= 0");c[d]={start:h,stop:j,step:l}}var m=!0,n=!1,o=void 0;try{for(var p,q=a.axes.keys()[Symbol.iterator]();!(m=(p=q.next()).done);m=!0){var d=p.value;if(!(d in c)){var r=a.axes.get(d).values.length;c[d]={start:0,stop:r,step:1}}}}catch(a){n=!0,o=a}finally{try{!m&&q.return&&q.return()}finally{if(n)throw o}}return c}function c(a,c){c=b(a,c);var e={type:d,domainType:a.domainType,axes:new Map(a.axes),referencing:a.referencing},f=!0,g=!1,h=void 0;try{for(var i,j=function(){var b=i.value,d=a.axes.get(b),f=d.values,g=d.bounds,h=c[b],j=void 0,k=void 0,l=h.start,m=h.stop,n=h.step;if(0===l&&m===f.length&&1===n)j=f,k=g;else if(1===n)j=f.subarray?f.subarray(l,m):f.slice(l,m),g&&(k={get:function(a){return g.get(l+a)}});else{var o=Math.trunc((m-l)/n),p=(m-l)%n,q=o+p;j=new f.constructor(q);for(var r=l,s=0;r<m;r+=n,s++)j[s]=f[r];g&&(k={get:function(a){return g.get(l+a*n)}})}var t={dataType:d.dataType,coordinates:d.coordinates,values:j,bounds:k};e.axes.set(b,t)},k=Object.keys(c)[Symbol.iterator]();!(f=(i=k.next()).done);f=!0)j()}catch(a){g=!0,h=a}finally{try{!f&&k.return&&k.return()}finally{if(g)throw h}}return e}var d;return a("normalizeIndexSubsetConstraints",b),a("subsetDomainByIndex",c),{setters:[function(a){d=a.DOMAIN}],execute:function(){}}}),a.register("bf",[],function(a){"use strict";function b(a){for(var b=a.length,c=1/0,d=-(1/0);b--;){var e=a[b];null==e||(e<c?c=e:e>d&&(d=e))}return c===1/0?c=d:d===-(1/0)&&(d=c),c!==1/0&&c!==-(1/0)||(c=null,d=null),[c,d]}function c(a,b){if(0===a.length)throw new Error("Array must have at least one element");var c=-1,d=a.length,e=1===a.length||a[0]<a[1];if(e)for(;d-c>1;){var f=Math.round((c+d)/2);a[f]<=b?c=f:d=f}else for(;d-c>1;){var f=Math.round((c+d)/2);a[f]>=b?c=f:d=f}return a[c]===b&&(d=c),c===-1&&(c=d),d===a.length&&(d=c),[c,d]}function d(a,b){var d=c(a,b),e=d[0],f=d[1];return Math.abs(b-a[e])<=Math.abs(b-a[f])?e:f}return a("minMax",b),a("indicesOfNearest",c),a("indexOfNearest",d),{setters:[],execute:function(){}}}),a.register("c3",["bc","c1","bf","bb"],function(a){"use strict";function b(a,b){var c,d=arguments.length<=2||void 0===arguments[2]?["x","y"]:arguments[2],e=babelHelpers.slicedToArray(b,4),f=e[0],g=e[1],h=e[2],i=e[3];return a.subsetByValue((c={},babelHelpers.defineProperty(c,d[0],{start:f,stop:h}),babelHelpers.defineProperty(c,d[1],{start:g,stop:i}),c))}function c(a,b){return a.loadDomain().then(function(e){b=i(e,b);var f=j(e,b),g=function(a){var c={dataType:a.dataType,get:function(c){var d={},e=!0,f=!1,g=void 0;try{for(var h,i=Object.keys(c)[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,k=b[j],l=k.start,m=k.step;d[j]=l+c[j]*m}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}return a.get(d)}};c.shape=new Map;var d=!0,g=!1,h=void 0;try{for(var i,j=e.axes.keys()[Symbol.iterator]();!(d=(i=j.next()).done);d=!0){var k=i.value,l=f.axes.get(k).values.length;c.shape.set(k,l)}}catch(a){g=!0,h=a}finally{try{!d&&j.return&&j.return()}finally{if(g)throw h}}return c},h=function(b){return a.loadRange(b).then(g)},k=function(b){return a.loadRanges(b).then(function(a){return new Map([].concat(babelHelpers.toConsumableArray(a)).map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return[c,g(d)]}))})},l={type:m,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return Promise.resolve(f)},loadRange:h,loadRanges:k};return l.subsetByIndex=c.bind(null,l),l.subsetByValue=d.bind(null,l),l})}function d(a,b){return a.loadDomain().then(function(c){var d={},i=!0,j=!1,m=void 0;try{for(var n,o=Object.keys(b)[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){var p=n.value,q=b[p];if(void 0!==q&&null!==q&&c.axes.has(p)){var r=c.axes.get(p),s=r.values,t=e(c,p),u=f(c,p),v=u?g(c,p):void 0;if("number"==typeof q||"string"==typeof q||q instanceof Date){var w=q;t?(w=h(w),s=s.map(function(a){return new Date(a).getTime()})):u&&(w=v(w));var x=void 0;if(x=s.indexOf?s.indexOf(w):Array.prototype.indexOf.call(s,w),x===-1)throw new Error("Domain value not found: "+q);d[p]=x}else if("target"in q){var y=q.target;if(t)y=h(y),s=s.map(function(a){return new Date(a).getTime()});else if(u)y=v(y);else if("number"!=typeof s[0]||"number"!=typeof y)throw new Error("Invalid axis or constraint value type");var x=k(s,y);d[p]=x}else{if(!("start"in q&&"stop"in q))throw new Error("Invalid subset constraints");var z=q.start,A=q.stop;if(t){var B=[h(z),h(A)];z=B[0],A=B[1],s=s.map(function(a){return new Date(a).getTime()})}else if(u){var C=[v(z),v(A)];z=C[0],A=C[1]}else if("number"!=typeof s[0]||"number"!=typeof z)throw new Error("Invalid axis or constraint value type");var D=l(s,z),E=babelHelpers.slicedToArray(D,2),F=E[0],G=E[1],H=l(s,A),I=babelHelpers.slicedToArray(H,2),J=I[0],K=I[1],L=Math.min(F,G,J,K),M=Math.max(F,G,J,K)+1;d[p]={start:L,stop:M}}}}}catch(a){j=!0,m=a}finally{try{!i&&o.return&&o.return()}finally{if(j)throw m}}return a.subsetByIndex(d)})}var e,f,g,h,i,j,k,l,m;return a("subsetByBbox",b),a("subsetByIndex",c),a("subsetByValue",d),{setters:[function(a){e=a.isISODateAxis,f=a.isLongitudeAxis,g=a.getLongitudeWrapper,h=a.asTime},function(a){i=a.normalizeIndexSubsetConstraints,j=a.subsetDomainByIndex},function(a){k=a.indexOfNearest,l=a.indicesOfNearest},function(a){m=a.COVERAGE}],execute:function(){}}}),a.register("c2",["bb","c0","c3"],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];h(a);var c=b.gridAxes;c=void 0===c?["x","y"]:c;var g=babelHelpers.slicedToArray(c,2),i=g[0],j=g[1],k="domain",l="Domain",m=a.axes.has(i)&&a.axes.has(j)&&(a.axes.get(i).values.length>1||a.axes.get(j).values.length>1),n=void 0,o=void 0,p="a",q=0,r="b",s=1;m?(n=[{id:p,label:{en:"A"}},{id:r,label:{en:"B"}}],o=new Map([[p,[q]],[r,[s]]])):(n=[{id:p,label:{en:"X"}}],o=new Map([[p,[q]]]));var t=new Map;t.set(k,{key:k,observedProperty:{label:{en:l},categories:n},categoryEncoding:o});var u=new Map([].concat(babelHelpers.toConsumableArray(a.axes)).map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return[c,d.values.length]})),v=void 0;m?!function(){var a=function(a){return a%2};v=function(b){var c=b.x,d=void 0===c?0:c,e=b.y,f=void 0===e?0:e;return a(d+f)?q:s}}():v=function(){return q};var w=function(){return Promise.resolve({shape:u,dataType:"integer",get:v})},x={type:f,domainType:a.domainType,parameters:t,loadDomain:function(){return Promise.resolve(a)},loadRange:w};return e(x),d(x),x}function c(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=b.parameter,h=void 0===c?{key:"p1",observedProperty:{label:{en:"Parameter 1"}}}:c,i=b.referencing,j=b.domainType,k=new Map;k.set(h.key,h),i||(i=[],a.coords.has("x")&&a.coords.has("y")&&i.push({coordinates:["x","y"],system:{type:"GeographicCRS",id:"http://www.opengis.net/def/crs/OGC/1.3/CRS84"}}),a.coords.has("t")&&i.push({coordinates:["t"],system:{type:"TemporalRS",calendar:"Gregorian"}}));var l=new Map,m=!0,n=!1,o=void 0;try{for(var p,q=a.coords[Symbol.iterator]();!(m=(p=q.next()).done);m=!0){for(var r=babelHelpers.slicedToArray(p.value,2),s=r[0],t=r[1],u=new Array(t.size),v=0;v<t.size;v++)u[v]=t.get(v);l.set(s,{key:s,coordinates:[s],values:u})}}catch(a){n=!0,o=a}finally{try{!m&&q.return&&q.return()}finally{if(n)throw o}}var w={type:g,domainType:j,referencing:i,axes:l},x=new Map([].concat(babelHelpers.toConsumableArray(w.axes)).map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return[c,d.values.length]})),y=a.dtype.indexOf("int")!==-1?"integer":"float",z=function(){return Promise.resolve({shape:x,dataType:y,get:a.xget.bind(a)})},A={type:f,domainType:j,parameters:k,loadDomain:function(){return Promise.resolve(w)},loadRange:z};return e(A),d(A),A}function d(a){i(a),a.subsetByIndex=j.bind(null,a),a.subsetByValue=k.bind(null,a)}function e(a){function b(b){return b||(b=a.parameters.keys()),Promise.all([].concat(babelHelpers.toConsumableArray(b)).map(a.loadRange)).then(function(a){return new Map(b.map(function(b,c){return[b,a[c]]}))})}i(a),a.loadRanges=b}var f,g,h,i,j,k;return a("fromDomain",b),a("fromXndarray",c),a("addSubsetFunctions",d),a("addLoadRangesFunction",e),{setters:[function(a){f=a.COVERAGE,g=a.DOMAIN},function(a){h=a.checkDomain,i=a.checkCoverage},function(a){j=a.subsetByIndex,k=a.subsetByValue}],execute:function(){}}}),a.register("c4",["bb","c0","ba","c2"],function(a){"use strict";function b(a,c){var d={type:j,domainType:a.domainType,parameters:c,loadDomain:function(){return a.loadDomain()},loadRange:function(b){return a.loadRange(b)},loadRanges:function(b){return a.loadRanges(b)},subsetByIndex:function(d){return a.subsetByIndex(d).then(function(a){return b(a,c)})},subsetByValue:function(d){return a.subsetByValue(d).then(function(a){return b(a,c)})}};return d}function c(a,c,d,e){if(l(a),d.categories.some(function(a){return!a.id}))throw new Error('At least one category object is missing the "id" property');var f=m(a.parameters),g=m(f.get(c));f.set(c,g),f.get(c).observedProperty=d;var h=a.parameters.get(c).categoryEncoding,i=new Map,j=d.categories,k=!0,n=!1,o=void 0;try{for(var p,q=j[Symbol.iterator]();!(k=(p=q.next()).done);k=!0){var r=p.value,s=[],t=!0,u=!1,v=void 0;try{for(var w,x=e[Symbol.iterator]();!(t=(w=x.next()).done);t=!0){var y=babelHelpers.slicedToArray(w.value,2),z=y[0],A=y[1];A===r.id&&h.has(z)&&s.push.apply(s,babelHelpers.toConsumableArray(h.get(z)))}}catch(a){u=!0,v=a}finally{try{!t&&x.return&&x.return()}finally{if(u)throw v}}s.length>0&&i.set(r.id,s)}}catch(a){n=!0,o=a}finally{try{!k&&q.return&&q.return()}finally{if(n)throw o}}f.get(c).categoryEncoding=i;var B=b(a,f);return B}function d(a,b){l(a);var c=function(a){var c={type:k,domainType:b,axes:a.axes,referencing:a.referencing};return c},e={type:j,domainType:b,parameters:a.parameters,loadDomain:function(){return a.loadDomain().then(c)},loadRange:function(b){return a.loadRange(b)},loadRanges:function(b){return a.loadRanges(b)},subsetByIndex:function(c){return a.subsetByIndex(c).then(function(a){return d(a,b)})},subsetByValue:function(c){return a.subsetByValue(c).then(function(a){return d(a,b)})}};return e}function e(a){return a.loadDomain().then(function(a){})}function f(a,b){l(a),b=new Map(b);var c=!0,d=!1,e=void 0;try{for(var g,h=a.axes.keys()[Symbol.iterator]();!(c=(g=h.next()).done);c=!0){var i=g.value;b.has(i)||b.set(i,i)}}catch(a){d=!0,e=a}finally{try{!c&&h.return&&h.return()}finally{if(d)throw e}}var m=function(a){var c=new Map,d=!0,e=!1,f=void 0;try{for(var g,h=b[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=babelHelpers.slicedToArray(g.value,2),j=i[0],l=i[1],m=a.axes.get(j),n=m.dataType,o=m.coordinates,p=m.values,q=m.bounds,r={key:l,dataType:n,coordinates:o.map(function(a){return b.has(a)?b.get(a):a}),values:p,bounds:q};c.set(l,r)}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}var s=a.referencing.map(function(a){var c=a.coordinates,d=a.system;return{coordinates:c.map(function(a){return b.has(a)?b.get(a):a}),system:d}}),t={type:k,domainType:a.domainType,axes:c,referencing:s};return t},n=[].concat(babelHelpers.toConsumableArray(b)).map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return"['"+c+"']:obj['"+d+"']"}).join(","),o=function(a){var c=new Function("range","return function get (obj){return range.get({"+n+"})}")(a),d={shape:new Map([].concat(babelHelpers.toConsumableArray(a.shape)).map(function(a){var c=babelHelpers.slicedToArray(a,2),d=c[0],e=c[1];return[b.get(d),e]})),dataType:a.dataType,get:c};return d},p=function(b){return a.loadRange(b).then(o)},q=function(b){return a.loadRanges(b).then(function(a){return new Map([].concat(babelHelpers.toConsumableArray(a)).map(function(a){var b=babelHelpers.slicedToArray(a,2),c=b[0],d=b[1];return[c,o(d)]}))})},r={type:j,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return a.loadDomain().then(m)},loadRange:p,loadRanges:q,subsetByIndex:function(c){return a.subsetByIndex(c).then(function(a){return f(a,b)})},subsetByValue:function(c){return a.subsetByValue(c).then(function(a){return f(a,b)})}};return r}function g(a,b,c,d){l(a);var e=function(a){var b={shape:a.shape,dataType:d||a.dataType,get:function(b){return c(b,a)}};return b},f=function(c){return b===c?a.loadRange(c).then(e):a.loadRange(c)},h=function(c){return a.loadRanges(c).then(function(a){return new Map([].concat(babelHelpers.toConsumableArray(a)).map(function(a){var c=babelHelpers.slicedToArray(a,2),d=c[0],f=c[1];return[d,b===d?e(f):f];
}))})},i={type:j,domainType:a.domainType,parameters:a.parameters,loadDomain:function(){return a.loadDomain()},loadRange:f,loadRanges:h,subsetByIndex:function(e){return a.subsetByIndex(e).then(function(a){return g(a,b,c,d)})},subsetByValue:function(e){return a.subsetByValue(e).then(function(a){return g(a,b,c,d)})}};return i}function h(a,b){l(a);var c=b.parameter,d=b.inputParameters,e=b.dataType,f=void 0===e?"float":e,g=b.fn,i=new Map(a.parameters);i.set(c.key,c);var k=function(){return a.loadRanges(d).then(function(a){var b=d.map(function(b){return a.get(b)}),c=b[0].shape,e={shape:c,dataType:f,get:function(a){return g.apply(void 0,[a].concat(babelHelpers.toConsumableArray(b)))}};return e})},m=function(b){return c.key===b?k():a.loadRange(b)},o={type:j,domainType:a.domainType,parameters:i,loadDomain:function(){return a.loadDomain()},loadRange:m,subsetByIndex:function(c){return a.subsetByIndex(c).then(function(a){return h(a,b)})},subsetByValue:function(c){return a.subsetByValue(c).then(function(a){return h(a,b)})}};return n(o),o}function i(a,b){var c=b.parameter,d=b.inputParameters,e=b.dataType,f=b.fn,g={parameter:c,inputParameters:d,dataType:e,fn:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];var g=d.map(function(b,d){return c[d].get(a)});return g.some(function(a){return null===a})?null:f.apply(void 0,babelHelpers.toConsumableArray(g))}};return h(a,g)}var j,k,l,m,n;return a("withParameters",b),a("withCategories",c),a("withDomainType",d),a("asCovJSONDomainType",e),a("renameAxes",f),a("mapRange",g),a("withDerivedParameter",h),a("withSimpleDerivedParameter",i),{setters:[function(a){j=a.COVERAGE,k=a.DOMAIN},function(a){l=a.checkCoverage},function(a){m=a.shallowcopy},function(a){n=a.addLoadRangesFunction}],execute:function(){}}}),a.register("bb",[],function(a){"use strict";var b,c,d,e,f,g;return{setters:[],execute:function(){b="Domain",a("DOMAIN",b),c="Coverage",a("COVERAGE",c),d=c+"Collection",a("COVERAGECOLLECTION",d),e="http://covjson.org/def/core#",f=e+"tuple",a("COVJSON_DATATYPE_TUPLE",f),g=e+"polygon",a("COVJSON_DATATYPE_POLYGON",g)}}}),a.register("c0",["bb"],function(a){"use strict";function b(a){return a.type===f}function c(a){if(!b(a))throw new Error("must be a Coverage")}function d(a){return a.type===g}function e(a){if(!d(a))throw new Error("must be a Domain")}var f,g;return a("isCoverage",b),a("checkCoverage",c),a("isDomain",d),a("checkDomain",e),{setters:[function(a){f=a.COVERAGE,g=a.DOMAIN}],execute:function(){}}}),a.registerDynamic("11f",[],!0,function(a,b,c){"use strict";function d(a,b,c,d,e,f){this._color=a,this.key=b,this.value=c,this.left=d,this.right=e,this._count=f}function e(a){return new d(a._color,a.key,a.value,a.left,a.right,a._count)}function f(a,b){return new d(a,b.key,b.value,b.left,b.right,b._count)}function g(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function h(a,b){this._compare=a,this.root=b}function i(a,b){if(b.left){var c=i(a,b.left);if(c)return c}var c=a(b.key,b.value);return c?c:b.right?i(a,b.right):void 0}function j(a,b,c,d){var e=b(a,d.key);if(e<=0){if(d.left){var f=j(a,b,c,d.left);if(f)return f}var f=c(d.key,d.value);if(f)return f}if(d.right)return j(a,b,c,d.right)}function k(a,b,c,d,e){var f,g=c(a,e.key),h=c(b,e.key);if(g<=0){if(e.left&&(f=k(a,b,c,d,e.left)))return f;if(h>0&&(f=d(e.key,e.value)))return f}if(h>0&&e.right)return k(a,b,c,d,e.right)}function l(a,b){this.tree=a,this._stack=b}function m(a,b){a.key=b.key,a.value=b.value,a.left=b.left,a.right=b.right,a._color=b._color,a._count=b._count}function n(a){for(var b,c,d,h,i=a.length-1;i>=0;--i){if(b=a[i],0===i)return void(b._color=r);if(c=a[i-1],c.left===b){if(d=c.right,d.right&&d.right._color===q){if(d=c.right=e(d),h=d.right=e(d.right),c.right=d.left,d.left=c,d.right=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}return void(a[i-1]=d)}if(d.left&&d.left._color===q){if(d=c.right=e(d),h=d.left=e(d.left),c.right=h.left,d.left=h.right,h.left=c,h.right=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.left===c?j.left=h:j.right=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.right=f(q,d));c.right=f(q,d);continue}if(d=e(d),c.right=d.left,d.left=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}else{if(d=c.left,d.left&&d.left._color===q){if(d=c.left=e(d),h=d.left=e(d.left),c.left=d.right,d.right=c,d.left=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}return void(a[i-1]=d)}if(d.right&&d.right._color===q){if(d=c.left=e(d),h=d.right=e(d.right),c.left=h.right,d.right=h.left,h.right=c,h.left=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.right===c?j.right=h:j.left=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.left=f(q,d));c.left=f(q,d);continue}if(d=e(d),c.left=d.right,d.right=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}}}function o(a,b){return a<b?-1:a>b?1:0}function p(a){return new h(a||o,null)}this||self;c.exports=p;var q=0,r=1,s=h.prototype;Object.defineProperty(s,"keys",{get:function(){var a=[];return this.forEach(function(b,c){a.push(b)}),a}}),Object.defineProperty(s,"values",{get:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(a,b){for(var c=this._compare,e=this.root,i=[],j=[];e;){var k=c(a,e.key);i.push(e),j.push(k),e=k<=0?e.left:e.right}i.push(new d(q,a,b,null,null,1));for(var l=i.length-2;l>=0;--l){var e=i[l];j[l]<=0?i[l]=new d(e._color,e.key,e.value,i[l+1],e.right,e._count+1):i[l]=new d(e._color,e.key,e.value,e.left,i[l+1],e._count+1)}for(var l=i.length-1;l>1;--l){var m=i[l-1],e=i[l];if(m._color===r||e._color===r)break;var n=i[l-2];if(n.left===m)if(m.left===e){var o=n.right;if(!o||o._color!==q){if(n._color=q,n.left=m.right,m._color=r,m.right=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.left===n?p.left=m:p.right=m}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else{var o=n.right;if(!o||o._color!==q){if(m.right=e.left,n._color=q,n.left=e.right,e._color=r,e.left=m,e.right=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.left===n?p.left=e:p.right=e}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else if(m.right===e){var o=n.left;if(!o||o._color!==q){if(n._color=q,n.right=m.left,m._color=r,m.left=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.right===n?p.right=m:p.left=m}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}else{var o=n.left;if(!o||o._color!==q){if(m.left=e.right,n._color=q,n.right=e.left,e._color=r,e.right=m,e.left=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.right===n?p.right=e:p.left=e}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}}return i[0]._color=r,new h(c,i[0])},s.forEach=function(a,b,c){if(this.root)switch(arguments.length){case 1:return i(a,this.root);case 2:return j(b,this._compare,a,this.root);case 3:if(this._compare(b,c)>=0)return;return k(b,c,this._compare,a,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new l(this,a)}}),Object.defineProperty(s,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new l(this,a)}}),s.at=function(a){if(a<0)return new l(this,[]);for(var b=this.root,c=[];;){if(c.push(b),b.left){if(a<b.left._count){b=b.left;continue}a-=b.left._count}if(!a)return new l(this,c);if(a-=1,!b.right)break;if(a>=b.right._count)break;b=b.right}return new l(this,[])},s.ge=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f<=0&&(e=d.length),c=f<=0?c.left:c.right}return d.length=e,new l(this,d)},s.gt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f<0&&(e=d.length),c=f<0?c.left:c.right}return d.length=e,new l(this,d)},s.lt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>0&&(e=d.length),c=f<=0?c.left:c.right}return d.length=e,new l(this,d)},s.le=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>=0&&(e=d.length),c=f<0?c.left:c.right}return d.length=e,new l(this,d)},s.find=function(a){for(var b=this._compare,c=this.root,d=[];c;){var e=b(a,c.key);if(d.push(c),0===e)return new l(this,d);c=e<=0?c.left:c.right}return new l(this,[])},s.remove=function(a){var b=this.find(a);return b?b.remove():this},s.get=function(a){for(var b=this._compare,c=this.root;c;){var d=b(a,c.key);if(0===d)return c.value;c=d<=0?c.left:c.right}};var t=l.prototype;return Object.defineProperty(t,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(t,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),t.clone=function(){return new l(this.tree,this._stack.slice())},t.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var b=new Array(a.length),c=a[a.length-1];b[b.length-1]=new d(c._color,c.key,c.value,c.left,c.right,c._count);for(var e=a.length-2;e>=0;--e){var c=a[e];c.left===a[e+1]?b[e]=new d(c._color,c.key,c.value,b[e+1],c.right,c._count):b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count)}if(c=b[b.length-1],c.left&&c.right){var f=b.length;for(c=c.left;c.right;)b.push(c),c=c.right;var g=b[f-1];b.push(new d(c._color,g.key,g.value,c.left,c.right,c._count)),b[f-1].key=c.key,b[f-1].value=c.value;for(var e=b.length-2;e>=f;--e)c=b[e],b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count);b[f-1].left=b[f]}if(c=b[b.length-1],c._color===q){var i=b[b.length-2];i.left===c?i.left=null:i.right===c&&(i.right=null),b.pop();for(var e=0;e<b.length;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(c.left||c.right){c.left?m(c,c.left):c.right&&m(c,c.right),c._color=r;for(var e=0;e<b.length-1;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(1===b.length)return new h(this.tree._compare,null);for(var e=0;e<b.length;++e)b[e]._count--;var j=b[b.length-2];return n(b),j.left===c?j.left=null:j.right=null,new h(this.tree._compare,b[0])},Object.defineProperty(t,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(t,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(t,"index",{get:function(){var a=0,b=this._stack;if(0===b.length){var c=this.tree.root;return c?c._count:0}b[b.length-1].left&&(a=b[b.length-1].left._count);for(var d=b.length-2;d>=0;--d)b[d+1]===b[d].right&&(++a,b[d].left&&(a+=b[d].left._count));return a},enumerable:!0}),t.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();a.length>0&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].left===a[b])return!0;return!1}}),t.update=function(a){var b=this._stack;if(0===b.length)throw new Error("Can't update empty node!");var c=new Array(b.length),e=b[b.length-1];c[c.length-1]=new d(e._color,e.key,a,e.left,e.right,e._count);for(var f=b.length-2;f>=0;--f)e=b[f],e.left===b[f+1]?c[f]=new d(e._color,e.key,e.value,c[f+1],e.right,e._count):c[f]=new d(e._color,e.key,e.value,e.left,c[f+1],e._count);return new h(this.tree._compare,c[0])},t.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=b.left;b;)a.push(b),b=b.right;else for(a.pop();a.length>0&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].right===a[b])return!0;return!1}}),c.exports}),a.registerDynamic("120",["11f"],!0,function(a,b,c){this||self;return c.exports=a("11f"),c.exports}),a.registerDynamic("121",[],!0,function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=b[l],q=m(p);o<q?(g=n,k+=1,k<c&&(n=a[k],o=m(n))):(g=p,l+=1,l<e&&(p=b[l],q=m(p))),k<c&&o<q||l>=e?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;k<c&&l<e;)o<q?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;k<c;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,k<c&&(n=a[k]);for(;l<e;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,l<e&&(p=b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}this||self;return c.exports=e,c.exports}),a.registerDynamic("122",["121"],!0,function(a,b,c){this||self;return c.exports=a("121"),c.exports}),a.registerDynamic("123",[],!0,function(a,b,c){"use strict";function d(a,b,c){var d=a*b,f=e*a,g=f-a,h=f-g,i=a-h,j=e*b,k=j-b,l=j-k,m=b-l,n=d-h*l,o=n-i*l,p=o-h*m,q=i*m-p;return c?(c[0]=q,c[1]=d,c):[q,d]}this||self;c.exports=d;var e=+(Math.pow(2,27)+1);return c.exports}),a.registerDynamic("124",["123"],!0,function(a,b,c){this||self;return c.exports=a("123"),c.exports}),a.registerDynamic("125",[],!0,function(a,b,c){"use strict";function d(a,b,c){var d=a+b,e=d-a,f=d-e,g=b-e,h=a-f;return c?(c[0]=h+g,c[1]=d,c):[h+g,d]}this||self;return c.exports=d,c.exports}),a.registerDynamic("126",["125"],!0,function(a,b,c){this||self;return c.exports=a("125"),c.exports}),a.registerDynamic("127",["124","126"],!0,function(a,b,c){"use strict";function d(a,b){var c=a.length;if(1===c){var d=e(a[0],b);return d[0]?d:[d[1]]}var g=new Array(2*c),h=[.1,.1],i=[.1,.1],j=0;e(a[0],b,h),h[0]&&(g[j++]=h[0]);for(var k=1;k<c;++k){e(a[k],b,i);var l=h[1];f(l,i[0],h),h[0]&&(g[j++]=h[0]);var m=i[1],n=h[1],o=m+n,p=o-m,q=n-p;h[1]=o,q&&(g[j++]=q)}return h[1]&&(g[j++]=h[1]),0===j&&(g[j++]=0),g.length=j,g}var e=(this||self,a("124")),f=a("126");return c.exports=d,c.exports}),a.registerDynamic("128",["127"],!0,function(a,b,c){this||self;return c.exports=a("127"),c.exports}),a.registerDynamic("129",[],!0,function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],-b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=-b[l],q=m(p);o<q?(g=n,k+=1,k<c&&(n=a[k],o=m(n))):(g=p,l+=1,l<e&&(p=-b[l],q=m(p))),k<c&&o<q||l>=e?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=-b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;k<c&&l<e;)o<q?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=-b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;k<c;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,k<c&&(n=a[k]);for(;l<e;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,l<e&&(p=-b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}this||self;return c.exports=e,c.exports}),a.registerDynamic("12a",["129"],!0,function(a,b,c){this||self;return c.exports=a("129"),c.exports}),a.registerDynamic("12b",["124","122","128","12a"],!0,function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m",d,"[",a-c-1,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",g(h(d(a,c))),",",f(c),a[0][c],")"].join(""));return b}function i(a){for(var b=[],c=[],f=e(a),i=[],j=0;j<a;++j)0===(1&j)?b.push.apply(b,h(d(f,j))):c.push.apply(c,h(d(f,j))),i.push("m"+j);var k=g(b),p=g(c),q="orientation"+a+"Exact",r=["function ",q,"(",i.join(),"){var p=",k,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",q].join(""),s=new Function("sum","prod","scale","sub",r);return s(m,l,n,o)}function j(a){var b=v[a.length];return b||(b=v[a.length]=i(a.length)),b.apply(void 0,a)}function k(){for(;v.length<=p;)v.push(i(v.length));for(var a=[],b=["slow"],d=0;d<=p;++d)a.push("a"+d),b.push("o"+d);for(var e=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;d<=p;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),b.push(e.join(""));var f=Function.apply(void 0,b);c.exports=f.apply(void 0,[j].concat(v));for(var d=0;d<=p;++d)c.exports[d]=v[d]}var l=(this||self,a("124")),m=a("122"),n=a("128"),o=a("12a"),p=5,q=1.1102230246251565e-16,r=(3+16*q)*q,s=(7+56*q)*q,t=i(3),u=i(4),v=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,c){var d,e=(a[1]-c[1])*(b[0]-c[0]),f=(a[0]-c[0])*(b[1]-c[1]),g=e-f;if(e>0){if(f<=0)return g;d=e+f}else{if(!(e<0))return g;if(f>=0)return g;d=-(e+f)}var h=r*d;return g>=h||g<=-h?g:t(a,b,c)},function(a,b,c,d){var e=a[0]-d[0],f=b[0]-d[0],g=c[0]-d[0],h=a[1]-d[1],i=b[1]-d[1],j=c[1]-d[1],k=a[2]-d[2],l=b[2]-d[2],m=c[2]-d[2],n=f*j,o=g*i,p=g*h,q=e*j,r=e*i,t=f*h,v=k*(n-o)+l*(p-q)+m*(r-t),w=(Math.abs(n)+Math.abs(o))*Math.abs(k)+(Math.abs(p)+Math.abs(q))*Math.abs(l)+(Math.abs(r)+Math.abs(t))*Math.abs(m),x=s*w;return v>x||-v>x?v:u(a,b,c,d)}];return k(),c.exports}),a.registerDynamic("12c",["12b"],!0,function(a,b,c){this||self;return c.exports=a("12b"),c.exports}),a.registerDynamic("12d",["12c"],!0,function(a,b,c){"use strict";function d(a,b){var c,d;if(b[0][0]<b[1][0])c=b[0],d=b[1];else{if(!(b[0][0]>b[1][0])){var e=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]),h=Math.min(b[0][1],b[1][1]),i=Math.max(b[0][1],b[1][1]);return g<h?g-h:e>i?e-i:g-i}c=b[1],d=b[0]}var j,k;a[0][1]<a[1][1]?(j=a[0],k=a[1]):(j=a[1],k=a[0]);var l=f(d,c,j);return l?l:(l=f(d,c,k),l?l:k-d)}function e(a,b){var c,e;if(b[0][0]<b[1][0])c=b[0],e=b[1];else{if(!(b[0][0]>b[1][0]))return d(b,a);c=b[1],e=b[0]}var g,h;if(a[0][0]<a[1][0])g=a[0],h=a[1];else{if(!(a[0][0]>a[1][0]))return-d(a,b);g=a[1],h=a[0]}var i=f(c,e,h),j=f(c,e,g);if(i<0){if(j<=0)return i}else if(i>0){if(j>=0)return i}else if(j)return j;if(i=f(h,g,e),j=f(h,g,c),i<0){if(j<=0)return i}else if(i>0){if(j>=0)return i}else if(j)return j;return e[0]-h[0]}this||self;c.exports=e;var f=a("12c");return c.exports}),a.registerDynamic("12e",["12f","120","12c","12d"],!0,function(a,b,c){"use strict";function d(a,b,c){this.slabs=a,this.coordinates=b,this.horizontal=c}function e(a,b){return a.y-b}function f(a,b){for(var c=null;a;){var d,e,g=a.key;g[0][0]<g[1][0]?(d=g[0],e=g[1]):(d=g[1],e=g[0]);var h=l(d,e,b);if(h<0)a=a.left;else if(h>0)if(b[0]!==g[1][0])c=a,a=a.right;else{var i=f(a.right,b);if(i)return i;a=a.left}else{if(b[0]!==g[1][0])return a;var i=f(a.right,b);if(i)return i;a=a.left}}return c}function g(a,b,c,d){this.y=a,this.index=b,this.start=c,this.closed=d}function h(a,b,c,d){this.x=a,this.segment=b,this.create=c,this.index=d}function i(a){for(var b=a.length,c=2*b,e=new Array(c),f=0;f<b;++f){var i=a[f],j=i[0][0]<i[1][0];e[2*f]=new h(i[0][0],i,j,f),e[2*f+1]=new h(i[1][0],i,!j,f)}e.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create,c?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1]))});for(var l=k(m),n=[],o=[],p=[],f=0;f<c;){for(var q=e[f].x,r=[];f<c;){var s=e[f];if(s.x!==q)break;f+=1,s.segment[0][0]===s.x&&s.segment[1][0]===s.x?s.create&&(s.segment[0][1]<s.segment[1][1]?(r.push(new g(s.segment[0][1],s.index,!0,!0)),r.push(new g(s.segment[1][1],s.index,!1,!1))):(r.push(new g(s.segment[1][1],s.index,!0,!1)),r.push(new g(s.segment[0][1],s.index,!1,!0)))):l=s.create?l.insert(s.segment,s.index):l.remove(s.segment)}n.push(l.root),o.push(q),p.push(r)}return new d(n,o,p)}this||self;c.exports=i;var j=a("12f"),k=a("120"),l=a("12c"),m=a("12d"),n=d.prototype;return n.castUp=function(a){var b=j.le(this.coordinates,a[0]);if(b<0)return-1;var c=(this.slabs[b],f(this.slabs[b],a)),d=-1;if(c&&(d=c.value),this.coordinates[b]===a[0]){var g=null;if(c&&(g=c.key),b>0){var h=f(this.slabs[b-1],a);h&&(g?m(h.key,g)>0&&(g=h.key,d=h.value):(d=h.value,g=h.key))}var i=this.horizontal[b];if(i.length>0){var k=j.ge(i,a[1],e);if(k<i.length){var n=i[k];if(a[1]===n.y){if(n.closed)return n.index;for(;k<i.length-1&&i[k+1].y===a[1];)if(k+=1,n=i[k],n.closed)return n.index;if(n.y===a[1]&&!n.start){if(k+=1,k>=i.length)return d;n=i[k]}}if(n.start)if(g){var o=l(g[0],g[1],[a[0],n.y]);g[0][0]>g[1][0]&&(o=-o),o>0&&(d=n.index)}else d=n.index;else n.y!==a[1]&&(d=n.index)}}}return d},c.exports}),a.registerDynamic("130",["12e"],!0,function(a,b,c){this||self;return c.exports=a("12e"),c.exports}),a.registerDynamic("131",["12f"],!0,function(a,b,c){"use strict";function d(a,b,c,d,e){this.mid=a,this.left=b,this.right=c,this.leftPoints=d,this.rightPoints=e,this.count=(b?b.count:0)+(c?c.count:0)+d.length}function e(a,b){a.mid=b.mid,a.left=b.left,a.right=b.right,a.leftPoints=b.leftPoints,a.rightPoints=b.rightPoints,a.count=b.count}function f(a,b){var c=o(b);a.mid=c.mid,a.left=c.left,a.right=c.right,a.leftPoints=c.leftPoints,a.rightPoints=c.rightPoints,a.count=c.count}function g(a,b){var c=a.intervals([]);c.push(b),f(a,c)}function h(a,b){var c=a.intervals([]),d=c.indexOf(b);return d<0?s:(c.splice(d,1),f(a,c),t)}function i(a,b,c){for(var d=0;d<a.length&&a[d][0]<=b;++d){var e=c(a[d]);if(e)return e}}function j(a,b,c){for(var d=a.length-1;d>=0&&a[d][1]>=b;--d){var e=c(a[d]);if(e)return e}}function k(a,b){for(var c=0;c<a.length;++c){var d=b(a[c]);if(d)return d}}function l(a,b){return a-b}function m(a,b){var c=a[0]-b[0];return c?c:a[1]-b[1]}function n(a,b){var c=a[1]-b[1];return c?c:a[0]-b[0]}function o(a){if(0===a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a[c][0],a[c][1]);b.sort(l);for(var e=b[b.length>>1],f=[],g=[],h=[],c=0;c<a.length;++c){var i=a[c];i[1]<e?f.push(i):e<i[0]?g.push(i):h.push(i)}var j=h,k=h.slice();return j.sort(m),k.sort(n),new d(e,o(f),o(g),j,k)}function p(a){this.root=a}function q(a){return new p(a&&0!==a.length?o(a):null)}var r=(this||self,a("12f")),s=0,t=1,u=2;c.exports=q;var v=d.prototype;v.intervals=function(a){return a.push.apply(a,this.leftPoints),this.left&&this.left.intervals(a),this.right&&this.right.intervals(a),a},v.insert=function(a){var b=this.count-this.leftPoints.length;if(this.count+=1,a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?g(this,a):this.left.insert(a):this.left=o([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?g(this,a):this.right.insert(a):this.right=o([a]);else{var c=r.ge(this.leftPoints,a,m),d=r.ge(this.rightPoints,a,n);this.leftPoints.splice(c,0,a),this.rightPoints.splice(d,0,a)}},v.remove=function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return s;var c=this.right?this.right.count:0;if(4*c>3*(b-1))return h(this,a);var d=this.left.remove(a);return d===u?(this.left=null,this.count-=1,t):(d===t&&(this.count-=1),d)}if(a[0]>this.mid){if(!this.right)return s;var f=this.left?this.left.count:0;if(4*f>3*(b-1))return h(this,a);var d=this.right.remove(a);return d===u?(this.right=null,this.count-=1,t):(d===t&&(this.count-=1),d)}if(1===this.count)return this.leftPoints[0]===a?u:s;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){for(var g=this,i=this.left;i.right;)g=i,i=i.right;if(g===this)i.right=this.right;else{var j=this.left,d=this.right;g.count-=i.count,g.right=i.left,i.left=j,i.right=d}e(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?e(this,this.left):e(this,this.right);return t}for(var j=r.ge(this.leftPoints,a,m);j<this.leftPoints.length&&this.leftPoints[j][0]===a[0];++j)if(this.leftPoints[j]===a){this.count-=1,this.leftPoints.splice(j,1);for(var d=r.ge(this.rightPoints,a,n);d<this.rightPoints.length&&this.rightPoints[d][1]===a[1];++d)if(this.rightPoints[d]===a)return this.rightPoints.splice(d,1),t}return s},v.queryPoint=function(a,b){if(a<this.mid){if(this.left){var c=this.left.queryPoint(a,b);if(c)return c}return i(this.leftPoints,a,b)}if(a>this.mid){if(this.right){var c=this.right.queryPoint(a,b);if(c)return c}return j(this.rightPoints,a,b)}return k(this.leftPoints,b)},v.queryInterval=function(a,b,c){if(a<this.mid&&this.left){var d=this.left.queryInterval(a,b,c);if(d)return d}if(b>this.mid&&this.right){var d=this.right.queryInterval(a,b,c);if(d)return d}return b<this.mid?i(this.leftPoints,b,c):a>this.mid?j(this.rightPoints,a,c):k(this.leftPoints,c)};var w=p.prototype;return w.insert=function(a){this.root?this.root.insert(a):this.root=new d(a[0],null,null,[a],[a])},w.remove=function(a){if(this.root){var b=this.root.remove(a);return b===u&&(this.root=null),b!==s}return!1},w.queryPoint=function(a,b){if(this.root)return this.root.queryPoint(a,b)},w.queryInterval=function(a,b,c){if(a<=b&&this.root)return this.root.queryInterval(a,b,c)},Object.defineProperty(w,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(w,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}}),c.exports}),a.registerDynamic("132",["131"],!0,function(a,b,c){this||self;return c.exports=a("131"),c.exports}),a.registerDynamic("133",[],!0,function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=["function ",a,"(a,l,h,",d.join(","),"){",f?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",e?".get(m)":"[m]"];return f?b.indexOf("c")<0?g.push(";if(x===y){return m}else if(x<=y){"):g.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):g.push(";if(",b,"){i=m;"),c?g.push("l=m+1}else{h=m-1}"):g.push("h=m-1}else{l=m+1}"),g.push("}"),f?g.push("return -1};"):g.push("return i};"),g.join("")}function e(a,b,c,e){var f=new Function([d("A","x"+a+"y",b,["y"],!1,e),d("B","x"+a+"y",b,["y"],!0,e),d("P","c(x,y)"+a+"0",b,["y","c"],!1,e),d("Q","c(x,y)"+a+"0",b,["y","c"],!0,e),"function dispatchBsearch",c,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",c].join(""));return f()}this||self;return c.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)},c.exports}),a.registerDynamic("12f",["133"],!0,function(a,b,c){this||self;return c.exports=a("133"),c.exports}),a.registerDynamic("134",["12c","130","132","12f"],!0,function(a,b,c){function d(){return!0}function e(a){return function(b,c){var e=a[b];return!!e&&!!e.queryPoint(c,d)}}function f(a){for(var b={},c=0;c<a.length;++c){var d=a[c],f=d[0][0],g=d[0][1],h=d[1][1],i=[Math.min(g,h),Math.max(g,h)];f in b?b[f].push(i):b[f]=[i]}for(var j={},k=Object.keys(b),c=0;c<k.length;++c){var l=b[k[c]];j[k[c]]=n(l)}return e(j)}function g(a,b){return function(c){var d=o.le(b,c[0]);if(d<0)return 1;var e=a[d];if(!e){if(!(d>0&&b[d]===c[0]))return 1;e=a[d-1]}for(var f=1;e;){var g=e.key,h=l(c,g[0],g[1]);if(g[0][0]<g[1][0])if(h<0)e=e.left;else{if(!(h>0))return 0;f=-1,e=e.right}else if(h>0)e=e.left;else{if(!(h<0))return 0;f=1,e=e.right}}return f}}function h(a){return 1}function i(a){return function(b){return a(b[0],b[1])?0:1}}function j(a,b){return function(c){return a(c[0],c[1])?0:b(c)}}function k(a){for(var b=a.length,c=[],d=[],e=0;e<b;++e)for(var k=a[e],l=k.length,n=l-1,o=0;o<l;n=o++){var p=k[n],q=k[o];p[0]===q[0]?d.push([p,q]):c.push([p,q])}if(0===c.length)return 0===d.length?h:i(f(d));var r=m(c),s=g(r.slabs,r.coordinates);return 0===d.length?s:j(f(d),s)}this||self;c.exports=k;var l=a("12c")[3],m=a("130"),n=a("132"),o=a("12f");return c.exports}),a.registerDynamic("135",["134"],!0,function(a,b,c){this||self;return c.exports=a("134"),c.exports}),a.registerDynamic("136",[],!0,function(a,b,c){function d(a){var b=a*m*6371;return(b>1?b.toFixed(3)+"km":(1e3*b).toPrecision(3)+"m")+" ("+a.toPrecision(3)+")"}function e(a){if(!a.length)return 0;for(var b=0,c=a[0],d=c[0]*m,e=c[1]*m/2+l,f=d,g=Math.cos(e),h=Math.sin(e),i=1,j=a.length;i<j;++i){c=a[i],d=c[0]*m,e=c[1]*m/2+l;var n=d-f,o=Math.cos(e),p=Math.sin(e),q=h*p,r=g*o+q*Math.cos(n),s=q*Math.sin(n);b+=Math.atan2(s,r),f=d,g=o,h=p}return 2*(b>k?b-2*k:b<-k?b+2*k:b)}function f(a){return a<0?a+4*k:a}function g(a){var b=h(a[0],a[1]),c=h(a[1],a[2]),d=h(a[2],a[0]),e=(b+c+d)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(e/2)*Math.tan((e-b)/2)*Math.tan((e-c)/2)*Math.tan((e-d)/2))))}function h(a,b){var c,d=(b[0]-a[0])*m,e=Math.sin(d),f=Math.cos(d),g=Math.sin(a[1]*m),h=Math.cos(a[1]*m),i=Math.sin(b[1]*m),j=Math.cos(b[1]*m);return Math.atan2(Math.sqrt((c=j*e)*c+(c=h*i-g*j*f)*c),g*i+h*j*f)}function i(a,b,c,d){return a*=m,b*=m,c*=m,d*=m,2*Math.asin(Math.sqrt(j(d-b)+Math.cos(b)*Math.cos(d)*j(c-a)))}function j(a){return(a=Math.sin(a/2))*a}var k=(this||self,Math.PI),l=k/4,m=k/180;return b.name="spherical",b.formatDistance=d,b.ringArea=e,b.absoluteArea=f,b.triangleArea=g,b.distance=i,c.exports}),a.registerDynamic("137",[],!0,function(a,b,c){function d(a){return a.toString()}function e(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return.5*f}function f(a){return Math.abs((a[0][0]-a[2][0])*(a[1][1]-a[0][1])-(a[0][0]-a[1][0])*(a[2][1]-a[0][1]))}function g(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)}this||self;return b.name="cartesian",b.formatDistance=d,b.ringArea=e,b.absoluteArea=Math.abs,b.triangleArea=f,b.distance=g,c.exports}),a.register("138",["135","136","137"],function(a){"use strict";function b(a){for(var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],c=b?f:e,d=0;d<a.length;d++){var g=c(a[d]);(0===d&&g<0||d>0&&g>0)&&a[d].reverse()}}function c(a){var b=a.map(d),c=a.length;return function(a){for(var d=0;d<c;d++)if(b[d](a)<=0)return d;return-1}}var d,e,f;return a("ensureClockwisePolygon",b),a("getPointInPolygonsFn",c),{setters:[function(a){d=a.default},function(a){e=a.ringArea},function(a){f=a.ringArea}],execute:function(){}}}),a.register("139",["138","5b","c4","c0"],function(a){"use strict";function b(a,b){var h=arguments.length<=2||void 0===arguments[2]?["x","y"]:arguments[2];g(a),"Polygon"===b.type&&(b={type:"MultiPolygon",coordinates:[b.coordinates]});var i=b.coordinates;i.forEach(function(a){return c(a)});var j=d(i),k=babelHelpers.slicedToArray(h,2),l=k[0],m=k[1];return a.loadDomain().then(function(b){for(var c=b.axes.get(l).values,d=b.axes.get(m).values,g=e(new Uint8Array(c.length*d.length),[c.length,d.length]),h=0;h<c.length;h++)for(var i=0;i<d.length;i++){var k=j([c[h],d[i]])>=0;g.set(h,i,k)}var n=function(a,b){return g.get(a[l]||0,a[m]||0)?b.get(a):null},o=a,p=!0,q=!1,r=void 0;try{for(var s,t=a.parameters.keys()[Symbol.iterator]();!(p=(s=t.next()).done);p=!0){var u=s.value;o=f(o,u,n)}}catch(a){q=!0,r=a}finally{try{!p&&t.return&&t.return()}finally{if(q)throw r}}return o})}var c,d,e,f,g;return a("maskByPolygon",b),{setters:[function(a){c=a.ensureClockwisePolygon,d=a.getPointInPolygonsFn},function(a){e=a.default},function(a){f=a.mapRange},function(a){g=a.checkCoverage}],execute:function(){}}}),a.register("13a",["138","139","be"],function(a){
"use strict";return{setters:[function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)},function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);a(c)}],execute:function(){}}}),a.register("5d",["13a"],function(a){"use strict";return{setters:[function(b){var c={};for(var d in b)"default"!==d&&(c[d]=b[d]);c.default=b.default,a(c)}],execute:function(){}}}),a.register("6e",["b4","5d"],function(a){"use strict";function b(a,b){return a.sort(function(a,c){var d=b(a),e=b(c);return d<e?-1:d>e?1:0})}function c(a,b){if("string"==typeof a){var c=b.map(function(a){return a+"; q=1.0"});return c.push("application/json; q=0.5"),c=c.join(","),fetch(a,{headers:new Headers({Accept:c})}).catch(function(b){throw b.response={url:a},b}).then(d).then(function(a){return a.json()})}return Promise.resolve(a)}function d(a){if(a.ok)return a;var b=new Error(a.statusText);throw b.response=a,b}var e,f;return a("sortByKey",b),a("loadJSON",c),a("checkStatus",d),{setters:[function(a){},function(b){var c={};c.i18n=b.getLanguageString,a(c)}],execute:function(){e="https://ec-melodies.github.io/wp02-dcat/feed.jsonld",a("MELODIES_DCAT_CATALOG_URL",e),f=function(){function a(b,c){babelHelpers.classCallCheck(this,a),this._map=new Map(c),this.defaultFactory=b}return babelHelpers.createClass(a,[{key:"get",value:function(a){return this._map.has(a)||this._map.set(a,this.defaultFactory()),this._map.get(a)}},{key:"set",value:function(a,b){this._map.set(a,b)}},{key:"delete",value:function(a){this._map.delete(a)}}]),a}(),a("DefaultMap",f)}}}),a.register("51",["6e"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.DefaultMap}],execute:function(){c=function(){function a(){babelHelpers.classCallCheck(this,a),this.listeners=new b(function(){return new Set})}return babelHelpers.createClass(a,[{key:"on",value:function(a,b){a=Array.isArray(a)?a:[a];var c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this.listeners.get(h).add(b)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return this}},{key:"off",value:function(a,b){if(!this.listeners.get(a).delete(b))throw new Error("Event listener not found")}},{key:"fire",value:function(a,b){console.log("Event: '"+a+"', Class: "+this.constructor.name+", Data:",b);var c=!0,d=!1,e=void 0;try{for(var f,g=new Set(this.listeners.get(a))[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h(b)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}}]),a}(),a("default",c)}}}),a.register("6d",["51"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.default}],execute:function(){c="view",a("VIEW",c),d="process",a("PROCESS",d),e="external_link",a("EXTERNAL_LINK",e),f=function(a){function b(a){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.context=a||{},this.type=this.constructor.type}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"remove",value:function(){}}]),b}(b),a("default",f)}}}),a.register("13b",["51","54","73","6e","6d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.$,d=a.$$,e=a.HTML},function(a){f=a.default},function(a){g=a.i18n},function(a){h=a.EXTERNAL_LINK}],execute:function(){i=function(){return'\n<h1 class="sidebar-header">Workspace<div class="sidebar-close"><i class="glyphicon glyphicon-menu-left"></i></div></h1>\n\n<p style="margin-top: 20px">\n  <button type="button" class="btn btn-primary create-dataset-button">Load Data</button>\n</p>\n\n<div class="workspace-dataset-list">\n  <p class="user-hint">Click on "Add to Workspace" in the search tab to add datasets.</p>\n</div>\n'},j='\n<div class="modal fade" id="formatSelectModal" tabindex="-1" role="dialog" aria-labelledby="formatSelectModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" id="formatSelectModalLabel">Select a format</h4>\n      </div>\n      <div class="modal-body">      \n        <span class="format-list"></span>\n        <div class="alert alert-info" role="alert">\n          The data you add here is not uploaded to a server. It stays within your browser and is gone when you reload the page.\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="dataCreateLoadModal" tabindex="-1" role="dialog" aria-labelledby="dataCreateLoadModalLabel">\n<div class="modal-dialog" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n      <h4 class="modal-title" id="dataCreateLoadModalLabel">Input your data</h4>\n    </div>\n    <div class="modal-body">      \n      <div class="form-group">\n        <label for="formDatasetTitle">Give your new dataset a name:</label>\n        <input class="form-control dataset-title" type="text" id="formDatasetTitle" placeholder="My new dataset">\n      </div>\n    \n      <span class="data-input-methods"></span>\n    </div>\n    <div class="modal-footer">\n      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n    </div>\n  </div>\n</div>\n</div>\n',c("body").add(e(j)),k={"workspace-dataset":'<div class="panel workspace-dataset">\n    <div class="panel-heading dataset-title-heading">\n      <h4>\n        <span class="dataset-title"></span>\n        <small><a href="#" class="dataset-title-edit"><i class="glyphicon glyphicon-pencil"></i></a></small>\n        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n      </h4>\n    </div>\n    <div class="panel-heading dataset-title-edit-form" style="display:none">\n      <form>\n        <div class="form-group">\n          <input type="text" class="form-control">\n        </div>\n        <button type="submit" class="btn btn-default">Rename</button>\n        <button type="button" name="cancel" class="btn btn-default">Cancel</button>\n      </form>\n    </div>\n    <div class="panel-body" style="text-align: center">\n      <div class="throbber-loader loader">Loading...</div>\n    </div>\n  \n    <ul class="list-group workspace-dataset-distribution-list"></ul>\n  </div>',"workspace-dataset-distribution":'<li class="list-group-item workspace-dataset-distribution">\n    <p>Title: <em class="distribution-title"></em></p>\n    <p>Type: <span class="distribution-format"></span></p>\n    <p>Content: <span class="distribution-content"></span></p>\n    <div class="distribution-actions"></div>\n  </li>',"workspace-dataset-distribution-action":'<span class="workspace-dataset-distribution-action">\n    <button type="button" class="btn btn-primary"><span class="action-icon"></span> <span class="action-label"></span></button>\n  </span>',"workspace-dataset-distribution-action-external-link":'<span class="workspace-dataset-distribution-action">\n    <a target="_new" class="btn btn-primary"><span class="action-icon"></span> <span class="action-label"></span></a>\n  </span>',"workspace-dataset-distribution-error":'<li class="list-group-item list-group-item-danger workspace-dataset-distribution error-item">\n    <p>Type: <span class="distribution-format"></span></p>\n    <p>Error: <em class="error-message"></em></p>\n    <span class="error-details-section">\n      <p>Details:</p>\n      <small><pre class="error-details"></pre></small>\n    </span>\n  </li>',"format-button-item":'<span><button type="button" class="btn btn-primary format-button" data-dismiss="modal"></button></span> ',"url-input-panel":'<div class="panel panel-primary">\n    <div class="panel-heading">\n      <h4>By URL</h4>\n    </div>\n    <div class="panel-body">\n      <div class="input-group">\n        <input type="text" class="form-control data-url" placeholder="http://..." />\n        <span class="input-group-btn">\n          <button class="btn btn-primary load-url-button" type="button" data-dismiss="modal">Load</button>\n        </span>\n      </div>\n    </div>\n  </div>',"file-input-panel":'<div class="panel panel-primary">\n    <div class="panel-heading">\n      <h4>By Local File</h4>\n    </div>\n    <div class="panel-body">\n      <div class="input-group">\n        <input type="file" class="form-control data-file" />\n        <span class="input-group-btn">\n          <button class="btn btn-primary load-file-button" type="button" data-dismiss="modal">Load</button>\n        </span>\n      </div>\n    </div>\n  </div>',"text-input-panel":'<div class="panel panel-primary">\n    <div class="panel-heading">\n      <h4>By Direct Input</h4>\n    </div>\n    <div class="panel-body">\n      <textarea class="form-control data-textarea" rows="10"></textarea>\n      <button class="btn btn-primary load-text-button" type="button" data-dismiss="modal">Load</button>\n      <div class="alert alert-danger json-parse-error" style="display:none" role="alert"></div>\n    </div>\n  </div>'},l="\n<style>\n.virtual-dataset > .panel-heading {\n  background: repeating-linear-gradient( -45deg, #d9edf7, #d9edf7 10px, #CCE8F4 10px, #CCE8F4 20px );\n}\n.workspace-dataset-list, .load-input-button, .json-parse-error {\n  margin-top: 20px;\n}\n.format-button {\n  margin-bottom: 15px;\n}\n.virtual-dataset {\n  overflow: hidden;\n  max-height: 0;\n  transition: max-height 20s;\n}\n.blind-in {\n  max-height: 10000px;\n}\n@keyframes flash-icon {\n  0%   {color: black}\n  50%  {color: red}\n  100% {color: black}\n}\n.highlight-anim {\n  animation-name: flash-icon;\n  animation-duration: 0.8s;\n  animation-iteration-count: 4;\n  animation-timing-function: ease-in-out;\n}\n/* http://www.css-spinners.com/spinner/throbber */\n@keyframes throbber-loader {\n  0%  { background: #dde2e7 }\n  10% { background: #6b9dc8 }\n  40% { background: #dde2e7 }\n}\n/* :not(:required) hides these rules from IE9 and below */\n.throbber-loader:not(:required) {\n  animation: throbber-loader 2000ms 300ms infinite ease-out;\n  background: #dde2e7;\n  display: inline-block;\n  position: relative;\n  text-indent: -9999px;\n  width: 0.9em;\n  height: 1.5em;\n  margin: 0 1.6em;\n}\n.throbber-loader:not(:required):before, .throbber-loader:not(:required):after {\n  background: #dde2e7;\n  content: ' 0B';\n  display: inline-block;\n  width: 0.9em;\n  height: 1.5em;\n  position: absolute;\n  top: 0;\n}\n.throbber-loader:not(:required):before {\n  animation: throbber-loader 2000ms 150ms infinite ease-out;\n  left: -1.6em;\n}\n.throbber-loader:not(:required):after {\n  animation: throbber-loader 2000ms 450ms infinite ease-out;\n  right: -1.6em;\n}\n</style>\n",c("head").add(e(l)),m=function(a){function b(a,d){babelHelpers.classCallCheck(this,b),babelHelpers.get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.sidebar=a,this.id=d,c("#"+d).fill(e(i())),this.workspace=a.workspace,this.app=a.app,this._registerUIListeners(),this._registerModelListeners()}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"_registerUIListeners",value:function(){var a=this;c(".create-dataset-button","#"+this.id).on("click",function(){return a._createDatasetWorkflow()})}},{key:"_createDatasetWorkflow",value:function(){var a=this,b=function(){var b=c("#formatSelectModal");c(".format-list",b).fill();var g=!0,h=!1,i=void 0;try{for(var j,l=function(){var a=j.value;if(a.mediaTypes.some(function(a){return a.indexOf("/")!==-1})){var f=c(e(k["format-button-item"]));c(".format-button",f).fill(a.label).on("|click",function(){setTimeout(function(){return d(a)},100)}),c(".format-list",b).add(f)}},m=a.app.formats[Symbol.iterator]();!(g=(j=m.next()).done);g=!0)l()}catch(a){h=!0,i=a}finally{try{!g&&m.return&&m.return()}finally{if(h)throw i}}new f(b[0]).open()},d=function(b){var d=c("#dataCreateLoadModal"),g=c(".data-input-methods",d);g.fill(),g.add(e(k["url-input-panel"])),g.add(e(k["file-input-panel"]));var h=function(a){var e=c(".dataset-title",d).get("value")||"(No title)",f={title:{en:e},virtual:!0,distributions:[{title:{en:"Data"},mediaType:b.mediaTypes[0],url:a}]};return f},i=function(b){a.workspace.addDataset(b),a.workspace.requestFocus(b)};c(".load-url-button",d).on("|click",function(){var a=c(".data-url",d).get("value");i(h(a))});var j=function(c){var d=new Blob([c],{type:b.mediaTypes[0]}),e=URL.createObjectURL(d),f=h(e),g=function b(c){var d=c.dataset;d===f&&(URL.revokeObjectURL(e),delete d.distributions[0].url,a.workspace.off("distributionsLoad",b))};a.workspace.on("distributionsLoad",g),i(f)};c(".load-file-button",d).on("|click",function(){var a=c(".data-file",d)[0].files[0];j(a)}),b.mediaTypes.some(function(a){return a.indexOf("json")!==-1||a.indexOf("xml")!==-1})&&(g.add(e(k["text-input-panel"])),c(".load-text-button",d).on("|click",function(a){var e=c(".data-textarea",d).get("value");if(b.mediaTypes.some(function(a){return a.indexOf("json")!==-1}))try{JSON.parse(e)}catch(b){return c(".json-parse-error",d).show().fill(b.message),void a.stopPropagation()}j(e)})),new f(d[0]).open()};b()}},{key:"_registerModelListeners",value:function(){var a=this;this.workspace.on("add",function(b){var d=b.dataset,e=b.parent,f=c("a.sidebar-tab","#"+a.sidebar.id).filter(function(b){return c(b).get("@href")==="#"+a.id});f.set("-highlight-anim"),setTimeout(function(){f.set("+highlight-anim")},100),a._addDataset(d,e),c(".user-hint","#"+a.id).remove()}),this.workspace.on("remove",function(a){var b=a.dataset;c(b.domEl).remove()}),this.workspace.on("distributionsLoading",function(a){var b=a.dataset;c(".panel-body",b.domEl).show()}),this.workspace.on("distributionsLoad",function(a){var b=a.dataset;c(".panel-body",b.domEl).hide()}),this.workspace.on("distributionLoad",function(b){var c=b.dataset,d=b.distribution;a._addDistribution(c,d)}),this.workspace.on("distributionLoadError",function(b){var c=b.dataset,d=b.distribution,e=b.error;a._addDistributionLoadError(c,d,e)}),this.workspace.on("requestFocus",function(b){var c=b.dataset,d={behavior:"smooth"};if(c.domEl)c.domEl.scrollIntoView(d);else{var e=function b(e){e.dataset===c&&(c.domEl.scrollIntoView(d),a.off("add",b))};a.on("add",e)}}),this.workspace.on("titleChange",function(a){var b=a.dataset;c(".dataset-title",b.domEl).fill(g(b.title))})}},{key:"_addDataset",value:function(a,b){var f=this,h=e(k["workspace-dataset"])[0],i=c(".workspace-dataset-list","#"+this.id);b&&this.workspace.datasets.indexOf(b)!==-1?c(b.domEl).addAfter(h):i.add(h),a.domEl=h,a.virtual?(c(h).set("+panel-info +virtual-dataset"),setTimeout(function(){return c(h).set("+blind-in")},100)):c(h).set("+panel-default"),c(".dataset-title",h).fill(g(a.title)),c(".close",h).on("click",function(){f.workspace.removeDataset(a)});var j=d("input",c(".dataset-title-edit-form",h));c(".dataset-title-edit",h).on("click",function(){c(".dataset-title-heading",h).hide(),c(".dataset-title-edit-form",h).show(),j.value=g(a.title)}),c("form",c(".dataset-title-edit-form",h)).on("submit",function(){f.workspace.setDatasetTitle(a,j.value),c(".dataset-title-heading",h).show(),c(".dataset-title-edit-form",h).hide()}),c("button",c(".dataset-title-edit-form",h)).filter(function(a){return"cancel"===a.name}).on("click",function(){c(".dataset-title-heading",h).show(),c(".dataset-title-edit-form",h).hide()}),this.fire("add",{dataset:a})}},{key:"_addDistribution",value:function(a,b){var d=e(k["workspace-dataset-distribution"]);c(".workspace-dataset-distribution-list",a.domEl).add(d),b.domEl=d;var f=b.metadata;if(c(".distribution-title",d).fill(g(b.title)),c(".distribution-format",d).fill(f.format),c(".distribution-content",d).fill(f.content),b.actions){var i=!0,j=!1,l=void 0;try{for(var m,n=function(){var a=m.value,b=void 0;a.type===h?(b=e(k["workspace-dataset-distribution-action-external-link"]),c("a",b).set("@href",a.run())):(b=e(k["workspace-dataset-distribution-action"]),c("button",b).on("click",function(){return a.run()}));var f=function(){c(".action-label",b).fill(a.label),a.icon&&c(".action-icon",b).fill(e(a.icon))};f(),a.on("labelChange",function(){return f()}),c(".distribution-actions",d).add(b)},o=b.actions[Symbol.iterator]();!(i=(m=o.next()).done);i=!0)n()}catch(a){j=!0,l=a}finally{try{!i&&o.return&&o.return()}finally{if(j)throw l}}}}},{key:"_addDistributionLoadError",value:function(a,b,d){var f=e(k["workspace-dataset-distribution-error"]);c(".workspace-dataset-distribution-list",a.domEl).add(f),b.domEl=f,c(".distribution-format",f).fill(b.formatImpl.label),c(".error-message",f).fill(d.message),Object.keys(d).length>0?c(".error-details",f).fill(JSON.stringify(d,null,1)):c(".error-details-section",f).remove()}}]),b}(b),a("default",m)}}}),a.register("13c",["54","4a","a8","a9","aa","b2","13b"],function(a){"use strict";var b,c,d,e,f,g,h;return{setters:[function(a){b=a.$,c=a.HTML},function(a){d=a.default},function(a){},function(a){},function(a){},function(a){e=a.default},function(a){f=a.default}],execute:function(){g=function(a,b,c){return'\n<div id="'+a+'" class="sidebar collapsed">\n  <!-- Nav tabs -->\n  <div class="sidebar-tabs">\n      <ul role="tablist">\n          <li><a href="#'+b+'" role="tab" class="sidebar-tab"><i class="glyphicon glyphicon-search"></i></a></li>\n          <li><a href="#'+c+'" role="tab" class="sidebar-tab"><i class="glyphicon glyphicon-flash"></i></a></li>\n      </ul>\n  </div>\n  \n  <!-- Tab panes -->\n  <div class="sidebar-content">\n      <div class="sidebar-pane" id="'+b+'"></div>\n      <div class="sidebar-pane" id="'+c+'"></div>\n  </div>\n</div>\n<style>\n.error-item {\n  word-wrap: break-word;\n}\n</style>\n'},h=function(){function a(h){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],j=i.app,k=i.sidebarId,l=void 0===k?"sidebar":k,m=i.searchPaneId,n=void 0===m?"search":m,o=i.workspacePaneId,p=void 0===o?"workspace":o,q=i.layerControl,r=void 0===q?null:q;babelHelpers.classCallCheck(this,a),this.map=h,this.app=j,this.catalogue=j.catalogue,this.workspace=j.workspace,this.id=l,this.layerControl=r,b("body").addFront(c(g(l,n,p))),b("#"+h.getContainer().id).set("+sidebar-map"),this.panes={Search:new e(this,n),Workspace:new f(this,p)},this.control=d.control.sidebar(l).addTo(h)}return babelHelpers.createClass(a,[{key:"open",value:function(a){this.control.open(a.id)}}]),a}(),a("default",h)}}}),a.registerDynamic("13d",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),a.register("13e",["4a"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){b.Control.StyledLayerControl=b.Control.Layers.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,c,d){var e,f;b.Util.setOptions(this,d),this._layers={},this._lastZIndex=0,this._handlingClick=!1,this._groupList=[],this._domGroups=[];for(e in a)for(var f in a[e].layers)this._addLayer(a[e].layers[f],f,a[e],!1);for(e in c)for(var f in c[e].layers)this._addLayer(c[e].layers[f],f,c[e],!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b,c){return this._addLayer(a,b,c,!1),this._update(),this},addOverlay:function(a,b,c){return this._addLayer(a,b,c,!0),this._update(),this},removeLayer:function(a){var c=b.Util.stamp(a);return delete this._layers[c],this._update(),this},removeGroup:function(a){for(var b in this._groupList)if(this._groupList[b].groupName==a){for(var c in this._layers)this._layers[c].group&&this._layers[c].group.name==a&&delete this._layers[c];delete this._groupList[b],this._update();break}},_initLayout:function(){var a="leaflet-control-layers",c=this._container=b.DomUtil.create("div",a);c.setAttribute("aria-haspopup",!0),b.Browser.touch?b.DomEvent.on(c,"click",b.DomEvent.stopPropagation):(b.DomEvent.disableClickPropagation(c),b.DomEvent.on(c,"wheel",b.DomEvent.stopPropagation));var d=document.createElement("section");d.className="ac-container "+a+"-list";var e=this._form=b.DomUtil.create("form");if(d.appendChild(e),this.options.collapsed){b.Browser.android||b.DomEvent.on(c,"mouseover",this._expand,this).on(c,"mouseout",this._collapse,this);var f=this._layersLink=b.DomUtil.create("a",a+"-toggle",c);f.href="#",f.title="Layers",b.Browser.touch?b.DomEvent.on(f,"click",b.DomEvent.stop).on(f,"click",this._expand,this):b.DomEvent.on(f,"focus",this._expand,this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=b.DomUtil.create("div",a+"-base",e),this._overlaysList=b.DomUtil.create("div",a+"-overlays",e),c.appendChild(d),this._containers=c.getElementsByClassName("ac-container");for(var g=0;g<this._containers.length;g++)this.options.container_width&&(this._containers[g].style.width=this.options.container_width),this._default_maxHeight=this.options.container_maxHeight?this.options.container_maxHeight:this._map._size.y-70,this._containers[g].style.maxHeight=this._default_maxHeight+"px";window.onresize=this._on_resize_window.bind(this)},_on_resize_window:function(){for(var a=0;a<this._containers.length;a++)this._containers[a].style.maxHeight=window.innerHeight-90<this._removePxToInt(this._default_maxHeight)?window.innerHeight-90+"px":this._removePxToInt(this._default_maxHeight)+"px"},_removePxToInt:function(a){return parseInt(a.replace("px",""))},_addLayer:function(a,c,d,e){var f=b.Util.stamp(a);if(this._layers[f]={layer:a,name:c,overlay:e},d){var g=this._groupList.indexOf(d);if(g===-1)for(var h in this._groupList)if(this._groupList[h].groupName==d.groupName){g=h;break}g===-1&&(g=this._groupList.push(d)-1),this._layers[f].group={name:d.groupName,id:g,expanded:d.expanded}}this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="",this._domGroups.length=0;var a,b,c=!1,d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay}},_onLayerChange:function(a){var c=this._layers[b.Util.stamp(a.layer)];if(c){this._handlingClick||this._update();var d=c.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;d&&this._map.fire(d,c)}},_createRadioElement:function(a,b){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(c+=' checked="checked"'),c+="/>";var d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(a){var c,d,e=document.createElement("div"),f=this._map.hasLayer(a.layer);a.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=f,e.className="menu-item-checkbox"):(c=this._createRadioElement("leaflet-base-layers",f),e.className="menu-item-radio"),c.layerId=b.Util.stamp(a.layer),b.DomEvent.on(c,"click",this._onInputClick,this);var g=document.createElement("span");if(g.innerHTML=" "+a.name,e.appendChild(c),e.appendChild(g),a.layer.StyledLayerControl&&a.layer.StyledLayerControl.removable){var h=document.createElement("input");h.type="button",h.className="bt_delete",b.DomEvent.on(h,"click",this._onDeleteClick,this),e.appendChild(h)}d=a.overlay?this._overlaysList:this._baseLayersList;var i=this._domGroups[a.group.id];if(i)i.lastElementChild.appendChild(e);else{i=document.createElement("div"),i.id="leaflet-control-accordion-layers-"+a.group.id;var j=a.group.expanded?' checked = "true" ':"",k=this.options.exclusive?' type="radio" ':' type="checkbox" ',l='<input id="ac'+a.group.id+'" name="accordion-1" class="menu" '+j+k+"/>",m='<label for="ac'+a.group.id+'">'+a.group.name+"</label>",n=document.createElement("article");n.className="ac-large",n.appendChild(e),this.options.group_maxHeight&&(n.style.maxHeight=this.options.group_maxHeight),i.innerHTML=l+m,i.appendChild(n),d.appendChild(i),this._domGroups[a.group.id]=i}return e},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;a<e;a++)b=d[a],c=this._layers[b.layerId],c&&(b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer));this._handlingClick=!1},_onDeleteClick:function(a){var b=a.target.parentElement.childNodes[0],c=this._layers[b.layerId];return!(!c.overlay&&b.checked)&&(this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer),this.removeLayer(c.layer),a.target.parentNode.remove(),!1)},_expand:function(){b.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),b.Control.styledLayerControl=function(a,c,d){return new b.Control.StyledLayerControl(a,c,d)}}}}),a.registerDynamic("13f",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),a.registerDynamic("140",[],!0,function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=(this||self,c.exports={});!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;return n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},c.exports}),a.registerDynamic("141",["140"],!0,function(a,b,c){this||self;return c.exports=a("140"),c.exports}),a.registerDynamic("142",["141"],!0,function(b,c,d){this||self;return d.exports=a._nodeRequire?process:b("141"),d.exports}),a.registerDynamic("3b",["142"],!0,function(a,b,c){this||self;return c.exports=a("142"),c.exports}),a.registerDynamic("143",["3b"],!0,function(a,b,c){"format cjs";var d;this||self;return function(a){!function(a,b,e){function f(){var b=a.L;g.noConflict=function(){return a.L=b,this},a.L=g}var g={version:"1.0.1"};"object"==typeof c&&"object"==typeof c.exports?c.exports=g:"function"==typeof d&&d.amd&&d(g),"undefined"!=typeof a&&f(),g.Util={extend:function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){e=arguments[c];for(b in e)a[b]=e[b]}return a},create:Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}(),bind:function(a,b){var c=Array.prototype.slice;if(a.bind)return a.bind.apply(a,c.call(arguments,1));var d=c.call(arguments,2);return function(){return a.apply(b,d.length?d.concat(c.call(arguments)):arguments)}},stamp:function(a){return a._leaflet_id=a._leaflet_id||++g.Util.lastId,a._leaflet_id},lastId:0,throttle:function(a,b,c){var d,e,f,g;return g=function(){d=!1,e&&(f.apply(c,e),e=!1)},f=function(){d?e=arguments:(a.apply(c,arguments),setTimeout(g,b),d=!0)}},wrapNum:function(a,b,c){var d=b[1],e=b[0],f=d-e;return a===d&&c?a:((a-e)%f+f)%f+e},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return g.Util.trim(a).split(/\s+/)},setOptions:function(a,b){a.hasOwnProperty("options")||(a.options=a.options?g.Util.create(a.options):{});for(var c in b)a.options[c]=b[c];return a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&b.indexOf("?")!==-1?"&":"?")+d.join("&")},template:function(a,b){return a.replace(g.Util.templateRe,function(a,c){var d=b[c];if(d===e)throw new Error("No value provided for variable "+a);return"function"==typeof d&&(d=d(b)),d})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){return a["webkit"+b]||a["moz"+b]||a["ms"+b]}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,e=a.requestAnimationFrame||b("RequestAnimationFrame")||c,f=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};g.Util.requestAnimFrame=function(b,d,f){return f&&e===c?void b.call(d):e.call(a,g.bind(b,d))},g.Util.cancelAnimFrame=function(b){b&&f.call(a,b)}}(),g.extend=g.Util.extend,g.bind=g.Util.bind,g.stamp=g.Util.stamp,g.setOptions=g.Util.setOptions,g.Class=function(){},g.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=b.__super__=this.prototype,d=g.Util.create(c);d.constructor=b,b.prototype=d;for(var e in this)this.hasOwnProperty(e)&&"prototype"!==e&&(b[e]=this[e]);return a.statics&&(g.extend(b,a.statics),delete a.statics),a.includes&&(g.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),d.options&&(a.options=g.Util.extend(g.Util.create(d.options),a.options)),g.extend(d,a),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;a<b;a++)d._initHooks[a].call(this)}},b},g.Class.include=function(a){return g.extend(this.prototype,a),this},g.Class.mergeOptions=function(a){return g.extend(this.prototype.options,a),this},g.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this},g.Evented=g.Class.extend({on:function(a,b,c){if("object"==typeof a)for(var d in a)this._on(d,a[d],b);else{a=g.Util.splitWords(a);for(var e=0,f=a.length;e<f;e++)this._on(a[e],b,c)}return this},off:function(a,b,c){if(a)if("object"==typeof a)for(var d in a)this._off(d,a[d],b);else{a=g.Util.splitWords(a);for(var e=0,f=a.length;e<f;e++)this._off(a[e],b,c)}else delete this._events;return this},_on:function(a,b,c){this._events=this._events||{};var d=this._events[a];d||(d=[],this._events[a]=d),c===this&&(c=e);for(var f={fn:b,ctx:c},g=d,h=0,i=g.length;h<i;h++)if(g[h].fn===b&&g[h].ctx===c)return;g.push(f),d.count++},_off:function(a,b,c){var d,f,h;if(this._events&&(d=this._events[a])){if(!b){for(f=0,h=d.length;f<h;f++)d[f].fn=g.Util.falseFn;
return void delete this._events[a]}if(c===this&&(c=e),d)for(f=0,h=d.length;f<h;f++){var i=d[f];if(i.ctx===c&&i.fn===b)return i.fn=g.Util.falseFn,this._firingCount&&(this._events[a]=d=d.slice()),void d.splice(f,1)}}},fire:function(a,b,c){if(!this.listens(a,c))return this;var d=g.Util.extend({},b,{type:a,target:this});if(this._events){var e=this._events[a];if(e){this._firingCount=this._firingCount+1||1;for(var f=0,h=e.length;f<h;f++){var i=e[f];i.fn.call(i.ctx||this,d)}this._firingCount--}}return c&&this._propagateEvent(d),this},listens:function(a,b){var c=this._events&&this._events[a];if(c&&c.length)return!0;if(b)for(var d in this._eventParents)if(this._eventParents[d].listens(a,b))return!0;return!1},once:function(a,b,c){if("object"==typeof a){for(var d in a)this.once(d,a[d],b);return this}var e=g.bind(function(){this.off(a,b,c).off(a,e,c)},this);return this.on(a,b,c).on(a,e,c)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[g.stamp(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[g.stamp(a)],this},_propagateEvent:function(a){for(var b in this._eventParents)this._eventParents[b].fire(a.type,g.extend({layer:a.target},a),!0)}});var h=g.Evented.prototype;h.addEventListener=h.on,h.removeEventListener=h.clearAllEventListeners=h.off,h.addOneTimeEventListener=h.once,h.fireEvent=h.fire,h.hasEventListeners=h.listens,g.Mixin={Events:h},function(){var c=navigator.userAgent.toLowerCase(),d=b.documentElement,e="ActiveXObject"in a,f=c.indexOf("webkit")!==-1,h=c.indexOf("phantom")!==-1,i=c.search("android [23]")!==-1,j=c.indexOf("chrome")!==-1,k=c.indexOf("gecko")!==-1&&!f&&!a.opera&&!e,l=0===navigator.platform.indexOf("Win"),m="undefined"!=typeof orientation||c.indexOf("mobile")!==-1,n=!a.PointerEvent&&a.MSPointerEvent,o=a.PointerEvent||n,p=e&&"transition"in d.style,q="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!i,r="MozPerspective"in d.style,s="OTransition"in d.style,t=!a.L_NO_TOUCH&&(o||"ontouchstart"in a||a.DocumentTouch&&b instanceof a.DocumentTouch);g.Browser={ie:e,ielt9:e&&!b.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in b),webkit:f,gecko:k,android:c.indexOf("android")!==-1,android23:i,chrome:j,safari:!j&&c.indexOf("safari")!==-1,win:l,ie3d:p,webkit3d:q,gecko3d:r,opera12:s,any3d:!a.L_DISABLE_3D&&(p||q||r)&&!s&&!h,mobile:m,mobileWebkit:m&&f,mobileWebkit3d:m&&q,mobileOpera:m&&a.opera,mobileGecko:m&&k,touch:!!t,msPointer:!!n,pointer:!!o,retina:(a.devicePixelRatio||a.screen.deviceXDPI/a.screen.logicalXDPI)>1}}(),g.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},g.Point.prototype={clone:function(){return new g.Point(this.x,this.y)},add:function(a){return this.clone()._add(g.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(g.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new g.Point(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new g.Point(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(a){a=g.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=g.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=g.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+g.Util.formatNum(this.x)+", "+g.Util.formatNum(this.y)+")"}},g.point=function(a,b,c){return a instanceof g.Point?a:g.Util.isArray(a)?new g.Point(a[0],a[1]):a===e||null===a?a:"object"==typeof a&&"x"in a&&"y"in a?new g.Point(a.x,a.y):new g.Point(a,b,c)},g.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},g.Bounds.prototype={extend:function(a){return a=g.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new g.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new g.Point(this.min.x,this.max.y)},getTopRight:function(){return new g.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof g.Point?g.point(a):g.bounds(a),a instanceof g.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=g.bounds(a);var b=this.min,c=this.max,d=a.min,e=a.max,f=e.x>=b.x&&d.x<=c.x,h=e.y>=b.y&&d.y<=c.y;return f&&h},overlaps:function(a){a=g.bounds(a);var b=this.min,c=this.max,d=a.min,e=a.max,f=e.x>b.x&&d.x<c.x,h=e.y>b.y&&d.y<c.y;return f&&h},isValid:function(){return!(!this.min||!this.max)}},g.bounds=function(a,b){return!a||a instanceof g.Bounds?a:new g.Bounds(a,b)},g.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},g.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new g.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},g.DomUtil={get:function(a){return"string"==typeof a?b.getElementById(a):a},getStyle:function(a,c){var d=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!d||"auto"===d)&&b.defaultView){var e=b.defaultView.getComputedStyle(a,null);d=e?e[c]:null}return"auto"===d?null:d},create:function(a,c,d){var e=b.createElement(a);return e.className=c||"",d&&d.appendChild(e),e},remove:function(a){var b=a.parentNode;b&&b.removeChild(a)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},toFront:function(a){a.parentNode.appendChild(a)},toBack:function(a){var b=a.parentNode;b.insertBefore(a,b.firstChild)},hasClass:function(a,b){if(a.classList!==e)return a.classList.contains(b);var c=g.DomUtil.getClass(a);return c.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},addClass:function(a,b){if(a.classList!==e)for(var c=g.Util.splitWords(b),d=0,f=c.length;d<f;d++)a.classList.add(c[d]);else if(!g.DomUtil.hasClass(a,b)){var h=g.DomUtil.getClass(a);g.DomUtil.setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==e?a.classList.remove(b):g.DomUtil.setClass(a,g.Util.trim((" "+g.DomUtil.getClass(a)+" ").replace(" "+b+" "," ")))},setClass:function(a,b){a.className.baseVal===e?a.className=b:a.className.baseVal=b},getClass:function(a){return a.className.baseVal===e?a.className:a.className.baseVal},setOpacity:function(a,b){"opacity"in a.style?a.style.opacity=b:"filter"in a.style&&g.DomUtil._setOpacityIE(a,b)},_setOpacityIE:function(a,b){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(a){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"},testProp:function(a){for(var c=b.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1},setTransform:function(a,b,c){var d=b||new g.Point(0,0);a.style[g.DomUtil.TRANSFORM]=(g.Browser.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")},setPosition:function(a,b){a._leaflet_pos=b,g.Browser.any3d?g.DomUtil.setTransform(a,b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos||new g.Point(0,0)}},function(){g.DomUtil.TRANSFORM=g.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var c=g.DomUtil.TRANSITION=g.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(g.DomUtil.TRANSITION_END="webkitTransition"===c||"OTransition"===c?c+"End":"transitionend","onselectstart"in b)g.DomUtil.disableTextSelection=function(){g.DomEvent.on(a,"selectstart",g.DomEvent.preventDefault)},g.DomUtil.enableTextSelection=function(){g.DomEvent.off(a,"selectstart",g.DomEvent.preventDefault)};else{var d=g.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);g.DomUtil.disableTextSelection=function(){if(d){var a=b.documentElement.style;this._userSelect=a[d],a[d]="none"}},g.DomUtil.enableTextSelection=function(){d&&(b.documentElement.style[d]=this._userSelect,delete this._userSelect)}}g.DomUtil.disableImageDrag=function(){g.DomEvent.on(a,"dragstart",g.DomEvent.preventDefault)},g.DomUtil.enableImageDrag=function(){g.DomEvent.off(a,"dragstart",g.DomEvent.preventDefault)},g.DomUtil.preventOutline=function(b){for(;b.tabIndex===-1;)b=b.parentNode;b&&b.style&&(g.DomUtil.restoreOutline(),this._outlineElement=b,this._outlineStyle=b.style.outline,b.style.outline="none",g.DomEvent.on(a,"keydown",g.DomUtil.restoreOutline,this))},g.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,g.DomEvent.off(a,"keydown",g.DomUtil.restoreOutline,this))}}(),g.LatLng=function(a,b,c){if(isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=+a,this.lng=+b,c!==e&&(this.alt=+c)},g.LatLng.prototype={equals:function(a,b){if(!a)return!1;a=g.latLng(a);var c=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return c<=(b===e?1e-9:b)},toString:function(a){return"LatLng("+g.Util.formatNum(this.lat,a)+", "+g.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){return g.CRS.Earth.distance(this,g.latLng(a))},wrap:function(){return g.CRS.Earth.wrapLatLng(this)},toBounds:function(a){var b=180*a/40075017,c=b/Math.cos(Math.PI/180*this.lat);return g.latLngBounds([this.lat-b,this.lng-c],[this.lat+b,this.lng+c])},clone:function(){return new g.LatLng(this.lat,this.lng,this.alt)}},g.latLng=function(a,b,c){return a instanceof g.LatLng?a:g.Util.isArray(a)&&"object"!=typeof a[0]?3===a.length?new g.LatLng(a[0],a[1],a[2]):2===a.length?new g.LatLng(a[0],a[1]):null:a===e||null===a?a:"object"==typeof a&&"lat"in a?new g.LatLng(a.lat,"lng"in a?a.lng:a.lon,a.alt):b===e?null:new g.LatLng(a,b,c)},g.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},g.LatLngBounds.prototype={extend:function(a){var b,c,d=this._southWest,e=this._northEast;if(a instanceof g.LatLng)b=a,c=a;else{if(!(a instanceof g.LatLngBounds))return a?this.extend(g.latLng(a)||g.latLngBounds(a)):this;if(b=a._southWest,c=a._northEast,!b||!c)return this}return d||e?(d.lat=Math.min(b.lat,d.lat),d.lng=Math.min(b.lng,d.lng),e.lat=Math.max(c.lat,e.lat),e.lng=Math.max(c.lng,e.lng)):(this._southWest=new g.LatLng(b.lat,b.lng),this._northEast=new g.LatLng(c.lat,c.lng)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,e=Math.abs(b.lng-c.lng)*a;return new g.LatLngBounds(new g.LatLng(b.lat-d,b.lng-e),new g.LatLng(c.lat+d,c.lng+e))},getCenter:function(){return new g.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new g.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new g.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof g.LatLng?g.latLng(a):g.latLngBounds(a);var b,c,d=this._southWest,e=this._northEast;return a instanceof g.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=e.lat&&b.lng>=d.lng&&c.lng<=e.lng},intersects:function(a){a=g.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),f=e.lat>=b.lat&&d.lat<=c.lat,h=e.lng>=b.lng&&d.lng<=c.lng;return f&&h},overlaps:function(a){a=g.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),f=e.lat>b.lat&&d.lat<c.lat,h=e.lng>b.lng&&d.lng<c.lng;return f&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return!!a&&(a=g.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},g.latLngBounds=function(a,b){return a instanceof g.LatLngBounds?a:new g.LatLngBounds(a,b)},g.Projection={},g.Projection.LonLat={project:function(a){return new g.Point(a.lng,a.lat)},unproject:function(a){return new g.LatLng(a.y,a.x)},bounds:g.bounds([-180,-90],[180,90])},g.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var b=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=Math.sin(d*b);return new g.Point(this.R*a.lng*b,this.R*Math.log((1+e)/(1-e))/2)},unproject:function(a){var b=180/Math.PI;return new g.LatLng((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*b,a.x*b/this.R)},bounds:function(){var a=6378137*Math.PI;return g.bounds([-a,-a],[a,a])}()},g.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var b=this.projection.bounds,c=this.scale(a),d=this.transformation.transform(b.min,c),e=this.transformation.transform(b.max,c);return g.bounds(d,e)},infinite:!1,wrapLatLng:function(a){var b=this.wrapLng?g.Util.wrapNum(a.lng,this.wrapLng,!0):a.lng,c=this.wrapLat?g.Util.wrapNum(a.lat,this.wrapLat,!0):a.lat,d=a.alt;return g.latLng(c,b,d)}},g.CRS.Simple=g.extend({},g.CRS,{projection:g.Projection.LonLat,transformation:new g.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,b){var c=b.lng-a.lng,d=b.lat-a.lat;return Math.sqrt(c*c+d*d)},infinite:!0}),g.CRS.Earth=g.extend({},g.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(a,b){var c=Math.PI/180,d=a.lat*c,e=b.lat*c,f=Math.sin(d)*Math.sin(e)+Math.cos(d)*Math.cos(e)*Math.cos((b.lng-a.lng)*c);return this.R*Math.acos(Math.min(f,1))}}),g.CRS.EPSG3857=g.extend({},g.CRS.Earth,{code:"EPSG:3857",projection:g.Projection.SphericalMercator,transformation:function(){var a=.5/(Math.PI*g.Projection.SphericalMercator.R);return new g.Transformation(a,.5,-a,.5)}()}),g.CRS.EPSG900913=g.extend({},g.CRS.EPSG3857,{code:"EPSG:900913"}),g.CRS.EPSG4326=g.extend({},g.CRS.Earth,{code:"EPSG:4326",projection:g.Projection.LonLat,transformation:new g.Transformation(1/180,1,-1/180,.5)}),g.Map=g.Evented.extend({options:{crs:g.CRS.EPSG3857,center:e,zoom:e,minZoom:e,maxZoom:e,layers:[],maxBounds:e,renderer:e,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,b){b=g.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=g.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==e&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==e&&this.setView(g.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(a,b){return b=b===e?this.getZoom():b,this._resetView(g.latLng(a),b),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=a,this)},zoomIn:function(a,b){return a=a||(g.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,b)},zoomOut:function(a,b){return a=a||(g.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),e=this.getSize().divideBy(2),f=a instanceof g.Point?a:this.latLngToContainerPoint(a),h=f.subtract(e).multiplyBy(1-1/d),i=this.containerPointToLatLng(e.add(h));return this.setView(i,b,{zoom:c})},_getBoundsCenterZoom:function(a,b){b=b||{},a=a.getBounds?a.getBounds():g.latLngBounds(a);var c=g.point(b.paddingTopLeft||b.padding||[0,0]),d=g.point(b.paddingBottomRight||b.padding||[0,0]),e=this.getBoundsZoom(a,!1,c.add(d));e="number"==typeof b.maxZoom?Math.min(b.maxZoom,e):e;var f=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),e),i=this.project(a.getNorthEast(),e),j=this.unproject(h.add(i).divideBy(2).add(f),e);return{center:j,zoom:e}},fitBounds:function(a,b){if(a=g.latLngBounds(a),!a.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(a,b);return this.setView(c.center,c.zoom,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(g.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=g.latLngBounds(a),a.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){return this.options.minZoom=a,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(a):this},setMaxZoom:function(a){return this.options.maxZoom=a,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(a):this},panInsideBounds:function(a,b){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,g.latLngBounds(a));return c.equals(d)||this.panTo(d,b),this._enforcingBounds=!1,this},invalidateSize:function(a){if(!this._loaded)return this;a=g.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),e=c.divideBy(2).round(),f=d.subtract(e);return f.x||f.y?(a.animate&&a.pan?this.panBy(f):(a.pan&&this._rawPanBy(f),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(g.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(a){this._container._leaflet_id=e,this._containerId=e}g.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var a in this._layers)this._layers[a].remove();return this},createPane:function(a,b){var c="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),d=g.DomUtil.create("div",c,b||this._mapPane);return a&&(this._panes[a]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new g.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===e?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===e?this._layersMaxZoom===e?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=g.latLngBounds(a),c=g.point(c||[0,0]);var d=this.getZoom()||0,e=this.getMinZoom(),f=this.getMaxZoom(),h=a.getNorthWest(),i=a.getSouthEast(),j=this.getSize().subtract(c),k=this.project(i,d).subtract(this.project(h,d)),l=g.Browser.any3d?this.options.zoomSnap:1,m=Math.min(j.x/k.x,j.y/k.y);return d=this.getScaleZoom(m,d),l&&(d=Math.round(d/(l/100))*(l/100),d=b?Math.ceil(d/l)*l:Math.floor(d/l)*l),Math.max(e,Math.min(f,d))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new g.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,b){var c=this._getTopLeftPoint(a,b);return new g.Bounds(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===e?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,b){var c=this.options.crs;return b=b===e?this._zoom:b,c.scale(a)/c.scale(b)},getScaleZoom:function(a,b){var c=this.options.crs;b=b===e?this._zoom:b;var d=c.zoom(a*c.scale(b));return isNaN(d)?1/0:d},project:function(a,b){return b=b===e?this._zoom:b,this.options.crs.latLngToPoint(g.latLng(a),b)},unproject:function(a,b){return b=b===e?this._zoom:b,this.options.crs.pointToLatLng(g.point(a),b)},layerPointToLatLng:function(a){var b=g.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(g.latLng(a))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(g.latLng(a))},distance:function(a,b){return this.options.crs.distance(g.latLng(a),g.latLng(b))},containerPointToLayerPoint:function(a){return g.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return g.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(g.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(g.latLng(a)))},mouseEventToContainerPoint:function(a){return g.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=g.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet_id)throw new Error("Map container is already initialized.");g.DomEvent.addListener(b,"scroll",this._onScroll,this),this._containerId=g.Util.stamp(b)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&g.Browser.any3d,g.DomUtil.addClass(a,"leaflet-container"+(g.Browser.touch?" leaflet-touch":"")+(g.Browser.retina?" leaflet-retina":"")+(g.Browser.ielt9?" leaflet-oldie":"")+(g.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=g.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),g.DomUtil.setPosition(this._mapPane,new g.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(g.DomUtil.addClass(a.markerPane,"leaflet-zoom-hide"),g.DomUtil.addClass(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,b){g.DomUtil.setPosition(this._mapPane,new g.Point(0,0));var c=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var d=this._zoom!==b;this._moveStart(d)._move(a,b)._moveEnd(d),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(a){return a&&this.fire("zoomstart"),this.fire("movestart")},_move:function(a,b,c){b===e&&(b=this._zoom);var d=this._zoom!==b;return this._zoom=b,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),(d||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return g.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){g.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(g.DomEvent){this._targets={},this._targets[g.stamp(this._container)]=this;var c=b?"off":"on";g.DomEvent[c](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&g.DomEvent[c](a,"resize",this._onResize,this),g.Browser.any3d&&this.options.transform3DLimit&&this[c]("moveend",this._onMoveEnd)}},_onResize:function(){g.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=g.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,b){for(var c,d=[],e="mouseout"===b||"mouseover"===b,f=a.target||a.srcElement,h=!1;f;){if(c=this._targets[g.stamp(f)],c&&("click"===b||"preclick"===b)&&!a._simulated&&this._draggableMoved(c)){h=!0;break}if(c&&c.listens(b,!0)){if(e&&!g.DomEvent._isExternalTarget(f,a))break;if(d.push(c),e)break}if(f===this._container)break;f=f.parentNode}return d.length||h||e||!g.DomEvent._isExternalTarget(f,a)||(d=[this]),d},_handleDOMEvent:function(a){if(this._loaded&&!g.DomEvent._skipped(a)){var b="keypress"===a.type&&13===a.keyCode?"click":a.type;"mousedown"===b&&g.DomUtil.preventOutline(a.target||a.srcElement),this._fireDOMEvent(a,b)}},_fireDOMEvent:function(a,b,c){if("click"===a.type){var d=g.Util.extend({},a);d.type="preclick",this._fireDOMEvent(d,d.type,c)}if(!a._stopped&&(c=(c||[]).concat(this._findEventTargets(a,b)),c.length)){var e=c[0];"contextmenu"===b&&e.listens(b,!0)&&g.DomEvent.preventDefault(a);var f={originalEvent:a};if("keypress"!==a.type){var h=e instanceof g.Marker;f.containerPoint=h?this.latLngToContainerPoint(e.getLatLng()):this.mouseEventToContainerPoint(a),f.layerPoint=this.containerPointToLayerPoint(f.containerPoint),f.latlng=h?e.getLatLng():this.layerPointToLatLng(f.layerPoint)}for(var i=0;i<c.length;i++)if(c[i].fire(b,f,!0),f.originalEvent._stopped||c[i].options.nonBubblingEvents&&g.Util.indexOf(c[i].options.nonBubblingEvents,b)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,b=this._handlers.length;a<b;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,{target:this}):this.on("load",a,b),this},_getMapPanePos:function(){return g.DomUtil.getPosition(this._mapPane)||new g.Point(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,b){var c=a&&b!==e?this._getNewPixelOrigin(a,b):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewPixelOrigin(c,b);return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),e=this.getSize().divideBy(2),f=new g.Bounds(d.subtract(e),d.add(e)),h=this._getBoundsOffset(f,c,b);return h.round().equals([0,0])?a:this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new g.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=g.bounds(this.project(b.getNorthEast(),c),this.project(b.getSouthWest(),c)),e=d.min.subtract(a.min),f=d.max.subtract(a.max),h=this._rebound(e.x,-f.x),i=this._rebound(e.y,-f.y);return new g.Point(h,i)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom(),d=g.Browser.any3d?this.options.zoomSnap:1;return d&&(a=Math.round(a/d)*d),Math.max(b,Math.min(c,a))}}),g.map=function(a,b){return new g.Map(a,b)},g.Layer=g.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[g.stamp(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[g.stamp(a)],this},_layerAdd:function(a){var b=a.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var c=this.getEvents();b.on(c,this),this.once("remove",function(){b.off(c,this)},this)}this.onAdd(b),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),b.fire("layeradd",{layer:this})}}}),g.Map.include({addLayer:function(a){var b=g.stamp(a);return this._layers[b]?this:(this._layers[b]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var b=g.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return!!a&&g.stamp(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},_addLayers:function(a){a=a?g.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;b<c;b++)this.addLayer(a[b])},_addZoomLimit:function(a){!isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[g.stamp(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var b=g.stamp(a);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,b=-(1/0),c=this._getZoomSpan();for(var d in this._zoomBoundLayers){var f=this._zoomBoundLayers[d].options;a=f.minZoom===e?a:Math.min(a,f.minZoom),b=f.maxZoom===e?b:Math.max(b,f.maxZoom)}this._layersMaxZoom=b===-(1/0)?e:b,this._layersMinZoom=a===1/0?e:a,c!==this._getZoomSpan()&&this.fire("zoomlevelschange");
}}),g.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:g.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var b=Math.PI/180,c=this.R,d=a.lat*b,e=this.R_MINOR/c,f=Math.sqrt(1-e*e),h=f*Math.sin(d),i=Math.tan(Math.PI/4-d/2)/Math.pow((1-h)/(1+h),f/2);return d=-c*Math.log(Math.max(i,1e-10)),new g.Point(a.lng*b*c,d)},unproject:function(a){for(var b,c=180/Math.PI,d=this.R,e=this.R_MINOR/d,f=Math.sqrt(1-e*e),h=Math.exp(-a.y/d),i=Math.PI/2-2*Math.atan(h),j=0,k=.1;j<15&&Math.abs(k)>1e-7;j++)b=f*Math.sin(i),b=Math.pow((1-b)/(1+b),f/2),k=Math.PI/2-2*Math.atan(h*b)-i,i+=k;return new g.LatLng(i*c,a.x*c/d)}},g.CRS.EPSG3395=g.extend({},g.CRS.Earth,{code:"EPSG:3395",projection:g.Projection.Mercator,transformation:function(){var a=.5/(Math.PI*g.Projection.Mercator.R);return new g.Transformation(a,.5,-a,.5)}()}),g.GridLayer=g.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:g.Browser.mobile,updateWhenZooming:!0,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:e,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){g.setOptions(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),g.DomUtil.remove(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(g.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(g.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return b.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof g.Point?a:new g.Point(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==e&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var b,c=this.getPane().children,d=-a(-(1/0),1/0),e=0,f=c.length;e<f;e++)b=c[e].style.zIndex,c[e]!==this._container&&b&&(d=a(d,+b));isFinite(d)&&(this.options.zIndex=d+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!g.Browser.ielt9){g.DomUtil.setOpacity(this._container,this.options.opacity);var a=+new Date,b=!1,c=!1;for(var d in this._tiles){var e=this._tiles[d];if(e.current&&e.loaded){var f=Math.min(1,(a-e.loaded)/200);g.DomUtil.setOpacity(e.el,f),f<1?b=!0:(e.active&&(c=!0),e.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),b&&(g.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=g.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=g.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,b=this.options.maxZoom;if(a===e)return e;for(var c in this._levels)this._levels[c].el.children.length||c===a?this._levels[c].el.style.zIndex=b-Math.abs(a-c):(g.DomUtil.remove(this._levels[c].el),this._removeTilesAtZoom(c),delete this._levels[c]);var d=this._levels[a],f=this._map;return d||(d=this._levels[a]={},d.el=g.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=b,d.origin=f.project(f.unproject(f.getPixelOrigin()),a).round(),d.zoom=a,this._setZoomTransform(d,f.getCenter(),f.getZoom()),g.Util.falseFn(d.el.offsetWidth)),this._level=d,d},_pruneTiles:function(){if(this._map){var a,b,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom)return void this._removeAllTiles();for(a in this._tiles)b=this._tiles[a],b.retain=b.current;for(a in this._tiles)if(b=this._tiles[a],b.current&&!b.active){var d=b.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var b in this._tiles)this._tiles[b].coords.z===a&&this._removeTile(b)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)g.DomUtil.remove(this._levels[a].el),delete this._levels[a];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(a,b,c,d){var e=Math.floor(a/2),f=Math.floor(b/2),h=c-1,i=new g.Point(+e,+f);i.z=+h;var j=this._tileCoordsToKey(i),k=this._tiles[j];return k&&k.active?(k.retain=!0,!0):(k&&k.loaded&&(k.retain=!0),h>d&&this._retainParent(e,f,h,d))},_retainChildren:function(a,b,c,d){for(var e=2*a;e<2*a+2;e++)for(var f=2*b;f<2*b+2;f++){var h=new g.Point(e,f);h.z=c+1;var i=this._tileCoordsToKey(h),j=this._tiles[i];j&&j.active?j.retain=!0:(j&&j.loaded&&(j.retain=!0),c+1<d&&this._retainChildren(e,f,c+1,d))}},_resetView:function(a){var b=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_setView:function(a,b,c,d){var f=Math.round(b);(this.options.maxZoom!==e&&f>this.options.maxZoom||this.options.minZoom!==e&&f<this.options.minZoom)&&(f=e);var g=this.options.updateWhenZooming&&f!==this._tileZoom;d&&!g||(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==e&&this._update(a),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(a,b)},_setZoomTransforms:function(a,b){for(var c in this._levels)this._setZoomTransform(this._levels[c],a,b)},_setZoomTransform:function(a,b,c){var d=this._map.getZoomScale(c,a.zoom),e=a.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(b,c)).round();g.Browser.any3d?g.DomUtil.setTransform(a.el,e,d):g.DomUtil.setPosition(a.el,e)},_resetGrid:function(){var a=this._map,b=a.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,e=this._map.getPixelWorldBounds(this._tileZoom);e&&(this._globalTileRange=this._pxBoundsToTileRange(e)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,b.wrapLng[0]],d).x/c.x),Math.ceil(a.project([0,b.wrapLng[1]],d).x/c.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([b.wrapLat[0],0],d).y/c.x),Math.ceil(a.project([b.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(a){var b=this._map,c=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),d=b.getZoomScale(c,this._tileZoom),e=b.project(a,this._tileZoom).floor(),f=b.getSize().divideBy(2*d);return new g.Bounds(e.subtract(f),e.add(f))},_update:function(a){var c=this._map;if(c){var d=c.getZoom();if(a===e&&(a=c.getCenter()),this._tileZoom!==e){var f=this._getTiledPixelBounds(a),h=this._pxBoundsToTileRange(f),i=h.getCenter(),j=[],k=this.options.keepBuffer,l=new g.Bounds(h.getBottomLeft().subtract([k,-k]),h.getTopRight().add([k,-k]));for(var m in this._tiles){var n=this._tiles[m].coords;n.z===this._tileZoom&&l.contains(g.point(n.x,n.y))||(this._tiles[m].current=!1)}if(Math.abs(d-this._tileZoom)>1)return void this._setView(a,d);for(var o=h.min.y;o<=h.max.y;o++)for(var p=h.min.x;p<=h.max.x;p++){var q=new g.Point(p,o);if(q.z=this._tileZoom,this._isValidTile(q)){var r=this._tiles[this._tileCoordsToKey(q)];r?r.current=!0:j.push(q)}}if(j.sort(function(a,b){return a.distanceTo(i)-b.distanceTo(i)}),0!==j.length){this._loading||(this._loading=!0,this.fire("loading"));var s=b.createDocumentFragment();for(p=0;p<j.length;p++)this._addTile(j[p],s);this._level.el.appendChild(s)}}}},_isValidTile:function(a){var b=this._map.options.crs;if(!b.infinite){var c=this._globalTileRange;if(!b.wrapLng&&(a.x<c.min.x||a.x>c.max.x)||!b.wrapLat&&(a.y<c.min.y||a.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(a);return g.latLngBounds(this.options.bounds).overlaps(d)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToBounds:function(a){var b=this._map,c=this.getTileSize(),d=a.scaleBy(c),e=d.add(c),f=b.unproject(d,a.z),h=b.unproject(e,a.z);return this.options.noWrap||(f=b.wrapLatLng(f),h=b.wrapLatLng(h)),new g.LatLngBounds(f,h)},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var b=a.split(":"),c=new g.Point(+b[0],+b[1]);return c.z=+b[2],c},_removeTile:function(a){var b=this._tiles[a];b&&(g.DomUtil.remove(b.el),delete this._tiles[a],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){g.DomUtil.addClass(a,"leaflet-tile");var b=this.getTileSize();a.style.width=b.x+"px",a.style.height=b.y+"px",a.onselectstart=g.Util.falseFn,a.onmousemove=g.Util.falseFn,g.Browser.ielt9&&this.options.opacity<1&&g.DomUtil.setOpacity(a,this.options.opacity),g.Browser.android&&!g.Browser.android23&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,b){var c=this._getTilePos(a),d=this._tileCoordsToKey(a),e=this.createTile(this._wrapCoords(a),g.bind(this._tileReady,this,a));this._initTile(e),this.createTile.length<2&&g.Util.requestAnimFrame(g.bind(this._tileReady,this,a,null,e)),g.DomUtil.setPosition(e,c),this._tiles[d]={el:e,coords:a,current:!0},b.appendChild(e),this.fire("tileloadstart",{tile:e,coords:a})},_tileReady:function(a,b,c){if(this._map){b&&this.fire("tileerror",{error:b,tile:c,coords:a});var d=this._tileCoordsToKey(a);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(g.DomUtil.setOpacity(c.el,0),g.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=g.Util.requestAnimFrame(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),b||(g.DomUtil.addClass(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),g.Browser.ielt9||!this._map._fadeAnimated?g.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(g.bind(this._pruneTiles,this),250)))}},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var b=new g.Point(this._wrapX?g.Util.wrapNum(a.x,this._wrapX):a.x,this._wrapY?g.Util.wrapNum(a.y,this._wrapY):a.y);return b.z=a.z,b},_pxBoundsToTileRange:function(a){var b=this.getTileSize();return new g.Bounds(a.min.unscaleBy(b).floor(),a.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}}),g.gridLayer=function(a){return new g.GridLayer(a)},g.TileLayer=g.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,b){this._url=a,b=g.setOptions(this,b),b.detectRetina&&g.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom++):(b.zoomOffset++,b.maxZoom--),b.minZoom=Math.max(0,b.minZoom)),"string"==typeof b.subdomains&&(b.subdomains=b.subdomains.split("")),g.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},createTile:function(a,c){var d=b.createElement("img");return g.DomEvent.on(d,"load",g.bind(this._tileOnLoad,this,c,d)),g.DomEvent.on(d,"error",g.bind(this._tileOnError,this,c,d)),this.options.crossOrigin&&(d.crossOrigin=""),d.alt="",d.src=this.getTileUrl(a),d},getTileUrl:function(a){var b={r:g.Browser.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-a.y;this.options.tms&&(b.y=c),b["-y"]=c}return g.Util.template(this._url,g.extend(b,this.options))},_tileOnLoad:function(a,b){g.Browser.ielt9?setTimeout(g.bind(a,this,null,b),0):a(null,b)},_tileOnError:function(a,b,c){var d=this.options.errorTileUrl;d&&(b.src=d),a(c,b)},getTileSize:function(){var a=this._map,b=g.GridLayer.prototype.getTileSize.call(this),c=this._tileZoom+this.options.zoomOffset,d=this.options.maxNativeZoom;return null!==d&&c>d?b.divideBy(a.getZoomScale(d,c)).round():b},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this.options,b=this._tileZoom;return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,null!==a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var a,b;for(a in this._tiles)this._tiles[a].coords.z!==this._tileZoom&&(b=this._tiles[a].el,b.onload=g.Util.falseFn,b.onerror=g.Util.falseFn,b.complete||(b.src=g.Util.emptyImageUrl,g.DomUtil.remove(b)))}}),g.tileLayer=function(a,b){return new g.TileLayer(a,b)},g.TileLayer.WMS=g.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,b){this._url=a;var c=g.extend({},this.defaultWmsParams);for(var d in b)d in this.options||(c[d]=b[d]);b=g.setOptions(this,b),c.width=c.height=b.tileSize*(b.detectRetina&&g.Browser.retina?2:1),this.wmsParams=c},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,g.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._tileCoordsToBounds(a),c=this._crs.project(b.getNorthWest()),d=this._crs.project(b.getSouthEast()),e=(this._wmsVersion>=1.3&&this._crs===g.CRS.EPSG4326?[d.y,c.x,c.y,d.x]:[c.x,d.y,d.x,c.y]).join(","),f=g.TileLayer.prototype.getTileUrl.call(this,a);return f+g.Util.getParamString(this.wmsParams,f,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+e},setParams:function(a,b){return g.extend(this.wmsParams,a),b||this.redraw(),this}}),g.tileLayer.wms=function(a,b){return new g.TileLayer.WMS(a,b)},g.ImageOverlay=g.Layer.extend({options:{opacity:1,alt:"",interactive:!1,attribution:null,crossOrigin:!1},initialize:function(a,b,c){this._url=a,this._bounds=g.latLngBounds(b),g.setOptions(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(g.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){g.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&g.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&g.DomUtil.toBack(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=a,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._image=g.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));a.onselectstart=g.Util.falseFn,a.onmousemove=g.Util.falseFn,a.onload=g.bind(this.fire,this,"load"),this.options.crossOrigin&&(a.crossOrigin=""),a.src=this._url,a.alt=this.options.alt},_animateZoom:function(a){var b=this._map.getZoomScale(a.zoom),c=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),a.zoom,a.center);g.DomUtil.setTransform(this._image,c,b)},_reset:function(){var a=this._image,b=new g.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=b.getSize();g.DomUtil.setPosition(a,b.min),a.style.width=c.x+"px",a.style.height=c.y+"px"},_updateOpacity:function(){g.DomUtil.setOpacity(this._image,this.options.opacity)}}),g.imageOverlay=function(a,b,c){return new g.ImageOverlay(a,b,c)},g.Icon=g.Class.extend({initialize:function(a){g.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,b&&"IMG"===b.tagName?b:null);return this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c=this.options,d=c[b+"Size"];"number"==typeof d&&(d=[d,d]);var e=g.point(d),f=g.point("shadow"===b&&c.shadowAnchor||c.iconAnchor||e&&e.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+(c.className||""),f&&(a.style.marginLeft=-f.x+"px",a.style.marginTop=-f.y+"px"),e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,c){return c=c||b.createElement("img"),c.src=a,c},_getIconUrl:function(a){return g.Browser.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}}),g.icon=function(a){return new g.Icon(a)},g.Icon.Default=g.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return g.Icon.Default.imagePath||(g.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||g.Icon.Default.imagePath)+g.Icon.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var a=g.DomUtil.create("div","leaflet-default-icon-path",b.body),c=g.DomUtil.getStyle(a,"background-image")||g.DomUtil.getStyle(a,"backgroundImage");return b.body.removeChild(a),0===c.indexOf("url")?c.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),g.Marker=g.Layer.extend({options:{icon:new g.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(a,b){g.setOptions(this,b),this._latlng=g.latLng(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var b=this._latlng;return this._latlng=g.latLng(a),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=a.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,a.title&&(c.title=a.title),a.alt&&(c.alt=a.alt)),g.DomUtil.addClass(c,b),a.keyboard&&(c.tabIndex="0"),this._icon=c,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var e=a.icon.createShadow(this._shadow),f=!1;e!==this._shadow&&(this._removeShadow(),f=!0),e&&g.DomUtil.addClass(e,b),this._shadow=e,a.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),e&&f&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),g.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&g.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(a){g.DomUtil.setPosition(this._icon,a),this._shadow&&g.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(g.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),g.Handler.MarkerDrag)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new g.Handler.MarkerDrag(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;g.DomUtil.setOpacity(this._icon,a),this._shadow&&g.DomUtil.setOpacity(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),g.marker=function(a,b){return new g.Marker(a,b)},g.DivIcon=g.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&"DIV"===a.tagName?a:b.createElement("div"),d=this.options;if(c.innerHTML=d.html!==!1?d.html:"",d.bgPos){var e=g.point(d.bgPos);c.style.backgroundPosition=-e.x+"px "+-e.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}}),g.divIcon=function(a){return new g.DivIcon(a)},g.DivOverlay=g.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(a,b){g.setOptions(this,a),this._source=b},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&g.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&g.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(a){a._fadeAnimated?(g.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(g.bind(g.DomUtil.remove,g.DomUtil,this._container),200)):g.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=g.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&g.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&g.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var a=this._contentNode,b="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof b)a.innerHTML=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=g.point(this.options.offset),c=this._getAnchor();this._zoomAnimated?g.DomUtil.setPosition(this._container,a.add(c)):b=b.add(a).add(c);var d=this._containerBottom=-b.y,e=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=d+"px",this._container.style.left=e+"px"}},_getAnchor:function(){return[0,0]}}),g.Popup=g.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(a){return a.openPopup(this),this},onAdd:function(a){g.DivOverlay.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof g.Path||this._source.on("preclick",g.DomEvent.stopPropagation))},onRemove:function(a){g.DivOverlay.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof g.Path||this._source.off("preclick",g.DomEvent.stopPropagation))},getEvents:function(){var a=g.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a="leaflet-popup",b=this._container=g.DomUtil.create("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var c=this._closeButton=g.DomUtil.create("a",a+"-close-button",b);c.href="#close",c.innerHTML="&#215;",g.DomEvent.on(c,"click",this._onCloseButtonClick,this)}var d=this._wrapper=g.DomUtil.create("div",a+"-content-wrapper",b);this._contentNode=g.DomUtil.create("div",a+"-content",d),g.DomEvent.disableClickPropagation(d).disableScrollPropagation(this._contentNode).on(d,"contextmenu",g.DomEvent.stopPropagation),this._tipContainer=g.DomUtil.create("div",a+"-tip-container",b),this._tip=g.DomUtil.create("div",a+"-tip",this._tipContainer)},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,e=this.options.maxHeight,f="leaflet-popup-scrolled";e&&d>e?(b.height=e+"px",g.DomUtil.addClass(a,f)):g.DomUtil.removeClass(a,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),c=this._getAnchor();g.DomUtil.setPosition(this._container,b.add(c))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var a=this._map,b=parseInt(g.DomUtil.getStyle(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+b,d=this._containerWidth,e=new g.Point(this._containerLeft,-c-this._containerBottom);e._add(g.DomUtil.getPosition(this._container));var f=a.layerPointToContainerPoint(e),h=g.point(this.options.autoPanPadding),i=g.point(this.options.autoPanPaddingTopLeft||h),j=g.point(this.options.autoPanPaddingBottomRight||h),k=a.getSize(),l=0,m=0;f.x+d+j.x>k.x&&(l=f.x+d-k.x+j.x),f.x-l-i.x<0&&(l=f.x-i.x),f.y+c+j.y>k.y&&(m=f.y+c-k.y+j.y),f.y-m-i.y<0&&(m=f.y-i.y),(l||m)&&a.fire("autopanstart").panBy([l,m])}},_onCloseButtonClick:function(a){this._close(),g.DomEvent.stop(a)},_getAnchor:function(){return g.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),g.popup=function(a,b){return new g.Popup(a,b)},g.Map.mergeOptions({closePopupOnClick:!0}),g.Map.include({openPopup:function(a,b,c){return a instanceof g.Popup||(a=new g.Popup(c).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=a,this.addLayer(a))},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),g.Layer.include({bindPopup:function(a,b){return a instanceof g.Popup?(g.setOptions(a,b),this._popup=a,a._source=this):(this._popup&&!b||(this._popup=new g.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a,b){if(a instanceof g.Layer||(b=a,a=this),a instanceof g.FeatureGroup)for(var c in this._layers){a=this._layers[c];break}return b||(b=a.getCenter?a.getCenter():a.getLatLng()),this._popup&&this._map&&(this._popup._source=a,this._popup.update(),this._map.openPopup(this._popup,b)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var b=a.layer||a.target;if(this._popup&&this._map)return g.DomEvent.stop(a),b instanceof g.Path?void this.openPopup(a.layer||a.target,a.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===b?this.closePopup():this.openPopup(b,a.latlng))},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),g.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),g.Tooltip=g.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(a){g.DivOverlay.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(a){g.DivOverlay.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var a=g.DivOverlay.prototype.getEvents.call(this);return g.Browser.touch&&!this.options.permanent&&(a.preclick=this._close),a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var a="leaflet-tooltip",b=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=g.DomUtil.create("div",b)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var b=this._map,c=this._container,d=b.latLngToContainerPoint(b.getCenter()),e=b.layerPointToContainerPoint(a),f=this.options.direction,h=c.offsetWidth,i=c.offsetHeight,j=g.point(this.options.offset),k=this._getAnchor();"top"===f?a=a.add(g.point(-h/2+j.x,-i+j.y+k.y)):"bottom"===f?a=a.subtract(g.point(h/2-j.x,-j.y)):"center"===f?a=a.subtract(g.point(h/2+j.x,i/2-k.y+j.y)):"right"===f||"auto"===f&&e.x<d.x?(f="right",a=a.add([j.x+k.x,k.y-i/2+j.y])):(f="left",a=a.subtract(g.point(h+k.x-j.x,i/2-k.y-j.y))),g.DomUtil.removeClass(c,"leaflet-tooltip-right"),g.DomUtil.removeClass(c,"leaflet-tooltip-left"),g.DomUtil.removeClass(c,"leaflet-tooltip-top"),g.DomUtil.removeClass(c,"leaflet-tooltip-bottom"),g.DomUtil.addClass(c,"leaflet-tooltip-"+f),g.DomUtil.setPosition(c,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&g.DomUtil.setOpacity(this._container,a)},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);
this._setPosition(b)},_getAnchor:function(){return g.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),g.tooltip=function(a,b){return new g.Tooltip(a,b)},g.Map.include({openTooltip:function(a,b,c){return a instanceof g.Tooltip||(a=new g.Tooltip(c).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:this.addLayer(a)},closeTooltip:function(a){return a&&this.removeLayer(a),this}}),g.Layer.include({bindTooltip:function(a,b){return a instanceof g.Tooltip?(g.setOptions(a,b),this._tooltip=a,a._source=this):(this._tooltip&&!b||(this._tooltip=g.tooltip(b,this)),this._tooltip.setContent(a)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var b=a?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),g.Browser.touch&&(c.click=this._openTooltip)),this[b](c),this._tooltipHandlersAdded=!a}},openTooltip:function(a,b){if(a instanceof g.Layer||(b=a,a=this),a instanceof g.FeatureGroup)for(var c in this._layers){a=this._layers[c];break}return b||(b=a.getCenter?a.getCenter():a.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=a,this._tooltip.update(),this._map.openTooltip(this._tooltip,b),this._tooltip.options.interactive&&this._tooltip._container&&(g.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(g.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(a){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(a)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){var b=a.layer||a.target;this._tooltip&&this._map&&this.openTooltip(b,this._tooltip.options.sticky?a.latlng:e)},_moveTooltip:function(a){var b,c,d=a.latlng;this._tooltip.options.sticky&&a.originalEvent&&(b=this._map.mouseEventToContainerPoint(a.originalEvent),c=this._map.containerPointToLayerPoint(b),d=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(d)}}),g.Marker.include({_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),g.LayerGroup=g.Layer.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;b<c;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){for(var a in this._layers)this.removeLayer(this._layers[a]);return this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){for(var b in this._layers)a.addLayer(this._layers[b])},onRemove:function(a){for(var b in this._layers)a.removeLayer(this._layers[b])},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return g.stamp(a)}}),g.layerGroup=function(a){return new g.LayerGroup(a)},g.FeatureGroup=g.LayerGroup.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),g.LayerGroup.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),g.LayerGroup.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new g.LatLngBounds;for(var b in this._layers){var c=this._layers[b];a.extend(c.getBounds?c.getBounds():c.getLatLng())}return a}}),g.featureGroup=function(a){return new g.FeatureGroup(a)},g.Renderer=g.Layer.extend({options:{padding:.1},initialize:function(a){g.setOptions(this,a),g.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&g.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){g.DomUtil.remove(this._container)},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,b){var c=this._map.getZoomScale(b,this._zoom),d=g.DomUtil.getPosition(this._container),e=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,b),h=this._map.project(a,b),i=h.subtract(f),j=e.multiplyBy(-c).add(d).add(e).subtract(i);g.Browser.any3d?g.DomUtil.setTransform(this._container,j,c):g.DomUtil.setPosition(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var a=this.options.padding,b=this._map.getSize(),c=this._map.containerPointToLayerPoint(b.multiplyBy(-a)).round();this._bounds=new g.Bounds(c,c.add(b.multiplyBy(1+2*a)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),g.Map.include({getRenderer:function(a){var b=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this.options.preferCanvas&&g.canvas()||g.svg()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(a){if("overlayPane"===a||a===e)return!1;var b=this._paneRenderers[a];return b===e&&(b=g.SVG&&g.svg({pane:a})||g.Canvas&&g.canvas({pane:a}),this._paneRenderers[a]=b),b}}),g.Path=g.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this),this._renderer.on("update",this._update,this)},onRemove:function(){this._renderer._removePath(this),this._renderer.off("update",this._update,this)},getEvents:function(){return{zoomend:this._project,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return g.setOptions(this,a),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(g.Browser.touch?10:0)}}),g.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var c=a.length,d=typeof Uint8Array!=e+""?Uint8Array:Array,f=new d(c);f[0]=f[c-1]=1,this._simplifyDPStep(a,f,b,0,c-1);var g,h=[];for(g=0;g<c;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;g<=e-1;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;d<f;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return e<f-1&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d,e){var f,g,h,i=d?this._lastCode:this._getBitCode(a,c),j=this._getBitCode(b,c);for(this._lastCode=j;;){if(!(i|j))return[a,b];if(i&j)return!1;f=i||j,g=this._getEdgeIntersection(a,b,f,c,e),h=this._getBitCode(g,c),f===i?(a=g,i=h):(b=g,j=h)}},_getEdgeIntersection:function(a,b,c,d,e){var f,h,i=b.x-a.x,j=b.y-a.y,k=d.min,l=d.max;return 8&c?(f=a.x+i*(l.y-a.y)/j,h=l.y):4&c?(f=a.x+i*(k.y-a.y)/j,h=k.y):2&c?(f=l.x,h=a.y+j*(l.x-a.x)/i):1&c&&(f=k.x,h=a.y+j*(k.x-a.x)/i),new g.Point(f,h,e)},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var e,f=b.x,h=b.y,i=c.x-f,j=c.y-h,k=i*i+j*j;return k>0&&(e=((a.x-f)*i+(a.y-h)*j)/k,e>1?(f=c.x,h=c.y):e>0&&(f+=i*e,h+=j*e)),i=a.x-f,j=a.y-h,d?i*i+j*j:new g.Point(f,h)}},g.Polyline=g.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,b){g.setOptions(this,b),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var b,c,d=1/0,e=null,f=g.LineUtil._sqClosestPointOnSegment,h=0,i=this._parts.length;h<i;h++)for(var j=this._parts[h],k=1,l=j.length;k<l;k++){b=j[k-1],c=j[k];var m=f(a,b,c,!0);m<d&&(d=m,e=f(a,b,c))}return e&&(e.distance=Math.sqrt(d)),e},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,b,c,d,e,f,g,h=this._rings[0],i=h.length;if(!i)return null;for(a=0,b=0;a<i-1;a++)b+=h[a].distanceTo(h[a+1])/2;if(0===b)return this._map.layerPointToLatLng(h[0]);for(a=0,d=0;a<i-1;a++)if(e=h[a],f=h[a+1],c=e.distanceTo(f),d+=c,d>b)return g=(d-b)/c,this._map.layerPointToLatLng([f.x-g*(f.x-e.x),f.y-g*(f.y-e.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,b){return b=b||this._defaultShape(),a=g.latLng(a),b.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new g.LatLngBounds,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return g.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var b=[],c=g.Polyline._flat(a),d=0,e=a.length;d<e;d++)c?(b[d]=g.latLng(a[d]),this._bounds.extend(b[d])):b[d]=this._convertLatLngs(a[d]);return b},_project:function(){var a=new g.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a);var b=this._clickTolerance(),c=new g.Point(b,b);this._bounds.isValid()&&a.isValid()&&(a.min._subtract(c),a.max._add(c),this._pxBounds=a)},_projectLatlngs:function(a,b,c){var d,e,f=a[0]instanceof g.LatLng,h=a.length;if(f){for(e=[],d=0;d<h;d++)e[d]=this._map.latLngToLayerPoint(a[d]),c.extend(e[d]);b.push(e)}else for(d=0;d<h;d++)this._projectLatlngs(a[d],b,c)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);var b,c,d,e,f,h,i,j=this._parts;for(b=0,d=0,e=this._rings.length;b<e;b++)for(i=this._rings[b],c=0,f=i.length;c<f-1;c++)h=g.LineUtil.clipSegment(i[c],i[c+1],a,c,!0),h&&(j[d]=j[d]||[],j[d].push(h[0]),h[1]===i[c+1]&&c!==f-2||(j[d].push(h[1]),d++))}},_simplifyPoints:function(){for(var a=this._parts,b=this.options.smoothFactor,c=0,d=a.length;c<d;c++)a[c]=g.LineUtil.simplify(a[c],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),g.polyline=function(a,b){return new g.Polyline(a,b)},g.Polyline._flat=function(a){return!g.Util.isArray(a[0])||"object"!=typeof a[0][0]&&"undefined"!=typeof a[0][0]},g.PolyUtil={},g.PolyUtil.clipPolygon=function(a,b,c){var d,e,f,h,i,j,k,l,m,n=[1,4,2,8],o=g.LineUtil;for(e=0,k=a.length;e<k;e++)a[e]._code=o._getBitCode(a[e],b);for(h=0;h<4;h++){for(l=n[h],d=[],e=0,k=a.length,f=k-1;e<k;f=e++)i=a[e],j=a[f],i._code&l?j._code&l||(m=o._getEdgeIntersection(j,i,l,b,c),m._code=o._getBitCode(m,b),d.push(m)):(j._code&l&&(m=o._getEdgeIntersection(j,i,l,b,c),m._code=o._getBitCode(m,b),d.push(m)),d.push(i));a=d}return a},g.Polygon=g.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,b,c,d,e,f,g,h,i,j=this._rings[0],k=j.length;if(!k)return null;for(f=g=h=0,a=0,b=k-1;a<k;b=a++)c=j[a],d=j[b],e=c.y*d.x-d.y*c.x,g+=(c.x+d.x)*e,h+=(c.y+d.y)*e,f+=3*e;return i=0===f?j[0]:[g/f,h/f],this._map.layerPointToLatLng(i)},_convertLatLngs:function(a){var b=g.Polyline.prototype._convertLatLngs.call(this,a),c=b.length;return c>=2&&b[0]instanceof g.LatLng&&b[0].equals(b[c-1])&&b.pop(),b},_setLatLngs:function(a){g.Polyline.prototype._setLatLngs.call(this,a),g.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return g.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,b=this.options.weight,c=new g.Point(b,b);if(a=new g.Bounds(a.min.subtract(c),a.max.add(c)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);for(var d,e=0,f=this._rings.length;e<f;e++)d=g.PolyUtil.clipPolygon(this._rings[e],a,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),g.polygon=function(a,b){return new g.Polygon(a,b)},g.Rectangle=g.Polygon.extend({initialize:function(a,b){g.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=g.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),g.rectangle=function(a,b){return new g.Rectangle(a,b)},g.CircleMarker=g.Path.extend({options:{fill:!0,radius:10},initialize:function(a,b){g.setOptions(this,b),this._latlng=g.latLng(a),this._radius=this.options.radius},setLatLng:function(a){return this._latlng=g.latLng(a),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var b=a&&a.radius||this._radius;return g.Path.prototype.setStyle.call(this,a),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,b=this._radiusY||a,c=this._clickTolerance(),d=[a+c,b+c];this._pxBounds=new g.Bounds(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),g.circleMarker=function(a,b){return new g.CircleMarker(a,b)},g.Circle=g.CircleMarker.extend({initialize:function(a,b,c){if("number"==typeof b&&(b=g.extend({},c,{radius:b})),g.setOptions(this,b),this._latlng=g.latLng(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new g.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:g.Path.prototype.setStyle,_project:function(){var a=this._latlng.lng,b=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===g.CRS.Earth.distance){var e=Math.PI/180,f=this._mRadius/g.CRS.Earth.R/e,h=c.project([b+f,a]),i=c.project([b-f,a]),j=h.add(i).divideBy(2),k=c.unproject(j).lat,l=Math.acos((Math.cos(f*e)-Math.sin(b*e)*Math.sin(k*e))/(Math.cos(b*e)*Math.cos(k*e)))/e;(isNaN(l)||0===l)&&(l=f/Math.cos(Math.PI/180*b)),this._point=j.subtract(c.getPixelOrigin()),this._radius=isNaN(l)?0:Math.max(Math.round(j.x-c.project([k,a-l]).x),1),this._radiusY=Math.max(Math.round(j.y-h.y),1)}else{var m=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(m).x}this._updateBounds()}}),g.circle=function(a,b,c){return new g.Circle(a,b,c)},g.SVG=g.Renderer.extend({getEvents:function(){var a=g.Renderer.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=g.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=g.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){g.Renderer.prototype._update.call(this);var a=this._bounds,b=a.getSize(),c=this._container;this._svgSize&&this._svgSize.equals(b)||(this._svgSize=b,c.setAttribute("width",b.x),c.setAttribute("height",b.y)),g.DomUtil.setPosition(c,a.min),c.setAttribute("viewBox",[a.min.x,a.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(a){var b=a._path=g.SVG.create("path");a.options.className&&g.DomUtil.addClass(b,a.options.className),a.options.interactive&&g.DomUtil.addClass(b,"leaflet-interactive"),this._updateStyle(a)},_addPath:function(a){this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){g.DomUtil.remove(a._path),a.removeInteractiveTarget(a._path)},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var b=a._path,c=a.options;b&&(c.stroke?(b.setAttribute("stroke",c.color),b.setAttribute("stroke-opacity",c.opacity),b.setAttribute("stroke-width",c.weight),b.setAttribute("stroke-linecap",c.lineCap),b.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?b.setAttribute("stroke-dasharray",c.dashArray):b.removeAttribute("stroke-dasharray"),c.dashOffset?b.setAttribute("stroke-dashoffset",c.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),c.fill?(b.setAttribute("fill",c.fillColor||c.color),b.setAttribute("fill-opacity",c.fillOpacity),b.setAttribute("fill-rule",c.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(a,b){this._setPath(a,g.SVG.pointsToPath(a._parts,b))},_updateCircle:function(a){var b=a._point,c=a._radius,d=a._radiusY||c,e="a"+c+","+d+" 0 1,0 ",f=a._empty()?"M0 0":"M"+(b.x-c)+","+b.y+e+2*c+",0 "+e+2*-c+",0 ";this._setPath(a,f)},_setPath:function(a,b){a._path.setAttribute("d",b)},_bringToFront:function(a){g.DomUtil.toFront(a._path)},_bringToBack:function(a){g.DomUtil.toBack(a._path)}}),g.extend(g.SVG,{create:function(a){return b.createElementNS("http://www.w3.org/2000/svg",a)},pointsToPath:function(a,b){var c,d,e,f,h,i,j="";for(c=0,e=a.length;c<e;c++){for(h=a[c],d=0,f=h.length;d<f;d++)i=h[d],j+=(d?"L":"M")+i.x+" "+i.y;j+=b?g.Browser.svg?"z":"x":""}return j||"M0 0"}}),g.Browser.svg=!(!b.createElementNS||!g.SVG.create("svg").createSVGRect),g.svg=function(a){return g.Browser.svg||g.Browser.vml?new g.SVG(a):null},g.Browser.vml=!g.Browser.svg&&function(){try{var a=b.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(a){return!1}}(),g.SVG.include(g.Browser.vml?{_initContainer:function(){this._container=g.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(g.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var b=a._container=g.SVG.create("shape");g.DomUtil.addClass(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",a._path=g.SVG.create("path"),b.appendChild(a._path),this._updateStyle(a)},_addPath:function(a){var b=a._container;this._container.appendChild(b),a.options.interactive&&a.addInteractiveTarget(b)},_removePath:function(a){var b=a._container;g.DomUtil.remove(b),a.removeInteractiveTarget(b)},_updateStyle:function(a){var b=a._stroke,c=a._fill,d=a.options,e=a._container;e.stroked=!!d.stroke,e.filled=!!d.fill,d.stroke?(b||(b=a._stroke=g.SVG.create("stroke")),e.appendChild(b),b.weight=d.weight+"px",b.color=d.color,b.opacity=d.opacity,d.dashArray?b.dashStyle=g.Util.isArray(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=d.lineCap.replace("butt","flat"),b.joinstyle=d.lineJoin):b&&(e.removeChild(b),a._stroke=null),d.fill?(c||(c=a._fill=g.SVG.create("fill")),e.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(e.removeChild(c),a._fill=null)},_updateCircle:function(a){var b=a._point.round(),c=Math.round(a._radius),d=Math.round(a._radiusY||c);this._setPath(a,a._empty()?"M0 0":"AL "+b.x+","+b.y+" "+c+","+d+" 0,23592600")},_setPath:function(a,b){a._path.v=b},_bringToFront:function(a){g.DomUtil.toFront(a._container)},_bringToBack:function(a){g.DomUtil.toBack(a._container)}}:{}),g.Browser.vml&&(g.SVG.create=function(){try{return b.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return b.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),g.Canvas=g.Renderer.extend({onAdd:function(){g.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var a=this._container=b.createElement("canvas");g.DomEvent.on(a,"mousemove",g.Util.throttle(this._onMouseMove,32,this),this).on(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(a,"mouseout",this._handleMouseOut,this),this._ctx=a.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},g.Renderer.prototype._update.call(this);var a=this._bounds,b=this._container,c=a.getSize(),d=g.Browser.retina?2:1;g.DomUtil.setPosition(b,a.min),b.width=d*c.x,b.height=d*c.y,b.style.width=c.x+"px",b.style.height=c.y+"px",g.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_initPath:function(a){this._updateDashArray(a),this._layers[g.stamp(a)]=a},_addPath:g.Util.falseFn,_removePath:function(a){a._removed=!0,this._requestRedraw(a)},_updatePath:function(a){this._redrawBounds=a._pxBounds,this._draw(!0),a._project(),a._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(a.options.dashArray){var b,c=a.options.dashArray.split(","),d=[];for(b=0;b<c.length;b++)d.push(Number(c[b]));a.options._dashArray=d}},_requestRedraw:function(a){if(this._map){var b=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new g.Bounds,this._redrawBounds.extend(a._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(a._pxBounds.max.add([b,b])),this._redrawRequest=this._redrawRequest||g.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(a){this._clear=a;var b,c=this._redrawBounds;this._ctx.save(),c&&(this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y),this._ctx.clip());for(var d in this._layers)b=this._layers[d],(!c||b._pxBounds&&b._pxBounds.intersects(c))&&b._updatePath(),a&&b._removed&&(delete b._removed,delete this._layers[d]);this._ctx.restore()},_updatePoly:function(a,b){var c,d,e,f,g=a._parts,h=g.length,i=this._ctx;if(h){for(this._drawnLayers[a._leaflet_id]=a,i.beginPath(),i.setLineDash&&i.setLineDash(a.options&&a.options._dashArray||[]),c=0;c<h;c++){for(d=0,e=g[c].length;d<e;d++)f=g[c][d],i[d?"lineTo":"moveTo"](f.x,f.y);b&&i.closePath()}this._fillStroke(i,a)}},_updateCircle:function(a){if(!a._empty()){var b=a._point,c=this._ctx,d=a._radius,e=(a._radiusY||d)/d;this._drawnLayers[a._leaflet_id]=a,1!==e&&(c.save(),c.scale(1,e)),c.beginPath(),c.arc(b.x,b.y/e,d,0,2*Math.PI,!1),1!==e&&c.restore(),this._fillStroke(c,a)}},_fillStroke:function(a,b){var c=this._clear,d=b.options;a.globalCompositeOperation=c?"destination-out":"source-over",d.fill&&(a.globalAlpha=c?1:d.fillOpacity,a.fillStyle=d.fillColor||d.color,a.fill(d.fillRule||"evenodd")),d.stroke&&0!==d.weight&&(a.globalAlpha=c?1:d.opacity,b._prevWeight=a.lineWidth=c?b._prevWeight+1:d.weight,a.strokeStyle=d.color,a.lineCap=d.lineCap,a.lineJoin=d.lineJoin,a.stroke())},_onClick:function(a){var b,c=this._map.mouseEventToLayerPoint(a),d=[];for(var e in this._layers)b=this._layers[e],b.options.interactive&&b._containsPoint(c)&&!this._map._draggableMoved(b)&&(g.DomEvent._fakeStop(a),d.push(b));d.length&&this._fireEvent(d,a)},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var b=this._map.mouseEventToLayerPoint(a);this._handleMouseOut(a,b),this._handleMouseHover(a,b)}},_handleMouseOut:function(a,b){var c=this._hoveredLayer;!c||"mouseout"!==a.type&&c._containsPoint(b)||(g.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(a,b){var c,d;for(c in this._drawnLayers)d=this._drawnLayers[c],d.options.interactive&&d._containsPoint(b)&&(g.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseover"),this._hoveredLayer=d);this._hoveredLayer&&this._fireEvent([this._hoveredLayer],a)},_fireEvent:function(a,b,c){this._map._fireDOMEvent(b,c||b.type,a)},_bringToFront:g.Util.falseFn,_bringToBack:g.Util.falseFn}),g.Browser.canvas=function(){return!!b.createElement("canvas").getContext}(),g.canvas=function(a){return g.Browser.canvas?new g.Canvas(a):null},g.Polyline.prototype._containsPoint=function(a,b){var c,d,e,f,h,i,j=this._clickTolerance();if(!this._pxBounds.contains(a))return!1;for(c=0,f=this._parts.length;c<f;c++)for(i=this._parts[c],d=0,h=i.length,e=h-1;d<h;e=d++)if((b||0!==d)&&g.LineUtil.pointToSegmentDistance(a,i[e],i[d])<=j)return!0;return!1},g.Polygon.prototype._containsPoint=function(a){var b,c,d,e,f,h,i,j,k=!1;if(!this._pxBounds.contains(a))return!1;for(e=0,i=this._parts.length;e<i;e++)for(b=this._parts[e],f=0,j=b.length,h=j-1;f<j;h=f++)c=b[f],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k||g.Polyline.prototype._containsPoint.call(this,a,!0)},g.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()},g.GeoJSON=g.FeatureGroup.extend({initialize:function(a,b){g.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,e=g.Util.isArray(a)?a:a.features;if(e){for(b=0,c=e.length;b<c;b++)d=e[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var f=this.options;if(f.filter&&!f.filter(a))return this;var h=g.GeoJSON.geometryToLayer(a,f);return h?(h.feature=g.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),f.onEachFeature&&f.onEachFeature(a,h),this.addLayer(h)):this},resetStyle:function(a){return a.options=g.Util.extend({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this},setStyle:function(a){return this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),g.extend(g.GeoJSON,{geometryToLayer:function(a,b){var c,d,e,f,h="Feature"===a.type?a.geometry:a,i=h?h.coordinates:null,j=[],k=b&&b.pointToLayer,l=b&&b.coordsToLatLng||this.coordsToLatLng;if(!i&&!h)return null;switch(h.type){case"Point":return c=l(i),k?k(a,c):new g.Marker(c);case"MultiPoint":for(e=0,f=i.length;e<f;e++)c=l(i[e]),j.push(k?k(a,c):new g.Marker(c));return new g.FeatureGroup(j);case"LineString":case"MultiLineString":return d=this.coordsToLatLngs(i,"LineString"===h.type?0:1,l),new g.Polyline(d,b);case"Polygon":case"MultiPolygon":return d=this.coordsToLatLngs(i,"Polygon"===h.type?1:2,l),new g.Polygon(d,b);case"GeometryCollection":for(e=0,f=h.geometries.length;e<f;e++){var m=this.geometryToLayer({geometry:h.geometries[e],type:"Feature",properties:a.properties},b);m&&j.push(m)}return new g.FeatureGroup(j);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new g.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){for(var d,e=[],f=0,g=a.length;f<g;f++)d=b?this.coordsToLatLngs(a[f],b-1,c):(c||this.coordsToLatLng)(a[f]),e.push(d);return e},latLngToCoords:function(a){return a.alt!==e?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(a,b,c){for(var d=[],e=0,f=a.length;e<f;e++)d.push(b?g.GeoJSON.latLngsToCoords(a[e],b-1,c):g.GeoJSON.latLngToCoords(a[e]));return!b&&c&&d.push(d[0]),d},getFeature:function(a,b){return a.feature?g.extend({},a.feature,{geometry:b}):g.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var i={toGeoJSON:function(){return g.GeoJSON.getFeature(this,{type:"Point",coordinates:g.GeoJSON.latLngToCoords(this.getLatLng())})}};g.Marker.include(i),g.Circle.include(i),g.CircleMarker.include(i),g.Polyline.prototype.toGeoJSON=function(){var a=!g.Polyline._flat(this._latlngs),b=g.GeoJSON.latLngsToCoords(this._latlngs,a?1:0);return g.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"LineString",coordinates:b})},g.Polygon.prototype.toGeoJSON=function(){var a=!g.Polyline._flat(this._latlngs),b=a&&!g.Polyline._flat(this._latlngs[0]),c=g.GeoJSON.latLngsToCoords(this._latlngs,b?2:a?1:0,!0);return a||(c=[c]),g.GeoJSON.getFeature(this,{type:(b?"Multi":"")+"Polygon",coordinates:c})},g.LayerGroup.include({toMultiPoint:function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),g.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===a)return this.toMultiPoint();var b="GeometryCollection"===a,c=[];return this.eachLayer(function(a){if(a.toGeoJSON){var d=a.toGeoJSON();c.push(b?d.geometry:g.GeoJSON.asFeature(d))}}),b?g.GeoJSON.getFeature(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}}),g.geoJSON=function(a,b){return new g.GeoJSON(a,b)},g.geoJson=g.geoJSON;var j="_leaflet_events";g.DomEvent={on:function(a,b,c,d){if("object"==typeof b)for(var e in b)this._on(a,e,b[e],c);else{b=g.Util.splitWords(b);for(var f=0,h=b.length;f<h;f++)this._on(a,b[f],c,d)}return this},off:function(a,b,c,d){if("object"==typeof b)for(var e in b)this._off(a,e,b[e],c);else{b=g.Util.splitWords(b);for(var f=0,h=b.length;f<h;f++)this._off(a,b[f],c,d)}return this},_on:function(b,c,d,e){var f=c+g.stamp(d)+(e?"_"+g.stamp(e):"");if(b[j]&&b[j][f])return this;var h=function(c){return d.call(e||b,c||a.event)},i=h;return g.Browser.pointer&&0===c.indexOf("touch")?this.addPointerListener(b,c,h,f):g.Browser.touch&&"dblclick"===c&&this.addDoubleTapListener?this.addDoubleTapListener(b,h,f):"addEventListener"in b?"mousewheel"===c?b.addEventListener("onwheel"in b?"wheel":"mousewheel",h,!1):"mouseenter"===c||"mouseleave"===c?(h=function(c){c=c||a.event,g.DomEvent._isExternalTarget(b,c)&&i(c)},b.addEventListener("mouseenter"===c?"mouseover":"mouseout",h,!1)):("click"===c&&g.Browser.android&&(h=function(a){
return g.DomEvent._filterClick(a,i)}),b.addEventListener(c,h,!1)):"attachEvent"in b&&b.attachEvent("on"+c,h),b[j]=b[j]||{},b[j][f]=h,this},_off:function(a,b,c,d){var e=b+g.stamp(c)+(d?"_"+g.stamp(d):""),f=a[j]&&a[j][e];return f?(g.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,e):g.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,e):"removeEventListener"in a?"mousewheel"===b?a.removeEventListener("onwheel"in a?"wheel":"mousewheel",f,!1):a.removeEventListener("mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,f,!1):"detachEvent"in a&&a.detachEvent("on"+b,f),a[j][e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,g.DomEvent._skipped(a),this},disableScrollPropagation:function(a){return g.DomEvent.on(a,"mousewheel",g.DomEvent.stopPropagation)},disableClickPropagation:function(a){var b=g.DomEvent.stopPropagation;return g.DomEvent.on(a,g.Draggable.START.join(" "),b),g.DomEvent.on(a,{click:g.DomEvent._fakeStop,dblclick:b})},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return g.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new g.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new g.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},_wheelPxFactor:g.Browser.win&&g.Browser.chrome?2:g.Browser.gecko?a.devicePixelRatio:1,getWheelDelta:function(a){return g.Browser.edge?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/g.DomEvent._wheelPxFactor:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?20*-a.detail:a.detail?a.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(a){g.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_isExternalTarget:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(a){return!1}return c!==a},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent&&a.originalEvent.timeStamp,d=g.DomEvent._lastClick&&c-g.DomEvent._lastClick;return d&&d>100&&d<500||a.target._simulatedClick&&!a._simulated?void g.DomEvent.stop(a):(g.DomEvent._lastClick=c,void b(a))}},g.DomEvent.addListener=g.DomEvent.on,g.DomEvent.removeListener=g.DomEvent.off,g.Draggable=g.Evented.extend({options:{clickTolerance:3},statics:{START:g.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b,c){this._element=a,this._dragStartTarget=b||a,this._preventOutline=c},enable:function(){this._enabled||(g.DomEvent.on(this._dragStartTarget,g.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(g.DomEvent.off(this._dragStartTarget,g.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(!a._simulated&&this._enabled&&(this._moved=!1,!g.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(g.Draggable._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches)&&this._enabled&&(g.Draggable._dragging=!0,this._preventOutline&&g.DomUtil.preventOutline(this._element),g.DomUtil.disableImageDrag(),g.DomUtil.disableTextSelection(),!this._moving))){this.fire("down");var c=a.touches?a.touches[0]:a;this._startPoint=new g.Point(c.clientX,c.clientY),g.DomEvent.on(b,g.Draggable.MOVE[a.type],this._onMove,this).on(b,g.Draggable.END[a.type],this._onUp,this)}},_onMove:function(c){if(!c._simulated&&this._enabled){if(c.touches&&c.touches.length>1)return void(this._moved=!0);var d=c.touches&&1===c.touches.length?c.touches[0]:c,e=new g.Point(d.clientX,d.clientY),f=e.subtract(this._startPoint);(f.x||f.y)&&(Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(g.DomEvent.preventDefault(c),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=g.DomUtil.getPosition(this._element).subtract(f),g.DomUtil.addClass(b.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,a.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),g.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,g.Util.cancelAnimFrame(this._animRequest),this._lastEvent=c,this._animRequest=g.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),g.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",a)},_onUp:function(a){if(!a._simulated&&this._enabled){g.DomUtil.removeClass(b.body,"leaflet-dragging"),this._lastTarget&&(g.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var c in g.Draggable.MOVE)g.DomEvent.off(b,g.Draggable.MOVE[c],this._onMove,this).off(b,g.Draggable.END[c],this._onUp,this);g.DomUtil.enableImageDrag(),g.DomUtil.enableTextSelection(),this._moved&&this._moving&&(g.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,g.Draggable._dragging=!1}}}),g.Handler=g.Class.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),g.Map.mergeOptions({dragging:!0,inertia:!g.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),g.Map.Drag=g.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new g.Draggable(a._mapPane,a._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}g.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){g.DomUtil.removeClass(this._map._container,"leaflet-grab"),g.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var a=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=g.latLngBounds(this._map.options.maxBounds);this._offsetLimit=g.bounds(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var b=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(b),b-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",a).fire("drag",a)},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,b){return a-(a-b)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;a.x<b.min.x&&(a.x=this._viscousLimit(a.x,b.min.x)),a.y<b.min.y&&(a.y=this._viscousLimit(a.y,b.min.y)),a.x>b.max.x&&(a.x=this._viscousLimit(a.x,b.max.x)),a.y>b.max.y&&(a.y=this._viscousLimit(a.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=!c.inertia||this._times.length<2;if(b.fire("dragend",a),d)b.fire("moveend");else{var e=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,h=c.easeLinearity,i=e.multiplyBy(h/f),j=i.distanceTo([0,0]),k=Math.min(c.inertiaMaxSpeed,j),l=i.multiplyBy(k/j),m=k/(c.inertiaDeceleration*h),n=l.multiplyBy(-m/2).round();n.x||n.y?(n=b._limitOffset(n,b.options.maxBounds),g.Util.requestAnimFrame(function(){b.panBy(n,{duration:m,easeLinearity:h,noMoveStart:!0,animate:!0})})):b.fire("moveend")}}}),g.Map.addInitHook("addHandler","dragging",g.Map.Drag),g.Map.mergeOptions({doubleClickZoom:!0}),g.Map.DoubleClickZoom=g.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom(),d=b.options.zoomDelta,e=a.originalEvent.shiftKey?c-d:c+d;"center"===b.options.doubleClickZoom?b.setZoom(e):b.setZoomAround(a.containerPoint,e)}}),g.Map.addInitHook("addHandler","doubleClickZoom",g.Map.DoubleClickZoom),g.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),g.Map.ScrollWheelZoom=g.Handler.extend({addHooks:function(){g.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){g.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var b=g.DomEvent.getWheelDelta(a),c=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(g.bind(this._performZoom,this),d),g.DomEvent.stop(a)},_performZoom:function(){var a=this._map,b=a.getZoom(),c=this._map.options.zoomSnap||0;a._stop();var d=this._delta/(4*this._map.options.wheelPxPerZoomLevel),e=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,f=c?Math.ceil(e/c)*c:e,g=a._limitZoom(b+(this._delta>0?f:-f))-b;this._delta=0,this._startTime=null,g&&("center"===a.options.scrollWheelZoom?a.setZoom(b+g):a.setZoomAround(this._lastMousePos,b+g))}}),g.Map.addInitHook("addHandler","scrollWheelZoom",g.Map.ScrollWheelZoom),g.extend(g.DomEvent,{_touchstart:g.Browser.msPointer?"MSPointerDown":g.Browser.pointer?"pointerdown":"touchstart",_touchend:g.Browser.msPointer?"MSPointerUp":g.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,b,c){function d(a){var b;if(b=g.Browser.pointer?g.DomEvent._pointersCount:a.touches.length,!(b>1)){var c=Date.now(),d=c-(f||c);h=a.touches?a.touches[0]:a,i=d>0&&d<=j,f=c}}function e(){if(i&&!h.cancelBubble){if(g.Browser.pointer){var a,c,d={};for(c in h)a=h[c],d[c]=a&&a.bind?a.bind(h):a;h=d}h.type="dblclick",b(h),f=null}}var f,h,i=!1,j=250,k="_leaflet_",l=this._touchstart,m=this._touchend;return a[k+l+c]=d,a[k+m+c]=e,a[k+"dblclick"+c]=b,a.addEventListener(l,d,!1),a.addEventListener(m,e,!1),g.Browser.edge||a.addEventListener("dblclick",b,!1),this},removeDoubleTapListener:function(a,b){var c="_leaflet_",d=a[c+this._touchstart+b],e=a[c+this._touchend+b],f=a[c+"dblclick"+b];return a.removeEventListener(this._touchstart,d,!1),a.removeEventListener(this._touchend,e,!1),g.Browser.edge||a.removeEventListener("dblclick",f,!1),this}}),g.extend(g.DomEvent,{POINTER_DOWN:g.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:g.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:g.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:g.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(a,b,c,d){return"touchstart"===b?this._addPointerStart(a,c,d):"touchmove"===b?this._addPointerMove(a,c,d):"touchend"===b&&this._addPointerEnd(a,c,d),this},removePointerListener:function(a,b,c){var d=a["_leaflet_"+b+c];return"touchstart"===b?a.removeEventListener(this.POINTER_DOWN,d,!1):"touchmove"===b?a.removeEventListener(this.POINTER_MOVE,d,!1):"touchend"===b&&(a.removeEventListener(this.POINTER_UP,d,!1),a.removeEventListener(this.POINTER_CANCEL,d,!1)),this},_addPointerStart:function(a,c,d){var e=g.bind(function(a){if("mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(a.target.tagName)<0))return;g.DomEvent.preventDefault(a)}this._handlePointer(a,c)},this);if(a["_leaflet_touchstart"+d]=e,a.addEventListener(this.POINTER_DOWN,e,!1),!this._pointerDocListener){var f=g.bind(this._globalPointerUp,this);b.documentElement.addEventListener(this.POINTER_DOWN,g.bind(this._globalPointerDown,this),!0),b.documentElement.addEventListener(this.POINTER_MOVE,g.bind(this._globalPointerMove,this),!0),b.documentElement.addEventListener(this.POINTER_UP,f,!0),b.documentElement.addEventListener(this.POINTER_CANCEL,f,!0),this._pointerDocListener=!0}},_globalPointerDown:function(a){this._pointers[a.pointerId]=a,this._pointersCount++},_globalPointerMove:function(a){this._pointers[a.pointerId]&&(this._pointers[a.pointerId]=a)},_globalPointerUp:function(a){delete this._pointers[a.pointerId],this._pointersCount--},_handlePointer:function(a,b){a.touches=[];for(var c in this._pointers)a.touches.push(this._pointers[c]);a.changedTouches=[a],b(a)},_addPointerMove:function(a,b,c){var d=g.bind(function(a){(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons)&&this._handlePointer(a,b)},this);a["_leaflet_touchmove"+c]=d,a.addEventListener(this.POINTER_MOVE,d,!1)},_addPointerEnd:function(a,b,c){var d=g.bind(function(a){this._handlePointer(a,b)},this);a["_leaflet_touchend"+c]=d,a.addEventListener(this.POINTER_UP,d,!1),a.addEventListener(this.POINTER_CANCEL,d,!1)}}),g.Map.mergeOptions({touchZoom:g.Browser.touch&&!g.Browser.android23,bounceAtZoomLimits:!0}),g.Map.TouchZoom=g.Handler.extend({addHooks:function(){g.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),g.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){g.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),g.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(a.touches&&2===a.touches.length&&!c._animatingZoom&&!this._zooming){var d=c.mouseEventToContainerPoint(a.touches[0]),e=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),"center"!==c.options.touchZoom&&(this._pinchStartLatLng=c.containerPointToLatLng(d.add(e)._divideBy(2))),this._startDist=d.distanceTo(e),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),g.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this),g.DomEvent.preventDefault(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var b=this._map,c=b.mouseEventToContainerPoint(a.touches[0]),d=b.mouseEventToContainerPoint(a.touches[1]),e=c.distanceTo(d)/this._startDist;if(this._zoom=b.getScaleZoom(e,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&e<1||this._zoom>b.getMaxZoom()&&e>1)&&(this._zoom=b._limitZoom(this._zoom)),"center"===b.options.touchZoom){if(this._center=this._startLatLng,1===e)return}else{var f=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(1===e&&0===f.x&&0===f.y)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(b._moveStart(!0),this._moved=!0),g.Util.cancelAnimFrame(this._animRequest);var h=g.bind(b._move,b,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=g.Util.requestAnimFrame(h,this,!0),g.DomEvent.preventDefault(a)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,g.Util.cancelAnimFrame(this._animRequest),g.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),g.Map.addInitHook("addHandler","touchZoom",g.Map.TouchZoom),g.Map.mergeOptions({tap:!0,tapTolerance:15}),g.Map.Tap=g.Handler.extend({addHooks:function(){g.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){g.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(g.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var c=a.touches[0],d=c.target;this._startPos=this._newPos=new g.Point(c.clientX,c.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&g.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(g.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",c))},this),1e3),this._simulateEvent("mousedown",c),g.DomEvent.on(b,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),g.DomEvent.off(b,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&a&&a.changedTouches){var c=a.changedTouches[0],d=c.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&g.DomUtil.removeClass(d,"leaflet-active"),this._simulateEvent("mouseup",c),this._isTapValid()&&this._simulateEvent("click",c)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new g.Point(b.clientX,b.clientY),this._simulateEvent("mousemove",b)},_simulateEvent:function(c,d){var e=b.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(c,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),g.Browser.touch&&!g.Browser.pointer&&g.Map.addInitHook("addHandler","tap",g.Map.Tap),g.Map.mergeOptions({boxZoom:!0}),g.Map.BoxZoom=g.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){g.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){g.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(a){return!(!a.shiftKey||1!==a.which&&1!==a.button)&&(this._resetState(),g.DomUtil.disableTextSelection(),g.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(a),void g.DomEvent.on(b,{contextmenu:g.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=g.DomUtil.create("div","leaflet-zoom-box",this._container),g.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var b=new g.Bounds(this._point,this._startPoint),c=b.getSize();g.DomUtil.setPosition(this._box,b.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(g.DomUtil.remove(this._box),g.DomUtil.removeClass(this._container,"leaflet-crosshair")),g.DomUtil.enableTextSelection(),g.DomUtil.enableImageDrag(),g.DomEvent.off(b,{contextmenu:g.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){setTimeout(g.bind(this._resetState,this),0);var b=new g.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),g.Map.addInitHook("addHandler","boxZoom",g.Map.BoxZoom),g.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),g.Map.Keyboard=g.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),g.DomEvent.on(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),g.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=b.body,d=b.documentElement,e=c.scrollTop||d.scrollTop,f=c.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;b<c;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;b<c;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;b<c;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;b<c;b++)d[e.up[b]]=[0,-1*a]},_setZoomDelta:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;b<c;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;b<c;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){g.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){g.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b,c=a.keyCode,d=this._map;if(c in this._panKeys){if(d._panAnim&&d._panAnim._inProgress)return;b=this._panKeys[c],a.shiftKey&&(b=g.point(b).multiplyBy(3)),d.panBy(b),d.options.maxBounds&&d.panInsideBounds(d.options.maxBounds)}else if(c in this._zoomKeys)d.setZoom(d.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else{if(27!==c)return;d.closePopup()}g.DomEvent.stop(a)}}}),g.Map.addInitHook("addHandler","keyboard",g.Map.Keyboard),g.Handler.MarkerDrag=g.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new g.Draggable(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),g.DomUtil.addClass(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&g.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(a){var b=this._marker,c=b._shadow,d=g.DomUtil.getPosition(b._icon),e=b._map.layerPointToLatLng(d);c&&g.DomUtil.setPosition(c,d),b._latlng=e,a.latlng=e,a.oldLatLng=this._oldLatLng,b.fire("move",a).fire("drag",a)},_onDragEnd:function(a){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),g.Control=g.Class.extend({options:{position:"topright"},initialize:function(a){g.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return g.DomUtil.addClass(b,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(b,d.firstChild):d.appendChild(b),this},remove:function(){return this._map?(g.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),g.control=function(a){return new g.Control(a)},g.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function a(a,e){var f=c+a+" "+c+e;b[a+e]=g.DomUtil.create("div",f,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=g.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){g.DomUtil.remove(this._controlContainer)}}),g.Control.Zoom=g.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=g.DomUtil.create("div",b+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,b+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,b+"-out",c,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,b,c,d,e){var f=g.DomUtil.create("a",c,d);return f.innerHTML=a,f.href="#",f.title=b,g.DomEvent.on(f,"mousedown dblclick",g.DomEvent.stopPropagation).on(f,"click",g.DomEvent.stop).on(f,"click",e,this).on(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";g.DomUtil.removeClass(this._zoomInButton,b),g.DomUtil.removeClass(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMinZoom())&&g.DomUtil.addClass(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMaxZoom())&&g.DomUtil.addClass(this._zoomInButton,b)}}),g.Map.mergeOptions({zoomControl:!0}),g.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new g.Control.Zoom,this.addControl(this.zoomControl))}),g.control.zoom=function(a){return new g.Control.Zoom(a)},g.Control.Attribution=g.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){g.setOptions(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=g.DomUtil.create("div","leaflet-control-attribution"),g.DomEvent&&g.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}}}),g.Map.mergeOptions({attributionControl:!0}),g.Map.addInitHook(function(){this.options.attributionControl&&(new g.Control.Attribution).addTo(this)}),g.control.attribution=function(a){return new g.Control.Attribution(a)},g.Control.Scale=g.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var b="leaflet-control-scale",c=g.DomUtil.create("div",b),d=this.options;return this._addScales(d,b+"-line",c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=g.DomUtil.create("div",b,c)),a.imperial&&(this._iScale=g.DomUtil.create("div",b,c))},_update:function(){var a=this._map,b=a.getSize().y/2,c=a.distance(a.containerPointToLatLng([0,b]),a.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(c)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var b=this._getRoundNum(a),c=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,c,b/a)},_updateImperial:function(a){var b,c,d,e=3.2808399*a;e>5280?(b=e/5280,c=this._getRoundNum(b),this._updateScale(this._iScale,c+" mi",c/b)):(d=this._getRoundNum(e),this._updateScale(this._iScale,d+" ft",d/e))},_updateScale:function(a,b,c){a.style.width=Math.round(this.options.maxWidth*c)+"px",a.innerHTML=b},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),g.control.scale=function(a){return new g.Control.Scale(a)},g.Control.Layers=g.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(a,b,c){g.setOptions(this,c),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._map?this._update():this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var b=this._getLayer(g.stamp(a));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){g.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._form.clientHeight?(g.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=a+"px"):g.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return g.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=g.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),g.DomEvent.disableClickPropagation(b),g.Browser.touch||g.DomEvent.disableScrollPropagation(b);var c=this._form=g.DomUtil.create("form",a+"-list");if(this.options.collapsed){g.Browser.android||g.DomEvent.on(b,{mouseenter:this.expand,mouseleave:this.collapse},this);var d=this._layersLink=g.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",g.Browser.touch?g.DomEvent.on(d,"click",g.DomEvent.stop).on(d,"click",this.expand,this):g.DomEvent.on(d,"focus",this.expand,this),g.DomEvent.on(c,"click",function(){setTimeout(g.bind(this._onInputClick,this),0);
},this),this._map.on("click",this.collapse,this)}else this.expand();this._baseLayersList=g.DomUtil.create("div",a+"-base",c),this._separator=g.DomUtil.create("div",a+"-separator",c),this._overlaysList=g.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_getLayer:function(a){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&g.stamp(this._layers[b].layer)===a)return this._layers[b]},_addLayer:function(a,b,c){a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:b,overlay:c}),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;g.DomUtil.empty(this._baseLayersList),g.DomUtil.empty(this._overlaysList);var a,b,c,d,e=0;for(c=0;c<this._layers.length;c++)d=this._layers[c],this._addItem(d),b=b||d.overlay,a=a||!d.overlay,e+=d.overlay?0:1;return this.options.hideSingleBase&&(a=a&&e>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=b&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var b=this._getLayer(g.stamp(a.target)),c=b.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",e=b.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var c,d=b.createElement("label"),e=this._map.hasLayer(a.layer);a.overlay?(c=b.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=e):c=this._createRadioElement("leaflet-base-layers",e),c.layerId=g.stamp(a.layer),g.DomEvent.on(c,"click",this._onInputClick,this);var f=b.createElement("span");f.innerHTML=" "+a.name;var h=b.createElement("div");d.appendChild(h),h.appendChild(c),h.appendChild(f);var i=a.overlay?this._overlaysList:this._baseLayersList;return i.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=[],f=[];this._handlingClick=!0;for(var g=d.length-1;g>=0;g--)a=d[g],b=this._getLayer(a.layerId).layer,c=this._map.hasLayer(b),a.checked&&!c?e.push(b):!a.checked&&c&&f.push(b);for(g=0;g<f.length;g++)this._map.removeLayer(f[g]);for(g=0;g<e.length;g++)this._map.addLayer(e[g]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a,b,c=this._form.getElementsByTagName("input"),d=this._map.getZoom(),f=c.length-1;f>=0;f--)a=c[f],b=this._getLayer(a.layerId).layer,a.disabled=b.options.minZoom!==e&&d<b.options.minZoom||b.options.maxZoom!==e&&d>b.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),g.control.layers=function(a,b,c){return new g.Control.Layers(a,b,c)},g.PosAnimation=g.Evented.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=g.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=g.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(a){var b=+new Date-this._startTime,c=1e3*this._duration;b<c?this._runFrame(this._easeOut(b/c),a):(this._runFrame(1),this._complete())},_runFrame:function(a,b){var c=this._startPos.add(this._offset.multiplyBy(a));b&&c._round(),g.DomUtil.setPosition(this._el,c),this.fire("step")},_complete:function(){g.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),g.Map.include({setView:function(a,b,c){if(b=b===e?this._zoom:this._limitZoom(b),a=this._limitCenter(g.latLng(a),b,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==e&&(c.zoom=g.extend({animate:c.animate},c.zoom),c.pan=g.extend({animate:c.animate,duration:c.duration},c.pan));var d=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,c.zoom):this._tryAnimatedPan(a,c.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=g.point(a).round(),b=b||{},!a.x&&!a.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new g.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){g.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){g.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return!((b&&b.animate)!==!0&&!this.getSize().contains(c))&&(this.panBy(c,b),!0)}}),g.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var k=g.DomUtil.TRANSITION&&g.Browser.any3d&&!g.Browser.mobileOpera;k&&g.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),g.DomEvent.on(this._proxy,g.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),g.Map.include(k?{_createAnimProxy:function(){var a=this._proxy=g.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(b){var c=g.DomUtil.TRANSFORM,d=a.style[c];g.DomUtil.setTransform(a,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),d===a.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var b=this.getCenter(),c=this.getZoom();g.DomUtil.setTransform(a,this.project(b,c),this.getZoomScale(c,1))},this)},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d);return!(c.animate!==!0&&!this.getSize().contains(e))&&(g.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(a,b,!0)},this),!0)},_animateZoom:function(a,b,c,d){c&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=b,g.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:b,noUpdate:d}),setTimeout(g.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(g.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),g.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}:{}),g.Map.include({flyTo:function(a,b,c){function d(a){var b=a?-1:1,c=a?s:r,d=s*s-r*r+b*v*v*t*t,e=2*c*v*t,f=d/e,g=Math.sqrt(f*f+1)-f,h=g<1e-9?-18:Math.log(g);return h}function f(a){return(Math.exp(a)-Math.exp(-a))/2}function h(a){return(Math.exp(a)+Math.exp(-a))/2}function i(a){return f(a)/h(a)}function j(a){return r*(h(w)/h(w+u*a))}function k(a){return r*(h(w)*i(w+u*a)-f(w))/v}function l(a){return 1-Math.pow(1-a,1.5)}function m(){var c=(Date.now()-x)/z,d=l(c)*y;c<=1?(this._flyToFrame=g.Util.requestAnimFrame(m,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(k(d)/t)),q),this.getScaleZoom(r/j(d),q),{flyTo:!0})):this._move(a,b)._moveEnd(!0)}if(c=c||{},c.animate===!1||!g.Browser.any3d)return this.setView(a,b,c);this._stop();var n=this.project(this.getCenter()),o=this.project(a),p=this.getSize(),q=this._zoom;a=g.latLng(a),b=b===e?q:b;var r=Math.max(p.x,p.y),s=r*this.getZoomScale(q,b),t=o.distanceTo(n)||1,u=1.42,v=u*u,w=d(0),x=Date.now(),y=(d(1)-w)/u,z=c.duration?1e3*c.duration:1e3*y*.8;return this._moveStart(!0),m.call(this),this},flyToBounds:function(a,b){var c=this._getBoundsCenterZoom(a,b);return this.flyTo(c.center,c.zoom,b)}}),g.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(a){if(a=this._locateOptions=g.extend({},this._defaultLocateOptions,a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=g.bind(this._handleGeolocationResponse,this),c=g.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new g.LatLng(b,c),e=d.toBounds(a.coords.accuracy),f=this._locateOptions;if(f.setView){var h=this.getBoundsZoom(e);this.setView(d,f.maxZoom?Math.min(h,f.maxZoom):h)}var i={latlng:d,bounds:e,timestamp:a.timestamp};for(var j in a.coords)"number"==typeof a.coords[j]&&(i[j]=a.coords[j]);this.fire("locationfound",i)}})}(window,document)}(a("3b")),c.exports}),a.registerDynamic("4a",["143"],!0,function(a,b,c){this||self;return c.exports=a("143"),c.exports}),a.register("144",["4a"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){b.Map.addInitHook(function(){function a(a){function g(){f?f=!1:e.fire("singleclick",b.Util.extend(a,{type:"singleclick"}))}c(),d=setTimeout(g,300)}function c(){null!=d&&(clearTimeout(d),d=null)}var d,e=this,f=!1;e.on&&(e.on("click",a),e.on("dblclick",function(){setTimeout(c,0)}),e.on("dragstart",function(){f=!0}),e.on("dragend",function(){f=!1}))})}}}),function(){var b=a.amdDefine;/^u/.test(typeof b)&&function(a){var b=this.require=function(b){return a[b]};this.define=function(c,d){a[c]=a[c]||d(b)}}({}),b("145",[],function(){function a(a){return a.substr(0,3)}function b(a){return a!=Fa?""+a:""}function c(a){return"string"==typeof a}function d(a){return!!a&&"object"==typeof a}function e(a){return a&&a.nodeType}function f(a){return"number"==typeof a}function g(a){return d(a)&&!!a.getDay}function h(a){return!0===a||!1===a}function i(a){var b=typeof a;return"object"==b?!(!a||!a.getDay):"string"==b||"number"==b||h(a)}function j(a){return a}function k(a){return a+1}function l(a,c,d){return b(a).replace(c,d!=Fa?d:"")}function m(a){return l(a,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function n(a){return l(a,/^\s+|\s+$/g)}function o(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c||a,d,a[d]);return a}function p(a,b,c){if(a)for(var d=0;d<a.length;d++)b.call(c||a,a[d],d);return a}function q(a,b,c){var d=[],e=ea(b)?b:function(a){return b!=a};return p(a,function(b,f){e.call(c||a,b,f)&&d.push(b)}),d}function r(a,b,c,d){var e=[];return a(b,function(a,f){fa(a=c.call(d||b,a,f))?p(a,function(a){e.push(a)}):a!=Fa&&e.push(a)}),e}function s(a,b,c){return r(p,a,b,c)}function t(a){var b=0;return o(a,function(){b++}),b}function u(a){var b=[];return o(a,function(a){b.push(a)}),b}function v(a,b,c){var d=[];return p(a,function(e,f){d.push(b.call(c||a,e,f))}),d}function w(a,b){if(fa(a)){var c=wa(b);return M(G(a,0,c.length),c)}return b!=Fa&&a.substr(0,b.length)==b}function x(a,b){if(fa(a)){var c=wa(b);return M(G(a,-c.length),c)||!c.length}return b!=Fa&&a.substr(a.length-b.length)==b}function y(a){var b=a.length;return fa(a)?new va(v(a,function(){return a[--b]})):l(a,/[\s\S]/g,function(){return a.charAt(--b)})}function z(a,b){var c={};return p(a,function(a){c[a]=b}),c}function A(a,b){var c,d=b||{};for(c in a)d[c]=a[c];return d}function B(a,b){for(var c=b,d=0;d<a.length;d++)c=A(a[d],c);return c}function C(a){return ea(a)?a:function(b,c){return a===b?c:void 0}}function D(a,b,c){return b==Fa?c:0>b?Math.max(a.length+b,0):Math.min(a.length,b)}function E(a,b,c,d){b=C(b),d=D(a,d,a.length);for(var e=D(a,c,0);d>e;e++)if((c=b.call(a,a[e],e))!=Fa)return c}function F(a,b,c,d){b=C(b),d=D(a,d,-1);for(var e=D(a,c,a.length-1);e>d;e--)if((c=b.call(a,a[e],e))!=Fa)return c}function G(a,b,c){var d=[];if(a)for(c=D(a,c,a.length),b=D(a,b,0);c>b;b++)d.push(a[b]);return d}function H(a){return v(a,j)}function I(a){return function(){return new va(O(a,arguments))}}function J(a){var b={};return q(a,function(a){return!b[a]&&(b[a]=1)})}function K(a,b){var c=z(b,1);return q(a,function(a){var b=c[a];return c[a]=0,b})}function L(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function M(a,b){var c,d=ea(a)?a():a,e=ea(b)?b():b;return d==e||d!=Fa&&e!=Fa&&(i(d)||i(e)?g(d)&&g(e)&&+d==+e:fa(d)?d.length==e.length&&!E(d,function(a,b){return!M(a,e[b])||void 0}):!fa(e)&&(c=u(d)).length==t(e)&&!E(c,function(a){return!M(d[a],e[a])||void 0}))}function N(a,b,c){return ea(a)?a.apply(c&&b,v(c||b,j)):void 0}function O(a,b,c){return v(a,function(a){return N(a,b,c)})}function P(a,b,c,d){return function(){return N(a,b,s([c,arguments,d],j))}}function Q(a,b){for(var c=0>b?"-":"",d=(c?-b:b).toFixed(0);d.length<a;)d="0"+d;return c+d}function R(a,b,c){var d,e=0,f=c?b:y(b);return a=(c?a:y(a)).replace(/./g,function(a){return"0"==a?(d=!1,f.charAt(e++)||"0"):"#"==a?(d=!0,f.charAt(e++)||""):d&&!f.charAt(e)?"":a}),c?a:b.substr(0,b.length-e)+y(a)}function S(a,b,c){return b!=Fa&&a?60*parseFloat(a[b]+a[b+1])+parseFloat(a[b]+a[b+2])+c.getTimezoneOffset():0}function T(a){return new Date(+a)}function U(a,b,c){return a["set"+b](a["get"+b]()+c),a}function V(a,b,c){return c==Fa?V(new Date,a,b):U(T(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function W(a,b,c){var d=+b,e=+c,f=e-d;if(0>f)return-W(a,c,b);if(b={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5}[a])return f/b;for(b=a.charAt(0).toUpperCase()+a.substr(1),a=Math.floor(f/{fullYear:31536e6,month:2628e6,date:864e5}[a]-2),d=U(new Date(d),b,a),f=a;1.2*a+4>f;f++)if(+U(d,b,1)>e)return f}function X(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function Y(a){return l(a,/[\x00-\x1f'"\u2028\u2029]/g,X)}function Z(a,b){return a.split(b)}function $(a,b){function c(a,c){var d=[];return e.call(c||a,a,function(a,b){fa(a)?p(a,function(a,c){b.call(a,a,c)}):o(a,function(a,c){b.call(c,a,c)})},b||j,function(){N(d.push,d,arguments)},wa),d.join("")}if(Ma[a])return Ma[a];var d="with(_.isObject(obj)?obj:{}){"+v(Z(a,/{{|}}}?/g),function(a,b){var c,d=n(a),e=l(d,/^{/),d=d==e?"esc(":"";return b%2?(c=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(e))?"each("+(n(c[4])?c[4]:"this")+", function("+c[2]+"){":(c=/^if\b(.*)/.exec(e))?"if("+c[1]+"){":(c=/^else\b\s*(if\b(.*))?/.exec(e))?"}else "+(c[1]?"if("+c[2]+")":"")+"{":(c=/^\/(if)?/.exec(e))?c[1]?"}\n":"});\n":(c=/^(var\s.*)/.exec(e))?c[1]+";":(c=/^#(.*)/.exec(e))?c[1]:(c=/(.*)::\s*(.*)/.exec(e))?"print("+d+'_.formatValue("'+Y(c[2])+'",'+(n(c[1])?c[1]:"this")+(d&&")")+"));\n":"print("+d+(n(e)?e:"this")+(d&&")")+");\n":a?'print("'+Y(a)+'");\n':void 0}).join("")+"}",e=Function("obj","each","esc","print","_",d);return 99<Na.push(c)&&delete Ma[Na.shift()],Ma[a]=c}function _(a){return l(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function aa(a,b){return $(a,_)(b)}function ba(a){return function(b,c){return new va(a(this,b,c))}}function ca(a){return function(b,c,d){return a(this,b,c,d)}}function da(a){return function(b,c,d){return new va(a(b,c,d))}}function ea(a){return"function"==typeof a&&!a.item}function fa(a){return a&&a.length!=Fa&&!c(a)&&!e(a)&&!ea(a)&&a!==ya}function ga(a){return parseFloat(l(a,/^[^\d-]+/))}function ha(a){return a.Nia=a.Nia||++Ba}function ia(a,b){var c,d=[],e={};return sa(a,function(a){sa(b(a),function(a){e[c=ha(a)]||(d.push(a),e[c]=!0)})}),d}function ja(a,b){var c={$position:"absolute",$visibility:"hidden",$display:"block",$height:Fa},d=a.get(c),c=a.set(c).get("clientHeight");return a.set(d),c*b+"px"}function ka(a){Ca?Ca.push(a):setTimeout(a,0)}function la(a,b,c){return pa(a,b,c)[0]}function ma(a,b,c){return a=oa(document.createElement(a)),fa(b)||b!=Fa&&!d(b)?a.add(b):a.set(b).add(c)}function na(a){return r(sa,a,function(a){return fa(a)?na(a):(e(a)&&(a=a.cloneNode(!0),a.removeAttribute&&a.removeAttribute("id")),a)})}function oa(a,b,c){return ea(a)?ka(a):new va(pa(a,b,c))}function pa(a,b,d){function f(a){return fa(a)?r(sa,a,f):a}function g(a){return q(r(sa,a,f),function(a){for(;a=a.parentNode;)if(a==b[0]||d)return a==b[0]})}return b?1!=(b=pa(b)).length?ia(b,function(b){return pa(a,b,d)}):c(a)?1!=e(b[0])?[]:d?g(b[0].querySelectorAll(a)):b[0].querySelectorAll(a):g(a):c(a)?document.querySelectorAll(a):r(sa,a,f)}function qa(a,b){function d(a,b){var c=RegExp("(^|\\s+)"+a+"(?=$|\\s)","i");return function(d){return!a||c.test(d[b])}}var g,h,i={},j=i;return ea(a)?a:f(a)?function(b,c){return c==a}:!a||"*"==a||c(a)&&(j=/^([\w-]*)\.?([\w-]*)$/.exec(a))?(g=d(j[1],"tagName"),h=d(j[2],"className"),function(a){return 1==e(a)&&g(a)&&h(a)}):b?function(c){return oa(a,b).find(c)!=Fa}:(oa(a).each(function(a){i[ha(a)]=!0}),function(a){return i[ha(a)]})}function ra(a){var b=qa(a);return function(a){return!b(a)||Fa}}function sa(a,b){return fa(a)?p(a,b):a!=Fa&&b(a,0),a}function ta(){this.state=null,this.values=[],this.parent=null}function ua(){var a,b,c=[],e=arguments,f=e.length,g=0,h=0,i=new ta;return i.errHandled=function(){h++,i.parent&&i.parent.errHandled()},a=i.fire=function(a,b){return null==i.state&&null!=a&&(i.state=!!a,i.values=fa(b)?b:[b],setTimeout(function(){p(c,function(a){a()})},0)),i},p(e,function b(c,e){try{c.then?c.then(function(c){(d(c)||ea(c))&&ea(c.then)?b(c,e):(i.values[e]=H(arguments),++g==f&&a(!0,2>f?i.values[e]:i.values))},function(){i.values[e]=H(arguments),a(!1,2>f?i.values[e]:[i.values[e][0],i.values,e])}):c(function(){a(!0,H(arguments))},function(){a(!1,H(arguments))})}catch(b){a(!1,[b,i.values,e])}}),i.stop=function(){return p(e,function(a){a.stop&&a.stop()}),i.stop0&&N(i.stop0)},b=i.then=function(a,b){function e(){try{var c=i.state?a:b;ea(c)?function a(b){try{var c,e=0;if((d(b)||ea(b))&&ea(c=b.then)){if(b===f)throw new TypeError;c.call(b,function(b){e++||a(b)},function(a){e++||f.fire(!1,[a])}),f.stop0=b.stop}else f.fire(!0,[b])}catch(a){if(!e++&&(f.fire(!1,[a]),!h))throw a}}(N(c,xa,i.values)):f.fire(i.state,i.values)}catch(a){if(f.fire(!1,[a]),!h)throw a}}var f=ua();return ea(b)&&i.errHandled(),f.stop0=i.stop,f.parent=i,null!=i.state?setTimeout(e,0):c.push(e),f},i.always=function(a){return b(a,a)},i.error=function(a){return b(0,a)},i}function va(a,b){var c,d,e,f,g,h=0;if(a)for(c=0,d=a.length;d>c;c++)if(e=a[c],b&&fa(e))for(f=0,g=e.length;g>f;f++)this[h++]=e[f];else this[h++]=e;else this[h++]=b;this.length=h,this._=!0}function wa(){return new va(arguments,!0)}var xa,ya=window,za={},Aa={},Ba=1,Ca=/^[ic]/.test(document.readyState)?Fa:[],Da={},Ea=0,Fa=null,Ga=Z("January,February,March,April,May,June,July,August,September,October,November,December",/,/g),Ha=v(Ga,a),Ia=Z("Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",/,/g),Ja=v(Ia,a),Ka={y:["FullYear",j],Y:["FullYear",function(a){return a%100}],M:["Month",k],n:["Month",Ha],N:["Month",Ga],d:["Date",j],m:["Minutes",j],H:["Hours",j],h:["Hours",function(a){return a%12||12}],k:["Hours",k],K:["Hours",function(a){return a%12}],s:["Seconds",j],S:["Milliseconds",j],a:["Hours",Z("am,am,am,am,am,am,am,am,am,am,am,am,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm",/,/g)],w:["Day",Ja],W:["Day",Ia],z:["TimezoneOffset",function(a,b,c){return c?c:(b=0>a?-a:a,(a>0?"-":"+")+Q(2,Math.floor(b/60))+Q(2,b%60))}]},La={y:0,Y:[0,-2e3],M:[1,1],n:[1,Ha],N:[1,Ga],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,Z("am,pm",/,/g)]},Ma={},Na=[];return A({each:ca(p),filter:ba(q),collect:ba(s),map:ba(v),toObject:ca(z),equals:ca(M),sub:ba(G),reverse:ca(y),find:ca(E),findLast:ca(F),startsWith:ca(w),endsWith:ca(x),contains:ca(L),call:ba(O),array:ca(H),unite:ca(I),merge:ca(B),uniq:ba(J),intersection:ba(K),join:function(a){return v(this,j).join(a)},reduce:function(a,b){return p(this,function(c,d){b=a.call(this,b,c,d)}),b},sort:function(a){return new va(v(this,j).sort(a))},remove:function(){sa(this,function(a){a.parentNode.removeChild(a)})},text:function(){return r(sa,this,function(a){return a.textContent}).join("")},trav:function(a,b,c){var d=f(b),e=qa(d?Fa:b),g=d?b:c;return new va(ia(this,function(b){for(var c=[];(b=b[a])&&c.length!=g;)e(b)&&c.push(b);return c}))},next:function(a,b){return this.trav("nextSibling",a,b||1)},up:function(a,b){return this.trav("parentNode",a,b||1)},select:function(a,b){return oa(a,this,b)},is:function(a){return!this.find(ra(a))},only:function(a){return new va(q(this,qa(a)))},not:function(a){return new va(q(this,ra(a)))},get:function(a,b){var d,e,f,g,h=this,i=h[0];return i?c(a)?(d=/^(\W*)(.*)/.exec(l(a,/^%/,"@data-")),e=d[1],f=Aa[e]?Aa[e](this,d[2]):"$"==a?h.get("className"):"$$"==a?h.get("@style"):"$$slide"==a?h.get("$height"):"$$fade"==a||"$$show"==a?"hidden"==h.get("$visibility")||"none"==h.get("$display")?0:"$$fade"==a?isNaN(h.get("$opacity",!0))?1:h.get("$opacity",!0):1:"$"==e?ya.getComputedStyle(i,Fa).getPropertyValue(l(d[2],/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):"@"==e?i.getAttribute(d[2]):i[d[2]],b?ga(f):f):(g={},(fa(a)?sa:o)(a,function(a){g[a]=h.get(a,b)}),g):void 0},set:function(a,b){var d,e,f=this;return b!==xa?(d=/^(\W*)(.*)/.exec(l(l(a,/^\$float$/,"cssFloat"),/^%/,"@data-")),e=d[1],za[e]?za[e](this,d[2],b):"$$fade"==a?this.set({$visibility:b?"visible":"hidden",$opacity:b}):"$$slide"==a?f.set({$visibility:b?"visible":"hidden",$overflow:"hidden",$height:/px/.test(b)?b:function(a,c,d){return ja(oa(d),b)}}):"$$show"==a?b?f.set({$visibility:b?"visible":"hidden",$display:""}).set({$display:function(a){return"none"==a?"block":a}}):f.set({$display:"none"}):"$$"==a?f.set("@style",b):sa(this,function(c,f){var g=ea(b)?b(oa(c).get(a),f,c):b;"$"==e?d[2]?c.style[d[2]]=g:sa(g&&g.split(/\s+/),function(a){var b=l(a,/^[+-]/),d=c.className||"",e=l(d,RegExp("(^|\\s+)"+b+"(?=$|\\s)"));(/^\+/.test(a)||b==a&&d==e)&&(e+=" "+b),c.className=n(e)}):"$$scrollX"==a?c.scroll(g,oa(c).get("$$scrollY")):"$$scrollY"==a?c.scroll(oa(c).get("$$scrollX"),g):"@"==e?g==Fa?c.removeAttribute(d[2]):c.setAttribute(d[2],g):c[d[2]]=g})):c(a)||ea(a)?f.set("$",a):o(a,function(a,b){f.set(a,b)}),f},show:function(){return this.set("$$show",1)},hide:function(){return this.set("$$show",0)},add:function(a,b){return this.each(function(c,d){function f(a){fa(a)?sa(a,f):ea(a)?f(a(c,d)):a!=Fa&&(a=e(a)?a:document.createTextNode(a),g?g.parentNode.insertBefore(a,g.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),g=a)}var g;f(d&&!ea(a)?na(a):a)})},fill:function(a){return this.each(function(a){oa(a.childNodes).remove()}).add(a)},addAfter:function(a){return this.add(a,function(a,b,c){c.insertBefore(a,b.nextSibling)})},addBefore:function(a){return this.add(a,function(a,b,c){c.insertBefore(a,b)})},addFront:function(a){return this.add(a,function(a,b){b.insertBefore(a,b.firstChild)})},replace:function(a){return this.add(a,function(a,b,c){c.replaceChild(a,b)})},clone:ba(na),animate:function(a,b,c){var d,e=ua(),f=this,g=r(sa,this,function(b,d){var e,f=oa(b),g={};return o(e=f.get(a),function(c,e){var h=a[c];g[c]=ea(h)?h(e,d,b):"$$slide"==c?ja(f,h):h}),f.dial(e,g,c)}),h=b||500;return e.stop0=function(){return e.fire(!1),d()},d=oa.loop(function(a){O(g,[a/h]),a>=h&&(d(),e.fire(!0,[f]))}),e},dial:function(a,c,d){function e(a,b){return/^#/.test(a)?parseInt(6<a.length?a.substr(2*b+1,2):(a=a.charAt(b+1))+a,16):ga(a.split(",")[b])}var f=this,g=d||0,h=ea(g)?g:function(a,b,c){return c*(b-a)*(g+(1-g)*c*(3-2*c))+a};return function(d){o(a,function(a,g){var i=c[a],j=0;f.set(a,0>=d?g:d>=1?i:/^#|rgb\(/.test(i)?"rgb("+Math.round(h(e(g,j),e(i,j++),d))+","+Math.round(h(e(g,j),e(i,j++),d))+","+Math.round(h(e(g,j),e(i,j++),d))+")":l(i,/-?[\d.]+/,b(h(ga(g),ga(i),d))))})}},toggle:function(a,b,c,d){var e,f,g=this,h=!1;return b?(g.set(a),function(i){i!==h&&(f=(h=!0===i||!1===i?i:!h)?b:a,c?(e=g.animate(f,e?e.stop():c,d)).then(function(){e=Fa}):g.set(f))}):g.toggle(l(a,/\b(?=\w)/g,"-"),l(a,/\b(?=\w)/g,"+"))},values:function(a){var c=a||{};return this.each(function(a){var d=a.name||a.id,e=b(a.value);if(/form/i.test(a.tagName))for(d=0;d<a.elements.length;d++)oa(a.elements[d]).values(c);else!d||/ox|io/i.test(a.type)&&!a.checked||(c[d]=c[d]==Fa?e:r(sa,[c[d],e],j))}),c},offset:function(){for(var a=this[0],b={x:0,y:0};a;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b},on:function(a,d,e,f,g){return ea(d)?this.on(Fa,a,d,e,f):c(f)?this.on(a,d,e,Fa,f):this.each(function(c,h){sa(a?pa(a,c):c,function(a){sa(b(d).split(/\s/),function(b){function c(b,c,d){var j,l=!g;if(d=g?d:a,g)for(j=qa(g,a);d&&d!=a&&!(l=j(d));)d=d.parentNode;return!l||i!=b||e.apply(oa(d),f||[c,h])&&"?"==k||"|"==k}function d(a){c(i,a,a.target)||(a.preventDefault(),a.stopPropagation())}var i=l(b,/[?|]/g),k=l(b,/[^?|]/g),m=("blur"==i||"focus"==i)&&!!g,n=Ba++;a.addEventListener(i,d,m),a.M||(a.M={}),a.M[n]=c,e.M=r(sa,[e.M,function(){a.removeEventListener(i,d,m),delete a.M[n]}],j)})})})},onOver:function(a,b){var c=this,d=[];return ea(b)?this.on(a,"|mouseover |mouseout",function(a,e){var f=a.relatedTarget||a.toElement,g="mouseout"!=a.type;d[e]===g||!g&&f&&(f==c[e]||oa(f).up(c[e]).length)||(d[e]=g,b.call(this,g,a))}):this.onOver(Fa,a)},onFocus:function(a,b,c){return ea(b)?this.on(a,"|blur",b,[!1],c).on(a,"|focus",b,[!0],c):this.onFocus(Fa,a,b)},onChange:function(a,b,c){return ea(b)?this.on(a,"|input |change |click",function(a,c){var d=this[0],e=/ox|io/i.test(d.type)?d.checked:d.value;d.NiaP!=e&&b.call(this,d.NiaP=e,c)},c):this.onChange(Fa,a,b)},onClick:function(a,b,c,d){return ea(b)?this.on(a,"click",b,c,d):this.onClick(Fa,a,b,c)},trigger:function(a,b){return this.each(function(c){for(var d=!0,e=c;e&&d;)o(e.M,function(e,f){d=d&&f(a,b,c)}),e=e.parentNode})},per:function(a,b){if(ea(a))for(var c=this.length,d=0;c>d;d++)a.call(this,new va(Fa,this[d]),d);else oa(a,this).per(b);return this},ht:function(a,b){var c=2<arguments.length?B(G(arguments,1)):b;return this.set("innerHTML",ea(a)?a(c):/{{/.test(a)?aa(a,c):/^#\S+$/.test(a)?aa(la(a).text,c):a)}},va.prototype),A({request:function(a,c,d,e){e=e||{};var f,g=0,h=ua(),i=d&&d.constructor==e.constructor;try{h.xhr=f=new XMLHttpRequest,h.stop0=function(){f.abort()},i&&(d=r(o,d,function(a,b){return r(sa,b,function(b){return encodeURIComponent(a)+(b!=Fa?"="+encodeURIComponent(b):"")})}).join("&")),d==Fa||/post/i.test(a)||(c+="?"+d,d=Fa),f.open(a,c,!0,e.user,e.pass),i&&/post/i.test(a)&&f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o(e.headers,function(a,b){f.setRequestHeader(a,b)}),o(e.xhr,function(a,b){f[a]=b}),f.onreadystatechange=function(){4!=f.readyState||g++||(200<=f.status&&300>f.status?h.fire(!0,[f.responseText,f]):h.fire(!1,[f.status,f.responseText,f]))},f.send(d)}catch(a){g||h.fire(!1,[0,Fa,b(a)])}return h},toJSON:JSON.stringify,parseJSON:JSON.parse,ready:ka,loop:function(a){function b(a){o(Da,function(b,c){c(a)}),Ea&&g(b)}function c(){return Da[f]&&(delete Da[f],Ea--),e}var d,e=0,f=Ba++,g=ya.requestAnimationFrame||function(a){setTimeout(function(){a(+new Date)},33)};return Da[f]=function(b){d=d||b,a(e=b-d,c)},Ea++||g(b),c},off:function(a){O(a.M),a.M=Fa},setCookie:function(a,b,c,e){document.cookie=a+"="+(e?b:escape(b))+(c?"; expires="+(d(c)?c:new Date(+new Date+864e5*c)).toUTCString():"")},getCookie:function(a,b){var c,d=(c=RegExp("(^|;)\\s*"+a+"=([^;]*)").exec(document.cookie))&&c[2];return b?d:d&&unescape(d)},wait:function(a,b){var c=ua(),d=setTimeout(function(){c.fire(!0,b)},a);return c.stop0=function(){c.fire(!1),clearTimeout(d)},c}},oa),A({filter:da(q),collect:da(s),map:da(v),sub:da(G),reverse:y,each:p,toObject:z,find:E,findLast:F,contains:L,startsWith:w,endsWith:x,equals:M,call:da(O),array:H,unite:I,merge:B,uniq:da(J),intersection:da(K),keys:da(u),values:da(function(a,b){var c=[];return b?p(b,function(b){c.push(a[b])}):o(a,function(a,b){c.push(b)}),c}),copyObj:A,extend:function(a){return B(G(arguments,1),a)},range:function(a,b){for(var c=[],d=b==Fa?a:b,e=b!=Fa?a:0;d>e;e++)c.push(e);return new va(c)},bind:P,partial:function(a,b,c){return P(a,this,b,c)},eachObj:o,mapObj:function(a,b,c){var d={};return o(a,function(e,f){d[e]=b.call(c||a,e,f)}),d},filterObj:function(a,b,c){var d={};return o(a,function(e,f){b.call(c||a,e,f)&&(d[e]=f)}),d},isList:fa,isFunction:ea,isObject:d,isNumber:f,isBool:h,isDate:g,isValue:i,isString:c,toString:b,dateClone:T,dateAdd:V,dateDiff:W,dateMidnight:function(a){return a=a||new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate())},pad:Q,formatValue:function(a,d){var e,h,i=l(a,/^\?/);return g(d)?((h=/^\[(([+-])(\d\d)(\d\d))\]\s*(.*)/.exec(i))&&(e=h[1],d=V(d,"minutes",S(h,2,d)),i=h[5]),l(i,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(a,b,f,g){return(b=Ka[b])&&(a=d["get"+b[0]](),g=g&&g.split(","),a=fa(b[1])?(g||b[1])[a]:b[1](a,g,e),a==Fa||c(a)||(a=Q(f.length+1,a))),a})):E(i.split(/\s*\|\s*/),function(a){var c,e;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){if(a=d,e=+c[3],(isNaN(e)||!f(a))&&(a=a==Fa?"null":b(a),e=c[3]),c[1]){if(!c[2]&&a==e||"<"==c[1]&&a>e||">"==c[1]&&e>a)return Fa}else if(a!=e)return Fa;c=c[4]}else c=a;return f(d)?c.replace(/[0#](.*[0#])?/,function(a){var b,c=/^([^.]+)(\.)([^.]+)$/.exec(a)||/^([^,]+)(,)([^,]+)$/.exec(a),e=0>d?"-":"",f=/(\d+)(\.(\d+))?/.exec((e?-d:d).toFixed(c?c[3].length:0));return a=c?c[1]:a,b=c?R(c[3],l(f[3],/0+$/),!0):"",(e?"-":"")+("#"==a?f[1]:R(a,f[1]))+(b.length?c[2]:"")+b}):c})},parseDate:function(a,b){var c,d,e,f,g,h,i,j,k,o={},p=1,q=l(a,/^\?/);if(q!=a&&!n(b))return Fa;if((e=/^\[([+-])(\d\d)(\d\d)\]\s*(.*)/.exec(q))&&(c=e,q=e[4]),!(e=RegExp(q.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,e){return/[dmhkyhs]/i.test(b)?(o[p++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(d=p,p+=3,"([+-])(\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(o[p++]=[b,e&&e.split(",")],"([a-zA-Z\\u0080-\\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\\u0080-\\u1fff]+":/\s/.test(b)?"\\s+":m(a)})).exec(b)))return xa;for(q=[0,0,0,0,0,0,0],f=1;p>f;f++)if(g=e[f],h=o[f],fa(h)){if(i=h[0],j=La[i],k=j[0],h=E(h[1]||j[1],function(a,b){return w(g.toLowerCase(),a.toLowerCase())?b:void 0}),h==Fa)return xa;q[k]="a"==i?q[k]+12*h:h}else h&&(i=parseFloat(g),j=La[h],fa(j)?q[j[0]]+=i-j[1]:q[j]+=i);return q=new Date(q[0],q[1],q[2],q[3],q[4],q[5],q[6]),V(q,"minutes",-S(c,1,q)-S(e,d,q))},parseNumber:function(a,b){var c=l(a,/^\?/);return c==a||n(b)?(c=/(^|[^0#.,])(,|[0#.]*,[0#]+|[0#]+\.[0#]+\.[0#.,]*)($|[^0#.,])/.test(c)?",":".",c=parseFloat(l(l(l(b,","==c?/\./g:/,/g),c,"."),/^[^\d-]*(-?\d)/,"$1")),isNaN(c)?xa:c):Fa},trim:n,isEmpty:function(a,b){return a==Fa||!a.length||b&&/^\s*$/.test(a)},escapeRegExp:m,escapeHtml:_,format:function(a,b,c){return $(a,c)(b)},template:$,formatHtml:aa,promise:ua},wa),document.addEventListener("DOMContentLoaded",function(){O(Ca),Ca=Fa},!1),{HTML:function(){var a=ma("div");return wa(N(a.ht,a,arguments)[0].childNodes)},_:wa,$:oa,$$:la,EE:ma,M:va,getter:Aa,setter:za}})&&b("minified",["145"],function(a){return a})}(),function(){var b=a.amdDefine;b("54",["145"],function(a){return a})}(),a.registerDynamic("146",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){}(this),e()}),a.register("1",["7","18","45","47","48","54","144","146","f","aa","4a","4b","4d","4e","6f","6e","a7","13c","13d","13e","13f"],function(a){"use strict";function b(){var a=!0,b=!1,c=void 0;try{for(var d,e=function(){var a=d.value;"1"===a.style.opacity?setTimeout(function(){return a.style.display="none"},3500):a.style.display="block",setTimeout(function(){
return a.style.opacity="1"===a.style.opacity?"0":"1"},100)},f=document.querySelectorAll(".snow")[Symbol.iterator]();!(a=(d=f.next()).done);a=!0)e()}catch(a){b=!0,c=a}finally{try{!a&&f.return&&f.return()}finally{if(b)throw c}}}function c(a){if(window.location.hash){var b=window.location.hash.substr(1),c=d(b);if(c.url&&(c.url.toLowerCase().startsWith("http://")||c.url.toLowerCase().startsWith("https://"))&&w.catalogue.url!==c.url&&(x=c.url,a||w.catalogue.loadFromDCAT(x)),c.map){var e=c.map.split("/").map(parseFloat),f=babelHelpers.slicedToArray(e,3),g=f[0],h=f[1],i=f[2];o.setView([h,i],g)}}}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return{setters:[function(a){},function(a){},function(a){},function(a){d=a.stringQs},function(a){},function(a){e=a.$,f=a.HTML},function(a){},function(a){},function(a){},function(a){},function(a){g=a.default},function(a){},function(a){},function(a){},function(a){h=a.DraggableValuePopup},function(a){i=a.i18n,j=a.DefaultMap,k=a.MELODIES_DCAT_CATALOG_URL},function(a){l=a.default},function(a){m=a.default},function(a){},function(a){},function(a){}],execute:function(){e("body").add(f('\n  <div id="snow1" class="snow"></div>\n  <div id="snow2" class="snow"></div>\n  <div id="snow3" class="snow"></div>\n')),document.getElementById("map").addEventListener("keypress",function(a){"s"==String.fromCharCode(a.charCode)&&b()},!1),n=(new Date).getFullYear(),new Date(n+"-12-22")<=new Date&&new Date<=new Date(n+"-01-03")&&b(),o=g.map("map",{loadingControl:!0,center:[10,0],zoom:2}),p={"Hydda.Base":"Hydda",OpenStreetMap:"OpenStreetMap","OpenStreetMap.BlackAndWhite":"OpenStreetMap (B/W)",OpenTopoMap:"OpenTopoMap","Esri.WorldImagery":"Esri WorldImagery"},q={};for(r in p)s=g.tileLayer.provider(r),q[p[r]]=s;q[p["Esri.WorldImagery"]].addTo(o),t=[{groupName:"Base Maps",expanded:!0,layers:q}],u=g.Control.styledLayerControl(t,[],{container_width:"300px",container_maxHeight:"500px",collapsed:!1}),o.addControl(u),v=function(){function a(b){babelHelpers.classCallCheck(this,a),this._control=b,this._groups=new j(function(){return[]}),this._layers=new Map}return babelHelpers.createClass(a,[{key:"addOverlay",value:function(a,b,c){var d=c.groupName;this._groups.get(d).push({layer:a,name:b}),this._layers.set(a,d),this._control.addOverlay(a,b,c)}},{key:"removeLayer",value:function(a){this._control.removeLayer(a);var b=this._layers.get(a);this._layers.delete(a);var c=this._groups.get(b),d=c.filter(function(b){return b.layer!==a});this._groups.set(b,d),0===d.length&&(this._control.removeGroup(b),this._groups.delete(b))}},{key:"renameGroup",value:function(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=this._groups.get(a).slice()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=h.layer,j=h.name;this.removeLayer(i),this.addOverlay(i,j,{groupName:b,expanded:!0})}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}},{key:"getLayers",value:function(){return[].concat(babelHelpers.toConsumableArray(this._layers.keys()))}}]),a}(),o.layerControl=new v(u),o.on("singleclick",function(a){var b=o.layerControl.getLayers();b=b.filter(function(a){return o.hasLayer(a)}),new h({layers:b}).setLatLng(a.latlng).openOn(o)}),w=new l(o),w.on("dataLoading",function(){return o.fire("dataloading")}),w.on("dataLoad",function(){return o.fire("dataload")}),w.workspace.on("titleChange",function(a){var b=a.oldTitle,c=a.newTitle;o.layerControl.renameGroup(i(b),i(c))}),x=void 0,c(!0),window.addEventListener("hashchange",function(){return c(!1)},!1),x||(x=k),y=new m(o,{app:w,layerControl:u}),w.catalogue.loadFromDCAT(x).then(function(){y.open(y.panes.Search)}).catch(function(){y.open(y.panes.Search)}),window.api={map:o}}}}),function(a){if("undefined"!=typeof document){var b=document,c="appendChild",d=b.createElement("style");d.type="text/css",b.getElementsByTagName("head")[0][c](d),d[c](b.createTextNode(a))}}('.leaflet-image-layer,.leaflet-layer,.leaflet-map-pane canvas,.leaflet-map-pane svg,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane,.leaflet-tile,.leaflet-tile-container,.leaflet-zoom-box{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-overlay-pane svg,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer{max-width:none!important}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-drag{-ms-touch-action:none;touch-action:none}.leaflet-tile{-webkit-filter:inherit;filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;box-sizing:border-box;z-index:15}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:10}.leaflet-tile-pane{z-index:9}.leaflet-overlay-pane{z-index:10}.leaflet-shadow-pane{z-index:11}.leaflet-marker-pane{z-index:12}.leaflet-tooltip-pane{z-index:13}.leaflet-popup-pane{z-index:14}.leaflet-map-pane canvas{z-index:8}.leaflet-map-pane svg{z-index:9}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(jspm_packages/npm/leaflet@1.0.1/dist/#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:15;pointer-events:visiblePainted;pointer-events:auto}.leaflet-bottom,.leaflet-top{position:absolute;z-index:17;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-tile{will-change:opacity}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;transform-origin:0 0}.leaflet-zoom-anim .leaflet-zoom-animated{will-change:transform;-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1),-webkit-transform .25s cubic-bezier(0,0,.25,1)}.leaflet-pan-anim .leaflet-tile,.leaflet-zoom-anim .leaflet-tile{-webkit-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-control,.leaflet-popup-pane{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing}.leaflet-image-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-image-layer.leaflet-interactive,.leaflet-marker-icon.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline:0}.leaflet-container a{color:#0078a8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{border:2px dotted #38f;background:hsla(0,0%,100%,.5)}.leaflet-container{font:12px/1.5 Helvetica Neue,Arial,Helvetica,sans-serif}.leaflet-bar{box-shadow:0 1px 5px rgba(0,0,0,.65);border-radius:4px}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-control-zoom-out{font-size:20px}.leaflet-touch .leaflet-control-zoom-in{font-size:22px}.leaflet-touch .leaflet-control-zoom-out{font-size:24px}.leaflet-control-layers{box-shadow:0 1px 5px rgba(0,0,0,.4);background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(jspm_packages/npm/leaflet@1.0.1/dist/images/layers.png);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(jspm_packages/npm/leaflet@1.0.1/dist/images/layers-2x.png);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers-expanded .leaflet-control-layers-toggle,.leaflet-control-layers .leaflet-control-layers-list{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(jspm_packages/npm/leaflet@1.0.1/dist/images/marker-icon.png)}.leaflet-container .leaflet-control-attribution{background:#fff;background:hsla(0,0%,100%,.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;font-size:11px;white-space:nowrap;overflow:hidden;box-sizing:border-box;background:#fff;background:hsla(0,0%,100%,.5)}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-layers{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 19px;line-height:1.4}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;color:#333;box-shadow:0 3px 14px rgba(0,0,0,.4)}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;padding:4px 4px 0 0;border:none;text-align:center;width:18px;height:14px;font:16px/14px Tahoma,Verdana,sans-serif;color:#c3c3c3;text-decoration:none;font-weight:700;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-scrolled{overflow:auto;border-bottom:1px solid #ddd;border-top:1px solid #ddd}.leaflet-oldie .leaflet-popup-content-wrapper{zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678,M12=0.70710678,M21=-0.70710678,M22=0.70710678)}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px rgba(0,0,0,.4)}.leaflet-tooltip.leaflet-clickable{cursor:pointer;pointer-events:auto}.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before,.leaflet-tooltip-top:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}.leaflet-control-loading:empty{background-image:url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAAKAAEALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQACgACACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQACgADACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkEAAoABAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkEAAoABQAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkEAAoABgAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAAKAAcALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkEAAoACAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAAKAAkALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQACgAKACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQACgALACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==);background-repeat:no-repeat}.leaflet-control-loading,.leaflet-control-zoom a.leaflet-control-loading,.leaflet-control-zoomslider a.leaflet-control-loading{display:none}.leaflet-control-loading.is-loading,.leaflet-control-zoom a.leaflet-control-loading.is-loading,.leaflet-control-zoomslider a.leaflet-control-loading.is-loading{display:block}.leaflet-bar-part-bottom{border-bottom:medium none;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.leaflet-coverage-control{padding:6px 8px;background:hsla(0,0%,100%,.8);box-shadow:0 0 15px rgba(0,0,0,.2);border-radius:5px}.leaflet-coverage-control.legend{color:#555}.leaflet-coverage-control.legend .legend-title-container{max-width:120px}.leaflet-coverage-control.legend .legend-title{word-wrap:break-word}.leaflet-coverage-control.discrete-legend .discrete-legend-palette{padding:2px 1px;line-height:18px}.leaflet-coverage-control.discrete-legend .discrete-legend-palette i{float:left;height:18px;margin-right:8px;width:18px}.leaflet-popup-draggable .leaflet-popup-content-wrapper{cursor:move}.jsplumb-connector{z-index:24}.jsplumb-endpoint{z-index:25}.jsplumb-overlay{z-index:26}.main-remapper{position:fixed;width:100%;height:100%;left:0;top:0;z-index:17}.remap-froms,.remap-tos{position:absolute;top:0;left:0;width:250px;height:100%;background-color:rgba(150,220,255,.8);color:#000;text-align:right}.remap-tos{left:auto;right:0;width:250px;overflow:hidden;color:#000;text-align:left}.centrecontent{opacity:.8;height:100%;background:#fff;vertical-align:bottom}.buttonholder,.centrecontent{position:absolute;bottom:0;left:250px;right:250px;text-align:center}.buttonholder{background-color:hsla(0,0%,100%,0)}.cancel-remap-button,.remap-button{font-size:20pt;padding:20px;margin:20px}.map-from,.map-to{margin:2px;border-style:solid;border-width:thin;font-family:sans-serif;background-color:#00d2ff}.map-from{padding-right:10px}.map-to{padding-left:10px}.c3 svg{font:10px sans-serif;-webkit-tap-highlight-color:transparent}.c3 line,.c3 path{fill:none;stroke:#000}.c3 text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.c3-bars path,.c3-event-rect,.c3-legend-item-tile,.c3-xgrid-focus,.c3-ygrid{shape-rendering:crispEdges}.c3-chart-arc path{stroke:#fff}.c3-chart-arc text{fill:#fff;font-size:13px}.c3-grid line{stroke:#aaa}.c3-grid text{fill:#aaa}.c3-xgrid,.c3-ygrid{stroke-dasharray:3 3}.c3-text.c3-empty{fill:gray;font-size:2em}.c3-line{stroke-width:1px}.c3-circle._expanded_{stroke-width:1px;stroke:#fff}.c3-selected-circle{fill:#fff;stroke-width:2px}.c3-bar{stroke-width:0}.c3-bar._expanded_{fill-opacity:.75}.c3-target.c3-focused{opacity:1}.c3-target.c3-focused path.c3-line,.c3-target.c3-focused path.c3-step{stroke-width:2px}.c3-target.c3-defocused{opacity:.3!important}.c3-region{fill:#4682b4;fill-opacity:.1}.c3-brush .extent{fill-opacity:.1}.c3-legend-item{font-size:12px}.c3-legend-item-hidden{opacity:.15}.c3-legend-background{opacity:.75;fill:#fff;stroke:#d3d3d3;stroke-width:1}.c3-title{font:14px sans-serif}.c3-tooltip-container{z-index:5}.c3-tooltip{border-collapse:collapse;border-spacing:0;background-color:#fff;empty-cells:show;box-shadow:7px 7px 12px -9px #777;opacity:.9}.c3-tooltip tr{border:1px solid #ccc}.c3-tooltip th{background-color:#aaa;font-size:14px;padding:2px 5px;text-align:left;color:#fff}.c3-tooltip td{font-size:13px;padding:3px 6px;background-color:#fff;border-left:1px dotted #999}.c3-tooltip td>span{display:inline-block;width:10px;height:10px;margin-right:6px}.c3-tooltip td.value{text-align:right}.c3-area{stroke-width:0;opacity:.2}.c3-chart-arcs-title{dominant-baseline:middle;font-size:1.3em}.c3-chart-arcs .c3-chart-arcs-background{fill:#e0e0e0;stroke:none}.c3-chart-arcs .c3-chart-arcs-gauge-unit{fill:#000;font-size:16px}.c3-chart-arcs .c3-chart-arcs-gauge-max,.c3-chart-arcs .c3-chart-arcs-gauge-min{fill:#777}.c3-chart-arc .c3-gauge-value{fill:#000}.sidebar{position:absolute;top:0;bottom:0;width:100%;overflow:hidden;z-index:23}.sidebar.collapsed{width:40px}@media (min-width:768px){.sidebar{top:10px;bottom:10px;-webkit-transition:width .5s;transition:width .5s}}@media (min-width:768px) and (max-width:991px){.sidebar{width:305px}}@media (min-width:992px) and (max-width:1199px){.sidebar{width:390px}}@media (min-width:1200px){.sidebar{width:460px}}.sidebar-left{left:0}@media (min-width:768px){.sidebar-left{left:10px}}.sidebar-right{right:0}@media (min-width:768px){.sidebar-right{right:10px}}.sidebar-tabs{top:0;bottom:0;height:100%;background-color:#fff}.sidebar-left .sidebar-tabs{left:0}.sidebar-right .sidebar-tabs{right:0}.sidebar-tabs,.sidebar-tabs>ul{position:absolute;width:40px;margin:0;padding:0}.sidebar-tabs>li,.sidebar-tabs>ul>li{width:100%;height:40px;color:#333;font-size:12pt;overflow:hidden;-webkit-transition:all 80ms;transition:all 80ms}.sidebar-tabs>li:hover,.sidebar-tabs>ul>li:hover{color:#000;background-color:#eee}.sidebar-tabs>li.active,.sidebar-tabs>ul>li.active{color:#fff;background-color:#0074d9}.sidebar-tabs>li.disabled,.sidebar-tabs>ul>li.disabled{color:rgba(51,51,51,.4)}.sidebar-tabs>li.disabled:hover,.sidebar-tabs>ul>li.disabled:hover{background:transparent}.sidebar-tabs>li.disabled>a,.sidebar-tabs>ul>li.disabled>a{cursor:default}.sidebar-tabs>li>a,.sidebar-tabs>ul>li>a{display:block;width:100%;height:100%;line-height:40px;color:inherit;text-decoration:none;text-align:center}.sidebar-tabs>ul+ul{bottom:0}.sidebar-content{position:absolute;top:0;bottom:0;background-color:hsla(0,0%,100%,.95);overflow-x:hidden;overflow-y:auto}.sidebar-left .sidebar-content{left:40px;right:0}.sidebar-right .sidebar-content{left:0;right:40px}.sidebar.collapsed>.sidebar-content{overflow-y:hidden}.sidebar-pane{display:none;left:0;right:0;box-sizing:border-box;padding:10px 20px}.sidebar-pane.active{display:block}@media (min-width:768px) and (max-width:991px){.sidebar-pane{min-width:265px}}@media (min-width:992px) and (max-width:1199px){.sidebar-pane{min-width:350px}}@media (min-width:1200px){.sidebar-pane{min-width:420px}}.sidebar-header{margin:-10px -20px 0;height:40px;padding:0 20px;line-height:40px;font-size:14.4pt;color:#fff;background-color:#0074d9}.sidebar-right .sidebar-header{padding-left:40px}.sidebar-close{position:absolute;top:0;width:40px;height:40px;text-align:center;cursor:pointer}.sidebar-left .sidebar-close{right:0}.sidebar-right .sidebar-close{left:0}.sidebar-left~.sidebar-map{margin-left:40px}@media (min-width:768px){.sidebar-left~.sidebar-map{margin-left:0}}.sidebar-right~.sidebar-map{margin-right:40px}@media (min-width:768px){.sidebar-right~.sidebar-map{margin-right:0}}.sidebar{box-shadow:0 1px 5px rgba(0,0,0,.65)}.sidebar.leaflet-touch{box-shadow:none;border-right:2px solid rgba(0,0,0,.2)}@media (min-width:768px){.sidebar{border-radius:4px}.sidebar.leaflet-touch{border:2px solid rgba(0,0,0,.2)}}@media (min-width:768px){.sidebar-left~.sidebar-map .leaflet-left{-webkit-transition:left .5s;transition:left .5s}}@media (min-width:768px) and (max-width:991px){.sidebar-left~.sidebar-map .leaflet-left{left:315px}}@media (min-width:992px) and (max-width:1199px){.sidebar-left~.sidebar-map .leaflet-left{left:400px}}@media (min-width:1200px){.sidebar-left~.sidebar-map .leaflet-left{left:470px}}@media (min-width:768px){.sidebar-left.collapsed~.sidebar-map .leaflet-left{left:50px}}@media (min-width:768px){.sidebar-right~.sidebar-map .leaflet-right{-webkit-transition:right .5s;transition:right .5s}}@media (min-width:768px) and (max-width:991px){.sidebar-right~.sidebar-map .leaflet-right{right:315px}}@media (min-width:992px) and (max-width:1199px){.sidebar-right~.sidebar-map .leaflet-right{right:400px}}@media (min-width:1200px){.sidebar-right~.sidebar-map .leaflet-right{right:470px}}@media (min-width:768px){.sidebar-right.collapsed~.sidebar-map .leaflet-right{right:50px}}\r\n\r\n/*!\n * Bootstrap v3.3.6 (http://getbootstrap.com)\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\r\n\r\n/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{margin:.67em 0;font-size:2em}mark{color:#000;background:#ff0}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{height:0;box-sizing:content-box}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{margin:0;font:inherit;color:inherit}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{box-sizing:content-box;-webkit-appearance:textfield}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{padding:.35em .625em .75em;margin:0 2px;border:1px solid silver}legend{padding:0;border:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}\r\n\r\n/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */@media print{*,:after,:before{color:#000!important;text-shadow:none!important;background:transparent!important;box-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="#"]:after,a[href^="javascript:"]:after{content:""}blockquote,pre{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}img{max-width:100%!important}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}.navbar{display:none}.btn>.caret,.dropup>.btn>.caret{border-top-color:#000!important}.label{border:1px solid #000}.table{border-collapse:collapse!important}.table td,.table th{background-color:#fff!important}.table-bordered td,.table-bordered th{border:1px solid #ddd!important}}@font-face{font-family:Glyphicons Halflings;src:url(\'jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.eot\');src:url(\'jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.eot?#iefix\') format(\'embedded-opentype\'),url(\'jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.woff2\') format(\'woff2\'),url(\'jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.woff\') format(\'woff\'),url(\'jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.ttf\') format(\'truetype\'),url(\'jspm_packages/github/twbs/bootstrap@3.3.6/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular\') format(\'svg\')}.glyphicon{position:relative;top:1px;display:inline-block;font-family:Glyphicons Halflings;font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.glyphicon-asterisk:before{content:"\\002a"}.glyphicon-plus:before{content:"\\002b"}.glyphicon-eur:before,.glyphicon-euro:before{content:"\\20ac"}.glyphicon-minus:before{content:"\\2212"}.glyphicon-cloud:before{content:"\\2601"}.glyphicon-envelope:before{content:"\\2709"}.glyphicon-pencil:before{content:"\\270f"}.glyphicon-glass:before{content:"\\e001"}.glyphicon-music:before{content:"\\e002"}.glyphicon-search:before{content:"\\e003"}.glyphicon-heart:before{content:"\\e005"}.glyphicon-star:before{content:"\\e006"}.glyphicon-star-empty:before{content:"\\e007"}.glyphicon-user:before{content:"\\e008"}.glyphicon-film:before{content:"\\e009"}.glyphicon-th-large:before{content:"\\e010"}.glyphicon-th:before{content:"\\e011"}.glyphicon-th-list:before{content:"\\e012"}.glyphicon-ok:before{content:"\\e013"}.glyphicon-remove:before{content:"\\e014"}.glyphicon-zoom-in:before{content:"\\e015"}.glyphicon-zoom-out:before{content:"\\e016"}.glyphicon-off:before{content:"\\e017"}.glyphicon-signal:before{content:"\\e018"}.glyphicon-cog:before{content:"\\e019"}.glyphicon-trash:before{content:"\\e020"}.glyphicon-home:before{content:"\\e021"}.glyphicon-file:before{content:"\\e022"}.glyphicon-time:before{content:"\\e023"}.glyphicon-road:before{content:"\\e024"}.glyphicon-download-alt:before{content:"\\e025"}.glyphicon-download:before{content:"\\e026"}.glyphicon-upload:before{content:"\\e027"}.glyphicon-inbox:before{content:"\\e028"}.glyphicon-play-circle:before{content:"\\e029"}.glyphicon-repeat:before{content:"\\e030"}.glyphicon-refresh:before{content:"\\e031"}.glyphicon-list-alt:before{content:"\\e032"}.glyphicon-lock:before{content:"\\e033"}.glyphicon-flag:before{content:"\\e034"}.glyphicon-headphones:before{content:"\\e035"}.glyphicon-volume-off:before{content:"\\e036"}.glyphicon-volume-down:before{content:"\\e037"}.glyphicon-volume-up:before{content:"\\e038"}.glyphicon-qrcode:before{content:"\\e039"}.glyphicon-barcode:before{content:"\\e040"}.glyphicon-tag:before{content:"\\e041"}.glyphicon-tags:before{content:"\\e042"}.glyphicon-book:before{content:"\\e043"}.glyphicon-bookmark:before{content:"\\e044"}.glyphicon-print:before{content:"\\e045"}.glyphicon-camera:before{content:"\\e046"}.glyphicon-font:before{content:"\\e047"}.glyphicon-bold:before{content:"\\e048"}.glyphicon-italic:before{content:"\\e049"}.glyphicon-text-height:before{content:"\\e050"}.glyphicon-text-width:before{content:"\\e051"}.glyphicon-align-left:before{content:"\\e052"}.glyphicon-align-center:before{content:"\\e053"}.glyphicon-align-right:before{content:"\\e054"}.glyphicon-align-justify:before{content:"\\e055"}.glyphicon-list:before{content:"\\e056"}.glyphicon-indent-left:before{content:"\\e057"}.glyphicon-indent-right:before{content:"\\e058"}.glyphicon-facetime-video:before{content:"\\e059"}.glyphicon-picture:before{content:"\\e060"}.glyphicon-map-marker:before{content:"\\e062"}.glyphicon-adjust:before{content:"\\e063"}.glyphicon-tint:before{content:"\\e064"}.glyphicon-edit:before{content:"\\e065"}.glyphicon-share:before{content:"\\e066"}.glyphicon-check:before{content:"\\e067"}.glyphicon-move:before{content:"\\e068"}.glyphicon-step-backward:before{content:"\\e069"}.glyphicon-fast-backward:before{content:"\\e070"}.glyphicon-backward:before{content:"\\e071"}.glyphicon-play:before{content:"\\e072"}.glyphicon-pause:before{content:"\\e073"}.glyphicon-stop:before{content:"\\e074"}.glyphicon-forward:before{content:"\\e075"}.glyphicon-fast-forward:before{content:"\\e076"}.glyphicon-step-forward:before{content:"\\e077"}.glyphicon-eject:before{content:"\\e078"}.glyphicon-chevron-left:before{content:"\\e079"}.glyphicon-chevron-right:before{content:"\\e080"}.glyphicon-plus-sign:before{content:"\\e081"}.glyphicon-minus-sign:before{content:"\\e082"}.glyphicon-remove-sign:before{content:"\\e083"}.glyphicon-ok-sign:before{content:"\\e084"}.glyphicon-question-sign:before{content:"\\e085"}.glyphicon-info-sign:before{content:"\\e086"}.glyphicon-screenshot:before{content:"\\e087"}.glyphicon-remove-circle:before{content:"\\e088"}.glyphicon-ok-circle:before{content:"\\e089"}.glyphicon-ban-circle:before{content:"\\e090"}.glyphicon-arrow-left:before{content:"\\e091"}.glyphicon-arrow-right:before{content:"\\e092"}.glyphicon-arrow-up:before{content:"\\e093"}.glyphicon-arrow-down:before{content:"\\e094"}.glyphicon-share-alt:before{content:"\\e095"}.glyphicon-resize-full:before{content:"\\e096"}.glyphicon-resize-small:before{content:"\\e097"}.glyphicon-exclamation-sign:before{content:"\\e101"}.glyphicon-gift:before{content:"\\e102"}.glyphicon-leaf:before{content:"\\e103"}.glyphicon-fire:before{content:"\\e104"}.glyphicon-eye-open:before{content:"\\e105"}.glyphicon-eye-close:before{content:"\\e106"}.glyphicon-warning-sign:before{content:"\\e107"}.glyphicon-plane:before{content:"\\e108"}.glyphicon-calendar:before{content:"\\e109"}.glyphicon-random:before{content:"\\e110"}.glyphicon-comment:before{content:"\\e111"}.glyphicon-magnet:before{content:"\\e112"}.glyphicon-chevron-up:before{content:"\\e113"}.glyphicon-chevron-down:before{content:"\\e114"}.glyphicon-retweet:before{content:"\\e115"}.glyphicon-shopping-cart:before{content:"\\e116"}.glyphicon-folder-close:before{content:"\\e117"}.glyphicon-folder-open:before{content:"\\e118"}.glyphicon-resize-vertical:before{content:"\\e119"}.glyphicon-resize-horizontal:before{content:"\\e120"}.glyphicon-hdd:before{content:"\\e121"}.glyphicon-bullhorn:before{content:"\\e122"}.glyphicon-bell:before{content:"\\e123"}.glyphicon-certificate:before{content:"\\e124"}.glyphicon-thumbs-up:before{content:"\\e125"}.glyphicon-thumbs-down:before{content:"\\e126"}.glyphicon-hand-right:before{content:"\\e127"}.glyphicon-hand-left:before{content:"\\e128"}.glyphicon-hand-up:before{content:"\\e129"}.glyphicon-hand-down:before{content:"\\e130"}.glyphicon-circle-arrow-right:before{content:"\\e131"}.glyphicon-circle-arrow-left:before{content:"\\e132"}.glyphicon-circle-arrow-up:before{content:"\\e133"}.glyphicon-circle-arrow-down:before{content:"\\e134"}.glyphicon-globe:before{content:"\\e135"}.glyphicon-wrench:before{content:"\\e136"}.glyphicon-tasks:before{content:"\\e137"}.glyphicon-filter:before{content:"\\e138"}.glyphicon-briefcase:before{content:"\\e139"}.glyphicon-fullscreen:before{content:"\\e140"}.glyphicon-dashboard:before{content:"\\e141"}.glyphicon-paperclip:before{content:"\\e142"}.glyphicon-heart-empty:before{content:"\\e143"}.glyphicon-link:before{content:"\\e144"}.glyphicon-phone:before{content:"\\e145"}.glyphicon-pushpin:before{content:"\\e146"}.glyphicon-usd:before{content:"\\e148"}.glyphicon-gbp:before{content:"\\e149"}.glyphicon-sort:before{content:"\\e150"}.glyphicon-sort-by-alphabet:before{content:"\\e151"}.glyphicon-sort-by-alphabet-alt:before{content:"\\e152"}.glyphicon-sort-by-order:before{content:"\\e153"}.glyphicon-sort-by-order-alt:before{content:"\\e154"}.glyphicon-sort-by-attributes:before{content:"\\e155"}.glyphicon-sort-by-attributes-alt:before{content:"\\e156"}.glyphicon-unchecked:before{content:"\\e157"}.glyphicon-expand:before{content:"\\e158"}.glyphicon-collapse-down:before{content:"\\e159"}.glyphicon-collapse-up:before{content:"\\e160"}.glyphicon-log-in:before{content:"\\e161"}.glyphicon-flash:before{content:"\\e162"}.glyphicon-log-out:before{content:"\\e163"}.glyphicon-new-window:before{content:"\\e164"}.glyphicon-record:before{content:"\\e165"}.glyphicon-save:before{content:"\\e166"}.glyphicon-open:before{content:"\\e167"}.glyphicon-saved:before{content:"\\e168"}.glyphicon-import:before{content:"\\e169"}.glyphicon-export:before{content:"\\e170"}.glyphicon-send:before{content:"\\e171"}.glyphicon-floppy-disk:before{content:"\\e172"}.glyphicon-floppy-saved:before{content:"\\e173"}.glyphicon-floppy-remove:before{content:"\\e174"}.glyphicon-floppy-save:before{content:"\\e175"}.glyphicon-floppy-open:before{content:"\\e176"}.glyphicon-credit-card:before{content:"\\e177"}.glyphicon-transfer:before{content:"\\e178"}.glyphicon-cutlery:before{content:"\\e179"}.glyphicon-header:before{content:"\\e180"}.glyphicon-compressed:before{content:"\\e181"}.glyphicon-earphone:before{content:"\\e182"}.glyphicon-phone-alt:before{content:"\\e183"}.glyphicon-tower:before{content:"\\e184"}.glyphicon-stats:before{content:"\\e185"}.glyphicon-sd-video:before{content:"\\e186"}.glyphicon-hd-video:before{content:"\\e187"}.glyphicon-subtitles:before{content:"\\e188"}.glyphicon-sound-stereo:before{content:"\\e189"}.glyphicon-sound-dolby:before{content:"\\e190"}.glyphicon-sound-5-1:before{content:"\\e191"}.glyphicon-sound-6-1:before{content:"\\e192"}.glyphicon-sound-7-1:before{content:"\\e193"}.glyphicon-copyright-mark:before{content:"\\e194"}.glyphicon-registration-mark:before{content:"\\e195"}.glyphicon-cloud-download:before{content:"\\e197"}.glyphicon-cloud-upload:before{content:"\\e198"}.glyphicon-tree-conifer:before{content:"\\e199"}.glyphicon-tree-deciduous:before{content:"\\e200"}.glyphicon-cd:before{content:"\\e201"}.glyphicon-save-file:before{content:"\\e202"}.glyphicon-open-file:before{content:"\\e203"}.glyphicon-level-up:before{content:"\\e204"}.glyphicon-copy:before{content:"\\e205"}.glyphicon-paste:before{content:"\\e206"}.glyphicon-alert:before{content:"\\e209"}.glyphicon-equalizer:before{content:"\\e210"}.glyphicon-king:before{content:"\\e211"}.glyphicon-queen:before{content:"\\e212"}.glyphicon-pawn:before{content:"\\e213"}.glyphicon-bishop:before{content:"\\e214"}.glyphicon-knight:before{content:"\\e215"}.glyphicon-baby-formula:before{content:"\\e216"}.glyphicon-tent:before{content:"\\26fa"}.glyphicon-blackboard:before{content:"\\e218"}.glyphicon-bed:before{content:"\\e219"}.glyphicon-apple:before{content:"\\f8ff"}.glyphicon-erase:before{content:"\\e221"}.glyphicon-hourglass:before{content:"\\231b"}.glyphicon-lamp:before{content:"\\e223"}.glyphicon-duplicate:before{content:"\\e224"}.glyphicon-piggy-bank:before{content:"\\e225"}.glyphicon-scissors:before{content:"\\e226"}.glyphicon-bitcoin:before,.glyphicon-btc:before,.glyphicon-xbt:before{content:"\\e227"}.glyphicon-jpy:before,.glyphicon-yen:before{content:"\\00a5"}.glyphicon-rub:before,.glyphicon-ruble:before{content:"\\20bd"}.glyphicon-scale:before{content:"\\e230"}.glyphicon-ice-lolly:before{content:"\\e231"}.glyphicon-ice-lolly-tasted:before{content:"\\e232"}.glyphicon-education:before{content:"\\e233"}.glyphicon-option-horizontal:before{content:"\\e234"}.glyphicon-option-vertical:before{content:"\\e235"}.glyphicon-menu-hamburger:before{content:"\\e236"}.glyphicon-modal-window:before{content:"\\e237"}.glyphicon-oil:before{content:"\\e238"}.glyphicon-grain:before{content:"\\e239"}.glyphicon-sunglasses:before{content:"\\e240"}.glyphicon-text-size:before{content:"\\e241"}.glyphicon-text-color:before{content:"\\e242"}.glyphicon-text-background:before{content:"\\e243"}.glyphicon-object-align-top:before{content:"\\e244"}.glyphicon-object-align-bottom:before{content:"\\e245"}.glyphicon-object-align-horizontal:before{content:"\\e246"}.glyphicon-object-align-left:before{content:"\\e247"}.glyphicon-object-align-vertical:before{content:"\\e248"}.glyphicon-object-align-right:before{content:"\\e249"}.glyphicon-triangle-right:before{content:"\\e250"}.glyphicon-triangle-left:before{content:"\\e251"}.glyphicon-triangle-bottom:before{content:"\\e252"}.glyphicon-triangle-top:before{content:"\\e253"}.glyphicon-console:before{content:"\\e254"}.glyphicon-superscript:before{content:"\\e255"}.glyphicon-subscript:before{content:"\\e256"}.glyphicon-menu-left:before{content:"\\e257"}.glyphicon-menu-right:before{content:"\\e258"}.glyphicon-menu-down:before{content:"\\e259"}.glyphicon-menu-up:before{content:"\\e260"}*,:after,:before{box-sizing:border-box}html{font-size:10px;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#333;background-color:#fff}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#337ab7;text-decoration:none}a:focus,a:hover{color:#23527c;text-decoration:underline}a:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}figure{margin:0}img{vertical-align:middle}.carousel-inner>.item>a>img,.carousel-inner>.item>img,.img-responsive,.thumbnail>img,.thumbnail a>img{display:block;max-width:100%;height:auto}.img-rounded{border-radius:6px}.img-thumbnail{display:inline-block;max-width:100%;height:auto;padding:4px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}[role=button]{cursor:pointer}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{font-family:inherit;font-weight:500;line-height:1.1;color:inherit}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-weight:400;line-height:1;color:#777}.h1,.h2,.h3,h1,h2,h3{margin-top:20px;margin-bottom:10px}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small{font-size:65%}.h4,.h5,.h6,h4,h5,h6{margin-top:10px;margin-bottom:10px}.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-size:75%}.h1,h1{font-size:36px}.h2,h2{font-size:30px}.h3,h3{font-size:24px}.h4,h4{font-size:18px}.h5,h5{font-size:14px}.h6,h6{font-size:12px}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:16px;font-weight:300;line-height:1.4}@media (min-width:768px){.lead{font-size:21px}}.small,small{font-size:85%}.mark,mark{padding:.2em;background-color:#fcf8e3}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}.text-nowrap{white-space:nowrap}.text-lowercase{text-transform:lowercase}.text-uppercase{text-transform:uppercase}.text-capitalize{text-transform:capitalize}.text-muted{color:#777}.text-primary{color:#337ab7}a.text-primary:focus,a.text-primary:hover{color:#286090}.text-success{color:#3c763d}a.text-success:focus,a.text-success:hover{color:#2b542c}.text-info{color:#31708f}a.text-info:focus,a.text-info:hover{color:#245269}.text-warning{color:#8a6d3b}a.text-warning:focus,a.text-warning:hover{color:#66512c}.text-danger{color:#a94442}a.text-danger:focus,a.text-danger:hover{color:#843534}.bg-primary{color:#fff;background-color:#337ab7}a.bg-primary:focus,a.bg-primary:hover{background-color:#286090}.bg-success{background-color:#dff0d8}a.bg-success:focus,a.bg-success:hover{background-color:#c1e2b3}.bg-info{background-color:#d9edf7}a.bg-info:focus,a.bg-info:hover{background-color:#afd9ee}.bg-warning{background-color:#fcf8e3}a.bg-warning:focus,a.bg-warning:hover{background-color:#f7ecb5}.bg-danger{background-color:#f2dede}a.bg-danger:focus,a.bg-danger:hover{background-color:#e4b9b9}.page-header{padding-bottom:9px;margin:40px 0 20px;border-bottom:1px solid #eee}ol,ul{margin-top:0;margin-bottom:10px}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}.list-inline,.list-unstyled{padding-left:0;list-style:none}.list-inline{margin-left:-5px}.list-inline>li{display:inline-block;padding-right:5px;padding-left:5px}dl{margin-top:0;margin-bottom:20px}dd,dt{line-height:1.42857143}dt{font-weight:700}dd{margin-left:0}@media (min-width:768px){.dl-horizontal dt{float:left;width:160px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:180px}}abbr[data-original-title],abbr[title]{cursor:help;border-bottom:1px dotted #777}.initialism{font-size:90%;text-transform:uppercase}blockquote{padding:10px 20px;margin:0 0 20px;font-size:17.5px;border-left:5px solid #eee}blockquote ol:last-child,blockquote p:last-child,blockquote ul:last-child{margin-bottom:0}blockquote .small,blockquote footer,blockquote small{display:block;font-size:80%;line-height:1.42857143;color:#777}blockquote .small:before,blockquote footer:before,blockquote small:before{content:\'\\2014 \\00A0\'}.blockquote-reverse,blockquote.pull-right{padding-right:15px;padding-left:0;text-align:right;border-right:5px solid #eee;border-left:0}.blockquote-reverse .small:before,.blockquote-reverse footer:before,.blockquote-reverse small:before,blockquote.pull-right .small:before,blockquote.pull-right footer:before,blockquote.pull-right small:before{content:\'\'}.blockquote-reverse .small:after,.blockquote-reverse footer:after,.blockquote-reverse small:after,blockquote.pull-right .small:after,blockquote.pull-right footer:after,blockquote.pull-right small:after{content:\'\\00A0 \\2014\'}address{margin-bottom:20px;font-style:normal;line-height:1.42857143}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Courier New,monospace}code{color:#c7254e;background-color:#f9f2f4;border-radius:4px}code,kbd{padding:2px 4px;font-size:90%}kbd{color:#fff;background-color:#333;border-radius:3px;box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}kbd kbd{padding:0;font-size:100%;font-weight:700;box-shadow:none}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857143;color:#333;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0}.pre-scrollable{max-height:340px;overflow-y:scroll}.container{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.container-fluid{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.row{margin-right:-15px;margin-left:-15px}.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12,.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12,.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12,.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{position:relative;min-height:1px;padding-right:15px;padding-left:15px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666667%}.col-xs-10{width:83.33333333%}.col-xs-9{width:75%}.col-xs-8{width:66.66666667%}.col-xs-7{width:58.33333333%}.col-xs-6{width:50%}.col-xs-5{width:41.66666667%}.col-xs-4{width:33.33333333%}.col-xs-3{width:25%}.col-xs-2{width:16.66666667%}.col-xs-1{width:8.33333333%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666667%}.col-xs-pull-10{right:83.33333333%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666667%}.col-xs-pull-7{right:58.33333333%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666667%}.col-xs-pull-4{right:33.33333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.66666667%}.col-xs-pull-1{right:8.33333333%}.col-xs-pull-0{right:auto}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666667%}.col-xs-push-10{left:83.33333333%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666667%}.col-xs-push-7{left:58.33333333%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666667%}.col-xs-push-4{left:33.33333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.66666667%}.col-xs-push-1{left:8.33333333%}.col-xs-push-0{left:auto}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666667%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-0{margin-left:0}@media (min-width:768px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0}}@media (min-width:992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0}}@media (min-width:1200px){.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666667%}.col-lg-10{width:83.33333333%}.col-lg-9{width:75%}.col-lg-8{width:66.66666667%}.col-lg-7{width:58.33333333%}.col-lg-6{width:50%}.col-lg-5{width:41.66666667%}.col-lg-4{width:33.33333333%}.col-lg-3{width:25%}.col-lg-2{width:16.66666667%}.col-lg-1{width:8.33333333%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666667%}.col-lg-pull-10{right:83.33333333%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666667%}.col-lg-pull-7{right:58.33333333%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666667%}.col-lg-pull-4{right:33.33333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.66666667%}.col-lg-pull-1{right:8.33333333%}.col-lg-pull-0{right:auto}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666667%}.col-lg-push-10{left:83.33333333%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666667%}.col-lg-push-7{left:58.33333333%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666667%}.col-lg-push-4{left:33.33333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.66666667%}.col-lg-push-1{left:8.33333333%}.col-lg-push-0{left:auto}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666667%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-0{margin-left:0}}table{background-color:transparent}caption{padding-top:8px;padding-bottom:8px;color:#777}caption,th{text-align:left}.table{width:100%;max-width:100%;margin-bottom:20px}.table>tbody>tr>td,.table>tbody>tr>th,.table>tfoot>tr>td,.table>tfoot>tr>th,.table>thead>tr>td,.table>thead>tr>th{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #ddd}.table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.table>caption+thead>tr:first-child>td,.table>caption+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>th,.table>thead:first-child>tr:first-child>td,.table>thead:first-child>tr:first-child>th{border-top:0}.table>tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed>tbody>tr>td,.table-condensed>tbody>tr>th,.table-condensed>tfoot>tr>td,.table-condensed>tfoot>tr>th,.table-condensed>thead>tr>td,.table-condensed>thead>tr>th{padding:5px}.table-bordered,.table-bordered>tbody>tr>td,.table-bordered>tbody>tr>th,.table-bordered>tfoot>tr>td,.table-bordered>tfoot>tr>th,.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border:1px solid #ddd}.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border-bottom-width:2px}.table-striped>tbody>tr:nth-of-type(odd){background-color:#f9f9f9}.table-hover>tbody>tr:hover{background-color:#f5f5f5}table col[class*=col-]{position:static;display:table-column;float:none}table td[class*=col-],table th[class*=col-]{position:static;display:table-cell;float:none}.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>thead>tr>td.active,.table>thead>tr>th.active{background-color:#f5f5f5}.table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr.active:hover>th,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover{background-color:#e8e8e8}.table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>thead>tr>td.success,.table>thead>tr>th.success{background-color:#dff0d8}.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr.success:hover>th,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover{background-color:#d0e9c6}.table>tbody>tr.info>td,.table>tbody>tr.info>th,.table>tbody>tr>td.info,.table>tbody>tr>th.info,.table>tfoot>tr.info>td,.table>tfoot>tr.info>th,.table>tfoot>tr>td.info,.table>tfoot>tr>th.info,.table>thead>tr.info>td,.table>thead>tr.info>th,.table>thead>tr>td.info,.table>thead>tr>th.info{background-color:#d9edf7}.table-hover>tbody>tr.info:hover>td,.table-hover>tbody>tr.info:hover>th,.table-hover>tbody>tr:hover>.info,.table-hover>tbody>tr>td.info:hover,.table-hover>tbody>tr>th.info:hover{background-color:#c4e3f3}.table>tbody>tr.warning>td,.table>tbody>tr.warning>th,.table>tbody>tr>td.warning,.table>tbody>tr>th.warning,.table>tfoot>tr.warning>td,.table>tfoot>tr.warning>th,.table>tfoot>tr>td.warning,.table>tfoot>tr>th.warning,.table>thead>tr.warning>td,.table>thead>tr.warning>th,.table>thead>tr>td.warning,.table>thead>tr>th.warning{background-color:#fcf8e3}.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr.warning:hover>th,.table-hover>tbody>tr:hover>.warning,.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover{background-color:#faf2cc}.table>tbody>tr.danger>td,.table>tbody>tr.danger>th,.table>tbody>tr>td.danger,.table>tbody>tr>th.danger,.table>tfoot>tr.danger>td,.table>tfoot>tr.danger>th,.table>tfoot>tr>td.danger,.table>tfoot>tr>th.danger,.table>thead>tr.danger>td,.table>thead>tr.danger>th,.table>thead>tr>td.danger,.table>thead>tr>th.danger{background-color:#f2dede}.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr.danger:hover>th,.table-hover>tbody>tr:hover>.danger,.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover{background-color:#ebcccc}.table-responsive{min-height:.01%;overflow-x:auto}@media screen and (max-width:767px){.table-responsive{width:100%;margin-bottom:15px;overflow-y:hidden;-ms-overflow-style:-ms-autohiding-scrollbar;border:1px solid #ddd}.table-responsive>.table{margin-bottom:0}.table-responsive>.table>tbody>tr>td,.table-responsive>.table>tbody>tr>th,.table-responsive>.table>tfoot>tr>td,.table-responsive>.table>tfoot>tr>th,.table-responsive>.table>thead>tr>td,.table-responsive>.table>thead>tr>th{white-space:nowrap}.table-responsive>.table-bordered{border:0}.table-responsive>.table-bordered>tbody>tr>td:first-child,.table-responsive>.table-bordered>tbody>tr>th:first-child,.table-responsive>.table-bordered>tfoot>tr>td:first-child,.table-responsive>.table-bordered>tfoot>tr>th:first-child,.table-responsive>.table-bordered>thead>tr>td:first-child,.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.table-responsive>.table-bordered>tbody>tr>td:last-child,.table-responsive>.table-bordered>tbody>tr>th:last-child,.table-responsive>.table-bordered>tfoot>tr>td:last-child,.table-responsive>.table-bordered>tfoot>tr>th:last-child,.table-responsive>.table-bordered>thead>tr>td:last-child,.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.table-responsive>.table-bordered>tbody>tr:last-child>td,.table-responsive>.table-bordered>tbody>tr:last-child>th,.table-responsive>.table-bordered>tfoot>tr:last-child>td,.table-responsive>.table-bordered>tfoot>tr:last-child>th{border-bottom:0}}fieldset{min-width:0;margin:0}fieldset,legend{padding:0;border:0}legend{display:block;width:100%;margin-bottom:20px;font-size:21px;line-height:inherit;color:#333;border-bottom:1px solid #e5e5e5}label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}input[type=search]{box-sizing:border-box}input[type=checkbox],input[type=radio]{margin:4px 0 0;margin-top:1px\\9;line-height:normal}input[type=file]{display:block}input[type=range]{display:block;width:100%}select[multiple],select[size]{height:auto}input[type=checkbox]:focus,input[type=file]:focus,input[type=radio]:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}output{padding-top:7px}.form-control,output{display:block;font-size:14px;line-height:1.42857143;color:#555}.form-control{width:100%;height:34px;padding:6px 12px;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;-webkit-transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control:focus{border-color:#66afe9;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.form-control::-moz-placeholder{color:#999;opacity:1}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.form-control::-ms-expand{background-color:transparent;border:0}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{background-color:#eee;opacity:1}.form-control[disabled],fieldset[disabled] .form-control{cursor:not-allowed}textarea.form-control{height:auto}input[type=search]{-webkit-appearance:none}@media screen and (-webkit-min-device-pixel-ratio:0){input[type=date].form-control,input[type=datetime-local].form-control,input[type=month].form-control,input[type=time].form-control{line-height:34px}.input-group-sm input[type=date],.input-group-sm input[type=datetime-local],.input-group-sm input[type=month],.input-group-sm input[type=time],input[type=date].input-sm,input[type=datetime-local].input-sm,input[type=month].input-sm,input[type=time].input-sm{line-height:30px}.input-group-lg input[type=date],.input-group-lg input[type=datetime-local],.input-group-lg input[type=month],.input-group-lg input[type=time],input[type=date].input-lg,input[type=datetime-local].input-lg,input[type=month].input-lg,input[type=time].input-lg{line-height:46px}}.form-group{margin-bottom:15px}.checkbox,.radio{position:relative;display:block;margin-top:10px;margin-bottom:10px}.checkbox label,.radio label{min-height:20px;padding-left:20px;margin-bottom:0;font-weight:400;cursor:pointer}.checkbox-inline input[type=checkbox],.checkbox input[type=checkbox],.radio-inline input[type=radio],.radio input[type=radio]{position:absolute;margin-top:4px\\9;margin-left:-20px}.checkbox+.checkbox,.radio+.radio{margin-top:-5px}.checkbox-inline,.radio-inline{position:relative;display:inline-block;padding-left:20px;margin-bottom:0;font-weight:400;vertical-align:middle;cursor:pointer}.checkbox-inline+.checkbox-inline,.radio-inline+.radio-inline{margin-top:0;margin-left:10px}.checkbox-inline.disabled,.checkbox.disabled label,.radio-inline.disabled,.radio.disabled label,fieldset[disabled] .checkbox-inline,fieldset[disabled] .checkbox label,fieldset[disabled] .radio-inline,fieldset[disabled] .radio label,fieldset[disabled] input[type=checkbox],fieldset[disabled] input[type=radio],input[type=checkbox].disabled,input[type=checkbox][disabled],input[type=radio].disabled,input[type=radio][disabled]{cursor:not-allowed}.form-control-static{min-height:34px;padding-top:7px;padding-bottom:7px;margin-bottom:0}.form-control-static.input-lg,.form-control-static.input-sm{padding-right:0;padding-left:0}.input-sm{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}select.input-sm{height:30px;line-height:30px}select[multiple].input-sm,textarea.input-sm{height:auto}.form-group-sm .form-control{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.form-group-sm select.form-control{height:30px;line-height:30px}.form-group-sm select[multiple].form-control,.form-group-sm textarea.form-control{height:auto}.form-group-sm .form-control-static{height:30px;min-height:32px;padding:6px 10px;font-size:12px;line-height:1.5}.input-lg{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:6px}select.input-lg{height:46px;line-height:46px}select[multiple].input-lg,textarea.input-lg{height:auto}.form-group-lg .form-control{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:6px}.form-group-lg select.form-control{height:46px;line-height:46px}.form-group-lg select[multiple].form-control,.form-group-lg textarea.form-control{height:auto}.form-group-lg .form-control-static{height:46px;min-height:38px;padding:11px 16px;font-size:18px;line-height:1.3333333}.has-feedback{position:relative}.has-feedback .form-control{padding-right:42.5px}.form-control-feedback{position:absolute;top:0;right:0;z-index:2;display:block;width:34px;height:34px;line-height:34px;text-align:center;pointer-events:none}.form-group-lg .form-control+.form-control-feedback,.input-group-lg+.form-control-feedback,.input-lg+.form-control-feedback{width:46px;height:46px;line-height:46px}.form-group-sm .form-control+.form-control-feedback,.input-group-sm+.form-control-feedback,.input-sm+.form-control-feedback{width:30px;height:30px;line-height:30px}.has-success .checkbox,.has-success .checkbox-inline,.has-success.checkbox-inline label,.has-success.checkbox label,.has-success .control-label,.has-success .help-block,.has-success .radio,.has-success .radio-inline,.has-success.radio-inline label,.has-success.radio label{color:#3c763d}.has-success .form-control{border-color:#3c763d;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-success .form-control:focus{border-color:#2b542c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #67b168}.has-success .input-group-addon{color:#3c763d;background-color:#dff0d8;border-color:#3c763d}.has-success .form-control-feedback{color:#3c763d}.has-warning .checkbox,.has-warning .checkbox-inline,.has-warning.checkbox-inline label,.has-warning.checkbox label,.has-warning .control-label,.has-warning .help-block,.has-warning .radio,.has-warning .radio-inline,.has-warning.radio-inline label,.has-warning.radio label{color:#8a6d3b}.has-warning .form-control{border-color:#8a6d3b;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-warning .form-control:focus{border-color:#66512c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #c0a16b}.has-warning .input-group-addon{color:#8a6d3b;background-color:#fcf8e3;border-color:#8a6d3b}.has-warning .form-control-feedback{color:#8a6d3b}.has-error .checkbox,.has-error .checkbox-inline,.has-error.checkbox-inline label,.has-error.checkbox label,.has-error .control-label,.has-error .help-block,.has-error .radio,.has-error .radio-inline,.has-error.radio-inline label,.has-error.radio label{color:#a94442}.has-error .form-control{border-color:#a94442;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-error .form-control:focus{border-color:#843534;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483}.has-error .input-group-addon{color:#a94442;background-color:#f2dede;border-color:#a94442}.has-error .form-control-feedback{color:#a94442}.has-feedback label~.form-control-feedback{top:25px}.has-feedback label.sr-only~.form-control-feedback{top:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#737373}@media (min-width:768px){.form-inline .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}.form-inline .form-control-static{display:inline-block}.form-inline .input-group{display:inline-table;vertical-align:middle}.form-inline .input-group .form-control,.form-inline .input-group .input-group-addon,.form-inline .input-group .input-group-btn{width:auto}.form-inline .input-group>.form-control{width:100%}.form-inline .control-label{margin-bottom:0;vertical-align:middle}.form-inline .checkbox,.form-inline .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.form-inline .checkbox label,.form-inline .radio label{padding-left:0}.form-inline .checkbox input[type=checkbox],.form-inline .radio input[type=radio]{position:relative;margin-left:0}.form-inline .has-feedback .form-control-feedback{top:0}}.form-horizontal .checkbox,.form-horizontal .checkbox-inline,.form-horizontal .radio,.form-horizontal .radio-inline{padding-top:7px;margin-top:0;margin-bottom:0}.form-horizontal .checkbox,.form-horizontal .radio{min-height:27px}.form-horizontal .form-group{margin-right:-15px;margin-left:-15px}@media (min-width:768px){.form-horizontal .control-label{padding-top:7px;margin-bottom:0;text-align:right}}.form-horizontal .has-feedback .form-control-feedback{right:15px}@media (min-width:768px){.form-horizontal .form-group-lg .control-label{padding-top:11px;font-size:18px}}@media (min-width:768px){.form-horizontal .form-group-sm .control-label{padding-top:6px;font-size:12px}}.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}.btn.active.focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn:active:focus,.btn:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.focus,.btn:focus,.btn:hover{color:#333;text-decoration:none}.btn.active,.btn:active{background-image:none;outline:0;box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{cursor:not-allowed;filter:alpha(opacity=65);box-shadow:none;opacity:.65}a.btn.disabled,fieldset[disabled] a.btn{pointer-events:none}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default.focus,.btn-default:focus{color:#333;background-color:#e6e6e6;border-color:#8c8c8c}.btn-default.active,.btn-default:active,.btn-default:hover,.open>.dropdown-toggle.btn-default{color:#333;background-color:#e6e6e6;border-color:#adadad}.btn-default.active.focus,.btn-default.active:focus,.btn-default.active:hover,.btn-default:active.focus,.btn-default:active:focus,.btn-default:active:hover,.open>.dropdown-toggle.btn-default.focus,.open>.dropdown-toggle.btn-default:focus,.open>.dropdown-toggle.btn-default:hover{color:#333;background-color:#d4d4d4;border-color:#8c8c8c}.btn-default.active,.btn-default:active,.open>.dropdown-toggle.btn-default{background-image:none}.btn-default.disabled.focus,.btn-default.disabled:focus,.btn-default.disabled:hover,.btn-default[disabled].focus,.btn-default[disabled]:focus,.btn-default[disabled]:hover,fieldset[disabled] .btn-default.focus,fieldset[disabled] .btn-default:focus,fieldset[disabled] .btn-default:hover{background-color:#fff;border-color:#ccc}.btn-default .badge{color:#fff;background-color:#333}.btn-primary{color:#fff;background-color:#337ab7;border-color:#2e6da4}.btn-primary.focus,.btn-primary:focus{color:#fff;background-color:#286090;border-color:#122b40}.btn-primary.active,.btn-primary:active,.btn-primary:hover,.open>.dropdown-toggle.btn-primary{color:#fff;background-color:#286090;border-color:#204d74}.btn-primary.active.focus,.btn-primary.active:focus,.btn-primary.active:hover,.btn-primary:active.focus,.btn-primary:active:focus,.btn-primary:active:hover,.open>.dropdown-toggle.btn-primary.focus,.open>.dropdown-toggle.btn-primary:focus,.open>.dropdown-toggle.btn-primary:hover{color:#fff;background-color:#204d74;border-color:#122b40}.btn-primary.active,.btn-primary:active,.open>.dropdown-toggle.btn-primary{background-image:none}.btn-primary.disabled.focus,.btn-primary.disabled:focus,.btn-primary.disabled:hover,.btn-primary[disabled].focus,.btn-primary[disabled]:focus,.btn-primary[disabled]:hover,fieldset[disabled] .btn-primary.focus,fieldset[disabled] .btn-primary:focus,fieldset[disabled] .btn-primary:hover{background-color:#337ab7;border-color:#2e6da4}.btn-primary .badge{color:#337ab7;background-color:#fff}.btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.btn-success.focus,.btn-success:focus{color:#fff;background-color:#449d44;border-color:#255625}.btn-success.active,.btn-success:active,.btn-success:hover,.open>.dropdown-toggle.btn-success{color:#fff;background-color:#449d44;border-color:#398439}.btn-success.active.focus,.btn-success.active:focus,.btn-success.active:hover,.btn-success:active.focus,.btn-success:active:focus,.btn-success:active:hover,.open>.dropdown-toggle.btn-success.focus,.open>.dropdown-toggle.btn-success:focus,.open>.dropdown-toggle.btn-success:hover{color:#fff;background-color:#398439;border-color:#255625}.btn-success.active,.btn-success:active,.open>.dropdown-toggle.btn-success{background-image:none}.btn-success.disabled.focus,.btn-success.disabled:focus,.btn-success.disabled:hover,.btn-success[disabled].focus,.btn-success[disabled]:focus,.btn-success[disabled]:hover,fieldset[disabled] .btn-success.focus,fieldset[disabled] .btn-success:focus,fieldset[disabled] .btn-success:hover{background-color:#5cb85c;border-color:#4cae4c}.btn-success .badge{color:#5cb85c;background-color:#fff}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info.focus,.btn-info:focus{color:#fff;background-color:#31b0d5;border-color:#1b6d85}.btn-info.active,.btn-info:active,.btn-info:hover,.open>.dropdown-toggle.btn-info{color:#fff;background-color:#31b0d5;border-color:#269abc}.btn-info.active.focus,.btn-info.active:focus,.btn-info.active:hover,.btn-info:active.focus,.btn-info:active:focus,.btn-info:active:hover,.open>.dropdown-toggle.btn-info.focus,.open>.dropdown-toggle.btn-info:focus,.open>.dropdown-toggle.btn-info:hover{color:#fff;background-color:#269abc;border-color:#1b6d85}.btn-info.active,.btn-info:active,.open>.dropdown-toggle.btn-info{background-image:none}.btn-info.disabled.focus,.btn-info.disabled:focus,.btn-info.disabled:hover,.btn-info[disabled].focus,.btn-info[disabled]:focus,.btn-info[disabled]:hover,fieldset[disabled] .btn-info.focus,fieldset[disabled] .btn-info:focus,fieldset[disabled] .btn-info:hover{background-color:#5bc0de;border-color:#46b8da}.btn-info .badge{color:#5bc0de;background-color:#fff}.btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.btn-warning.focus,.btn-warning:focus{color:#fff;background-color:#ec971f;border-color:#985f0d}.btn-warning.active,.btn-warning:active,.btn-warning:hover,.open>.dropdown-toggle.btn-warning{color:#fff;background-color:#ec971f;border-color:#d58512}.btn-warning.active.focus,.btn-warning.active:focus,.btn-warning.active:hover,.btn-warning:active.focus,.btn-warning:active:focus,.btn-warning:active:hover,.open>.dropdown-toggle.btn-warning.focus,.open>.dropdown-toggle.btn-warning:focus,.open>.dropdown-toggle.btn-warning:hover{color:#fff;background-color:#d58512;border-color:#985f0d}.btn-warning.active,.btn-warning:active,.open>.dropdown-toggle.btn-warning{background-image:none}.btn-warning.disabled.focus,.btn-warning.disabled:focus,.btn-warning.disabled:hover,.btn-warning[disabled].focus,.btn-warning[disabled]:focus,.btn-warning[disabled]:hover,fieldset[disabled] .btn-warning.focus,fieldset[disabled] .btn-warning:focus,fieldset[disabled] .btn-warning:hover{background-color:#f0ad4e;border-color:#eea236}.btn-warning .badge{color:#f0ad4e;background-color:#fff}.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger.focus,.btn-danger:focus{color:#fff;background-color:#c9302c;border-color:#761c19}.btn-danger.active,.btn-danger:active,.btn-danger:hover,.open>.dropdown-toggle.btn-danger{color:#fff;background-color:#c9302c;border-color:#ac2925}.btn-danger.active.focus,.btn-danger.active:focus,.btn-danger.active:hover,.btn-danger:active.focus,.btn-danger:active:focus,.btn-danger:active:hover,.open>.dropdown-toggle.btn-danger.focus,.open>.dropdown-toggle.btn-danger:focus,.open>.dropdown-toggle.btn-danger:hover{color:#fff;background-color:#ac2925;border-color:#761c19}.btn-danger.active,.btn-danger:active,.open>.dropdown-toggle.btn-danger{background-image:none}.btn-danger.disabled.focus,.btn-danger.disabled:focus,.btn-danger.disabled:hover,.btn-danger[disabled].focus,.btn-danger[disabled]:focus,.btn-danger[disabled]:hover,fieldset[disabled] .btn-danger.focus,fieldset[disabled] .btn-danger:focus,fieldset[disabled] .btn-danger:hover{background-color:#d9534f;border-color:#d43f3a}.btn-danger .badge{color:#d9534f;background-color:#fff}.btn-link{font-weight:400;color:#337ab7;border-radius:0}.btn-link,.btn-link.active,.btn-link:active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;box-shadow:none}.btn-link,.btn-link:active,.btn-link:focus,.btn-link:hover{border-color:transparent}.btn-link:focus,.btn-link:hover{color:#23527c;text-decoration:underline;background-color:transparent}.btn-link[disabled]:focus,.btn-link[disabled]:hover,fieldset[disabled] .btn-link:focus,fieldset[disabled] .btn-link:hover{color:#777;text-decoration:none}.btn-group-lg>.btn,.btn-lg{padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:6px}.btn-group-sm>.btn,.btn-sm{padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.btn-group-xs>.btn,.btn-xs{padding:1px 5px;font-size:12px;line-height:1.5;border-radius:3px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:5px}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.fade{opacity:0;-webkit-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{display:none}.collapse.in{display:block}tr.collapse.in{display:table-row}tbody.collapse.in{display:table-row-group}.collapsing{position:relative;height:0;overflow:hidden;-webkit-transition-timing-function:ease;transition-timing-function:ease;-webkit-transition-duration:.35s;transition-duration:.35s;-webkit-transition-property:height,visibility;transition-property:height,visibility}.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px dashed;border-top:4px solid\\9;border-right:4px solid transparent;border-left:4px solid transparent}.dropdown,.dropup{position:relative}.dropdown-toggle:focus{outline:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:17;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;font-size:14px;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:4px;box-shadow:0 6px 12px rgba(0,0,0,.175)}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.dropdown-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:400;line-height:1.42857143;color:#333;white-space:nowrap}.dropdown-menu>li>a:focus,.dropdown-menu>li>a:hover{color:#262626;text-decoration:none;background-color:#f5f5f5}.dropdown-menu>.active>a,.dropdown-menu>.active>a:focus,.dropdown-menu>.active>a:hover{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{color:#777}.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{text-decoration:none;cursor:not-allowed;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false)}.open>.dropdown-menu{display:block}.open>a{outline:0}.dropdown-menu-right{right:0;left:auto}.dropdown-menu-left{right:auto;left:0}.dropdown-header{display:block;padding:3px 20px;font-size:12px;line-height:1.42857143;color:#777;white-space:nowrap}.dropdown-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:16}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{content:"";border-top:0;border-bottom:4px dashed;border-bottom:4px solid\\9}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:2px}@media (min-width:768px){.navbar-right .dropdown-menu{right:0;left:auto}.navbar-right .dropdown-menu-left{right:auto;left:0}}.btn-group,.btn-group-vertical{position:relative;display:inline-block;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;float:left}.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:2}.btn-group .btn+.btn,.btn-group .btn+.btn-group,.btn-group .btn-group+.btn,.btn-group .btn-group+.btn-group{margin-left:-1px}.btn-toolbar{margin-left:-5px}.btn-toolbar .btn,.btn-toolbar .btn-group,.btn-toolbar .input-group{float:left}.btn-toolbar>.btn,.btn-toolbar>.btn-group,.btn-toolbar>.input-group{margin-left:5px}.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}.btn-group>.btn:first-child{margin-left:0}.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn:last-child:not(:first-child),.btn-group>.dropdown-toggle:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.btn-group>.btn-group{float:left}.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:last-child:not(:first-child)>.btn:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group>.btn+.dropdown-toggle{padding-right:8px;padding-left:8px}.btn-group>.btn-lg+.dropdown-toggle{padding-right:12px;padding-left:12px}.btn-group.open .dropdown-toggle{box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn-group.open .dropdown-toggle.btn-link{box-shadow:none}.btn .caret{margin-left:0}.btn-lg .caret{border-width:5px 5px 0;border-bottom-width:0}.dropup .btn-lg .caret{border-width:0 5px 5px}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group,.btn-group-vertical>.btn-group>.btn{display:block;float:none;width:100%;max-width:100%}.btn-group-vertical>.btn-group>.btn{float:none}.btn-group-vertical>.btn+.btn,.btn-group-vertical>.btn+.btn-group,.btn-group-vertical>.btn-group+.btn,.btn-group-vertical>.btn-group+.btn-group{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:not(:first-child):not(:last-child){border-radius:0}.btn-group-vertical>.btn:first-child:not(:last-child){border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn:last-child:not(:first-child){border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}.btn-group-vertical>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group-vertical>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group-vertical>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:last-child:not(:first-child)>.btn:first-child{border-top-left-radius:0;border-top-right-radius:0}.btn-group-justified{display:table;width:100%;table-layout:fixed;border-collapse:separate}.btn-group-justified>.btn,.btn-group-justified>.btn-group{display:table-cell;float:none;width:1%}.btn-group-justified>.btn-group .btn{width:100%}.btn-group-justified>.btn-group .dropdown-menu{left:auto}[data-toggle=buttons]>.btn-group>.btn input[type=checkbox],[data-toggle=buttons]>.btn-group>.btn input[type=radio],[data-toggle=buttons]>.btn input[type=checkbox],[data-toggle=buttons]>.btn input[type=radio]{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.input-group{position:relative;display:table;border-collapse:separate}.input-group[class*=col-]{float:none;padding-right:0;padding-left:0}.input-group .form-control{position:relative;z-index:2;float:left;width:100%;margin-bottom:0}.input-group .form-control:focus{z-index:3}.input-group-lg>.form-control,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.btn{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:6px}select.input-group-lg>.form-control,select.input-group-lg>.input-group-addon,select.input-group-lg>.input-group-btn>.btn{height:46px;line-height:46px}select[multiple].input-group-lg>.form-control,select[multiple].input-group-lg>.input-group-addon,select[multiple].input-group-lg>.input-group-btn>.btn,textarea.input-group-lg>.form-control,textarea.input-group-lg>.input-group-addon,textarea.input-group-lg>.input-group-btn>.btn{height:auto}.input-group-sm>.form-control,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.btn{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}select.input-group-sm>.form-control,select.input-group-sm>.input-group-addon,select.input-group-sm>.input-group-btn>.btn{height:30px;line-height:30px}select[multiple].input-group-sm>.form-control,select[multiple].input-group-sm>.input-group-addon,select[multiple].input-group-sm>.input-group-btn>.btn,textarea.input-group-sm>.form-control,textarea.input-group-sm>.input-group-addon,textarea.input-group-sm>.input-group-btn>.btn{height:auto}.input-group-addon,.input-group-btn,.input-group .form-control{display:table-cell}.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child),.input-group .form-control:not(:first-child):not(:last-child){border-radius:0}.input-group-addon,.input-group-btn{width:1%;white-space:nowrap;vertical-align:middle}.input-group-addon{padding:6px 12px;font-size:14px;font-weight:400;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:4px}.input-group-addon.input-sm{padding:5px 10px;font-size:12px;border-radius:3px}.input-group-addon.input-lg{padding:10px 16px;font-size:18px;border-radius:6px}.input-group-addon input[type=checkbox],.input-group-addon input[type=radio]{margin-top:0}.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn-group:not(:last-child)>.btn,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle),.input-group .form-control:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group-addon:last-child,.input-group-btn:first-child>.btn-group:not(:first-child)>.btn,.input-group-btn:first-child>.btn:not(:first-child),.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group>.btn,.input-group-btn:last-child>.dropdown-toggle,.input-group .form-control:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{font-size:0;white-space:nowrap}.input-group-btn,.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-1px}.input-group-btn>.btn:active,.input-group-btn>.btn:focus,.input-group-btn>.btn:hover{z-index:2}.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group{margin-right:-1px}.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group{z-index:2;margin-left:-1px}.nav{padding-left:0;margin-bottom:0;list-style:none}.nav>li,.nav>li>a{position:relative;display:block}.nav>li>a{padding:10px 15px}.nav>li>a:focus,.nav>li>a:hover{text-decoration:none;background-color:#eee}.nav>li.disabled>a{color:#777}.nav>li.disabled>a:focus,.nav>li.disabled>a:hover{color:#777;text-decoration:none;cursor:not-allowed;background-color:transparent}.nav .open>a,.nav .open>a:focus,.nav .open>a:hover{background-color:#eee;border-color:#337ab7}.nav .nav-divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.nav>li>a>img{max-width:none}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{float:left;margin-bottom:-1px}.nav-tabs>li>a{margin-right:2px;line-height:1.42857143;border:1px solid transparent;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover{border-color:#eee #eee #ddd}.nav-tabs>li.active>a,.nav-tabs>li.active>a:focus,.nav-tabs>li.active>a:hover{color:#555;cursor:default;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent}.nav-tabs.nav-justified{width:100%;border-bottom:0}.nav-tabs.nav-justified>li{float:none}.nav-tabs.nav-justified>li>a{margin-bottom:5px;text-align:center}.nav-tabs.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media (min-width:768px){.nav-tabs.nav-justified>li{display:table-cell;width:1%}.nav-tabs.nav-justified>li>a{margin-bottom:0}}.nav-tabs.nav-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-tabs.nav-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border-bottom-color:#fff}}.nav-pills>li{float:left}.nav-pills>li>a{border-radius:4px}.nav-pills>li+li{margin-left:2px}.nav-pills>li.active>a,.nav-pills>li.active>a:focus,.nav-pills>li.active>a:hover{color:#fff;background-color:#337ab7}.nav-stacked>li{float:none}.nav-stacked>li+li{margin-top:2px;margin-left:0}.nav-justified{width:100%}.nav-justified>li{float:none}.nav-justified>li>a{margin-bottom:5px;text-align:center}.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media (min-width:768px){.nav-justified>li{display:table-cell;width:1%}.nav-justified>li>a{margin-bottom:0}}.nav-tabs-justified{border-bottom:0}.nav-tabs-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-tabs-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover{border-bottom-color:#fff}}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-left-radius:0;border-top-right-radius:0}.navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}@media (min-width:768px){.navbar{border-radius:4px}}@media (min-width:768px){.navbar-header{float:left}}.navbar-collapse{padding-right:15px;padding-left:15px;overflow-x:visible;-webkit-overflow-scrolling:touch;border-top:1px solid transparent;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.1)}.navbar-collapse.in{overflow-y:auto}@media (min-width:768px){.navbar-collapse{width:auto;border-top:0;box-shadow:none}.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important}.navbar-collapse.in{overflow-y:visible}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.navbar-static-top .navbar-collapse{padding-right:0;padding-left:0}}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:340px}@media (max-device-width:480px) and (orientation:landscape){.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:200px}}.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:-15px;margin-left:-15px}@media (min-width:768px){.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:0;margin-left:0}}.navbar-static-top{z-index:17;border-width:0 0 1px}@media (min-width:768px){.navbar-static-top{border-radius:0}}.navbar-fixed-bottom,.navbar-fixed-top{position:fixed;right:0;left:0;z-index:18}@media (min-width:768px){.navbar-fixed-bottom,.navbar-fixed-top{border-radius:0}}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;margin-bottom:0;border-width:1px 0 0}.navbar-brand{float:left;height:50px;padding:15px;font-size:18px;line-height:20px}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-brand>img{display:block}@media (min-width:768px){.navbar>.container-fluid .navbar-brand,.navbar>.container .navbar-brand{margin-left:-15px}}.navbar-toggle{position:relative;float:right;padding:9px 10px;margin-top:8px;margin-right:15px;margin-bottom:8px;background-color:transparent;background-image:none;border:1px solid transparent;border-radius:4px}.navbar-toggle:focus{outline:0}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media (min-width:768px){.navbar-toggle{display:none}}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}@media (max-width:767px){.navbar-nav .open .dropdown-menu{position:static;float:none;width:auto;margin-top:0;background-color:transparent;border:0;box-shadow:none}.navbar-nav .open .dropdown-menu .dropdown-header,.navbar-nav .open .dropdown-menu>li>a{padding:5px 15px 5px 25px}.navbar-nav .open .dropdown-menu>li>a{line-height:20px}.navbar-nav .open .dropdown-menu>li>a:focus,.navbar-nav .open .dropdown-menu>li>a:hover{background-image:none}}@media (min-width:768px){.navbar-nav{float:left;margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}}.navbar-form{padding:10px 15px;margin:8px -15px;border-top:1px solid transparent;border-bottom:1px solid transparent;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.1),0 1px 0 hsla(0,0%,100%,.1)}@media (min-width:768px){.navbar-form .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.navbar-form .form-control{display:inline-block;width:auto;vertical-align:middle}.navbar-form .form-control-static{display:inline-block}.navbar-form .input-group{display:inline-table;vertical-align:middle}.navbar-form .input-group .form-control,.navbar-form .input-group .input-group-addon,.navbar-form .input-group .input-group-btn{width:auto}.navbar-form .input-group>.form-control{width:100%}.navbar-form .control-label{margin-bottom:0;vertical-align:middle}.navbar-form .checkbox,.navbar-form .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.navbar-form .checkbox label,.navbar-form .radio label{padding-left:0}.navbar-form .checkbox input[type=checkbox],.navbar-form .radio input[type=radio]{position:relative;margin-left:0}.navbar-form .has-feedback .form-control-feedback{top:0}}@media (max-width:767px){.navbar-form .form-group{margin-bottom:5px}.navbar-form .form-group:last-child{margin-bottom:0}}@media (min-width:768px){.navbar-form{width:auto;padding-top:0;padding-bottom:0;margin-right:0;margin-left:0;border:0;box-shadow:none}}.navbar-nav>li>.dropdown-menu{margin-top:0;border-top-left-radius:0;border-top-right-radius:0}.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{margin-bottom:0;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.navbar-btn{margin-top:8px;margin-bottom:8px}.navbar-btn.btn-sm{margin-top:10px;margin-bottom:10px}.navbar-btn.btn-xs{margin-top:14px;margin-bottom:14px}.navbar-text{margin-top:15px;margin-bottom:15px}@media (min-width:768px){.navbar-text{float:left;margin-right:15px;margin-left:15px}}@media (min-width:768px){.navbar-left{float:left!important}.navbar-right{float:right!important;margin-right:-15px}.navbar-right~.navbar-right{margin-right:0}}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-brand:focus,.navbar-default .navbar-brand:hover{color:#5e5e5e;background-color:transparent}.navbar-default .navbar-nav>li>a,.navbar-default .navbar-text{color:#777}.navbar-default .navbar-nav>li>a:focus,.navbar-default .navbar-nav>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav>.active>a,.navbar-default .navbar-nav>.active>a:focus,.navbar-default .navbar-nav>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav>.disabled>a,.navbar-default .navbar-nav>.disabled>a:focus,.navbar-default .navbar-nav>.disabled>a:hover{color:#ccc;background-color:transparent}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#e7e7e7}.navbar-default .navbar-nav>.open>a,.navbar-default .navbar-nav>.open>a:focus,.navbar-default .navbar-nav>.open>a:hover{color:#555;background-color:#e7e7e7}@media (max-width:767px){.navbar-default .navbar-nav .open .dropdown-menu>li>a{color:#777}.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.active>a,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#ccc;background-color:transparent}}.navbar-default .navbar-link{color:#777}.navbar-default .navbar-link:hover{color:#333}.navbar-default .btn-link{color:#777}.navbar-default .btn-link:focus,.navbar-default .btn-link:hover{color:#333}.navbar-default .btn-link[disabled]:focus,.navbar-default .btn-link[disabled]:hover,fieldset[disabled] .navbar-default .btn-link:focus,fieldset[disabled] .navbar-default .btn-link:hover{color:#ccc}.navbar-inverse{background-color:#222;border-color:#080808}.navbar-inverse .navbar-brand{color:#9d9d9d}.navbar-inverse .navbar-brand:focus,.navbar-inverse .navbar-brand:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>li>a,.navbar-inverse .navbar-text{color:#9d9d9d}.navbar-inverse .navbar-nav>li>a:focus,.navbar-inverse .navbar-nav>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>.active>a,.navbar-inverse .navbar-nav>.active>a:focus,.navbar-inverse .navbar-nav>.active>a:hover{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav>.disabled>a,.navbar-inverse .navbar-nav>.disabled>a:focus,.navbar-inverse .navbar-nav>.disabled>a:hover{color:#444;background-color:transparent}.navbar-inverse .navbar-toggle{border-color:#333}.navbar-inverse .navbar-toggle:focus,.navbar-inverse .navbar-toggle:hover{background-color:#333}.navbar-inverse .navbar-toggle .icon-bar{background-color:#fff}.navbar-inverse .navbar-collapse,.navbar-inverse .navbar-form{border-color:#101010}.navbar-inverse .navbar-nav>.open>a,.navbar-inverse .navbar-nav>.open>a:focus,.navbar-inverse .navbar-nav>.open>a:hover{color:#fff;background-color:#080808}@media (max-width:767px){.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header{border-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu .divider{background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a{color:#9d9d9d}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#444;background-color:transparent}}.navbar-inverse .navbar-link{color:#9d9d9d}.navbar-inverse .navbar-link:hover{color:#fff}.navbar-inverse .btn-link{color:#9d9d9d}.navbar-inverse .btn-link:focus,.navbar-inverse .btn-link:hover{color:#fff}.navbar-inverse .btn-link[disabled]:focus,.navbar-inverse .btn-link[disabled]:hover,fieldset[disabled] .navbar-inverse .btn-link:focus,fieldset[disabled] .navbar-inverse .btn-link:hover{color:#444}.breadcrumb{padding:8px 15px;margin-bottom:20px;list-style:none;background-color:#f5f5f5;border-radius:4px}.breadcrumb>li{display:inline-block}.breadcrumb>li+li:before{padding:0 5px;color:#ccc;content:"/\\00a0"}.breadcrumb>.active{color:#777}.pagination{display:inline-block;padding-left:0;margin:20px 0;border-radius:4px}.pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;margin-left:-1px;line-height:1.42857143;color:#337ab7;text-decoration:none;background-color:#fff;border:1px solid #ddd}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-top-right-radius:4px;border-bottom-right-radius:4px}.pagination>li>a:focus,.pagination>li>a:hover,.pagination>li>span:focus,.pagination>li>span:hover{z-index:2;color:#23527c;background-color:#eee;border-color:#ddd}.pagination>.active>a,.pagination>.active>a:focus,.pagination>.active>a:hover,.pagination>.active>span,.pagination>.active>span:focus,.pagination>.active>span:hover{z-index:3;color:#fff;cursor:default;background-color:#337ab7;border-color:#337ab7}.pagination>.disabled>a,.pagination>.disabled>a:focus,.pagination>.disabled>a:hover,.pagination>.disabled>span,.pagination>.disabled>span:focus,.pagination>.disabled>span:hover{color:#777;cursor:not-allowed;background-color:#fff;border-color:#ddd}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;font-size:18px;line-height:1.3333333}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-top-left-radius:6px;border-bottom-left-radius:6px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-top-right-radius:6px;border-bottom-right-radius:6px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;font-size:12px;line-height:1.5}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-top-left-radius:3px;border-bottom-left-radius:3px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-top-right-radius:3px;border-bottom-right-radius:3px}.pager{padding-left:0;margin:20px 0;text-align:center;list-style:none}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;border-radius:15px}.pager li>a:focus,.pager li>a:hover{text-decoration:none;background-color:#eee}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:focus,.pager .disabled>a:hover,.pager .disabled>span{color:#777;cursor:not-allowed;background-color:#fff}.label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}a.label:focus,a.label:hover{color:#fff;text-decoration:none;cursor:pointer}.label:empty{display:none}.btn .label{position:relative;top:-1px}.label-default{background-color:#777}.label-default[href]:focus,.label-default[href]:hover{background-color:#5e5e5e}.label-primary{background-color:#337ab7}.label-primary[href]:focus,.label-primary[href]:hover{background-color:#286090}.label-success{background-color:#5cb85c}.label-success[href]:focus,.label-success[href]:hover{background-color:#449d44}.label-info{background-color:#5bc0de}.label-info[href]:focus,.label-info[href]:hover{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:focus,.label-warning[href]:hover{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:focus,.label-danger[href]:hover{background-color:#c9302c}.badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:middle;background-color:#777;border-radius:10px}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.btn-group-xs>.btn .badge,.btn-xs .badge{top:0;padding:1px 5px}a.badge:focus,a.badge:hover{color:#fff;text-decoration:none;cursor:pointer}.list-group-item.active>.badge,.nav-pills>.active>a>.badge{color:#337ab7;background-color:#fff}.list-group-item>.badge{float:right}.list-group-item>.badge+.badge{margin-right:5px}.nav-pills>li>a>.badge{margin-left:3px}.jumbotron{padding-top:30px;padding-bottom:30px;margin-bottom:30px;background-color:#eee}.jumbotron,.jumbotron .h1,.jumbotron h1{color:inherit}.jumbotron p{margin-bottom:15px;font-size:21px;font-weight:200}.jumbotron>hr{border-top-color:#d5d5d5}.container-fluid .jumbotron,.container .jumbotron{padding-right:15px;padding-left:15px;border-radius:6px}.jumbotron .container{max-width:100%}@media screen and (min-width:768px){.jumbotron{padding-top:48px;padding-bottom:48px}.container-fluid .jumbotron,.container .jumbotron{padding-right:60px;padding-left:60px}.jumbotron .h1,.jumbotron h1{font-size:63px}}.thumbnail{display:block;padding:4px;margin-bottom:20px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:border .2s ease-in-out;transition:border .2s ease-in-out}.thumbnail>img,.thumbnail a>img{margin-right:auto;margin-left:auto}a.thumbnail.active,a.thumbnail:focus,a.thumbnail:hover{border-color:#337ab7}.thumbnail .caption{padding:9px;color:#333}.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert h4{margin-top:0;color:inherit}.alert .alert-link{font-weight:700}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable,.alert-dismissible{padding-right:35px}.alert-dismissable .close,.alert-dismissible .close{position:relative;top:-2px;right:-21px;color:inherit}.alert-success{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#2b542c}.alert-info{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#245269}.alert-warning{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#66512c}.alert-danger{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#843534}@-webkit-keyframes a{0%{background-position:40px 0}to{background-position:0 0}}@keyframes a{0%{background-position:40px 0}to{background-position:0 0}}.progress{height:20px;margin-bottom:20px;overflow:hidden;background-color:#f5f5f5;border-radius:4px;box-shadow:inset 0 1px 2px rgba(0,0,0,.1)}.progress-bar{float:left;width:0;height:100%;font-size:12px;line-height:20px;color:#fff;text-align:center;background-color:#337ab7;box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-webkit-transition:width .6s ease;transition:width .6s ease}.progress-bar-striped,.progress-striped .progress-bar{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-size:40px 40px}.progress-bar.active,.progress.active .progress-bar{-webkit-animation:a 2s linear infinite;animation:a 2s linear infinite}.progress-bar-success{background-color:#5cb85c}.progress-striped .progress-bar-success{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.progress-bar-info{background-color:#5bc0de}.progress-striped .progress-bar-info{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.progress-bar-warning{background-color:#f0ad4e}.progress-striped .progress-bar-warning{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.progress-bar-danger{background-color:#d9534f}.progress-striped .progress-bar-danger{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.media{margin-top:15px}.media:first-child{margin-top:0}.media,.media-body{overflow:hidden;zoom:1}.media-body{width:10000px}.media-object{display:block}.media-object.img-thumbnail{max-width:none}.media-right,.media>.pull-right{padding-left:10px}.media-left,.media>.pull-left{padding-right:10px}.media-body,.media-left,.media-right{display:table-cell;vertical-align:top}.media-middle{vertical-align:middle}.media-bottom{vertical-align:bottom}.media-heading{margin-top:0;margin-bottom:5px}.media-list{padding-left:0;list-style:none}.list-group{padding-left:0;margin-bottom:20px}.list-group-item{position:relative;display:block;padding:10px 15px;margin-bottom:-1px;background-color:#fff;border:1px solid #ddd}.list-group-item:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.list-group-item:last-child{margin-bottom:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}a.list-group-item,button.list-group-item{color:#555}a.list-group-item .list-group-item-heading,button.list-group-item .list-group-item-heading{color:#333}a.list-group-item:focus,a.list-group-item:hover,button.list-group-item:focus,button.list-group-item:hover{color:#555;text-decoration:none;background-color:#f5f5f5}button.list-group-item{width:100%;text-align:left}.list-group-item.disabled,.list-group-item.disabled:focus,.list-group-item.disabled:hover{color:#777;cursor:not-allowed;background-color:#eee}.list-group-item.disabled .list-group-item-heading,.list-group-item.disabled:focus .list-group-item-heading,.list-group-item.disabled:hover .list-group-item-heading{color:inherit}.list-group-item.disabled .list-group-item-text,.list-group-item.disabled:focus .list-group-item-text,.list-group-item.disabled:hover .list-group-item-text{color:#777}.list-group-item.active,.list-group-item.active:focus,.list-group-item.active:hover{z-index:2;color:#fff;background-color:#337ab7;border-color:#337ab7}.list-group-item.active .list-group-item-heading,.list-group-item.active .list-group-item-heading>.small,.list-group-item.active .list-group-item-heading>small,.list-group-item.active:focus .list-group-item-heading,.list-group-item.active:focus .list-group-item-heading>.small,.list-group-item.active:focus .list-group-item-heading>small,.list-group-item.active:hover .list-group-item-heading,.list-group-item.active:hover .list-group-item-heading>.small,.list-group-item.active:hover .list-group-item-heading>small{color:inherit}.list-group-item.active .list-group-item-text,.list-group-item.active:focus .list-group-item-text,.list-group-item.active:hover .list-group-item-text{color:#c7ddef}.list-group-item-success{color:#3c763d;background-color:#dff0d8}a.list-group-item-success,button.list-group-item-success{color:#3c763d}a.list-group-item-success .list-group-item-heading,button.list-group-item-success .list-group-item-heading{color:inherit}a.list-group-item-success:focus,a.list-group-item-success:hover,button.list-group-item-success:focus,button.list-group-item-success:hover{color:#3c763d;background-color:#d0e9c6}a.list-group-item-success.active,a.list-group-item-success.active:focus,a.list-group-item-success.active:hover,button.list-group-item-success.active,button.list-group-item-success.active:focus,button.list-group-item-success.active:hover{color:#fff;background-color:#3c763d;border-color:#3c763d}.list-group-item-info{color:#31708f;background-color:#d9edf7}a.list-group-item-info,button.list-group-item-info{color:#31708f}a.list-group-item-info .list-group-item-heading,button.list-group-item-info .list-group-item-heading{color:inherit}a.list-group-item-info:focus,a.list-group-item-info:hover,button.list-group-item-info:focus,button.list-group-item-info:hover{color:#31708f;background-color:#c4e3f3}a.list-group-item-info.active,a.list-group-item-info.active:focus,a.list-group-item-info.active:hover,button.list-group-item-info.active,button.list-group-item-info.active:focus,button.list-group-item-info.active:hover{color:#fff;background-color:#31708f;border-color:#31708f}.list-group-item-warning{color:#8a6d3b;background-color:#fcf8e3}a.list-group-item-warning,button.list-group-item-warning{color:#8a6d3b}a.list-group-item-warning .list-group-item-heading,button.list-group-item-warning .list-group-item-heading{color:inherit}a.list-group-item-warning:focus,a.list-group-item-warning:hover,button.list-group-item-warning:focus,button.list-group-item-warning:hover{color:#8a6d3b;background-color:#faf2cc}a.list-group-item-warning.active,a.list-group-item-warning.active:focus,a.list-group-item-warning.active:hover,button.list-group-item-warning.active,button.list-group-item-warning.active:focus,button.list-group-item-warning.active:hover{color:#fff;background-color:#8a6d3b;border-color:#8a6d3b}.list-group-item-danger{color:#a94442;background-color:#f2dede}a.list-group-item-danger,button.list-group-item-danger{color:#a94442}a.list-group-item-danger .list-group-item-heading,button.list-group-item-danger .list-group-item-heading{color:inherit}a.list-group-item-danger:focus,a.list-group-item-danger:hover,button.list-group-item-danger:focus,button.list-group-item-danger:hover{color:#a94442;background-color:#ebcccc}a.list-group-item-danger.active,a.list-group-item-danger.active:focus,a.list-group-item-danger.active:hover,button.list-group-item-danger.active,button.list-group-item-danger.active:focus,button.list-group-item-danger.active:hover{color:#fff;background-color:#a94442;border-color:#a94442}.list-group-item-heading{margin-top:0;margin-bottom:5px}.list-group-item-text{margin-bottom:0;line-height:1.3}.panel{margin-bottom:20px;background-color:#fff;border:1px solid transparent;border-radius:4px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.panel-body{padding:15px}.panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-left-radius:3px;border-top-right-radius:3px}.panel-heading>.dropdown .dropdown-toggle,.panel-title{color:inherit}.panel-title{margin-top:0;margin-bottom:0;font-size:16px}.panel-title>.small,.panel-title>.small>a,.panel-title>a,.panel-title>small,.panel-title>small>a{color:inherit}.panel-footer{padding:10px 15px;background-color:#f5f5f5;border-top:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.list-group,.panel>.panel-collapse>.list-group{margin-bottom:0}.panel>.list-group .list-group-item,.panel>.panel-collapse>.list-group .list-group-item{border-width:1px 0;border-radius:0}.panel>.list-group:first-child .list-group-item:first-child,.panel>.panel-collapse>.list-group:first-child .list-group-item:first-child{border-top:0;border-top-left-radius:3px;border-top-right-radius:3px}.panel>.list-group:last-child .list-group-item:last-child,.panel>.panel-collapse>.list-group:last-child .list-group-item:last-child{border-bottom:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.panel-heading+.panel-collapse>.list-group .list-group-item:first-child{border-top-left-radius:0;border-top-right-radius:0}.list-group+.panel-footer,.panel-heading+.list-group .list-group-item:first-child{border-top-width:0}.panel>.panel-collapse>.table,.panel>.table,.panel>.table-responsive>.table{margin-bottom:0}.panel>.panel-collapse>.table caption,.panel>.table-responsive>.table caption,.panel>.table caption{padding-right:15px;padding-left:15px}.panel>.table-responsive:first-child>.table:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child,.panel>.table:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child,.panel>.table:first-child>thead:first-child>tr:first-child{border-top-left-radius:3px;border-top-right-radius:3px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table:first-child>thead:first-child>tr:first-child th:first-child{border-top-left-radius:3px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table:first-child>thead:first-child>tr:first-child th:last-child{border-top-right-radius:3px}.panel>.table-responsive:last-child>.table:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child,.panel>.table:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child{border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:first-child{border-bottom-left-radius:3px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:last-child{border-bottom-right-radius:3px}.panel>.panel-body+.table,.panel>.panel-body+.table-responsive,.panel>.table+.panel-body,.panel>.table-responsive+.panel-body{border-top:1px solid #ddd}.panel>.table>tbody:first-child>tr:first-child td,.panel>.table>tbody:first-child>tr:first-child th{border-top:0}.panel>.table-bordered,.panel>.table-responsive>.table-bordered{border:0}.panel>.table-bordered>tbody>tr>td:first-child,.panel>.table-bordered>tbody>tr>th:first-child,.panel>.table-bordered>tfoot>tr>td:first-child,.panel>.table-bordered>tfoot>tr>th:first-child,.panel>.table-bordered>thead>tr>td:first-child,.panel>.table-bordered>thead>tr>th:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:first-child,.panel>.table-responsive>.table-bordered>thead>tr>td:first-child,.panel>.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.panel>.table-bordered>tbody>tr>td:last-child,.panel>.table-bordered>tbody>tr>th:last-child,.panel>.table-bordered>tfoot>tr>td:last-child,.panel>.table-bordered>tfoot>tr>th:last-child,.panel>.table-bordered>thead>tr>td:last-child,.panel>.table-bordered>thead>tr>th:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:last-child,.panel>.table-responsive>.table-bordered>thead>tr>td:last-child,.panel>.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.panel>.table-bordered>tbody>tr:first-child>td,.panel>.table-bordered>tbody>tr:first-child>th,.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-bordered>thead>tr:first-child>td,.panel>.table-bordered>thead>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>thead>tr:first-child>td,.panel>.table-responsive>.table-bordered>thead>tr:first-child>th{border-bottom:0}.panel>.table-responsive{margin-bottom:0;border:0}.panel-group{margin-bottom:20px}.panel-group .panel{margin-bottom:0;border-radius:4px}.panel-group .panel+.panel{margin-top:5px}.panel-group .panel-heading{border-bottom:0}.panel-group .panel-heading+.panel-collapse>.list-group,.panel-group .panel-heading+.panel-collapse>.panel-body{border-top:1px solid #ddd}.panel-group .panel-footer{border-top:0}.panel-group .panel-footer+.panel-collapse .panel-body{border-bottom:1px solid #ddd}.panel-default{border-color:#ddd}.panel-default>.panel-heading{color:#333;background-color:#f5f5f5;border-color:#ddd}.panel-default>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ddd}.panel-default>.panel-heading .badge{color:#f5f5f5;background-color:#333}.panel-default>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ddd}.panel-primary{border-color:#337ab7}.panel-primary>.panel-heading{color:#fff;background-color:#337ab7;border-color:#337ab7}.panel-primary>.panel-heading+.panel-collapse>.panel-body{border-top-color:#337ab7}.panel-primary>.panel-heading .badge{color:#337ab7;background-color:#fff}.panel-primary>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#337ab7}.panel-success{border-color:#d6e9c6}.panel-success>.panel-heading{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.panel-success>.panel-heading+.panel-collapse>.panel-body{border-top-color:#d6e9c6}.panel-success>.panel-heading .badge{color:#dff0d8;background-color:#3c763d}.panel-success>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#d6e9c6}.panel-info{border-color:#bce8f1}.panel-info>.panel-heading{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.panel-info>.panel-heading+.panel-collapse>.panel-body{border-top-color:#bce8f1}.panel-info>.panel-heading .badge{color:#d9edf7;background-color:#31708f}.panel-info>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#bce8f1}.panel-warning{border-color:#faebcc}.panel-warning>.panel-heading{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.panel-warning>.panel-heading+.panel-collapse>.panel-body{border-top-color:#faebcc}.panel-warning>.panel-heading .badge{color:#fcf8e3;background-color:#8a6d3b}.panel-warning>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#faebcc}.panel-danger{border-color:#ebccd1}.panel-danger>.panel-heading{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.panel-danger>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ebccd1}.panel-danger>.panel-heading .badge{color:#f2dede;background-color:#a94442}.panel-danger>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ebccd1}.embed-responsive{position:relative;display:block;height:0;padding:0;overflow:hidden}.embed-responsive .embed-responsive-item,.embed-responsive embed,.embed-responsive iframe,.embed-responsive object,.embed-responsive video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.embed-responsive-16by9{padding-bottom:56.25%}.embed-responsive-4by3{padding-bottom:75%}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,.15)}.well-lg{padding:24px;border-radius:6px}.well-sm{padding:9px;border-radius:3px}.close{float:right;font-size:21px;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;filter:alpha(opacity=20);opacity:.2}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer;filter:alpha(opacity=50);opacity:.5}button.close{-webkit-appearance:none;padding:0;cursor:pointer;background:transparent;border:0}.modal,.modal-open{overflow:hidden}.modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:20;display:none;-webkit-overflow-scrolling:touch;outline:0}.modal.fade .modal-dialog{-webkit-transition:-webkit-transform .3s ease-out;transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out;-webkit-transform:translateY(-25%);transform:translateY(-25%)}.modal.in .modal-dialog{-webkit-transform:translate(0);transform:translate(0)}.modal-open .modal{overflow-x:hidden;overflow-y:auto}.modal-dialog{position:relative;width:auto;margin:10px}.modal-content{position:relative;background-color:#fff;background-clip:padding-box;border:1px solid #999;border:1px solid rgba(0,0,0,.2);border-radius:6px;outline:0;box-shadow:0 3px 9px rgba(0,0,0,.5)}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:19;background-color:#000}.modal-backdrop.fade{filter:alpha(opacity=0);opacity:0}.modal-backdrop.in{filter:alpha(opacity=50);opacity:.5}.modal-header{padding:15px;border-bottom:1px solid #e5e5e5}.modal-header .close{margin-top:-2px}.modal-title{margin:0;line-height:1.42857143}.modal-body{position:relative;padding:15px}.modal-footer{padding:15px;text-align:right;border-top:1px solid #e5e5e5}.modal-footer .btn+.btn{margin-bottom:0;margin-left:5px}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.modal-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (min-width:768px){.modal-dialog{width:600px;margin:30px auto}.modal-content{box-shadow:0 5px 15px rgba(0,0,0,.5)}.modal-sm{width:300px}}@media (min-width:992px){.modal-lg{width:900px}}.tooltip{position:absolute;z-index:22;display:block;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;font-style:normal;font-weight:400;line-height:1.42857143;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;word-wrap:normal;white-space:normal;filter:alpha(opacity=0);opacity:0;line-break:auto}.tooltip.in{filter:alpha(opacity=90);opacity:.9}.tooltip.top{padding:5px 0;margin-top:-3px}.tooltip.right{padding:0 5px;margin-left:3px}.tooltip.bottom{padding:5px 0;margin-top:3px}.tooltip.left{padding:0 5px;margin-left:-3px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;background-color:#000;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.top-left .tooltip-arrow{right:5px}.tooltip.top-left .tooltip-arrow,.tooltip.top-right .tooltip-arrow{bottom:0;margin-bottom:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.top-right .tooltip-arrow{left:5px}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#000}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#000}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom-left .tooltip-arrow{top:0;right:5px;margin-top:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom-right .tooltip-arrow{top:0;left:5px;margin-top:-5px;border-width:0 5px 5px;border-bottom-color:#000}.popover{position:absolute;top:0;left:0;z-index:21;display:none;max-width:276px;padding:1px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-style:normal;font-weight:400;line-height:1.42857143;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;word-wrap:normal;white-space:normal;background-color:#fff;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);border-radius:6px;box-shadow:0 5px 10px rgba(0,0,0,.2);line-break:auto}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{padding:8px 14px;margin:0;font-size:14px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.popover-content{padding:9px 14px}.popover>.arrow,.popover>.arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.popover>.arrow{border-width:11px}.popover>.arrow:after{content:"";border-width:10px}.popover.top>.arrow{bottom:-11px;left:50%;margin-left:-11px;border-top-color:#999;border-top-color:rgba(0,0,0,.25);border-bottom-width:0}.popover.top>.arrow:after{bottom:1px;margin-left:-10px;content:" ";border-top-color:#fff;border-bottom-width:0}.popover.right>.arrow{top:50%;left:-11px;margin-top:-11px;border-right-color:#999;border-right-color:rgba(0,0,0,.25);border-left-width:0}.popover.right>.arrow:after{bottom:-10px;left:1px;content:" ";border-right-color:#fff;border-left-width:0}.popover.bottom>.arrow{top:-11px;left:50%;margin-left:-11px;border-top-width:0;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,.25)}.popover.bottom>.arrow:after{top:1px;margin-left:-10px;content:" ";border-top-width:0;border-bottom-color:#fff}.popover.left>.arrow{top:50%;right:-11px;margin-top:-11px;border-right-width:0;border-left-color:#999;border-left-color:rgba(0,0,0,.25)}.popover.left>.arrow:after{right:1px;bottom:-10px;content:" ";border-right-width:0;border-left-color:#fff}.carousel,.carousel-inner{position:relative}.carousel-inner{width:100%;overflow:hidden}.carousel-inner>.item{position:relative;display:none;-webkit-transition:left .6s ease-in-out;transition:left .6s ease-in-out}.carousel-inner>.item>a>img,.carousel-inner>.item>img{line-height:1}@media (-webkit-transform-3d),all and (transform-3d){.carousel-inner>.item{-webkit-transition:-webkit-transform .6s ease-in-out;transition:-webkit-transform .6s ease-in-out;transition:transform .6s ease-in-out;transition:transform .6s ease-in-out,-webkit-transform .6s ease-in-out;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000px;perspective:1000px}.carousel-inner>.item.active.right,.carousel-inner>.item.next{left:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.carousel-inner>.item.active.left,.carousel-inner>.item.prev{left:0;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.carousel-inner>.item.active,.carousel-inner>.item.next.left,.carousel-inner>.item.prev.right{left:0;-webkit-transform:translateZ(0);transform:translateZ(0)}}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:0;bottom:0;left:0;width:15%;font-size:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6);background-color:transparent;filter:alpha(opacity=50);opacity:.5}.carousel-control.left{background-image:-webkit-linear-gradient(left,rgba(0,0,0,.5),rgba(0,0,0,.0001));background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.5)),to(rgba(0,0,0,.0001)));background-image:linear-gradient(90deg,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001));filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#80000000\',endColorstr=\'#00000000\',GradientType=1);background-repeat:repeat-x}.carousel-control.right{right:0;left:auto;background-image:-webkit-linear-gradient(left,rgba(0,0,0,.0001),rgba(0,0,0,.5));background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.0001)),to(rgba(0,0,0,.5)));background-image:linear-gradient(90deg,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5));filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#00000000\',endColorstr=\'#80000000\',GradientType=1);background-repeat:repeat-x}.carousel-control:focus,.carousel-control:hover{color:#fff;text-decoration:none;filter:alpha(opacity=90);outline:0;opacity:.9}.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{position:absolute;top:50%;z-index:4;display:inline-block;margin-top:-10px}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{left:50%;margin-left:-10px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{right:50%;margin-right:-10px}.carousel-control .icon-next,.carousel-control .icon-prev{width:20px;height:20px;font-family:serif;line-height:1}.carousel-control .icon-prev:before{content:\'\\2039\'}.carousel-control .icon-next:before{content:\'\\203a\'}.carousel-indicators{position:absolute;bottom:10px;left:50%;z-index:6;width:60%;padding-left:0;margin-left:-30%;text-align:center;list-style:none}.carousel-indicators li{display:inline-block;width:10px;height:10px;margin:1px;text-indent:-999px;cursor:pointer;background-color:#000\\9;background-color:transparent;border:1px solid #fff;border-radius:10px}.carousel-indicators .active{width:12px;height:12px;margin:0;background-color:#fff}.carousel-caption{position:absolute;right:15%;bottom:20px;left:15%;z-index:5;padding-top:20px;padding-bottom:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6)}.carousel-caption .btn{text-shadow:none}@media screen and (min-width:768px){.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{width:30px;height:30px;margin-top:-10px;font-size:30px}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{margin-left:-10px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{margin-right:-10px}.carousel-caption{right:20%;left:20%;padding-bottom:30px}.carousel-indicators{bottom:20px}}.btn-group-vertical>.btn-group:after,.btn-group-vertical>.btn-group:before,.btn-toolbar:after,.btn-toolbar:before,.clearfix:after,.clearfix:before,.container-fluid:after,.container-fluid:before,.container:after,.container:before,.dl-horizontal dd:after,.dl-horizontal dd:before,.form-horizontal .form-group:after,.form-horizontal .form-group:before,.modal-footer:after,.modal-footer:before,.modal-header:after,.modal-header:before,.nav:after,.nav:before,.navbar-collapse:after,.navbar-collapse:before,.navbar-header:after,.navbar-header:before,.navbar:after,.navbar:before,.pager:after,.pager:before,.panel-body:after,.panel-body:before,.row:after,.row:before{display:table;content:" "}.btn-group-vertical>.btn-group:after,.btn-toolbar:after,.clearfix:after,.container-fluid:after,.container:after,.dl-horizontal dd:after,.form-horizontal .form-group:after,.modal-footer:after,.modal-header:after,.nav:after,.navbar-collapse:after,.navbar-header:after,.navbar:after,.pager:after,.panel-body:after,.row:after{clear:both}.center-block{display:block;margin-right:auto;margin-left:auto}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none!important}.affix{position:fixed}@-ms-viewport{width:device-width}.visible-lg,.visible-lg-block,.visible-lg-inline,.visible-lg-inline-block,.visible-md,.visible-md-block,.visible-md-inline,.visible-md-inline-block,.visible-sm,.visible-sm-block,.visible-sm-inline,.visible-sm-inline-block,.visible-xs,.visible-xs-block,.visible-xs-inline,.visible-xs-inline-block{display:none!important}@media (max-width:767px){.visible-xs{display:block!important}table.visible-xs{display:table!important}tr.visible-xs{display:table-row!important}td.visible-xs,th.visible-xs{display:table-cell!important}}@media (max-width:767px){.visible-xs-block{display:block!important}}@media (max-width:767px){.visible-xs-inline{display:inline!important}}@media (max-width:767px){.visible-xs-inline-block{display:inline-block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm{display:block!important}table.visible-sm{display:table!important}tr.visible-sm{display:table-row!important}td.visible-sm,th.visible-sm{display:table-cell!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-block{display:block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline{display:inline!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline-block{display:inline-block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md{display:block!important}table.visible-md{display:table!important}tr.visible-md{display:table-row!important}td.visible-md,th.visible-md{display:table-cell!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-block{display:block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline{display:inline!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline-block{display:inline-block!important}}@media (min-width:1200px){.visible-lg{display:block!important}table.visible-lg{display:table!important}tr.visible-lg{display:table-row!important}td.visible-lg,th.visible-lg{display:table-cell!important}}@media (min-width:1200px){.visible-lg-block{display:block!important}}@media (min-width:1200px){.visible-lg-inline{display:inline!important}}@media (min-width:1200px){.visible-lg-inline-block{display:inline-block!important}}@media (max-width:767px){.hidden-xs{display:none!important}}@media (min-width:768px) and (max-width:991px){.hidden-sm{display:none!important}}@media (min-width:992px) and (max-width:1199px){.hidden-md{display:none!important}}@media (min-width:1200px){.hidden-lg{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:block!important}table.visible-print{display:table!important}tr.visible-print{display:table-row!important}td.visible-print,th.visible-print{display:table-cell!important}}.visible-print-block{display:none!important}@media print{.visible-print-block{display:block!important}}.visible-print-inline{display:none!important}@media print{.visible-print-inline{display:inline!important}}.visible-print-inline-block{display:none!important}@media print{.visible-print-inline-block{display:inline-block!important}}@media print{.hidden-print{display:none!important}}body,html{margin:0}#map,body,html{height:100%}.external{background-image:-webkit-linear-gradient(transparent,transparent),url("data:image/svg+xml;charset=utf-8,%3C?xml version=\'1.0\' encoding=\'UTF-8\'?%3E%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'10\' height=\'10\'%3E%3Cg transform=\'translate(-826.429 -698.791)\'%3E%3Crect width=\'5.982\' height=\'5.982\' x=\'826.929\' y=\'702.309\' fill=\'%23fff\' stroke=\'%2306c\'/%3E%3Cg%3E%3Cpath d=\'M831.194 698.791h5.234v5.391l-1.571 1.545-1.31-1.31-2.725 2.725-2.689-2.689 2.808-2.808-1.311-1.311z\' fill=\'%2306f\'/%3E%3Cpath d=\'M835.424 699.795l.022 4.885-1.817-1.817-2.881 2.881-1.228-1.228 2.881-2.881-1.851-1.851z\' fill=\'%23fff\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");background-image:linear-gradient(transparent,transparent),url("data:image/svg+xml;charset=utf-8,%3C?xml version=\'1.0\' encoding=\'UTF-8\'?%3E%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'10\' height=\'10\'%3E%3Cg transform=\'translate(-826.429 -698.791)\'%3E%3Crect width=\'5.982\' height=\'5.982\' x=\'826.929\' y=\'702.309\' fill=\'%23fff\' stroke=\'%2306c\'/%3E%3Cg%3E%3Cpath d=\'M831.194 698.791h5.234v5.391l-1.571 1.545-1.31-1.31-2.725 2.725-2.689-2.689 2.808-2.808-1.311-1.311z\' fill=\'%2306f\'/%3E%3Cpath d=\'M835.424 699.795l.022 4.885-1.817-1.817-2.881 2.881-1.228-1.228 2.881-2.881-1.851-1.851z\' fill=\'%23fff\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");background-position:100%;background-repeat:no-repeat;padding-right:13px}.dataset-spatial-minimap{height:120px}.code-nowrap{word-wrap:normal;white-space:pre}.sidebar{z-index:23!important}.ac-container{width:auto;margin:10px auto;text-align:left;overflow-y:auto;overflow-x:hidden;height:auto}.ac-container label{font-family:BebasNeueRegular,Arial Narrow,Arial,sans-serif;padding:5px 20px;position:relative;z-index:7;display:block;cursor:pointer;color:#777;text-shadow:1px 1px 1px hsla(0,0%,100%,.8);line-height:30px;font-size:17px;background:#fff;background:-webkit-gradient(linear,left top,left bottom,color-stop(1%,#fff),color-stop(100%,#eaeaea));background:-webkit-linear-gradient(top,#fff 1%,#eaeaea);background:linear-gradient(top,#fff 1%,#eaeaea);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#ffffff\',endColorstr=\'#eaeaea\',GradientType=0);box-shadow:0 0 0 1px hsla(0,0%,61%,.3),inset 1px 0 0 0 hsla(0,0%,100%,.9),0 2px 2px rgba(0,0,0,.1);box-sizing:content-box;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ac-container label:hover{background:#fff}.ac-container input.menu:checked+label,.ac-container input.menu:checked+label:hover{background:#c6e1ec;color:#3d7489;text-shadow:0 1px 1px hsla(0,0%,100%,.6);box-shadow:0 0 0 1px hsla(0,0%,61%,.3),0 2px 2px rgba(0,0,0,.1)}.ac-container input.menu:checked+label:after,.ac-container label:hover:after{content:\'\';position:absolute;width:24px;height:24px;right:13px;top:7px;background:transparent url(app/css/styledLayerControl/images/arrow_down.png) no-repeat 50%}.ac-container input.menu:checked+label:after{background-image:url(app/css/styledLayerControl/images/arrow_up.png)}.ac-container input.menu{display:none}.ac-container article{background:hsla(0,0%,100%,.5);margin-top:-1px;overflow:hidden;height:0;position:relative;z-index:5;-webkit-transition:height .3s ease-in-out,box-shadow .6s linear;transition:height .3s ease-in-out,box-shadow .6s linear}.ac-container input.menu:checked~article{-webkit-transition:height .5s ease-in-out,box-shadow .1s linear;transition:height .5s ease-in-out,box-shadow .1s linear;box-shadow:0 0 0 1px hsla(0,0%,61%,.3)}.ac-container input.menu:checked~article.ac-large{height:auto;max-height:200px;padding-top:5px;overflow-y:auto}.menu-item-checkbox,.menu-item-radio{font-family:Ubuntu-Regular,Arial,sans-serif;font-size:13px}.bt_delete{position:relative;float:right;background-image:url(app/css/styledLayerControl/images/delete.png);background-color:transparent;background-repeat:no-repeat;background-position:0 0;border:none;cursor:pointer;height:16px;width:16px;vertical-align:middle}.leaflet-control-layers{padding:6px 8px;font:14px/16px Arial,Helvetica,sans-serif;background:#fff;background:hsla(0,0%,100%,.8);box-shadow:0 0 15px rgba(0,0,0,.2);border-radius:5px}input[type=checkbox].leaflet-control-layers-selector,input[type=radio].leaflet-control-layers-selector{margin:3px 3px 0 5px}.snow{display:none;height:100%;left:0;position:absolute;top:0;width:100%;z-index:1;pointer-events:none;opacity:0;-webkit-transition:opacity 3s;transition:opacity 3s}#snow1{background-image:url(\'http://www.wearewebstars.dk/codepen/img/s1.png\');-webkit-animation:b 5s linear infinite;animation:b 5s linear infinite}#snow2{background-image:url(\'http://www.wearewebstars.dk/codepen/img/s2.png\');-webkit-animation:c 20s linear infinite;animation:c 20s linear infinite}#snow3{background-image:url(\'http://www.wearewebstars.dk/codepen/img/s3.png\');-webkit-animation:d 30s linear infinite;animation:d 30s linear infinite}@-webkit-keyframes b{0%{background-position:0 0}to{background-position:500px 500px}}@keyframes b{0%{background-position:0 0}to{background-position:500px 500px}}@-webkit-keyframes c{0%{background-position:0 0}to{background-position:400px 800px}}@keyframes c{0%{background-position:0 0}to{background-position:400px 800px}}@-webkit-keyframes d{0%{background-position:0 0}to{background-position:-600px 900px}}@keyframes d{0%{background-position:0 0}to{background-position:-600px 900px}}\r\n/*# sourceMappingURL=__.css.map */');
})(function(a){a()});